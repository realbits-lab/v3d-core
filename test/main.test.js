(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["v3d-core"] = factory();
	else
		root["v3d-core"] = factory();
})(self, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/babylon-mtoon-material/dist/index.module.js":
/*!******************************************************************!*\
  !*** ./node_modules/babylon-mtoon-material/dist/index.module.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

!function(e,i){ true?module.exports=i(__webpack_require__(/*! @babylonjs/core/Misc/decorators */ "./node_modules/@babylonjs/core/Misc/decorators.js"),__webpack_require__(/*! @babylonjs/core/Misc/smartArray */ "./node_modules/@babylonjs/core/Misc/smartArray.js"),__webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js"),__webpack_require__(/*! @babylonjs/core/Maths/math.vector */ "./node_modules/@babylonjs/core/Maths/math.vector.js"),__webpack_require__(/*! @babylonjs/core/Maths/math.color */ "./node_modules/@babylonjs/core/Maths/math.color.js"),__webpack_require__(/*! @babylonjs/core/Buffers/buffer */ "./node_modules/@babylonjs/core/Buffers/buffer.js"),__webpack_require__(/*! @babylonjs/core/Materials/imageProcessingConfiguration */ "./node_modules/@babylonjs/core/Materials/imageProcessingConfiguration.js"),__webpack_require__(/*! @babylonjs/core/Materials/material */ "./node_modules/@babylonjs/core/Materials/material.js"),__webpack_require__(/*! @babylonjs/core/Materials/pushMaterial */ "./node_modules/@babylonjs/core/Materials/pushMaterial.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialHelper */ "./node_modules/@babylonjs/core/Materials/materialHelper.js"),__webpack_require__(/*! @babylonjs/core/Engines/constants */ "./node_modules/@babylonjs/core/Engines/constants.js"),__webpack_require__(/*! @babylonjs/core/Materials/effectFallbacks */ "./node_modules/@babylonjs/core/Materials/effectFallbacks.js"),__webpack_require__(/*! @babylonjs/core/Materials/effect */ "./node_modules/@babylonjs/core/Materials/effect.js"),__webpack_require__(/*! @babylonjs/core/Materials/material.detailMapConfiguration */ "./node_modules/@babylonjs/core/Materials/material.detailMapConfiguration.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialPluginEvent */ "./node_modules/@babylonjs/core/Materials/materialPluginEvent.js"),__webpack_require__(/*! @babylonjs/core/Misc/iInspectable */ "./node_modules/@babylonjs/core/Misc/iInspectable.js"),__webpack_require__(/*! @babylonjs/core/sceneComponent */ "./node_modules/@babylonjs/core/sceneComponent.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialDefines */ "./node_modules/@babylonjs/core/Materials/materialDefines.js")):0}(self,((e,i,n,t,o,a,r,s,l,d,h,f,u,m,c,p,g,_)=>(()=>{"use strict";var A={908:e=>{e.exports=a},556:e=>{e.exports=h},272:e=>{e.exports=u},55:e=>{e.exports=f},677:e=>{e.exports=r},66:e=>{e.exports=s},824:e=>{e.exports=m},713:e=>{e.exports=_},221:e=>{e.exports=d},628:e=>{e.exports=c},721:e=>{e.exports=l},548:e=>{e.exports=o},694:e=>{e.exports=t},388:i=>{i.exports=e},812:e=>{e.exports=p},474:e=>{e.exports=i},538:e=>{e.exports=n},667:e=>{e.exports=g}},I={};function v(e){var i=I[e];if(void 0!==i)return i.exports;var n=I[e]={exports:{}};return A[e](n,n.exports,v),n.exports}v.d=(e,i)=>{for(var n in i)v.o(i,n)&&!v.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},v.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),v.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var M={};return(()=>{function e(e,i,n,t){var o,a=arguments.length,r=a<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,n,t);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(i,n,r):o(i,n))||r);return a>3&&r&&Object.defineProperty(i,n,r),r}v.r(M),v.d(M,{CullMode:()=>L,DebugMode:()=>T,MToonMaterial:()=>x,OutlineColorMode:()=>N,OutlineWidthMode:()=>D}),Object.create,Object.create;var i=v(388),n=v(474),t=v(538),o=v(694),a=v(548),r=v(908),s=v(677),l=v(66),d=v(721),h=v(221),f=v(556),u=v(55),m=v(272),c=v(824),p=v(628),g=v(812),_=v(667);class A{constructor(e,i){this.scene=e,this.material=i,this.name=`MToonOutline_${i.name}_${A.rendererId++}`,this.scene._addComponent(this),this._engine=this.scene.getEngine(),this._passIdForDrawWrapper=[];for(let e=0;e<1;++e)this._passIdForDrawWrapper[e]=this._engine.createRenderPassId(`Outline Renderer (${e})`)}register(){this.scene._afterRenderingMeshStage.registerStep(_.SceneComponentConstants.STEP_AFTERRENDERINGMESH_OUTLINE,this,this._afterRenderingMesh)}rebuild(){}dispose(){for(let e=0;e<this._passIdForDrawWrapper.length;++e)this._engine.releaseRenderPassId(this._passIdForDrawWrapper[e])}render(e,i,n){n=null!=n?n:this._passIdForDrawWrapper[0];const t=this.scene,o=e.effect;if(!o||!o.isReady()||!this.scene.activeCamera)return;const a=e._getDrawWrapper(n,!0);if(!a)return;if(a.setEffect(o),!a.effect||!a.effect.isReady())return;const r=e.getMesh(),s=r._internalAbstractMeshDataInfo._actAsRegularMesh?r:null,l=e.getRenderingMesh(),d=s||l;t.activeCamera&&(this.material.applyOutlineCullMode(),this.material.enableOutlineRender(),this._engine.enableEffect(a),this.isHardwareInstancedRendering(e,i)||l._bind(e,o,this.material.fillMode),this.material._preBind(o),l._processRendering(d,e,o,this.material.fillMode,i,this.isHardwareInstancedRendering(e,i),((i,n,t)=>{t&&t.bindForSubMesh(n,d,e)}),this.material),this.material.restoreOutlineCullMode(),this.material.disaableOutlineRender())}_afterRenderingMesh(e,i,n){if(!this.willRender(i))return;const t=this._engine.cullBackFaces;this._engine.cullBackFaces=!1,this.render(i,n,this._passIdForDrawWrapper[0]),this._engine.cullBackFaces=t}isHardwareInstancedRendering(e,i){return!!this._engine.getCaps().instancedArrays&&null!==i.visibleInstances[e._id]&&void 0!==i.visibleInstances[e._id]&&e.getRenderingMesh().hasThinInstances}willRender(e){const i=e.getMaterial();return!(!i||"MToonMaterial"!==i.getClassName()||i.getOutlineRendererName()!==this.name)}}A.rendererId=0;var I=v(713);class E extends I.MaterialDefines{constructor(e){super(e),this.CUSTOMUSERLIGHTING=!0,this.MTOON_OUTLINE_WIDTH_WORLD=!1,this.MTOON_OUTLINE_WIDTH_SCREEN=!1,this.MTOON_OUTLINE_COLOR_FIXED=!1,this.MTOON_OUTLINE_COLOR_MIXED=!1,this.MTOON_DEBUG_NORMAL=!1,this.MTOON_DEBUG_LITSHADERRATE=!1,this.SHADE=!1,this.SHADEDIRECTUV=0,this.RECEIVE_SHADOW=!1,this.RECEIVE_SHADOWDIRECTUV=0,this.SHADING_GRADE=!1,this.SHADING_GRADEDIRECTUV=0,this.RIM=!1,this.RIMDIRECTUV=0,this.MATCAP=!1,this.MATCAPDIRECTUV=0,this.OUTLINE_WIDTH=!1,this.OUTLINE_WIDTHDIRECTUV=0,this.UV_ANIMATION_MASK=!1,this.UV_ANIMATION_MASKDIRECTUV=0,this.MAINUV1=!1,this.MAINUV2=!1,this.MAINUV3=!1,this.MAINUV4=!1,this.MAINUV5=!1,this.MAINUV6=!1,this.DIFFUSE=!1,this.DIFFUSEDIRECTUV=0,this.BAKED_VERTEX_ANIMATION_TEXTURE=!1,this.EMISSIVE=!1,this.EMISSIVEDIRECTUV=0,this.BUMP=!1,this.BUMPDIRECTUV=0,this.PARALLAX=!1,this.PARALLAXOCCLUSION=!1,this.CLIPPLANE=!1,this.CLIPPLANE2=!1,this.CLIPPLANE3=!1,this.CLIPPLANE4=!1,this.CLIPPLANE5=!1,this.CLIPPLANE6=!1,this.ALPHATEST=!1,this.DEPTHPREPASS=!1,this.ALPHAFROMDIFFUSE=!1,this.POINTSIZE=!1,this.FOG=!1,this.NORMAL=!1,this.UV1=!1,this.UV2=!1,this.UV3=!1,this.UV4=!1,this.UV5=!1,this.UV6=!1,this.VERTEXCOLOR=!1,this.VERTEXALPHA=!1,this.NUM_BONE_INFLUENCERS=0,this.BonesPerMesh=0,this.BONETEXTURE=!1,this.BONES_VELOCITY_ENABLED=!1,this.INSTANCES=!1,this.THIN_INSTANCES=!1,this.OBJECTSPACE_NORMALMAP=!1,this.LOGARITHMICDEPTH=!1,this.TWOSIDEDLIGHTING=!1,this.SHADOWFLOAT=!1,this.MORPHTARGETS=!1,this.MORPHTARGETS_NORMAL=!1,this.MORPHTARGETS_TANGENT=!1,this.MORPHTARGETS_UV=!1,this.NUM_MORPH_INFLUENCERS=0,this.MORPHTARGETS_TEXTURE=!1,this.NONUNIFORMSCALING=!1,this.PREMULTIPLYALPHA=!1,this.ALPHATEST_AFTERALLALPHACOMPUTATIONS=!1,this.ALPHABLEND=!0,this.PREPASS=!1,this.PREPASS_IRRADIANCE=!1,this.PREPASS_IRRADIANCE_INDEX=-1,this.PREPASS_ALBEDO_SQRT=!1,this.PREPASS_ALBEDO_SQRT_INDEX=-1,this.PREPASS_DEPTH=!1,this.PREPASS_DEPTH_INDEX=-1,this.PREPASS_NORMAL=!1,this.PREPASS_NORMAL_INDEX=-1,this.PREPASS_POSITION=!1,this.PREPASS_POSITION_INDEX=-1,this.PREPASS_VELOCITY=!1,this.PREPASS_VELOCITY_INDEX=-1,this.PREPASS_REFLECTIVITY=!1,this.PREPASS_REFLECTIVITY_INDEX=-1,this.SCENE_MRT_COUNT=0,this.IMAGEPROCESSING=!1,this.VIGNETTE=!1,this.VIGNETTEBLENDMODEMULTIPLY=!1,this.VIGNETTEBLENDMODEOPAQUE=!1,this.TONEMAPPING=!1,this.TONEMAPPING_ACES=!1,this.CONTRAST=!1,this.COLORCURVES=!1,this.COLORGRADING=!1,this.COLORGRADING3D=!1,this.SAMPLER3DGREENDEPTH=!1,this.SAMPLER3DBGRMAP=!1,this.IMAGEPROCESSINGPOSTPROCESS=!1,this.SKIPFINALCOLORCLAMP=!1,this.MULTIVIEW=!1,this.ORDER_INDEPENDENT_TRANSPARENCY=!1,this.ORDER_INDEPENDENT_TRANSPARENCY_16BITS=!1,this.IS_REFLECTION_LINEAR=!1,this.IS_REFRACTION_LINEAR=!1,this.EXPOSURE=!1,this.FLIP_U=!1,this.FLIP_V=!1,this.rebuild()}setReflectionMode(e){throw new Error("This material cannot use `setReflectionMode`")}}const S={effect:null,subMesh:null};var T,N,D,L;!function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.LitShadeRate=2]="LitShadeRate"}(T||(T={})),function(e){e[e.FixedColor=0]="FixedColor",e[e.MixedLighting=1]="MixedLighting"}(N||(N={})),function(e){e[e.None=0]="None",e[e.WorldCorrdinates=1]="WorldCorrdinates",e[e.ScreenCoordinates=2]="ScreenCoordinates"}(D||(D={})),function(e){e[e.Off=0]="Off",e[e.Front=1]="Front",e[e.Back=2]="Back"}(L||(L={}));class x extends d.PushMaterial{constructor(e,i){super(e,i),this._diffuseTexture=null,this.diffuseTexture=null,this._emissiveTexture=null,this.emissiveTexture=null,this._bumpTexture=null,this.bumpTexture=null,this._shadeTexture=null,this.shadeTexture=null,this._receiveShadowTexture=null,this.receiveShadowTexture=null,this._shadingGradeTexture=null,this.shadingGradeTexture=null,this._rimTexture=null,this.rimTexture=null,this._matCapTexture=null,this.matCapTexture=null,this._outlineWidthTexture=null,this.outlineWidthTexture=null,this._uvAnimationMaskTexture=null,this.uvAnimationMaskTexture=null,this.diffuseColor=new a.Color3(1,1,1),this.ambientColor=new a.Color3(0,0,0),this.emissiveColor=new a.Color3(0,0,0),this.shadeColor=new a.Color3(.97,.81,.86),this.rimColor=new a.Color3(0,0,0),this.outlineColor=new a.Color3(0,0,0),this.useEmissiveAsIllumination=!1,this.linkEmissiveWithDiffuse=!1,this.useReflectionOverAlpha=!1,this._disableLighting=!1,this.useObjectSpaceNormalMap=!1,this.useParallax=!1,this.useParallaxOcclusion=!1,this.specularSupported=!1,this.useLightmapAsShadowmap=!1,this.useVertexColor=!1,this.useBones=!0,this.useMorphTargets=!0,this.useVertexAlpha=!1,this.useBakedVertexAnimation=!1,this.alphaCutOff=.4,this._useAlphaFromDiffuseTexture=!0,this._maxSimultaneousLights=4,this._invertNormalMapX=!0,this._invertNormalMapY=!0,this._twoSidedLighting=!1,this._renderTargets=new n.SmartArray(16),this._worldViewProjectionMatrix=o.Matrix.Zero(),this._globalAmbientColor=new a.Color3(0,0,0),this._cacheHasRenderTargetTextures=!1,this._bumpScale=1,this._receiveShadowRate=1,this._shadingGradeRate=1,this._shadeShift=0,this._shadeToony=.9,this._lightColorAttenuation=0,this._indirectLightIntensity=.1,this._rimLightingMix=0,this._rimFresnelPower=1,this._rimLift=0,this._outlineWidth=.5,this._outlineScaledMaxDistance=1,this._outlineLightingMix=1,this._uvAnimationScrollX=0,this._uvAnimationScrollY=0,this._uvAnimationRotation=0,this._alphaTest=!1,this._alphaBlend=!1,this._debugMode=T.None,this.debugMode=T.None,this._outlineWidthMode=D.None,this.isOutline=0,this.outlineColorMode=N.MixedLighting,this._cullMode=L.Back,this._outlineCullMode=L.Front,this.outlineCullMode=L.Front,this.storedCullMode=L.Back,this.flipU=!1,this.flipV=!1,this.detailMap=new c.DetailMapConfiguration(this),this._attachImageProcessingConfiguration(null),this.getRenderTargetTextures=()=>(this._renderTargets.reset(),this._eventInfo.renderTargets=this._renderTargets,this._callbackPluginEventFillRenderTargetTextures(this._eventInfo),this._renderTargets),m.Effect.IncludesShadersStore.mtoonUboDeclaration||(m.Effect.IncludesShadersStore.mtoonUboDeclaration="// it will be replaced to UboDeclaration(WebGL2) or VertexDeclaration(WebGL1).\n\nlayout(std140, column_major) uniform;\n\nuniform Material\n{\n    // Color & Texture\n    vec4 vDiffuseColor;\n    vec2 vDiffuseInfos;\n    mat4 diffuseMatrix;\n    vec4 vEmissiveColor;\n    vec2 vEmissiveInfos;\n    mat4 emissiveMatrix;\n    vec3 vBumpInfos;\n    mat4 bumpMatrix;\n    vec3 vShadeColor;\n    vec2 vShadeInfos;\n    mat4 shadeMatrix;\n    vec2 vReceiveShadowInfos;\n    mat4 receiveShadowMatrix;\n    vec2 vShadingGradeInfos;\n    mat4 shadingGradeMatrix;\n    vec3 vRimColor;\n    vec2 vRimInfos;\n    mat4 rimMatrix;\n    vec2 vMatCapInfos;\n    mat4 matCapMatrix;\n    vec4 vOutlineColor;\n    vec2 vOutlineWidthInfos;\n    mat4 outlineWidthMatrix;\n    vec2 vUvAnimationMaskInfos;\n    mat4 uvAnimationMaskMatrix;\n\n    // babylon specific\n    vec2 vTangentSpaceParams;\n    float pointSize;\n\n    // MToon params\n    float shadingGradeRate;\n    float receiveShadowRate;\n    float shadeShift;\n    float shadeToony;\n    float lightColorAttenuation;\n    float indirectLightIntensity;\n    float rimLightingMix;\n    float rimFresnelPower;\n    float rimLift;\n    float outlineWidth;\n    float outlineScaledMaxDistance;\n    float outlineLightingMix;\n    float uvAnimationScrollX;\n    float uvAnimationScrollY;\n    float uvAnimationRotation;\n\n    vec3 vEyeUp;\n    float alphaCutOff;\n    vec3 vAmbientColor;\n    float aspect;\n    float isOutline;\n    vec4 time;\n};\n\n// babylon specific\n#include<sceneUboDeclaration>\n#include<meshUboDeclaration>\n",m.Effect.IncludesShadersStore.mtoonVertexDeclaration="// Uniforms\nuniform mat4 viewProjection;\nuniform mat4 view;\nuniform mat4 projection;\nuniform float outlineWidth;\nuniform float outlineScaledMaxDistance;\nuniform float outlineLightingMix;\nuniform float isOutline;\nuniform float aspect;\n\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n\n#ifdef SHADE\nuniform vec2 vShadeInfos;\nuniform mat4 shadeMatrix;\n#endif\n\n#ifdef RECEIVE_SHADOW\nuniform vec2 vReceiveShadowInfos;\nuniform mat4 receiveShadowMatrix;\n#endif\n\n#ifdef SHADING_GRADE\nuniform vec2 vShadingGradeInfos;\nuniform mat4 shadingGradeMatrix;\n#endif\n\n#ifdef RIM\nuniform vec2 vRimInfos;\nuniform mat4 rimMatrix;\n#endif\n\n#ifdef MATCAP\nuniform vec2 vMatCapInfos;\nuniform mat4 matCapMatrix;\n#endif\n\n#ifdef OUTLINE_WIDTH\nuniform vec2 vOutlineWidthInfos;\nuniform mat4 outlineWidthMatrix;\n#endif\n\n#ifdef UV_ANIMATION_MASK\nuniform vec2 vUvAnimationMaskInfos;\nuniform mat4 uvAnimationMaskMatrix;\n#endif\n\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n",m.Effect.IncludesShadersStore.mtoonFragmentDeclaration="uniform vec4 vEyePosition;\n\n// Colors\nuniform vec4 vDiffuseColor;\nuniform vec3 vEmissiveColor;\nuniform vec3 vShadeColor;\nuniform vec3 vRimColor;\nuniform vec4 vOutlineColor;\nuniform vec3 vAmbientColor;\n\nuniform vec3 vEyeUp;\nuniform float aspect;\nuniform float alphaCutOff;\nuniform float visibility;\nuniform float isOutline;\nuniform vec4 time;\n\n// Samplers\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n\n#ifdef SHADE\nuniform vec2 vShadeInfos;\n#endif\n\n#ifdef RECEIVE_SHADOW\nuniform vec2 vReceiveShadowInfos;\n#endif\n\n#ifdef SHADING_GRADE\nuniform vec2 vShadingGradeInfos;\n#endif\n\n#ifdef RIM\nuniform vec2 vRimInfos;\n#endif\n\n#ifdef MATCAP\nuniform vec2 vMatCapInfos;\n#endif\n\n#ifdef OUTLINE_WIDTH\nuniform vec2 vOutlineWidthInfos;\n#endif\n\n#ifdef UV_ANIMATION_MASK\nuniform vec2 vUvAnimationMaskInfos;\n#endif\n\n// MToon params\nuniform float shadingGradeRate;\nuniform float receiveShadowRate;\nuniform float shadeShift;\nuniform float shadeToony;\nuniform float lightColorAttenuation;\nuniform float indirectLightIntensity;\nuniform float rimLightingMix;\nuniform float rimFresnelPower;\nuniform float rimLift;\nuniform float outlineWidth;\nuniform float outlineScaledMaxDistance;\nuniform float outlineLightingMix;\nuniform float uvAnimationScrollX;\nuniform float uvAnimationScrollY;\nuniform float uvAnimationRotation;\n",m.Effect.IncludesShadersStore.mtoonFragmentFunctions="\n/**\n* Compute Directional or Point light direction\n*/\nvec3 computeLightDirection(vec4 lightData) {\n    return normalize(mix(lightData.xyz - vPositionW, -lightData.xyz, lightData.w));\n}\n\n/**\n* Compute Spot Light direction\n*/\nvec3 computeSpotLightDirection(vec4 lightData) {\n    return normalize(lightData.xyz - vPositionW);\n}\n\n/**\n* Compute Hemispheric light direction\n*/\nvec3 computeHemisphericLightDirection(vec4 lightData, vec3 vNormal) {\n    return normalize(lightData.xyz);\n}\n\n/**\n* Compute MToon diffuse lighting\n*/\nvec4 computeMToonDiffuseLighting(vec3 worldView, vec3 worldNormal, vec2 mainUv, vec3 lightDirection, vec4 lightDiffuse, float shadowAttenuation) {\n    float _receiveShadow = receiveShadowRate;\n#ifdef RECEIVE_SHADOW\n    _receiveShadow = _receiveShadow * texture2D(receiveShadowSampler, mainUv).r * vReceiveShadowInfos.y;\n#endif\n\n    float _shadingGrade = 0.0;\n#ifdef SHADING_GRADE\n    _shadingGrade = 1.0 - texture2D(shadingGradeSampler, mainUv).r * vShadingGradeInfos.y;\n#endif\n    _shadingGrade = 1.0 - shadingGradeRate * _shadingGrade;\n\n    // Lighting\n    vec3 _lightColor = lightDiffuse.rgb * step(0.5, length(lightDirection)); // length(lightDir) is zero if directional light is disabled.\n    float _dotNL = dot(lightDirection, worldNormal);\n#ifdef MTOON_FORWARD_ADD\n    float _lightAttenuation = 1.0;\n#else\n    float _lightAttenuation = shadowAttenuation * mix(1.0, shadowAttenuation, _receiveShadow);\n#endif\n\n    // lighting intensity\n    float _lightIntensity = _dotNL;\n    _lightIntensity = _lightIntensity * 0.5 + 0.5; // from [-1, +1] to [0, 1]\n    _lightIntensity = _lightIntensity * _lightAttenuation; // receive shadow\n    _lightIntensity = _lightIntensity * _shadingGrade; // darker\n    _lightIntensity = _lightIntensity * 2.0 - 1.0; // from [0, 1] to [-1, +1]\n    // tooned. mapping from [minIntensityThreshold, maxIntensityThreshold] to [0, 1]\n    float _maxIntensityThreshold = mix(1.0, shadeShift, shadeToony);\n    float _minIntensityThreshold = shadeShift;\n    _lightIntensity = clamp((_lightIntensity - _minIntensityThreshold) / max(EPS_COL, (_maxIntensityThreshold - _minIntensityThreshold)), 0.0, 1.0);\n\n    // Albedo color\n    vec3 _shade = vShadeColor;\n#ifdef SHADE\n    _shade = _shade * texture2D(shadeSampler, mainUv).rgb * vShadeInfos.y;\n#endif\n\n    vec4 _lit = vDiffuseColor;\n#ifdef DIFFUSE\n    _lit = _lit * texture2D(diffuseSampler, mainUv) * vDiffuseInfos.y;\n#endif\n    vec3 _col = mix(_shade.rgb, _lit.rgb, _lightIntensity);\n\n    // Direct Light\n    vec3 _lighting = _lightColor;\n    _lighting = mix(_lighting, vec3(max(EPS_COL, max(_lighting.x, max(_lighting.y, _lighting.z)))), lightColorAttenuation); // color atten\n#ifdef MTOON_FORWARD_ADD\n    _lighting *= 0.5; // darken if additional light\n    _lighting *= min(0, dotNL) + 1.0; // darken dotNL < 0 area by using half lambert\n    _lighting *= shadowAttenuation; // darken if receiving shadow\n#else\n    // base light does not darken.\n#endif\n    _col *= _lighting;\n\n    // Indirect Light\n#ifdef MTOON_FORWARD_ADD\n#else\n    vec3 _toonedGI = vAmbientColor.rgb; // TODO: GI\n    vec3 _indirectLighting = mix(_toonedGI, vAmbientColor.rgb, indirectLightIntensity);\n    _indirectLighting = mix(_indirectLighting, vec3(max(EPS_COL, max(_indirectLighting.x, max(_indirectLighting.y, _indirectLighting.z)))), lightColorAttenuation); // color atten\n    _col += _indirectLighting * _lit.rgb;\n\n    _col = min(_col.rgb, _lit.rgb); // comment out if you want to PBR absolutely.\n#endif\n\n    // parametric rim lighting\n#ifdef MTOON_FORWARD_ADD\n    vec3 _staticRimLighting = vec3(0.0);\n    vec3 _mixedRimLighting = _lighting;\n#else\n    vec3 _staticRimLighting = vec3(1.0);\n    vec3 _mixedRimLighting = _lighting + _indirectLighting;\n#endif\n    vec3 _rimLighting = mix(_staticRimLighting, _mixedRimLighting, rimLightingMix);\n    vec3 _rimColor = vRimColor.rgb;\n#ifdef RIM\n    _rimColor = _rimColor * texture2D(rimSampler, vRimUV + mainUv).rgb * vRimInfos.y;\n#endif\n    vec3 _rim = pow(clamp(1.0 - dot(worldNormal, worldView) + rimLift, 0.0, 1.0), rimFresnelPower) * _rimColor.rgb;\n    _col += mix(_rim * _rimLighting, vec3(0.0), isOutline);\n\n    // additive matcap\n#ifdef MTOON_FORWARD_ADD\n#else\n#ifdef MATCAP\n    vec3 _worldViewUp = normalize(vEyeUp - worldView * dot(worldView, vEyeUp));\n    vec3 _worldViewRight = normalize(cross(worldView, _worldViewUp));\n    vec2 _matCapUv = vec2(dot(_worldViewRight, worldNormal), dot(_worldViewUp, worldNormal)) * 0.5 + 0.5;\n    // uv.y is reversed\n    _matCapUv.y = (1.0 - _matCapUv.y);\n    vec3 _matCapLighting = texture2D(matCapSampler, _matCapUv).rgb * vMatCapInfos.y;\n    _col += mix(_matCapLighting, vec3(0.0), isOutline);\n#endif\n#endif\n\n    // Emission\n#ifdef MTOON_FORWARD_ADD\n#else\n    vec3 _emission = vEmissiveColor.rgb;\n#ifdef EMISSIVE\n    _emission *= texture2D(emissiveSampler, mainUv).rgb * vEmissiveInfos.y;\n#endif\n    _col += mix(_emission, vec3(0.0), isOutline);\n#endif\n\n    float _alpha = 1.0;\n\n#if defined(ALPHABLEND) || defined(ALPHATEST)\n    _alpha = mix(_lit.a, _lit.a * vOutlineColor.a, isOutline);\n#endif\n\n    // outline\n#ifdef MTOON_OUTLINE_COLOR_FIXED\n    _col = mix(_col, vOutlineColor.rgb, isOutline);\n#elif defined(MTOON_OUTLINE_COLOR_MIXED)\n    _col = mix(_col, vOutlineColor.rgb * mix(vec3(1.0), _col, outlineLightingMix), isOutline);\n#else\n#endif\n\n    // debug\n#ifdef MTOON_DEBUG_NORMAL\n    #ifdef MTOON_FORWARD_ADD\n        return vec4(0.0);\n    #else\n        return vec4(worldNormal * 0.5 + 0.5, _lit.a);\n    #endif\n#elif defined(MTOON_DEBUG_LITSHADERATE)\n    #ifdef MTOON_FORWARD_ADD\n        return vec4(0.0);\n    #else\n        return vec4(_lightIntensity, _lit.a);\n    #endif\n#endif\n\n    return vec4(_col, _alpha);\n}\n",m.Effect.IncludesShadersStore.mtoonLightFragment="#ifdef LIGHT{X}\n    #if defined(SHADOWONLY) || defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X}) && defined(LIGHTMAPNOSPECULAR{X})\n        //No light calculation\n    #else\n        #ifdef PBR\n            // Compute Pre Lighting infos\n            #ifdef SPOTLIGHT{X}\n                preInfo = computePointAndSpotPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(POINTLIGHT{X})\n                preInfo = computePointAndSpotPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(HEMILIGHT{X})\n                preInfo = computeHemisphericPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(DIRLIGHT{X})\n                preInfo = computeDirectionalPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #endif\n\n            preInfo.NdotV = NdotV;\n\n            // Compute Attenuation infos\n            #ifdef SPOTLIGHT{X}\n                #ifdef LIGHT_FALLOFF_GLTF{X}\n                    preInfo.attenuation = computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared, light{X}.vLightFalloff.y);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_GLTF(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightFalloff.z, light{X}.vLightFalloff.w);\n                #elif defined(LIGHT_FALLOFF_PHYSICAL{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_Physical(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w);\n                #elif defined(LIGHT_FALLOFF_STANDARD{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Standard(preInfo.lightOffset, light{X}.vLightFalloff.x);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_Standard(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w, light{X}.vLightData.w);\n                #else\n                    preInfo.attenuation = computeDistanceLightFalloff(preInfo.lightOffset, preInfo.lightDistanceSquared, light{X}.vLightFalloff.x, light{X}.vLightFalloff.y);\n                    preInfo.attenuation *= computeDirectionalLightFalloff(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w, light{X}.vLightData.w, light{X}.vLightFalloff.z, light{X}.vLightFalloff.w);\n                #endif\n            #elif defined(POINTLIGHT{X})\n                #ifdef LIGHT_FALLOFF_GLTF{X}\n                    preInfo.attenuation = computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared, light{X}.vLightFalloff.y);\n                #elif defined(LIGHT_FALLOFF_PHYSICAL{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n                #elif defined(LIGHT_FALLOFF_STANDARD{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Standard(preInfo.lightOffset, light{X}.vLightFalloff.x);\n                #else\n                    preInfo.attenuation = computeDistanceLightFalloff(preInfo.lightOffset, preInfo.lightDistanceSquared, light{X}.vLightFalloff.x, light{X}.vLightFalloff.y);\n                #endif\n            #else\n                preInfo.attenuation = 1.0;\n            #endif\n\n            // Simulates Light radius for diffuse and spec term\n            // clear coat is using a dedicated roughness\n            #ifdef HEMILIGHT{X}\n                preInfo.roughness = roughness;\n            #else\n                preInfo.roughness = adjustRoughnessFromLightProperties(roughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n            #endif\n\n            // Diffuse contribution\n            #ifdef HEMILIGHT{X}\n                info.diffuse = computeHemisphericDiffuseLighting(preInfo, light{X}.vLightDiffuse.rgb, light{X}.vLightGround);\n            #elif defined(SS_TRANSLUCENCY)\n                info.diffuse = computeDiffuseAndTransmittedLighting(preInfo, light{X}.vLightDiffuse.rgb, subSurfaceOut.transmittance);\n            #else\n                info.diffuse = computeDiffuseLighting(preInfo, light{X}.vLightDiffuse.rgb);\n            #endif\n\n            // Specular contribution\n            #ifdef SPECULARTERM\n                #ifdef ANISOTROPIC\n                    info.specular = computeAnisotropicSpecularLighting(preInfo, viewDirectionW, normalW, anisotropicOut.anisotropicTangent, anisotropicOut.anisotropicBitangent, anisotropicOut.anisotropy, clearcoatOut.specularEnvironmentR0, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n                #else\n                    info.specular = computeSpecularLighting(preInfo, normalW, clearcoatOut.specularEnvironmentR0, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n                #endif\n            #endif\n\n            // Sheen contribution\n            #ifdef SHEEN\n                #ifdef SHEEN_LINKWITHALBEDO\n                    // BE Carefull: Sheen intensity is replacing the roughness value.\n                    preInfo.roughness = sheenOut.sheenIntensity;\n                #else\n                    #ifdef HEMILIGHT{X}\n                        preInfo.roughness = sheenOut.sheenRoughness;\n                    #else\n                        preInfo.roughness = adjustRoughnessFromLightProperties(sheenOut.sheenRoughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n                    #endif\n                #endif\n                info.sheen = computeSheenLighting(preInfo, normalW, sheenOut.sheenColor, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n            #endif\n\n            // Clear Coat contribution\n            #ifdef CLEARCOAT\n                // Simulates Light radius\n                #ifdef HEMILIGHT{X}\n                    preInfo.roughness = clearcoatOut.clearCoatRoughness;\n                #else\n                    preInfo.roughness = adjustRoughnessFromLightProperties(clearcoatOut.clearCoatRoughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n                #endif\n\n                info.clearCoat = computeClearCoatLighting(preInfo, clearcoatOut.clearCoatNormalW, clearcoatOut.clearCoatAARoughnessFactors.x, clearcoatOut.clearCoatIntensity, light{X}.vLightDiffuse.rgb);\n\n                #ifdef CLEARCOAT_TINT\n                    // Absorption\n                    absorption = computeClearCoatLightingAbsorption(clearcoatOut.clearCoatNdotVRefract, preInfo.L, clearcoatOut.clearCoatNormalW, clearcoatOut.clearCoatColor, clearcoatOut.clearCoatThickness, clearcoatOut.clearCoatIntensity);\n                    info.diffuse *= absorption;\n                    #ifdef SPECULARTERM\n                        info.specular *= absorption;\n                    #endif\n                #endif\n\n                // Apply energy conservation on diffuse and specular term.\n                info.diffuse *= info.clearCoat.w;\n                #ifdef SPECULARTERM\n                    info.specular *= info.clearCoat.w;\n                #endif\n                #ifdef SHEEN\n                    info.sheen *= info.clearCoat.w;\n                #endif\n            #endif\n        #else\n            #ifdef SPOTLIGHT{X}\n                info = computeSpotLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDirection, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightDiffuse.a, glossiness);\n            #elif defined(HEMILIGHT{X})\n                info = computeHemisphericLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightGround, glossiness);\n            #elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\n                info = computeLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightDiffuse.a, glossiness);\n            #endif\n        #endif\n\n        #ifdef PROJECTEDLIGHTTEXTURE{X}\n            info.diffuse *= computeProjectionTextureDiffuseLighting(projectionLightSampler{X}, textureProjectionMatrix{X});\n        #endif\n    #endif\n\n    #ifdef SHADOW{X}\n        #ifdef SHADOWCSM{X}\n            for (int i = 0; i < SHADOWCSMNUM_CASCADES{X}; i++)\n            {\n                #ifdef SHADOWCSM_RIGHTHANDED{X}\n                    diff{X} = viewFrustumZ{X}[i] + vPositionFromCamera{X}.z;\n                #else\n                    diff{X} = viewFrustumZ{X}[i] - vPositionFromCamera{X}.z;\n                #endif\n                if (diff{X} >= 0.) {\n                    index{X} = i;\n                    break;\n                }\n            }\n\n            #ifdef SHADOWCSMUSESHADOWMAXZ{X}\n            if (index{X} >= 0)\n            #endif\n            {\n                #if defined(SHADOWPCF{X})\n                    #if defined(SHADOWLOWQUALITY{X})\n                        shadow = computeShadowWithCSMPCF1(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #elif defined(SHADOWMEDIUMQUALITY{X})\n                        shadow = computeShadowWithCSMPCF3(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #else\n                        shadow = computeShadowWithCSMPCF5(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #endif\n                #elif defined(SHADOWPCSS{X})\n                    #if defined(SHADOWLOWQUALITY{X})\n                        shadow = computeShadowWithCSMPCSS16(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #elif defined(SHADOWMEDIUMQUALITY{X})\n                        shadow = computeShadowWithCSMPCSS32(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #else\n                        shadow = computeShadowWithCSMPCSS64(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #endif\n                #else\n                    shadow = computeShadowCSM(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                #endif\n\n                #ifdef SHADOWCSMDEBUG{X}\n                    shadowDebug{X} = vec3(shadow) * vCascadeColorsMultiplier{X}[index{X}];\n                #endif\n\n                #ifndef SHADOWCSMNOBLEND{X}\n                    float frustumLength = frustumLengths{X}[index{X}];\n                    float diffRatio = clamp(diff{X} / frustumLength, 0., 1.) * cascadeBlendFactor{X};\n                    if (index{X} < (SHADOWCSMNUM_CASCADES{X} - 1) && diffRatio < 1.)\n                    {\n                        index{X} += 1;\n                        float nextShadow = 0.;\n                        #if defined(SHADOWPCF{X})\n                            #if defined(SHADOWLOWQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCF1(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #elif defined(SHADOWMEDIUMQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCF3(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #else\n                                nextShadow = computeShadowWithCSMPCF5(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #endif\n                        #elif defined(SHADOWPCSS{X})\n                            #if defined(SHADOWLOWQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCSS16(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #elif defined(SHADOWMEDIUMQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCSS32(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #else\n                                nextShadow = computeShadowWithCSMPCSS64(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #endif\n                        #else\n                            nextShadow = computeShadowCSM(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                        #endif\n\n                        shadow = mix(nextShadow, shadow, diffRatio);\n                        #ifdef SHADOWCSMDEBUG{X}\n                            shadowDebug{X} = mix(vec3(nextShadow) * vCascadeColorsMultiplier{X}[index{X}], shadowDebug{X}, diffRatio);\n                        #endif\n                    }\n                #endif\n            }\n        #elif defined(SHADOWCLOSEESM{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithCloseESMCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithCloseESM(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWESM{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithESMCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithESM(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPOISSON{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithPoissonSamplingCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.x, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithPoissonSampling(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPCF{X})\n            #if defined(SHADOWLOWQUALITY{X})\n                shadow = computeShadowWithPCF1(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #elif defined(SHADOWMEDIUMQUALITY{X})\n                shadow = computeShadowWithPCF3(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #else\n                shadow = computeShadowWithPCF5(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPCSS{X})\n            #if defined(SHADOWLOWQUALITY{X})\n                shadow = computeShadowWithPCSS16(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #elif defined(SHADOWMEDIUMQUALITY{X})\n                shadow = computeShadowWithPCSS32(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #else\n                shadow = computeShadowWithPCSS64(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #else\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.depthValues);\n            #else\n                shadow = computeShadow(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #endif\n\n        #ifdef SHADOWONLY\n            #ifndef SHADOWINUSE\n                #define SHADOWINUSE\n            #endif\n            globalShadow += shadow;\n            shadowLightCount += 1.0;\n        #endif\n    #else\n        shadow = 1.;\n    #endif\n\n    #ifndef SHADOWONLY\n        #ifdef CUSTOMUSERLIGHTING\n            // Compute and reflect MToon lighting\n            #ifdef SPOTLIGHT{X}\n                lightDirection = computeSpotLightDirection(light{X}.vLightData);\n            #elif defined(HEMILIGHT{X})\n                lightDirection = computeHemisphericLightDirection(light{X}.vLightData, normalW.xyz);\n            #elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\n                lightDirection = computeLightDirection(light{X}.vLightData);\n            #endif\n            mtoonDiffuse = computeMToonDiffuseLighting(viewDirectionW.xyz, normalW.xyz, mainUv, lightDirection, light{X}.vLightDiffuse.rgba, shadow);\n            diffuseBase += mtoonDiffuse.rgb;\n            alpha = min(alpha, mtoonDiffuse.a);\n            #if defined(ALPHATEST) && ALPHATEST\n                alpha = (alpha - alphaCutOff) / max(fwidth(alpha), EPS_COL) + 0.5; // Alpha to Coverage\n                if (alpha < alphaCutOff) {\n                    discard;\n                }\n                alpha = 1.0; // Discarded, otherwise it should be assumed to have full opacity\n            #else\n                if (alpha - 0.0001 < 0.000) { // Slightly improves rendering with layered transparency\n                    discard;\n                }\n            #endif\n        #elif defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X})\n            diffuseBase += lightmapColor.rgb * shadow;\n            #ifdef SPECULARTERM\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    specularBase += info.specular * shadow * lightmapColor.rgb;\n                #endif\n            #endif\n            #ifdef CLEARCOAT\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    clearCoatBase += info.clearCoat.rgb * shadow * lightmapColor.rgb;\n                #endif\n            #endif\n            #ifdef SHEEN\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    sheenBase += info.sheen.rgb * shadow;\n                #endif\n            #endif\n        #else\n            #ifdef SHADOWCSMDEBUG{X}\n                diffuseBase += info.diffuse * shadowDebug{X};\n            #else\n                diffuseBase += info.diffuse * shadow;\n            #endif\n            #ifdef SPECULARTERM\n                specularBase += info.specular * shadow;\n            #endif\n            #ifdef CLEARCOAT\n                clearCoatBase += info.clearCoat.rgb * shadow;\n            #endif\n            #ifdef SHEEN\n                sheenBase += info.sheen.rgb * shadow;\n            #endif\n        #endif\n    #endif\n#endif\n",m.Effect.IncludesShadersStore.mtoonBumpFragment="// replace vBumpUV to mainUv\nvec2 uvOffset = vec2(0.0, 0.0);\n\n#if defined(BUMP) || defined(PARALLAX) || defined(DETAIL)\n    #ifdef NORMALXYSCALE\n        float normalScale = 1.0;\n    #elif defined(BUMP)\n        float normalScale = vBumpInfos.y;\n    #else\n        float normalScale = 1.0;\n    #endif\n\n    #if defined(TANGENT) && defined(NORMAL)\n        mat3 TBN = vTBN;\n    #elif defined(BUMP)\n        // vec2 TBNUV = gl_FrontFacing ? vBumpUV : -vBumpUV;\n        vec2 TBNUV = gl_FrontFacing ? mainUv : -mainUv;\n        mat3 TBN = cotangent_frame(normalW * normalScale, vPositionW, TBNUV, vTangentSpaceParams);\n    #else\n        vec2 TBNUV = gl_FrontFacing ? vDetailUV : -vDetailUV;\n        mat3 TBN = cotangent_frame(normalW * normalScale, vPositionW, TBNUV, vec2(1., 1.));\n    #endif\n#elif defined(ANISOTROPIC)\n    #if defined(TANGENT) && defined(NORMAL)\n        mat3 TBN = vTBN;\n    #else\n        // flip the uv for the backface\n        vec2 TBNUV = gl_FrontFacing ? vMainUV1 : -vMainUV1;\n        mat3 TBN = cotangent_frame(normalW, vPositionW, TBNUV, vec2(1., 1.));\n    #endif\n#endif\n\n#ifdef PARALLAX\n    mat3 invTBN = transposeMat3(TBN);\n\n    #ifdef PARALLAXOCCLUSION\n        // uvOffset = parallaxOcclusion(invTBN * -viewDirectionW, invTBN * normalW, vBumpUV, vBumpInfos.z);\n        uvOffset = parallaxOcclusion(invTBN * -viewDirectionW, invTBN * normalW, mainUv, vBumpInfos.z);\n    #else\n        uvOffset = parallaxOffset(invTBN * viewDirectionW, vBumpInfos.z);\n    #endif\n#endif\n\n#ifdef DETAIL\n    vec4 detailColor = texture2D(detailSampler, vDetailUV + uvOffset);\n    vec2 detailNormalRG = detailColor.wy * 2.0 - 1.0;\n    float detailNormalB = sqrt(1. - saturate(dot(detailNormalRG, detailNormalRG)));\n    vec3 detailNormal = vec3(detailNormalRG, detailNormalB);\n#endif\n\n#ifdef BUMP\n    #ifdef OBJECTSPACE_NORMALMAP\n        // normalW = normalize(texture2D(bumpSampler, vBumpUV).xyz  * 2.0 - 1.0);\n        normalW = normalize(texture2D(bumpSampler, mainUv).xyz  * 2.0 - 1.0);\n        normalW = normalize(mat3(normalMatrix) * normalW);\n    #elif !defined(DETAIL)\n        // normalW = perturbNormal(TBN, texture2D(bumpSampler, vBumpUV + uvOffset).xyz, vBumpInfos.y);\n        normalW = perturbNormal(TBN, texture2D(bumpSampler, mainUv + uvOffset).xyz, vBumpInfos.y);\n    #else\n        // vec3 bumpNormal = texture2D(bumpSampler, vBumpUV + uvOffset).xyz * 2.0 - 1.0;\n        vec3 bumpNormal = texture2D(bumpSampler, mainUv + uvOffset).xyz * 2.0 - 1.0;\n        // Reference for normal blending: https://blog.selfshadow.com/publications/blending-in-detail/\n        #if DETAIL_NORMALBLENDMETHOD == 0 // whiteout\n            detailNormal.xy *= vDetailInfos.z;\n            vec3 blendedNormal = normalize(vec3(bumpNormal.xy + detailNormal.xy, bumpNormal.z * detailNormal.z));\n        #elif DETAIL_NORMALBLENDMETHOD == 1 // RNM\n            detailNormal.xy *= vDetailInfos.z;\n            bumpNormal += vec3(0.0, 0.0, 1.0);\n            detailNormal *= vec3(-1.0, -1.0, 1.0);\n            vec3 blendedNormal = bumpNormal * dot(bumpNormal, detailNormal) / bumpNormal.z - detailNormal;\n        #endif\n        normalW = perturbNormalBase(TBN, blendedNormal, vBumpInfos.y);\n    #endif\n#elif defined(DETAIL)\n        detailNormal.xy *= vDetailInfos.z;\n        normalW = perturbNormalBase(TBN, detailNormal, vDetailInfos.z);\n#endif\n",m.Effect.ShadersStore.mtoonVertexShader="// it is based on default.vertex.fx\n// This include is special, it will be replaced to UboDeclaration(WebGL2) or VertexDeclaration(WebGL1).\n// @see effect.ts\n#include<__decl__mtoonVertex>\n\n// Attributes\n\n#define CUSTOM_VERTEX_BEGIN\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#include<uvAttributeDeclaration>[2..7]\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n\n#include<helperFunctions>\n\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n// Uniforms\n#include<instancesDeclaration>\n#include<prePassVertexDeclaration>\n\n#include<mainUVVaryingDeclaration>[1..7]\n\n#include<samplerVertexDeclaration>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,DETAIL,_VARYINGNAME_,Detail)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,AMBIENT,_VARYINGNAME_,Ambient)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,OPACITY,_VARYINGNAME_,Opacity)\n#include<samplerVertexDeclaration>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,LIGHTMAP,_VARYINGNAME_,Lightmap)\n// # if defined(SPECULARTERM)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular)\n// # endif\n#include<samplerVertexDeclaration>(_DEFINENAME_,BUMP,_VARYINGNAME_,Bump)\n#include<samplerVertexDeclaration>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade)\n#include<samplerVertexDeclaration>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow)\n#include<samplerVertexDeclaration>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade)\n#include<samplerVertexDeclaration>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim)\n#include<samplerVertexDeclaration>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap)\n#include<samplerVertexDeclaration>(_DEFINENAME_,OUTLINE_WIDTH,_VARYINGNAME_,OutlineWidth)\n#include<samplerVertexDeclaration>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask)\n\n// Additional Uniforms\n#ifdef OUTLINE_WIDTH\n    uniform sampler2D outlineWidthSampler;\n#endif\n\n// Output\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR)\nvarying vec4 vColor;\n#endif\n\n#include<bumpVertexDeclaration>\n\n#include<clipPlaneVertexDeclaration>\n\n#include<fogVertexDeclaration>\n#include<__decl__lightVxFragment>[0..maxSimultaneousLights]\n\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n\n// # ifdef REFLECTIONMAP_SKYBOX\n// varying vec3 vPositionUVW;\n// # endif\n\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n// varying vec3 vDirectionW;\n// # endif\n\n#include<logDepthDeclaration>\n#define CUSTOM_VERTEX_DEFINITIONS\n\nvoid main(void) {\n\n    #define CUSTOM_VERTEX_MAIN_BEGIN\n\n    vec3 positionUpdated = position;\n#ifdef NORMAL\n    vec3 normalUpdated = normal;\n#endif\n#ifdef TANGENT\n    vec4 tangentUpdated = tangent;\n#endif\n#ifdef UV1\n    vec2 uvUpdated = uv;\n#endif\n\n#include<morphTargetsVertexGlobal>\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n\n// # ifdef REFLECTIONMAP_SKYBOX\n//     vPositionUVW = positionUpdated;\n// # endif\n\n#define CUSTOM_VERTEX_UPDATE_POSITION\n\n#define CUSTOM_VERTEX_UPDATE_NORMAL\n\n#include<instancesVertex>\n\n#if defined(PREPASS) && defined(PREPASS_VELOCITY) && !defined(BONES_VELOCITY_ENABLED)\n    // Compute velocity before bones computation\n    vCurrentPosition = viewProjection * finalWorld * vec4(positionUpdated, 1.0);\n    vPreviousPosition = previousViewProjection * finalPreviousWorld * vec4(positionUpdated, 1.0);\n#endif\n\n#include<bonesVertex>\n#include<bakedVertexAnimation>\n\n    // Texture coordinates\n#ifndef UV1\n    vec2 uvUpdated = vec2(0., 0.);\n#endif\n#ifdef MAINUV1\n    vMainUV1 = uvUpdated;\n#endif\n#include<uvVariableDeclaration>[2..7]\n\n    float outlineTex = 1.0;\n    if (isOutline == 1.0) {\n#ifdef OUTLINE_WIDTH\n    #if OUTLINE_WIDTHDIRECTUV == 0\n        if (vOutlineWidthInfos.x == 0.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uvUpdated, 1.0, 0.0));\n        }\n        #ifdef UV2\n        else if (vOutlineWidthInfos.x == 1.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv2, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV3\n        else if (vOutlineWidthInfos.x == 2.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv3, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV4\n        else if (vOutlineWidthInfos.x == 3.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv4, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV5\n        else if (vOutlineWidthInfos.x == 4.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv5, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV6\n        else if (vOutlineWidthInfos.x == 5.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv6, 1.0, 0.0));\n        }\n        #endif\n    #elif defined(MAINUV1)\n        vec2 vOutlineWidthUV = vMainUV1;\n    #elif defined(MAINUV2)\n        vec2 vOutlineWidthUV = vMainUV2;\n    #else\n        vec2 vOutlineWidthUV = vec2(0., 0.);\n    #endif\n        outlineTex = texture2D(outlineWidthSampler, vOutlineWidthUV).r * vOutlineWidthInfos.y;\n#endif\n\n#if defined(MTOON_OUTLINE_WIDTH_WORLD) && defined(NORMAL)\n        // move slightly world normal\n        vec3 outlineOffset = 0.01 * outlineWidth * outlineTex * length(transposeMat3(inverseMat3(mat3(finalWorld))) * normalUpdated) * normalUpdated;\n        positionUpdated += outlineOffset;\n#endif\n    } // End isOutline == 1.0\n\n    vec4 worldPos = finalWorld * vec4(positionUpdated, 1.0);\n\n#ifdef NORMAL\n    mat3 normalWorld = mat3(finalWorld);\n\n    #if defined(INSTANCES) && defined(THIN_INSTANCES)\n        vNormalW = normalUpdated / vec3(dot(normalWorld[0], normalWorld[0]), dot(normalWorld[1], normalWorld[1]), dot(normalWorld[2], normalWorld[2]));\n        vNormalW = normalize(normalWorld * vNormalW);\n    #else\n        #ifdef NONUNIFORMSCALING\n            normalWorld = transposeMat3(inverseMat3(normalWorld));\n        #endif\n\n        vNormalW = normalize(normalWorld * normalUpdated);\n    #endif\n#endif\n\n#define CUSTOM_VERTEX_UPDATE_WORLDPOS\n\n#ifdef MULTIVIEW\n    if (gl_ViewID_OVR == 0u) {\n        gl_Position = viewProjection * worldPos;\n    } else {\n        gl_Position = viewProjectionR * worldPos;\n    }\n#else\n    gl_Position = viewProjection * worldPos;\n#endif\n\n    if (isOutline == 1.0) {\n#if defined(MTOON_OUTLINE_WIDTH_SCREEN) && defined(NORMAL)\n        vec3 viewNormal = transposeMat3(inverseMat3(mat3(view) * mat3(finalWorld))) * normalUpdated;\n        vec3 clipNormal = mat3(projection) * viewNormal;\n        vec2 projectedNormal = normalize(clipNormal.xy);\n        projectedNormal *= min(gl_Position.w, outlineScaledMaxDistance);\n        projectedNormal.x /= aspect; // aspect in original mtoon is y/x. aspect in babylon is x/y.\n        gl_Position.xy += 0.01 * outlineWidth * outlineTex * projectedNormal * clamp(1.0 - abs(normalize(viewNormal).z), 0.0, 1.0); // ignore offset when normal toward camera\n#endif\n\n        gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic from three-vrm\n    }\n\n    worldPos = finalWorld * vec4(positionUpdated, 1.0);\n    vPositionW = vec3(worldPos);\n\n#include<prePassVertex>\n\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n//     vDirectionW = normalize(vec3(finalWorld * vec4(positionUpdated, 0.0)));\n// # endif\n\n    #include<samplerVertexImplementation>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse,_MATRIXNAME_,diffuse,_INFONAME_,DiffuseInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,DETAIL,_VARYINGNAME_,Detail,_MATRIXNAME_,detail,_INFONAME_,DetailInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,AMBIENT,_VARYINGNAME_,Ambient,_MATRIXNAME_,ambient,_INFONAME_,AmbientInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,OPACITY,_VARYINGNAME_,Opacity,_MATRIXNAME_,opacity,_INFONAME_,OpacityInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive,_MATRIXNAME_,emissive,_INFONAME_,EmissiveInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,LIGHTMAP,_VARYINGNAME_,Lightmap,_MATRIXNAME_,lightmap,_INFONAME_,LightmapInfos.x)\n    // # if defined(SPECULARTERM)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular,_MATRIXNAME_,specular,_INFONAME_,SpecularInfos.x)\n    // # endif\n    #include<samplerVertexImplementation>(_DEFINENAME_,BUMP,_VARYINGNAME_,Bump,_MATRIXNAME_,bump,_INFONAME_,BumpInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade,_MATRIXNAME_,shade,_INFONAME_,ShadeInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow,_MATRIXNAME_,receiveShadow,_INFONAME_,ReceiveShadowInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade,_MATRIXNAME_,shadingGrade,_INFONAME_,ShadingGradeInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim,_MATRIXNAME_,rim,_INFONAME_,RimInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap,_MATRIXNAME_,matCap,_INFONAME_,MatCapInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask,_MATRIXNAME_,uvAnimationMask,_INFONAME_,uvAnimationMaskInfos.x)\n\n#include<bumpVertex>\n#include<clipPlaneVertex>\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\n    vColor = color;\n#elif defined(INSTANCESCOLOR) && INSTANCESCOLOR\n    vColor = instanceColor;\n#endif\n\n#include<pointCloudVertex>\n#include<logDepthVertex>\n\n#define CUSTOM_VERTEX_MAIN_END\n\n}\n",m.Effect.ShadersStore.mtoonFragmentShader="#include<__decl__mtoonFragment>\n\n#extension GL_OES_standard_derivatives : enable\n\n#include<prePassDeclaration>[SCENE_MRT_COUNT]\n#include<oitDeclaration>\n\n#define CUSTOM_FRAGMENT_BEGIN\n\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n\n// Constants\n#define RECIPROCAL_PI2 0.15915494\n#define PI_2 6.28318530718\n#define EPS_COL 0.00001\n\n// Input\nvarying vec3 vPositionW;\n\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR)\nvarying vec4 vColor;\n#endif\n\n#include<mainUVVaryingDeclaration>[1..7]\n\n// Helper functions\n#include<helperFunctions>\n\n// Lights\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n// Samplers\n#include<samplerFragmentDeclaration>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse,_SAMPLERNAME_,diffuse)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive,_SAMPLERNAME_,emissive)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade,_SAMPLERNAME_,shade)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow,_SAMPLERNAME_,receiveShadow)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade,_SAMPLERNAME_,shadingGrade)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim,_SAMPLERNAME_,rim)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap,_SAMPLERNAME_,matCap)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,OUTLINE_WIDTH,_VARYINGNAME_,OutlineWidth,_SAMPLERNAME_,outlineWidth)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask,_SAMPLERNAME_,uvAnimationMask)\n\n#include<mtoonFragmentFunctions>\n\n// # ifdef REFRACTION\n\n// # ifdef REFRACTIONMAP_3D\n// uniform samplerCube refractionCubeSampler;\n// # else\n// uniform sampler2D refraction2DSampler;\n// # endif\n\n// # endif\n\n// # if defined(SPECULARTERM)\n//     # include<samplerFragmentDeclaration>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular,_SAMPLERNAME_,specular)\n// # endif\n\n// // Fresnel\n// # include<fresnelFunction>\n\n// // Reflection\n// # ifdef REFLECTION\n// # ifdef REFLECTIONMAP_3D\n// uniform samplerCube reflectionCubeSampler;\n// # else\n// uniform sampler2D reflection2DSampler;\n// # endif\n\n// # ifdef REFLECTIONMAP_SKYBOX\n// varying vec3 vPositionUVW;\n// # else\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n// varying vec3 vDirectionW;\n// # endif\n\n// # endif\n\n// # include<reflectionFunction>\n\n// # endif\n\n#include<imageProcessingDeclaration>\n\n#include<imageProcessingFunctions>\n\n#include<bumpFragmentMainFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n\n#define CUSTOM_FRAGMENT_DEFINITIONS\n\nvoid main(void) {\n#ifdef MTOON_CLIP_IF_OUTLINE_IS_NONE\n    #ifdef MTOON_OUTLINE_WIDTH_WORLD\n    #elif defined(MTOON_OUTLINE_WIDTH_SCREEN)\n    #else\n        discard;\n    #endif\n#endif\n\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n\n#include<oitFragment>\n\n#include<clipPlaneFragment>\n\n    vec3 viewDirectionW = normalize(vEyePosition.xyz - vPositionW);\n\n    // Base color\n    vec4 baseColor = vec4(1., 1., 1., 1.);\n    vec3 diffuseColor = vec3(1., 1., 1.);\n\n    // Alpha\n    float alpha = 1.0;\n\n    // Bump\n#ifdef NORMAL\n    vec3 normalW = normalize(vNormalW);\n#else\n    vec3 normalW = normalize(-cross(dFdx(vPositionW), dFdy(vPositionW)));\n#endif\n\n#include<depthPrePass>\n\n    // Ambient color\n    vec3 baseAmbientColor = vec3(1., 1., 1.);\n    float glossiness = 0.;\n\n    // Lighting\n    vec3 diffuseBase = vec3(0., 0., 0.);\n    lightingInfo info;\n    float shadow = 1.;\n    vec3 lightDirection = vec3(0.0, 1.0, 0.0);\n    vec4 mtoonDiffuse = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // MToon UV\n    // All textures will use diffuse(_MainTex) UV\n    vec2 mainUv = vec2(0.0);\n#ifdef DIFFUSE\n    mainUv += vDiffuseUV;\n#elif defined(MAINUV1)\n    mainUv += vMainUV1;\n#elif defined(MAINUV2)\n    mainUv += vMainUV2;\n#endif\n\n    // uv anim\n    float uvAnim = time.y;\n#ifdef UV_ANIMATION_MASK\n    uvAnim *= texture2D(uvAnimationMaskSampler, mainUv).r;\n#endif\n    // translate uv in bottom-left origin coordinates.\n    // uv is reversed\n    mainUv += vec2(-uvAnimationScrollX, -uvAnimationScrollY) * uvAnim;\n    // rotate uv counter-clockwise around (0.5, 0.5) in bottom-left origin coordinates.\n    float rotateRad = uvAnimationRotation * PI_2 * uvAnim;\n    vec2 rotatePivot = vec2(0.5, 0.5);\n    mainUv = mat2(cos(rotateRad), -sin(rotateRad), sin(rotateRad), cos(rotateRad)) * (mainUv - rotatePivot) + rotatePivot;\n\n#ifdef FLIP_U\n    mainUv.x = 1.0 - mainUv.x;\n#endif\n#ifdef FLIP_V\n    mainUv.y = 1.0 - mainUv.y;\n#endif\n\n#include<mtoonBumpFragment>\n\n#ifdef TWOSIDEDLIGHTING\n    normalW = gl_FrontFacing ? normalW : -normalW;\n#endif\n\n// include customized lightFragment\n#include<mtoonLightFragment>[0..maxSimultaneousLights]\n\n    vec3 finalDiffuse = clamp(diffuseBase, 0.0, 1.0) * baseColor.rgb;\n\n    // Composition\n    vec4 color = vec4(finalDiffuse, clamp(alpha, 0.0, 1.0));\n\n    color.rgb = max(color.rgb, 0.);\n#include<logDepthFragment>\n#include<fogFragment>\n\n// Apply image processing if relevant. As this applies in linear space,\n// We first move from gamma to linear.\n#ifdef IMAGEPROCESSINGPOSTPROCESS\n    color.rgb = toLinearSpace(color.rgb);\n#else\n    #ifdef IMAGEPROCESSING\n        // FIXME: support image processing\n        // color.rgb = toLinearSpace(color.rgb);\n        // color = applyImageProcessing(color);\n    #endif\n#endif\n\n    color.a *= visibility;\n\n#ifdef PREMULTIPLYALPHA\n    // Convert to associative (premultiplied) format if needed.\n    color.rgb *= color.a;\n#endif\n\n#ifdef PREPASS\n    float writeGeometryInfo = color.a > 0.4 ? 1.0 : 0.0;\n\n    gl_FragData[0] = color; // We can't split irradiance on std material\n\n    #ifdef PREPASS_POSITION\n    gl_FragData[PREPASS_POSITION_INDEX] = vec4(vPositionW, writeGeometryInfo);\n    #endif\n\n    #ifdef PREPASS_VELOCITY\n    vec2 a = (vCurrentPosition.xy / vCurrentPosition.w) * 0.5 + 0.5;\n    vec2 b = (vPreviousPosition.xy / vPreviousPosition.w) * 0.5 + 0.5;\n\n    vec2 velocity = abs(a - b);\n    velocity = vec2(pow(velocity.x, 1.0 / 3.0), pow(velocity.y, 1.0 / 3.0)) * sign(a - b) * 0.5 + 0.5;\n\n    gl_FragData[PREPASS_VELOCITY_INDEX] = vec4(velocity, 0.0, writeGeometryInfo);\n    #endif\n\n    #ifdef PREPASS_IRRADIANCE\n        gl_FragData[PREPASS_IRRADIANCE_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo); //  We can't split irradiance on std material\n    #endif\n\n    #ifdef PREPASS_DEPTH\n        gl_FragData[PREPASS_DEPTH_INDEX] = vec4(vViewPos.z, 0.0, 0.0, writeGeometryInfo); // Linear depth\n    #endif\n\n    #ifdef PREPASS_NORMAL\n        gl_FragData[PREPASS_NORMAL_INDEX] = vec4((view * vec4(normalW, 0.0)).rgb, writeGeometryInfo); // Normal\n    #endif\n\n    #ifdef PREPASS_ALBEDO_SQRT\n        gl_FragData[PREPASS_ALBEDO_SQRT_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo); // We can't split albedo on std material\n    #endif\n    #ifdef PREPASS_REFLECTIVITY\n        #if defined(SPECULAR)\n            gl_FragData[PREPASS_REFLECTIVITY_INDEX] = vec4(specularMapColor.rgb, specularMapColor.a * writeGeometryInfo);\n        #else\n            gl_FragData[PREPASS_REFLECTIVITY_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo);\n        #endif\n    #endif\n#endif\n\n#if !defined(PREPASS) || defined(WEBGL2)\n    gl_FragColor = color;\n#endif\n\n#if ORDER_INDEPENDENT_TRANSPARENCY\n    if (fragDepth == nearestDepth) {\n        frontColor.rgb += color.rgb * color.a * alphaMultiplier;\n        frontColor.a = 1.0 - alphaMultiplier * (1.0 - color.a);\n    } else {\n        backColor += color;\n    }\n#endif\n\n#define CUSTOM_FRAGMENT_MAIN_END\n\n}\n"),this.inspectableCustomProperties=this.inspectableCustomProperties||[],this.inspectableCustomProperties.push({label:"DiffuseColor",propertyName:"diffuseColor",type:g.InspectableType.Color3},{label:"AmbientColor",propertyName:"ambientColor",type:g.InspectableType.Color3},{label:"EmissiveColor",propertyName:"emissiveColor",type:g.InspectableType.Color3},{label:"ShadeColor",propertyName:"shadeColor",type:g.InspectableType.Color3},{label:"RimColor",propertyName:"rimColor",type:g.InspectableType.Color3},{label:"OutlineColor",propertyName:"outlineColor",type:g.InspectableType.Color3},{label:"ReceiveShadowRate",propertyName:"receiveShadowRate",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"ShadingGradeRate",propertyName:"shadingGradeRate",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"ShadeShift",propertyName:"shadeShift",type:g.InspectableType.Slider,min:-1,max:1,step:.01},{label:"ShadeToony",propertyName:"shadeToony",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"LightColorAttenuation",propertyName:"lightColorAttenuation",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"IndirectLightIntensity",propertyName:"indirectLightIntensity",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"RimLightingMix",propertyName:"rimLightingMix",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"RimFresnelPower",propertyName:"rimFresnelPower",type:g.InspectableType.Slider,min:.01,max:100,step:4},{label:"RimLift",propertyName:"rimLift",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"OutlineWidth",propertyName:"outlineWidth",type:g.InspectableType.Slider,min:.01,max:1,step:.01},{label:"OutlineScaledMaxDistance",propertyName:"outlineScaledMaxDistance",type:g.InspectableType.Slider,min:1,max:10,step:.01},{label:"OutlineLightingMix",propertyName:"outlineLightingMix",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"DebugMode",propertyName:"debugMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineWidthMode",propertyName:"outlineWidthMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineColorMode",propertyName:"outlineColorMode",type:g.InspectableType.Slider,min:0,max:1,step:1},{label:"CullMode",propertyName:"cullMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineCullMode",propertyName:"outlineCullMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"AlphaCutOff",propertyName:"alphaCutOff",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"UV Animation Scroll X",propertyName:"uvAnimationScrollX",type:g.InspectableType.Slider,min:-1,max:1,step:.1},{label:"UV Animation Scroll Y",propertyName:"uvAnimationScrollY",type:g.InspectableType.Slider,min:-1,max:1,step:.1},{label:"UV Animation Rotation",propertyName:"uvAnimationRotation",type:g.InspectableType.Slider,min:-.5,max:.5,step:.01})}get appendedTextures(){return[this._diffuseTexture,this._emissiveTexture,this._bumpTexture,this._shadeTexture,this._receiveShadowTexture,this._shadingGradeTexture,this._rimTexture,this._matCapTexture,this._outlineWidthTexture,this._uvAnimationMaskTexture]}get appendedActiveTextures(){return this.appendedTextures.filter((e=>null!==e))}get imageProcessingConfiguration(){return this._imageProcessingConfiguration}set imageProcessingConfiguration(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsTexturesDirty()}_attachImageProcessingConfiguration(e){e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=e||this.getScene().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add((()=>{this._markAllSubMeshesAsImageProcessingDirty()}))))}get isPrePassCapable(){return!1}get cameraColorCurvesEnabled(){return this.imageProcessingConfiguration.colorCurvesEnabled}set cameraColorCurvesEnabled(e){this.imageProcessingConfiguration.colorCurvesEnabled=e}get cameraColorGradingEnabled(){return this.imageProcessingConfiguration.colorGradingEnabled}set cameraColorGradingEnabled(e){this.imageProcessingConfiguration.colorGradingEnabled=e}get cameraToneMappingEnabled(){return this._imageProcessingConfiguration.toneMappingEnabled}set cameraToneMappingEnabled(e){this._imageProcessingConfiguration.toneMappingEnabled=e}get cameraExposure(){return this._imageProcessingConfiguration.exposure}set cameraExposure(e){this._imageProcessingConfiguration.exposure=e}get cameraContrast(){return this._imageProcessingConfiguration.contrast}set cameraContrast(e){this._imageProcessingConfiguration.contrast=e}get cameraColorGradingTexture(){return this._imageProcessingConfiguration.colorGradingTexture}set cameraColorGradingTexture(e){this._imageProcessingConfiguration.colorGradingTexture=e}get cameraColorCurves(){return this._imageProcessingConfiguration.colorCurves}set cameraColorCurves(e){this._imageProcessingConfiguration.colorCurves=e}get canRenderToMRT(){return!0}get bumpScale(){return this._bumpScale}set bumpScale(e){this._bumpScale=e}get receiveShadowRate(){return this._receiveShadowRate}set receiveShadowRate(e){this._receiveShadowRate=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadingGradeRate(){return this._shadingGradeRate}set shadingGradeRate(e){this._shadingGradeRate=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadeShift(){return this._shadeShift}set shadeShift(e){this._shadeShift=Math.max(-1,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadeToony(){return this._shadeToony}set shadeToony(e){this._shadeToony=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get lightColorAttenuation(){return this._lightColorAttenuation}set lightColorAttenuation(e){this._lightColorAttenuation=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get indirectLightIntensity(){return this._indirectLightIntensity}set indirectLightIntensity(e){this._indirectLightIntensity=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get rimLightingMix(){return this._rimLightingMix}set rimLightingMix(e){this._rimLightingMix=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get rimFresnelPower(){return this._rimFresnelPower}set rimFresnelPower(e){this._rimFresnelPower=Math.max(0,Math.min(100,e)),this._markAllSubMeshesAsLightsDirty()}get rimLift(){return this._rimLift}set rimLift(e){this._rimLift=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get outlineWidth(){return this._outlineWidth}set outlineWidth(e){this._outlineWidth=Math.max(.01,Math.min(1,e)),this._markAllSubMeshesAsAttributesDirty()}get outlineScaledMaxDistance(){return this._outlineScaledMaxDistance}set outlineScaledMaxDistance(e){this._outlineScaledMaxDistance=Math.max(1,Math.min(10,e)),this._markAllSubMeshesAsAttributesDirty()}get outlineLightingMix(){return this._outlineLightingMix}set outlineLightingMix(e){this._outlineLightingMix=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsAttributesDirty()}get uvAnimationScrollX(){return this._uvAnimationScrollX}set uvAnimationScrollX(e){this._uvAnimationScrollX=e,this._markAllSubMeshesAsMiscDirty()}get uvAnimationScrollY(){return this._uvAnimationScrollY}set uvAnimationScrollY(e){this._uvAnimationScrollY=e,this._markAllSubMeshesAsMiscDirty()}get uvAnimationRotation(){return this._uvAnimationRotation}set uvAnimationRotation(e){this._uvAnimationRotation=e,this._markAllSubMeshesAsMiscDirty()}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest=e,e?this.alphaBlend?this._transparencyMode=l.Material.MATERIAL_ALPHATESTANDBLEND:this._transparencyMode=l.Material.MATERIAL_ALPHATEST:this.alphaBlend?this._transparencyMode=l.Material.MATERIAL_ALPHABLEND:this._transparencyMode=l.Material.MATERIAL_OPAQUE,this._markAllSubMeshesAsMiscDirty()}get alphaBlend(){return this._alphaBlend}set alphaBlend(e){this._alphaBlend=e,e?(this.backFaceCulling=!0,this.alphaTest?this._transparencyMode=l.Material.MATERIAL_ALPHATESTANDBLEND:this._transparencyMode=l.Material.MATERIAL_ALPHABLEND):this.alphaTest?this._transparencyMode=l.Material.MATERIAL_ALPHATEST:this._transparencyMode=l.Material.MATERIAL_OPAQUE,this._markAllSubMeshesAsMiscDirty()}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,e===D.None||this.outlineRenderer||(this.outlineRenderer=new A(this.getScene(),this)),this._markAllSubMeshesAsMiscDirty()}enableOutlineRender(){this.isOutline=1}disaableOutlineRender(){this.isOutline=0}get cullMode(){return this._cullMode}set cullMode(e){switch(this._cullMode=e,this._cullMode){case L.Off:this.backFaceCulling=!1,this.sideOrientation=l.Material.ClockWiseSideOrientation,this.twoSidedLighting=!1;break;case L.Front:this.backFaceCulling=!0,this.sideOrientation=l.Material.CounterClockWiseSideOrientation,this.twoSidedLighting=!0;break;case L.Back:this.backFaceCulling=!0,this.sideOrientation=l.Material.ClockWiseSideOrientation,this.twoSidedLighting=!1}this._markAllSubMeshesAsMiscDirty()}applyOutlineCullMode(){this.storedCullMode=this.cullMode,this.cullMode=this._outlineCullMode}restoreOutlineCullMode(){this.cullMode=this.storedCullMode}getOutlineRendererName(){return this.outlineRenderer?this.outlineRenderer.name:""}get hasRenderTargetTextures(){return!1}getClassName(){return"MToonMaterial"}get useLogarithmicDepth(){return this._useLogarithmicDepth}set useLogarithmicDepth(e){const i=e&&this.getScene().getEngine().getCaps().fragmentDepthSupported;this._useLogarithmicDepth!==i&&(this._useLogarithmicDepth=i,this._markAllSubMeshesAsMiscDirty())}needAlphaBlending(){return!this._disableAlphaBlending&&(this.alpha<1||this._shouldUseAlphaFromDiffuseTexture())}needAlphaTesting(){return!!this._forceAlphaTest||!!this._alphaTest||this._hasAlphaChannel()&&(null==this._transparencyMode||this._transparencyMode===l.Material.MATERIAL_ALPHATEST)}_shouldUseAlphaFromDiffuseTexture(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha&&this._useAlphaFromDiffuseTexture&&this._transparencyMode!==l.Material.MATERIAL_OPAQUE}_hasAlphaChannel(){return null!==this._diffuseTexture&&this._diffuseTexture.hasAlpha}getAlphaTestTexture(){return this._diffuseTexture}isReadyForSubMesh(e,i,n=!1){if(this._uniformBufferLayoutBuilt||this.buildUniformLayout(),i.effect&&this.isFrozen&&i.effect._wasPreviouslyReady&&i.effect._wasPreviouslyUsingInstances===n)return!0;i.materialDefines||(this._callbackPluginEventGeneric(p.MaterialPluginEvent.GetDefineNames,this._eventInfo),i.materialDefines=new E);const t=this.getScene(),o=i.materialDefines;if(this._isReadyForSubMesh(i))return!0;const a=t.getEngine();o._needNormals=h.MaterialHelper.PrepareDefinesForLights(t,e,o,this.specularSupported,this._maxSimultaneousLights,this._disableLighting),this.outlineWidthMode!==D.None&&(o._needNormals=!0),this.applyDefines(o),h.MaterialHelper.PrepareDefinesForMultiview(t,o);const l=this.needAlphaBlendingForMesh(e)&&t.useOrderIndependentTransparency;if(h.MaterialHelper.PrepareDefinesForOIT(t,o,l),o._areTexturesDirty){this._eventInfo.hasRenderTargetTextures=!1,this._callbackPluginEventHasRenderTargetTextures(this._eventInfo),this._cacheHasRenderTargetTextures=this._eventInfo.hasRenderTargetTextures,o._needUVs=!1;for(let e=1;e<=f.Constants.MAX_SUPPORTED_UV_SETS;++e)o["MAINUV"+e]=!1;if(t.texturesEnabled){if(!(this.isReadyForTexture(this._diffuseTexture,o,"DIFFUSE")&&this.isReadyForTexture(this._emissiveTexture,o,"EMISSIVE")&&this.isReadyForTexture(this._shadeTexture,o,"SHADE")&&this.isReadyForTexture(this._receiveShadowTexture,o,"RECEIVE_SHADOW")&&this.isReadyForTexture(this._shadingGradeTexture,o,"SHADING_GRADE")&&this.isReadyForTexture(this._rimTexture,o,"RIM")&&this.isReadyForTexture(this._matCapTexture,o,"MATCAP")&&this.isReadyForTexture(this._outlineWidthTexture,o,"OUTLINE_WIDTH")&&this.isReadyForTexture(this._uvAnimationMaskTexture,o,"UV_ANIMATION_MASK")))return!1;if(t.getEngine().getCaps().standardDerivatives&&this._bumpTexture){if(!this._bumpTexture.isReady())return!1;h.MaterialHelper.PrepareDefinesForMergedUV(this._bumpTexture,o,"BUMP"),o.PARALLAX=this.useParallax,o.PARALLAXOCCLUSION=this.useParallaxOcclusion,o.OBJECTSPACE_NORMALMAP=this.useObjectSpaceNormalMap}else o.BUMP=!1,o.PARALLAX=!1,o.PARALLAXOCCLUSION=!1;o.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else o.DIFFUSE=!1,o.EMISSIVE=!1,o.SHADE=!1,o.RECEIVE_SHADOW=!1,o.SHADING_GRADE=!1,o.RIM=!1,o.MATCAP=!1,o.OUTLINE_WIDTH=!1,o.BUMP=!1,o.UV_ANIMATION_MASK=!1;o.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture(),o.PREMULTIPLYALPHA=this.alphaMode===f.Constants.ALPHA_PREMULTIPLIED||this.alphaMode===f.Constants.ALPHA_PREMULTIPLIED_PORTERDUFF,o.ALPHATEST_AFTERALLALPHACOMPUTATIONS=null!==this.transparencyMode,o.ALPHABLEND=null===this.transparencyMode||this.needAlphaBlendingForMesh(e)}if(this._eventInfo.isReadyForSubMesh=!0,this._eventInfo.defines=o,this._callbackPluginEventIsReadyForSubMesh(this._eventInfo),!this._eventInfo.isReadyForSubMesh)return!1;if(o._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(o)}if(this.flipU!==o.FLIP_U&&(o.FLIP_U=this.flipU,o.markAsUnprocessed()),this.flipV!==o.FLIP_V&&(o.FLIP_V=this.flipV,o.markAsUnprocessed()),h.MaterialHelper.PrepareDefinesForMisc(e,t,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e)||this._forceAlphaTest,o),h.MaterialHelper.PrepareDefinesForFrameBoundValues(t,a,o,n,null,i.getRenderingMesh().hasThinInstances),this._eventInfo.defines=o,this._eventInfo.mesh=e,this._callbackPluginEventPrepareDefinesBeforeAttributes(this._eventInfo),h.MaterialHelper.PrepareDefinesForAttributes(e,o,this.useVertexColor,this.useBones,this.useMorphTargets,this.useVertexAlpha,this.useBakedVertexAnimation),this._callbackPluginEventPrepareDefines(this._eventInfo),o.isDirty){const n=o._areLightsDisposed;o.markAsProcessed();const l=new u.EffectFallbacks;o.BUMP&&l.addFallback(0,"BUMP"),o.PARALLAX&&l.addFallback(1,"PARALLAX"),o.PARALLAXOCCLUSION&&l.addFallback(0,"PARALLAXOCCLUSION"),o.FOG&&l.addFallback(1,"FOG"),o.POINTSIZE&&l.addFallback(0,"POINTSIZE"),o.LOGARITHMICDEPTH&&l.addFallback(0,"LOGARITHMICDEPTH"),h.MaterialHelper.HandleFallbacksForShadows(o,l,this._maxSimultaneousLights),o.MULTIVIEW&&l.addFallback(0,"MULTIVIEW");const d=[r.VertexBuffer.PositionKind];o.NORMAL&&d.push(r.VertexBuffer.NormalKind),o.TANGENT&&d.push(r.VertexBuffer.TangentKind);for(let e=1;e<=f.Constants.MAX_SUPPORTED_UV_SETS;++e)o["UV"+e]&&d.push(`uv${1===e?"":e}`);o.INSTANCESCOLOR&&d.push(r.VertexBuffer.ColorInstanceKind),h.MaterialHelper.PrepareAttributesForBones(d,e,o,l),h.MaterialHelper.PrepareAttributesForInstances(d,o),h.MaterialHelper.PrepareAttributesForMorphTargets(d,e,o),h.MaterialHelper.PrepareAttributesForBakedVertexAnimation(d,e,o);const m="mtoon",c=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","visibility","vFogInfos","vFogColor","pointSize","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","logarithmicDepthConstant","vTangentSpaceParams","alphaCutOff","boneTextureWidth","morphTargetTextureInfo","morphTargetTextureIndices","vDiffuseColor","vDiffuseInfos","diffuseMatrix","vEmissiveColor","vEmissiveInfos","emissiveMatrix","vBumpInfos","bumpMatrix","vShadeColor","vShadeInfos","shadeMatrix","vReceiveShadowInfos","receiveShadowMatrix","vShadingGradeInfos","shadingGradeMatrix","vRimColor","vRimInfos","RimMatrix","vMatCapInfos","MatCapMatrix","vOutlineColor","vOutlineWidthInfos","outlineWidthMatrix","aspect","isOutline","shadingGradeRate","receiveShadowRate","shadeShift","shadeToony","rimLightingMix","rimFresnelPower","rimLift","lightColorAttenuation","indirectLightIntensity","outlineWidth","outlineScaledMaxDistance","outlineLightingMix","uvAnimationScrollX","uvAnimationScrollY","uvAnimationRotation","vEyeUp","time","projection"],g=["diffuseSampler","ambientSampler","emissiveSampler","bumpSampler","boneSampler","morphTargets","oitDepthSampler","oitFrontColorSampler","shadeSampler","receiveShadowSampler","shadingGradeSampler","rimSampler","matCapSampler","outlineWidthSampler","uvAnimationMaskSampler"],_=["Material","Scene","Mesh"];this._eventInfo.fallbacks=l,this._eventInfo.fallbackRank=0,this._eventInfo.defines=o,this._eventInfo.uniforms=c,this._eventInfo.attributes=d,this._eventInfo.samplers=g,this._eventInfo.uniformBuffersNames=_,this._eventInfo.customCode=void 0,this._eventInfo.mesh=e,this._callbackPluginEventGeneric(p.MaterialPluginEvent.PrepareEffect,this._eventInfo),s.ImageProcessingConfiguration&&(s.ImageProcessingConfiguration.PrepareUniforms(c,o),s.ImageProcessingConfiguration.PrepareSamplers(g,o)),h.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:c,uniformBuffersNames:_,samplers:g,defines:o,maxSimultaneousLights:this._maxSimultaneousLights});const A={},I=o.toString(),v=i.effect;let M=t.getEngine().createEffect(m,{attributes:d,uniformsNames:c,uniformBuffersNames:_,samplers:g,defines:I,fallbacks:l,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:o.NUM_MORPH_INFLUENCERS},processFinalCode:A.processFinalCode,processCodeAfterIncludes:this._eventInfo.customCode,multiTarget:o.PREPASS},a);if(M)if(this._onEffectCreatedObservable&&(S.effect=M,S.subMesh=i,this._onEffectCreatedObservable.notifyObservers(S)),this.allowShaderHotSwapping&&v&&!M.isReady()){if(M=v,o.markAsUnprocessed(),n)return o._areLightsDisposed=!0,!1}else t.resetCachedMaterial(),i.setEffect(M,o,this._materialContext)}return!(!i.effect||!i.effect.isReady()||(o._renderId=t.getRenderId(),i.effect._wasPreviouslyReady=!0,i.effect._wasPreviouslyUsingInstances=n,0))}buildUniformLayout(){const e=this._uniformBuffer;e.addUniform("vDiffuseColor",4),e.addUniform("vDiffuseInfos",2),e.addUniform("diffuseMatrix",16),e.addUniform("vEmissiveColor",3),e.addUniform("vEmissiveInfos",2),e.addUniform("emissiveMatrix",16),e.addUniform("vBumpInfos",3),e.addUniform("bumpMatrix",16),e.addUniform("vShadeColor",3),e.addUniform("vShadeInfos",2),e.addUniform("shadeMatrix",16),e.addUniform("vReceiveShadowInfos",2),e.addUniform("receiveShadowMatrix",16),e.addUniform("vShadingGradeInfos",2),e.addUniform("shadingGradeMatrix",16),e.addUniform("vRimColor",3),e.addUniform("vRimInfos",2),e.addUniform("rimMatrix",16),e.addUniform("vMatCapInfos",2),e.addUniform("matCapMatrix",16),e.addUniform("vOutlineColor",3),e.addUniform("vOutlineWidthInfos",2),e.addUniform("outlineWidthMatrix",16),e.addUniform("vUvAnimationMaskInfos",2),e.addUniform("uvAnimationMaskMatrix",16),e.addUniform("vTangentSpaceParams",2),e.addUniform("pointSize",1),e.addUniform("shadingGradeRate",1),e.addUniform("receiveShadowRate",1),e.addUniform("shadeShift",1),e.addUniform("shadeToony",1),e.addUniform("lightColorAttenuation",1),e.addUniform("indirectLightIntensity",1),e.addUniform("rimLightingMix",1),e.addUniform("rimFresnelPower",1),e.addUniform("rimLift",1),e.addUniform("outlineWidth",1),e.addUniform("outlineScaledMaxDistance",1),e.addUniform("outlineLightingMix",1),e.addUniform("uvAnimationScrollX",1),e.addUniform("uvAnimationScrollY",1),e.addUniform("uvAnimationRotation",1),e.addUniform("vEyeUp",3),e.addUniform("alphaCutOff",1),e.addUniform("vAmbientColor",3),e.addUniform("aspect",1),e.addUniform("isOutline",1),e.addUniform("time",4),e.addUniform("visibility",1),super.buildUniformLayout()}bindForSubMesh(e,i,n){var a;const r=this.getScene(),s=n.materialDefines,l=n.effect;if(!s||!l)return;this._activeEffect=l,i.getMeshUniformBuffer().bindToEffect(l,"Mesh"),i.transferToEffect(e),this._uniformBuffer.bindToEffect(l,"Material"),this._eventInfo.subMesh=n,this._callbackPluginEventHardBindForSubMesh(this._eventInfo),s.OBJECTSPACE_NORMALMAP&&(e.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));const d=this._mustRebind(r,l,i.visibility);h.MaterialHelper.BindBonesParameters(i,l);const f=this._uniformBuffer;if(d){this.bindViewProjection(l),f.useUbo&&this.isFrozen&&f.isSync||(r.texturesEnabled&&(this.bindTexture(this._diffuseTexture,f,l,"diffuse","vDiffuseInfos"),this.bindTexture(this._emissiveTexture,f,l,"emissive","vEmissiveInfos"),this._bumpTexture&&r.getEngine().getCaps().standardDerivatives&&(f.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this._bumpScale),h.MaterialHelper.BindTextureMatrix(this._bumpTexture,f,"bump"),l.setTexture("bumpSampler",this._bumpTexture),r._mirroredCameraPosition?f.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):f.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),this.bindTexture(this._shadeTexture,f,l,"shade","vShadeInfos"),this.bindTexture(this._receiveShadowTexture,f,l,"receiveShadow","vReceiveShadowInfos"),this.bindTexture(this._shadingGradeTexture,f,l,"shadingGrade","vShadingGradeInfos"),this.bindTexture(this._rimTexture,f,l,"rim","vRimInfos"),this.bindTexture(this._matCapTexture,f,l,"matCap","vMatCapInfos"),this.bindTexture(this._outlineWidthTexture,f,l,"outlineWidth","vOutlineWidthInfos"),this.bindTexture(this._uvAnimationMaskTexture,f,l,"uvAnimationMask","vUvAnimationMaskInfos"),this._hasAlphaChannel()&&f.updateFloat("alphaCutOff",this.alphaCutOff)),this.pointsCloud&&f.updateFloat("pointSize",this.pointSize),f.updateFloat("receiveShadowRate",this._receiveShadowRate),f.updateFloat("shadingGradeRate",this._shadingGradeRate),f.updateFloat("shadeShift",this._shadeShift),f.updateFloat("shadeToony",this._shadeToony),f.updateFloat("lightColorAttenuation",this._lightColorAttenuation),f.updateFloat("indirectLightIntensity",this._indirectLightIntensity),f.updateFloat("rimLightingMix",this._rimLightingMix),f.updateFloat("rimFresnelPower",this._rimFresnelPower),f.updateFloat("rimLift",this._rimLift),f.updateFloat("outlineWidth",this._outlineWidth),f.updateFloat("outlineScaledMaxDistance",this._outlineScaledMaxDistance),f.updateFloat("outlineLightingMix",this._outlineLightingMix),f.updateFloat("uvAnimationScrollX",this._uvAnimationScrollX),f.updateFloat("uvAnimationScrollY",this._uvAnimationScrollY),f.updateFloat("uvAnimationRotation",this._uvAnimationRotation),r.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor),f.updateColor3("vAmbientColor",this._globalAmbientColor),f.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha),f.updateColor3("vEmissiveColor",this.emissiveColor),f.updateColor3("vShadeColor",this.shadeColor),f.updateColor3("vRimColor",this.rimColor),f.updateColor4("vOutlineColor",this.outlineColor,1),f.updateVector3("vEyeUp",r.activeCamera.upVector));const e=r;e.useOrderIndependentTransparency&&this.needAlphaBlendingForMesh(i)&&e.depthPeelingRenderer&&e.depthPeelingRenderer.bind(l),this._eventInfo.subMesh=n,this._callbackPluginEventBindForSubMesh(this._eventInfo),h.MaterialHelper.BindClipPlane(l,r),this.bindEyePosition(l)}else r.getEngine()._features.needToAlwaysBindUniformBuffers&&(this._needToBindSceneUbo=!0);if(d||!this.isFrozen){r.lightsEnabled&&!this._disableLighting&&h.MaterialHelper.BindLights(r,i,l,s,this._maxSimultaneousLights),(r.fogEnabled&&i.applyFog&&r.fogMode!==t.Scene.FOGMODE_NONE||i.receiveShadows)&&this.bindView(l),h.MaterialHelper.BindFogParameters(r,i,l),s.NUM_MORPH_INFLUENCERS&&h.MaterialHelper.BindMorphTargetParameters(i,l),s.BAKED_VERTEX_ANIMATION_TEXTURE&&(null===(a=i.bakedVertexAnimationManager)||void 0===a||a.bind(l,s.INSTANCES)),this.useLogarithmicDepth&&h.MaterialHelper.BindLogDepth(s,l,r),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect),f.updateFloat("aspect",r.getEngine().getAspectRatio(r.activeCamera)),f.updateFloat("isOutline",this.isOutline);const e=window.performance.now()/1e3;f.updateVector4("time",new o.Vector4(e/20,e,2*e,3*e))}this._afterBind(i,this._activeEffect),f.update()}getAnimatables(){const e=super.getAnimatables();for(const i of this.appendedActiveTextures)i.animations&&i.animations.length>0&&e.push(i);return e}getActiveTextures(){return super.getActiveTextures().concat(this.appendedActiveTextures)}hasTexture(e){if(super.hasTexture(e))return!0;for(const i of this.appendedActiveTextures)if(i===e)return!0;return!1}dispose(e,i){if(delete this.outlineRenderer,i)for(const e of this.appendedActiveTextures)e.dispose();this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),super.dispose(e,i)}clone(e){const n=i.SerializationHelper.Clone((()=>new x(e,this.getScene())),this);return n.name=e,n.id=e,this.stencil.copyTo(n.stencil),n}static Parse(e,n,t){const o=i.SerializationHelper.Parse((()=>new x(e.name,n)),e,n,t);return e.stencil&&o.stencil.parse(e.stencil,n,t),o}bindTexture(e,i,n,t,o){e&&(this._uniformBuffer.updateFloat2(o,e.coordinatesIndex,e.level),h.MaterialHelper.BindTextureMatrix(e,i,t),n.setTexture(`${t}Sampler`,e))}isReadyForTexture(e,i,n){return e?!!e.isReadyOrNotBlocking()&&(h.MaterialHelper.PrepareDefinesForMergedUV(e,i,n),!0):(i[n]=!1,!0)}applyDefines(e){switch(this._debugMode){case T.Normal:!0!==e.MTOON_DEBUG_NORMAL&&(e.MTOON_DEBUG_NORMAL=!0,e.MTOON_DEBUG_LITSHADERATE=!1,e.markAsUnprocessed());break;case T.LitShadeRate:!0!==e.MTOON_DEBUG_LITSHADERATE&&(e.MTOON_DEBUG_NORMAL=!1,e.MTOON_DEBUG_LITSHADERATE=!0,e.markAsUnprocessed());break;case T.None:!0===e.MTOON_DEBUG_NORMAL&&(e.MTOON_DEBUG_NORMAL=!1,e.markAsUnprocessed()),!0===e.MTOON_DEBUG_LITSHADERATE&&(e.MTOON_DEBUG_LITSHADERATE=!1,e.markAsUnprocessed())}switch(this.outlineWidthMode){case D.WorldCorrdinates:!0!==e.MTOON_OUTLINE_WIDTH_WORLD&&(e.MTOON_OUTLINE_WIDTH_WORLD=!0,e.MTOON_OUTLINE_WIDTH_SCREEN=!1,e.markAsUnprocessed());break;case D.ScreenCoordinates:!0!==e.MTOON_OUTLINE_WIDTH_SCREEN&&(e.MTOON_OUTLINE_WIDTH_WORLD=!1,e.MTOON_OUTLINE_WIDTH_SCREEN=!0,e.markAsUnprocessed());break;case D.None:!1===e.MTOON_OUTLINE_WIDTH_SCREEN&&!1===e.MTOON_OUTLINE_WIDTH_WORLD||(e.MTOON_OUTLINE_WIDTH_SCREEN=!1,e.MTOON_OUTLINE_WIDTH_WORLD=!1,e.markAsUnprocessed())}switch(this.outlineColorMode){case N.FixedColor:!0!==e.MTOON_OUTLINE_COLOR_FIXED&&(e.MTOON_OUTLINE_COLOR_FIXED=!0,e.MTOON_OUTLINE_COLOR_MIXED=!1,e.markAsUnprocessed());break;case N.MixedLighting:!0!==e.MTOON_OUTLINE_COLOR_MIXED&&(e.MTOON_OUTLINE_COLOR_FIXED=!1,e.MTOON_OUTLINE_COLOR_MIXED=!0,e.markAsUnprocessed())}}}e([(0,i.serializeAsTexture)("diffuseTexture")],x.prototype,"_diffuseTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],x.prototype,"diffuseTexture",void 0),e([(0,i.serializeAsTexture)("emissiveTexture")],x.prototype,"_emissiveTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"emissiveTexture",void 0),e([(0,i.serializeAsTexture)("bumpTexture")],x.prototype,"_bumpTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"bumpTexture",void 0),e([(0,i.serializeAsTexture)("shadeTexture")],x.prototype,"_shadeTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"shadeTexture",void 0),e([(0,i.serializeAsTexture)("receiveShadowTexture")],x.prototype,"_receiveShadowTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"receiveShadowTexture",void 0),e([(0,i.serializeAsTexture)("shadingGradeTexture")],x.prototype,"_shadingGradeTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"shadingGradeTexture",void 0),e([(0,i.serializeAsTexture)("rimTexture")],x.prototype,"_rimTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"rimTexture",void 0),e([(0,i.serializeAsTexture)("matCapTexture")],x.prototype,"_matCapTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"matCapTexture",void 0),e([(0,i.serializeAsTexture)("outlineWidthTexture")],x.prototype,"_outlineWidthTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"outlineWidthTexture",void 0),e([(0,i.serializeAsTexture)("outlineWidthTexture")],x.prototype,"_uvAnimationMaskTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"uvAnimationMaskTexture",void 0),e([(0,i.serializeAsColor3)("diffuse")],x.prototype,"diffuseColor",void 0),e([(0,i.serialize)("ambient")],x.prototype,"ambientColor",void 0),e([(0,i.serialize)("emissive")],x.prototype,"emissiveColor",void 0),e([(0,i.serialize)("shade")],x.prototype,"shadeColor",void 0),e([(0,i.serialize)("rim")],x.prototype,"rimColor",void 0),e([(0,i.serialize)("outline")],x.prototype,"outlineColor",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"useEmissiveAsIllumination",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"linkEmissiveWithDiffuse",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"useReflectionOverAlpha",void 0),e([(0,i.serialize)("disableLighting")],x.prototype,"_disableLighting",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsLightsDirty")],x.prototype,"disableLighting",void 0),e([(0,i.serialize)()],x.prototype,"alphaCutOff",void 0),e([(0,i.serialize)("useAlphaFromDiffuseTexture")],x.prototype,"_useAlphaFromDiffuseTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],x.prototype,"useAlphaFromDiffuseTexture",void 0),e([(0,i.serialize)("maxSimultaneousLights")],x.prototype,"_maxSimultaneousLights",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsLightsDirty")],x.prototype,"maxSimultaneousLights",void 0),e([(0,i.serialize)("invertNormalMapX")],x.prototype,"_invertNormalMapX",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"invertNormalMapX",void 0),e([(0,i.serialize)("invertNormalMapY")],x.prototype,"_invertNormalMapY",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"invertNormalMapY",void 0),e([(0,i.serialize)("twoSidedLighting")],x.prototype,"_twoSidedLighting",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"twoSidedLighting",void 0),e([(0,i.serialize)()],x.prototype,"bumpScale",null),e([(0,i.serialize)()],x.prototype,"receiveShadowRate",null),e([(0,i.serialize)()],x.prototype,"shadingGradeRate",null),e([(0,i.serialize)()],x.prototype,"shadeShift",null),e([(0,i.serialize)()],x.prototype,"shadeToony",null),e([(0,i.serialize)()],x.prototype,"lightColorAttenuation",null),e([(0,i.serialize)()],x.prototype,"indirectLightIntensity",null),e([(0,i.serialize)()],x.prototype,"rimLightingMix",null),e([(0,i.serialize)()],x.prototype,"rimFresnelPower",null),e([(0,i.serialize)()],x.prototype,"rimLift",null),e([(0,i.serialize)()],x.prototype,"outlineWidth",null),e([(0,i.serialize)()],x.prototype,"outlineScaledMaxDistance",null),e([(0,i.serialize)()],x.prototype,"outlineLightingMix",null),e([(0,i.serialize)()],x.prototype,"uvAnimationScrollX",null),e([(0,i.serialize)()],x.prototype,"uvAnimationScrollY",null),e([(0,i.serialize)()],x.prototype,"uvAnimationRotation",null),e([(0,i.serialize)("alphaTest")],x.prototype,"_alphaTest",void 0),e([(0,i.serialize)()],x.prototype,"alphaTest",null),e([(0,i.serialize)()],x.prototype,"alphaBlend",null),e([(0,i.serialize)("debugMode")],x.prototype,"_debugMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"debugMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"outlineColorMode",void 0),e([(0,i.serialize)()],x.prototype,"cullMode",null),e([(0,i.serialize)()],x.prototype,"_outlineCullMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"outlineCullMode",void 0),e([(0,i.serialize)("flipU")],x.prototype,"flipU",void 0),e([(0,i.serialize)("flipV")],x.prototype,"flipV",void 0),e([(0,i.serialize)()],x.prototype,"useLogarithmicDepth",null)})(),M})()));

/***/ }),

/***/ "./src/helper.ts":
/*!***********************!*\
  !*** ./src/helper.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DHelper": () => (/* binding */ V3DHelper)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */

class V3DHelper {
    constructor(core) {
        this.core = core;
    }
    /**
     * Make a node cast shadow from a ShadowGenerator
     * @param shadowGenerator
     * @param nodeName
     */
    addNodeToShadowCasterByName(shadowGenerator, nodeName) {
        shadowGenerator?.addShadowCaster(this.core.scene.getNodeByName(nodeName));
    }
    /**
     * Make nodes cast shadow from a ShadowGenerator
     * @param shadowGenerator
     * @param nodeName
     */
    addNodeToShadowCasterContainsName(shadowGenerator, nodeName) {
        if (!shadowGenerator)
            return;
        for (const node of this.core.scene.getNodes()) {
            if (node && node.name.includes(nodeName)) {
                shadowGenerator.addShadowCaster(node);
            }
        }
    }
    /**
     * Make node receive shadow
     * @param nodeName
     */
    makeReceiveShadowByName(nodeName) {
        this.core.scene.getNodeByName(nodeName).receiveShadows = true;
    }
    /**
     * Make nodes receive shadow
     * @param nodeName
     */
    makeReceiveShadowContainsName(nodeName) {
        for (const node of this.core.scene.getNodes()) {
            if (node && node.name.includes(nodeName)) {
                try {
                    node.receiveShadows = true;
                }
                catch (e) {
                    console.log(e);
                }
            }
        }
    }
    showSkeletonDebug(skeleton, mesh) {
        const options = {
            pauseAnimations: true,
            returnToRest: false,
            computeBonesUsingShaders: true,
            useAllBones: true,
            displayMode: _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SkeletonViewer.DISPLAY_LINES, //A value that controls which display mode to use. (SkeletonViewer.DISPLAY_LINES = 0, SkeletonViewer.DISPLAY_SPHERES = 1, SkeletonViewer.DISPLAY_SPHERE_AND_SPURS = 2). Default = 0.
        };
        const skeletonViewer = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SkeletonViewer(skeleton, //Target Skeleton
        mesh, //That skeletons Attached Mesh or a Node with the same globalMatrix
        this.core.scene, //The Scene scope
        true, //autoUpdateBoneMatrices?
        mesh.renderingGroupId > 0 ? mesh.renderingGroupId + 1 : 1, // renderingGroupId
        options);
        return skeletonViewer;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/errors.ts":
/*!*******************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/errors.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BoneNotFoundError": () => (/* binding */ BoneNotFoundError)
/* harmony export */ });
/**
 * Throws when mandatory bone could not find
 */
class BoneNotFoundError extends Error {
    constructor(boneName) {
        super(`Bone:${boneName} NotFound`);
        this.boneName = boneName;
        this.name = 'BoneNotFoundError';
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/humanoid-bone.ts":
/*!**************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/humanoid-bone.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HumanoidBone": () => (/* binding */ HumanoidBone)
/* harmony export */ });
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ "./src/importer/babylon-vrm-loader/src/errors.ts");

/**
 * HumanoidBone を取得するメソッド群
 * @see https://docs.unity3d.com/ja/2018.3/ScriptReference/HumanBodyBones.html
 */
class HumanoidBone {
    //* TODO: Patched.
    // public constructor(private nodeMap: TransformNodeMap) {}
    constructor(nodeMap) {
        this.nodeMap = nodeMap;
    }
    dispose() {
        this.nodeMap = null;
    }
    /**
     * 尻
     */
    get hips() {
        return this.getMandatoryBone('hips');
    }
    /**
     * 左太もも
     */
    get leftUpperLeg() {
        return this.getMandatoryBone('leftUpperLeg');
    }
    /**
     * 右太もも
     */
    get rightUpperLeg() {
        return this.getMandatoryBone('rightUpperLeg');
    }
    /**
     * 左ひざ
     */
    get leftLowerLeg() {
        return this.getMandatoryBone('leftLowerLeg');
    }
    /**
     * 右ひざ
     */
    get rightLowerLeg() {
        return this.getMandatoryBone('rightLowerLeg');
    }
    /**
     * 左足首
     */
    get leftFoot() {
        return this.getMandatoryBone('leftFoot');
    }
    /**
     * 右足首
     */
    get rightFoot() {
        return this.getMandatoryBone('rightFoot');
    }
    /**
     * 脊椎の第一
     */
    get spine() {
        return this.getMandatoryBone('spine');
    }
    /**
     * 胸
     */
    get chest() {
        return this.getMandatoryBone('chest');
    }
    /**
     * 首
     */
    get neck() {
        return this.getMandatoryBone('neck');
    }
    /**
     * 頭
     */
    get head() {
        return this.getMandatoryBone('head');
    }
    /**
     * 左肩
     */
    get leftShoulder() {
        return this.getMandatoryBone('leftShoulder');
    }
    /**
     * 右肩
     */
    get rightShoulder() {
        return this.getMandatoryBone('rightShoulder');
    }
    /**
     * 左上腕
     */
    get leftUpperArm() {
        return this.getMandatoryBone('leftUpperArm');
    }
    /**
     * 右上腕
     */
    get rightUpperArm() {
        return this.getMandatoryBone('rightUpperArm');
    }
    /**
     * 左ひじ
     */
    get leftLowerArm() {
        return this.getMandatoryBone('leftLowerArm');
    }
    /**
     * 右ひじ
     */
    get rightLowerArm() {
        return this.getMandatoryBone('rightLowerArm');
    }
    /**
     * 左手首
     */
    get leftHand() {
        return this.getMandatoryBone('leftHand');
    }
    /**
     * 右手首
     */
    get rightHand() {
        return this.getMandatoryBone('rightHand');
    }
    /**
     * 左つま先(Optional)
     */
    get leftToes() {
        return this.getOptionalBone('leftToes');
    }
    /**
     * 右つま先(Optional)
     */
    get rightToes() {
        return this.getOptionalBone('rightToes');
    }
    /**
     * 左目(Optional)
     */
    get leftEye() {
        return this.getOptionalBone('leftEye');
    }
    /**
     * 右目(Optional)
     */
    get rightEye() {
        return this.getOptionalBone('rightEye');
    }
    /**
     * 顎(Optional)
     */
    get jaw() {
        return this.getOptionalBone('jaw');
    }
    /**
     * 左親指第一指骨(Optional)
     */
    get leftThumbProximal() {
        return this.getOptionalBone('leftThumbProximal');
    }
    /**
     * 左親指第二指骨(Optional)
     */
    get leftThumbIntermediate() {
        return this.getOptionalBone('leftThumbIntermediate');
    }
    /**
     * 左親指第三指骨(Optional)
     */
    get leftThumbDistal() {
        return this.getOptionalBone('leftThumbDistal');
    }
    /**
     * 左人差し指第一指骨(Optional)
     */
    get leftIndexProximal() {
        return this.getOptionalBone('leftIndexProximal');
    }
    /**
     * 左人差し指第二指骨(Optional)
     */
    get leftIndexIntermediate() {
        return this.getOptionalBone('leftIndexIntermediate');
    }
    /**
     * 左人差し指第三指骨(Optional)
     */
    get leftIndexDistal() {
        return this.getOptionalBone('leftIndexDistal');
    }
    /**
     * 左中指第一指骨(Optional)
     */
    get leftMiddleProximal() {
        return this.getOptionalBone('leftMiddleProximal');
    }
    /**
     * 左中指第二指骨(Optional)
     */
    get leftMiddleIntermediate() {
        return this.getOptionalBone('leftMiddleIntermediate');
    }
    /**
     * 左中指第三指骨(Optional)
     */
    get leftMiddleDistal() {
        return this.getOptionalBone('leftMiddleDistal');
    }
    /**
     * 左薬指第一指骨(Optional)
     */
    get leftRingProximal() {
        return this.getOptionalBone('leftRingProximal');
    }
    /**
     * 左薬指第二指骨(Optional)
     */
    get leftRingIntermediate() {
        return this.getOptionalBone('leftRingIntermediate');
    }
    /**
     * 左薬指第三指骨(Optional)
     */
    get leftRingDistal() {
        return this.getOptionalBone('leftRingDistal');
    }
    /**
     * 左小指第一指骨(Optional)
     */
    get leftLittleProximal() {
        return this.getOptionalBone('leftLittleProximal');
    }
    /**
     * 左小指第二指骨(Optional)
     */
    get leftLittleIntermediate() {
        return this.getOptionalBone('leftLittleIntermediate');
    }
    /**
     * 左小指第三指骨(Optional)
     */
    get leftLittleDistal() {
        return this.getOptionalBone('leftLittleDistal');
    }
    /**
     * 右親指第一指骨(Optional)
     */
    get rightThumbProximal() {
        return this.getOptionalBone('rightThumbProximal');
    }
    /**
     * 右親指第二指骨(Optional)
     */
    get rightThumbIntermediate() {
        return this.getOptionalBone('rightThumbIntermediate');
    }
    /**
     * 右親指第三指骨(Optional)
     */
    get rightThumbDistal() {
        return this.getOptionalBone('rightThumbDistal');
    }
    /**
     * 右人差し指第一指骨(Optional)
     */
    get rightIndexProximal() {
        return this.getOptionalBone('rightIndexProximal');
    }
    /**
     * 右人差し指第二指骨(Optional)
     */
    get rightIndexIntermediate() {
        return this.getOptionalBone('rightIndexIntermediate');
    }
    /**
     * 右人差し指第三指骨(Optional)
     */
    get rightIndexDistal() {
        return this.getOptionalBone('rightIndexDistal');
    }
    /**
     * 右中指第一指骨(Optional)
     */
    get rightMiddleProximal() {
        return this.getOptionalBone('rightMiddleProximal');
    }
    /**
     * 右中指第二指骨(Optional)
     */
    get rightMiddleIntermediate() {
        return this.getOptionalBone('rightMiddleIntermediate');
    }
    /**
     * 右中指第三指骨(Optional)
     */
    get rightMiddleDistal() {
        return this.getOptionalBone('rightMiddleDistal');
    }
    /**
     * 右薬指第一指骨(Optional)
     */
    get rightRingProximal() {
        return this.getOptionalBone('rightRingProximal');
    }
    /**
     * 右薬指第二指骨(Optional)
     */
    get rightRingIntermediate() {
        return this.getOptionalBone('rightRingIntermediate');
    }
    /**
     * 右薬指第三指骨(Optional)
     */
    get rightRingDistal() {
        return this.getOptionalBone('rightRingDistal');
    }
    /**
     * 右小指第一指骨(Optional)
     */
    get rightLittleProximal() {
        return this.getOptionalBone('rightLittleProximal');
    }
    /**
     * 右小指第二指骨(Optional)
     */
    get rightLittleIntermediate() {
        return this.getOptionalBone('rightLittleIntermediate');
    }
    /**
     * 右小指第三指骨(Optional)
     */
    get rightLittleDistal() {
        return this.getOptionalBone('rightLittleDistal');
    }
    /**
     * 上胸(Optional)
     */
    get upperChest() {
        return this.getOptionalBone('upperChest');
    }
    /**
     * 必須ボーンを取得する。取得出来ない場合は例外を発生する
     *
     * @throws BoneNotFoundError
     * @param name HumanoidBoneName
     */
    getMandatoryBone(name) {
        const node = this.nodeMap[name];
        if (!node) {
            throw new _errors__WEBPACK_IMPORTED_MODULE_0__.BoneNotFoundError(name);
        }
        return node;
    }
    /**
     * オプショナルボーンを取得する
     *
     * @param name HumanoidBoneName
     */
    getOptionalBone(name) {
        return (this.nodeMap && this.nodeMap[name]) || null;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts":
/*!******************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MaterialValueBindingMerger": () => (/* binding */ MaterialValueBindingMerger)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! babylon-mtoon-material */ "./node_modules/babylon-mtoon-material/dist/index.module.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__);



const PBRMaterialTextureMap = {
    _MainTex: 'albedoTexture',
};
const PBRMaterialColorMap = {
    _Color: 'albedoColor',
};
const MToonMaterialTextureMap = {
    _MainTex: 'diffuseTexture',
    _EmissionMap: 'emissiveTexture',
    _BumpMap: 'bumpTexture',
    _ShadeTexture: 'shadeTexture',
    _ReceiveShadowTexture: 'receiveShadowTexture',
    _ShadingGradeTexture: 'shadingGradeTexture',
    _RimTexture: 'rimTexture',
    _SphereAdd: 'matCapTexture',
    _OutlineWidthTexture: 'outlineWidthTexture',
    _UvAnimMaskTexture: 'uvAnimationMaskTexture',
};
const MToonMaterialColorMap = {
    _Color: 'diffuseColor',
    _ShadeColor: 'shadeColor',
    _RimColor: 'rimColor',
    _EmissionColor: 'emissiveColor',
    _OutlineColor: 'outlineColor',
};
/**
 * @see https://github.com/vrm-c/UniVRM/blob/4ffd97c2e9339683ce9bf21e73f510bd90c2a5b2/Assets/VRM/Runtime/BlendShape/MaterialValueBindingMerger.cs
 */
class MaterialValueBindingMerger {
    /**
     * @param materials VRMの全 Material
     * @param materialValues
     */
    constructor(materials, materialValues) {
        this.materialValues = materialValues;
        this.m_materialMap = {};
        this.m_materialSetterMap = {};
        this.m_materialValueMap = {};
        this.m_used = {};
        this.baseValueCache = {};
        this.materialValuesToApply = {};
        if (materials.length === 0 || materialValues.length === 0) {
            return;
        }
        // プロパティ名の変換に対応している MToonMaterial と PBRMaterial を保存する
        materials.forEach((material) => {
            if (material instanceof babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__.MToonMaterial || material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
                this.m_materialMap[material.name] = material;
            }
        });
        materialValues.forEach((materialValue) => {
            const bindingKey = this.makeBindingKey(materialValue);
            if (this.m_materialSetterMap[bindingKey]) {
                return;
            }
            const material = this.m_materialMap[materialValue.materialName];
            if (!material) {
                return;
            }
            const baseValue = this.getMaterialProperty(material, materialValue.propertyName);
            if (!baseValue || materialValue.targetValue.length !== 4) {
                return;
            }
            // モーフィング用に baseValue (初期値) と materialValue を保存する
            this.baseValueCache[bindingKey] = baseValue;
            this.materialValuesToApply[bindingKey] = materialValue;
            const targetValue = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4.FromArray(materialValue.targetValue);
            const valueName = materialValue.propertyName;
            // Unity と座標系が異なるため、テクスチャの vOffset を反転する
            if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
                if (Object.keys(PBRMaterialTextureMap).some((k) => valueName.startsWith(k))) {
                    targetValue.w *= -1;
                }
            }
            else if (Object.keys(MToonMaterialTextureMap).some((k) => valueName.startsWith(k))) {
                targetValue.w *= -1;
            }
            if (valueName.endsWith('_ST_S')) {
                // テクスチャの u方向 のみ更新する
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    const src = this.getMaterialProperty(material, valueName);
                    src.x = propValue.x;
                    src.z = propValue.z;
                    this.updateMaterialProperty(material, valueName, src);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
            else if (valueName.endsWith('_ST_T')) {
                // テクスチャの v方向 のみ更新する
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    const src = this.getMaterialProperty(material, valueName);
                    src.y = propValue.y;
                    src.w = propValue.w;
                    this.updateMaterialProperty(material, valueName, src);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
            else {
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    this.updateMaterialProperty(material, valueName, propValue);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
        });
    }
    /**
     * UniVRM では Dictionary のキー用のクラスを定義しているが、文字列で代用する
     * MaterialValueBinding.BaseValue は対応するプロパティの初期値なので無視できる
     */
    makeBindingKey(materialValue) {
        return `${materialValue.materialName}_${materialValue.propertyName}_${materialValue.targetValue.join('-')}`;
    }
    /**
     * UniVRM では Dictionary のキー用のクラスを定義しているが、文字列で代用する
     */
    makeTargetKey(materialValue) {
        return `${materialValue.materialName}_${materialValue.propertyName}`;
    }
    /**
     * モーフィングを行う
     * @param value 値(0〜1)
     */
    morphing(value) {
        this.accumulateValue(value);
        this.apply();
    }
    /**
     * materialValue ごとに重みを計算する
     */
    accumulateValue(value) {
        this.materialValues.forEach((materialValue) => {
            const bindingKey = this.makeBindingKey(materialValue);
            if (this.m_materialValueMap[bindingKey]) {
                this.m_materialValueMap[bindingKey] += value;
            }
            else {
                this.m_materialValueMap[bindingKey] = value;
            }
        });
    }
    /**
     * Material のプロパティを更新する
     */
    apply() {
        this.m_used = {};
        Object.entries(this.materialValuesToApply).forEach(([bindingKey, materialValue]) => {
            const targetKey = this.makeTargetKey(materialValue);
            if (!(targetKey in this.m_used)) {
                const material = this.m_materialMap[materialValue.materialName];
                const value = this.baseValueCache[bindingKey].clone();
                // 対象のプロパティを初期値に戻す
                const valueName = materialValue.propertyName;
                if (valueName.endsWith('_ST_S')) {
                    const v = this.getMaterialProperty(material, valueName);
                    value.y = v.y;
                    value.w = v.w;
                }
                else if (valueName.endsWith('_ST_T')) {
                    const v = this.getMaterialProperty(material, valueName);
                    value.x = v.x;
                    value.z = v.z;
                }
                this.updateMaterialProperty(material, valueName, value);
                this.m_used[targetKey] = true;
            }
            const setter = this.m_materialSetterMap[bindingKey];
            if (setter) {
                setter(this.m_materialValueMap[bindingKey], false);
            }
        });
        this.m_materialValueMap = {};
    }
    /**
     * マテリアルのテクスチャか色に対応する Vector4 を取得する
     */
    getMaterialProperty(material, propertyName) {
        const match = propertyName.match(/^(_[^_]+)/);
        if (!match || !match[1]) {
            return null;
        }
        const key = match[1];
        if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
            if (PBRMaterialTextureMap[key]) {
                return this.convertTextureIntoVector4WhenNotNull(material[PBRMaterialTextureMap[key]]);
            }
            if (PBRMaterialColorMap[key]) {
                return this.convertColorIntoVector4(material[PBRMaterialColorMap[key]], material.alpha);
            }
            return null;
        }
        // MToonMaterial
        if (MToonMaterialTextureMap[key]) {
            return this.convertTextureIntoVector4WhenNotNull(material[MToonMaterialTextureMap[key]]);
        }
        if (MToonMaterialColorMap[key]) {
            return this.convertColorIntoVector4(material[MToonMaterialColorMap[key]], material.alpha);
        }
        return null;
    }
    /**
     * Texture を Vector4 に変換する
     */
    convertTextureIntoVector4WhenNotNull(texture) {
        if (!texture) {
            return null;
        }
        const t = texture;
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4(t.uScale, t.vScale, t.uOffset, t.vOffset);
    }
    /**
     * Color3 に alpha を加えて Vector4 に変換する
     */
    convertColorIntoVector4(color, alpha) {
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4(color.r, color.g, color.b, alpha);
    }
    /**
     * マテリアルのテクスチャか色を更新する
     */
    updateMaterialProperty(material, propertyName, value) {
        const match = propertyName.match(/^(_[^_]+)/);
        if (!match || !match[1]) {
            return;
        }
        const key = match[1];
        if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
            if (PBRMaterialTextureMap[key]) {
                this.updateTextureWhenNotNull(material[PBRMaterialTextureMap[key]], value);
                return;
            }
            if (PBRMaterialColorMap[key]) {
                if (key === '_Color') {
                    material.alpha = value.w;
                }
                this.updateColor(material[PBRMaterialColorMap[key]], value);
            }
            return;
        }
        // MToonMaterial
        if (MToonMaterialTextureMap[key]) {
            this.updateTextureWhenNotNull(material[MToonMaterialTextureMap[key]], value);
            return;
        }
        if (MToonMaterialColorMap[key]) {
            if (key === '_Color') {
                material.alpha = value.w;
            }
            this.updateColor(material[MToonMaterialColorMap[key]], value);
        }
    }
    /**
     * Texture を Vector4 で更新する
     */
    updateTextureWhenNotNull(texture, value) {
        if (texture) {
            const t = texture;
            t.uScale = value.x;
            t.vScale = value.y;
            t.uOffset = value.z;
            t.vOffset = value.w;
        }
    }
    /**
     * Color3 を Vector4 で更新する
     */
    updateColor(color, value) {
        color.r = value.x;
        color.g = value.y;
        color.b = value.z;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts":
/*!***********************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColliderGroup": () => (/* binding */ ColliderGroup)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Meshes_Builders_sphereBuilder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Meshes/Builders/sphereBuilder */ "./node_modules/@babylonjs/core/Meshes/Builders/sphereBuilder.js");
/* harmony import */ var _collider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collider */ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts");


/**
 * VRM SpringBone ColliderGroup
 */
class ColliderGroup {
    /**
     * @param transform The node of the collider group for setting up collision detections.
     */
    constructor(transform) {
        this.transform = transform;
        this.colliders = [];
    }
    /**
     * Add offsetted collider
     *
     * @param offset The local coordinate from the node of the collider group.
     * @param radius The radius of the collider.
     */
    addCollider(offset, radius) {
        const sphere = _babylonjs_core_Meshes_Builders_sphereBuilder__WEBPACK_IMPORTED_MODULE_0__.SphereBuilder.CreateSphere(`${this.transform.name}_ColliderSphere`, {
            segments: 6,
            diameter: radius * 2.0,
            updatable: true,
        }, this.transform.getScene());
        sphere.setParent(this.transform);
        sphere.setPositionWithLocalVector(offset);
        sphere.setEnabled(false);
        this.colliders.push(new _collider__WEBPACK_IMPORTED_MODULE_1__.Collider(offset, radius, sphere));
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts":
/*!*****************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Collider": () => (/* binding */ Collider)
/* harmony export */ });
/**
 * Collider
 */
class Collider {
    /**
     * @param offset The local coordinate from the node of the collider group.
     * @param radius The radius of the collider.
     * @param sphere The spehere mesh for worldMatrix and gizmo.
     */
    constructor(offset, radius, sphere) {
        this.offset = offset;
        this.radius = radius;
        this.sphere = sphere;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts":
/*!*******************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpringBoneController": () => (/* binding */ SpringBoneController)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _collider_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collider-group */ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts");
/* harmony import */ var _vrm_spring_bone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vrm-spring-bone */ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts");



/**
 * VRM SpringBone Controller
 */
class SpringBoneController {
    /**
     * @param ext SecondaryAnimation Object
     * @param getBone
     */
    //* TODO: Patched.
    constructor(ext, getBone, options) {
        this.ext = ext;
        const colliderGroups = this.constructColliderGroups(getBone);
        //* TODO: Patched.
        // this.springs = this.constructSprings(getBone, colliderGroups);
        this.springs = this.constructSprings(getBone, colliderGroups, options);
    }
    dispose() {
        this.springs = [];
    }
    /**
     * Update all SpringBones
     *
     * @param deltaTime Elapsed sec from previous frame
     * @see https://docs.unity3d.com/ScriptReference/Time-deltaTime.html
     */
    async update(deltaTime) {
        // ポーズ後のあらぶり防止のため clamp
        deltaTime = Math.max(0.0, Math.min(16.666, deltaTime)) / 1000;
        const promises = this.springs.map((spring) => {
            return spring.update(deltaTime);
        });
        return Promise.all(promises).then(() => {
            /* Do nothing */
        });
    }
    constructColliderGroups(getBone) {
        if (!this.ext.colliderGroups || !this.ext.colliderGroups.length) {
            return [];
        }
        const colliderGroups = [];
        this.ext.colliderGroups.forEach((colliderGroup) => {
            const bone = getBone(colliderGroup.node);
            const g = new _collider_group__WEBPACK_IMPORTED_MODULE_1__.ColliderGroup(bone);
            colliderGroup.colliders.forEach((collider) => {
                g.addCollider(
                // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
                new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(-collider.offset.x, collider.offset.y, -collider.offset.z), collider.radius);
            });
            colliderGroups.push(g);
        });
        return colliderGroups;
    }
    constructSprings(getBone, colliderGroups, options) {
        if (!this.ext.boneGroups || !this.ext.boneGroups.length) {
            return [];
        }
        const springs = [];
        this.ext.boneGroups.forEach((spring) => {
            const rootBones = (spring.bones || []).map((bone) => {
                return getBone(bone);
            });
            const springColliders = (spring.colliderGroups || []).map((g) => {
                return colliderGroups[g];
            });
            springs.push(
            //* TODO: Patched.
            // new VRMSpringBone(
            //     spring.comment,
            //     spring.stiffiness,
            //     spring.gravityPower,
            //     new Vector3(
            //         // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
            //         -spring.gravityDir.x,
            //         spring.gravityDir.y,
            //         -spring.gravityDir.z
            //     ).normalize(),
            //     spring.dragForce,
            //     getBone(spring.center),
            //     spring.hitRadius,
            //     rootBones,
            //     springColliders
            // )
            new _vrm_spring_bone__WEBPACK_IMPORTED_MODULE_2__.VRMSpringBone(spring.comment, options?.stiffness ? options.stiffness : spring.stiffiness, options?.gravityPower ? options.gravityPower : spring.gravityPower, options?.gravityDir
                ? options.gravityDir
                : new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(
                // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
                -spring.gravityDir.x, spring.gravityDir.y, -spring.gravityDir.z).normalize(), options?.dragForce ? options.dragForce : spring.dragForce, getBone(spring.center), options?.hitRadius ? options.hitRadius : spring.hitRadius, rootBones, springColliders));
        });
        return springs;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts":
/*!******************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBoneLogic": () => (/* binding */ VRMSpringBoneLogic)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");

// based on
// http://rocketjump.skr.jp/unity3d/109/
// https://github.com/dwango/UniVRM/blob/master/Scripts/SpringBone/VRMSpringBone.cs
// https://github.com/pixiv/three-vrm/blob/aad551e041fad553c19d2091e5f5eaff1eb8faa8/packages/three-vrm/src/springbone/VRMSpringBone.ts
const IDENTITY_MATRIX = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix.Identity();
const _v3A = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _v3B = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _v3C = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _quatA = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Quaternion();
const _matA = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix();
const _matB = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix();
/**
 * Verlet Spring Bone
 */
class VRMSpringBoneLogic {
    /**
     * @param center Center reference of TransformNode
     * @param radius Collision Radius
     * @param transform Base TransformNode
     */
    constructor(center, radius, transform) {
        this.center = center;
        this.radius = radius;
        this.transform = transform;
        this.currentTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        this.prevTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        this.nextTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        // Initialize rotationQuaternion when not initialized
        if (!transform.rotationQuaternion) {
            transform.rotationQuaternion = transform.rotation.toQuaternion();
        }
        const worldMatrix = transform.getWorldMatrix();
        this.centerSpacePosition = worldMatrix.getTranslation();
        this.initialLocalMatrix = transform._localMatrix.clone();
        this.initialLocalRotation = transform.rotationQuaternion.clone();
        const children = transform.getChildTransformNodes(true);
        if (children.length === 0) {
            this.initialLocalChildPosition = transform.position.clone().normalize().scaleInPlace(0.07);
        }
        else {
            this.initialLocalChildPosition = children[0].position.clone();
        }
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, worldMatrix, this.currentTail);
        this.prevTail.copyFrom(this.currentTail);
        this.nextTail.copyFrom(this.currentTail);
        this.boneAxis = this.initialLocalChildPosition.normalizeToNew();
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, worldMatrix, _v3A);
        this.centerSpaceBoneLength = _v3A.subtractInPlace(this.centerSpacePosition).length();
        if (center) {
            this.getMatrixWorldToCenter(_matA);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.currentTail, _matA, this.currentTail);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.prevTail, _matA, this.prevTail);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.nextTail, _matA, this.nextTail);
            worldMatrix.multiplyToRef(_matA, _matA);
            _matA.getTranslationToRef(this.centerSpacePosition);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, _matA, _v3A);
            this.centerSpaceBoneLength = _v3A.subtractInPlace(this.centerSpacePosition).length();
        }
    }
    /**
     * Update Tail position
     *
     * @param stiffnessForce Current frame stiffness
     * @param dragForce Current frame drag force
     * @param external Current frame external force
     * @param colliderGroups Current frame colliderGroups
     */
    update(stiffnessForce, dragForce, external, colliderGroups) {
        if (Number.isNaN(this.transform.getAbsolutePosition().x)) {
            // Do not update when absolute position is invalid
            return;
        }
        // Get bone position in center space
        this.getMatrixWorldToCenter(_matA);
        this.transform.getWorldMatrix().multiplyToRef(_matA, _matA);
        _matA.getTranslationToRef(this.centerSpacePosition);
        // Get parent position in center space
        this.getMatrixWorldToCenter(_matB);
        this.getParentMatrixWorld().multiplyToRef(_matB, _matB);
        // verlet積分で次の位置を計算
        this.nextTail.copyFrom(this.currentTail);
        {
            // 減衰付きで前のフレームの移動を継続
            _v3A.copyFrom(this.currentTail)
                .subtractInPlace(this.prevTail)
                .scaleInPlace(1.0 - dragForce);
            this.nextTail.addInPlace(_v3A);
        }
        {
            // 親の回転による子ボーンの移動目標
            _v3A.copyFrom(this.boneAxis);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(_v3A, this.initialLocalMatrix, _v3A);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(_v3A, _matB, _v3A);
            _v3A.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(stiffnessForce);
            this.nextTail.addInPlace(_v3A);
        }
        {
            // 外力による移動量
            this.nextTail.addInPlace(external);
        }
        {
            // 長さを boneLength に強制
            this.nextTail.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(this.centerSpaceBoneLength).addInPlace(this.centerSpacePosition);
        }
        {
            // Collision で移動
            this.collide(colliderGroups, this.nextTail);
        }
        this.prevTail.copyFrom(this.currentTail);
        this.currentTail.copyFrom(this.nextTail);
        this.initialLocalMatrix.multiplyToRef(_matB, _matA);
        const initialCenterSpaceMatrixInv = _matA.invert();
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.nextTail, initialCenterSpaceMatrixInv, _v3A);
        _v3A.normalizeToRef(_v3B);
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Quaternion.FromUnitVectorsToRef(this.boneAxis, _v3B, _quatA);
        const applyRotation = _quatA;
        this.initialLocalRotation.multiplyToRef(applyRotation, this.transform.rotationQuaternion);
        // update WorldMatrix
        this.transform.computeWorldMatrix(true);
    }
    /**
     * Create a matrix that converts world space into center space.
     * @param result Target matrix
     */
    getMatrixWorldToCenter(result) {
        if (this.center) {
            this.center.getWorldMatrix().invertToRef(result);
        }
        else {
            result.copyFrom(IDENTITY_MATRIX);
        }
        return result;
    }
    /**
     * Returns the world matrix of its parent object.
     */
    getParentMatrixWorld() {
        return this.transform.parent ? this.transform.parent.getWorldMatrix() : IDENTITY_MATRIX;
    }
    /**
     * 衝突判定を行う
     * @param colliderGroups
     * @param tail
     */
    collide(colliderGroups, tail) {
        colliderGroups.forEach((colliderGroup) => {
            colliderGroup.colliders.forEach((collider) => {
                this.getMatrixWorldToCenter(_matA);
                collider.sphere.computeWorldMatrix().multiplyToRef(_matA, _matA);
                _matA.getTranslationToRef(_v3A);
                const colliderCenterSpacePosition = _v3A;
                let maxAbsScale = 0;
                collider.sphere.absoluteScaling.asArray().forEach((s) => {
                    maxAbsScale = Math.max(maxAbsScale, Math.abs(s));
                });
                const colliderRadius = collider.radius * maxAbsScale;
                const r = this.radius + colliderRadius;
                tail.subtractToRef(colliderCenterSpacePosition, _v3B);
                if (_v3B.lengthSquared() <= r * r) {
                    const normal = _v3B.copyFrom(tail).subtractInPlace(colliderCenterSpacePosition).normalize();
                    const posFromCollider = _v3C.copyFrom(colliderCenterSpacePosition).addInPlace(normal.scaleInPlace(r));
                    tail.copyFrom(posFromCollider.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(this.centerSpaceBoneLength).addInPlace(this.centerSpacePosition));
                }
            });
        });
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts":
/*!************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBone": () => (/* binding */ VRMSpringBone)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/standardMaterial */ "./node_modules/@babylonjs/core/Materials/standardMaterial.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _babylonjs_core_Meshes_meshBuilder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Meshes/meshBuilder */ "./node_modules/@babylonjs/core/Meshes/meshBuilder.js");
/* harmony import */ var _vrm_spring_bone_logic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vrm-spring-bone-logic */ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts");




/**
 * @see https://github.com/vrm-c/UniVRM/blob/master/Assets/VRM/UniVRM/Scripts/SpringBone/VRMSpringBone.cs
 */
class VRMSpringBone {
    /**
     * @see https://github.com/vrm-c/vrm-specification/tree/master/specification/0.0
     * @param comment Annotation comment
     * @param stiffness The resilience of the swaying object (the power of returning to the initial pose).
     * @param gravityPower The strength of gravity.
     * @param gravityDir The direction of gravity. Set (0, -1, 0) for simulating the gravity. Set (1, 0, 0) for simulating the wind.
     * @param dragForce The resistance (deceleration) of automatic animation.
     * @param center The reference point of a swaying object can be set at any location except the origin.
     *               When implementing UI moving with warp,
     *               the parent node to move with warp can be specified if you don't want to make the object swaying with warp movement.
     * @param hitRadius The radius of the sphere used for the collision detection with colliders.
     * @param bones Specify the node index of the root bone of the swaying object.
     * @param colliderGroups Specify the index of the collider group for collisions with swaying objects.
     */
    constructor(comment, 
    //* TODO: Patched.
    // public readonly stiffness: number,
    // public readonly gravityPower: number,
    // public readonly gravityDir: Vector3,
    // public readonly dragForce: number,
    stiffness, gravityPower, gravityDir, dragForce, center, 
    //* TODO: Patched.
    // public readonly hitRadius: number,
    hitRadius, bones, colliderGroups) {
        this.comment = comment;
        this.stiffness = stiffness;
        this.gravityPower = gravityPower;
        this.gravityDir = gravityDir;
        this.dragForce = dragForce;
        this.center = center;
        this.hitRadius = hitRadius;
        this.bones = bones;
        this.colliderGroups = colliderGroups;
        this.verlets = [];
        this.activeBones = [];
        /** @hidden */
        this.drawGizmo = false;
        this.activeBones = this.bones.filter((bone) => bone !== null);
        this.activeBones.forEach((bone) => {
            [bone].concat(bone.getChildTransformNodes()).forEach((b) => {
                this.verlets.push(new _vrm_spring_bone_logic__WEBPACK_IMPORTED_MODULE_3__.VRMSpringBoneLogic(this.center, this.hitRadius, b));
            });
        });
        if (this.drawGizmo) {
            this.setupGizmo();
        }
    }
    setupGizmo() {
        this.activeBones.forEach((bone) => {
            const scene = bone.getScene();
            [bone].concat(bone.getChildTransformNodes()).forEach((b) => {
                const boneGizmo = _babylonjs_core_Meshes_meshBuilder__WEBPACK_IMPORTED_MODULE_2__.MeshBuilder.CreateSphere(b.name + '_boneGizmo', {
                    segments: 6,
                    diameter: this.hitRadius * 2,
                    updatable: true,
                }, scene);
                const mat = new _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__.StandardMaterial(b.name + '_boneGizmomat', scene);
                mat.emissiveColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3.Red();
                mat.wireframe = true;
                boneGizmo.material = mat;
                boneGizmo.setParent(b);
                boneGizmo.position = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero();
            });
        });
        this.colliderGroups.forEach((group) => {
            const scene = group.transform.getScene();
            group.colliders.forEach((collider) => {
                const sphere = collider.sphere;
                if (!sphere.isEnabled(false)) {
                    sphere.setEnabled(true);
                    const mat = new _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__.StandardMaterial(group.transform.name + '_colliderGizmomat', scene);
                    mat.emissiveColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3.Yellow();
                    mat.wireframe = true;
                    sphere.material = mat;
                }
            });
        });
    }
    /**
     * Update bones
     *
     * @param deltaTime
     */
    //* TODO: Patched.
    // public async update(deltaTime: number): Promise<void> {
    async update(deltaTime, boneOptions) {
        //* TODO: Patched.
        const oldOptions = this.updateOptions(boneOptions);
        const stiffness = this.stiffness * deltaTime;
        const external = this.gravityDir.scale(this.gravityPower * deltaTime);
        const promises = this.verlets.map((verlet) => {
            return new Promise((resolve) => {
                verlet.update(stiffness, this.dragForce, external, this.colliderGroups);
                resolve();
            });
        });
        //* TODO: Patched.
        // Restore options
        this.updateOptions(oldOptions);
        return Promise.all(promises).then(() => {
            /* Do Nothing */
        });
    }
    //* TODO: Patched.
    updateOptions(boneOptions) {
        const backupOptions = {
            stiffness: this.stiffness,
            gravityPower: this.gravityPower,
            gravityDir: this.gravityDir.clone(),
            dragForce: this.dragForce,
            hitRadius: this.hitRadius,
        };
        this.stiffness = boneOptions?.stiffness || this.stiffness;
        this.gravityPower = boneOptions?.gravityPower || this.gravityPower;
        this.gravityDir = boneOptions?.gravityDir || this.gravityDir;
        this.dragForce = boneOptions?.dragForce || this.dragForce;
        this.hitRadius = boneOptions?.hitRadius || this.hitRadius;
        return backupOptions;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-extension.ts":
/*!**************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-extension.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMLoaderExtension": () => (/* binding */ VRMLoaderExtension)
/* harmony export */ });
/* harmony import */ var _vrm_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vrm-manager */ "./src/importer/babylon-vrm-loader/src/vrm-manager.ts");
/* harmony import */ var _vrm_material_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vrm-material-generator */ "./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts");


/**
 * `extensions` に入る拡張キー
 */
//* TODO: Patched.
// const NAME = 'VRM';
/**
 * VRM 拡張を処理する
 * [Specification](https://github.com/vrm-c/vrm-specification/tree/master/specification/0.0)
 */
class VRMLoaderExtension {
    /**
     * @inheritdoc
     */
    //* TODO: Patched.
    constructor(loader, v3DCore) {
        this.loader = loader;
        this.v3DCore = v3DCore;
        /**
         * @inheritdoc
         */
        this.name = VRMLoaderExtension.NAME;
        /**
         * @inheritdoc
         */
        this.enabled = true;
        /**
         * この Mesh index 以降が読み込み対象
         */
        this.meshesFrom = 0;
        /**
         * この TransformNode index 以降が読み込み対象
         */
        this.transformNodesFrom = 0;
        /**
         * この Material index 以降が読み込み対象
         */
        this.materialsFrom = 0;
        //* TODO: Patched.
        /**
         * Loader observers
         */
        this.loaderObservers = [];
        // GLTFLoader has already added rootMesh as __root__ before load extension
        // @see glTFLoader._loadData
        this.meshesFrom = this.loader.babylonScene.meshes.length - 1;
        this.transformNodesFrom = this.loader.babylonScene.transformNodes.length;
        this.materialsFrom = this.loader.babylonScene.materials.length;
        //* TODO: Patched.
        this.addLoaderObserver(this.v3DCore);
        this.onLoadedCallBack = () => {
            v3DCore.addVRMManager(this.manager);
        };
        v3DCore.addOnLoadCompleteCallbacks(this.onLoadedCallBack);
    }
    /**
     * @inheritdoc
     */
    dispose() {
        this.loader = null;
        //* TODO: Patched.
        this.loaderObservers = [];
        this.v3DCore.removeOnLoadCompleteCallback(this.onLoadedCallBack);
    }
    /**
     * @inheritdoc
     */
    onReady() {
        if (!this.loader.gltf.extensions || !this.loader.gltf.extensions[VRMLoaderExtension.NAME]) {
            return;
        }
        //* TODO: Patched.
        // const scene = this.loader.babylonScene;
        // const manager = new VRMManager(this.loader.gltf.extensions[VRMLoaderExtension.NAME], this.loader.babylonScene, this.meshesFrom, this.transformNodesFrom, this.materialsFrom);
        const uri = this.loader.parent.uri;
        this.manager = new _vrm_manager__WEBPACK_IMPORTED_MODULE_0__.VRMManager(this.loader.gltf.extensions[VRMLoaderExtension.NAME], this.loader.babylonScene, this.meshesFrom, this.transformNodesFrom, this.materialsFrom, uri);
        //* TODO: Patched.
        // scene.metadata = scene.metadata || {};
        // scene.metadata.vrmManagers = scene.metadata.vrmManagers || [];
        // scene.metadata.vrmManagers.push(manager);
        this.loader.babylonScene.onDisposeObservable.add(() => {
            // Scene dispose 時に Manager も破棄する
            //* TODO: Patched.
            // manager.dispose();
            this.manager.dispose();
            // this.loader.babylonScene.metadata.vrmManagers = [];
        });
        //* TODO: Patched.
        // Inform observers
        for (const observer of this.loaderObservers) {
            observer.onLoadReady();
        }
    }
    /**
     * @inheritdoc
     */
    //* TODO: Patched.
    // public _loadVertexDataAsync(context: string, primitive: IMeshPrimitive, babylonMesh: Mesh) {
    _loadVertexDataAsync(context, primitive, babylonMesh) {
        if (!primitive.extras || !primitive.extras.targetNames) {
            return null;
        }
        // まだ MorphTarget が生成されていないので、メタ情報にモーフターゲット情報を入れておく
        babylonMesh.metadata = babylonMesh.metadata || {};
        babylonMesh.metadata.vrmTargetNames = primitive.extras.targetNames;
        return null;
    }
    /**
     * @inheritdoc
     */
    _loadMaterialAsync(context, material, mesh, babylonDrawMode, assign) {
        // ジェネレータでマテリアルを生成する
        return new _vrm_material_generator__WEBPACK_IMPORTED_MODULE_1__.VRMMaterialGenerator(this.loader).generate(context, material, mesh, babylonDrawMode, assign);
    }
    //* TODO: Patched.
    /**
     * Add observer
     */
    addLoaderObserver(observer) {
        this.loaderObservers.push(observer);
    }
}
//* TODO: Patched.
VRMLoaderExtension.NAME = 'VRM';
//* TODO: Patched.
// ローダーに登録する
// GLTFLoader.RegisterExtension(NAME, (loader) => new VRM(loader));


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts":
/*!****************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMFileLoader": () => (/* binding */ VRMFileLoader)
/* harmony export */ });
/* harmony import */ var _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/loaders/glTF/glTFFileLoader */ "./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js");

/**
 * VRM/VCI ファイルを読み込めるようにする
 * 拡張子を変更しただけ
 */
class VRMFileLoader extends _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_0__.GLTFFileLoader {
    constructor() {
        super(...arguments);
        this.name = 'vrm';
        this.extensions = {
            '.vrm': { isBinary: true },
            '.vci': { isBinary: true },
        };
        this.vrmManager = null;
    }
    createPlugin() {
        return new VRMFileLoader();
    }
    //* TODO: Patched.
    loadAsync(scene, data, rootUrl, onProgress, fileName) {
        this.uri = rootUrl;
        if (fileName)
            this.uri += fileName;
        return super.loadAsync(scene, data, rootUrl, onProgress, fileName);
    }
}
//* TODO: Patched.
// if (SceneLoader) {
//     SceneLoader.RegisterPlugin(new VRMFileLoader());
// }


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts":
/*!***************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IVRMMaterialPropertyShader": () => (/* binding */ IVRMMaterialPropertyShader)
/* harmony export */ });
var IVRMMaterialPropertyShader;
(function (IVRMMaterialPropertyShader) {
    IVRMMaterialPropertyShader["VRM_USE_GLTFSHADER"] = "VRM_USE_GLTFSHADER";
    IVRMMaterialPropertyShader["VRMMToon"] = "VRM/MToon";
    IVRMMaterialPropertyShader["VRMUnlitTransparentZWrite"] = "VRM/UnlitTransparentZWrite";
})(IVRMMaterialPropertyShader || (IVRMMaterialPropertyShader = {}));


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-manager.ts":
/*!************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-manager.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "morphingTargetProperty": () => (/* binding */ morphingTargetProperty),
/* harmony export */   "VRMManager": () => (/* binding */ VRMManager)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _secondary_animation_spring_bone_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./secondary-animation/spring-bone-controller */ "./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts");
/* harmony import */ var _humanoid_bone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./humanoid-bone */ "./src/importer/babylon-vrm-loader/src/humanoid-bone.ts");
/* harmony import */ var _material_value_binding_merger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./material-value-binding-merger */ "./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts");




//* TODO: Patched.
class morphingTargetProperty {
    constructor(label, value, manager) {
        this.label = label;
        this.manager = manager;
        this._value = value;
    }
    get value() {
        return this._value;
    }
    set value(value) {
        this._value = Math.max(0, Math.min(1, value));
        this.manager.morphing(this.label, value);
    }
}
/**
 * VRM キャラクターを動作させるためのマネージャ
 */
class VRMManager {
    /**
     *
     * @param ext glTF.extensions.VRM の中身 json
     * @param scene
     * @param meshesFrom この番号以降のメッシュがこの VRM に該当する
     * @param transformNodesFrom この番号以降の TransformNode がこの VRM に該当する
     * @param materialsNodesFrom この番号以降の Material がこの VRM に該当する
     //* TODO: Patched.
     * @param uri URI this manager belongs to
     */
    constructor(ext, scene, meshesFrom, transformNodesFrom, materialsNodesFrom, 
    //* TODO: Patched.
    uri) {
        this.ext = ext;
        this.scene = scene;
        this.meshesFrom = meshesFrom;
        this.transformNodesFrom = transformNodesFrom;
        this.materialsNodesFrom = materialsNodesFrom;
        this.uri = uri;
        this.isBinaryMorphMap = {};
        this.morphTargetMap = {};
        this.materialValueBindingMergerMap = {};
        this.presetMorphTargetMap = {};
        this.transformNodeMap = {};
        this.transformNodeCache = {};
        this.meshCache = {};
        this._cameras = [];
        this.meshCache = this.constructMeshCache();
        this.transformNodeCache = this.constructTransformNodeCache();
        this.springBoneController = new _secondary_animation_spring_bone_controller__WEBPACK_IMPORTED_MODULE_1__.SpringBoneController(this.ext.secondaryAnimation, this.findTransformNode.bind(this));
        if (this.ext.blendShapeMaster && this.ext.blendShapeMaster.blendShapeGroups) {
            this.constructIsBinaryMap();
            this.constructMorphTargetMap();
            this.constructMaterialValueBindingMergerMap();
        }
        this.constructTransformNodeMap();
        this._humanoidBone = new _humanoid_bone__WEBPACK_IMPORTED_MODULE_2__.HumanoidBone(this.transformNodeMap);
        //* TODO: Patched.
        this.removeDuplicateSkeletons();
        this._rootSkeleton = this.getRootSkeletonNode();
        // Rename __root__ node
        this.rootMesh.name = VRMManager.ROOT_MESH_PREFIX + this.scene.getNodes().filter((e) => e.name.includes(VRMManager.ROOT_MESH_PREFIX)).length;
    }
    get cameras() {
        return this._cameras;
    }
    appendCamera(camera) {
        this._cameras.push(camera);
    }
    resetCameras() {
        this._cameras = [];
    }
    //* TODO: Patched.
    /**
     * Remove duplicate skeletons when importing VRM.
     * Only tested on VRoidStudio output files.
     * @private
     */
    removeDuplicateSkeletons() {
        let skeleton = null;
        for (const nodeIndex of Object.keys(this.meshCache).map(Number)) {
            const meshes = this.meshCache[nodeIndex];
            if (meshes.length && meshes[0].skeleton) {
                if (!skeleton) {
                    skeleton = meshes[0].skeleton;
                    if (this._rootMesh) {
                        const rootBone = skeleton.bones[0];
                        // Usually it is called "Root", but there are exceptions
                        if (rootBone.name !== 'Root')
                            console.warn('The first bone has a different name than "Root"');
                    }
                }
                else {
                    // weak sanity check
                    if (skeleton.bones.length != meshes[0].skeleton.bones.length)
                        console.warn('Skeletons have different numbers of bones!');
                    meshes[0].skeleton.dispose();
                    for (const mesh of meshes) {
                        mesh.skeleton = skeleton;
                    }
                }
            }
        }
    }
    //* TODO: Patched.
    /**
     * Find the root node of skeleton.
     * @private
     */
    getRootSkeletonNode() {
        const rootMeshChildren = this._rootMesh.getChildren((node) => {
            return node.name === 'Root' || node.name === 'Armature';
        });
        if (rootMeshChildren.length > 0)
            return rootMeshChildren[0];
        else {
            // Try to find in scene directly
            const rootMeshChild = this.scene.getNodeByName('Root') ? this.scene.getNodeByName('Root') : this.scene.getNodeByName('Armature');
            if (rootMeshChild && !rootMeshChild.parent)
                return rootMeshChild;
            else
                throw Error('Cannot find root skeleton node!');
        }
    }
    /**
     * Secondary Animation を更新する
     *
     * @param deltaTime 前フレームからの経過秒数(sec)
     */
    async update(deltaTime) {
        await this.springBoneController.update(deltaTime);
    }
    /**
     * 破棄処理
     */
    dispose() {
        this.springBoneController.dispose();
        this._humanoidBone.dispose();
        this.morphTargetMap = null;
        this.materialValueBindingMergerMap = null;
        this.presetMorphTargetMap = null;
        this.transformNodeMap = null;
        this.transformNodeCache = null;
        this.meshCache = null;
        this._rootMesh = null;
    }
    /**
     * モーフィングを行う
     * @param label モーフ名
     * @param value 値(0〜1)
     */
    morphing(label, value) {
        const v = this.calcMorphValue(label, value);
        if (this.morphTargetMap[label]) {
            this.morphTargetMap[label].forEach((setting) => {
                setting.target.influence = v * (setting.weight / 100);
            });
        }
        if (this.materialValueBindingMergerMap[label]) {
            this.materialValueBindingMergerMap[label].morphing(v);
        }
    }
    /**
     * プリセットモーフのモーフィングを行う
     * @param label モーフ名
     * @param value 値(0〜1)
     */
    morphingPreset(label, value) {
        if (!this.presetMorphTargetMap[label]) {
            return;
        }
        const v = this.calcMorphValue(label, value);
        this.presetMorphTargetMap[label].forEach((setting) => {
            setting.target.influence = v * (setting.weight / 100);
        });
    }
    /**
     * モーフィング用の値を計算する
     * @param label モーフ名
     * @param value 値
     */
    calcMorphValue(label, value) {
        const v = Math.max(0.0, Math.min(1.0, value));
        if (this.isBinaryMorphMap[label]) {
            return v > 0.5 ? 1.0 : 0.0;
        }
        return v;
    }
    /**
     * list morphing name
     */
    getMorphingList() {
        return Object.keys(this.morphTargetMap);
    }
    /**
     * 一人称時のカメラ位置を絶対座標として取得する
     *
     * firstPersonBone が未設定の場合は null を返す
     *
     * @returns 一人称時のカメラの現在における絶対座標
     */
    getFirstPersonCameraPosition() {
        const firstPersonBone = this.getFirstPersonBone();
        if (!firstPersonBone) {
            return null;
        }
        const basePos = firstPersonBone.getAbsolutePosition();
        const offsetPos = this.ext.firstPerson.firstPersonBoneOffset;
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(basePos.x + offsetPos.x, basePos.y + offsetPos.y, basePos.z + offsetPos.z);
    }
    /**
     * 一人称時に頭とみなす TransformNode を取得する
     */
    getFirstPersonBone() {
        return this.findTransformNode(this.ext.firstPerson.firstPersonBone);
    }
    /**
     * ボーン名からそのボーンに該当する TransformNode を取得する
     *
     * @param name HumanBoneName
     * @deprecated Use humanoidBone getter instead. This method will delete at v2.
     */
    getBone(name) {
        return this.transformNodeMap[name] || null;
    }
    /**
     * Get HumanoidBone Methods
     */
    get humanoidBone() {
        return this._humanoidBone;
    }
    /**
     * VRM Root mesh
     *
     * Useful for Model Transformation
     */
    get rootMesh() {
        return this._rootMesh;
    }
    /**
     * node 番号から該当する TransformNode を探す
     * 数が多くなるのでキャッシュに参照を持つ構造にする
     * gltf の node 番号は `metadata.gltf.pointers` に記録されている
     * @param nodeIndex
     */
    findTransformNode(nodeIndex) {
        return this.transformNodeCache[nodeIndex] || null;
    }
    /**
     * mesh 番号からメッシュを探す
     * gltf の mesh 番号は `metadata.gltf.pointers` に記録されている
     * @deprecated Use findMeshes instead. This method has broken.
     */
    findMesh(meshIndex) {
        return (this.meshCache[meshIndex] && this.meshCache[meshIndex][0]) || null;
    }
    /**
     * mesh 番号からメッシュを探す
     * gltf の mesh 番号は `metadata.gltf.pointers` に記録されている
     */
    findMeshes(meshIndex) {
        return this.meshCache[meshIndex] || null;
    }
    /**
     * 事前に MorphTarget と isBinary を紐付ける
     */
    constructIsBinaryMap() {
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            this.isBinaryMorphMap[g.name] = g.isBinary;
        });
    }
    /**
     * 事前に MorphTarget と BlendShape を紐付ける
     */
    constructMorphTargetMap() {
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            if (!g.binds) {
                return;
            }
            g.binds.forEach((b) => {
                const meshes = this.findMeshes(b.mesh);
                if (!meshes) {
                    console.log(`Undefined BlendShapeBind Mesh`, b);
                    return;
                }
                meshes.forEach((mesh) => {
                    const morphTargetManager = mesh.morphTargetManager;
                    if (!morphTargetManager) {
                        console.log(`Undefined morphTargetManager`, b);
                        return;
                    }
                    const target = morphTargetManager.getTarget(b.index);
                    this.morphTargetMap[g.name] = this.morphTargetMap[g.name] || [];
                    this.morphTargetMap[g.name].push({
                        target,
                        weight: b.weight,
                    });
                    if (g.presetName) {
                        this.presetMorphTargetMap[g.presetName] = this.presetMorphTargetMap[g.presetName] || [];
                        this.presetMorphTargetMap[g.presetName].push({
                            target,
                            weight: b.weight,
                        });
                    }
                });
            });
        });
    }
    /**
     * 事前に MaterialValueBindingMerger とモーフ名を紐付ける
     */
    constructMaterialValueBindingMergerMap() {
        const materials = this.scene.materials.slice(this.materialsNodesFrom);
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            if (!g.materialValues) {
                return;
            }
            this.materialValueBindingMergerMap[g.name] = new _material_value_binding_merger__WEBPACK_IMPORTED_MODULE_3__.MaterialValueBindingMerger(materials, g.materialValues);
        });
    }
    /**
     * 事前に TransformNode と bone 名を紐づける
     */
    constructTransformNodeMap() {
        this.ext.humanoid.humanBones.forEach((b) => {
            const node = this.findTransformNode(b.node);
            if (!node) {
                return;
            }
            this.transformNodeMap[b.bone] = node;
        });
    }
    /**
     * node 番号と TransformNode を紐づける
     */
    constructTransformNodeCache() {
        const cache = {};
        for (let index = this.transformNodesFrom; index < this.scene.transformNodes.length; index++) {
            const node = this.scene.transformNodes[index];
            // ポインタが登録されていないものは省略
            if (!node || !node.metadata || !node.metadata.gltf || !node.metadata.gltf.pointers || node.metadata.gltf.pointers.length === 0) {
                continue;
            }
            for (const pointer of node.metadata.gltf.pointers) {
                if (pointer.startsWith('/nodes/')) {
                    const nodeIndex = parseInt(pointer.substr(7), 10);
                    cache[nodeIndex] = node;
                    break;
                }
            }
        }
        return cache;
    }
    /**
     * mesh 番号と Mesh を紐づける
     */
    constructMeshCache() {
        const cache = {};
        for (let index = this.meshesFrom; index < this.scene.meshes.length; index++) {
            const mesh = this.scene.meshes[index];
            if (mesh.id === '__root__') {
                this._rootMesh = mesh;
                continue;
            }
            // ポインタが登録されていないものは省略
            if (!mesh || !mesh.metadata || !mesh.metadata.gltf || !mesh.metadata.gltf.pointers || mesh.metadata.gltf.pointers.length === 0) {
                continue;
            }
            for (const pointer of mesh.metadata.gltf.pointers) {
                const match = pointer.match(/^\/meshes\/(\d+).+$/);
                if (match) {
                    const nodeIndex = parseInt(match[1], 10);
                    cache[nodeIndex] = cache[nodeIndex] || [];
                    cache[nodeIndex].push(mesh);
                    break;
                }
            }
        }
        return cache;
    }
}
//* TODO: Patched.
VRMManager.ROOT_MESH_PREFIX = 'vrm_root_';


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts":
/*!***********************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMMaterialGenerator": () => (/* binding */ VRMMaterialGenerator)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! babylon-mtoon-material */ "./node_modules/babylon-mtoon-material/dist/index.module.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vrm-interfaces */ "./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts");
/* harmony import */ var _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Engines/engine */ "./node_modules/@babylonjs/core/Engines/engine.js");




/**
 * VRM で指定される Material を生成する
 * [VRM が提供するシェーダ](https://vrm.dev/en/univrm/shaders/index.html) を特定し読み込む
 * - UnlitTexture: 不透明, VRM ファイル側で [KHR_materials_unlit](https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_unlit) が定義されているため、何もしない
 * - UnlitCutout: 透明度が閾値以下の部分を透明とする, 同上
 * - UnlitTransparent: アルファブレンド。ZWriteしない, 同上
 * - UnlitTransparentZWrite: アルファブレンド。ZWriteする, 同上に加え、プロパティで ZWrite を強制しています
 * - MToon: MToonMaterial を差し替えています。
 */
class VRMMaterialGenerator {
    /**
     * @inheritdoc
     */
    constructor(loader) {
        this.loader = loader;
    }
    /**
     * マテリアルを生成する Promise を返す
     * VRM 対象外の場合は null
     */
    generate(context, material, mesh, babylonDrawMode, assign) {
        const materialProp = this.findMaterialPropertyByName(material.name, this.getMaterialProperties());
        if (!materialProp) {
            return null;
        }
        mesh.alphaIndex = materialProp.renderQueue;
        const newMaterial = this.createMaterialByShader(context, material, babylonDrawMode, materialProp);
        if (!newMaterial) {
            return null;
        }
        assign(newMaterial);
        if (newMaterial instanceof babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__.MToonMaterial) {
            return this.loadMToonTexturesAsync(context, newMaterial, materialProp);
        }
        return Promise.resolve(newMaterial);
    }
    /**
     * VRM または VCI からマテリアルプロパティの配列を探す
     */
    getMaterialProperties() {
        if (!this.loader.gltf.extensions) {
            return [];
        }
        if (this.loader.gltf.extensions.VRM && this.loader.gltf.extensions.VRM.materialProperties) {
            return this.loader.gltf.extensions.VRM.materialProperties;
        }
        if (this.loader.gltf.extensions.VCAST_vci_material_unity && this.loader.gltf.extensions.VCAST_vci_material_unity.materials) {
            return this.loader.gltf.extensions.VCAST_vci_material_unity.materials;
        }
        return [];
    }
    /**
     * マテリアル名から MaterialProperty を探す
     * @param materialName マテリアル名
     * @param extension 拡張データ
     */
    findMaterialPropertyByName(materialName, materials) {
        if (!materialName || !materials) {
            return null;
        }
        const mats = materials.filter((v) => v.name === materialName);
        if (mats.length === 0) {
            return null;
        }
        else if (mats.length >= 2) {
            this.loader.log(`Duplicated vrm material name found: ${materialName}`);
        }
        return mats[mats.length - 1];
    }
    /**
     * テクスチャを読み込む
     * @param context 現在のコンテキスト
     * @param material 生成した MToonMaterial
     * @param prop 生成した MToonMaterial のマテリアルプロパティ
     */
    loadMToonTexturesAsync(context, material, prop) {
        const promises = [];
        // 全てのテクスチャの UV Offset & Scale はメインテクスチャのものを流用する
        const uvOffsetScale = prop.vectorProperties._MainTex;
        if (!uvOffsetScale) {
            return Promise.resolve(material);
        }
        const applyTexture = (index, callback) => {
            applyPropertyWhenDefined(index, (value) => {
                promises.push(this.loader.loadTextureInfoAsync(`${context}/textures/${index}`, { index: value }, (babylonTexture) => {
                    // 実際は Texture インスタンスが来るのでキャスト
                    const t = babylonTexture;
                    t.uOffset = uvOffsetScale[0];
                    t.vOffset = uvOffsetScale[1];
                    t.uScale = uvOffsetScale[2];
                    t.vScale = uvOffsetScale[3];
                    callback(babylonTexture);
                }));
            });
        };
        applyTexture(prop.textureProperties._MainTex, (texture) => {
            if (material.alphaBlend || material.alphaTest) {
                texture.hasAlpha = true;
            }
            material.diffuseTexture = texture;
        });
        applyTexture(prop.textureProperties._ShadeTexture, (texture) => (material.shadeTexture = texture));
        applyTexture(prop.textureProperties._BumpMap, (texture) => (material.bumpTexture = texture));
        applyTexture(prop.textureProperties._ReceiveShadowTexture, (texture) => (material.receiveShadowTexture = texture));
        applyTexture(prop.textureProperties._ShadingGradeTexture, (texture) => (material.shadingGradeTexture = texture));
        applyTexture(prop.textureProperties._RimTexture, (texture) => (material.rimTexture = texture));
        applyTexture(prop.textureProperties._SphereAdd, (texture) => (material.matCapTexture = texture));
        applyTexture(prop.textureProperties._EmissionMap, (texture) => (material.emissiveTexture = texture));
        applyTexture(prop.textureProperties._OutlineWidthTexture, (texture) => (material.outlineWidthTexture = texture));
        applyTexture(prop.textureProperties._UvAnimMaskTexture, (texture) => (material.uvAnimationMaskTexture = texture));
        return Promise.all(promises).then(() => material);
    }
    /**
     * シェーダ名からマテリアルを推測して生成する
     * @param context 現在のコンテキスト
     * @param material glTF マテリアル
     * @param babylonDrawMode 描画種類
     * @param prop 生成するマテリアルプロパティ
     */
    createMaterialByShader(context, material, babylonDrawMode, prop) {
        if (prop.shader === _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__.IVRMMaterialPropertyShader.VRMMToon) {
            const mtoonMaterial = new babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__.MToonMaterial(material.name || `MToonMaterial${material.index}`, this.loader.babylonScene);
            this.setMToonMaterialProperties(mtoonMaterial, prop);
            return mtoonMaterial;
        }
        if (prop.shader === _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__.IVRMMaterialPropertyShader.VRMUnlitTransparentZWrite) {
            const mat = this.loader.createMaterial(context, material, babylonDrawMode);
            // 通常マテリアルに Depth Write を強制
            mat.disableDepthWrite = false;
            mat.forceDepthWrite = true;
            return mat;
        }
        return null;
    }
    /**
     * マテリアルに VRM プロパティを設定
     * VRM プロパティとマテリアルプロパティのマッピングを行っている
     * 初期値はマテリアル実装側に持っているため、値がある場合のみ上書きする
     */
    setMToonMaterialProperties(material, prop) {
        applyPropertyWhenDefined(prop.floatProperties._Cutoff, (value) => (material.alphaCutOff = value));
        applyPropertyWhenDefined(prop.vectorProperties._Color, (value) => {
            material.diffuseColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
            material.alpha = value[3];
        });
        applyPropertyWhenDefined(prop.vectorProperties._ShadeColor, (value) => {
            material.shadeColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._BumpScale, (value) => (material.bumpScale = value));
        applyPropertyWhenDefined(prop.floatProperties._ReceiveShadowRate, (value) => (material.receiveShadowRate = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadingGradeRate, (value) => (material.shadingGradeRate = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadeShift, (value) => (material.shadeShift = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadeToony, (value) => (material.shadeToony = value));
        applyPropertyWhenDefined(prop.floatProperties._LightColorAttenuation, (value) => (material.lightColorAttenuation = value));
        applyPropertyWhenDefined(prop.floatProperties._IndirectLightIntensity, (value) => (material.indirectLightIntensity = value));
        applyPropertyWhenDefined(prop.vectorProperties._RimColor, (value) => {
            material.rimColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._RimLightingMix, (value) => (material.rimLightingMix = value));
        applyPropertyWhenDefined(prop.floatProperties._RimFresnelPower, (value) => (material.rimFresnelPower = value));
        applyPropertyWhenDefined(prop.floatProperties._RimLift, (value) => (material.rimLift = value));
        applyPropertyWhenDefined(prop.vectorProperties._EmissionColor, (value) => {
            material.emissiveColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineWidth, (value) => (material.outlineWidth = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineScaledMaxDistance, (value) => (material.outlineScaledMaxDistance = value));
        applyPropertyWhenDefined(prop.vectorProperties._OutlineColor, (value) => {
            material.outlineColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineLightingMix, (value) => (material.outlineLightingMix = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimScrollX, (value) => (material.uvAnimationScrollX = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimScrollY, (value) => (material.uvAnimationScrollY = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimRotation, (value) => (material.uvAnimationRotation = value));
        applyPropertyWhenDefined(prop.floatProperties._DebugMode, (value) => (material.debugMode = value));
        applyPropertyWhenDefined(prop.floatProperties._BlendMode, (value) => {
            switch (value) {
                case 0: // Opaque
                    material.alphaBlend = false;
                    material.alphaTest = false;
                    break;
                case 1: // TransparentCutout
                    material.alphaBlend = false;
                    material.alphaTest = true;
                    material.alphaMode = _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__.Engine.ALPHA_COMBINE;
                    break;
                case 2: // Transparent
                    material.alphaBlend = true;
                    material.alphaTest = false;
                    material.alphaMode = _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__.Engine.ALPHA_COMBINE;
                    break;
            }
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineWidthMode, (value) => (material.outlineWidthMode = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineColorMode, (value) => (material.outlineColorMode = value));
        applyPropertyWhenDefined(prop.floatProperties._CullMode, (value) => (material.cullMode = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineCullMode, (value) => (material.outlineCullMode = value));
        applyPropertyWhenDefined(prop.keywordMap._ALPHABLEND_ON, (value) => (material.alphaBlend = value));
        applyPropertyWhenDefined(prop.keywordMap._ALPHATEST_ON, (value) => (material.alphaTest = value));
        applyPropertyWhenDefined(prop.floatProperties._ZWrite, (value) => {
            material.forceDepthWrite = Math.round(value) === 1;
            if (material.forceDepthWrite) {
                material.disableDepthWrite = false;
            }
        });
    }
}
/**
 * プロパティが設定されていればコールバックを実行する
 */
function applyPropertyWhenDefined(prop, callback) {
    if (typeof prop === 'undefined') {
        return;
    }
    callback(prop);
}


/***/ }),

/***/ "./src/index-test.ts":
/*!***************************!*\
  !*** ./src/index-test.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babylonjs_core_Loading_loadingScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Loading/loadingScreen */ "./node_modules/@babylonjs/core/Loading/loadingScreen.js");
/* harmony import */ var _babylonjs_core_Loading_Plugins_babylonFileLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Loading/Plugins/babylonFileLoader */ "./node_modules/@babylonjs/core/Loading/Plugins/babylonFileLoader.js");
/* harmony import */ var _babylonjs_core_Materials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Materials */ "./node_modules/@babylonjs/core/Materials/index.js");
/* harmony import */ var _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/loaders/glTF/glTFFileLoader */ "./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js");
/* harmony import */ var _babylonjs_core_Debug__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Debug */ "./node_modules/@babylonjs/core/Debug/index.js");
/* harmony import */ var _babylonjs_gui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/gui */ "./node_modules/@babylonjs/gui/index.js");
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/inspector */ "./node_modules/@babylonjs/inspector/dist/babylon.inspector.bundle.max.js");
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js");
/* harmony import */ var _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/Engines/engine */ "./node_modules/@babylonjs/core/Engines/engine.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./index */ "./src/index.ts");

// Register plugins (side effect)



// Debug



const debug = false;
const shadow_debug = false;
const spheres = false;




// Init BabylonJS Engine
const canvas = document.getElementById('renderCanvas');
let engine;
if (_babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__.Engine.isSupported()) {
    engine = new _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__.Engine(canvas, true);
}
const fileInput = document.getElementById('select-file');
window.onload = async (e) => {
    console.log("Onload");
    const vrmFile = 'testfiles/7822444336497004526.vrm';
    // Create v3d core
    const v3DCore = new _index__WEBPACK_IMPORTED_MODULE_10__.V3DCore(engine, new _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_7__.Scene(engine));
    v3DCore.transparentBackground();
    await v3DCore.AppendAsync('', vrmFile);
    // Get managers
    const vrmManager = v3DCore.getVRMManagerByURI(vrmFile);
    console.log("Printing loaded VRM file metadata: ", vrmManager.ext.meta);
    // Camera
    v3DCore.attachCameraTo(vrmManager);
    // Lights
    v3DCore.addAmbientLight(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Color3(1, 1, 1));
    // Lock camera target
    v3DCore.scene.onBeforeRenderObservable.add(() => {
        vrmManager.cameras[0].setTarget(vrmManager.rootMesh.getAbsolutePosition());
    });
    // Render loop
    engine.runRenderLoop(() => {
        v3DCore.scene.render();
    });
    // Model Transformation
    vrmManager.rootMesh.translate(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(1, 0, 0), 1);
    vrmManager.rootMesh.rotation = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0, 135, 0);
    // Work with HumanoidBone
    vrmManager.humanoidBone.leftUpperArm.addRotation(0, -0.5, 0);
    vrmManager.humanoidBone.head.addRotation(0.1, 0, 0);
    // Work with BlendShape(MorphTarget)
    vrmManager.morphing('Joy', 1.0);
};


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DCore": () => (/* reexport safe */ _v3d_core__WEBPACK_IMPORTED_MODULE_0__.V3DCore),
/* harmony export */   "V3DHelper": () => (/* reexport safe */ _helper__WEBPACK_IMPORTED_MODULE_1__.V3DHelper)
/* harmony export */ });
/* harmony import */ var _v3d_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v3d-core */ "./src/v3d-core.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/helper.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */




/***/ }),

/***/ "./src/scene/optimizer.ts":
/*!********************************!*\
  !*** ./src/scene/optimizer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DSceneOptimizer": () => (/* binding */ V3DSceneOptimizer)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ "./src/index.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


class V3DSceneOptimizer {
    constructor(scene, options) {
        this.scene = scene;
        this._options = options || V3DSceneOptimizer.CustomOptimizerOptions();
        this._optimizer = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SceneOptimizer(scene, this._options);
        this._optimizer.targetFrameRate = _index__WEBPACK_IMPORTED_MODULE_1__.V3DCore.FRAMERATE;
        this._optimizer.trackerDuration = 2000;
        this._optimizer.start();
        this.setupFocusEvents(this._optimizer);
    }
    get options() {
        return this._options;
    }
    set options(value) {
        this._options = value;
    }
    get optimizer() {
        return this._optimizer;
    }
    static CustomOptimizerOptions() {
        const options = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SceneOptimizerOptions();
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.LensFlaresOptimization(0));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.ParticlesOptimization(1));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.TextureOptimization(1, 512));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.RenderTargetsOptimization(2));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.PostProcessesOptimization(3));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.HardwareScalingOptimization(4, 2));
        return options;
    }
    setupFocusEvents(optimizer) {
        if (window) {
            console.log("setupFocusEvents");
            window.addEventListener('focusin', function (e) {
                console.log("Optimizer start");
                optimizer.start();
            }, true);
            window.addEventListener('focusout', function (e) {
                console.log("Optimizer stop");
                optimizer.stop();
                optimizer.reset();
            }, true);
        }
    }
}


/***/ }),

/***/ "./src/scene/skybox.ts":
/*!*****************************!*\
  !*** ./src/scene/skybox.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "v3DSkyBox": () => (/* binding */ v3DSkyBox)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _babylonjs_materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/materials */ "./node_modules/@babylonjs/materials/index.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


class v3DSkyBox {
    constructor(scene, textureName, boxSize, envTexture) {
        this.scene = scene;
        this.textureName = textureName;
        this.boxSize = boxSize;
        this.envTexture = envTexture;
        this._skybox = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.CreateBox("Skybox", boxSize, this.scene, undefined, _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.BACKSIDE);
        this._skyboxBase = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.CreateBox("SkyboxBase", boxSize + 1, this.scene, undefined, _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.BACKSIDE);
        this.createMaterial(textureName);
        this._skybox.material = this.skyboxMaterial;
        this._skyboxBase.material = this.skyboxBaseMaterial;
        this._skybox.renderingGroupId = 0;
        this._skyboxBase.renderingGroupId = 0;
        this._skybox.material.transparencyMode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Material.MATERIAL_ALPHATESTANDBLEND;
        this._skybox.material.alpha = 0.5;
        this.setupImageProcessing();
    }
    get skybox() {
        return this._skybox;
    }
    /**
     * Setup the skybox material and the skybox reflection texture
     * @param textureName name (URI) to the texture files
     * @private
     */
    createMaterial(textureName) {
        this.skyboxBaseMaterial = new _babylonjs_materials__WEBPACK_IMPORTED_MODULE_1__.SkyMaterial("SkyboxBaseMaterial", this.scene);
        this.skyboxMaterial = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.BackgroundMaterial("SkyboxMaterial", this.scene);
        this.skyboxMaterial.backFaceCulling = false;
        this.skyboxMaterial.useRGBColor = false;
        this.skyboxMaterial.primaryColor = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Color3(1, 1, 1);
        this.skyboxMaterial.enableNoise = true;
        this.skyboxReflectionTexture = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.CubeTexture(textureName, this.scene);
        this.skyboxReflectionTexture.coordinatesMode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Texture.SKYBOX_MODE;
        this.skyboxReflectionTexture.gammaSpace = false;
        this.skyboxMaterial.reflectionTexture = this.skyboxReflectionTexture;
    }
    /**
     * Setup the image processing according to the specified options.
     */
    setupImageProcessing() {
        this.scene.imageProcessingConfiguration.contrast = 1.2;
        this.scene.imageProcessingConfiguration.exposure = 0.8;
        this.scene.imageProcessingConfiguration.toneMappingEnabled = true;
        this.scene.environmentTexture = this.envTexture ? this.envTexture
            : _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.CubeTexture.CreateFromPrefilteredData(v3DSkyBox._environmentTextureCDNUrl, this.scene);
    }
}
v3DSkyBox._environmentTextureCDNUrl = "https://assets.babylonjs.com/environments/environmentSpecular.env";


/***/ }),

/***/ "./src/utilities/types.ts":
/*!********************************!*\
  !*** ./src/utilities/types.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isIShadowLight": () => (/* binding */ isIShadowLight),
/* harmony export */   "getAnimationDataType": () => (/* binding */ getAnimationDataType)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


function isIShadowLight(light) {
    return light.setShadowProjectionMatrix !== undefined;
}
function getAnimationDataType(value) {
    let dataType = undefined;
    if (!isNaN(parseFloat(value)) && isFinite(value)) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Quaternion) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_QUATERNION;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR3;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector2) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR2;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color4) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR4;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Size) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_SIZE;
    }
    if (dataType == undefined) {
        return null;
    }
    else {
        return dataType;
    }
}


/***/ }),

/***/ "./src/v3d-core.ts":
/*!*************************!*\
  !*** ./src/v3d-core.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DCore": () => (/* binding */ V3DCore),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Cameras/arcRotateCamera */ "./node_modules/@babylonjs/core/Cameras/arcRotateCamera.js");
/* harmony import */ var _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js");
/* harmony import */ var _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Loading/sceneLoader */ "./node_modules/@babylonjs/core/Loading/sceneLoader.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./importer/babylon-vrm-loader/src */ "./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts");
/* harmony import */ var _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./importer/babylon-vrm-loader/src */ "./src/importer/babylon-vrm-loader/src/vrm-extension.ts");
/* harmony import */ var _babylonjs_loaders_glTF_2_0__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/loaders/glTF/2.0 */ "./node_modules/@babylonjs/loaders/glTF/2.0/index.js");
/* harmony import */ var _babylonjs_core_Lights_hemisphericLight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Lights/hemisphericLight */ "./node_modules/@babylonjs/core/Lights/hemisphericLight.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _utilities_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/types */ "./src/utilities/types.ts");
/* harmony import */ var _scene_optimizer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./scene/optimizer */ "./src/scene/optimizer.ts");
/* harmony import */ var _scene_skybox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./scene/skybox */ "./src/scene/skybox.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */











class V3DCore {
    constructor(engine, scene, camera) {
        this.engine = engine;
        this.scene = scene;
        /**
         * GLTFFileLoader plugin factory
         * @private
         */
        this._vrmFileLoader = new _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_10__.VRMFileLoader();
        // Whether starts spring bones animation automatically
        this._springBonesAutoUpdate = true;
        /**
         * Shadow generators
         */
        this._shadowGenerators = new Map();
        /**
         * Callbacks when loading is done
         */
        this._onLoadCompleteCallbacks = [];
        this._beforeRenderFunc = () => { };
        this._afterRenderFunc = () => {
            for (const manager of this.loadedVRMManagers) {
                if (this._springBonesAutoUpdate)
                    manager.update(this.engine.getDeltaTime());
            }
        };
        this._cameraOnBeforeRenderFunc = [];
        this.skyBox = null;
        /**
         * Loaded VRM Managers
         * @private
         */
        this.loadedVRMManagers = [];
        // Register
        this.registerVrmPlugin();
        this.registerVrmExtension();
        if (!this.scene)
            this.scene = new _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_1__.Scene(this.engine);
        else
            this.engine = this.scene.getEngine();
        this.setupObservable();
        this.enableResize();
        if (camera) {
            this._mainCamera = camera;
            this.scene.switchActiveCamera(camera);
        }
        else
            this.addCamera();
        this._renderingPipeline = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.DefaultRenderingPipeline("defaultPipeline", // The name of the pipeline
        true, // Do you want the pipeline to use HDR texture?
        this.scene, // The scene instance
        [this._mainCamera] // The list of cameras to be attached to
        );
        this.setupRenderingPipeline();
    }
    get springBonesAutoUpdate() {
        return this._springBonesAutoUpdate;
    }
    set springBonesAutoUpdate(value) {
        this._springBonesAutoUpdate = value;
    }
    get renderingPipeline() {
        return this._renderingPipeline;
    }
    addOnLoadCompleteCallbacks(callback) {
        this._onLoadCompleteCallbacks.push(callback);
    }
    removeOnLoadCompleteCallback(callback) {
        const idx = this._onLoadCompleteCallbacks.indexOf(callback);
        if (idx !== -1) {
            this._onLoadCompleteCallbacks.splice(idx, 1);
        }
    }
    resetOnLoadCompleteCallbacks() {
        this._onLoadCompleteCallbacks = [];
    }
    updateBeforeRenderFunction(func) {
        this._beforeRenderFunc = func;
    }
    updateAfterRenderFunction(func) {
        this._afterRenderFunc = func;
    }
    get mainCamera() {
        return this._mainCamera;
    }
    set mainCamera(value) {
        this._mainCamera = value;
    }
    addVRMManager(manager) {
        if (manager)
            this.loadedVRMManagers.push(manager);
    }
    /**
     * Get VRM Manager by index
     * @param idx
     */
    getVRMManagerByIndex(idx) {
        return (idx >= 0 && idx < this.loadedVRMManagers.length)
            ? this.loadedVRMManagers[idx]
            : null;
    }
    /**
     * Get VRM Manager by URI
     * VRM doesn't have any UID in metadata. Title can be unfilled too.
     * Filename is the only reasonable ID.
     * @param uri
     */
    // VRM doesn't have any UID in metadata. Title can be unfilled too.
    // Filename is the only reasonable ID.
    getVRMManagerByURI(uri) {
        for (const manager of this.loadedVRMManagers) {
            if (manager.uri === uri)
                return manager;
        }
        return null;
    }
    /**
     * Make background transparent.
     */
    transparentBackground() {
        this.scene.clearColor.a = 0;
    }
    /**
     * Make background solid.
     */
    solidBackground() {
        this.scene.clearColor.a = 1;
    }
    /**
     * Change background color.
     * @param color
     */
    setBackgroundColor(color) {
        this.scene.clearColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Color4.FromColor3(color, this.scene.clearColor.a).toLinearSpace();
    }
    /**
     * Set background color from hex string.
     * @param hex Hex color string
     */
    setBackgroundColorHex(hex) {
        this.setBackgroundColor(_babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Color3.FromHexString(hex));
    }
    /**
     * Add an ambient light.
     * @param color color of the light
     */
    addAmbientLight(color) {
        const light = new _babylonjs_core_Lights_hemisphericLight__WEBPACK_IMPORTED_MODULE_5__.HemisphericLight("V3DHemiLight", new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1, 1), this.scene);
        if (color)
            light.diffuse = color;
        light.setEnabled(true);
    }
    /**
     * Add a basic arc rotate camera to scene.
     * TODO: there seems to be a bug when meshes are near the edge of camera cone
     * Probably has something to do with culling
     * @param radius rotation radius
     */
    addCamera(radius = 3) {
        const camera = new _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__.ArcRotateCamera('V3DMainCamera', 0, 0, radius, new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 0, 0), this.scene, true);
        camera.lowerRadiusLimit = 0.1;
        camera.upperRadiusLimit = 20;
        camera.wheelDeltaPercentage = 0.05;
        camera.minZ = 0;
        camera.setPosition(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1.5, -5));
        camera.attachControl(this.engine.getRenderingCanvas());
        this._mainCamera = camera;
        this.scene.switchActiveCamera(this._mainCamera, true);
    }
    /**
     * Attach a arc rotate following camera to VRM model.
     * Probably has something to do with culling
     * @param manager VRM Manager to attach the camera to
     * @param radius rotation radius
     */
    attachCameraTo(manager, radius = 3) {
        const camera = new _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__.ArcRotateCamera('V3DArcCamera' + manager.cameras.length, 0, 0, radius, manager.rootMesh.position, this.scene, true);
        camera.lowerRadiusLimit = 0.1;
        camera.upperRadiusLimit = 20;
        camera.wheelDeltaPercentage = 0.05;
        camera.minZ = 0;
        camera.setPosition(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1.5, -5));
        camera.setTarget(manager.rootMesh.getAbsolutePosition());
        camera.attachControl(this.engine.getRenderingCanvas());
        manager.appendCamera(camera);
        this._cameraOnBeforeRenderFunc.push(() => {
            camera.setTarget(manager.rootMesh.getAbsolutePosition());
        });
    }
    /**
     *
     * Create a skybox for the scene.
     * @param size size of the skybox
     * @param textureName path to skybox texture
     */
    createSkyBox(size, textureName) {
        if (!this.skyBox) {
            this.skyBox = new _scene_skybox__WEBPACK_IMPORTED_MODULE_9__.v3DSkyBox(this.scene, textureName ? textureName : "texture/skybox", size);
        }
    }
    /**
     * Enable shadow caster for light.
     * @param light Light to enable shadows.
     */
    enableShabows(light) {
        if (light) {
            if (!this._shadowGenerators.has(light)) {
                const shadowGenerator = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator(1024, light);
                this.setupShadowGenerator(shadowGenerator);
                this._shadowGenerators.set(light, shadowGenerator);
            }
            else {
                console.warn("Light " + light.name + " already has a shadow generator!");
            }
        }
        else {
            for (const l of this.scene.lights) {
                if ((0,_utilities_types__WEBPACK_IMPORTED_MODULE_7__.isIShadowLight)(l)) {
                    const shadowGenerator = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator(1024, l);
                    this.setupShadowGenerator(shadowGenerator);
                    this._shadowGenerators.set(l, shadowGenerator);
                }
            }
        }
    }
    /**
     * Get corresponding shadow generator for light.
     * @param light Light to get shadow generator
     */
    getShadownGenerator(light) {
        return this._shadowGenerators.get(light);
    }
    /**
     * Convenience function for starting animation
     * @param target
     * @param name
     * @param property
     * @param duration
     * @param from
     * @param to
     * @param loopMode
     * @param easingFunction
     * @param easingMode
     */
    startQuickAnimation(target, name, property, duration, from, to, loopMode, easingFunction, easingMode) {
        const anim = this.createAnimation(target, name, property, [{ frame: 0, value: from }, { frame: duration, value: to }], loopMode, easingFunction, easingMode);
        return this.scene.beginDirectAnimation(anim[0], [anim[1]], 0, duration, false);
    }
    /**
     * Convenience function for creating animation
     * @param target
     * @param name
     * @param property
     * @param keyFrames
     * @param loopMode
     * @param easingFunction
     * @param easingMode
     */
    createAnimation(target, name, property, keyFrames, loopMode, easingFunction, easingMode) {
        // Make sure keyFrames is not empty
        if (keyFrames.length < 1)
            throw Error("Key Frames empty");
        // Get data type
        const dataType = (0,_utilities_types__WEBPACK_IMPORTED_MODULE_7__.getAnimationDataType)(keyFrames[0].value);
        if (dataType === null)
            throw Error("Cannot determine data type from keyframes!");
        const animation = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.Animation(name, property, V3DCore.FRAMERATE, dataType, loopMode);
        animation.setKeys(keyFrames);
        if (easingFunction) {
            if (easingMode)
                easingFunction.setEasingMode(easingMode);
            animation.setEasingFunction(easingFunction);
        }
        return [target, animation];
    }
    enableOptimizer(options) {
        this._sceneOptimizer = new _scene_optimizer__WEBPACK_IMPORTED_MODULE_8__.V3DSceneOptimizer(this.scene, options);
    }
    // Don't make wrappers static, so plugins will always be registered
    /**
     * Wrapper for SceneLoader.AppendAsync.
     * @param rootUrl a string that defines the root url for the scene and resources or the concatenation of rootURL and filename
     * @param sceneFilename a string that defines the name of the scene file or starts with "data:" following by the stringified version of the scene or a File object (default: empty string)
     */
    AppendAsync(rootUrl, sceneFilename) {
        return _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.AppendAsync(rootUrl, sceneFilename, this.scene);
    }
    /**
     * Wrapper for SceneLoader.LoadAsync
     * @param rootUrl a string that defines the root url for the scene and resources or the concatenation of rootURL and filename
     * @param sceneFilename a string that defines the name of the scene file or starts with "data:" following by the stringified version of the scene or a File object (default: empty string)
     */
    LoadAsync(rootUrl, sceneFilename) {
        return _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.LoadAsync(rootUrl, sceneFilename, this.engine);
    }
    // GLTFLoaderExtensionObserver
    onLoadReady() {
        for (const f of this._onLoadCompleteCallbacks) {
            f();
        }
    }
    /**
     * Set up for time update.
     * @private
     */
    setupObservable() {
        this.scene.onBeforeRenderObservable.add((eventData, eventState) => {
            this._beforeRenderFunc(eventData, eventState);
        });
        // Camera
        this.scene.onBeforeRenderObservable.add(() => {
            for (const f of this._cameraOnBeforeRenderFunc)
                f();
        });
        // Update secondary animation
        this.scene.onAfterRenderObservable.add((eventData, eventState) => {
            this._afterRenderFunc(eventData, eventState);
        });
    }
    enableResize() {
        this.engine.getRenderingCanvas().onresize = () => {
            this.engine.resize();
        };
    }
    setupShadowGenerator(shadowGenerator) {
        shadowGenerator.usePercentageCloserFiltering = true;
        shadowGenerator.filteringQuality = _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator.QUALITY_HIGH;
    }
    // TODO Unregister
    registerVrmExtension() {
        // ローダーに登録する
        _babylonjs_loaders_glTF_2_0__WEBPACK_IMPORTED_MODULE_4__.GLTFLoader.RegisterExtension(_importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__.VRMLoaderExtension.NAME, (loader) => {
            return new _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__.VRMLoaderExtension(loader, this);
        });
    }
    registerVrmPlugin() {
        if (_babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader && _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.GetPluginForExtension('.vrm').name === 'babylon.js') {
            _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.RegisterPlugin(this._vrmFileLoader);
        }
    }
    ;
    setupRenderingPipeline() {
        this._renderingPipeline.samples = 4;
        this._renderingPipeline.depthOfFieldEnabled = true;
        this._renderingPipeline.depthOfFieldBlurLevel = _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.DepthOfFieldEffectBlurLevel.Medium;
        this._renderingPipeline.depthOfField.focusDistance = 2000; // distance of the current focus point from the camera in millimeters considering 1 scene unit is 1 meter
        this._renderingPipeline.depthOfField.focalLength = 10; // focal length of the camera in millimeters
        this._renderingPipeline.depthOfField.fStop = 1.4; // aka F number of the camera defined in stops as it would be on a physical device
    }
}
V3DCore.FRAMERATE = 60;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (V3DCore);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkv3d_core"] = self["webpackChunkv3d_core"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["babylonjs"], () => (__webpack_require__("./src/index-test.ts")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxnQkFBZ0Isd0dBQXdHLGdEQUFnRCxFQUFFLDBDQUEwQyxHQUFHLGtEQUFrRCxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSx1REFBdUQsdUNBQXVDLHVDQUF1QyxFQUFFLHNDQUFzQyxFQUFFLGdFQUFnRSxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLDJGQUEyRixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHNEQUFzRCxFQUFFLHNDQUFzQyxFQUFFLDJEQUEyRCxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLHNGQUFzRixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLDBEQUEwRCxFQUFFLHNDQUFzQyxFQUFFLHVFQUF1RSxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLGtHQUFrRyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHNEQUFzRCxFQUFFLDRDQUE0QyxFQUFFLHFFQUFxRSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLGdEQUFnRCxFQUFFLHFFQUFxRSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsdUJBQXVCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHVGQUF1RixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsdUJBQXVCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHVEQUF1RCxFQUFFLDRDQUE0QyxFQUFFLHVFQUF1RSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVB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QUNBO1dBQ0EsQ0FBQzs7Ozs7V0NQRDs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7O1dDTkE7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBOztXQUVBOztXQUVBOztXQUVBOztXQUVBOztXQUVBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLE1BQU0scUJBQXFCO1dBQzNCO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7V0FDQTtXQUNBOzs7OztVRWhEQTtVQUNBO1VBQ0E7VUFDQTtVQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3YzZC1jb3JlLy4vbm9kZV9tb2R1bGVzL2JhYnlsb24tbXRvb24tbWF0ZXJpYWwvZGlzdC9pbmRleC5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaGVscGVyLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvZXJyb3JzLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvaHVtYW5vaWQtYm9uZS50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL21hdGVyaWFsLXZhbHVlLWJpbmRpbmctbWVyZ2VyLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvc2Vjb25kYXJ5LWFuaW1hdGlvbi9jb2xsaWRlci1ncm91cC50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3NlY29uZGFyeS1hbmltYXRpb24vY29sbGlkZXIudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9zZWNvbmRhcnktYW5pbWF0aW9uL3NwcmluZy1ib25lLWNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9zZWNvbmRhcnktYW5pbWF0aW9uL3ZybS1zcHJpbmctYm9uZS1sb2dpYy50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3NlY29uZGFyeS1hbmltYXRpb24vdnJtLXNwcmluZy1ib25lLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvdnJtLWV4dGVuc2lvbi50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3ZybS1maWxlLWxvYWRlci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3ZybS1pbnRlcmZhY2VzLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvdnJtLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy92cm0tbWF0ZXJpYWwtZ2VuZXJhdG9yLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2luZGV4LXRlc3QudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvc2NlbmUvb3B0aW1pemVyLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL3NjZW5lL3NreWJveC50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy91dGlsaXRpZXMvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvdjNkLWNvcmUudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9iZWZvcmUtc3RhcnR1cCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInYzZC1jb3JlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInYzZC1jb3JlXCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIWZ1bmN0aW9uKGUsaSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9aShyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01pc2MvZGVjb3JhdG9yc1wiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01pc2Mvc21hcnRBcnJheVwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3JcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvQnVmZmVycy9idWZmZXJcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvblwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9wdXNoTWF0ZXJpYWxcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxIZWxwZXJcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2NvbnN0YW50c1wiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RGYWxsYmFja3NcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsLmRldGFpbE1hcENvbmZpZ3VyYXRpb25cIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxQbHVnaW5FdmVudFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01pc2MvaUluc3BlY3RhYmxlXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVDb21wb25lbnRcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxEZWZpbmVzXCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2RlY29yYXRvcnNcIixcIkBiYWJ5bG9uanMvY29yZS9NaXNjL3NtYXJ0QXJyYXlcIixcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgudmVjdG9yXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC5jb2xvclwiLFwiQGJhYnlsb25qcy9jb3JlL0J1ZmZlcnMvYnVmZmVyXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb25cIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvcHVzaE1hdGVyaWFsXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsSGVscGVyXCIsXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9jb25zdGFudHNcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0RmFsbGJhY2tzXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdFwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbC5kZXRhaWxNYXBDb25maWd1cmF0aW9uXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsUGx1Z2luRXZlbnRcIixcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2lJbnNwZWN0YWJsZVwiLFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lQ29tcG9uZW50XCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsRGVmaW5lc1wiXSxpKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzW1wiYmFieWxvbi1tdG9vbi1tYXRlcmlhbFwiXT1pKHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9kZWNvcmF0b3JzXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9zbWFydEFycmF5XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLnZlY3RvclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGguY29sb3JcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9CdWZmZXJzL2J1ZmZlclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL3B1c2hNYXRlcmlhbFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbEhlbHBlclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL0VuZ2luZXMvY29uc3RhbnRzXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdEZhbGxiYWNrc1wiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwuZGV0YWlsTWFwQ29uZmlndXJhdGlvblwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFBsdWdpbkV2ZW50XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9pSW5zcGVjdGFibGVcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9zY2VuZUNvbXBvbmVudFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbERlZmluZXNcIikpOmVbXCJiYWJ5bG9uLW10b29uLW1hdGVyaWFsXCJdPWkoZVtcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2RlY29yYXRvcnNcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NaXNjL3NtYXJ0QXJyYXlcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgudmVjdG9yXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC5jb2xvclwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL0J1ZmZlcnMvYnVmZmVyXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb25cIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvcHVzaE1hdGVyaWFsXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsSGVscGVyXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9jb25zdGFudHNcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0RmFsbGJhY2tzXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdFwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbC5kZXRhaWxNYXBDb25maWd1cmF0aW9uXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsUGx1Z2luRXZlbnRcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2lJbnNwZWN0YWJsZVwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL3NjZW5lQ29tcG9uZW50XCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsRGVmaW5lc1wiXSl9KHNlbGYsKChlLGksbix0LG8sYSxyLHMsbCxkLGgsZix1LG0sYyxwLGcsXyk9PigoKT0+e1widXNlIHN0cmljdFwiO3ZhciBBPXs5MDg6ZT0+e2UuZXhwb3J0cz1hfSw1NTY6ZT0+e2UuZXhwb3J0cz1ofSwyNzI6ZT0+e2UuZXhwb3J0cz11fSw1NTplPT57ZS5leHBvcnRzPWZ9LDY3NzplPT57ZS5leHBvcnRzPXJ9LDY2OmU9PntlLmV4cG9ydHM9c30sODI0OmU9PntlLmV4cG9ydHM9bX0sNzEzOmU9PntlLmV4cG9ydHM9X30sMjIxOmU9PntlLmV4cG9ydHM9ZH0sNjI4OmU9PntlLmV4cG9ydHM9Y30sNzIxOmU9PntlLmV4cG9ydHM9bH0sNTQ4OmU9PntlLmV4cG9ydHM9b30sNjk0OmU9PntlLmV4cG9ydHM9dH0sMzg4Omk9PntpLmV4cG9ydHM9ZX0sODEyOmU9PntlLmV4cG9ydHM9cH0sNDc0OmU9PntlLmV4cG9ydHM9aX0sNTM4OmU9PntlLmV4cG9ydHM9bn0sNjY3OmU9PntlLmV4cG9ydHM9Z319LEk9e307ZnVuY3Rpb24gdihlKXt2YXIgaT1JW2VdO2lmKHZvaWQgMCE9PWkpcmV0dXJuIGkuZXhwb3J0czt2YXIgbj1JW2VdPXtleHBvcnRzOnt9fTtyZXR1cm4gQVtlXShuLG4uZXhwb3J0cyx2KSxuLmV4cG9ydHN9di5kPShlLGkpPT57Zm9yKHZhciBuIGluIGkpdi5vKGksbikmJiF2Lm8oZSxuKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMCxnZXQ6aVtuXX0pfSx2Lm89KGUsaSk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpLHYucj1lPT57XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX07dmFyIE09e307cmV0dXJuKCgpPT57ZnVuY3Rpb24gZShlLGksbix0KXt2YXIgbyxhPWFyZ3VtZW50cy5sZW5ndGgscj1hPDM/aTpudWxsPT09dD90PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxuKTp0O2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXI9UmVmbGVjdC5kZWNvcmF0ZShlLGksbix0KTtlbHNlIGZvcih2YXIgcz1lLmxlbmd0aC0xO3M+PTA7cy0tKShvPWVbc10pJiYocj0oYTwzP28ocik6YT4zP28oaSxuLHIpOm8oaSxuKSl8fHIpO3JldHVybiBhPjMmJnImJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLG4scikscn12LnIoTSksdi5kKE0se0N1bGxNb2RlOigpPT5MLERlYnVnTW9kZTooKT0+VCxNVG9vbk1hdGVyaWFsOigpPT54LE91dGxpbmVDb2xvck1vZGU6KCk9Pk4sT3V0bGluZVdpZHRoTW9kZTooKT0+RH0pLE9iamVjdC5jcmVhdGUsT2JqZWN0LmNyZWF0ZTt2YXIgaT12KDM4OCksbj12KDQ3NCksdD12KDUzOCksbz12KDY5NCksYT12KDU0OCkscj12KDkwOCkscz12KDY3NyksbD12KDY2KSxkPXYoNzIxKSxoPXYoMjIxKSxmPXYoNTU2KSx1PXYoNTUpLG09digyNzIpLGM9dig4MjQpLHA9dig2MjgpLGc9dig4MTIpLF89dig2NjcpO2NsYXNzIEF7Y29uc3RydWN0b3IoZSxpKXt0aGlzLnNjZW5lPWUsdGhpcy5tYXRlcmlhbD1pLHRoaXMubmFtZT1gTVRvb25PdXRsaW5lXyR7aS5uYW1lfV8ke0EucmVuZGVyZXJJZCsrfWAsdGhpcy5zY2VuZS5fYWRkQ29tcG9uZW50KHRoaXMpLHRoaXMuX2VuZ2luZT10aGlzLnNjZW5lLmdldEVuZ2luZSgpLHRoaXMuX3Bhc3NJZEZvckRyYXdXcmFwcGVyPVtdO2ZvcihsZXQgZT0wO2U8MTsrK2UpdGhpcy5fcGFzc0lkRm9yRHJhd1dyYXBwZXJbZV09dGhpcy5fZW5naW5lLmNyZWF0ZVJlbmRlclBhc3NJZChgT3V0bGluZSBSZW5kZXJlciAoJHtlfSlgKX1yZWdpc3Rlcigpe3RoaXMuc2NlbmUuX2FmdGVyUmVuZGVyaW5nTWVzaFN0YWdlLnJlZ2lzdGVyU3RlcChfLlNjZW5lQ29tcG9uZW50Q29uc3RhbnRzLlNURVBfQUZURVJSRU5ERVJJTkdNRVNIX09VVExJTkUsdGhpcyx0aGlzLl9hZnRlclJlbmRlcmluZ01lc2gpfXJlYnVpbGQoKXt9ZGlzcG9zZSgpe2ZvcihsZXQgZT0wO2U8dGhpcy5fcGFzc0lkRm9yRHJhd1dyYXBwZXIubGVuZ3RoOysrZSl0aGlzLl9lbmdpbmUucmVsZWFzZVJlbmRlclBhc3NJZCh0aGlzLl9wYXNzSWRGb3JEcmF3V3JhcHBlcltlXSl9cmVuZGVyKGUsaSxuKXtuPW51bGwhPW4/bjp0aGlzLl9wYXNzSWRGb3JEcmF3V3JhcHBlclswXTtjb25zdCB0PXRoaXMuc2NlbmUsbz1lLmVmZmVjdDtpZighb3x8IW8uaXNSZWFkeSgpfHwhdGhpcy5zY2VuZS5hY3RpdmVDYW1lcmEpcmV0dXJuO2NvbnN0IGE9ZS5fZ2V0RHJhd1dyYXBwZXIobiwhMCk7aWYoIWEpcmV0dXJuO2lmKGEuc2V0RWZmZWN0KG8pLCFhLmVmZmVjdHx8IWEuZWZmZWN0LmlzUmVhZHkoKSlyZXR1cm47Y29uc3Qgcj1lLmdldE1lc2goKSxzPXIuX2ludGVybmFsQWJzdHJhY3RNZXNoRGF0YUluZm8uX2FjdEFzUmVndWxhck1lc2g/cjpudWxsLGw9ZS5nZXRSZW5kZXJpbmdNZXNoKCksZD1zfHxsO3QuYWN0aXZlQ2FtZXJhJiYodGhpcy5tYXRlcmlhbC5hcHBseU91dGxpbmVDdWxsTW9kZSgpLHRoaXMubWF0ZXJpYWwuZW5hYmxlT3V0bGluZVJlbmRlcigpLHRoaXMuX2VuZ2luZS5lbmFibGVFZmZlY3QoYSksdGhpcy5pc0hhcmR3YXJlSW5zdGFuY2VkUmVuZGVyaW5nKGUsaSl8fGwuX2JpbmQoZSxvLHRoaXMubWF0ZXJpYWwuZmlsbE1vZGUpLHRoaXMubWF0ZXJpYWwuX3ByZUJpbmQobyksbC5fcHJvY2Vzc1JlbmRlcmluZyhkLGUsbyx0aGlzLm1hdGVyaWFsLmZpbGxNb2RlLGksdGhpcy5pc0hhcmR3YXJlSW5zdGFuY2VkUmVuZGVyaW5nKGUsaSksKChpLG4sdCk9Pnt0JiZ0LmJpbmRGb3JTdWJNZXNoKG4sZCxlKX0pLHRoaXMubWF0ZXJpYWwpLHRoaXMubWF0ZXJpYWwucmVzdG9yZU91dGxpbmVDdWxsTW9kZSgpLHRoaXMubWF0ZXJpYWwuZGlzYWFibGVPdXRsaW5lUmVuZGVyKCkpfV9hZnRlclJlbmRlcmluZ01lc2goZSxpLG4pe2lmKCF0aGlzLndpbGxSZW5kZXIoaSkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5fZW5naW5lLmN1bGxCYWNrRmFjZXM7dGhpcy5fZW5naW5lLmN1bGxCYWNrRmFjZXM9ITEsdGhpcy5yZW5kZXIoaSxuLHRoaXMuX3Bhc3NJZEZvckRyYXdXcmFwcGVyWzBdKSx0aGlzLl9lbmdpbmUuY3VsbEJhY2tGYWNlcz10fWlzSGFyZHdhcmVJbnN0YW5jZWRSZW5kZXJpbmcoZSxpKXtyZXR1cm4hIXRoaXMuX2VuZ2luZS5nZXRDYXBzKCkuaW5zdGFuY2VkQXJyYXlzJiZudWxsIT09aS52aXNpYmxlSW5zdGFuY2VzW2UuX2lkXSYmdm9pZCAwIT09aS52aXNpYmxlSW5zdGFuY2VzW2UuX2lkXSYmZS5nZXRSZW5kZXJpbmdNZXNoKCkuaGFzVGhpbkluc3RhbmNlc313aWxsUmVuZGVyKGUpe2NvbnN0IGk9ZS5nZXRNYXRlcmlhbCgpO3JldHVybiEoIWl8fFwiTVRvb25NYXRlcmlhbFwiIT09aS5nZXRDbGFzc05hbWUoKXx8aS5nZXRPdXRsaW5lUmVuZGVyZXJOYW1lKCkhPT10aGlzLm5hbWUpfX1BLnJlbmRlcmVySWQ9MDt2YXIgST12KDcxMyk7Y2xhc3MgRSBleHRlbmRzIEkuTWF0ZXJpYWxEZWZpbmVze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuQ1VTVE9NVVNFUkxJR0hUSU5HPSEwLHRoaXMuTVRPT05fT1VUTElORV9XSURUSF9XT1JMRD0hMSx0aGlzLk1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOPSExLHRoaXMuTVRPT05fT1VUTElORV9DT0xPUl9GSVhFRD0hMSx0aGlzLk1UT09OX09VVExJTkVfQ09MT1JfTUlYRUQ9ITEsdGhpcy5NVE9PTl9ERUJVR19OT1JNQUw9ITEsdGhpcy5NVE9PTl9ERUJVR19MSVRTSEFERVJSQVRFPSExLHRoaXMuU0hBREU9ITEsdGhpcy5TSEFERURJUkVDVFVWPTAsdGhpcy5SRUNFSVZFX1NIQURPVz0hMSx0aGlzLlJFQ0VJVkVfU0hBRE9XRElSRUNUVVY9MCx0aGlzLlNIQURJTkdfR1JBREU9ITEsdGhpcy5TSEFESU5HX0dSQURFRElSRUNUVVY9MCx0aGlzLlJJTT0hMSx0aGlzLlJJTURJUkVDVFVWPTAsdGhpcy5NQVRDQVA9ITEsdGhpcy5NQVRDQVBESVJFQ1RVVj0wLHRoaXMuT1VUTElORV9XSURUSD0hMSx0aGlzLk9VVExJTkVfV0lEVEhESVJFQ1RVVj0wLHRoaXMuVVZfQU5JTUFUSU9OX01BU0s9ITEsdGhpcy5VVl9BTklNQVRJT05fTUFTS0RJUkVDVFVWPTAsdGhpcy5NQUlOVVYxPSExLHRoaXMuTUFJTlVWMj0hMSx0aGlzLk1BSU5VVjM9ITEsdGhpcy5NQUlOVVY0PSExLHRoaXMuTUFJTlVWNT0hMSx0aGlzLk1BSU5VVjY9ITEsdGhpcy5ESUZGVVNFPSExLHRoaXMuRElGRlVTRURJUkVDVFVWPTAsdGhpcy5CQUtFRF9WRVJURVhfQU5JTUFUSU9OX1RFWFRVUkU9ITEsdGhpcy5FTUlTU0lWRT0hMSx0aGlzLkVNSVNTSVZFRElSRUNUVVY9MCx0aGlzLkJVTVA9ITEsdGhpcy5CVU1QRElSRUNUVVY9MCx0aGlzLlBBUkFMTEFYPSExLHRoaXMuUEFSQUxMQVhPQ0NMVVNJT049ITEsdGhpcy5DTElQUExBTkU9ITEsdGhpcy5DTElQUExBTkUyPSExLHRoaXMuQ0xJUFBMQU5FMz0hMSx0aGlzLkNMSVBQTEFORTQ9ITEsdGhpcy5DTElQUExBTkU1PSExLHRoaXMuQ0xJUFBMQU5FNj0hMSx0aGlzLkFMUEhBVEVTVD0hMSx0aGlzLkRFUFRIUFJFUEFTUz0hMSx0aGlzLkFMUEhBRlJPTURJRkZVU0U9ITEsdGhpcy5QT0lOVFNJWkU9ITEsdGhpcy5GT0c9ITEsdGhpcy5OT1JNQUw9ITEsdGhpcy5VVjE9ITEsdGhpcy5VVjI9ITEsdGhpcy5VVjM9ITEsdGhpcy5VVjQ9ITEsdGhpcy5VVjU9ITEsdGhpcy5VVjY9ITEsdGhpcy5WRVJURVhDT0xPUj0hMSx0aGlzLlZFUlRFWEFMUEhBPSExLHRoaXMuTlVNX0JPTkVfSU5GTFVFTkNFUlM9MCx0aGlzLkJvbmVzUGVyTWVzaD0wLHRoaXMuQk9ORVRFWFRVUkU9ITEsdGhpcy5CT05FU19WRUxPQ0lUWV9FTkFCTEVEPSExLHRoaXMuSU5TVEFOQ0VTPSExLHRoaXMuVEhJTl9JTlNUQU5DRVM9ITEsdGhpcy5PQkpFQ1RTUEFDRV9OT1JNQUxNQVA9ITEsdGhpcy5MT0dBUklUSE1JQ0RFUFRIPSExLHRoaXMuVFdPU0lERURMSUdIVElORz0hMSx0aGlzLlNIQURPV0ZMT0FUPSExLHRoaXMuTU9SUEhUQVJHRVRTPSExLHRoaXMuTU9SUEhUQVJHRVRTX05PUk1BTD0hMSx0aGlzLk1PUlBIVEFSR0VUU19UQU5HRU5UPSExLHRoaXMuTU9SUEhUQVJHRVRTX1VWPSExLHRoaXMuTlVNX01PUlBIX0lORkxVRU5DRVJTPTAsdGhpcy5NT1JQSFRBUkdFVFNfVEVYVFVSRT0hMSx0aGlzLk5PTlVOSUZPUk1TQ0FMSU5HPSExLHRoaXMuUFJFTVVMVElQTFlBTFBIQT0hMSx0aGlzLkFMUEhBVEVTVF9BRlRFUkFMTEFMUEhBQ09NUFVUQVRJT05TPSExLHRoaXMuQUxQSEFCTEVORD0hMCx0aGlzLlBSRVBBU1M9ITEsdGhpcy5QUkVQQVNTX0lSUkFESUFOQ0U9ITEsdGhpcy5QUkVQQVNTX0lSUkFESUFOQ0VfSU5ERVg9LTEsdGhpcy5QUkVQQVNTX0FMQkVET19TUVJUPSExLHRoaXMuUFJFUEFTU19BTEJFRE9fU1FSVF9JTkRFWD0tMSx0aGlzLlBSRVBBU1NfREVQVEg9ITEsdGhpcy5QUkVQQVNTX0RFUFRIX0lOREVYPS0xLHRoaXMuUFJFUEFTU19OT1JNQUw9ITEsdGhpcy5QUkVQQVNTX05PUk1BTF9JTkRFWD0tMSx0aGlzLlBSRVBBU1NfUE9TSVRJT049ITEsdGhpcy5QUkVQQVNTX1BPU0lUSU9OX0lOREVYPS0xLHRoaXMuUFJFUEFTU19WRUxPQ0lUWT0hMSx0aGlzLlBSRVBBU1NfVkVMT0NJVFlfSU5ERVg9LTEsdGhpcy5QUkVQQVNTX1JFRkxFQ1RJVklUWT0hMSx0aGlzLlBSRVBBU1NfUkVGTEVDVElWSVRZX0lOREVYPS0xLHRoaXMuU0NFTkVfTVJUX0NPVU5UPTAsdGhpcy5JTUFHRVBST0NFU1NJTkc9ITEsdGhpcy5WSUdORVRURT0hMSx0aGlzLlZJR05FVFRFQkxFTkRNT0RFTVVMVElQTFk9ITEsdGhpcy5WSUdORVRURUJMRU5ETU9ERU9QQVFVRT0hMSx0aGlzLlRPTkVNQVBQSU5HPSExLHRoaXMuVE9ORU1BUFBJTkdfQUNFUz0hMSx0aGlzLkNPTlRSQVNUPSExLHRoaXMuQ09MT1JDVVJWRVM9ITEsdGhpcy5DT0xPUkdSQURJTkc9ITEsdGhpcy5DT0xPUkdSQURJTkczRD0hMSx0aGlzLlNBTVBMRVIzREdSRUVOREVQVEg9ITEsdGhpcy5TQU1QTEVSM0RCR1JNQVA9ITEsdGhpcy5JTUFHRVBST0NFU1NJTkdQT1NUUFJPQ0VTUz0hMSx0aGlzLlNLSVBGSU5BTENPTE9SQ0xBTVA9ITEsdGhpcy5NVUxUSVZJRVc9ITEsdGhpcy5PUkRFUl9JTkRFUEVOREVOVF9UUkFOU1BBUkVOQ1k9ITEsdGhpcy5PUkRFUl9JTkRFUEVOREVOVF9UUkFOU1BBUkVOQ1lfMTZCSVRTPSExLHRoaXMuSVNfUkVGTEVDVElPTl9MSU5FQVI9ITEsdGhpcy5JU19SRUZSQUNUSU9OX0xJTkVBUj0hMSx0aGlzLkVYUE9TVVJFPSExLHRoaXMuRkxJUF9VPSExLHRoaXMuRkxJUF9WPSExLHRoaXMucmVidWlsZCgpfXNldFJlZmxlY3Rpb25Nb2RlKGUpe3Rocm93IG5ldyBFcnJvcihcIlRoaXMgbWF0ZXJpYWwgY2Fubm90IHVzZSBgc2V0UmVmbGVjdGlvbk1vZGVgXCIpfX1jb25zdCBTPXtlZmZlY3Q6bnVsbCxzdWJNZXNoOm51bGx9O3ZhciBULE4sRCxMOyFmdW5jdGlvbihlKXtlW2UuTm9uZT0wXT1cIk5vbmVcIixlW2UuTm9ybWFsPTFdPVwiTm9ybWFsXCIsZVtlLkxpdFNoYWRlUmF0ZT0yXT1cIkxpdFNoYWRlUmF0ZVwifShUfHwoVD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5GaXhlZENvbG9yPTBdPVwiRml4ZWRDb2xvclwiLGVbZS5NaXhlZExpZ2h0aW5nPTFdPVwiTWl4ZWRMaWdodGluZ1wifShOfHwoTj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Ob25lPTBdPVwiTm9uZVwiLGVbZS5Xb3JsZENvcnJkaW5hdGVzPTFdPVwiV29ybGRDb3JyZGluYXRlc1wiLGVbZS5TY3JlZW5Db29yZGluYXRlcz0yXT1cIlNjcmVlbkNvb3JkaW5hdGVzXCJ9KER8fChEPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk9mZj0wXT1cIk9mZlwiLGVbZS5Gcm9udD0xXT1cIkZyb250XCIsZVtlLkJhY2s9Ml09XCJCYWNrXCJ9KEx8fChMPXt9KSk7Y2xhc3MgeCBleHRlbmRzIGQuUHVzaE1hdGVyaWFse2NvbnN0cnVjdG9yKGUsaSl7c3VwZXIoZSxpKSx0aGlzLl9kaWZmdXNlVGV4dHVyZT1udWxsLHRoaXMuZGlmZnVzZVRleHR1cmU9bnVsbCx0aGlzLl9lbWlzc2l2ZVRleHR1cmU9bnVsbCx0aGlzLmVtaXNzaXZlVGV4dHVyZT1udWxsLHRoaXMuX2J1bXBUZXh0dXJlPW51bGwsdGhpcy5idW1wVGV4dHVyZT1udWxsLHRoaXMuX3NoYWRlVGV4dHVyZT1udWxsLHRoaXMuc2hhZGVUZXh0dXJlPW51bGwsdGhpcy5fcmVjZWl2ZVNoYWRvd1RleHR1cmU9bnVsbCx0aGlzLnJlY2VpdmVTaGFkb3dUZXh0dXJlPW51bGwsdGhpcy5fc2hhZGluZ0dyYWRlVGV4dHVyZT1udWxsLHRoaXMuc2hhZGluZ0dyYWRlVGV4dHVyZT1udWxsLHRoaXMuX3JpbVRleHR1cmU9bnVsbCx0aGlzLnJpbVRleHR1cmU9bnVsbCx0aGlzLl9tYXRDYXBUZXh0dXJlPW51bGwsdGhpcy5tYXRDYXBUZXh0dXJlPW51bGwsdGhpcy5fb3V0bGluZVdpZHRoVGV4dHVyZT1udWxsLHRoaXMub3V0bGluZVdpZHRoVGV4dHVyZT1udWxsLHRoaXMuX3V2QW5pbWF0aW9uTWFza1RleHR1cmU9bnVsbCx0aGlzLnV2QW5pbWF0aW9uTWFza1RleHR1cmU9bnVsbCx0aGlzLmRpZmZ1c2VDb2xvcj1uZXcgYS5Db2xvcjMoMSwxLDEpLHRoaXMuYW1iaWVudENvbG9yPW5ldyBhLkNvbG9yMygwLDAsMCksdGhpcy5lbWlzc2l2ZUNvbG9yPW5ldyBhLkNvbG9yMygwLDAsMCksdGhpcy5zaGFkZUNvbG9yPW5ldyBhLkNvbG9yMyguOTcsLjgxLC44NiksdGhpcy5yaW1Db2xvcj1uZXcgYS5Db2xvcjMoMCwwLDApLHRoaXMub3V0bGluZUNvbG9yPW5ldyBhLkNvbG9yMygwLDAsMCksdGhpcy51c2VFbWlzc2l2ZUFzSWxsdW1pbmF0aW9uPSExLHRoaXMubGlua0VtaXNzaXZlV2l0aERpZmZ1c2U9ITEsdGhpcy51c2VSZWZsZWN0aW9uT3ZlckFscGhhPSExLHRoaXMuX2Rpc2FibGVMaWdodGluZz0hMSx0aGlzLnVzZU9iamVjdFNwYWNlTm9ybWFsTWFwPSExLHRoaXMudXNlUGFyYWxsYXg9ITEsdGhpcy51c2VQYXJhbGxheE9jY2x1c2lvbj0hMSx0aGlzLnNwZWN1bGFyU3VwcG9ydGVkPSExLHRoaXMudXNlTGlnaHRtYXBBc1NoYWRvd21hcD0hMSx0aGlzLnVzZVZlcnRleENvbG9yPSExLHRoaXMudXNlQm9uZXM9ITAsdGhpcy51c2VNb3JwaFRhcmdldHM9ITAsdGhpcy51c2VWZXJ0ZXhBbHBoYT0hMSx0aGlzLnVzZUJha2VkVmVydGV4QW5pbWF0aW9uPSExLHRoaXMuYWxwaGFDdXRPZmY9LjQsdGhpcy5fdXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmU9ITAsdGhpcy5fbWF4U2ltdWx0YW5lb3VzTGlnaHRzPTQsdGhpcy5faW52ZXJ0Tm9ybWFsTWFwWD0hMCx0aGlzLl9pbnZlcnROb3JtYWxNYXBZPSEwLHRoaXMuX3R3b1NpZGVkTGlnaHRpbmc9ITEsdGhpcy5fcmVuZGVyVGFyZ2V0cz1uZXcgbi5TbWFydEFycmF5KDE2KSx0aGlzLl93b3JsZFZpZXdQcm9qZWN0aW9uTWF0cml4PW8uTWF0cml4Llplcm8oKSx0aGlzLl9nbG9iYWxBbWJpZW50Q29sb3I9bmV3IGEuQ29sb3IzKDAsMCwwKSx0aGlzLl9jYWNoZUhhc1JlbmRlclRhcmdldFRleHR1cmVzPSExLHRoaXMuX2J1bXBTY2FsZT0xLHRoaXMuX3JlY2VpdmVTaGFkb3dSYXRlPTEsdGhpcy5fc2hhZGluZ0dyYWRlUmF0ZT0xLHRoaXMuX3NoYWRlU2hpZnQ9MCx0aGlzLl9zaGFkZVRvb255PS45LHRoaXMuX2xpZ2h0Q29sb3JBdHRlbnVhdGlvbj0wLHRoaXMuX2luZGlyZWN0TGlnaHRJbnRlbnNpdHk9LjEsdGhpcy5fcmltTGlnaHRpbmdNaXg9MCx0aGlzLl9yaW1GcmVzbmVsUG93ZXI9MSx0aGlzLl9yaW1MaWZ0PTAsdGhpcy5fb3V0bGluZVdpZHRoPS41LHRoaXMuX291dGxpbmVTY2FsZWRNYXhEaXN0YW5jZT0xLHRoaXMuX291dGxpbmVMaWdodGluZ01peD0xLHRoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWD0wLHRoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWT0wLHRoaXMuX3V2QW5pbWF0aW9uUm90YXRpb249MCx0aGlzLl9hbHBoYVRlc3Q9ITEsdGhpcy5fYWxwaGFCbGVuZD0hMSx0aGlzLl9kZWJ1Z01vZGU9VC5Ob25lLHRoaXMuZGVidWdNb2RlPVQuTm9uZSx0aGlzLl9vdXRsaW5lV2lkdGhNb2RlPUQuTm9uZSx0aGlzLmlzT3V0bGluZT0wLHRoaXMub3V0bGluZUNvbG9yTW9kZT1OLk1peGVkTGlnaHRpbmcsdGhpcy5fY3VsbE1vZGU9TC5CYWNrLHRoaXMuX291dGxpbmVDdWxsTW9kZT1MLkZyb250LHRoaXMub3V0bGluZUN1bGxNb2RlPUwuRnJvbnQsdGhpcy5zdG9yZWRDdWxsTW9kZT1MLkJhY2ssdGhpcy5mbGlwVT0hMSx0aGlzLmZsaXBWPSExLHRoaXMuZGV0YWlsTWFwPW5ldyBjLkRldGFpbE1hcENvbmZpZ3VyYXRpb24odGhpcyksdGhpcy5fYXR0YWNoSW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbihudWxsKSx0aGlzLmdldFJlbmRlclRhcmdldFRleHR1cmVzPSgpPT4odGhpcy5fcmVuZGVyVGFyZ2V0cy5yZXNldCgpLHRoaXMuX2V2ZW50SW5mby5yZW5kZXJUYXJnZXRzPXRoaXMuX3JlbmRlclRhcmdldHMsdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudEZpbGxSZW5kZXJUYXJnZXRUZXh0dXJlcyh0aGlzLl9ldmVudEluZm8pLHRoaXMuX3JlbmRlclRhcmdldHMpLG0uRWZmZWN0LkluY2x1ZGVzU2hhZGVyc1N0b3JlLm10b29uVWJvRGVjbGFyYXRpb258fChtLkVmZmVjdC5JbmNsdWRlc1NoYWRlcnNTdG9yZS5tdG9vblVib0RlY2xhcmF0aW9uPVwiLy8gaXQgd2lsbCBiZSByZXBsYWNlZCB0byBVYm9EZWNsYXJhdGlvbihXZWJHTDIpIG9yIFZlcnRleERlY2xhcmF0aW9uKFdlYkdMMSkuXFxuXFxubGF5b3V0KHN0ZDE0MCwgY29sdW1uX21ham9yKSB1bmlmb3JtO1xcblxcbnVuaWZvcm0gTWF0ZXJpYWxcXG57XFxuICAgIC8vIENvbG9yICYgVGV4dHVyZVxcbiAgICB2ZWM0IHZEaWZmdXNlQ29sb3I7XFxuICAgIHZlYzIgdkRpZmZ1c2VJbmZvcztcXG4gICAgbWF0NCBkaWZmdXNlTWF0cml4O1xcbiAgICB2ZWM0IHZFbWlzc2l2ZUNvbG9yO1xcbiAgICB2ZWMyIHZFbWlzc2l2ZUluZm9zO1xcbiAgICBtYXQ0IGVtaXNzaXZlTWF0cml4O1xcbiAgICB2ZWMzIHZCdW1wSW5mb3M7XFxuICAgIG1hdDQgYnVtcE1hdHJpeDtcXG4gICAgdmVjMyB2U2hhZGVDb2xvcjtcXG4gICAgdmVjMiB2U2hhZGVJbmZvcztcXG4gICAgbWF0NCBzaGFkZU1hdHJpeDtcXG4gICAgdmVjMiB2UmVjZWl2ZVNoYWRvd0luZm9zO1xcbiAgICBtYXQ0IHJlY2VpdmVTaGFkb3dNYXRyaXg7XFxuICAgIHZlYzIgdlNoYWRpbmdHcmFkZUluZm9zO1xcbiAgICBtYXQ0IHNoYWRpbmdHcmFkZU1hdHJpeDtcXG4gICAgdmVjMyB2UmltQ29sb3I7XFxuICAgIHZlYzIgdlJpbUluZm9zO1xcbiAgICBtYXQ0IHJpbU1hdHJpeDtcXG4gICAgdmVjMiB2TWF0Q2FwSW5mb3M7XFxuICAgIG1hdDQgbWF0Q2FwTWF0cml4O1xcbiAgICB2ZWM0IHZPdXRsaW5lQ29sb3I7XFxuICAgIHZlYzIgdk91dGxpbmVXaWR0aEluZm9zO1xcbiAgICBtYXQ0IG91dGxpbmVXaWR0aE1hdHJpeDtcXG4gICAgdmVjMiB2VXZBbmltYXRpb25NYXNrSW5mb3M7XFxuICAgIG1hdDQgdXZBbmltYXRpb25NYXNrTWF0cml4O1xcblxcbiAgICAvLyBiYWJ5bG9uIHNwZWNpZmljXFxuICAgIHZlYzIgdlRhbmdlbnRTcGFjZVBhcmFtcztcXG4gICAgZmxvYXQgcG9pbnRTaXplO1xcblxcbiAgICAvLyBNVG9vbiBwYXJhbXNcXG4gICAgZmxvYXQgc2hhZGluZ0dyYWRlUmF0ZTtcXG4gICAgZmxvYXQgcmVjZWl2ZVNoYWRvd1JhdGU7XFxuICAgIGZsb2F0IHNoYWRlU2hpZnQ7XFxuICAgIGZsb2F0IHNoYWRlVG9vbnk7XFxuICAgIGZsb2F0IGxpZ2h0Q29sb3JBdHRlbnVhdGlvbjtcXG4gICAgZmxvYXQgaW5kaXJlY3RMaWdodEludGVuc2l0eTtcXG4gICAgZmxvYXQgcmltTGlnaHRpbmdNaXg7XFxuICAgIGZsb2F0IHJpbUZyZXNuZWxQb3dlcjtcXG4gICAgZmxvYXQgcmltTGlmdDtcXG4gICAgZmxvYXQgb3V0bGluZVdpZHRoO1xcbiAgICBmbG9hdCBvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U7XFxuICAgIGZsb2F0IG91dGxpbmVMaWdodGluZ01peDtcXG4gICAgZmxvYXQgdXZBbmltYXRpb25TY3JvbGxYO1xcbiAgICBmbG9hdCB1dkFuaW1hdGlvblNjcm9sbFk7XFxuICAgIGZsb2F0IHV2QW5pbWF0aW9uUm90YXRpb247XFxuXFxuICAgIHZlYzMgdkV5ZVVwO1xcbiAgICBmbG9hdCBhbHBoYUN1dE9mZjtcXG4gICAgdmVjMyB2QW1iaWVudENvbG9yO1xcbiAgICBmbG9hdCBhc3BlY3Q7XFxuICAgIGZsb2F0IGlzT3V0bGluZTtcXG4gICAgdmVjNCB0aW1lO1xcbn07XFxuXFxuLy8gYmFieWxvbiBzcGVjaWZpY1xcbiNpbmNsdWRlPHNjZW5lVWJvRGVjbGFyYXRpb24+XFxuI2luY2x1ZGU8bWVzaFVib0RlY2xhcmF0aW9uPlxcblwiLG0uRWZmZWN0LkluY2x1ZGVzU2hhZGVyc1N0b3JlLm10b29uVmVydGV4RGVjbGFyYXRpb249XCIvLyBVbmlmb3Jtc1xcbnVuaWZvcm0gbWF0NCB2aWV3UHJvamVjdGlvbjtcXG51bmlmb3JtIG1hdDQgdmlldztcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbjtcXG51bmlmb3JtIGZsb2F0IG91dGxpbmVXaWR0aDtcXG51bmlmb3JtIGZsb2F0IG91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZTtcXG51bmlmb3JtIGZsb2F0IG91dGxpbmVMaWdodGluZ01peDtcXG51bmlmb3JtIGZsb2F0IGlzT3V0bGluZTtcXG51bmlmb3JtIGZsb2F0IGFzcGVjdDtcXG5cXG4jaWZkZWYgRElGRlVTRVxcbnVuaWZvcm0gbWF0NCBkaWZmdXNlTWF0cml4O1xcbnVuaWZvcm0gdmVjMiB2RGlmZnVzZUluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBFTUlTU0lWRVxcbnVuaWZvcm0gdmVjMiB2RW1pc3NpdmVJbmZvcztcXG51bmlmb3JtIG1hdDQgZW1pc3NpdmVNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIEJVTVBcXG51bmlmb3JtIHZlYzMgdkJ1bXBJbmZvcztcXG51bmlmb3JtIG1hdDQgYnVtcE1hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgU0hBREVcXG51bmlmb3JtIHZlYzIgdlNoYWRlSW5mb3M7XFxudW5pZm9ybSBtYXQ0IHNoYWRlTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBSRUNFSVZFX1NIQURPV1xcbnVuaWZvcm0gdmVjMiB2UmVjZWl2ZVNoYWRvd0luZm9zO1xcbnVuaWZvcm0gbWF0NCByZWNlaXZlU2hhZG93TWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBTSEFESU5HX0dSQURFXFxudW5pZm9ybSB2ZWMyIHZTaGFkaW5nR3JhZGVJbmZvcztcXG51bmlmb3JtIG1hdDQgc2hhZGluZ0dyYWRlTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBSSU1cXG51bmlmb3JtIHZlYzIgdlJpbUluZm9zO1xcbnVuaWZvcm0gbWF0NCByaW1NYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIE1BVENBUFxcbnVuaWZvcm0gdmVjMiB2TWF0Q2FwSW5mb3M7XFxudW5pZm9ybSBtYXQ0IG1hdENhcE1hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgT1VUTElORV9XSURUSFxcbnVuaWZvcm0gdmVjMiB2T3V0bGluZVdpZHRoSW5mb3M7XFxudW5pZm9ybSBtYXQ0IG91dGxpbmVXaWR0aE1hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgVVZfQU5JTUFUSU9OX01BU0tcXG51bmlmb3JtIHZlYzIgdlV2QW5pbWF0aW9uTWFza0luZm9zO1xcbnVuaWZvcm0gbWF0NCB1dkFuaW1hdGlvbk1hc2tNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFBPSU5UU0laRVxcbnVuaWZvcm0gZmxvYXQgcG9pbnRTaXplO1xcbiNlbmRpZlxcblwiLG0uRWZmZWN0LkluY2x1ZGVzU2hhZGVyc1N0b3JlLm10b29uRnJhZ21lbnREZWNsYXJhdGlvbj1cInVuaWZvcm0gdmVjNCB2RXllUG9zaXRpb247XFxuXFxuLy8gQ29sb3JzXFxudW5pZm9ybSB2ZWM0IHZEaWZmdXNlQ29sb3I7XFxudW5pZm9ybSB2ZWMzIHZFbWlzc2l2ZUNvbG9yO1xcbnVuaWZvcm0gdmVjMyB2U2hhZGVDb2xvcjtcXG51bmlmb3JtIHZlYzMgdlJpbUNvbG9yO1xcbnVuaWZvcm0gdmVjNCB2T3V0bGluZUNvbG9yO1xcbnVuaWZvcm0gdmVjMyB2QW1iaWVudENvbG9yO1xcblxcbnVuaWZvcm0gdmVjMyB2RXllVXA7XFxudW5pZm9ybSBmbG9hdCBhc3BlY3Q7XFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dE9mZjtcXG51bmlmb3JtIGZsb2F0IHZpc2liaWxpdHk7XFxudW5pZm9ybSBmbG9hdCBpc091dGxpbmU7XFxudW5pZm9ybSB2ZWM0IHRpbWU7XFxuXFxuLy8gU2FtcGxlcnNcXG4jaWZkZWYgRElGRlVTRVxcbnVuaWZvcm0gdmVjMiB2RGlmZnVzZUluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBFTUlTU0lWRVxcbnVuaWZvcm0gdmVjMiB2RW1pc3NpdmVJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgQlVNUFxcbnVuaWZvcm0gdmVjMyB2QnVtcEluZm9zO1xcbnVuaWZvcm0gdmVjMiB2VGFuZ2VudFNwYWNlUGFyYW1zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBTSEFERVxcbnVuaWZvcm0gdmVjMiB2U2hhZGVJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgUkVDRUlWRV9TSEFET1dcXG51bmlmb3JtIHZlYzIgdlJlY2VpdmVTaGFkb3dJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgU0hBRElOR19HUkFERVxcbnVuaWZvcm0gdmVjMiB2U2hhZGluZ0dyYWRlSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFJJTVxcbnVuaWZvcm0gdmVjMiB2UmltSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIE1BVENBUFxcbnVuaWZvcm0gdmVjMiB2TWF0Q2FwSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIE9VVExJTkVfV0lEVEhcXG51bmlmb3JtIHZlYzIgdk91dGxpbmVXaWR0aEluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBVVl9BTklNQVRJT05fTUFTS1xcbnVuaWZvcm0gdmVjMiB2VXZBbmltYXRpb25NYXNrSW5mb3M7XFxuI2VuZGlmXFxuXFxuLy8gTVRvb24gcGFyYW1zXFxudW5pZm9ybSBmbG9hdCBzaGFkaW5nR3JhZGVSYXRlO1xcbnVuaWZvcm0gZmxvYXQgcmVjZWl2ZVNoYWRvd1JhdGU7XFxudW5pZm9ybSBmbG9hdCBzaGFkZVNoaWZ0O1xcbnVuaWZvcm0gZmxvYXQgc2hhZGVUb29ueTtcXG51bmlmb3JtIGZsb2F0IGxpZ2h0Q29sb3JBdHRlbnVhdGlvbjtcXG51bmlmb3JtIGZsb2F0IGluZGlyZWN0TGlnaHRJbnRlbnNpdHk7XFxudW5pZm9ybSBmbG9hdCByaW1MaWdodGluZ01peDtcXG51bmlmb3JtIGZsb2F0IHJpbUZyZXNuZWxQb3dlcjtcXG51bmlmb3JtIGZsb2F0IHJpbUxpZnQ7XFxudW5pZm9ybSBmbG9hdCBvdXRsaW5lV2lkdGg7XFxudW5pZm9ybSBmbG9hdCBvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U7XFxudW5pZm9ybSBmbG9hdCBvdXRsaW5lTGlnaHRpbmdNaXg7XFxudW5pZm9ybSBmbG9hdCB1dkFuaW1hdGlvblNjcm9sbFg7XFxudW5pZm9ybSBmbG9hdCB1dkFuaW1hdGlvblNjcm9sbFk7XFxudW5pZm9ybSBmbG9hdCB1dkFuaW1hdGlvblJvdGF0aW9uO1xcblwiLG0uRWZmZWN0LkluY2x1ZGVzU2hhZGVyc1N0b3JlLm10b29uRnJhZ21lbnRGdW5jdGlvbnM9XCJcXG4vKipcXG4qIENvbXB1dGUgRGlyZWN0aW9uYWwgb3IgUG9pbnQgbGlnaHQgZGlyZWN0aW9uXFxuKi9cXG52ZWMzIGNvbXB1dGVMaWdodERpcmVjdGlvbih2ZWM0IGxpZ2h0RGF0YSkge1xcbiAgICByZXR1cm4gbm9ybWFsaXplKG1peChsaWdodERhdGEueHl6IC0gdlBvc2l0aW9uVywgLWxpZ2h0RGF0YS54eXosIGxpZ2h0RGF0YS53KSk7XFxufVxcblxcbi8qKlxcbiogQ29tcHV0ZSBTcG90IExpZ2h0IGRpcmVjdGlvblxcbiovXFxudmVjMyBjb21wdXRlU3BvdExpZ2h0RGlyZWN0aW9uKHZlYzQgbGlnaHREYXRhKSB7XFxuICAgIHJldHVybiBub3JtYWxpemUobGlnaHREYXRhLnh5eiAtIHZQb3NpdGlvblcpO1xcbn1cXG5cXG4vKipcXG4qIENvbXB1dGUgSGVtaXNwaGVyaWMgbGlnaHQgZGlyZWN0aW9uXFxuKi9cXG52ZWMzIGNvbXB1dGVIZW1pc3BoZXJpY0xpZ2h0RGlyZWN0aW9uKHZlYzQgbGlnaHREYXRhLCB2ZWMzIHZOb3JtYWwpIHtcXG4gICAgcmV0dXJuIG5vcm1hbGl6ZShsaWdodERhdGEueHl6KTtcXG59XFxuXFxuLyoqXFxuKiBDb21wdXRlIE1Ub29uIGRpZmZ1c2UgbGlnaHRpbmdcXG4qL1xcbnZlYzQgY29tcHV0ZU1Ub29uRGlmZnVzZUxpZ2h0aW5nKHZlYzMgd29ybGRWaWV3LCB2ZWMzIHdvcmxkTm9ybWFsLCB2ZWMyIG1haW5VdiwgdmVjMyBsaWdodERpcmVjdGlvbiwgdmVjNCBsaWdodERpZmZ1c2UsIGZsb2F0IHNoYWRvd0F0dGVudWF0aW9uKSB7XFxuICAgIGZsb2F0IF9yZWNlaXZlU2hhZG93ID0gcmVjZWl2ZVNoYWRvd1JhdGU7XFxuI2lmZGVmIFJFQ0VJVkVfU0hBRE9XXFxuICAgIF9yZWNlaXZlU2hhZG93ID0gX3JlY2VpdmVTaGFkb3cgKiB0ZXh0dXJlMkQocmVjZWl2ZVNoYWRvd1NhbXBsZXIsIG1haW5VdikuciAqIHZSZWNlaXZlU2hhZG93SW5mb3MueTtcXG4jZW5kaWZcXG5cXG4gICAgZmxvYXQgX3NoYWRpbmdHcmFkZSA9IDAuMDtcXG4jaWZkZWYgU0hBRElOR19HUkFERVxcbiAgICBfc2hhZGluZ0dyYWRlID0gMS4wIC0gdGV4dHVyZTJEKHNoYWRpbmdHcmFkZVNhbXBsZXIsIG1haW5VdikuciAqIHZTaGFkaW5nR3JhZGVJbmZvcy55O1xcbiNlbmRpZlxcbiAgICBfc2hhZGluZ0dyYWRlID0gMS4wIC0gc2hhZGluZ0dyYWRlUmF0ZSAqIF9zaGFkaW5nR3JhZGU7XFxuXFxuICAgIC8vIExpZ2h0aW5nXFxuICAgIHZlYzMgX2xpZ2h0Q29sb3IgPSBsaWdodERpZmZ1c2UucmdiICogc3RlcCgwLjUsIGxlbmd0aChsaWdodERpcmVjdGlvbikpOyAvLyBsZW5ndGgobGlnaHREaXIpIGlzIHplcm8gaWYgZGlyZWN0aW9uYWwgbGlnaHQgaXMgZGlzYWJsZWQuXFxuICAgIGZsb2F0IF9kb3ROTCA9IGRvdChsaWdodERpcmVjdGlvbiwgd29ybGROb3JtYWwpO1xcbiNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiAgICBmbG9hdCBfbGlnaHRBdHRlbnVhdGlvbiA9IDEuMDtcXG4jZWxzZVxcbiAgICBmbG9hdCBfbGlnaHRBdHRlbnVhdGlvbiA9IHNoYWRvd0F0dGVudWF0aW9uICogbWl4KDEuMCwgc2hhZG93QXR0ZW51YXRpb24sIF9yZWNlaXZlU2hhZG93KTtcXG4jZW5kaWZcXG5cXG4gICAgLy8gbGlnaHRpbmcgaW50ZW5zaXR5XFxuICAgIGZsb2F0IF9saWdodEludGVuc2l0eSA9IF9kb3ROTDtcXG4gICAgX2xpZ2h0SW50ZW5zaXR5ID0gX2xpZ2h0SW50ZW5zaXR5ICogMC41ICsgMC41OyAvLyBmcm9tIFstMSwgKzFdIHRvIFswLCAxXVxcbiAgICBfbGlnaHRJbnRlbnNpdHkgPSBfbGlnaHRJbnRlbnNpdHkgKiBfbGlnaHRBdHRlbnVhdGlvbjsgLy8gcmVjZWl2ZSBzaGFkb3dcXG4gICAgX2xpZ2h0SW50ZW5zaXR5ID0gX2xpZ2h0SW50ZW5zaXR5ICogX3NoYWRpbmdHcmFkZTsgLy8gZGFya2VyXFxuICAgIF9saWdodEludGVuc2l0eSA9IF9saWdodEludGVuc2l0eSAqIDIuMCAtIDEuMDsgLy8gZnJvbSBbMCwgMV0gdG8gWy0xLCArMV1cXG4gICAgLy8gdG9vbmVkLiBtYXBwaW5nIGZyb20gW21pbkludGVuc2l0eVRocmVzaG9sZCwgbWF4SW50ZW5zaXR5VGhyZXNob2xkXSB0byBbMCwgMV1cXG4gICAgZmxvYXQgX21heEludGVuc2l0eVRocmVzaG9sZCA9IG1peCgxLjAsIHNoYWRlU2hpZnQsIHNoYWRlVG9vbnkpO1xcbiAgICBmbG9hdCBfbWluSW50ZW5zaXR5VGhyZXNob2xkID0gc2hhZGVTaGlmdDtcXG4gICAgX2xpZ2h0SW50ZW5zaXR5ID0gY2xhbXAoKF9saWdodEludGVuc2l0eSAtIF9taW5JbnRlbnNpdHlUaHJlc2hvbGQpIC8gbWF4KEVQU19DT0wsIChfbWF4SW50ZW5zaXR5VGhyZXNob2xkIC0gX21pbkludGVuc2l0eVRocmVzaG9sZCkpLCAwLjAsIDEuMCk7XFxuXFxuICAgIC8vIEFsYmVkbyBjb2xvclxcbiAgICB2ZWMzIF9zaGFkZSA9IHZTaGFkZUNvbG9yO1xcbiNpZmRlZiBTSEFERVxcbiAgICBfc2hhZGUgPSBfc2hhZGUgKiB0ZXh0dXJlMkQoc2hhZGVTYW1wbGVyLCBtYWluVXYpLnJnYiAqIHZTaGFkZUluZm9zLnk7XFxuI2VuZGlmXFxuXFxuICAgIHZlYzQgX2xpdCA9IHZEaWZmdXNlQ29sb3I7XFxuI2lmZGVmIERJRkZVU0VcXG4gICAgX2xpdCA9IF9saXQgKiB0ZXh0dXJlMkQoZGlmZnVzZVNhbXBsZXIsIG1haW5VdikgKiB2RGlmZnVzZUluZm9zLnk7XFxuI2VuZGlmXFxuICAgIHZlYzMgX2NvbCA9IG1peChfc2hhZGUucmdiLCBfbGl0LnJnYiwgX2xpZ2h0SW50ZW5zaXR5KTtcXG5cXG4gICAgLy8gRGlyZWN0IExpZ2h0XFxuICAgIHZlYzMgX2xpZ2h0aW5nID0gX2xpZ2h0Q29sb3I7XFxuICAgIF9saWdodGluZyA9IG1peChfbGlnaHRpbmcsIHZlYzMobWF4KEVQU19DT0wsIG1heChfbGlnaHRpbmcueCwgbWF4KF9saWdodGluZy55LCBfbGlnaHRpbmcueikpKSksIGxpZ2h0Q29sb3JBdHRlbnVhdGlvbik7IC8vIGNvbG9yIGF0dGVuXFxuI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuICAgIF9saWdodGluZyAqPSAwLjU7IC8vIGRhcmtlbiBpZiBhZGRpdGlvbmFsIGxpZ2h0XFxuICAgIF9saWdodGluZyAqPSBtaW4oMCwgZG90TkwpICsgMS4wOyAvLyBkYXJrZW4gZG90TkwgPCAwIGFyZWEgYnkgdXNpbmcgaGFsZiBsYW1iZXJ0XFxuICAgIF9saWdodGluZyAqPSBzaGFkb3dBdHRlbnVhdGlvbjsgLy8gZGFya2VuIGlmIHJlY2VpdmluZyBzaGFkb3dcXG4jZWxzZVxcbiAgICAvLyBiYXNlIGxpZ2h0IGRvZXMgbm90IGRhcmtlbi5cXG4jZW5kaWZcXG4gICAgX2NvbCAqPSBfbGlnaHRpbmc7XFxuXFxuICAgIC8vIEluZGlyZWN0IExpZ2h0XFxuI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuI2Vsc2VcXG4gICAgdmVjMyBfdG9vbmVkR0kgPSB2QW1iaWVudENvbG9yLnJnYjsgLy8gVE9ETzogR0lcXG4gICAgdmVjMyBfaW5kaXJlY3RMaWdodGluZyA9IG1peChfdG9vbmVkR0ksIHZBbWJpZW50Q29sb3IucmdiLCBpbmRpcmVjdExpZ2h0SW50ZW5zaXR5KTtcXG4gICAgX2luZGlyZWN0TGlnaHRpbmcgPSBtaXgoX2luZGlyZWN0TGlnaHRpbmcsIHZlYzMobWF4KEVQU19DT0wsIG1heChfaW5kaXJlY3RMaWdodGluZy54LCBtYXgoX2luZGlyZWN0TGlnaHRpbmcueSwgX2luZGlyZWN0TGlnaHRpbmcueikpKSksIGxpZ2h0Q29sb3JBdHRlbnVhdGlvbik7IC8vIGNvbG9yIGF0dGVuXFxuICAgIF9jb2wgKz0gX2luZGlyZWN0TGlnaHRpbmcgKiBfbGl0LnJnYjtcXG5cXG4gICAgX2NvbCA9IG1pbihfY29sLnJnYiwgX2xpdC5yZ2IpOyAvLyBjb21tZW50IG91dCBpZiB5b3Ugd2FudCB0byBQQlIgYWJzb2x1dGVseS5cXG4jZW5kaWZcXG5cXG4gICAgLy8gcGFyYW1ldHJpYyByaW0gbGlnaHRpbmdcXG4jaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4gICAgdmVjMyBfc3RhdGljUmltTGlnaHRpbmcgPSB2ZWMzKDAuMCk7XFxuICAgIHZlYzMgX21peGVkUmltTGlnaHRpbmcgPSBfbGlnaHRpbmc7XFxuI2Vsc2VcXG4gICAgdmVjMyBfc3RhdGljUmltTGlnaHRpbmcgPSB2ZWMzKDEuMCk7XFxuICAgIHZlYzMgX21peGVkUmltTGlnaHRpbmcgPSBfbGlnaHRpbmcgKyBfaW5kaXJlY3RMaWdodGluZztcXG4jZW5kaWZcXG4gICAgdmVjMyBfcmltTGlnaHRpbmcgPSBtaXgoX3N0YXRpY1JpbUxpZ2h0aW5nLCBfbWl4ZWRSaW1MaWdodGluZywgcmltTGlnaHRpbmdNaXgpO1xcbiAgICB2ZWMzIF9yaW1Db2xvciA9IHZSaW1Db2xvci5yZ2I7XFxuI2lmZGVmIFJJTVxcbiAgICBfcmltQ29sb3IgPSBfcmltQ29sb3IgKiB0ZXh0dXJlMkQocmltU2FtcGxlciwgdlJpbVVWICsgbWFpblV2KS5yZ2IgKiB2UmltSW5mb3MueTtcXG4jZW5kaWZcXG4gICAgdmVjMyBfcmltID0gcG93KGNsYW1wKDEuMCAtIGRvdCh3b3JsZE5vcm1hbCwgd29ybGRWaWV3KSArIHJpbUxpZnQsIDAuMCwgMS4wKSwgcmltRnJlc25lbFBvd2VyKSAqIF9yaW1Db2xvci5yZ2I7XFxuICAgIF9jb2wgKz0gbWl4KF9yaW0gKiBfcmltTGlnaHRpbmcsIHZlYzMoMC4wKSwgaXNPdXRsaW5lKTtcXG5cXG4gICAgLy8gYWRkaXRpdmUgbWF0Y2FwXFxuI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuI2Vsc2VcXG4jaWZkZWYgTUFUQ0FQXFxuICAgIHZlYzMgX3dvcmxkVmlld1VwID0gbm9ybWFsaXplKHZFeWVVcCAtIHdvcmxkVmlldyAqIGRvdCh3b3JsZFZpZXcsIHZFeWVVcCkpO1xcbiAgICB2ZWMzIF93b3JsZFZpZXdSaWdodCA9IG5vcm1hbGl6ZShjcm9zcyh3b3JsZFZpZXcsIF93b3JsZFZpZXdVcCkpO1xcbiAgICB2ZWMyIF9tYXRDYXBVdiA9IHZlYzIoZG90KF93b3JsZFZpZXdSaWdodCwgd29ybGROb3JtYWwpLCBkb3QoX3dvcmxkVmlld1VwLCB3b3JsZE5vcm1hbCkpICogMC41ICsgMC41O1xcbiAgICAvLyB1di55IGlzIHJldmVyc2VkXFxuICAgIF9tYXRDYXBVdi55ID0gKDEuMCAtIF9tYXRDYXBVdi55KTtcXG4gICAgdmVjMyBfbWF0Q2FwTGlnaHRpbmcgPSB0ZXh0dXJlMkQobWF0Q2FwU2FtcGxlciwgX21hdENhcFV2KS5yZ2IgKiB2TWF0Q2FwSW5mb3MueTtcXG4gICAgX2NvbCArPSBtaXgoX21hdENhcExpZ2h0aW5nLCB2ZWMzKDAuMCksIGlzT3V0bGluZSk7XFxuI2VuZGlmXFxuI2VuZGlmXFxuXFxuICAgIC8vIEVtaXNzaW9uXFxuI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuI2Vsc2VcXG4gICAgdmVjMyBfZW1pc3Npb24gPSB2RW1pc3NpdmVDb2xvci5yZ2I7XFxuI2lmZGVmIEVNSVNTSVZFXFxuICAgIF9lbWlzc2lvbiAqPSB0ZXh0dXJlMkQoZW1pc3NpdmVTYW1wbGVyLCBtYWluVXYpLnJnYiAqIHZFbWlzc2l2ZUluZm9zLnk7XFxuI2VuZGlmXFxuICAgIF9jb2wgKz0gbWl4KF9lbWlzc2lvbiwgdmVjMygwLjApLCBpc091dGxpbmUpO1xcbiNlbmRpZlxcblxcbiAgICBmbG9hdCBfYWxwaGEgPSAxLjA7XFxuXFxuI2lmIGRlZmluZWQoQUxQSEFCTEVORCkgfHwgZGVmaW5lZChBTFBIQVRFU1QpXFxuICAgIF9hbHBoYSA9IG1peChfbGl0LmEsIF9saXQuYSAqIHZPdXRsaW5lQ29sb3IuYSwgaXNPdXRsaW5lKTtcXG4jZW5kaWZcXG5cXG4gICAgLy8gb3V0bGluZVxcbiNpZmRlZiBNVE9PTl9PVVRMSU5FX0NPTE9SX0ZJWEVEXFxuICAgIF9jb2wgPSBtaXgoX2NvbCwgdk91dGxpbmVDb2xvci5yZ2IsIGlzT3V0bGluZSk7XFxuI2VsaWYgZGVmaW5lZChNVE9PTl9PVVRMSU5FX0NPTE9SX01JWEVEKVxcbiAgICBfY29sID0gbWl4KF9jb2wsIHZPdXRsaW5lQ29sb3IucmdiICogbWl4KHZlYzMoMS4wKSwgX2NvbCwgb3V0bGluZUxpZ2h0aW5nTWl4KSwgaXNPdXRsaW5lKTtcXG4jZWxzZVxcbiNlbmRpZlxcblxcbiAgICAvLyBkZWJ1Z1xcbiNpZmRlZiBNVE9PTl9ERUJVR19OT1JNQUxcXG4gICAgI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuICAgICAgICByZXR1cm4gdmVjNCgwLjApO1xcbiAgICAjZWxzZVxcbiAgICAgICAgcmV0dXJuIHZlYzQod29ybGROb3JtYWwgKiAwLjUgKyAwLjUsIF9saXQuYSk7XFxuICAgICNlbmRpZlxcbiNlbGlmIGRlZmluZWQoTVRPT05fREVCVUdfTElUU0hBREVSQVRFKVxcbiAgICAjaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4gICAgICAgIHJldHVybiB2ZWM0KDAuMCk7XFxuICAgICNlbHNlXFxuICAgICAgICByZXR1cm4gdmVjNChfbGlnaHRJbnRlbnNpdHksIF9saXQuYSk7XFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblxcbiAgICByZXR1cm4gdmVjNChfY29sLCBfYWxwaGEpO1xcbn1cXG5cIixtLkVmZmVjdC5JbmNsdWRlc1NoYWRlcnNTdG9yZS5tdG9vbkxpZ2h0RnJhZ21lbnQ9XCIjaWZkZWYgTElHSFR7WH1cXG4gICAgI2lmIGRlZmluZWQoU0hBRE9XT05MWSkgfHwgZGVmaW5lZChMSUdIVE1BUCkgJiYgZGVmaW5lZChMSUdIVE1BUEVYQ0xVREVEe1h9KSAmJiBkZWZpbmVkKExJR0hUTUFQTk9TUEVDVUxBUntYfSlcXG4gICAgICAgIC8vTm8gbGlnaHQgY2FsY3VsYXRpb25cXG4gICAgI2Vsc2VcXG4gICAgICAgICNpZmRlZiBQQlJcXG4gICAgICAgICAgICAvLyBDb21wdXRlIFByZSBMaWdodGluZyBpbmZvc1xcbiAgICAgICAgICAgICNpZmRlZiBTUE9UTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgcHJlSW5mbyA9IGNvbXB1dGVQb2ludEFuZFNwb3RQcmVMaWdodGluZ0luZm8obGlnaHR7WH0udkxpZ2h0RGF0YSwgdmlld0RpcmVjdGlvblcsIG5vcm1hbFcpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoUE9JTlRMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgcHJlSW5mbyA9IGNvbXB1dGVQb2ludEFuZFNwb3RQcmVMaWdodGluZ0luZm8obGlnaHR7WH0udkxpZ2h0RGF0YSwgdmlld0RpcmVjdGlvblcsIG5vcm1hbFcpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoSEVNSUxJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICBwcmVJbmZvID0gY29tcHV0ZUhlbWlzcGhlcmljUHJlTGlnaHRpbmdJbmZvKGxpZ2h0e1h9LnZMaWdodERhdGEsIHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXKTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKERJUkxJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICBwcmVJbmZvID0gY29tcHV0ZURpcmVjdGlvbmFsUHJlTGlnaHRpbmdJbmZvKGxpZ2h0e1h9LnZMaWdodERhdGEsIHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXKTtcXG4gICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICBwcmVJbmZvLk5kb3RWID0gTmRvdFY7XFxuXFxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBBdHRlbnVhdGlvbiBpbmZvc1xcbiAgICAgICAgICAgICNpZmRlZiBTUE9UTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgI2lmZGVmIExJR0hUX0ZBTExPRkZfR0xURntYfVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZl9HTFRGKHByZUluZm8ubGlnaHREaXN0YW5jZVNxdWFyZWQsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueSk7XFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uICo9IGNvbXB1dGVEaXJlY3Rpb25hbExpZ2h0RmFsbG9mZl9HTFRGKGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbi54eXosIHByZUluZm8uTCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi56LCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLncpO1xcbiAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKExJR0hUX0ZBTExPRkZfUEhZU0lDQUx7WH0pXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmX1BoeXNpY2FsKHByZUluZm8ubGlnaHREaXN0YW5jZVNxdWFyZWQpO1xcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiAqPSBjb21wdXRlRGlyZWN0aW9uYWxMaWdodEZhbGxvZmZfUGh5c2ljYWwobGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLnh5eiwgcHJlSW5mby5MLCBsaWdodHtYfS52TGlnaHREaXJlY3Rpb24udyk7XFxuICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoTElHSFRfRkFMTE9GRl9TVEFOREFSRHtYfSlcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmZfU3RhbmRhcmQocHJlSW5mby5saWdodE9mZnNldCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi54KTtcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gKj0gY29tcHV0ZURpcmVjdGlvbmFsTGlnaHRGYWxsb2ZmX1N0YW5kYXJkKGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbi54eXosIHByZUluZm8uTCwgbGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLncsIGxpZ2h0e1h9LnZMaWdodERhdGEudyk7XFxuICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmKHByZUluZm8ubGlnaHRPZmZzZXQsIHByZUluZm8ubGlnaHREaXN0YW5jZVNxdWFyZWQsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi55KTtcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gKj0gY29tcHV0ZURpcmVjdGlvbmFsTGlnaHRGYWxsb2ZmKGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbi54eXosIHByZUluZm8uTCwgbGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLncsIGxpZ2h0e1h9LnZMaWdodERhdGEudywgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi56LCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLncpO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFBPSU5UTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgICNpZmRlZiBMSUdIVF9GQUxMT0ZGX0dMVEZ7WH1cXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmZfR0xURihwcmVJbmZvLmxpZ2h0RGlzdGFuY2VTcXVhcmVkLCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLnkpO1xcbiAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKExJR0hUX0ZBTExPRkZfUEhZU0lDQUx7WH0pXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmX1BoeXNpY2FsKHByZUluZm8ubGlnaHREaXN0YW5jZVNxdWFyZWQpO1xcbiAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKExJR0hUX0ZBTExPRkZfU1RBTkRBUkR7WH0pXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmX1N0YW5kYXJkKHByZUluZm8ubGlnaHRPZmZzZXQsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueCk7XFxuICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmKHByZUluZm8ubGlnaHRPZmZzZXQsIHByZUluZm8ubGlnaHREaXN0YW5jZVNxdWFyZWQsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi55KTtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IDEuMDtcXG4gICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAvLyBTaW11bGF0ZXMgTGlnaHQgcmFkaXVzIGZvciBkaWZmdXNlIGFuZCBzcGVjIHRlcm1cXG4gICAgICAgICAgICAvLyBjbGVhciBjb2F0IGlzIHVzaW5nIGEgZGVkaWNhdGVkIHJvdWdobmVzc1xcbiAgICAgICAgICAgICNpZmRlZiBIRU1JTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgcHJlSW5mby5yb3VnaG5lc3MgPSByb3VnaG5lc3M7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgcHJlSW5mby5yb3VnaG5lc3MgPSBhZGp1c3RSb3VnaG5lc3NGcm9tTGlnaHRQcm9wZXJ0aWVzKHJvdWdobmVzcywgbGlnaHR7WH0udkxpZ2h0U3BlY3VsYXIuYSwgcHJlSW5mby5saWdodERpc3RhbmNlKTtcXG4gICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAvLyBEaWZmdXNlIGNvbnRyaWJ1dGlvblxcbiAgICAgICAgICAgICNpZmRlZiBIRU1JTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgaW5mby5kaWZmdXNlID0gY29tcHV0ZUhlbWlzcGhlcmljRGlmZnVzZUxpZ2h0aW5nKHByZUluZm8sIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiLCBsaWdodHtYfS52TGlnaHRHcm91bmQpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU1NfVFJBTlNMVUNFTkNZKVxcbiAgICAgICAgICAgICAgICBpbmZvLmRpZmZ1c2UgPSBjb21wdXRlRGlmZnVzZUFuZFRyYW5zbWl0dGVkTGlnaHRpbmcocHJlSW5mbywgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IsIHN1YlN1cmZhY2VPdXQudHJhbnNtaXR0YW5jZSk7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgaW5mby5kaWZmdXNlID0gY29tcHV0ZURpZmZ1c2VMaWdodGluZyhwcmVJbmZvLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYik7XFxuICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgLy8gU3BlY3VsYXIgY29udHJpYnV0aW9uXFxuICAgICAgICAgICAgI2lmZGVmIFNQRUNVTEFSVEVSTVxcbiAgICAgICAgICAgICAgICAjaWZkZWYgQU5JU09UUk9QSUNcXG4gICAgICAgICAgICAgICAgICAgIGluZm8uc3BlY3VsYXIgPSBjb21wdXRlQW5pc290cm9waWNTcGVjdWxhckxpZ2h0aW5nKHByZUluZm8sIHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXLCBhbmlzb3Ryb3BpY091dC5hbmlzb3Ryb3BpY1RhbmdlbnQsIGFuaXNvdHJvcGljT3V0LmFuaXNvdHJvcGljQml0YW5nZW50LCBhbmlzb3Ryb3BpY091dC5hbmlzb3Ryb3B5LCBjbGVhcmNvYXRPdXQuc3BlY3VsYXJFbnZpcm9ubWVudFIwLCBzcGVjdWxhckVudmlyb25tZW50UjkwLCBBQVJvdWdobmVzc0ZhY3RvcnMueCwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IpO1xcbiAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgaW5mby5zcGVjdWxhciA9IGNvbXB1dGVTcGVjdWxhckxpZ2h0aW5nKHByZUluZm8sIG5vcm1hbFcsIGNsZWFyY29hdE91dC5zcGVjdWxhckVudmlyb25tZW50UjAsIHNwZWN1bGFyRW52aXJvbm1lbnRSOTAsIEFBUm91Z2huZXNzRmFjdG9ycy54LCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYik7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgIC8vIFNoZWVuIGNvbnRyaWJ1dGlvblxcbiAgICAgICAgICAgICNpZmRlZiBTSEVFTlxcbiAgICAgICAgICAgICAgICAjaWZkZWYgU0hFRU5fTElOS1dJVEhBTEJFRE9cXG4gICAgICAgICAgICAgICAgICAgIC8vIEJFIENhcmVmdWxsOiBTaGVlbiBpbnRlbnNpdHkgaXMgcmVwbGFjaW5nIHRoZSByb3VnaG5lc3MgdmFsdWUuXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLnJvdWdobmVzcyA9IHNoZWVuT3V0LnNoZWVuSW50ZW5zaXR5O1xcbiAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgI2lmZGVmIEhFTUlMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZUluZm8ucm91Z2huZXNzID0gc2hlZW5PdXQuc2hlZW5Sb3VnaG5lc3M7XFxuICAgICAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZUluZm8ucm91Z2huZXNzID0gYWRqdXN0Um91Z2huZXNzRnJvbUxpZ2h0UHJvcGVydGllcyhzaGVlbk91dC5zaGVlblJvdWdobmVzcywgbGlnaHR7WH0udkxpZ2h0U3BlY3VsYXIuYSwgcHJlSW5mby5saWdodERpc3RhbmNlKTtcXG4gICAgICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgaW5mby5zaGVlbiA9IGNvbXB1dGVTaGVlbkxpZ2h0aW5nKHByZUluZm8sIG5vcm1hbFcsIHNoZWVuT3V0LnNoZWVuQ29sb3IsIHNwZWN1bGFyRW52aXJvbm1lbnRSOTAsIEFBUm91Z2huZXNzRmFjdG9ycy54LCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYik7XFxuICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgLy8gQ2xlYXIgQ29hdCBjb250cmlidXRpb25cXG4gICAgICAgICAgICAjaWZkZWYgQ0xFQVJDT0FUXFxuICAgICAgICAgICAgICAgIC8vIFNpbXVsYXRlcyBMaWdodCByYWRpdXNcXG4gICAgICAgICAgICAgICAgI2lmZGVmIEhFTUlMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5yb3VnaG5lc3MgPSBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0Um91Z2huZXNzO1xcbiAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5yb3VnaG5lc3MgPSBhZGp1c3RSb3VnaG5lc3NGcm9tTGlnaHRQcm9wZXJ0aWVzKGNsZWFyY29hdE91dC5jbGVhckNvYXRSb3VnaG5lc3MsIGxpZ2h0e1h9LnZMaWdodFNwZWN1bGFyLmEsIHByZUluZm8ubGlnaHREaXN0YW5jZSk7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgICAgICBpbmZvLmNsZWFyQ29hdCA9IGNvbXB1dGVDbGVhckNvYXRMaWdodGluZyhwcmVJbmZvLCBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0Tm9ybWFsVywgY2xlYXJjb2F0T3V0LmNsZWFyQ29hdEFBUm91Z2huZXNzRmFjdG9ycy54LCBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0SW50ZW5zaXR5LCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYik7XFxuXFxuICAgICAgICAgICAgICAgICNpZmRlZiBDTEVBUkNPQVRfVElOVFxcbiAgICAgICAgICAgICAgICAgICAgLy8gQWJzb3JwdGlvblxcbiAgICAgICAgICAgICAgICAgICAgYWJzb3JwdGlvbiA9IGNvbXB1dGVDbGVhckNvYXRMaWdodGluZ0Fic29ycHRpb24oY2xlYXJjb2F0T3V0LmNsZWFyQ29hdE5kb3RWUmVmcmFjdCwgcHJlSW5mby5MLCBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0Tm9ybWFsVywgY2xlYXJjb2F0T3V0LmNsZWFyQ29hdENvbG9yLCBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0VGhpY2tuZXNzLCBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0SW50ZW5zaXR5KTtcXG4gICAgICAgICAgICAgICAgICAgIGluZm8uZGlmZnVzZSAqPSBhYnNvcnB0aW9uO1xcbiAgICAgICAgICAgICAgICAgICAgI2lmZGVmIFNQRUNVTEFSVEVSTVxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uc3BlY3VsYXIgKj0gYWJzb3JwdGlvbjtcXG4gICAgICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgZW5lcmd5IGNvbnNlcnZhdGlvbiBvbiBkaWZmdXNlIGFuZCBzcGVjdWxhciB0ZXJtLlxcbiAgICAgICAgICAgICAgICBpbmZvLmRpZmZ1c2UgKj0gaW5mby5jbGVhckNvYXQudztcXG4gICAgICAgICAgICAgICAgI2lmZGVmIFNQRUNVTEFSVEVSTVxcbiAgICAgICAgICAgICAgICAgICAgaW5mby5zcGVjdWxhciAqPSBpbmZvLmNsZWFyQ29hdC53O1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgI2lmZGVmIFNIRUVOXFxuICAgICAgICAgICAgICAgICAgICBpbmZvLnNoZWVuICo9IGluZm8uY2xlYXJDb2F0Lnc7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAjaWZkZWYgU1BPVExJR0hUe1h9XFxuICAgICAgICAgICAgICAgIGluZm8gPSBjb21wdXRlU3BvdExpZ2h0aW5nKHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXLCBsaWdodHtYfS52TGlnaHREYXRhLCBsaWdodHtYfS52TGlnaHREaXJlY3Rpb24sIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiLCBsaWdodHtYfS52TGlnaHRTcGVjdWxhci5yZ2IsIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UuYSwgZ2xvc3NpbmVzcyk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChIRU1JTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgIGluZm8gPSBjb21wdXRlSGVtaXNwaGVyaWNMaWdodGluZyh2aWV3RGlyZWN0aW9uVywgbm9ybWFsVywgbGlnaHR7WH0udkxpZ2h0RGF0YSwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IsIGxpZ2h0e1h9LnZMaWdodFNwZWN1bGFyLnJnYiwgbGlnaHR7WH0udkxpZ2h0R3JvdW5kLCBnbG9zc2luZXNzKTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFBPSU5UTElHSFR7WH0pIHx8IGRlZmluZWQoRElSTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgIGluZm8gPSBjb21wdXRlTGlnaHRpbmcodmlld0RpcmVjdGlvblcsIG5vcm1hbFcsIGxpZ2h0e1h9LnZMaWdodERhdGEsIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiLCBsaWdodHtYfS52TGlnaHRTcGVjdWxhci5yZ2IsIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UuYSwgZ2xvc3NpbmVzcyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICNpZmRlZiBQUk9KRUNURURMSUdIVFRFWFRVUkV7WH1cXG4gICAgICAgICAgICBpbmZvLmRpZmZ1c2UgKj0gY29tcHV0ZVByb2plY3Rpb25UZXh0dXJlRGlmZnVzZUxpZ2h0aW5nKHByb2plY3Rpb25MaWdodFNhbXBsZXJ7WH0sIHRleHR1cmVQcm9qZWN0aW9uTWF0cml4e1h9KTtcXG4gICAgICAgICNlbmRpZlxcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmZGVmIFNIQURPV3tYfVxcbiAgICAgICAgI2lmZGVmIFNIQURPV0NTTXtYfVxcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgU0hBRE9XQ1NNTlVNX0NBU0NBREVTe1h9OyBpKyspXFxuICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgICAjaWZkZWYgU0hBRE9XQ1NNX1JJR0hUSEFOREVEe1h9XFxuICAgICAgICAgICAgICAgICAgICBkaWZme1h9ID0gdmlld0ZydXN0dW1ae1h9W2ldICsgdlBvc2l0aW9uRnJvbUNhbWVyYXtYfS56O1xcbiAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgZGlmZntYfSA9IHZpZXdGcnVzdHVtWntYfVtpXSAtIHZQb3NpdGlvbkZyb21DYW1lcmF7WH0uejtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgIGlmIChkaWZme1h9ID49IDAuKSB7XFxuICAgICAgICAgICAgICAgICAgICBpbmRleHtYfSA9IGk7XFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAjaWZkZWYgU0hBRE9XQ1NNVVNFU0hBRE9XTUFYWntYfVxcbiAgICAgICAgICAgIGlmIChpbmRleHtYfSA+PSAwKVxcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XUENGe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XTE9XUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDRjEoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XTUVESVVNUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDRjMoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55eiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENGNShmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnl6LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV1BDU1N7WH0pXFxuICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dMT1dRVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENTUzE2KGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53LCBsaWdodFNpemVVVkNvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBkZXB0aENvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBwZW51bWJyYURhcmtuZXNze1h9KTtcXG4gICAgICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XTUVESVVNUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDU1MzMihmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udywgbGlnaHRTaXplVVZDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgZGVwdGhDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgcGVudW1icmFEYXJrbmVzc3tYfSk7XFxuICAgICAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENTUzY0KGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53LCBsaWdodFNpemVVVkNvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBkZXB0aENvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBwZW51bWJyYURhcmtuZXNze1h9KTtcXG4gICAgICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd0NTTShmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAgICAgI2lmZGVmIFNIQURPV0NTTURFQlVHe1h9XFxuICAgICAgICAgICAgICAgICAgICBzaGFkb3dEZWJ1Z3tYfSA9IHZlYzMoc2hhZG93KSAqIHZDYXNjYWRlQ29sb3JzTXVsdGlwbGllcntYfVtpbmRleHtYfV07XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgICAgICAjaWZuZGVmIFNIQURPV0NTTU5PQkxFTkR7WH1cXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IGZydXN0dW1MZW5ndGggPSBmcnVzdHVtTGVuZ3Roc3tYfVtpbmRleHtYfV07XFxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBkaWZmUmF0aW8gPSBjbGFtcChkaWZme1h9IC8gZnJ1c3R1bUxlbmd0aCwgMC4sIDEuKSAqIGNhc2NhZGVCbGVuZEZhY3RvcntYfTtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleHtYfSA8IChTSEFET1dDU01OVU1fQ0FTQ0FERVN7WH0gLSAxKSAmJiBkaWZmUmF0aW8gPCAxLilcXG4gICAgICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleHtYfSArPSAxO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IG5leHRTaGFkb3cgPSAwLjtcXG4gICAgICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dQQ0Z7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0xPV1FVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ0YxKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XTUVESVVNUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDRjMoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55eiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ0Y1KGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueXosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV1BDU1N7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0xPV1FVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ1NTMTYoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncsIGxpZ2h0U2l6ZVVWQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIGRlcHRoQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIHBlbnVtYnJhRGFya25lc3N7WH0pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV01FRElVTVFVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ1NTMzIoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncsIGxpZ2h0U2l6ZVVWQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIGRlcHRoQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIHBlbnVtYnJhRGFya25lc3N7WH0pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENTUzY0KGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53LCBsaWdodFNpemVVVkNvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBkZXB0aENvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBwZW51bWJyYURhcmtuZXNze1h9KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNoYWRvdyA9IGNvbXB1dGVTaGFkb3dDU00oZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBtaXgobmV4dFNoYWRvdywgc2hhZG93LCBkaWZmUmF0aW8pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICNpZmRlZiBTSEFET1dDU01ERUJVR3tYfVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dEZWJ1Z3tYfSA9IG1peCh2ZWMzKG5leHRTaGFkb3cpICogdkNhc2NhZGVDb2xvcnNNdWx0aXBsaWVye1h9W2luZGV4e1h9XSwgc2hhZG93RGVidWd7WH0sIGRpZmZSYXRpbyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XQ0xPU0VFU017WH0pXFxuICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XQ1VCRXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDbG9zZUVTTUN1YmUobGlnaHR7WH0udkxpZ2h0RGF0YS54eXosIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LmRlcHRoVmFsdWVzKTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENsb3NlRVNNKHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XRVNNe1h9KVxcbiAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0NVQkV7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoRVNNQ3ViZShsaWdodHtYfS52TGlnaHREYXRhLnh5eiwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uZGVwdGhWYWx1ZXMpO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoRVNNKHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XUE9JU1NPTntYfSlcXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dDVUJFe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBvaXNzb25TYW1wbGluZ0N1YmUobGlnaHR7WH0udkxpZ2h0RGF0YS54eXosIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LmRlcHRoVmFsdWVzKTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBvaXNzb25TYW1wbGluZyh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV1BDRntYfSlcXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dMT1dRVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBDRjEodlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XTUVESVVNUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQQ0YzKHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55eiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQQ0Y1KHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55eiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV1BDU1N7WH0pXFxuICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XTE9XUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQQ1NTMTYodlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dNRURJVU1RVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBDU1MzMih2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBDU1M2NCh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbHNlXFxuICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XQ1VCRXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd0N1YmUobGlnaHR7WH0udkxpZ2h0RGF0YS54eXosIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LmRlcHRoVmFsdWVzKTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93KHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgI2lmZGVmIFNIQURPV09OTFlcXG4gICAgICAgICAgICAjaWZuZGVmIFNIQURPV0lOVVNFXFxuICAgICAgICAgICAgICAgICNkZWZpbmUgU0hBRE9XSU5VU0VcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICBnbG9iYWxTaGFkb3cgKz0gc2hhZG93O1xcbiAgICAgICAgICAgIHNoYWRvd0xpZ2h0Q291bnQgKz0gMS4wO1xcbiAgICAgICAgI2VuZGlmXFxuICAgICNlbHNlXFxuICAgICAgICBzaGFkb3cgPSAxLjtcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZm5kZWYgU0hBRE9XT05MWVxcbiAgICAgICAgI2lmZGVmIENVU1RPTVVTRVJMSUdIVElOR1xcbiAgICAgICAgICAgIC8vIENvbXB1dGUgYW5kIHJlZmxlY3QgTVRvb24gbGlnaHRpbmdcXG4gICAgICAgICAgICAjaWZkZWYgU1BPVExJR0hUe1h9XFxuICAgICAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uID0gY29tcHV0ZVNwb3RMaWdodERpcmVjdGlvbihsaWdodHtYfS52TGlnaHREYXRhKTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKEhFTUlMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24gPSBjb21wdXRlSGVtaXNwaGVyaWNMaWdodERpcmVjdGlvbihsaWdodHtYfS52TGlnaHREYXRhLCBub3JtYWxXLnh5eik7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChQT0lOVExJR0hUe1h9KSB8fCBkZWZpbmVkKERJUkxJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICBsaWdodERpcmVjdGlvbiA9IGNvbXB1dGVMaWdodERpcmVjdGlvbihsaWdodHtYfS52TGlnaHREYXRhKTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICBtdG9vbkRpZmZ1c2UgPSBjb21wdXRlTVRvb25EaWZmdXNlTGlnaHRpbmcodmlld0RpcmVjdGlvblcueHl6LCBub3JtYWxXLnh5eiwgbWFpblV2LCBsaWdodERpcmVjdGlvbiwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2JhLCBzaGFkb3cpO1xcbiAgICAgICAgICAgIGRpZmZ1c2VCYXNlICs9IG10b29uRGlmZnVzZS5yZ2I7XFxuICAgICAgICAgICAgYWxwaGEgPSBtaW4oYWxwaGEsIG10b29uRGlmZnVzZS5hKTtcXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChBTFBIQVRFU1QpICYmIEFMUEhBVEVTVFxcbiAgICAgICAgICAgICAgICBhbHBoYSA9IChhbHBoYSAtIGFscGhhQ3V0T2ZmKSAvIG1heChmd2lkdGgoYWxwaGEpLCBFUFNfQ09MKSArIDAuNTsgLy8gQWxwaGEgdG8gQ292ZXJhZ2VcXG4gICAgICAgICAgICAgICAgaWYgKGFscGhhIDwgYWxwaGFDdXRPZmYpIHtcXG4gICAgICAgICAgICAgICAgICAgIGRpc2NhcmQ7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgYWxwaGEgPSAxLjA7IC8vIERpc2NhcmRlZCwgb3RoZXJ3aXNlIGl0IHNob3VsZCBiZSBhc3N1bWVkIHRvIGhhdmUgZnVsbCBvcGFjaXR5XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgaWYgKGFscGhhIC0gMC4wMDAxIDwgMC4wMDApIHsgLy8gU2xpZ2h0bHkgaW1wcm92ZXMgcmVuZGVyaW5nIHdpdGggbGF5ZXJlZCB0cmFuc3BhcmVuY3lcXG4gICAgICAgICAgICAgICAgICAgIGRpc2NhcmQ7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbGlmIGRlZmluZWQoTElHSFRNQVApICYmIGRlZmluZWQoTElHSFRNQVBFWENMVURFRHtYfSlcXG4gICAgICAgICAgICBkaWZmdXNlQmFzZSArPSBsaWdodG1hcENvbG9yLnJnYiAqIHNoYWRvdztcXG4gICAgICAgICAgICAjaWZkZWYgU1BFQ1VMQVJURVJNXFxuICAgICAgICAgICAgICAgICNpZm5kZWYgTElHSFRNQVBOT1NQRUNVTEFSe1h9XFxuICAgICAgICAgICAgICAgICAgICBzcGVjdWxhckJhc2UgKz0gaW5mby5zcGVjdWxhciAqIHNoYWRvdyAqIGxpZ2h0bWFwQ29sb3IucmdiO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjaWZkZWYgQ0xFQVJDT0FUXFxuICAgICAgICAgICAgICAgICNpZm5kZWYgTElHSFRNQVBOT1NQRUNVTEFSe1h9XFxuICAgICAgICAgICAgICAgICAgICBjbGVhckNvYXRCYXNlICs9IGluZm8uY2xlYXJDb2F0LnJnYiAqIHNoYWRvdyAqIGxpZ2h0bWFwQ29sb3IucmdiO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjaWZkZWYgU0hFRU5cXG4gICAgICAgICAgICAgICAgI2lmbmRlZiBMSUdIVE1BUE5PU1BFQ1VMQVJ7WH1cXG4gICAgICAgICAgICAgICAgICAgIHNoZWVuQmFzZSArPSBpbmZvLnNoZWVuLnJnYiAqIHNoYWRvdztcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICNpZmRlZiBTSEFET1dDU01ERUJVR3tYfVxcbiAgICAgICAgICAgICAgICBkaWZmdXNlQmFzZSArPSBpbmZvLmRpZmZ1c2UgKiBzaGFkb3dEZWJ1Z3tYfTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBkaWZmdXNlQmFzZSArPSBpbmZvLmRpZmZ1c2UgKiBzaGFkb3c7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2lmZGVmIFNQRUNVTEFSVEVSTVxcbiAgICAgICAgICAgICAgICBzcGVjdWxhckJhc2UgKz0gaW5mby5zcGVjdWxhciAqIHNoYWRvdztcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjaWZkZWYgQ0xFQVJDT0FUXFxuICAgICAgICAgICAgICAgIGNsZWFyQ29hdEJhc2UgKz0gaW5mby5jbGVhckNvYXQucmdiICogc2hhZG93O1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNpZmRlZiBTSEVFTlxcbiAgICAgICAgICAgICAgICBzaGVlbkJhc2UgKz0gaW5mby5zaGVlbi5yZ2IgKiBzaGFkb3c7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZW5kaWZcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXCIsbS5FZmZlY3QuSW5jbHVkZXNTaGFkZXJzU3RvcmUubXRvb25CdW1wRnJhZ21lbnQ9XCIvLyByZXBsYWNlIHZCdW1wVVYgdG8gbWFpblV2XFxudmVjMiB1dk9mZnNldCA9IHZlYzIoMC4wLCAwLjApO1xcblxcbiNpZiBkZWZpbmVkKEJVTVApIHx8IGRlZmluZWQoUEFSQUxMQVgpIHx8IGRlZmluZWQoREVUQUlMKVxcbiAgICAjaWZkZWYgTk9STUFMWFlTQ0FMRVxcbiAgICAgICAgZmxvYXQgbm9ybWFsU2NhbGUgPSAxLjA7XFxuICAgICNlbGlmIGRlZmluZWQoQlVNUClcXG4gICAgICAgIGZsb2F0IG5vcm1hbFNjYWxlID0gdkJ1bXBJbmZvcy55O1xcbiAgICAjZWxzZVxcbiAgICAgICAgZmxvYXQgbm9ybWFsU2NhbGUgPSAxLjA7XFxuICAgICNlbmRpZlxcblxcbiAgICAjaWYgZGVmaW5lZChUQU5HRU5UKSAmJiBkZWZpbmVkKE5PUk1BTClcXG4gICAgICAgIG1hdDMgVEJOID0gdlRCTjtcXG4gICAgI2VsaWYgZGVmaW5lZChCVU1QKVxcbiAgICAgICAgLy8gdmVjMiBUQk5VViA9IGdsX0Zyb250RmFjaW5nID8gdkJ1bXBVViA6IC12QnVtcFVWO1xcbiAgICAgICAgdmVjMiBUQk5VViA9IGdsX0Zyb250RmFjaW5nID8gbWFpblV2IDogLW1haW5VdjtcXG4gICAgICAgIG1hdDMgVEJOID0gY290YW5nZW50X2ZyYW1lKG5vcm1hbFcgKiBub3JtYWxTY2FsZSwgdlBvc2l0aW9uVywgVEJOVVYsIHZUYW5nZW50U3BhY2VQYXJhbXMpO1xcbiAgICAjZWxzZVxcbiAgICAgICAgdmVjMiBUQk5VViA9IGdsX0Zyb250RmFjaW5nID8gdkRldGFpbFVWIDogLXZEZXRhaWxVVjtcXG4gICAgICAgIG1hdDMgVEJOID0gY290YW5nZW50X2ZyYW1lKG5vcm1hbFcgKiBub3JtYWxTY2FsZSwgdlBvc2l0aW9uVywgVEJOVVYsIHZlYzIoMS4sIDEuKSk7XFxuICAgICNlbmRpZlxcbiNlbGlmIGRlZmluZWQoQU5JU09UUk9QSUMpXFxuICAgICNpZiBkZWZpbmVkKFRBTkdFTlQpICYmIGRlZmluZWQoTk9STUFMKVxcbiAgICAgICAgbWF0MyBUQk4gPSB2VEJOO1xcbiAgICAjZWxzZVxcbiAgICAgICAgLy8gZmxpcCB0aGUgdXYgZm9yIHRoZSBiYWNrZmFjZVxcbiAgICAgICAgdmVjMiBUQk5VViA9IGdsX0Zyb250RmFjaW5nID8gdk1haW5VVjEgOiAtdk1haW5VVjE7XFxuICAgICAgICBtYXQzIFRCTiA9IGNvdGFuZ2VudF9mcmFtZShub3JtYWxXLCB2UG9zaXRpb25XLCBUQk5VViwgdmVjMigxLiwgMS4pKTtcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXFxuI2lmZGVmIFBBUkFMTEFYXFxuICAgIG1hdDMgaW52VEJOID0gdHJhbnNwb3NlTWF0MyhUQk4pO1xcblxcbiAgICAjaWZkZWYgUEFSQUxMQVhPQ0NMVVNJT05cXG4gICAgICAgIC8vIHV2T2Zmc2V0ID0gcGFyYWxsYXhPY2NsdXNpb24oaW52VEJOICogLXZpZXdEaXJlY3Rpb25XLCBpbnZUQk4gKiBub3JtYWxXLCB2QnVtcFVWLCB2QnVtcEluZm9zLnopO1xcbiAgICAgICAgdXZPZmZzZXQgPSBwYXJhbGxheE9jY2x1c2lvbihpbnZUQk4gKiAtdmlld0RpcmVjdGlvblcsIGludlRCTiAqIG5vcm1hbFcsIG1haW5VdiwgdkJ1bXBJbmZvcy56KTtcXG4gICAgI2Vsc2VcXG4gICAgICAgIHV2T2Zmc2V0ID0gcGFyYWxsYXhPZmZzZXQoaW52VEJOICogdmlld0RpcmVjdGlvblcsIHZCdW1wSW5mb3Mueik7XFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblxcbiNpZmRlZiBERVRBSUxcXG4gICAgdmVjNCBkZXRhaWxDb2xvciA9IHRleHR1cmUyRChkZXRhaWxTYW1wbGVyLCB2RGV0YWlsVVYgKyB1dk9mZnNldCk7XFxuICAgIHZlYzIgZGV0YWlsTm9ybWFsUkcgPSBkZXRhaWxDb2xvci53eSAqIDIuMCAtIDEuMDtcXG4gICAgZmxvYXQgZGV0YWlsTm9ybWFsQiA9IHNxcnQoMS4gLSBzYXR1cmF0ZShkb3QoZGV0YWlsTm9ybWFsUkcsIGRldGFpbE5vcm1hbFJHKSkpO1xcbiAgICB2ZWMzIGRldGFpbE5vcm1hbCA9IHZlYzMoZGV0YWlsTm9ybWFsUkcsIGRldGFpbE5vcm1hbEIpO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBCVU1QXFxuICAgICNpZmRlZiBPQkpFQ1RTUEFDRV9OT1JNQUxNQVBcXG4gICAgICAgIC8vIG5vcm1hbFcgPSBub3JtYWxpemUodGV4dHVyZTJEKGJ1bXBTYW1wbGVyLCB2QnVtcFVWKS54eXogICogMi4wIC0gMS4wKTtcXG4gICAgICAgIG5vcm1hbFcgPSBub3JtYWxpemUodGV4dHVyZTJEKGJ1bXBTYW1wbGVyLCBtYWluVXYpLnh5eiAgKiAyLjAgLSAxLjApO1xcbiAgICAgICAgbm9ybWFsVyA9IG5vcm1hbGl6ZShtYXQzKG5vcm1hbE1hdHJpeCkgKiBub3JtYWxXKTtcXG4gICAgI2VsaWYgIWRlZmluZWQoREVUQUlMKVxcbiAgICAgICAgLy8gbm9ybWFsVyA9IHBlcnR1cmJOb3JtYWwoVEJOLCB0ZXh0dXJlMkQoYnVtcFNhbXBsZXIsIHZCdW1wVVYgKyB1dk9mZnNldCkueHl6LCB2QnVtcEluZm9zLnkpO1xcbiAgICAgICAgbm9ybWFsVyA9IHBlcnR1cmJOb3JtYWwoVEJOLCB0ZXh0dXJlMkQoYnVtcFNhbXBsZXIsIG1haW5VdiArIHV2T2Zmc2V0KS54eXosIHZCdW1wSW5mb3MueSk7XFxuICAgICNlbHNlXFxuICAgICAgICAvLyB2ZWMzIGJ1bXBOb3JtYWwgPSB0ZXh0dXJlMkQoYnVtcFNhbXBsZXIsIHZCdW1wVVYgKyB1dk9mZnNldCkueHl6ICogMi4wIC0gMS4wO1xcbiAgICAgICAgdmVjMyBidW1wTm9ybWFsID0gdGV4dHVyZTJEKGJ1bXBTYW1wbGVyLCBtYWluVXYgKyB1dk9mZnNldCkueHl6ICogMi4wIC0gMS4wO1xcbiAgICAgICAgLy8gUmVmZXJlbmNlIGZvciBub3JtYWwgYmxlbmRpbmc6IGh0dHBzOi8vYmxvZy5zZWxmc2hhZG93LmNvbS9wdWJsaWNhdGlvbnMvYmxlbmRpbmctaW4tZGV0YWlsL1xcbiAgICAgICAgI2lmIERFVEFJTF9OT1JNQUxCTEVORE1FVEhPRCA9PSAwIC8vIHdoaXRlb3V0XFxuICAgICAgICAgICAgZGV0YWlsTm9ybWFsLnh5ICo9IHZEZXRhaWxJbmZvcy56O1xcbiAgICAgICAgICAgIHZlYzMgYmxlbmRlZE5vcm1hbCA9IG5vcm1hbGl6ZSh2ZWMzKGJ1bXBOb3JtYWwueHkgKyBkZXRhaWxOb3JtYWwueHksIGJ1bXBOb3JtYWwueiAqIGRldGFpbE5vcm1hbC56KSk7XFxuICAgICAgICAjZWxpZiBERVRBSUxfTk9STUFMQkxFTkRNRVRIT0QgPT0gMSAvLyBSTk1cXG4gICAgICAgICAgICBkZXRhaWxOb3JtYWwueHkgKj0gdkRldGFpbEluZm9zLno7XFxuICAgICAgICAgICAgYnVtcE5vcm1hbCArPSB2ZWMzKDAuMCwgMC4wLCAxLjApO1xcbiAgICAgICAgICAgIGRldGFpbE5vcm1hbCAqPSB2ZWMzKC0xLjAsIC0xLjAsIDEuMCk7XFxuICAgICAgICAgICAgdmVjMyBibGVuZGVkTm9ybWFsID0gYnVtcE5vcm1hbCAqIGRvdChidW1wTm9ybWFsLCBkZXRhaWxOb3JtYWwpIC8gYnVtcE5vcm1hbC56IC0gZGV0YWlsTm9ybWFsO1xcbiAgICAgICAgI2VuZGlmXFxuICAgICAgICBub3JtYWxXID0gcGVydHVyYk5vcm1hbEJhc2UoVEJOLCBibGVuZGVkTm9ybWFsLCB2QnVtcEluZm9zLnkpO1xcbiAgICAjZW5kaWZcXG4jZWxpZiBkZWZpbmVkKERFVEFJTClcXG4gICAgICAgIGRldGFpbE5vcm1hbC54eSAqPSB2RGV0YWlsSW5mb3MuejtcXG4gICAgICAgIG5vcm1hbFcgPSBwZXJ0dXJiTm9ybWFsQmFzZShUQk4sIGRldGFpbE5vcm1hbCwgdkRldGFpbEluZm9zLnopO1xcbiNlbmRpZlxcblwiLG0uRWZmZWN0LlNoYWRlcnNTdG9yZS5tdG9vblZlcnRleFNoYWRlcj1cIi8vIGl0IGlzIGJhc2VkIG9uIGRlZmF1bHQudmVydGV4LmZ4XFxuLy8gVGhpcyBpbmNsdWRlIGlzIHNwZWNpYWwsIGl0IHdpbGwgYmUgcmVwbGFjZWQgdG8gVWJvRGVjbGFyYXRpb24oV2ViR0wyKSBvciBWZXJ0ZXhEZWNsYXJhdGlvbihXZWJHTDEpLlxcbi8vIEBzZWUgZWZmZWN0LnRzXFxuI2luY2x1ZGU8X19kZWNsX19tdG9vblZlcnRleD5cXG5cXG4vLyBBdHRyaWJ1dGVzXFxuXFxuI2RlZmluZSBDVVNUT01fVkVSVEVYX0JFR0lOXFxuXFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XFxuI2lmZGVmIE5PUk1BTFxcbmF0dHJpYnV0ZSB2ZWMzIG5vcm1hbDtcXG4jZW5kaWZcXG4jaWZkZWYgVEFOR0VOVFxcbmF0dHJpYnV0ZSB2ZWM0IHRhbmdlbnQ7XFxuI2VuZGlmXFxuI2lmZGVmIFVWMVxcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbiNlbmRpZlxcbiNpbmNsdWRlPHV2QXR0cmlidXRlRGVjbGFyYXRpb24+WzIuLjddXFxuI2lmZGVmIFZFUlRFWENPTE9SXFxuYXR0cmlidXRlIHZlYzQgY29sb3I7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8aGVscGVyRnVuY3Rpb25zPlxcblxcbiNpbmNsdWRlPGJvbmVzRGVjbGFyYXRpb24+XFxuI2luY2x1ZGU8YmFrZWRWZXJ0ZXhBbmltYXRpb25EZWNsYXJhdGlvbj5cXG5cXG4vLyBVbmlmb3Jtc1xcbiNpbmNsdWRlPGluc3RhbmNlc0RlY2xhcmF0aW9uPlxcbiNpbmNsdWRlPHByZVBhc3NWZXJ0ZXhEZWNsYXJhdGlvbj5cXG5cXG4jaW5jbHVkZTxtYWluVVZWYXJ5aW5nRGVjbGFyYXRpb24+WzEuLjddXFxuXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sRElGRlVTRSxfVkFSWUlOR05BTUVfLERpZmZ1c2UpXFxuLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLERFVEFJTCxfVkFSWUlOR05BTUVfLERldGFpbClcXG4vLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sQU1CSUVOVCxfVkFSWUlOR05BTUVfLEFtYmllbnQpXFxuLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLE9QQUNJVFksX1ZBUllJTkdOQU1FXyxPcGFjaXR5KVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLEVNSVNTSVZFLF9WQVJZSU5HTkFNRV8sRW1pc3NpdmUpXFxuLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLExJR0hUTUFQLF9WQVJZSU5HTkFNRV8sTGlnaHRtYXApXFxuLy8gIyBpZiBkZWZpbmVkKFNQRUNVTEFSVEVSTSlcXG4vLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sU1BFQ1VMQVIsX1ZBUllJTkdOQU1FXyxTcGVjdWxhcilcXG4vLyAjIGVuZGlmXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sQlVNUCxfVkFSWUlOR05BTUVfLEJ1bXApXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sU0hBREUsX1ZBUllJTkdOQU1FXyxTaGFkZSlcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxSRUNFSVZFX1NIQURPVyxfVkFSWUlOR05BTUVfLFJlY2VpdmVTaGFkb3cpXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sU0hBRElOR19HUkFERSxfVkFSWUlOR05BTUVfLFNoYWRpbmdHcmFkZSlcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxSSU0sX1ZBUllJTkdOQU1FXyxSaW0pXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sTUFUQ0FQLF9WQVJZSU5HTkFNRV8sTWF0Q2FwKVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLE9VVExJTkVfV0lEVEgsX1ZBUllJTkdOQU1FXyxPdXRsaW5lV2lkdGgpXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sVVZfQU5JTUFUSU9OX01BU0ssX1ZBUllJTkdOQU1FXyxVdkFuaW1hdGlvbk1hc2spXFxuXFxuLy8gQWRkaXRpb25hbCBVbmlmb3Jtc1xcbiNpZmRlZiBPVVRMSU5FX1dJRFRIXFxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIG91dGxpbmVXaWR0aFNhbXBsZXI7XFxuI2VuZGlmXFxuXFxuLy8gT3V0cHV0XFxudmFyeWluZyB2ZWMzIHZQb3NpdGlvblc7XFxuI2lmZGVmIE5PUk1BTFxcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsVztcXG4jZW5kaWZcXG5cXG4jaWYgZGVmaW5lZChWRVJURVhDT0xPUikgfHwgZGVmaW5lZChJTlNUQU5DRVNDT0xPUilcXG52YXJ5aW5nIHZlYzQgdkNvbG9yO1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPGJ1bXBWZXJ0ZXhEZWNsYXJhdGlvbj5cXG5cXG4jaW5jbHVkZTxjbGlwUGxhbmVWZXJ0ZXhEZWNsYXJhdGlvbj5cXG5cXG4jaW5jbHVkZTxmb2dWZXJ0ZXhEZWNsYXJhdGlvbj5cXG4jaW5jbHVkZTxfX2RlY2xfX2xpZ2h0VnhGcmFnbWVudD5bMC4ubWF4U2ltdWx0YW5lb3VzTGlnaHRzXVxcblxcbiNpbmNsdWRlPG1vcnBoVGFyZ2V0c1ZlcnRleEdsb2JhbERlY2xhcmF0aW9uPlxcbiNpbmNsdWRlPG1vcnBoVGFyZ2V0c1ZlcnRleERlY2xhcmF0aW9uPlswLi5tYXhTaW11bHRhbmVvdXNNb3JwaFRhcmdldHNdXFxuXFxuLy8gIyBpZmRlZiBSRUZMRUNUSU9OTUFQX1NLWUJPWFxcbi8vIHZhcnlpbmcgdmVjMyB2UG9zaXRpb25VVlc7XFxuLy8gIyBlbmRpZlxcblxcbi8vICMgaWYgZGVmaW5lZChSRUZMRUNUSU9OTUFQX0VRVUlSRUNUQU5HVUxBUl9GSVhFRCkgfHwgZGVmaW5lZChSRUZMRUNUSU9OTUFQX01JUlJPUkVERVFVSVJFQ1RBTkdVTEFSX0ZJWEVEKVxcbi8vIHZhcnlpbmcgdmVjMyB2RGlyZWN0aW9uVztcXG4vLyAjIGVuZGlmXFxuXFxuI2luY2x1ZGU8bG9nRGVwdGhEZWNsYXJhdGlvbj5cXG4jZGVmaW5lIENVU1RPTV9WRVJURVhfREVGSU5JVElPTlNcXG5cXG52b2lkIG1haW4odm9pZCkge1xcblxcbiAgICAjZGVmaW5lIENVU1RPTV9WRVJURVhfTUFJTl9CRUdJTlxcblxcbiAgICB2ZWMzIHBvc2l0aW9uVXBkYXRlZCA9IHBvc2l0aW9uO1xcbiNpZmRlZiBOT1JNQUxcXG4gICAgdmVjMyBub3JtYWxVcGRhdGVkID0gbm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBUQU5HRU5UXFxuICAgIHZlYzQgdGFuZ2VudFVwZGF0ZWQgPSB0YW5nZW50O1xcbiNlbmRpZlxcbiNpZmRlZiBVVjFcXG4gICAgdmVjMiB1dlVwZGF0ZWQgPSB1djtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxtb3JwaFRhcmdldHNWZXJ0ZXhHbG9iYWw+XFxuI2luY2x1ZGU8bW9ycGhUYXJnZXRzVmVydGV4PlswLi5tYXhTaW11bHRhbmVvdXNNb3JwaFRhcmdldHNdXFxuXFxuLy8gIyBpZmRlZiBSRUZMRUNUSU9OTUFQX1NLWUJPWFxcbi8vICAgICB2UG9zaXRpb25VVlcgPSBwb3NpdGlvblVwZGF0ZWQ7XFxuLy8gIyBlbmRpZlxcblxcbiNkZWZpbmUgQ1VTVE9NX1ZFUlRFWF9VUERBVEVfUE9TSVRJT05cXG5cXG4jZGVmaW5lIENVU1RPTV9WRVJURVhfVVBEQVRFX05PUk1BTFxcblxcbiNpbmNsdWRlPGluc3RhbmNlc1ZlcnRleD5cXG5cXG4jaWYgZGVmaW5lZChQUkVQQVNTKSAmJiBkZWZpbmVkKFBSRVBBU1NfVkVMT0NJVFkpICYmICFkZWZpbmVkKEJPTkVTX1ZFTE9DSVRZX0VOQUJMRUQpXFxuICAgIC8vIENvbXB1dGUgdmVsb2NpdHkgYmVmb3JlIGJvbmVzIGNvbXB1dGF0aW9uXFxuICAgIHZDdXJyZW50UG9zaXRpb24gPSB2aWV3UHJvamVjdGlvbiAqIGZpbmFsV29ybGQgKiB2ZWM0KHBvc2l0aW9uVXBkYXRlZCwgMS4wKTtcXG4gICAgdlByZXZpb3VzUG9zaXRpb24gPSBwcmV2aW91c1ZpZXdQcm9qZWN0aW9uICogZmluYWxQcmV2aW91c1dvcmxkICogdmVjNChwb3NpdGlvblVwZGF0ZWQsIDEuMCk7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8Ym9uZXNWZXJ0ZXg+XFxuI2luY2x1ZGU8YmFrZWRWZXJ0ZXhBbmltYXRpb24+XFxuXFxuICAgIC8vIFRleHR1cmUgY29vcmRpbmF0ZXNcXG4jaWZuZGVmIFVWMVxcbiAgICB2ZWMyIHV2VXBkYXRlZCA9IHZlYzIoMC4sIDAuKTtcXG4jZW5kaWZcXG4jaWZkZWYgTUFJTlVWMVxcbiAgICB2TWFpblVWMSA9IHV2VXBkYXRlZDtcXG4jZW5kaWZcXG4jaW5jbHVkZTx1dlZhcmlhYmxlRGVjbGFyYXRpb24+WzIuLjddXFxuXFxuICAgIGZsb2F0IG91dGxpbmVUZXggPSAxLjA7XFxuICAgIGlmIChpc091dGxpbmUgPT0gMS4wKSB7XFxuI2lmZGVmIE9VVExJTkVfV0lEVEhcXG4gICAgI2lmIE9VVExJTkVfV0lEVEhESVJFQ1RVViA9PSAwXFxuICAgICAgICBpZiAodk91dGxpbmVXaWR0aEluZm9zLnggPT0gMC4pXFxuICAgICAgICB7XFxuICAgICAgICAgICAgdk91dGxpbmVXaWR0aFVWID0gdmVjMihvdXRsaW5lV2lkdGhNYXRyaXggKiB2ZWM0KHV2VXBkYXRlZCwgMS4wLCAwLjApKTtcXG4gICAgICAgIH1cXG4gICAgICAgICNpZmRlZiBVVjJcXG4gICAgICAgIGVsc2UgaWYgKHZPdXRsaW5lV2lkdGhJbmZvcy54ID09IDEuKVxcbiAgICAgICAge1xcbiAgICAgICAgICAgIHZPdXRsaW5lV2lkdGhVViA9IHZlYzIob3V0bGluZVdpZHRoTWF0cml4ICogdmVjNCh1djIsIDEuMCwgMC4wKSk7XFxuICAgICAgICB9XFxuICAgICAgICAjZW5kaWZcXG4gICAgICAgICNpZmRlZiBVVjNcXG4gICAgICAgIGVsc2UgaWYgKHZPdXRsaW5lV2lkdGhJbmZvcy54ID09IDIuKVxcbiAgICAgICAge1xcbiAgICAgICAgICAgIHZPdXRsaW5lV2lkdGhVViA9IHZlYzIob3V0bGluZVdpZHRoTWF0cml4ICogdmVjNCh1djMsIDEuMCwgMC4wKSk7XFxuICAgICAgICB9XFxuICAgICAgICAjZW5kaWZcXG4gICAgICAgICNpZmRlZiBVVjRcXG4gICAgICAgIGVsc2UgaWYgKHZPdXRsaW5lV2lkdGhJbmZvcy54ID09IDMuKVxcbiAgICAgICAge1xcbiAgICAgICAgICAgIHZPdXRsaW5lV2lkdGhVViA9IHZlYzIob3V0bGluZVdpZHRoTWF0cml4ICogdmVjNCh1djQsIDEuMCwgMC4wKSk7XFxuICAgICAgICB9XFxuICAgICAgICAjZW5kaWZcXG4gICAgICAgICNpZmRlZiBVVjVcXG4gICAgICAgIGVsc2UgaWYgKHZPdXRsaW5lV2lkdGhJbmZvcy54ID09IDQuKVxcbiAgICAgICAge1xcbiAgICAgICAgICAgIHZPdXRsaW5lV2lkdGhVViA9IHZlYzIob3V0bGluZVdpZHRoTWF0cml4ICogdmVjNCh1djUsIDEuMCwgMC4wKSk7XFxuICAgICAgICB9XFxuICAgICAgICAjZW5kaWZcXG4gICAgICAgICNpZmRlZiBVVjZcXG4gICAgICAgIGVsc2UgaWYgKHZPdXRsaW5lV2lkdGhJbmZvcy54ID09IDUuKVxcbiAgICAgICAge1xcbiAgICAgICAgICAgIHZPdXRsaW5lV2lkdGhVViA9IHZlYzIob3V0bGluZVdpZHRoTWF0cml4ICogdmVjNCh1djYsIDEuMCwgMC4wKSk7XFxuICAgICAgICB9XFxuICAgICAgICAjZW5kaWZcXG4gICAgI2VsaWYgZGVmaW5lZChNQUlOVVYxKVxcbiAgICAgICAgdmVjMiB2T3V0bGluZVdpZHRoVVYgPSB2TWFpblVWMTtcXG4gICAgI2VsaWYgZGVmaW5lZChNQUlOVVYyKVxcbiAgICAgICAgdmVjMiB2T3V0bGluZVdpZHRoVVYgPSB2TWFpblVWMjtcXG4gICAgI2Vsc2VcXG4gICAgICAgIHZlYzIgdk91dGxpbmVXaWR0aFVWID0gdmVjMigwLiwgMC4pO1xcbiAgICAjZW5kaWZcXG4gICAgICAgIG91dGxpbmVUZXggPSB0ZXh0dXJlMkQob3V0bGluZVdpZHRoU2FtcGxlciwgdk91dGxpbmVXaWR0aFVWKS5yICogdk91dGxpbmVXaWR0aEluZm9zLnk7XFxuI2VuZGlmXFxuXFxuI2lmIGRlZmluZWQoTVRPT05fT1VUTElORV9XSURUSF9XT1JMRCkgJiYgZGVmaW5lZChOT1JNQUwpXFxuICAgICAgICAvLyBtb3ZlIHNsaWdodGx5IHdvcmxkIG5vcm1hbFxcbiAgICAgICAgdmVjMyBvdXRsaW5lT2Zmc2V0ID0gMC4wMSAqIG91dGxpbmVXaWR0aCAqIG91dGxpbmVUZXggKiBsZW5ndGgodHJhbnNwb3NlTWF0MyhpbnZlcnNlTWF0MyhtYXQzKGZpbmFsV29ybGQpKSkgKiBub3JtYWxVcGRhdGVkKSAqIG5vcm1hbFVwZGF0ZWQ7XFxuICAgICAgICBwb3NpdGlvblVwZGF0ZWQgKz0gb3V0bGluZU9mZnNldDtcXG4jZW5kaWZcXG4gICAgfSAvLyBFbmQgaXNPdXRsaW5lID09IDEuMFxcblxcbiAgICB2ZWM0IHdvcmxkUG9zID0gZmluYWxXb3JsZCAqIHZlYzQocG9zaXRpb25VcGRhdGVkLCAxLjApO1xcblxcbiNpZmRlZiBOT1JNQUxcXG4gICAgbWF0MyBub3JtYWxXb3JsZCA9IG1hdDMoZmluYWxXb3JsZCk7XFxuXFxuICAgICNpZiBkZWZpbmVkKElOU1RBTkNFUykgJiYgZGVmaW5lZChUSElOX0lOU1RBTkNFUylcXG4gICAgICAgIHZOb3JtYWxXID0gbm9ybWFsVXBkYXRlZCAvIHZlYzMoZG90KG5vcm1hbFdvcmxkWzBdLCBub3JtYWxXb3JsZFswXSksIGRvdChub3JtYWxXb3JsZFsxXSwgbm9ybWFsV29ybGRbMV0pLCBkb3Qobm9ybWFsV29ybGRbMl0sIG5vcm1hbFdvcmxkWzJdKSk7XFxuICAgICAgICB2Tm9ybWFsVyA9IG5vcm1hbGl6ZShub3JtYWxXb3JsZCAqIHZOb3JtYWxXKTtcXG4gICAgI2Vsc2VcXG4gICAgICAgICNpZmRlZiBOT05VTklGT1JNU0NBTElOR1xcbiAgICAgICAgICAgIG5vcm1hbFdvcmxkID0gdHJhbnNwb3NlTWF0MyhpbnZlcnNlTWF0Myhub3JtYWxXb3JsZCkpO1xcbiAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICB2Tm9ybWFsVyA9IG5vcm1hbGl6ZShub3JtYWxXb3JsZCAqIG5vcm1hbFVwZGF0ZWQpO1xcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cXG4jZGVmaW5lIENVU1RPTV9WRVJURVhfVVBEQVRFX1dPUkxEUE9TXFxuXFxuI2lmZGVmIE1VTFRJVklFV1xcbiAgICBpZiAoZ2xfVmlld0lEX09WUiA9PSAwdSkge1xcbiAgICAgICAgZ2xfUG9zaXRpb24gPSB2aWV3UHJvamVjdGlvbiAqIHdvcmxkUG9zO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgZ2xfUG9zaXRpb24gPSB2aWV3UHJvamVjdGlvblIgKiB3b3JsZFBvcztcXG4gICAgfVxcbiNlbHNlXFxuICAgIGdsX1Bvc2l0aW9uID0gdmlld1Byb2plY3Rpb24gKiB3b3JsZFBvcztcXG4jZW5kaWZcXG5cXG4gICAgaWYgKGlzT3V0bGluZSA9PSAxLjApIHtcXG4jaWYgZGVmaW5lZChNVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTikgJiYgZGVmaW5lZChOT1JNQUwpXFxuICAgICAgICB2ZWMzIHZpZXdOb3JtYWwgPSB0cmFuc3Bvc2VNYXQzKGludmVyc2VNYXQzKG1hdDModmlldykgKiBtYXQzKGZpbmFsV29ybGQpKSkgKiBub3JtYWxVcGRhdGVkO1xcbiAgICAgICAgdmVjMyBjbGlwTm9ybWFsID0gbWF0Myhwcm9qZWN0aW9uKSAqIHZpZXdOb3JtYWw7XFxuICAgICAgICB2ZWMyIHByb2plY3RlZE5vcm1hbCA9IG5vcm1hbGl6ZShjbGlwTm9ybWFsLnh5KTtcXG4gICAgICAgIHByb2plY3RlZE5vcm1hbCAqPSBtaW4oZ2xfUG9zaXRpb24udywgb3V0bGluZVNjYWxlZE1heERpc3RhbmNlKTtcXG4gICAgICAgIHByb2plY3RlZE5vcm1hbC54IC89IGFzcGVjdDsgLy8gYXNwZWN0IGluIG9yaWdpbmFsIG10b29uIGlzIHkveC4gYXNwZWN0IGluIGJhYnlsb24gaXMgeC95LlxcbiAgICAgICAgZ2xfUG9zaXRpb24ueHkgKz0gMC4wMSAqIG91dGxpbmVXaWR0aCAqIG91dGxpbmVUZXggKiBwcm9qZWN0ZWROb3JtYWwgKiBjbGFtcCgxLjAgLSBhYnMobm9ybWFsaXplKHZpZXdOb3JtYWwpLnopLCAwLjAsIDEuMCk7IC8vIGlnbm9yZSBvZmZzZXQgd2hlbiBub3JtYWwgdG93YXJkIGNhbWVyYVxcbiNlbmRpZlxcblxcbiAgICAgICAgZ2xfUG9zaXRpb24ueiArPSAxRS02ICogZ2xfUG9zaXRpb24udzsgLy8gYW50aS1hcnRpZmFjdCBtYWdpYyBmcm9tIHRocmVlLXZybVxcbiAgICB9XFxuXFxuICAgIHdvcmxkUG9zID0gZmluYWxXb3JsZCAqIHZlYzQocG9zaXRpb25VcGRhdGVkLCAxLjApO1xcbiAgICB2UG9zaXRpb25XID0gdmVjMyh3b3JsZFBvcyk7XFxuXFxuI2luY2x1ZGU8cHJlUGFzc1ZlcnRleD5cXG5cXG4vLyAjIGlmIGRlZmluZWQoUkVGTEVDVElPTk1BUF9FUVVJUkVDVEFOR1VMQVJfRklYRUQpIHx8IGRlZmluZWQoUkVGTEVDVElPTk1BUF9NSVJST1JFREVRVUlSRUNUQU5HVUxBUl9GSVhFRClcXG4vLyAgICAgdkRpcmVjdGlvblcgPSBub3JtYWxpemUodmVjMyhmaW5hbFdvcmxkICogdmVjNChwb3NpdGlvblVwZGF0ZWQsIDAuMCkpKTtcXG4vLyAjIGVuZGlmXFxuXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLERJRkZVU0UsX1ZBUllJTkdOQU1FXyxEaWZmdXNlLF9NQVRSSVhOQU1FXyxkaWZmdXNlLF9JTkZPTkFNRV8sRGlmZnVzZUluZm9zLngpXFxuICAgIC8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxERVRBSUwsX1ZBUllJTkdOQU1FXyxEZXRhaWwsX01BVFJJWE5BTUVfLGRldGFpbCxfSU5GT05BTUVfLERldGFpbEluZm9zLngpXFxuICAgIC8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxBTUJJRU5ULF9WQVJZSU5HTkFNRV8sQW1iaWVudCxfTUFUUklYTkFNRV8sYW1iaWVudCxfSU5GT05BTUVfLEFtYmllbnRJbmZvcy54KVxcbiAgICAvLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sT1BBQ0lUWSxfVkFSWUlOR05BTUVfLE9wYWNpdHksX01BVFJJWE5BTUVfLG9wYWNpdHksX0lORk9OQU1FXyxPcGFjaXR5SW5mb3MueClcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sRU1JU1NJVkUsX1ZBUllJTkdOQU1FXyxFbWlzc2l2ZSxfTUFUUklYTkFNRV8sZW1pc3NpdmUsX0lORk9OQU1FXyxFbWlzc2l2ZUluZm9zLngpXFxuICAgIC8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxMSUdIVE1BUCxfVkFSWUlOR05BTUVfLExpZ2h0bWFwLF9NQVRSSVhOQU1FXyxsaWdodG1hcCxfSU5GT05BTUVfLExpZ2h0bWFwSW5mb3MueClcXG4gICAgLy8gIyBpZiBkZWZpbmVkKFNQRUNVTEFSVEVSTSlcXG4gICAgLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLFNQRUNVTEFSLF9WQVJZSU5HTkFNRV8sU3BlY3VsYXIsX01BVFJJWE5BTUVfLHNwZWN1bGFyLF9JTkZPTkFNRV8sU3BlY3VsYXJJbmZvcy54KVxcbiAgICAvLyAjIGVuZGlmXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLEJVTVAsX1ZBUllJTkdOQU1FXyxCdW1wLF9NQVRSSVhOQU1FXyxidW1wLF9JTkZPTkFNRV8sQnVtcEluZm9zLngpXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLFNIQURFLF9WQVJZSU5HTkFNRV8sU2hhZGUsX01BVFJJWE5BTUVfLHNoYWRlLF9JTkZPTkFNRV8sU2hhZGVJbmZvcy54KVxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxSRUNFSVZFX1NIQURPVyxfVkFSWUlOR05BTUVfLFJlY2VpdmVTaGFkb3csX01BVFJJWE5BTUVfLHJlY2VpdmVTaGFkb3csX0lORk9OQU1FXyxSZWNlaXZlU2hhZG93SW5mb3MueClcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sU0hBRElOR19HUkFERSxfVkFSWUlOR05BTUVfLFNoYWRpbmdHcmFkZSxfTUFUUklYTkFNRV8sc2hhZGluZ0dyYWRlLF9JTkZPTkFNRV8sU2hhZGluZ0dyYWRlSW5mb3MueClcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sUklNLF9WQVJZSU5HTkFNRV8sUmltLF9NQVRSSVhOQU1FXyxyaW0sX0lORk9OQU1FXyxSaW1JbmZvcy54KVxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxNQVRDQVAsX1ZBUllJTkdOQU1FXyxNYXRDYXAsX01BVFJJWE5BTUVfLG1hdENhcCxfSU5GT05BTUVfLE1hdENhcEluZm9zLngpXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLFVWX0FOSU1BVElPTl9NQVNLLF9WQVJZSU5HTkFNRV8sVXZBbmltYXRpb25NYXNrLF9NQVRSSVhOQU1FXyx1dkFuaW1hdGlvbk1hc2ssX0lORk9OQU1FXyx1dkFuaW1hdGlvbk1hc2tJbmZvcy54KVxcblxcbiNpbmNsdWRlPGJ1bXBWZXJ0ZXg+XFxuI2luY2x1ZGU8Y2xpcFBsYW5lVmVydGV4PlxcbiNpbmNsdWRlPGZvZ1ZlcnRleD5cXG4jaW5jbHVkZTxzaGFkb3dzVmVydGV4PlswLi5tYXhTaW11bHRhbmVvdXNMaWdodHNdXFxuXFxuI2lmZGVmIFZFUlRFWENPTE9SXFxuICAgIHZDb2xvciA9IGNvbG9yO1xcbiNlbGlmIGRlZmluZWQoSU5TVEFOQ0VTQ09MT1IpICYmIElOU1RBTkNFU0NPTE9SXFxuICAgIHZDb2xvciA9IGluc3RhbmNlQ29sb3I7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8cG9pbnRDbG91ZFZlcnRleD5cXG4jaW5jbHVkZTxsb2dEZXB0aFZlcnRleD5cXG5cXG4jZGVmaW5lIENVU1RPTV9WRVJURVhfTUFJTl9FTkRcXG5cXG59XFxuXCIsbS5FZmZlY3QuU2hhZGVyc1N0b3JlLm10b29uRnJhZ21lbnRTaGFkZXI9XCIjaW5jbHVkZTxfX2RlY2xfX210b29uRnJhZ21lbnQ+XFxuXFxuI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGVcXG5cXG4jaW5jbHVkZTxwcmVQYXNzRGVjbGFyYXRpb24+W1NDRU5FX01SVF9DT1VOVF1cXG4jaW5jbHVkZTxvaXREZWNsYXJhdGlvbj5cXG5cXG4jZGVmaW5lIENVU1RPTV9GUkFHTUVOVF9CRUdJTlxcblxcbiNpZmRlZiBMT0dBUklUSE1JQ0RFUFRIXFxuI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZVxcbiNlbmRpZlxcblxcbi8vIENvbnN0YW50c1xcbiNkZWZpbmUgUkVDSVBST0NBTF9QSTIgMC4xNTkxNTQ5NFxcbiNkZWZpbmUgUElfMiA2LjI4MzE4NTMwNzE4XFxuI2RlZmluZSBFUFNfQ09MIDAuMDAwMDFcXG5cXG4vLyBJbnB1dFxcbnZhcnlpbmcgdmVjMyB2UG9zaXRpb25XO1xcblxcbiNpZmRlZiBOT1JNQUxcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbFc7XFxuI2VuZGlmXFxuXFxuI2lmIGRlZmluZWQoVkVSVEVYQ09MT1IpIHx8IGRlZmluZWQoSU5TVEFOQ0VTQ09MT1IpXFxudmFyeWluZyB2ZWM0IHZDb2xvcjtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxtYWluVVZWYXJ5aW5nRGVjbGFyYXRpb24+WzEuLjddXFxuXFxuLy8gSGVscGVyIGZ1bmN0aW9uc1xcbiNpbmNsdWRlPGhlbHBlckZ1bmN0aW9ucz5cXG5cXG4vLyBMaWdodHNcXG4jaW5jbHVkZTxfX2RlY2xfX2xpZ2h0RnJhZ21lbnQ+WzAuLm1heFNpbXVsdGFuZW91c0xpZ2h0c11cXG5cXG4jaW5jbHVkZTxsaWdodHNGcmFnbWVudEZ1bmN0aW9ucz5cXG4jaW5jbHVkZTxzaGFkb3dzRnJhZ21lbnRGdW5jdGlvbnM+XFxuXFxuLy8gU2FtcGxlcnNcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLERJRkZVU0UsX1ZBUllJTkdOQU1FXyxEaWZmdXNlLF9TQU1QTEVSTkFNRV8sZGlmZnVzZSlcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLEVNSVNTSVZFLF9WQVJZSU5HTkFNRV8sRW1pc3NpdmUsX1NBTVBMRVJOQU1FXyxlbWlzc2l2ZSlcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFNIQURFLF9WQVJZSU5HTkFNRV8sU2hhZGUsX1NBTVBMRVJOQU1FXyxzaGFkZSlcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFJFQ0VJVkVfU0hBRE9XLF9WQVJZSU5HTkFNRV8sUmVjZWl2ZVNoYWRvdyxfU0FNUExFUk5BTUVfLHJlY2VpdmVTaGFkb3cpXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxTSEFESU5HX0dSQURFLF9WQVJZSU5HTkFNRV8sU2hhZGluZ0dyYWRlLF9TQU1QTEVSTkFNRV8sc2hhZGluZ0dyYWRlKVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sUklNLF9WQVJZSU5HTkFNRV8sUmltLF9TQU1QTEVSTkFNRV8scmltKVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sTUFUQ0FQLF9WQVJZSU5HTkFNRV8sTWF0Q2FwLF9TQU1QTEVSTkFNRV8sbWF0Q2FwKVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sT1VUTElORV9XSURUSCxfVkFSWUlOR05BTUVfLE91dGxpbmVXaWR0aCxfU0FNUExFUk5BTUVfLG91dGxpbmVXaWR0aClcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFVWX0FOSU1BVElPTl9NQVNLLF9WQVJZSU5HTkFNRV8sVXZBbmltYXRpb25NYXNrLF9TQU1QTEVSTkFNRV8sdXZBbmltYXRpb25NYXNrKVxcblxcbiNpbmNsdWRlPG10b29uRnJhZ21lbnRGdW5jdGlvbnM+XFxuXFxuLy8gIyBpZmRlZiBSRUZSQUNUSU9OXFxuXFxuLy8gIyBpZmRlZiBSRUZSQUNUSU9OTUFQXzNEXFxuLy8gdW5pZm9ybSBzYW1wbGVyQ3ViZSByZWZyYWN0aW9uQ3ViZVNhbXBsZXI7XFxuLy8gIyBlbHNlXFxuLy8gdW5pZm9ybSBzYW1wbGVyMkQgcmVmcmFjdGlvbjJEU2FtcGxlcjtcXG4vLyAjIGVuZGlmXFxuXFxuLy8gIyBlbmRpZlxcblxcbi8vICMgaWYgZGVmaW5lZChTUEVDVUxBUlRFUk0pXFxuLy8gICAgICMgaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFNQRUNVTEFSLF9WQVJZSU5HTkFNRV8sU3BlY3VsYXIsX1NBTVBMRVJOQU1FXyxzcGVjdWxhcilcXG4vLyAjIGVuZGlmXFxuXFxuLy8gLy8gRnJlc25lbFxcbi8vICMgaW5jbHVkZTxmcmVzbmVsRnVuY3Rpb24+XFxuXFxuLy8gLy8gUmVmbGVjdGlvblxcbi8vICMgaWZkZWYgUkVGTEVDVElPTlxcbi8vICMgaWZkZWYgUkVGTEVDVElPTk1BUF8zRFxcbi8vIHVuaWZvcm0gc2FtcGxlckN1YmUgcmVmbGVjdGlvbkN1YmVTYW1wbGVyO1xcbi8vICMgZWxzZVxcbi8vIHVuaWZvcm0gc2FtcGxlcjJEIHJlZmxlY3Rpb24yRFNhbXBsZXI7XFxuLy8gIyBlbmRpZlxcblxcbi8vICMgaWZkZWYgUkVGTEVDVElPTk1BUF9TS1lCT1hcXG4vLyB2YXJ5aW5nIHZlYzMgdlBvc2l0aW9uVVZXO1xcbi8vICMgZWxzZVxcbi8vICMgaWYgZGVmaW5lZChSRUZMRUNUSU9OTUFQX0VRVUlSRUNUQU5HVUxBUl9GSVhFRCkgfHwgZGVmaW5lZChSRUZMRUNUSU9OTUFQX01JUlJPUkVERVFVSVJFQ1RBTkdVTEFSX0ZJWEVEKVxcbi8vIHZhcnlpbmcgdmVjMyB2RGlyZWN0aW9uVztcXG4vLyAjIGVuZGlmXFxuXFxuLy8gIyBlbmRpZlxcblxcbi8vICMgaW5jbHVkZTxyZWZsZWN0aW9uRnVuY3Rpb24+XFxuXFxuLy8gIyBlbmRpZlxcblxcbiNpbmNsdWRlPGltYWdlUHJvY2Vzc2luZ0RlY2xhcmF0aW9uPlxcblxcbiNpbmNsdWRlPGltYWdlUHJvY2Vzc2luZ0Z1bmN0aW9ucz5cXG5cXG4jaW5jbHVkZTxidW1wRnJhZ21lbnRNYWluRnVuY3Rpb25zPlxcbiNpbmNsdWRlPGJ1bXBGcmFnbWVudEZ1bmN0aW9ucz5cXG4jaW5jbHVkZTxjbGlwUGxhbmVGcmFnbWVudERlY2xhcmF0aW9uPlxcbiNpbmNsdWRlPGxvZ0RlcHRoRGVjbGFyYXRpb24+XFxuI2luY2x1ZGU8Zm9nRnJhZ21lbnREZWNsYXJhdGlvbj5cXG5cXG4jZGVmaW5lIENVU1RPTV9GUkFHTUVOVF9ERUZJTklUSU9OU1xcblxcbnZvaWQgbWFpbih2b2lkKSB7XFxuI2lmZGVmIE1UT09OX0NMSVBfSUZfT1VUTElORV9JU19OT05FXFxuICAgICNpZmRlZiBNVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEXFxuICAgICNlbGlmIGRlZmluZWQoTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU4pXFxuICAgICNlbHNlXFxuICAgICAgICBkaXNjYXJkO1xcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cXG4jZGVmaW5lIENVU1RPTV9GUkFHTUVOVF9NQUlOX0JFR0lOXFxuXFxuI2luY2x1ZGU8b2l0RnJhZ21lbnQ+XFxuXFxuI2luY2x1ZGU8Y2xpcFBsYW5lRnJhZ21lbnQ+XFxuXFxuICAgIHZlYzMgdmlld0RpcmVjdGlvblcgPSBub3JtYWxpemUodkV5ZVBvc2l0aW9uLnh5eiAtIHZQb3NpdGlvblcpO1xcblxcbiAgICAvLyBCYXNlIGNvbG9yXFxuICAgIHZlYzQgYmFzZUNvbG9yID0gdmVjNCgxLiwgMS4sIDEuLCAxLik7XFxuICAgIHZlYzMgZGlmZnVzZUNvbG9yID0gdmVjMygxLiwgMS4sIDEuKTtcXG5cXG4gICAgLy8gQWxwaGFcXG4gICAgZmxvYXQgYWxwaGEgPSAxLjA7XFxuXFxuICAgIC8vIEJ1bXBcXG4jaWZkZWYgTk9STUFMXFxuICAgIHZlYzMgbm9ybWFsVyA9IG5vcm1hbGl6ZSh2Tm9ybWFsVyk7XFxuI2Vsc2VcXG4gICAgdmVjMyBub3JtYWxXID0gbm9ybWFsaXplKC1jcm9zcyhkRmR4KHZQb3NpdGlvblcpLCBkRmR5KHZQb3NpdGlvblcpKSk7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8ZGVwdGhQcmVQYXNzPlxcblxcbiAgICAvLyBBbWJpZW50IGNvbG9yXFxuICAgIHZlYzMgYmFzZUFtYmllbnRDb2xvciA9IHZlYzMoMS4sIDEuLCAxLik7XFxuICAgIGZsb2F0IGdsb3NzaW5lc3MgPSAwLjtcXG5cXG4gICAgLy8gTGlnaHRpbmdcXG4gICAgdmVjMyBkaWZmdXNlQmFzZSA9IHZlYzMoMC4sIDAuLCAwLik7XFxuICAgIGxpZ2h0aW5nSW5mbyBpbmZvO1xcbiAgICBmbG9hdCBzaGFkb3cgPSAxLjtcXG4gICAgdmVjMyBsaWdodERpcmVjdGlvbiA9IHZlYzMoMC4wLCAxLjAsIDAuMCk7XFxuICAgIHZlYzQgbXRvb25EaWZmdXNlID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApO1xcblxcbiAgICAvLyBNVG9vbiBVVlxcbiAgICAvLyBBbGwgdGV4dHVyZXMgd2lsbCB1c2UgZGlmZnVzZShfTWFpblRleCkgVVZcXG4gICAgdmVjMiBtYWluVXYgPSB2ZWMyKDAuMCk7XFxuI2lmZGVmIERJRkZVU0VcXG4gICAgbWFpblV2ICs9IHZEaWZmdXNlVVY7XFxuI2VsaWYgZGVmaW5lZChNQUlOVVYxKVxcbiAgICBtYWluVXYgKz0gdk1haW5VVjE7XFxuI2VsaWYgZGVmaW5lZChNQUlOVVYyKVxcbiAgICBtYWluVXYgKz0gdk1haW5VVjI7XFxuI2VuZGlmXFxuXFxuICAgIC8vIHV2IGFuaW1cXG4gICAgZmxvYXQgdXZBbmltID0gdGltZS55O1xcbiNpZmRlZiBVVl9BTklNQVRJT05fTUFTS1xcbiAgICB1dkFuaW0gKj0gdGV4dHVyZTJEKHV2QW5pbWF0aW9uTWFza1NhbXBsZXIsIG1haW5VdikucjtcXG4jZW5kaWZcXG4gICAgLy8gdHJhbnNsYXRlIHV2IGluIGJvdHRvbS1sZWZ0IG9yaWdpbiBjb29yZGluYXRlcy5cXG4gICAgLy8gdXYgaXMgcmV2ZXJzZWRcXG4gICAgbWFpblV2ICs9IHZlYzIoLXV2QW5pbWF0aW9uU2Nyb2xsWCwgLXV2QW5pbWF0aW9uU2Nyb2xsWSkgKiB1dkFuaW07XFxuICAgIC8vIHJvdGF0ZSB1diBjb3VudGVyLWNsb2Nrd2lzZSBhcm91bmQgKDAuNSwgMC41KSBpbiBib3R0b20tbGVmdCBvcmlnaW4gY29vcmRpbmF0ZXMuXFxuICAgIGZsb2F0IHJvdGF0ZVJhZCA9IHV2QW5pbWF0aW9uUm90YXRpb24gKiBQSV8yICogdXZBbmltO1xcbiAgICB2ZWMyIHJvdGF0ZVBpdm90ID0gdmVjMigwLjUsIDAuNSk7XFxuICAgIG1haW5VdiA9IG1hdDIoY29zKHJvdGF0ZVJhZCksIC1zaW4ocm90YXRlUmFkKSwgc2luKHJvdGF0ZVJhZCksIGNvcyhyb3RhdGVSYWQpKSAqIChtYWluVXYgLSByb3RhdGVQaXZvdCkgKyByb3RhdGVQaXZvdDtcXG5cXG4jaWZkZWYgRkxJUF9VXFxuICAgIG1haW5Vdi54ID0gMS4wIC0gbWFpblV2Lng7XFxuI2VuZGlmXFxuI2lmZGVmIEZMSVBfVlxcbiAgICBtYWluVXYueSA9IDEuMCAtIG1haW5Vdi55O1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPG10b29uQnVtcEZyYWdtZW50PlxcblxcbiNpZmRlZiBUV09TSURFRExJR0hUSU5HXFxuICAgIG5vcm1hbFcgPSBnbF9Gcm9udEZhY2luZyA/IG5vcm1hbFcgOiAtbm9ybWFsVztcXG4jZW5kaWZcXG5cXG4vLyBpbmNsdWRlIGN1c3RvbWl6ZWQgbGlnaHRGcmFnbWVudFxcbiNpbmNsdWRlPG10b29uTGlnaHRGcmFnbWVudD5bMC4ubWF4U2ltdWx0YW5lb3VzTGlnaHRzXVxcblxcbiAgICB2ZWMzIGZpbmFsRGlmZnVzZSA9IGNsYW1wKGRpZmZ1c2VCYXNlLCAwLjAsIDEuMCkgKiBiYXNlQ29sb3IucmdiO1xcblxcbiAgICAvLyBDb21wb3NpdGlvblxcbiAgICB2ZWM0IGNvbG9yID0gdmVjNChmaW5hbERpZmZ1c2UsIGNsYW1wKGFscGhhLCAwLjAsIDEuMCkpO1xcblxcbiAgICBjb2xvci5yZ2IgPSBtYXgoY29sb3IucmdiLCAwLik7XFxuI2luY2x1ZGU8bG9nRGVwdGhGcmFnbWVudD5cXG4jaW5jbHVkZTxmb2dGcmFnbWVudD5cXG5cXG4vLyBBcHBseSBpbWFnZSBwcm9jZXNzaW5nIGlmIHJlbGV2YW50LiBBcyB0aGlzIGFwcGxpZXMgaW4gbGluZWFyIHNwYWNlLFxcbi8vIFdlIGZpcnN0IG1vdmUgZnJvbSBnYW1tYSB0byBsaW5lYXIuXFxuI2lmZGVmIElNQUdFUFJPQ0VTU0lOR1BPU1RQUk9DRVNTXFxuICAgIGNvbG9yLnJnYiA9IHRvTGluZWFyU3BhY2UoY29sb3IucmdiKTtcXG4jZWxzZVxcbiAgICAjaWZkZWYgSU1BR0VQUk9DRVNTSU5HXFxuICAgICAgICAvLyBGSVhNRTogc3VwcG9ydCBpbWFnZSBwcm9jZXNzaW5nXFxuICAgICAgICAvLyBjb2xvci5yZ2IgPSB0b0xpbmVhclNwYWNlKGNvbG9yLnJnYik7XFxuICAgICAgICAvLyBjb2xvciA9IGFwcGx5SW1hZ2VQcm9jZXNzaW5nKGNvbG9yKTtcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXFxuICAgIGNvbG9yLmEgKj0gdmlzaWJpbGl0eTtcXG5cXG4jaWZkZWYgUFJFTVVMVElQTFlBTFBIQVxcbiAgICAvLyBDb252ZXJ0IHRvIGFzc29jaWF0aXZlIChwcmVtdWx0aXBsaWVkKSBmb3JtYXQgaWYgbmVlZGVkLlxcbiAgICBjb2xvci5yZ2IgKj0gY29sb3IuYTtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgUFJFUEFTU1xcbiAgICBmbG9hdCB3cml0ZUdlb21ldHJ5SW5mbyA9IGNvbG9yLmEgPiAwLjQgPyAxLjAgOiAwLjA7XFxuXFxuICAgIGdsX0ZyYWdEYXRhWzBdID0gY29sb3I7IC8vIFdlIGNhbid0IHNwbGl0IGlycmFkaWFuY2Ugb24gc3RkIG1hdGVyaWFsXFxuXFxuICAgICNpZmRlZiBQUkVQQVNTX1BPU0lUSU9OXFxuICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfUE9TSVRJT05fSU5ERVhdID0gdmVjNCh2UG9zaXRpb25XLCB3cml0ZUdlb21ldHJ5SW5mbyk7XFxuICAgICNlbmRpZlxcblxcbiAgICAjaWZkZWYgUFJFUEFTU19WRUxPQ0lUWVxcbiAgICB2ZWMyIGEgPSAodkN1cnJlbnRQb3NpdGlvbi54eSAvIHZDdXJyZW50UG9zaXRpb24udykgKiAwLjUgKyAwLjU7XFxuICAgIHZlYzIgYiA9ICh2UHJldmlvdXNQb3NpdGlvbi54eSAvIHZQcmV2aW91c1Bvc2l0aW9uLncpICogMC41ICsgMC41O1xcblxcbiAgICB2ZWMyIHZlbG9jaXR5ID0gYWJzKGEgLSBiKTtcXG4gICAgdmVsb2NpdHkgPSB2ZWMyKHBvdyh2ZWxvY2l0eS54LCAxLjAgLyAzLjApLCBwb3codmVsb2NpdHkueSwgMS4wIC8gMy4wKSkgKiBzaWduKGEgLSBiKSAqIDAuNSArIDAuNTtcXG5cXG4gICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19WRUxPQ0lUWV9JTkRFWF0gPSB2ZWM0KHZlbG9jaXR5LCAwLjAsIHdyaXRlR2VvbWV0cnlJbmZvKTtcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZmRlZiBQUkVQQVNTX0lSUkFESUFOQ0VcXG4gICAgICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfSVJSQURJQU5DRV9JTkRFWF0gPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIHdyaXRlR2VvbWV0cnlJbmZvKTsgLy8gIFdlIGNhbid0IHNwbGl0IGlycmFkaWFuY2Ugb24gc3RkIG1hdGVyaWFsXFxuICAgICNlbmRpZlxcblxcbiAgICAjaWZkZWYgUFJFUEFTU19ERVBUSFxcbiAgICAgICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19ERVBUSF9JTkRFWF0gPSB2ZWM0KHZWaWV3UG9zLnosIDAuMCwgMC4wLCB3cml0ZUdlb21ldHJ5SW5mbyk7IC8vIExpbmVhciBkZXB0aFxcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmZGVmIFBSRVBBU1NfTk9STUFMXFxuICAgICAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX05PUk1BTF9JTkRFWF0gPSB2ZWM0KCh2aWV3ICogdmVjNChub3JtYWxXLCAwLjApKS5yZ2IsIHdyaXRlR2VvbWV0cnlJbmZvKTsgLy8gTm9ybWFsXFxuICAgICNlbmRpZlxcblxcbiAgICAjaWZkZWYgUFJFUEFTU19BTEJFRE9fU1FSVFxcbiAgICAgICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19BTEJFRE9fU1FSVF9JTkRFWF0gPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIHdyaXRlR2VvbWV0cnlJbmZvKTsgLy8gV2UgY2FuJ3Qgc3BsaXQgYWxiZWRvIG9uIHN0ZCBtYXRlcmlhbFxcbiAgICAjZW5kaWZcXG4gICAgI2lmZGVmIFBSRVBBU1NfUkVGTEVDVElWSVRZXFxuICAgICAgICAjaWYgZGVmaW5lZChTUEVDVUxBUilcXG4gICAgICAgICAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX1JFRkxFQ1RJVklUWV9JTkRFWF0gPSB2ZWM0KHNwZWN1bGFyTWFwQ29sb3IucmdiLCBzcGVjdWxhck1hcENvbG9yLmEgKiB3cml0ZUdlb21ldHJ5SW5mbyk7XFxuICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfUkVGTEVDVElWSVRZX0lOREVYXSA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgd3JpdGVHZW9tZXRyeUluZm8pO1xcbiAgICAgICAgI2VuZGlmXFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblxcbiNpZiAhZGVmaW5lZChQUkVQQVNTKSB8fCBkZWZpbmVkKFdFQkdMMilcXG4gICAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxuI2VuZGlmXFxuXFxuI2lmIE9SREVSX0lOREVQRU5ERU5UX1RSQU5TUEFSRU5DWVxcbiAgICBpZiAoZnJhZ0RlcHRoID09IG5lYXJlc3REZXB0aCkge1xcbiAgICAgICAgZnJvbnRDb2xvci5yZ2IgKz0gY29sb3IucmdiICogY29sb3IuYSAqIGFscGhhTXVsdGlwbGllcjtcXG4gICAgICAgIGZyb250Q29sb3IuYSA9IDEuMCAtIGFscGhhTXVsdGlwbGllciAqICgxLjAgLSBjb2xvci5hKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGJhY2tDb2xvciArPSBjb2xvcjtcXG4gICAgfVxcbiNlbmRpZlxcblxcbiNkZWZpbmUgQ1VTVE9NX0ZSQUdNRU5UX01BSU5fRU5EXFxuXFxufVxcblwiKSx0aGlzLmluc3BlY3RhYmxlQ3VzdG9tUHJvcGVydGllcz10aGlzLmluc3BlY3RhYmxlQ3VzdG9tUHJvcGVydGllc3x8W10sdGhpcy5pbnNwZWN0YWJsZUN1c3RvbVByb3BlcnRpZXMucHVzaCh7bGFiZWw6XCJEaWZmdXNlQ29sb3JcIixwcm9wZXJ0eU5hbWU6XCJkaWZmdXNlQ29sb3JcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLkNvbG9yM30se2xhYmVsOlwiQW1iaWVudENvbG9yXCIscHJvcGVydHlOYW1lOlwiYW1iaWVudENvbG9yXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5Db2xvcjN9LHtsYWJlbDpcIkVtaXNzaXZlQ29sb3JcIixwcm9wZXJ0eU5hbWU6XCJlbWlzc2l2ZUNvbG9yXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5Db2xvcjN9LHtsYWJlbDpcIlNoYWRlQ29sb3JcIixwcm9wZXJ0eU5hbWU6XCJzaGFkZUNvbG9yXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5Db2xvcjN9LHtsYWJlbDpcIlJpbUNvbG9yXCIscHJvcGVydHlOYW1lOlwicmltQ29sb3JcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLkNvbG9yM30se2xhYmVsOlwiT3V0bGluZUNvbG9yXCIscHJvcGVydHlOYW1lOlwib3V0bGluZUNvbG9yXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5Db2xvcjN9LHtsYWJlbDpcIlJlY2VpdmVTaGFkb3dSYXRlXCIscHJvcGVydHlOYW1lOlwicmVjZWl2ZVNoYWRvd1JhdGVcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiU2hhZGluZ0dyYWRlUmF0ZVwiLHByb3BlcnR5TmFtZTpcInNoYWRpbmdHcmFkZVJhdGVcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiU2hhZGVTaGlmdFwiLHByb3BlcnR5TmFtZTpcInNoYWRlU2hpZnRcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46LTEsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIlNoYWRlVG9vbnlcIixwcm9wZXJ0eU5hbWU6XCJzaGFkZVRvb255XCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIkxpZ2h0Q29sb3JBdHRlbnVhdGlvblwiLHByb3BlcnR5TmFtZTpcImxpZ2h0Q29sb3JBdHRlbnVhdGlvblwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJJbmRpcmVjdExpZ2h0SW50ZW5zaXR5XCIscHJvcGVydHlOYW1lOlwiaW5kaXJlY3RMaWdodEludGVuc2l0eVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJSaW1MaWdodGluZ01peFwiLHByb3BlcnR5TmFtZTpcInJpbUxpZ2h0aW5nTWl4XCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIlJpbUZyZXNuZWxQb3dlclwiLHByb3BlcnR5TmFtZTpcInJpbUZyZXNuZWxQb3dlclwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjouMDEsbWF4OjEwMCxzdGVwOjR9LHtsYWJlbDpcIlJpbUxpZnRcIixwcm9wZXJ0eU5hbWU6XCJyaW1MaWZ0XCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIk91dGxpbmVXaWR0aFwiLHByb3BlcnR5TmFtZTpcIm91dGxpbmVXaWR0aFwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjouMDEsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIk91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZVwiLHByb3BlcnR5TmFtZTpcIm91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjoxLG1heDoxMCxzdGVwOi4wMX0se2xhYmVsOlwiT3V0bGluZUxpZ2h0aW5nTWl4XCIscHJvcGVydHlOYW1lOlwib3V0bGluZUxpZ2h0aW5nTWl4XCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIkRlYnVnTW9kZVwiLHByb3BlcnR5TmFtZTpcImRlYnVnTW9kZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoyLHN0ZXA6MX0se2xhYmVsOlwiT3V0bGluZVdpZHRoTW9kZVwiLHByb3BlcnR5TmFtZTpcIm91dGxpbmVXaWR0aE1vZGVcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MixzdGVwOjF9LHtsYWJlbDpcIk91dGxpbmVDb2xvck1vZGVcIixwcm9wZXJ0eU5hbWU6XCJvdXRsaW5lQ29sb3JNb2RlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDoxfSx7bGFiZWw6XCJDdWxsTW9kZVwiLHByb3BlcnR5TmFtZTpcImN1bGxNb2RlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjIsc3RlcDoxfSx7bGFiZWw6XCJPdXRsaW5lQ3VsbE1vZGVcIixwcm9wZXJ0eU5hbWU6XCJvdXRsaW5lQ3VsbE1vZGVcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MixzdGVwOjF9LHtsYWJlbDpcIkFscGhhQ3V0T2ZmXCIscHJvcGVydHlOYW1lOlwiYWxwaGFDdXRPZmZcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiVVYgQW5pbWF0aW9uIFNjcm9sbCBYXCIscHJvcGVydHlOYW1lOlwidXZBbmltYXRpb25TY3JvbGxYXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOi0xLG1heDoxLHN0ZXA6LjF9LHtsYWJlbDpcIlVWIEFuaW1hdGlvbiBTY3JvbGwgWVwiLHByb3BlcnR5TmFtZTpcInV2QW5pbWF0aW9uU2Nyb2xsWVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjotMSxtYXg6MSxzdGVwOi4xfSx7bGFiZWw6XCJVViBBbmltYXRpb24gUm90YXRpb25cIixwcm9wZXJ0eU5hbWU6XCJ1dkFuaW1hdGlvblJvdGF0aW9uXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOi0uNSxtYXg6LjUsc3RlcDouMDF9KX1nZXQgYXBwZW5kZWRUZXh0dXJlcygpe3JldHVyblt0aGlzLl9kaWZmdXNlVGV4dHVyZSx0aGlzLl9lbWlzc2l2ZVRleHR1cmUsdGhpcy5fYnVtcFRleHR1cmUsdGhpcy5fc2hhZGVUZXh0dXJlLHRoaXMuX3JlY2VpdmVTaGFkb3dUZXh0dXJlLHRoaXMuX3NoYWRpbmdHcmFkZVRleHR1cmUsdGhpcy5fcmltVGV4dHVyZSx0aGlzLl9tYXRDYXBUZXh0dXJlLHRoaXMuX291dGxpbmVXaWR0aFRleHR1cmUsdGhpcy5fdXZBbmltYXRpb25NYXNrVGV4dHVyZV19Z2V0IGFwcGVuZGVkQWN0aXZlVGV4dHVyZXMoKXtyZXR1cm4gdGhpcy5hcHBlbmRlZFRleHR1cmVzLmZpbHRlcigoZT0+bnVsbCE9PWUpKX1nZXQgaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbigpe3JldHVybiB0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9ufXNldCBpbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uKGUpe3RoaXMuX2F0dGFjaEltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24oZSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eSgpfV9hdHRhY2hJbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uKGUpe2UhPT10aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uJiYodGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbiYmdGhpcy5faW1hZ2VQcm9jZXNzaW5nT2JzZXJ2ZXImJnRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24ub25VcGRhdGVQYXJhbWV0ZXJzLnJlbW92ZSh0aGlzLl9pbWFnZVByb2Nlc3NpbmdPYnNlcnZlciksdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbj1lfHx0aGlzLmdldFNjZW5lKCkuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbix0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uJiYodGhpcy5faW1hZ2VQcm9jZXNzaW5nT2JzZXJ2ZXI9dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5vblVwZGF0ZVBhcmFtZXRlcnMuYWRkKCgoKT0+e3RoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0ltYWdlUHJvY2Vzc2luZ0RpcnR5KCl9KSkpKX1nZXQgaXNQcmVQYXNzQ2FwYWJsZSgpe3JldHVybiExfWdldCBjYW1lcmFDb2xvckN1cnZlc0VuYWJsZWQoKXtyZXR1cm4gdGhpcy5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yQ3VydmVzRW5hYmxlZH1zZXQgY2FtZXJhQ29sb3JDdXJ2ZXNFbmFibGVkKGUpe3RoaXMuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckN1cnZlc0VuYWJsZWQ9ZX1nZXQgY2FtZXJhQ29sb3JHcmFkaW5nRW5hYmxlZCgpe3JldHVybiB0aGlzLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JHcmFkaW5nRW5hYmxlZH1zZXQgY2FtZXJhQ29sb3JHcmFkaW5nRW5hYmxlZChlKXt0aGlzLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JHcmFkaW5nRW5hYmxlZD1lfWdldCBjYW1lcmFUb25lTWFwcGluZ0VuYWJsZWQoKXtyZXR1cm4gdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi50b25lTWFwcGluZ0VuYWJsZWR9c2V0IGNhbWVyYVRvbmVNYXBwaW5nRW5hYmxlZChlKXt0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLnRvbmVNYXBwaW5nRW5hYmxlZD1lfWdldCBjYW1lcmFFeHBvc3VyZSgpe3JldHVybiB0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmV4cG9zdXJlfXNldCBjYW1lcmFFeHBvc3VyZShlKXt0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmV4cG9zdXJlPWV9Z2V0IGNhbWVyYUNvbnRyYXN0KCl7cmV0dXJuIHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29udHJhc3R9c2V0IGNhbWVyYUNvbnRyYXN0KGUpe3RoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29udHJhc3Q9ZX1nZXQgY2FtZXJhQ29sb3JHcmFkaW5nVGV4dHVyZSgpe3JldHVybiB0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yR3JhZGluZ1RleHR1cmV9c2V0IGNhbWVyYUNvbG9yR3JhZGluZ1RleHR1cmUoZSl7dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckdyYWRpbmdUZXh0dXJlPWV9Z2V0IGNhbWVyYUNvbG9yQ3VydmVzKCl7cmV0dXJuIHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JDdXJ2ZXN9c2V0IGNhbWVyYUNvbG9yQ3VydmVzKGUpe3RoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JDdXJ2ZXM9ZX1nZXQgY2FuUmVuZGVyVG9NUlQoKXtyZXR1cm4hMH1nZXQgYnVtcFNjYWxlKCl7cmV0dXJuIHRoaXMuX2J1bXBTY2FsZX1zZXQgYnVtcFNjYWxlKGUpe3RoaXMuX2J1bXBTY2FsZT1lfWdldCByZWNlaXZlU2hhZG93UmF0ZSgpe3JldHVybiB0aGlzLl9yZWNlaXZlU2hhZG93UmF0ZX1zZXQgcmVjZWl2ZVNoYWRvd1JhdGUoZSl7dGhpcy5fcmVjZWl2ZVNoYWRvd1JhdGU9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCBzaGFkaW5nR3JhZGVSYXRlKCl7cmV0dXJuIHRoaXMuX3NoYWRpbmdHcmFkZVJhdGV9c2V0IHNoYWRpbmdHcmFkZVJhdGUoZSl7dGhpcy5fc2hhZGluZ0dyYWRlUmF0ZT1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IHNoYWRlU2hpZnQoKXtyZXR1cm4gdGhpcy5fc2hhZGVTaGlmdH1zZXQgc2hhZGVTaGlmdChlKXt0aGlzLl9zaGFkZVNoaWZ0PU1hdGgubWF4KC0xLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IHNoYWRlVG9vbnkoKXtyZXR1cm4gdGhpcy5fc2hhZGVUb29ueX1zZXQgc2hhZGVUb29ueShlKXt0aGlzLl9zaGFkZVRvb255PU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgbGlnaHRDb2xvckF0dGVudWF0aW9uKCl7cmV0dXJuIHRoaXMuX2xpZ2h0Q29sb3JBdHRlbnVhdGlvbn1zZXQgbGlnaHRDb2xvckF0dGVudWF0aW9uKGUpe3RoaXMuX2xpZ2h0Q29sb3JBdHRlbnVhdGlvbj1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IGluZGlyZWN0TGlnaHRJbnRlbnNpdHkoKXtyZXR1cm4gdGhpcy5faW5kaXJlY3RMaWdodEludGVuc2l0eX1zZXQgaW5kaXJlY3RMaWdodEludGVuc2l0eShlKXt0aGlzLl9pbmRpcmVjdExpZ2h0SW50ZW5zaXR5PU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgcmltTGlnaHRpbmdNaXgoKXtyZXR1cm4gdGhpcy5fcmltTGlnaHRpbmdNaXh9c2V0IHJpbUxpZ2h0aW5nTWl4KGUpe3RoaXMuX3JpbUxpZ2h0aW5nTWl4PU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgcmltRnJlc25lbFBvd2VyKCl7cmV0dXJuIHRoaXMuX3JpbUZyZXNuZWxQb3dlcn1zZXQgcmltRnJlc25lbFBvd2VyKGUpe3RoaXMuX3JpbUZyZXNuZWxQb3dlcj1NYXRoLm1heCgwLE1hdGgubWluKDEwMCxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgcmltTGlmdCgpe3JldHVybiB0aGlzLl9yaW1MaWZ0fXNldCByaW1MaWZ0KGUpe3RoaXMuX3JpbUxpZnQ9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCBvdXRsaW5lV2lkdGgoKXtyZXR1cm4gdGhpcy5fb3V0bGluZVdpZHRofXNldCBvdXRsaW5lV2lkdGgoZSl7dGhpcy5fb3V0bGluZVdpZHRoPU1hdGgubWF4KC4wMSxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNBdHRyaWJ1dGVzRGlydHkoKX1nZXQgb3V0bGluZVNjYWxlZE1heERpc3RhbmNlKCl7cmV0dXJuIHRoaXMuX291dGxpbmVTY2FsZWRNYXhEaXN0YW5jZX1zZXQgb3V0bGluZVNjYWxlZE1heERpc3RhbmNlKGUpe3RoaXMuX291dGxpbmVTY2FsZWRNYXhEaXN0YW5jZT1NYXRoLm1heCgxLE1hdGgubWluKDEwLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNBdHRyaWJ1dGVzRGlydHkoKX1nZXQgb3V0bGluZUxpZ2h0aW5nTWl4KCl7cmV0dXJuIHRoaXMuX291dGxpbmVMaWdodGluZ01peH1zZXQgb3V0bGluZUxpZ2h0aW5nTWl4KGUpe3RoaXMuX291dGxpbmVMaWdodGluZ01peD1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0F0dHJpYnV0ZXNEaXJ0eSgpfWdldCB1dkFuaW1hdGlvblNjcm9sbFgoKXtyZXR1cm4gdGhpcy5fdXZBbmltYXRpb25TY3JvbGxYfXNldCB1dkFuaW1hdGlvblNjcm9sbFgoZSl7dGhpcy5fdXZBbmltYXRpb25TY3JvbGxYPWUsdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCl9Z2V0IHV2QW5pbWF0aW9uU2Nyb2xsWSgpe3JldHVybiB0aGlzLl91dkFuaW1hdGlvblNjcm9sbFl9c2V0IHV2QW5pbWF0aW9uU2Nyb2xsWShlKXt0aGlzLl91dkFuaW1hdGlvblNjcm9sbFk9ZSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKX1nZXQgdXZBbmltYXRpb25Sb3RhdGlvbigpe3JldHVybiB0aGlzLl91dkFuaW1hdGlvblJvdGF0aW9ufXNldCB1dkFuaW1hdGlvblJvdGF0aW9uKGUpe3RoaXMuX3V2QW5pbWF0aW9uUm90YXRpb249ZSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKX1nZXQgYWxwaGFUZXN0KCl7cmV0dXJuIHRoaXMuX2FscGhhVGVzdH1zZXQgYWxwaGFUZXN0KGUpe3RoaXMuX2FscGhhVGVzdD1lLGU/dGhpcy5hbHBoYUJsZW5kP3RoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9BTFBIQVRFU1RBTkRCTEVORDp0aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFURVNUOnRoaXMuYWxwaGFCbGVuZD90aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFCTEVORDp0aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfT1BBUVVFLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpfWdldCBhbHBoYUJsZW5kKCl7cmV0dXJuIHRoaXMuX2FscGhhQmxlbmR9c2V0IGFscGhhQmxlbmQoZSl7dGhpcy5fYWxwaGFCbGVuZD1lLGU/KHRoaXMuYmFja0ZhY2VDdWxsaW5nPSEwLHRoaXMuYWxwaGFUZXN0P3RoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9BTFBIQVRFU1RBTkRCTEVORDp0aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFCTEVORCk6dGhpcy5hbHBoYVRlc3Q/dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBVEVTVDp0aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfT1BBUVVFLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpfWdldCBvdXRsaW5lV2lkdGhNb2RlKCl7cmV0dXJuIHRoaXMuX291dGxpbmVXaWR0aE1vZGV9c2V0IG91dGxpbmVXaWR0aE1vZGUoZSl7dGhpcy5fb3V0bGluZVdpZHRoTW9kZT1lLGU9PT1ELk5vbmV8fHRoaXMub3V0bGluZVJlbmRlcmVyfHwodGhpcy5vdXRsaW5lUmVuZGVyZXI9bmV3IEEodGhpcy5nZXRTY2VuZSgpLHRoaXMpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKX1lbmFibGVPdXRsaW5lUmVuZGVyKCl7dGhpcy5pc091dGxpbmU9MX1kaXNhYWJsZU91dGxpbmVSZW5kZXIoKXt0aGlzLmlzT3V0bGluZT0wfWdldCBjdWxsTW9kZSgpe3JldHVybiB0aGlzLl9jdWxsTW9kZX1zZXQgY3VsbE1vZGUoZSl7c3dpdGNoKHRoaXMuX2N1bGxNb2RlPWUsdGhpcy5fY3VsbE1vZGUpe2Nhc2UgTC5PZmY6dGhpcy5iYWNrRmFjZUN1bGxpbmc9ITEsdGhpcy5zaWRlT3JpZW50YXRpb249bC5NYXRlcmlhbC5DbG9ja1dpc2VTaWRlT3JpZW50YXRpb24sdGhpcy50d29TaWRlZExpZ2h0aW5nPSExO2JyZWFrO2Nhc2UgTC5Gcm9udDp0aGlzLmJhY2tGYWNlQ3VsbGluZz0hMCx0aGlzLnNpZGVPcmllbnRhdGlvbj1sLk1hdGVyaWFsLkNvdW50ZXJDbG9ja1dpc2VTaWRlT3JpZW50YXRpb24sdGhpcy50d29TaWRlZExpZ2h0aW5nPSEwO2JyZWFrO2Nhc2UgTC5CYWNrOnRoaXMuYmFja0ZhY2VDdWxsaW5nPSEwLHRoaXMuc2lkZU9yaWVudGF0aW9uPWwuTWF0ZXJpYWwuQ2xvY2tXaXNlU2lkZU9yaWVudGF0aW9uLHRoaXMudHdvU2lkZWRMaWdodGluZz0hMX10aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKX1hcHBseU91dGxpbmVDdWxsTW9kZSgpe3RoaXMuc3RvcmVkQ3VsbE1vZGU9dGhpcy5jdWxsTW9kZSx0aGlzLmN1bGxNb2RlPXRoaXMuX291dGxpbmVDdWxsTW9kZX1yZXN0b3JlT3V0bGluZUN1bGxNb2RlKCl7dGhpcy5jdWxsTW9kZT10aGlzLnN0b3JlZEN1bGxNb2RlfWdldE91dGxpbmVSZW5kZXJlck5hbWUoKXtyZXR1cm4gdGhpcy5vdXRsaW5lUmVuZGVyZXI/dGhpcy5vdXRsaW5lUmVuZGVyZXIubmFtZTpcIlwifWdldCBoYXNSZW5kZXJUYXJnZXRUZXh0dXJlcygpe3JldHVybiExfWdldENsYXNzTmFtZSgpe3JldHVyblwiTVRvb25NYXRlcmlhbFwifWdldCB1c2VMb2dhcml0aG1pY0RlcHRoKCl7cmV0dXJuIHRoaXMuX3VzZUxvZ2FyaXRobWljRGVwdGh9c2V0IHVzZUxvZ2FyaXRobWljRGVwdGgoZSl7Y29uc3QgaT1lJiZ0aGlzLmdldFNjZW5lKCkuZ2V0RW5naW5lKCkuZ2V0Q2FwcygpLmZyYWdtZW50RGVwdGhTdXBwb3J0ZWQ7dGhpcy5fdXNlTG9nYXJpdGhtaWNEZXB0aCE9PWkmJih0aGlzLl91c2VMb2dhcml0aG1pY0RlcHRoPWksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCkpfW5lZWRBbHBoYUJsZW5kaW5nKCl7cmV0dXJuIXRoaXMuX2Rpc2FibGVBbHBoYUJsZW5kaW5nJiYodGhpcy5hbHBoYTwxfHx0aGlzLl9zaG91bGRVc2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZSgpKX1uZWVkQWxwaGFUZXN0aW5nKCl7cmV0dXJuISF0aGlzLl9mb3JjZUFscGhhVGVzdHx8ISF0aGlzLl9hbHBoYVRlc3R8fHRoaXMuX2hhc0FscGhhQ2hhbm5lbCgpJiYobnVsbD09dGhpcy5fdHJhbnNwYXJlbmN5TW9kZXx8dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT09PWwuTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFURVNUKX1fc2hvdWxkVXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmUoKXtyZXR1cm4gbnVsbCE9dGhpcy5fZGlmZnVzZVRleHR1cmUmJnRoaXMuX2RpZmZ1c2VUZXh0dXJlLmhhc0FscGhhJiZ0aGlzLl91c2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZSYmdGhpcy5fdHJhbnNwYXJlbmN5TW9kZSE9PWwuTWF0ZXJpYWwuTUFURVJJQUxfT1BBUVVFfV9oYXNBbHBoYUNoYW5uZWwoKXtyZXR1cm4gbnVsbCE9PXRoaXMuX2RpZmZ1c2VUZXh0dXJlJiZ0aGlzLl9kaWZmdXNlVGV4dHVyZS5oYXNBbHBoYX1nZXRBbHBoYVRlc3RUZXh0dXJlKCl7cmV0dXJuIHRoaXMuX2RpZmZ1c2VUZXh0dXJlfWlzUmVhZHlGb3JTdWJNZXNoKGUsaSxuPSExKXtpZih0aGlzLl91bmlmb3JtQnVmZmVyTGF5b3V0QnVpbHR8fHRoaXMuYnVpbGRVbmlmb3JtTGF5b3V0KCksaS5lZmZlY3QmJnRoaXMuaXNGcm96ZW4mJmkuZWZmZWN0Ll93YXNQcmV2aW91c2x5UmVhZHkmJmkuZWZmZWN0Ll93YXNQcmV2aW91c2x5VXNpbmdJbnN0YW5jZXM9PT1uKXJldHVybiEwO2kubWF0ZXJpYWxEZWZpbmVzfHwodGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudEdlbmVyaWMocC5NYXRlcmlhbFBsdWdpbkV2ZW50LkdldERlZmluZU5hbWVzLHRoaXMuX2V2ZW50SW5mbyksaS5tYXRlcmlhbERlZmluZXM9bmV3IEUpO2NvbnN0IHQ9dGhpcy5nZXRTY2VuZSgpLG89aS5tYXRlcmlhbERlZmluZXM7aWYodGhpcy5faXNSZWFkeUZvclN1Yk1lc2goaSkpcmV0dXJuITA7Y29uc3QgYT10LmdldEVuZ2luZSgpO28uX25lZWROb3JtYWxzPWguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JMaWdodHModCxlLG8sdGhpcy5zcGVjdWxhclN1cHBvcnRlZCx0aGlzLl9tYXhTaW11bHRhbmVvdXNMaWdodHMsdGhpcy5fZGlzYWJsZUxpZ2h0aW5nKSx0aGlzLm91dGxpbmVXaWR0aE1vZGUhPT1ELk5vbmUmJihvLl9uZWVkTm9ybWFscz0hMCksdGhpcy5hcHBseURlZmluZXMobyksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0Zvck11bHRpdmlldyh0LG8pO2NvbnN0IGw9dGhpcy5uZWVkQWxwaGFCbGVuZGluZ0Zvck1lc2goZSkmJnQudXNlT3JkZXJJbmRlcGVuZGVudFRyYW5zcGFyZW5jeTtpZihoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yT0lUKHQsbyxsKSxvLl9hcmVUZXh0dXJlc0RpcnR5KXt0aGlzLl9ldmVudEluZm8uaGFzUmVuZGVyVGFyZ2V0VGV4dHVyZXM9ITEsdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudEhhc1JlbmRlclRhcmdldFRleHR1cmVzKHRoaXMuX2V2ZW50SW5mbyksdGhpcy5fY2FjaGVIYXNSZW5kZXJUYXJnZXRUZXh0dXJlcz10aGlzLl9ldmVudEluZm8uaGFzUmVuZGVyVGFyZ2V0VGV4dHVyZXMsby5fbmVlZFVWcz0hMTtmb3IobGV0IGU9MTtlPD1mLkNvbnN0YW50cy5NQVhfU1VQUE9SVEVEX1VWX1NFVFM7KytlKW9bXCJNQUlOVVZcIitlXT0hMTtpZih0LnRleHR1cmVzRW5hYmxlZCl7aWYoISh0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX2RpZmZ1c2VUZXh0dXJlLG8sXCJESUZGVVNFXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX2VtaXNzaXZlVGV4dHVyZSxvLFwiRU1JU1NJVkVcIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fc2hhZGVUZXh0dXJlLG8sXCJTSEFERVwiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9yZWNlaXZlU2hhZG93VGV4dHVyZSxvLFwiUkVDRUlWRV9TSEFET1dcIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fc2hhZGluZ0dyYWRlVGV4dHVyZSxvLFwiU0hBRElOR19HUkFERVwiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9yaW1UZXh0dXJlLG8sXCJSSU1cIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fbWF0Q2FwVGV4dHVyZSxvLFwiTUFUQ0FQXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX291dGxpbmVXaWR0aFRleHR1cmUsbyxcIk9VVExJTkVfV0lEVEhcIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fdXZBbmltYXRpb25NYXNrVGV4dHVyZSxvLFwiVVZfQU5JTUFUSU9OX01BU0tcIikpKXJldHVybiExO2lmKHQuZ2V0RW5naW5lKCkuZ2V0Q2FwcygpLnN0YW5kYXJkRGVyaXZhdGl2ZXMmJnRoaXMuX2J1bXBUZXh0dXJlKXtpZighdGhpcy5fYnVtcFRleHR1cmUuaXNSZWFkeSgpKXJldHVybiExO2guTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JNZXJnZWRVVih0aGlzLl9idW1wVGV4dHVyZSxvLFwiQlVNUFwiKSxvLlBBUkFMTEFYPXRoaXMudXNlUGFyYWxsYXgsby5QQVJBTExBWE9DQ0xVU0lPTj10aGlzLnVzZVBhcmFsbGF4T2NjbHVzaW9uLG8uT0JKRUNUU1BBQ0VfTk9STUFMTUFQPXRoaXMudXNlT2JqZWN0U3BhY2VOb3JtYWxNYXB9ZWxzZSBvLkJVTVA9ITEsby5QQVJBTExBWD0hMSxvLlBBUkFMTEFYT0NDTFVTSU9OPSExO28uVFdPU0lERURMSUdIVElORz0hdGhpcy5fYmFja0ZhY2VDdWxsaW5nJiZ0aGlzLl90d29TaWRlZExpZ2h0aW5nfWVsc2Ugby5ESUZGVVNFPSExLG8uRU1JU1NJVkU9ITEsby5TSEFERT0hMSxvLlJFQ0VJVkVfU0hBRE9XPSExLG8uU0hBRElOR19HUkFERT0hMSxvLlJJTT0hMSxvLk1BVENBUD0hMSxvLk9VVExJTkVfV0lEVEg9ITEsby5CVU1QPSExLG8uVVZfQU5JTUFUSU9OX01BU0s9ITE7by5BTFBIQUZST01ESUZGVVNFPXRoaXMuX3Nob3VsZFVzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlKCksby5QUkVNVUxUSVBMWUFMUEhBPXRoaXMuYWxwaGFNb2RlPT09Zi5Db25zdGFudHMuQUxQSEFfUFJFTVVMVElQTElFRHx8dGhpcy5hbHBoYU1vZGU9PT1mLkNvbnN0YW50cy5BTFBIQV9QUkVNVUxUSVBMSUVEX1BPUlRFUkRVRkYsby5BTFBIQVRFU1RfQUZURVJBTExBTFBIQUNPTVBVVEFUSU9OUz1udWxsIT09dGhpcy50cmFuc3BhcmVuY3lNb2RlLG8uQUxQSEFCTEVORD1udWxsPT09dGhpcy50cmFuc3BhcmVuY3lNb2RlfHx0aGlzLm5lZWRBbHBoYUJsZW5kaW5nRm9yTWVzaChlKX1pZih0aGlzLl9ldmVudEluZm8uaXNSZWFkeUZvclN1Yk1lc2g9ITAsdGhpcy5fZXZlbnRJbmZvLmRlZmluZXM9byx0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50SXNSZWFkeUZvclN1Yk1lc2godGhpcy5fZXZlbnRJbmZvKSwhdGhpcy5fZXZlbnRJbmZvLmlzUmVhZHlGb3JTdWJNZXNoKXJldHVybiExO2lmKG8uX2FyZUltYWdlUHJvY2Vzc2luZ0RpcnR5JiZ0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uKXtpZighdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5pc1JlYWR5KCkpcmV0dXJuITE7dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5wcmVwYXJlRGVmaW5lcyhvKX1pZih0aGlzLmZsaXBVIT09by5GTElQX1UmJihvLkZMSVBfVT10aGlzLmZsaXBVLG8ubWFya0FzVW5wcm9jZXNzZWQoKSksdGhpcy5mbGlwViE9PW8uRkxJUF9WJiYoby5GTElQX1Y9dGhpcy5mbGlwVixvLm1hcmtBc1VucHJvY2Vzc2VkKCkpLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JNaXNjKGUsdCx0aGlzLl91c2VMb2dhcml0aG1pY0RlcHRoLHRoaXMucG9pbnRzQ2xvdWQsdGhpcy5mb2dFbmFibGVkLHRoaXMuX3Nob3VsZFR1cm5BbHBoYVRlc3RPbihlKXx8dGhpcy5fZm9yY2VBbHBoYVRlc3QsbyksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0ZvckZyYW1lQm91bmRWYWx1ZXModCxhLG8sbixudWxsLGkuZ2V0UmVuZGVyaW5nTWVzaCgpLmhhc1RoaW5JbnN0YW5jZXMpLHRoaXMuX2V2ZW50SW5mby5kZWZpbmVzPW8sdGhpcy5fZXZlbnRJbmZvLm1lc2g9ZSx0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50UHJlcGFyZURlZmluZXNCZWZvcmVBdHRyaWJ1dGVzKHRoaXMuX2V2ZW50SW5mbyksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0ZvckF0dHJpYnV0ZXMoZSxvLHRoaXMudXNlVmVydGV4Q29sb3IsdGhpcy51c2VCb25lcyx0aGlzLnVzZU1vcnBoVGFyZ2V0cyx0aGlzLnVzZVZlcnRleEFscGhhLHRoaXMudXNlQmFrZWRWZXJ0ZXhBbmltYXRpb24pLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRQcmVwYXJlRGVmaW5lcyh0aGlzLl9ldmVudEluZm8pLG8uaXNEaXJ0eSl7Y29uc3Qgbj1vLl9hcmVMaWdodHNEaXNwb3NlZDtvLm1hcmtBc1Byb2Nlc3NlZCgpO2NvbnN0IGw9bmV3IHUuRWZmZWN0RmFsbGJhY2tzO28uQlVNUCYmbC5hZGRGYWxsYmFjaygwLFwiQlVNUFwiKSxvLlBBUkFMTEFYJiZsLmFkZEZhbGxiYWNrKDEsXCJQQVJBTExBWFwiKSxvLlBBUkFMTEFYT0NDTFVTSU9OJiZsLmFkZEZhbGxiYWNrKDAsXCJQQVJBTExBWE9DQ0xVU0lPTlwiKSxvLkZPRyYmbC5hZGRGYWxsYmFjaygxLFwiRk9HXCIpLG8uUE9JTlRTSVpFJiZsLmFkZEZhbGxiYWNrKDAsXCJQT0lOVFNJWkVcIiksby5MT0dBUklUSE1JQ0RFUFRIJiZsLmFkZEZhbGxiYWNrKDAsXCJMT0dBUklUSE1JQ0RFUFRIXCIpLGguTWF0ZXJpYWxIZWxwZXIuSGFuZGxlRmFsbGJhY2tzRm9yU2hhZG93cyhvLGwsdGhpcy5fbWF4U2ltdWx0YW5lb3VzTGlnaHRzKSxvLk1VTFRJVklFVyYmbC5hZGRGYWxsYmFjaygwLFwiTVVMVElWSUVXXCIpO2NvbnN0IGQ9W3IuVmVydGV4QnVmZmVyLlBvc2l0aW9uS2luZF07by5OT1JNQUwmJmQucHVzaChyLlZlcnRleEJ1ZmZlci5Ob3JtYWxLaW5kKSxvLlRBTkdFTlQmJmQucHVzaChyLlZlcnRleEJ1ZmZlci5UYW5nZW50S2luZCk7Zm9yKGxldCBlPTE7ZTw9Zi5Db25zdGFudHMuTUFYX1NVUFBPUlRFRF9VVl9TRVRTOysrZSlvW1wiVVZcIitlXSYmZC5wdXNoKGB1diR7MT09PWU/XCJcIjplfWApO28uSU5TVEFOQ0VTQ09MT1ImJmQucHVzaChyLlZlcnRleEJ1ZmZlci5Db2xvckluc3RhbmNlS2luZCksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlQXR0cmlidXRlc0ZvckJvbmVzKGQsZSxvLGwpLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZUF0dHJpYnV0ZXNGb3JJbnN0YW5jZXMoZCxvKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVBdHRyaWJ1dGVzRm9yTW9ycGhUYXJnZXRzKGQsZSxvKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVBdHRyaWJ1dGVzRm9yQmFrZWRWZXJ0ZXhBbmltYXRpb24oZCxlLG8pO2NvbnN0IG09XCJtdG9vblwiLGM9W1wid29ybGRcIixcInZpZXdcIixcInZpZXdQcm9qZWN0aW9uXCIsXCJ2RXllUG9zaXRpb25cIixcInZMaWdodHNUeXBlXCIsXCJ2QW1iaWVudENvbG9yXCIsXCJ2aXNpYmlsaXR5XCIsXCJ2Rm9nSW5mb3NcIixcInZGb2dDb2xvclwiLFwicG9pbnRTaXplXCIsXCJtQm9uZXNcIixcInZDbGlwUGxhbmVcIixcInZDbGlwUGxhbmUyXCIsXCJ2Q2xpcFBsYW5lM1wiLFwidkNsaXBQbGFuZTRcIixcInZDbGlwUGxhbmU1XCIsXCJ2Q2xpcFBsYW5lNlwiLFwibG9nYXJpdGhtaWNEZXB0aENvbnN0YW50XCIsXCJ2VGFuZ2VudFNwYWNlUGFyYW1zXCIsXCJhbHBoYUN1dE9mZlwiLFwiYm9uZVRleHR1cmVXaWR0aFwiLFwibW9ycGhUYXJnZXRUZXh0dXJlSW5mb1wiLFwibW9ycGhUYXJnZXRUZXh0dXJlSW5kaWNlc1wiLFwidkRpZmZ1c2VDb2xvclwiLFwidkRpZmZ1c2VJbmZvc1wiLFwiZGlmZnVzZU1hdHJpeFwiLFwidkVtaXNzaXZlQ29sb3JcIixcInZFbWlzc2l2ZUluZm9zXCIsXCJlbWlzc2l2ZU1hdHJpeFwiLFwidkJ1bXBJbmZvc1wiLFwiYnVtcE1hdHJpeFwiLFwidlNoYWRlQ29sb3JcIixcInZTaGFkZUluZm9zXCIsXCJzaGFkZU1hdHJpeFwiLFwidlJlY2VpdmVTaGFkb3dJbmZvc1wiLFwicmVjZWl2ZVNoYWRvd01hdHJpeFwiLFwidlNoYWRpbmdHcmFkZUluZm9zXCIsXCJzaGFkaW5nR3JhZGVNYXRyaXhcIixcInZSaW1Db2xvclwiLFwidlJpbUluZm9zXCIsXCJSaW1NYXRyaXhcIixcInZNYXRDYXBJbmZvc1wiLFwiTWF0Q2FwTWF0cml4XCIsXCJ2T3V0bGluZUNvbG9yXCIsXCJ2T3V0bGluZVdpZHRoSW5mb3NcIixcIm91dGxpbmVXaWR0aE1hdHJpeFwiLFwiYXNwZWN0XCIsXCJpc091dGxpbmVcIixcInNoYWRpbmdHcmFkZVJhdGVcIixcInJlY2VpdmVTaGFkb3dSYXRlXCIsXCJzaGFkZVNoaWZ0XCIsXCJzaGFkZVRvb255XCIsXCJyaW1MaWdodGluZ01peFwiLFwicmltRnJlc25lbFBvd2VyXCIsXCJyaW1MaWZ0XCIsXCJsaWdodENvbG9yQXR0ZW51YXRpb25cIixcImluZGlyZWN0TGlnaHRJbnRlbnNpdHlcIixcIm91dGxpbmVXaWR0aFwiLFwib3V0bGluZVNjYWxlZE1heERpc3RhbmNlXCIsXCJvdXRsaW5lTGlnaHRpbmdNaXhcIixcInV2QW5pbWF0aW9uU2Nyb2xsWFwiLFwidXZBbmltYXRpb25TY3JvbGxZXCIsXCJ1dkFuaW1hdGlvblJvdGF0aW9uXCIsXCJ2RXllVXBcIixcInRpbWVcIixcInByb2plY3Rpb25cIl0sZz1bXCJkaWZmdXNlU2FtcGxlclwiLFwiYW1iaWVudFNhbXBsZXJcIixcImVtaXNzaXZlU2FtcGxlclwiLFwiYnVtcFNhbXBsZXJcIixcImJvbmVTYW1wbGVyXCIsXCJtb3JwaFRhcmdldHNcIixcIm9pdERlcHRoU2FtcGxlclwiLFwib2l0RnJvbnRDb2xvclNhbXBsZXJcIixcInNoYWRlU2FtcGxlclwiLFwicmVjZWl2ZVNoYWRvd1NhbXBsZXJcIixcInNoYWRpbmdHcmFkZVNhbXBsZXJcIixcInJpbVNhbXBsZXJcIixcIm1hdENhcFNhbXBsZXJcIixcIm91dGxpbmVXaWR0aFNhbXBsZXJcIixcInV2QW5pbWF0aW9uTWFza1NhbXBsZXJcIl0sXz1bXCJNYXRlcmlhbFwiLFwiU2NlbmVcIixcIk1lc2hcIl07dGhpcy5fZXZlbnRJbmZvLmZhbGxiYWNrcz1sLHRoaXMuX2V2ZW50SW5mby5mYWxsYmFja1Jhbms9MCx0aGlzLl9ldmVudEluZm8uZGVmaW5lcz1vLHRoaXMuX2V2ZW50SW5mby51bmlmb3Jtcz1jLHRoaXMuX2V2ZW50SW5mby5hdHRyaWJ1dGVzPWQsdGhpcy5fZXZlbnRJbmZvLnNhbXBsZXJzPWcsdGhpcy5fZXZlbnRJbmZvLnVuaWZvcm1CdWZmZXJzTmFtZXM9Xyx0aGlzLl9ldmVudEluZm8uY3VzdG9tQ29kZT12b2lkIDAsdGhpcy5fZXZlbnRJbmZvLm1lc2g9ZSx0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50R2VuZXJpYyhwLk1hdGVyaWFsUGx1Z2luRXZlbnQuUHJlcGFyZUVmZmVjdCx0aGlzLl9ldmVudEluZm8pLHMuSW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbiYmKHMuSW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5QcmVwYXJlVW5pZm9ybXMoYyxvKSxzLkltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uUHJlcGFyZVNhbXBsZXJzKGcsbykpLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZVVuaWZvcm1zQW5kU2FtcGxlcnNMaXN0KHt1bmlmb3Jtc05hbWVzOmMsdW5pZm9ybUJ1ZmZlcnNOYW1lczpfLHNhbXBsZXJzOmcsZGVmaW5lczpvLG1heFNpbXVsdGFuZW91c0xpZ2h0czp0aGlzLl9tYXhTaW11bHRhbmVvdXNMaWdodHN9KTtjb25zdCBBPXt9LEk9by50b1N0cmluZygpLHY9aS5lZmZlY3Q7bGV0IE09dC5nZXRFbmdpbmUoKS5jcmVhdGVFZmZlY3QobSx7YXR0cmlidXRlczpkLHVuaWZvcm1zTmFtZXM6Yyx1bmlmb3JtQnVmZmVyc05hbWVzOl8sc2FtcGxlcnM6ZyxkZWZpbmVzOkksZmFsbGJhY2tzOmwsb25Db21waWxlZDp0aGlzLm9uQ29tcGlsZWQsb25FcnJvcjp0aGlzLm9uRXJyb3IsaW5kZXhQYXJhbWV0ZXJzOnttYXhTaW11bHRhbmVvdXNMaWdodHM6dGhpcy5fbWF4U2ltdWx0YW5lb3VzTGlnaHRzLG1heFNpbXVsdGFuZW91c01vcnBoVGFyZ2V0czpvLk5VTV9NT1JQSF9JTkZMVUVOQ0VSU30scHJvY2Vzc0ZpbmFsQ29kZTpBLnByb2Nlc3NGaW5hbENvZGUscHJvY2Vzc0NvZGVBZnRlckluY2x1ZGVzOnRoaXMuX2V2ZW50SW5mby5jdXN0b21Db2RlLG11bHRpVGFyZ2V0Om8uUFJFUEFTU30sYSk7aWYoTSlpZih0aGlzLl9vbkVmZmVjdENyZWF0ZWRPYnNlcnZhYmxlJiYoUy5lZmZlY3Q9TSxTLnN1Yk1lc2g9aSx0aGlzLl9vbkVmZmVjdENyZWF0ZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhTKSksdGhpcy5hbGxvd1NoYWRlckhvdFN3YXBwaW5nJiZ2JiYhTS5pc1JlYWR5KCkpe2lmKE09dixvLm1hcmtBc1VucHJvY2Vzc2VkKCksbilyZXR1cm4gby5fYXJlTGlnaHRzRGlzcG9zZWQ9ITAsITF9ZWxzZSB0LnJlc2V0Q2FjaGVkTWF0ZXJpYWwoKSxpLnNldEVmZmVjdChNLG8sdGhpcy5fbWF0ZXJpYWxDb250ZXh0KX1yZXR1cm4hKCFpLmVmZmVjdHx8IWkuZWZmZWN0LmlzUmVhZHkoKXx8KG8uX3JlbmRlcklkPXQuZ2V0UmVuZGVySWQoKSxpLmVmZmVjdC5fd2FzUHJldmlvdXNseVJlYWR5PSEwLGkuZWZmZWN0Ll93YXNQcmV2aW91c2x5VXNpbmdJbnN0YW5jZXM9biwwKSl9YnVpbGRVbmlmb3JtTGF5b3V0KCl7Y29uc3QgZT10aGlzLl91bmlmb3JtQnVmZmVyO2UuYWRkVW5pZm9ybShcInZEaWZmdXNlQ29sb3JcIiw0KSxlLmFkZFVuaWZvcm0oXCJ2RGlmZnVzZUluZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwiZGlmZnVzZU1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2RW1pc3NpdmVDb2xvclwiLDMpLGUuYWRkVW5pZm9ybShcInZFbWlzc2l2ZUluZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwiZW1pc3NpdmVNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidkJ1bXBJbmZvc1wiLDMpLGUuYWRkVW5pZm9ybShcImJ1bXBNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidlNoYWRlQ29sb3JcIiwzKSxlLmFkZFVuaWZvcm0oXCJ2U2hhZGVJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcInNoYWRlTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZSZWNlaXZlU2hhZG93SW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJyZWNlaXZlU2hhZG93TWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZTaGFkaW5nR3JhZGVJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcInNoYWRpbmdHcmFkZU1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2UmltQ29sb3JcIiwzKSxlLmFkZFVuaWZvcm0oXCJ2UmltSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJyaW1NYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidk1hdENhcEluZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwibWF0Q2FwTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZPdXRsaW5lQ29sb3JcIiwzKSxlLmFkZFVuaWZvcm0oXCJ2T3V0bGluZVdpZHRoSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJvdXRsaW5lV2lkdGhNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidlV2QW5pbWF0aW9uTWFza0luZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwidXZBbmltYXRpb25NYXNrTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZUYW5nZW50U3BhY2VQYXJhbXNcIiwyKSxlLmFkZFVuaWZvcm0oXCJwb2ludFNpemVcIiwxKSxlLmFkZFVuaWZvcm0oXCJzaGFkaW5nR3JhZGVSYXRlXCIsMSksZS5hZGRVbmlmb3JtKFwicmVjZWl2ZVNoYWRvd1JhdGVcIiwxKSxlLmFkZFVuaWZvcm0oXCJzaGFkZVNoaWZ0XCIsMSksZS5hZGRVbmlmb3JtKFwic2hhZGVUb29ueVwiLDEpLGUuYWRkVW5pZm9ybShcImxpZ2h0Q29sb3JBdHRlbnVhdGlvblwiLDEpLGUuYWRkVW5pZm9ybShcImluZGlyZWN0TGlnaHRJbnRlbnNpdHlcIiwxKSxlLmFkZFVuaWZvcm0oXCJyaW1MaWdodGluZ01peFwiLDEpLGUuYWRkVW5pZm9ybShcInJpbUZyZXNuZWxQb3dlclwiLDEpLGUuYWRkVW5pZm9ybShcInJpbUxpZnRcIiwxKSxlLmFkZFVuaWZvcm0oXCJvdXRsaW5lV2lkdGhcIiwxKSxlLmFkZFVuaWZvcm0oXCJvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2VcIiwxKSxlLmFkZFVuaWZvcm0oXCJvdXRsaW5lTGlnaHRpbmdNaXhcIiwxKSxlLmFkZFVuaWZvcm0oXCJ1dkFuaW1hdGlvblNjcm9sbFhcIiwxKSxlLmFkZFVuaWZvcm0oXCJ1dkFuaW1hdGlvblNjcm9sbFlcIiwxKSxlLmFkZFVuaWZvcm0oXCJ1dkFuaW1hdGlvblJvdGF0aW9uXCIsMSksZS5hZGRVbmlmb3JtKFwidkV5ZVVwXCIsMyksZS5hZGRVbmlmb3JtKFwiYWxwaGFDdXRPZmZcIiwxKSxlLmFkZFVuaWZvcm0oXCJ2QW1iaWVudENvbG9yXCIsMyksZS5hZGRVbmlmb3JtKFwiYXNwZWN0XCIsMSksZS5hZGRVbmlmb3JtKFwiaXNPdXRsaW5lXCIsMSksZS5hZGRVbmlmb3JtKFwidGltZVwiLDQpLGUuYWRkVW5pZm9ybShcInZpc2liaWxpdHlcIiwxKSxzdXBlci5idWlsZFVuaWZvcm1MYXlvdXQoKX1iaW5kRm9yU3ViTWVzaChlLGksbil7dmFyIGE7Y29uc3Qgcj10aGlzLmdldFNjZW5lKCkscz1uLm1hdGVyaWFsRGVmaW5lcyxsPW4uZWZmZWN0O2lmKCFzfHwhbClyZXR1cm47dGhpcy5fYWN0aXZlRWZmZWN0PWwsaS5nZXRNZXNoVW5pZm9ybUJ1ZmZlcigpLmJpbmRUb0VmZmVjdChsLFwiTWVzaFwiKSxpLnRyYW5zZmVyVG9FZmZlY3QoZSksdGhpcy5fdW5pZm9ybUJ1ZmZlci5iaW5kVG9FZmZlY3QobCxcIk1hdGVyaWFsXCIpLHRoaXMuX2V2ZW50SW5mby5zdWJNZXNoPW4sdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudEhhcmRCaW5kRm9yU3ViTWVzaCh0aGlzLl9ldmVudEluZm8pLHMuT0JKRUNUU1BBQ0VfTk9STUFMTUFQJiYoZS50b05vcm1hbE1hdHJpeCh0aGlzLl9ub3JtYWxNYXRyaXgpLHRoaXMuYmluZE9ubHlOb3JtYWxNYXRyaXgodGhpcy5fbm9ybWFsTWF0cml4KSk7Y29uc3QgZD10aGlzLl9tdXN0UmViaW5kKHIsbCxpLnZpc2liaWxpdHkpO2guTWF0ZXJpYWxIZWxwZXIuQmluZEJvbmVzUGFyYW1ldGVycyhpLGwpO2NvbnN0IGY9dGhpcy5fdW5pZm9ybUJ1ZmZlcjtpZihkKXt0aGlzLmJpbmRWaWV3UHJvamVjdGlvbihsKSxmLnVzZVVibyYmdGhpcy5pc0Zyb3plbiYmZi5pc1N5bmN8fChyLnRleHR1cmVzRW5hYmxlZCYmKHRoaXMuYmluZFRleHR1cmUodGhpcy5fZGlmZnVzZVRleHR1cmUsZixsLFwiZGlmZnVzZVwiLFwidkRpZmZ1c2VJbmZvc1wiKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX2VtaXNzaXZlVGV4dHVyZSxmLGwsXCJlbWlzc2l2ZVwiLFwidkVtaXNzaXZlSW5mb3NcIiksdGhpcy5fYnVtcFRleHR1cmUmJnIuZ2V0RW5naW5lKCkuZ2V0Q2FwcygpLnN0YW5kYXJkRGVyaXZhdGl2ZXMmJihmLnVwZGF0ZUZsb2F0MyhcInZCdW1wSW5mb3NcIix0aGlzLl9idW1wVGV4dHVyZS5jb29yZGluYXRlc0luZGV4LDEvdGhpcy5fYnVtcFRleHR1cmUubGV2ZWwsdGhpcy5fYnVtcFNjYWxlKSxoLk1hdGVyaWFsSGVscGVyLkJpbmRUZXh0dXJlTWF0cml4KHRoaXMuX2J1bXBUZXh0dXJlLGYsXCJidW1wXCIpLGwuc2V0VGV4dHVyZShcImJ1bXBTYW1wbGVyXCIsdGhpcy5fYnVtcFRleHR1cmUpLHIuX21pcnJvcmVkQ2FtZXJhUG9zaXRpb24/Zi51cGRhdGVGbG9hdDIoXCJ2VGFuZ2VudFNwYWNlUGFyYW1zXCIsdGhpcy5faW52ZXJ0Tm9ybWFsTWFwWD8xOi0xLHRoaXMuX2ludmVydE5vcm1hbE1hcFk/MTotMSk6Zi51cGRhdGVGbG9hdDIoXCJ2VGFuZ2VudFNwYWNlUGFyYW1zXCIsdGhpcy5faW52ZXJ0Tm9ybWFsTWFwWD8tMToxLHRoaXMuX2ludmVydE5vcm1hbE1hcFk/LTE6MSkpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fc2hhZGVUZXh0dXJlLGYsbCxcInNoYWRlXCIsXCJ2U2hhZGVJbmZvc1wiKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX3JlY2VpdmVTaGFkb3dUZXh0dXJlLGYsbCxcInJlY2VpdmVTaGFkb3dcIixcInZSZWNlaXZlU2hhZG93SW5mb3NcIiksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9zaGFkaW5nR3JhZGVUZXh0dXJlLGYsbCxcInNoYWRpbmdHcmFkZVwiLFwidlNoYWRpbmdHcmFkZUluZm9zXCIpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fcmltVGV4dHVyZSxmLGwsXCJyaW1cIixcInZSaW1JbmZvc1wiKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX21hdENhcFRleHR1cmUsZixsLFwibWF0Q2FwXCIsXCJ2TWF0Q2FwSW5mb3NcIiksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9vdXRsaW5lV2lkdGhUZXh0dXJlLGYsbCxcIm91dGxpbmVXaWR0aFwiLFwidk91dGxpbmVXaWR0aEluZm9zXCIpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fdXZBbmltYXRpb25NYXNrVGV4dHVyZSxmLGwsXCJ1dkFuaW1hdGlvbk1hc2tcIixcInZVdkFuaW1hdGlvbk1hc2tJbmZvc1wiKSx0aGlzLl9oYXNBbHBoYUNoYW5uZWwoKSYmZi51cGRhdGVGbG9hdChcImFscGhhQ3V0T2ZmXCIsdGhpcy5hbHBoYUN1dE9mZikpLHRoaXMucG9pbnRzQ2xvdWQmJmYudXBkYXRlRmxvYXQoXCJwb2ludFNpemVcIix0aGlzLnBvaW50U2l6ZSksZi51cGRhdGVGbG9hdChcInJlY2VpdmVTaGFkb3dSYXRlXCIsdGhpcy5fcmVjZWl2ZVNoYWRvd1JhdGUpLGYudXBkYXRlRmxvYXQoXCJzaGFkaW5nR3JhZGVSYXRlXCIsdGhpcy5fc2hhZGluZ0dyYWRlUmF0ZSksZi51cGRhdGVGbG9hdChcInNoYWRlU2hpZnRcIix0aGlzLl9zaGFkZVNoaWZ0KSxmLnVwZGF0ZUZsb2F0KFwic2hhZGVUb29ueVwiLHRoaXMuX3NoYWRlVG9vbnkpLGYudXBkYXRlRmxvYXQoXCJsaWdodENvbG9yQXR0ZW51YXRpb25cIix0aGlzLl9saWdodENvbG9yQXR0ZW51YXRpb24pLGYudXBkYXRlRmxvYXQoXCJpbmRpcmVjdExpZ2h0SW50ZW5zaXR5XCIsdGhpcy5faW5kaXJlY3RMaWdodEludGVuc2l0eSksZi51cGRhdGVGbG9hdChcInJpbUxpZ2h0aW5nTWl4XCIsdGhpcy5fcmltTGlnaHRpbmdNaXgpLGYudXBkYXRlRmxvYXQoXCJyaW1GcmVzbmVsUG93ZXJcIix0aGlzLl9yaW1GcmVzbmVsUG93ZXIpLGYudXBkYXRlRmxvYXQoXCJyaW1MaWZ0XCIsdGhpcy5fcmltTGlmdCksZi51cGRhdGVGbG9hdChcIm91dGxpbmVXaWR0aFwiLHRoaXMuX291dGxpbmVXaWR0aCksZi51cGRhdGVGbG9hdChcIm91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZVwiLHRoaXMuX291dGxpbmVTY2FsZWRNYXhEaXN0YW5jZSksZi51cGRhdGVGbG9hdChcIm91dGxpbmVMaWdodGluZ01peFwiLHRoaXMuX291dGxpbmVMaWdodGluZ01peCksZi51cGRhdGVGbG9hdChcInV2QW5pbWF0aW9uU2Nyb2xsWFwiLHRoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWCksZi51cGRhdGVGbG9hdChcInV2QW5pbWF0aW9uU2Nyb2xsWVwiLHRoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWSksZi51cGRhdGVGbG9hdChcInV2QW5pbWF0aW9uUm90YXRpb25cIix0aGlzLl91dkFuaW1hdGlvblJvdGF0aW9uKSxyLmFtYmllbnRDb2xvci5tdWx0aXBseVRvUmVmKHRoaXMuYW1iaWVudENvbG9yLHRoaXMuX2dsb2JhbEFtYmllbnRDb2xvciksZi51cGRhdGVDb2xvcjMoXCJ2QW1iaWVudENvbG9yXCIsdGhpcy5fZ2xvYmFsQW1iaWVudENvbG9yKSxmLnVwZGF0ZUNvbG9yNChcInZEaWZmdXNlQ29sb3JcIix0aGlzLmRpZmZ1c2VDb2xvcix0aGlzLmFscGhhKSxmLnVwZGF0ZUNvbG9yMyhcInZFbWlzc2l2ZUNvbG9yXCIsdGhpcy5lbWlzc2l2ZUNvbG9yKSxmLnVwZGF0ZUNvbG9yMyhcInZTaGFkZUNvbG9yXCIsdGhpcy5zaGFkZUNvbG9yKSxmLnVwZGF0ZUNvbG9yMyhcInZSaW1Db2xvclwiLHRoaXMucmltQ29sb3IpLGYudXBkYXRlQ29sb3I0KFwidk91dGxpbmVDb2xvclwiLHRoaXMub3V0bGluZUNvbG9yLDEpLGYudXBkYXRlVmVjdG9yMyhcInZFeWVVcFwiLHIuYWN0aXZlQ2FtZXJhLnVwVmVjdG9yKSk7Y29uc3QgZT1yO2UudXNlT3JkZXJJbmRlcGVuZGVudFRyYW5zcGFyZW5jeSYmdGhpcy5uZWVkQWxwaGFCbGVuZGluZ0Zvck1lc2goaSkmJmUuZGVwdGhQZWVsaW5nUmVuZGVyZXImJmUuZGVwdGhQZWVsaW5nUmVuZGVyZXIuYmluZChsKSx0aGlzLl9ldmVudEluZm8uc3ViTWVzaD1uLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRCaW5kRm9yU3ViTWVzaCh0aGlzLl9ldmVudEluZm8pLGguTWF0ZXJpYWxIZWxwZXIuQmluZENsaXBQbGFuZShsLHIpLHRoaXMuYmluZEV5ZVBvc2l0aW9uKGwpfWVsc2Ugci5nZXRFbmdpbmUoKS5fZmVhdHVyZXMubmVlZFRvQWx3YXlzQmluZFVuaWZvcm1CdWZmZXJzJiYodGhpcy5fbmVlZFRvQmluZFNjZW5lVWJvPSEwKTtpZihkfHwhdGhpcy5pc0Zyb3plbil7ci5saWdodHNFbmFibGVkJiYhdGhpcy5fZGlzYWJsZUxpZ2h0aW5nJiZoLk1hdGVyaWFsSGVscGVyLkJpbmRMaWdodHMocixpLGwscyx0aGlzLl9tYXhTaW11bHRhbmVvdXNMaWdodHMpLChyLmZvZ0VuYWJsZWQmJmkuYXBwbHlGb2cmJnIuZm9nTW9kZSE9PXQuU2NlbmUuRk9HTU9ERV9OT05FfHxpLnJlY2VpdmVTaGFkb3dzKSYmdGhpcy5iaW5kVmlldyhsKSxoLk1hdGVyaWFsSGVscGVyLkJpbmRGb2dQYXJhbWV0ZXJzKHIsaSxsKSxzLk5VTV9NT1JQSF9JTkZMVUVOQ0VSUyYmaC5NYXRlcmlhbEhlbHBlci5CaW5kTW9ycGhUYXJnZXRQYXJhbWV0ZXJzKGksbCkscy5CQUtFRF9WRVJURVhfQU5JTUFUSU9OX1RFWFRVUkUmJihudWxsPT09KGE9aS5iYWtlZFZlcnRleEFuaW1hdGlvbk1hbmFnZXIpfHx2b2lkIDA9PT1hfHxhLmJpbmQobCxzLklOU1RBTkNFUykpLHRoaXMudXNlTG9nYXJpdGhtaWNEZXB0aCYmaC5NYXRlcmlhbEhlbHBlci5CaW5kTG9nRGVwdGgocyxsLHIpLHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24mJiF0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmFwcGx5QnlQb3N0UHJvY2VzcyYmdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5iaW5kKHRoaXMuX2FjdGl2ZUVmZmVjdCksZi51cGRhdGVGbG9hdChcImFzcGVjdFwiLHIuZ2V0RW5naW5lKCkuZ2V0QXNwZWN0UmF0aW8oci5hY3RpdmVDYW1lcmEpKSxmLnVwZGF0ZUZsb2F0KFwiaXNPdXRsaW5lXCIsdGhpcy5pc091dGxpbmUpO2NvbnN0IGU9d2luZG93LnBlcmZvcm1hbmNlLm5vdygpLzFlMztmLnVwZGF0ZVZlY3RvcjQoXCJ0aW1lXCIsbmV3IG8uVmVjdG9yNChlLzIwLGUsMiplLDMqZSkpfXRoaXMuX2FmdGVyQmluZChpLHRoaXMuX2FjdGl2ZUVmZmVjdCksZi51cGRhdGUoKX1nZXRBbmltYXRhYmxlcygpe2NvbnN0IGU9c3VwZXIuZ2V0QW5pbWF0YWJsZXMoKTtmb3IoY29uc3QgaSBvZiB0aGlzLmFwcGVuZGVkQWN0aXZlVGV4dHVyZXMpaS5hbmltYXRpb25zJiZpLmFuaW1hdGlvbnMubGVuZ3RoPjAmJmUucHVzaChpKTtyZXR1cm4gZX1nZXRBY3RpdmVUZXh0dXJlcygpe3JldHVybiBzdXBlci5nZXRBY3RpdmVUZXh0dXJlcygpLmNvbmNhdCh0aGlzLmFwcGVuZGVkQWN0aXZlVGV4dHVyZXMpfWhhc1RleHR1cmUoZSl7aWYoc3VwZXIuaGFzVGV4dHVyZShlKSlyZXR1cm4hMDtmb3IoY29uc3QgaSBvZiB0aGlzLmFwcGVuZGVkQWN0aXZlVGV4dHVyZXMpaWYoaT09PWUpcmV0dXJuITA7cmV0dXJuITF9ZGlzcG9zZShlLGkpe2lmKGRlbGV0ZSB0aGlzLm91dGxpbmVSZW5kZXJlcixpKWZvcihjb25zdCBlIG9mIHRoaXMuYXBwZW5kZWRBY3RpdmVUZXh0dXJlcyllLmRpc3Bvc2UoKTt0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uJiZ0aGlzLl9pbWFnZVByb2Nlc3NpbmdPYnNlcnZlciYmdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5vblVwZGF0ZVBhcmFtZXRlcnMucmVtb3ZlKHRoaXMuX2ltYWdlUHJvY2Vzc2luZ09ic2VydmVyKSxzdXBlci5kaXNwb3NlKGUsaSl9Y2xvbmUoZSl7Y29uc3Qgbj1pLlNlcmlhbGl6YXRpb25IZWxwZXIuQ2xvbmUoKCgpPT5uZXcgeChlLHRoaXMuZ2V0U2NlbmUoKSkpLHRoaXMpO3JldHVybiBuLm5hbWU9ZSxuLmlkPWUsdGhpcy5zdGVuY2lsLmNvcHlUbyhuLnN0ZW5jaWwpLG59c3RhdGljIFBhcnNlKGUsbix0KXtjb25zdCBvPWkuU2VyaWFsaXphdGlvbkhlbHBlci5QYXJzZSgoKCk9Pm5ldyB4KGUubmFtZSxuKSksZSxuLHQpO3JldHVybiBlLnN0ZW5jaWwmJm8uc3RlbmNpbC5wYXJzZShlLnN0ZW5jaWwsbix0KSxvfWJpbmRUZXh0dXJlKGUsaSxuLHQsbyl7ZSYmKHRoaXMuX3VuaWZvcm1CdWZmZXIudXBkYXRlRmxvYXQyKG8sZS5jb29yZGluYXRlc0luZGV4LGUubGV2ZWwpLGguTWF0ZXJpYWxIZWxwZXIuQmluZFRleHR1cmVNYXRyaXgoZSxpLHQpLG4uc2V0VGV4dHVyZShgJHt0fVNhbXBsZXJgLGUpKX1pc1JlYWR5Rm9yVGV4dHVyZShlLGksbil7cmV0dXJuIGU/ISFlLmlzUmVhZHlPck5vdEJsb2NraW5nKCkmJihoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yTWVyZ2VkVVYoZSxpLG4pLCEwKTooaVtuXT0hMSwhMCl9YXBwbHlEZWZpbmVzKGUpe3N3aXRjaCh0aGlzLl9kZWJ1Z01vZGUpe2Nhc2UgVC5Ob3JtYWw6ITAhPT1lLk1UT09OX0RFQlVHX05PUk1BTCYmKGUuTVRPT05fREVCVUdfTk9STUFMPSEwLGUuTVRPT05fREVCVUdfTElUU0hBREVSQVRFPSExLGUubWFya0FzVW5wcm9jZXNzZWQoKSk7YnJlYWs7Y2FzZSBULkxpdFNoYWRlUmF0ZTohMCE9PWUuTVRPT05fREVCVUdfTElUU0hBREVSQVRFJiYoZS5NVE9PTl9ERUJVR19OT1JNQUw9ITEsZS5NVE9PTl9ERUJVR19MSVRTSEFERVJBVEU9ITAsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKTticmVhaztjYXNlIFQuTm9uZTohMD09PWUuTVRPT05fREVCVUdfTk9STUFMJiYoZS5NVE9PTl9ERUJVR19OT1JNQUw9ITEsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKSwhMD09PWUuTVRPT05fREVCVUdfTElUU0hBREVSQVRFJiYoZS5NVE9PTl9ERUJVR19MSVRTSEFERVJBVEU9ITEsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKX1zd2l0Y2godGhpcy5vdXRsaW5lV2lkdGhNb2RlKXtjYXNlIEQuV29ybGRDb3JyZGluYXRlczohMCE9PWUuTVRPT05fT1VUTElORV9XSURUSF9XT1JMRCYmKGUuTVRPT05fT1VUTElORV9XSURUSF9XT1JMRD0hMCxlLk1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOPSExLGUubWFya0FzVW5wcm9jZXNzZWQoKSk7YnJlYWs7Y2FzZSBELlNjcmVlbkNvb3JkaW5hdGVzOiEwIT09ZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTiYmKGUuTVRPT05fT1VUTElORV9XSURUSF9XT1JMRD0hMSxlLk1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOPSEwLGUubWFya0FzVW5wcm9jZXNzZWQoKSk7YnJlYWs7Y2FzZSBELk5vbmU6ITE9PT1lLk1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOJiYhMT09PWUuTVRPT05fT1VUTElORV9XSURUSF9XT1JMRHx8KGUuTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU49ITEsZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEPSExLGUubWFya0FzVW5wcm9jZXNzZWQoKSl9c3dpdGNoKHRoaXMub3V0bGluZUNvbG9yTW9kZSl7Y2FzZSBOLkZpeGVkQ29sb3I6ITAhPT1lLk1UT09OX09VVExJTkVfQ09MT1JfRklYRUQmJihlLk1UT09OX09VVExJTkVfQ09MT1JfRklYRUQ9ITAsZS5NVE9PTl9PVVRMSU5FX0NPTE9SX01JWEVEPSExLGUubWFya0FzVW5wcm9jZXNzZWQoKSk7YnJlYWs7Y2FzZSBOLk1peGVkTGlnaHRpbmc6ITAhPT1lLk1UT09OX09VVExJTkVfQ09MT1JfTUlYRUQmJihlLk1UT09OX09VVExJTkVfQ09MT1JfRklYRUQ9ITEsZS5NVE9PTl9PVVRMSU5FX0NPTE9SX01JWEVEPSEwLGUubWFya0FzVW5wcm9jZXNzZWQoKSl9fX1lKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJkaWZmdXNlVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfZGlmZnVzZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNBbmRNaXNjRGlydHlcIildLHgucHJvdG90eXBlLFwiZGlmZnVzZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcImVtaXNzaXZlVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfZW1pc3NpdmVUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwiZW1pc3NpdmVUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJidW1wVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfYnVtcFRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJidW1wVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwic2hhZGVUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9zaGFkZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJzaGFkZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcInJlY2VpdmVTaGFkb3dUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9yZWNlaXZlU2hhZG93VGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInJlY2VpdmVTaGFkb3dUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJzaGFkaW5nR3JhZGVUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9zaGFkaW5nR3JhZGVUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwic2hhZGluZ0dyYWRlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwicmltVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfcmltVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInJpbVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcIm1hdENhcFRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX21hdENhcFRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJtYXRDYXBUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJvdXRsaW5lV2lkdGhUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9vdXRsaW5lV2lkdGhUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwib3V0bGluZVdpZHRoVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwib3V0bGluZVdpZHRoVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfdXZBbmltYXRpb25NYXNrVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInV2QW5pbWF0aW9uTWFza1RleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNDb2xvcjMpKFwiZGlmZnVzZVwiKV0seC5wcm90b3R5cGUsXCJkaWZmdXNlQ29sb3JcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcImFtYmllbnRcIildLHgucHJvdG90eXBlLFwiYW1iaWVudENvbG9yXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJlbWlzc2l2ZVwiKV0seC5wcm90b3R5cGUsXCJlbWlzc2l2ZUNvbG9yXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJzaGFkZVwiKV0seC5wcm90b3R5cGUsXCJzaGFkZUNvbG9yXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJyaW1cIildLHgucHJvdG90eXBlLFwicmltQ29sb3JcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcIm91dGxpbmVcIildLHgucHJvdG90eXBlLFwib3V0bGluZUNvbG9yXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwidXNlRW1pc3NpdmVBc0lsbHVtaW5hdGlvblwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImxpbmtFbWlzc2l2ZVdpdGhEaWZmdXNlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwidXNlUmVmbGVjdGlvbk92ZXJBbHBoYVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwiZGlzYWJsZUxpZ2h0aW5nXCIpXSx4LnByb3RvdHlwZSxcIl9kaXNhYmxlTGlnaHRpbmdcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHlcIildLHgucHJvdG90eXBlLFwiZGlzYWJsZUxpZ2h0aW5nXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJhbHBoYUN1dE9mZlwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwidXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX3VzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzQW5kTWlzY0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInVzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJtYXhTaW11bHRhbmVvdXNMaWdodHNcIildLHgucHJvdG90eXBlLFwiX21heFNpbXVsdGFuZW91c0xpZ2h0c1wiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJtYXhTaW11bHRhbmVvdXNMaWdodHNcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcImludmVydE5vcm1hbE1hcFhcIildLHgucHJvdG90eXBlLFwiX2ludmVydE5vcm1hbE1hcFhcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJpbnZlcnROb3JtYWxNYXBYXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJpbnZlcnROb3JtYWxNYXBZXCIpXSx4LnByb3RvdHlwZSxcIl9pbnZlcnROb3JtYWxNYXBZXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwiaW52ZXJ0Tm9ybWFsTWFwWVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwidHdvU2lkZWRMaWdodGluZ1wiKV0seC5wcm90b3R5cGUsXCJfdHdvU2lkZWRMaWdodGluZ1wiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInR3b1NpZGVkTGlnaHRpbmdcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcImJ1bXBTY2FsZVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInJlY2VpdmVTaGFkb3dSYXRlXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwic2hhZGluZ0dyYWRlUmF0ZVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInNoYWRlU2hpZnRcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJzaGFkZVRvb255XCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwibGlnaHRDb2xvckF0dGVudWF0aW9uXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwiaW5kaXJlY3RMaWdodEludGVuc2l0eVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInJpbUxpZ2h0aW5nTWl4XCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwicmltRnJlc25lbFBvd2VyXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwicmltTGlmdFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcIm91dGxpbmVXaWR0aFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcIm91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcIm91dGxpbmVMaWdodGluZ01peFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInV2QW5pbWF0aW9uU2Nyb2xsWFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInV2QW5pbWF0aW9uU2Nyb2xsWVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInV2QW5pbWF0aW9uUm90YXRpb25cIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJhbHBoYVRlc3RcIildLHgucHJvdG90eXBlLFwiX2FscGhhVGVzdFwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwiYWxwaGFUZXN0XCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwiYWxwaGFCbGVuZFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKShcImRlYnVnTW9kZVwiKV0seC5wcm90b3R5cGUsXCJfZGVidWdNb2RlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJkZWJ1Z01vZGVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcIm91dGxpbmVDb2xvck1vZGVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcImN1bGxNb2RlXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwiX291dGxpbmVDdWxsTW9kZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHlcIildLHgucHJvdG90eXBlLFwib3V0bGluZUN1bGxNb2RlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJmbGlwVVwiKV0seC5wcm90b3R5cGUsXCJmbGlwVVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwiZmxpcFZcIildLHgucHJvdG90eXBlLFwiZmxpcFZcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInVzZUxvZ2FyaXRobWljRGVwdGhcIixudWxsKX0pKCksTX0pKCkpKTsiLCIvKiogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB2M2QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSxcbiAqIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cblxuaW1wb3J0IHtBYnN0cmFjdE1lc2gsIE1lc2gsIE51bGxhYmxlLCBTaGFkb3dHZW5lcmF0b3IsIFNrZWxldG9uLCBTa2VsZXRvblZpZXdlciwgVHJhbnNmb3JtTm9kZSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmVcIjtcbmltcG9ydCBWM0RDb3JlIGZyb20gXCIuL3YzZC1jb3JlXCI7XG5cbmV4cG9ydCBjbGFzcyBWM0RIZWxwZXIge1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgY29yZTogVjNEQ29yZVxuICAgICkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgYSBub2RlIGNhc3Qgc2hhZG93IGZyb20gYSBTaGFkb3dHZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gc2hhZG93R2VuZXJhdG9yXG4gICAgICogQHBhcmFtIG5vZGVOYW1lXG4gICAgICovXG4gICAgcHVibGljIGFkZE5vZGVUb1NoYWRvd0Nhc3RlckJ5TmFtZShcbiAgICAgICAgc2hhZG93R2VuZXJhdG9yOiBOdWxsYWJsZTxTaGFkb3dHZW5lcmF0b3I+LFxuICAgICAgICBub2RlTmFtZTogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHNoYWRvd0dlbmVyYXRvcj8uYWRkU2hhZG93Q2FzdGVyKHRoaXMuY29yZS5zY2VuZS5nZXROb2RlQnlOYW1lKG5vZGVOYW1lKSBhcyBNZXNoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIG5vZGVzIGNhc3Qgc2hhZG93IGZyb20gYSBTaGFkb3dHZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gc2hhZG93R2VuZXJhdG9yXG4gICAgICogQHBhcmFtIG5vZGVOYW1lXG4gICAgICovXG4gICAgcHVibGljIGFkZE5vZGVUb1NoYWRvd0Nhc3RlckNvbnRhaW5zTmFtZShcbiAgICAgICAgc2hhZG93R2VuZXJhdG9yOiBOdWxsYWJsZTxTaGFkb3dHZW5lcmF0b3I+LFxuICAgICAgICBub2RlTmFtZTogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIGlmICghc2hhZG93R2VuZXJhdG9yKSByZXR1cm47XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLmNvcmUuc2NlbmUuZ2V0Tm9kZXMoKSkge1xuICAgICAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5uYW1lLmluY2x1ZGVzKG5vZGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHNoYWRvd0dlbmVyYXRvci5hZGRTaGFkb3dDYXN0ZXIobm9kZSBhcyBNZXNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2Ugbm9kZSByZWNlaXZlIHNoYWRvd1xuICAgICAqIEBwYXJhbSBub2RlTmFtZVxuICAgICAqL1xuICAgIHB1YmxpYyBtYWtlUmVjZWl2ZVNoYWRvd0J5TmFtZShub2RlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgICh0aGlzLmNvcmUuc2NlbmUuZ2V0Tm9kZUJ5TmFtZShub2RlTmFtZSkgYXMgTWVzaCkucmVjZWl2ZVNoYWRvd3MgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2Ugbm9kZXMgcmVjZWl2ZSBzaGFkb3dcbiAgICAgKiBAcGFyYW0gbm9kZU5hbWVcbiAgICAgKi9cbiAgICBwdWJsaWMgbWFrZVJlY2VpdmVTaGFkb3dDb250YWluc05hbWUobm9kZU5hbWU6IHN0cmluZykge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcy5jb3JlLnNjZW5lLmdldE5vZGVzKCkpIHtcbiAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUubmFtZS5pbmNsdWRlcyhub2RlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAobm9kZSBhcyBNZXNoKS5yZWNlaXZlU2hhZG93cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc2hvd1NrZWxldG9uRGVidWcoXG4gICAgICAgIHNrZWxldG9uOiBTa2VsZXRvbixcbiAgICAgICAgbWVzaDogQWJzdHJhY3RNZXNoXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwYXVzZUFuaW1hdGlvbnMgOiB0cnVlLCAvL1RydWUgb3IgRmFsc2UgZmxhZyB0byBwYXVzZSB0aGUgYW5pbWF0aW9ucyB3aGlsZSB0cnlpbmcgdG8gY29uc3RydWN0IHRoZSBkZWJ1Z01lc2guIERlZmF1bHQ6IFRydWVcbiAgICAgICAgICAgIHJldHVyblRvUmVzdCA6IGZhbHNlLCAvL0ZsYWcgdG8gZm9yY2UgdGhlIHNrZWxldG9uIGJhY2sgaW50byBpdHMgcmVzdFBvc2UgYmVmb3JlIGNvbnN0cnVjdGluZyB0aGUgZGVidWdNZXNoLiBEZWZhdWx0OiBGYWxzZVxuICAgICAgICAgICAgY29tcHV0ZUJvbmVzVXNpbmdTaGFkZXJzIDogdHJ1ZSwgLy9UZWxsIHRoZSBkZWJ1Z01lc2ggdG8gdXNlIG9yIG5vdCB1c2UgdGhlIEdQVSBmb3IgaXRzIGNhbGN1bGF0aW9ucywgaWYgeW91IGV2ZXIgd2FudCB0byBkbyBwaWNraW5nIG9uIHRoZSBtZXNoIHRoaXMgd2lsbCBuZWVkIHRvIGJlIEZhbHNlLiBEZWZhdWx0OiBUcnVlXG4gICAgICAgICAgICB1c2VBbGxCb25lcyA6IHRydWUsIC8vVmlzdWFsaXplIGFsbCBib25lcyBvciBza2lwIHRoZSBvbmVzIHdpdGggbm8gaW5mbHVlbmNlLlxuICAgICAgICAgICAgZGlzcGxheU1vZGUgOiBTa2VsZXRvblZpZXdlci5ESVNQTEFZX0xJTkVTLCAvL0EgdmFsdWUgdGhhdCBjb250cm9scyB3aGljaCBkaXNwbGF5IG1vZGUgdG8gdXNlLiAoU2tlbGV0b25WaWV3ZXIuRElTUExBWV9MSU5FUyA9IDAsIFNrZWxldG9uVmlld2VyLkRJU1BMQVlfU1BIRVJFUyA9IDEsIFNrZWxldG9uVmlld2VyLkRJU1BMQVlfU1BIRVJFX0FORF9TUFVSUyA9IDIpLiBEZWZhdWx0ID0gMC5cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc2tlbGV0b25WaWV3ZXIgPSBuZXcgU2tlbGV0b25WaWV3ZXIoXG4gICAgICAgICAgICBza2VsZXRvbiwgLy9UYXJnZXQgU2tlbGV0b25cbiAgICAgICAgICAgIG1lc2gsIC8vVGhhdCBza2VsZXRvbnMgQXR0YWNoZWQgTWVzaCBvciBhIE5vZGUgd2l0aCB0aGUgc2FtZSBnbG9iYWxNYXRyaXhcbiAgICAgICAgICAgIHRoaXMuY29yZS5zY2VuZSwgLy9UaGUgU2NlbmUgc2NvcGVcbiAgICAgICAgICAgIHRydWUsIC8vYXV0b1VwZGF0ZUJvbmVNYXRyaWNlcz9cbiAgICAgICAgICAgIG1lc2gucmVuZGVyaW5nR3JvdXBJZCA+IDAgPyBtZXNoLnJlbmRlcmluZ0dyb3VwSWQgKyAxIDogMSwgLy8gcmVuZGVyaW5nR3JvdXBJZFxuICAgICAgICAgICAgb3B0aW9ucywgLy9Db25maWd1cmF0aW9uIE9wdGlvbnNcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gc2tlbGV0b25WaWV3ZXI7XG4gICAgfVxufVxuIiwiLyoqXHJcbiAqIFRocm93cyB3aGVuIG1hbmRhdG9yeSBib25lIGNvdWxkIG5vdCBmaW5kXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQm9uZU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdCb25lTm90Rm91bmRFcnJvcic7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBib25lTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoYEJvbmU6JHtib25lTmFtZX0gTm90Rm91bmRgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IFRyYW5zZm9ybU5vZGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3RyYW5zZm9ybU5vZGUnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgQm9uZU5vdEZvdW5kRXJyb3IgfSBmcm9tICcuL2Vycm9ycyc7XHJcblxyXG5pbnRlcmZhY2UgVHJhbnNmb3JtTm9kZU1hcCB7XHJcbiAgICBbbmFtZTogc3RyaW5nXTogVHJhbnNmb3JtTm9kZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEh1bWFub2lkQm9uZSDjgpLlj5blvpfjgZnjgovjg6Hjgr3jg4Pjg4nnvqRcclxuICogQHNlZSBodHRwczovL2RvY3MudW5pdHkzZC5jb20vamEvMjAxOC4zL1NjcmlwdFJlZmVyZW5jZS9IdW1hbkJvZHlCb25lcy5odG1sXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSHVtYW5vaWRCb25lIHtcclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLy8gcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgbm9kZU1hcDogVHJhbnNmb3JtTm9kZU1hcCkge31cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgbm9kZU1hcDogVHJhbnNmb3JtTm9kZU1hcCkge31cclxuXHJcbiAgICBwdWJsaWMgZGlzcG9zZSgpIHtcclxuICAgICAgICAodGhpcy5ub2RlTWFwIGFzIGFueSkgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bC7XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgaGlwcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdoaXBzJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puWkquOCguOCglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRVcHBlckxlZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdsZWZ0VXBwZXJMZWcnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5aSq44KC44KCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRVcHBlckxlZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdyaWdodFVwcGVyTGVnJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puOBsuOBllxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRMb3dlckxlZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdsZWZ0TG93ZXJMZWcnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z44Gy44GWXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRMb3dlckxlZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdyaWdodExvd2VyTGVnJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3pui2s+mmllxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRGb290KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2xlZnRGb290Jyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+i2s+mmllxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0Rm9vdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdyaWdodEZvb3QnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6ISK5qSO44Gu56ys5LiAXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc3BpbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnc3BpbmUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6IO4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgY2hlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnY2hlc3QnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6aaWXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbmVjaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCduZWNrJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmgrVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGhlYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnaGVhZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bogqlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0U2hvdWxkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbGVmdFNob3VsZGVyJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+iCqVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0U2hvdWxkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgncmlnaHRTaG91bGRlcicpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bkuIrohZVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0VXBwZXJBcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbGVmdFVwcGVyQXJtJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+S4iuiFlVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0VXBwZXJBcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgncmlnaHRVcHBlckFybScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bjgbLjgZhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TG93ZXJBcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbGVmdExvd2VyQXJtJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+OBsuOBmFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TG93ZXJBcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgncmlnaHRMb3dlckFybScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bmiYvpppZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0SGFuZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdsZWZ0SGFuZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PmiYvpppZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodEhhbmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgncmlnaHRIYW5kJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puOBpOOBvuWFiChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0VG9lcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRUb2VzJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+OBpOOBvuWFiChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFRvZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodFRvZXMnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem55uuKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRFeWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0RXllJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+ebrihPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodEV5ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0RXllJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmhjihPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBqYXcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdqYXcnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6Kaq5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRUaHVtYlByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdFRodW1iUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6Kaq5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRUaHVtYkludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRUaHVtYkludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bopqrmjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFRodW1iRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdFRodW1iRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puS6uuW3ruOBl+aMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0SW5kZXhQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRJbmRleFByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puS6uuW3ruOBl+aMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0SW5kZXhJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0SW5kZXhJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5Lq65beu44GX5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRJbmRleERpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRJbmRleERpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bkuK3mjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdE1pZGRsZVByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdE1pZGRsZVByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puS4reaMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TWlkZGxlSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdE1pZGRsZUludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bkuK3mjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdE1pZGRsZURpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRNaWRkbGVEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6Jas5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRSaW5nUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0UmluZ1Byb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puiWrOaMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0UmluZ0ludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRSaW5nSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puiWrOaMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0UmluZ0Rpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRSaW5nRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puWwj+aMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TGl0dGxlUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0TGl0dGxlUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5bCP5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRMaXR0bGVJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puWwj+aMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TGl0dGxlRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdExpdHRsZURpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PopqrmjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRUaHVtYlByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRUaHVtYlByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+imquaMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFRodW1iSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRUaHVtYkludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PopqrmjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRUaHVtYkRpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0VGh1bWJEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5Lq65beu44GX5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0SW5kZXhQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0SW5kZXhQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7Pkurrlt67jgZfmjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRJbmRleEludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0SW5kZXhJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5Lq65beu44GX5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0SW5kZXhEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodEluZGV4RGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+S4reaMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodE1pZGRsZVByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRNaWRkbGVQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PkuK3mjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRNaWRkbGVJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodE1pZGRsZUludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PkuK3mjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRNaWRkbGVEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodE1pZGRsZURpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PolqzmjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRSaW5nUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodFJpbmdQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PolqzmjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRSaW5nSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRSaW5nSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+iWrOaMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFJpbmdEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodFJpbmdEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5bCP5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TGl0dGxlUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodExpdHRsZVByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+Wwj+aMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodExpdHRsZUludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0TGl0dGxlSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+Wwj+aMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodExpdHRsZURpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0TGl0dGxlRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOS4iuiDuChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCB1cHBlckNoZXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgndXBwZXJDaGVzdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5b+F6aCI44Oc44O844Oz44KS5Y+W5b6X44GZ44KL44CC5Y+W5b6X5Ye65p2l44Gq44GE5aC05ZCI44Gv5L6L5aSW44KS55m655Sf44GZ44KLXHJcbiAgICAgKlxyXG4gICAgICogQHRocm93cyBCb25lTm90Rm91bmRFcnJvclxyXG4gICAgICogQHBhcmFtIG5hbWUgSHVtYW5vaWRCb25lTmFtZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE1hbmRhdG9yeUJvbmUobmFtZTogc3RyaW5nKTogVHJhbnNmb3JtTm9kZSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZU1hcFtuYW1lXTtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEJvbmVOb3RGb3VuZEVycm9yKG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOOCquODl+OCt+ODp+ODiuODq+ODnOODvOODs+OCkuWPluW+l+OBmeOCi1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIEh1bWFub2lkQm9uZU5hbWVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRPcHRpb25hbEJvbmUobmFtZTogc3RyaW5nKTogTnVsbGFibGU8VHJhbnNmb3JtTm9kZT4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5ub2RlTWFwICYmIHRoaXMubm9kZU1hcFtuYW1lXSkgfHwgbnVsbDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IENvbG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHsgVmVjdG9yNCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBNYXRlcmlhbCwgQmFzZVRleHR1cmUsIFRleHR1cmUsIE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlJztcclxuaW1wb3J0IHsgUEJSTWF0ZXJpYWwgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUnO1xyXG5pbXBvcnQgdHlwZSB7IElWUk1CbGVuZFNoYXBlTWF0ZXJpYWxCaW5kIH0gZnJvbSAnLi92cm0taW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IE1Ub29uTWF0ZXJpYWwgfSBmcm9tICdiYWJ5bG9uLW10b29uLW1hdGVyaWFsJztcclxuXHJcbnR5cGUgU3VwcG9ydGVkTWF0ZXJpYWwgPSBNVG9vbk1hdGVyaWFsIHwgUEJSTWF0ZXJpYWw7XHJcblxyXG4vKipcclxuICogZmlyc3RWYWx1ZSDjga8gZmFsc2Ug5Zu65a6a44Gg44GM44CBIFVuaVZSTSDjgavlgKPjgaPjgablrprnvqnjgZfjgabjgYTjgotcclxuICovXHJcbnR5cGUgU2V0dGVyID0gKHZhbHVlOiBudW1iZXIsIGZpcnN0VmFsdWU6IGJvb2xlYW4pID0+IHZvaWQ7XHJcblxyXG5jb25zdCBQQlJNYXRlcmlhbFRleHR1cmVNYXA6IHsgW3Byb3BlcnR5TmFtZTogc3RyaW5nXToga2V5b2YgUEJSTWF0ZXJpYWwgfSA9IHtcclxuICAgIF9NYWluVGV4OiAnYWxiZWRvVGV4dHVyZScsXHJcbn07XHJcblxyXG5jb25zdCBQQlJNYXRlcmlhbENvbG9yTWFwOiB7IFtwcm9wZXJ0eU5hbWU6IHN0cmluZ106IGtleW9mIFBCUk1hdGVyaWFsIH0gPSB7XHJcbiAgICBfQ29sb3I6ICdhbGJlZG9Db2xvcicsXHJcbn07XHJcblxyXG5jb25zdCBNVG9vbk1hdGVyaWFsVGV4dHVyZU1hcDogeyBbcHJvcGVydHlOYW1lOiBzdHJpbmddOiBrZXlvZiBNVG9vbk1hdGVyaWFsIH0gPSB7XHJcbiAgICBfTWFpblRleDogJ2RpZmZ1c2VUZXh0dXJlJyxcclxuICAgIF9FbWlzc2lvbk1hcDogJ2VtaXNzaXZlVGV4dHVyZScsXHJcbiAgICBfQnVtcE1hcDogJ2J1bXBUZXh0dXJlJyxcclxuICAgIF9TaGFkZVRleHR1cmU6ICdzaGFkZVRleHR1cmUnLFxyXG4gICAgX1JlY2VpdmVTaGFkb3dUZXh0dXJlOiAncmVjZWl2ZVNoYWRvd1RleHR1cmUnLFxyXG4gICAgX1NoYWRpbmdHcmFkZVRleHR1cmU6ICdzaGFkaW5nR3JhZGVUZXh0dXJlJyxcclxuICAgIF9SaW1UZXh0dXJlOiAncmltVGV4dHVyZScsXHJcbiAgICBfU3BoZXJlQWRkOiAnbWF0Q2FwVGV4dHVyZScsXHJcbiAgICBfT3V0bGluZVdpZHRoVGV4dHVyZTogJ291dGxpbmVXaWR0aFRleHR1cmUnLFxyXG4gICAgX1V2QW5pbU1hc2tUZXh0dXJlOiAndXZBbmltYXRpb25NYXNrVGV4dHVyZScsXHJcbn07XHJcblxyXG5jb25zdCBNVG9vbk1hdGVyaWFsQ29sb3JNYXA6IHsgW3Byb3BlcnR5TmFtZTogc3RyaW5nXToga2V5b2YgTVRvb25NYXRlcmlhbCB9ID0ge1xyXG4gICAgX0NvbG9yOiAnZGlmZnVzZUNvbG9yJyxcclxuICAgIF9TaGFkZUNvbG9yOiAnc2hhZGVDb2xvcicsXHJcbiAgICBfUmltQ29sb3I6ICdyaW1Db2xvcicsXHJcbiAgICBfRW1pc3Npb25Db2xvcjogJ2VtaXNzaXZlQ29sb3InLFxyXG4gICAgX091dGxpbmVDb2xvcjogJ291dGxpbmVDb2xvcicsXHJcbn07XHJcblxyXG4vKipcclxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnJtLWMvVW5pVlJNL2Jsb2IvNGZmZDk3YzJlOTMzOTY4M2NlOWJmMjFlNzNmNTEwYmQ5MGMyYTViMi9Bc3NldHMvVlJNL1J1bnRpbWUvQmxlbmRTaGFwZS9NYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlci5jc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbV9tYXRlcmlhbE1hcDogeyBbbWF0ZXJpYWxOYW1lOiBzdHJpbmddOiBTdXBwb3J0ZWRNYXRlcmlhbCB9ID0ge307XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1fbWF0ZXJpYWxTZXR0ZXJNYXA6IHsgW2JpbmRpbmdLZXk6IHN0cmluZ106IFNldHRlciB9ID0ge307XHJcbiAgICBwcml2YXRlIG1fbWF0ZXJpYWxWYWx1ZU1hcDogeyBbYmluZGluZ0tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuICAgIHByaXZhdGUgbV91c2VkOiB7IFt0YXJnZXRLZXk6IHN0cmluZ106IGFueSB9ID0ge307XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBiYXNlVmFsdWVDYWNoZTogeyBbYmluZGluZ0tleTogc3RyaW5nXTogVmVjdG9yNCB9ID0ge307XHJcbiAgICBwcml2YXRlIG1hdGVyaWFsVmFsdWVzVG9BcHBseTogeyBbYmluZGluZ0tleTogc3RyaW5nXTogSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmQgfSA9IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG1hdGVyaWFscyBWUk3jga7lhaggTWF0ZXJpYWxcclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbFZhbHVlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IobWF0ZXJpYWxzOiBNYXRlcmlhbFtdLCBwcml2YXRlIHJlYWRvbmx5IG1hdGVyaWFsVmFsdWVzOiBJVlJNQmxlbmRTaGFwZU1hdGVyaWFsQmluZFtdKSB7XHJcbiAgICAgICAgaWYgKG1hdGVyaWFscy5sZW5ndGggPT09IDAgfHwgbWF0ZXJpYWxWYWx1ZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g44OX44Ot44OR44OG44Kj5ZCN44Gu5aSJ5o+b44Gr5a++5b+c44GX44Gm44GE44KLIE1Ub29uTWF0ZXJpYWwg44GoIFBCUk1hdGVyaWFsIOOCkuS/neWtmOOBmeOCi1xyXG4gICAgICAgIG1hdGVyaWFscy5mb3JFYWNoKChtYXRlcmlhbCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobWF0ZXJpYWwgaW5zdGFuY2VvZiBNVG9vbk1hdGVyaWFsIHx8IG1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9tYXRlcmlhbE1hcFttYXRlcmlhbC5uYW1lXSA9IG1hdGVyaWFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWF0ZXJpYWxWYWx1ZXMuZm9yRWFjaCgobWF0ZXJpYWxWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nS2V5ID0gdGhpcy5tYWtlQmluZGluZ0tleShtYXRlcmlhbFZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubV9tYXRlcmlhbFNldHRlck1hcFtiaW5kaW5nS2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tX21hdGVyaWFsTWFwW21hdGVyaWFsVmFsdWUubWF0ZXJpYWxOYW1lXTtcclxuICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VWYWx1ZSA9IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgbWF0ZXJpYWxWYWx1ZS5wcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoIWJhc2VWYWx1ZSB8fCBtYXRlcmlhbFZhbHVlLnRhcmdldFZhbHVlLmxlbmd0aCAhPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOODouODvOODleOCo+ODs+OCsOeUqOOBqyBiYXNlVmFsdWUgKOWIneacn+WApCkg44GoIG1hdGVyaWFsVmFsdWUg44KS5L+d5a2Y44GZ44KLXHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVZhbHVlQ2FjaGVbYmluZGluZ0tleV0gPSBiYXNlVmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxWYWx1ZXNUb0FwcGx5W2JpbmRpbmdLZXldID0gbWF0ZXJpYWxWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gVmVjdG9yNC5Gcm9tQXJyYXkobWF0ZXJpYWxWYWx1ZS50YXJnZXRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlTmFtZSA9IG1hdGVyaWFsVmFsdWUucHJvcGVydHlOYW1lO1xyXG4gICAgICAgICAgICAvLyBVbml0eSDjgajluqfmqJnns7vjgYznlbDjgarjgovjgZ/jgoHjgIHjg4bjgq/jgrnjg4Hjg6Pjga4gdk9mZnNldCDjgpLlj43ou6LjgZnjgotcclxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhQQlJNYXRlcmlhbFRleHR1cmVNYXApLnNvbWUoKGspID0+IHZhbHVlTmFtZS5zdGFydHNXaXRoKGspKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFZhbHVlLncgKj0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmtleXMoTVRvb25NYXRlcmlhbFRleHR1cmVNYXApLnNvbWUoKGspID0+IHZhbHVlTmFtZS5zdGFydHNXaXRoKGspKSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0VmFsdWUudyAqPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodmFsdWVOYW1lLmVuZHNXaXRoKCdfU1RfUycpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6Pjga4gdeaWueWQkSDjga7jgb/mm7TmlrDjgZnjgotcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRlcjogU2V0dGVyID0gKHZhbHVlLCBmaXJzdFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcFZhbHVlID0gZmlyc3RWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VWYWx1ZS5hZGQodGFyZ2V0VmFsdWUuc3VidHJhY3QoYmFzZVZhbHVlKS5zY2FsZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUpIS5hZGQodGFyZ2V0VmFsdWUuc3VidHJhY3QoYmFzZVZhbHVlKS5zY2FsZSh2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyYyA9IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lKSE7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjLnggPSBwcm9wVmFsdWUueDtcclxuICAgICAgICAgICAgICAgICAgICBzcmMueiA9IHByb3BWYWx1ZS56O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lLCBzcmMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9tYXRlcmlhbFNldHRlck1hcFtiaW5kaW5nS2V5XSA9IHNldHRlcjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZU5hbWUuZW5kc1dpdGgoJ19TVF9UJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIOODhuOCr+OCueODgeODo+OBriB25pa55ZCRIOOBruOBv+abtOaWsOOBmeOCi1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGVyOiBTZXR0ZXIgPSAodmFsdWUsIGZpcnN0VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBmaXJzdFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYmFzZVZhbHVlLmFkZCh0YXJnZXRWYWx1ZS5zdWJ0cmFjdChiYXNlVmFsdWUpLnNjYWxlKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSkhLmFkZCh0YXJnZXRWYWx1ZS5zdWJ0cmFjdChiYXNlVmFsdWUpLnNjYWxlKHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjID0gdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUpITtcclxuICAgICAgICAgICAgICAgICAgICBzcmMueSA9IHByb3BWYWx1ZS55O1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYy53ID0gcHJvcFZhbHVlLnc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUsIHNyYyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX21hdGVyaWFsU2V0dGVyTWFwW2JpbmRpbmdLZXldID0gc2V0dGVyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGVyOiBTZXR0ZXIgPSAodmFsdWUsIGZpcnN0VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBmaXJzdFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYmFzZVZhbHVlLmFkZCh0YXJnZXRWYWx1ZS5zdWJ0cmFjdChiYXNlVmFsdWUpLnNjYWxlKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSkhLmFkZCh0YXJnZXRWYWx1ZS5zdWJ0cmFjdChiYXNlVmFsdWUpLnNjYWxlKHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUsIHByb3BWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX21hdGVyaWFsU2V0dGVyTWFwW2JpbmRpbmdLZXldID0gc2V0dGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbmlWUk0g44Gn44GvIERpY3Rpb25hcnkg44Gu44Kt44O855So44Gu44Kv44Op44K544KS5a6a576p44GX44Gm44GE44KL44GM44CB5paH5a2X5YiX44Gn5Luj55So44GZ44KLXHJcbiAgICAgKiBNYXRlcmlhbFZhbHVlQmluZGluZy5CYXNlVmFsdWUg44Gv5a++5b+c44GZ44KL44OX44Ot44OR44OG44Kj44Gu5Yid5pyf5YCk44Gq44Gu44Gn54Sh6KaW44Gn44GN44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWFrZUJpbmRpbmdLZXkobWF0ZXJpYWxWYWx1ZTogSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmQpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgJHttYXRlcmlhbFZhbHVlLm1hdGVyaWFsTmFtZX1fJHttYXRlcmlhbFZhbHVlLnByb3BlcnR5TmFtZX1fJHttYXRlcmlhbFZhbHVlLnRhcmdldFZhbHVlLmpvaW4oJy0nKX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5pVlJNIOOBp+OBryBEaWN0aW9uYXJ5IOOBruOCreODvOeUqOOBruOCr+ODqeOCueOCkuWumue+qeOBl+OBpuOBhOOCi+OBjOOAgeaWh+Wtl+WIl+OBp+S7o+eUqOOBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1ha2VUYXJnZXRLZXkobWF0ZXJpYWxWYWx1ZTogSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmQpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgJHttYXRlcmlhbFZhbHVlLm1hdGVyaWFsTmFtZX1fJHttYXRlcmlhbFZhbHVlLnByb3BlcnR5TmFtZX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oi44O844OV44Kj44Oz44Kw44KS6KGM44GGXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUg5YCkKDDjgJwxKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbW9ycGhpbmcodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuYWNjdW11bGF0ZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICB0aGlzLmFwcGx5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtYXRlcmlhbFZhbHVlIOOBlOOBqOOBq+mHjeOBv+OCkuioiOeul+OBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFjY3VtdWxhdGVWYWx1ZSh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbFZhbHVlcy5mb3JFYWNoKChtYXRlcmlhbFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdLZXkgPSB0aGlzLm1ha2VCaW5kaW5nS2V5KG1hdGVyaWFsVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tX21hdGVyaWFsVmFsdWVNYXBbYmluZGluZ0tleV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9tYXRlcmlhbFZhbHVlTWFwW2JpbmRpbmdLZXldICs9IHZhbHVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX21hdGVyaWFsVmFsdWVNYXBbYmluZGluZ0tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0ZXJpYWwg44Gu44OX44Ot44OR44OG44Kj44KS5pu05paw44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXBwbHkoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tX3VzZWQgPSB7fTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5tYXRlcmlhbFZhbHVlc1RvQXBwbHkpLmZvckVhY2goKFtiaW5kaW5nS2V5LCBtYXRlcmlhbFZhbHVlXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRLZXkgPSB0aGlzLm1ha2VUYXJnZXRLZXkobWF0ZXJpYWxWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICghKHRhcmdldEtleSBpbiB0aGlzLm1fdXNlZCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tX21hdGVyaWFsTWFwW21hdGVyaWFsVmFsdWUubWF0ZXJpYWxOYW1lXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5iYXNlVmFsdWVDYWNoZVtiaW5kaW5nS2V5XS5jbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOWvvuixoeOBruODl+ODreODkeODhuOCo+OCkuWIneacn+WApOOBq+aIu+OBmVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVOYW1lID0gbWF0ZXJpYWxWYWx1ZS5wcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVOYW1lLmVuZHNXaXRoKCdfU1RfUycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lKSE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUueSA9IHYueTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS53ID0gdi53O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZU5hbWUuZW5kc1dpdGgoJ19TVF9UJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUpITtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS54ID0gdi54O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnogPSB2Lno7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubV91c2VkW3RhcmdldEtleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXR0ZXIgPSB0aGlzLm1fbWF0ZXJpYWxTZXR0ZXJNYXBbYmluZGluZ0tleV07XHJcbiAgICAgICAgICAgIGlmIChzZXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHNldHRlcih0aGlzLm1fbWF0ZXJpYWxWYWx1ZU1hcFtiaW5kaW5nS2V5XSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubV9tYXRlcmlhbFZhbHVlTWFwID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg57jg4bjg6rjgqLjg6vjga7jg4bjgq/jgrnjg4Hjg6PjgYvoibLjgavlr77lv5zjgZnjgosgVmVjdG9yNCDjgpLlj5blvpfjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsOiBTdXBwb3J0ZWRNYXRlcmlhbCwgcHJvcGVydHlOYW1lOiBzdHJpbmcpOiBOdWxsYWJsZTxWZWN0b3I0PiB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBwcm9wZXJ0eU5hbWUubWF0Y2goL14oX1teX10rKS8pO1xyXG4gICAgICAgIGlmICghbWF0Y2ggfHwgIW1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXkgPSBtYXRjaFsxXTtcclxuICAgICAgICBpZiAobWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkge1xyXG4gICAgICAgICAgICBpZiAoUEJSTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUZXh0dXJlSW50b1ZlY3RvcjRXaGVuTm90TnVsbChtYXRlcmlhbFtQQlJNYXRlcmlhbFRleHR1cmVNYXBba2V5XV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChQQlJNYXRlcmlhbENvbG9yTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRDb2xvckludG9WZWN0b3I0KG1hdGVyaWFsW1BCUk1hdGVyaWFsQ29sb3JNYXBba2V5XV0sIG1hdGVyaWFsLmFscGhhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTVRvb25NYXRlcmlhbFxyXG4gICAgICAgIGlmIChNVG9vbk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUZXh0dXJlSW50b1ZlY3RvcjRXaGVuTm90TnVsbChtYXRlcmlhbFtNVG9vbk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChNVG9vbk1hdGVyaWFsQ29sb3JNYXBba2V5XSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Q29sb3JJbnRvVmVjdG9yNChtYXRlcmlhbFtNVG9vbk1hdGVyaWFsQ29sb3JNYXBba2V5XV0sIG1hdGVyaWFsLmFscGhhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXh0dXJlIOOCkiBWZWN0b3I0IOOBq+WkieaPm+OBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnZlcnRUZXh0dXJlSW50b1ZlY3RvcjRXaGVuTm90TnVsbCh0ZXh0dXJlOiBOdWxsYWJsZTxCYXNlVGV4dHVyZT4pOiBOdWxsYWJsZTxWZWN0b3I0PiB7XHJcbiAgICAgICAgaWYgKCF0ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ID0gdGV4dHVyZSBhcyBUZXh0dXJlO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yNCh0LnVTY2FsZSwgdC52U2NhbGUsIHQudU9mZnNldCwgdC52T2Zmc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbG9yMyDjgasgYWxwaGEg44KS5Yqg44GI44GmIFZlY3RvcjQg44Gr5aSJ5o+b44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29udmVydENvbG9ySW50b1ZlY3RvcjQoY29sb3I6IENvbG9yMywgYWxwaGE6IG51bWJlcik6IFZlY3RvcjQge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yNChjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iLCBhbHBoYSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg57jg4bjg6rjgqLjg6vjga7jg4bjgq/jgrnjg4Hjg6PjgYvoibLjgpLmm7TmlrDjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsOiBTdXBwb3J0ZWRNYXRlcmlhbCwgcHJvcGVydHlOYW1lOiBzdHJpbmcsIHZhbHVlOiBWZWN0b3I0KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBwcm9wZXJ0eU5hbWUubWF0Y2goL14oX1teX10rKS8pO1xyXG4gICAgICAgIGlmICghbWF0Y2ggfHwgIW1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5ID0gbWF0Y2hbMV07XHJcbiAgICAgICAgaWYgKG1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgaWYgKFBCUk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmVXaGVuTm90TnVsbChtYXRlcmlhbFtQQlJNYXRlcmlhbFRleHR1cmVNYXBba2V5XV0sIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoUEJSTWF0ZXJpYWxDb2xvck1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnX0NvbG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFscGhhID0gdmFsdWUudztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sb3IobWF0ZXJpYWxbUEJSTWF0ZXJpYWxDb2xvck1hcFtrZXldXSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTVRvb25NYXRlcmlhbFxyXG4gICAgICAgIGlmIChNVG9vbk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGV4dHVyZVdoZW5Ob3ROdWxsKG1hdGVyaWFsW01Ub29uTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV1dLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE1Ub29uTWF0ZXJpYWxDb2xvck1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdfQ29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYSA9IHZhbHVlLnc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xvcihtYXRlcmlhbFtNVG9vbk1hdGVyaWFsQ29sb3JNYXBba2V5XV0sIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXh0dXJlIOOCkiBWZWN0b3I0IOOBp+abtOaWsOOBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZVRleHR1cmVXaGVuTm90TnVsbCh0ZXh0dXJlOiBOdWxsYWJsZTxCYXNlVGV4dHVyZT4sIHZhbHVlOiBWZWN0b3I0KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRleHR1cmUpIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IHRleHR1cmUgYXMgVGV4dHVyZTtcclxuICAgICAgICAgICAgdC51U2NhbGUgPSB2YWx1ZS54O1xyXG4gICAgICAgICAgICB0LnZTY2FsZSA9IHZhbHVlLnk7XHJcbiAgICAgICAgICAgIHQudU9mZnNldCA9IHZhbHVlLno7XHJcbiAgICAgICAgICAgIHQudk9mZnNldCA9IHZhbHVlLnc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29sb3IzIOOCkiBWZWN0b3I0IOOBp+abtOaWsOOBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNvbG9yKGNvbG9yOiBDb2xvcjMsIHZhbHVlOiBWZWN0b3I0KTogdm9pZCB7XHJcbiAgICAgICAgY29sb3IuciA9IHZhbHVlLng7XHJcbiAgICAgICAgY29sb3IuZyA9IHZhbHVlLnk7XHJcbiAgICAgICAgY29sb3IuYiA9IHZhbHVlLno7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBWZWN0b3IzIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5pbXBvcnQgdHlwZSB7IFRyYW5zZm9ybU5vZGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3RyYW5zZm9ybU5vZGUnO1xyXG5pbXBvcnQgeyBTcGhlcmVCdWlsZGVyIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9CdWlsZGVycy9zcGhlcmVCdWlsZGVyJztcclxuaW1wb3J0IHsgQ29sbGlkZXIgfSBmcm9tICcuL2NvbGxpZGVyJztcclxuXHJcbi8qKlxyXG4gKiBWUk0gU3ByaW5nQm9uZSBDb2xsaWRlckdyb3VwXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29sbGlkZXJHcm91cCB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgY29sbGlkZXJzOiBDb2xsaWRlcltdID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gdHJhbnNmb3JtIFRoZSBub2RlIG9mIHRoZSBjb2xsaWRlciBncm91cCBmb3Igc2V0dGluZyB1cCBjb2xsaXNpb24gZGV0ZWN0aW9ucy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSB0cmFuc2Zvcm06IFRyYW5zZm9ybU5vZGUpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgb2Zmc2V0dGVkIGNvbGxpZGVyXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBUaGUgbG9jYWwgY29vcmRpbmF0ZSBmcm9tIHRoZSBub2RlIG9mIHRoZSBjb2xsaWRlciBncm91cC5cclxuICAgICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgY29sbGlkZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDb2xsaWRlcihvZmZzZXQ6IFZlY3RvcjMsIHJhZGl1czogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgc3BoZXJlID0gU3BoZXJlQnVpbGRlci5DcmVhdGVTcGhlcmUoXHJcbiAgICAgICAgICAgIGAke3RoaXMudHJhbnNmb3JtLm5hbWV9X0NvbGxpZGVyU3BoZXJlYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudHM6IDYsXHJcbiAgICAgICAgICAgICAgICBkaWFtZXRlcjogcmFkaXVzICogMi4wLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5nZXRTY2VuZSgpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBzcGhlcmUuc2V0UGFyZW50KHRoaXMudHJhbnNmb3JtKTtcclxuICAgICAgICBzcGhlcmUuc2V0UG9zaXRpb25XaXRoTG9jYWxWZWN0b3Iob2Zmc2V0KTtcclxuICAgICAgICBzcGhlcmUuc2V0RW5hYmxlZChmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29sbGlkZXJzLnB1c2gobmV3IENvbGxpZGVyKG9mZnNldCwgcmFkaXVzLCBzcGhlcmUpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IE1lc2ggfSBmcm9tICdAYmFieWxvbmpzL2NvcmUnO1xyXG5pbXBvcnQgdHlwZSB7IFZlY3RvcjMgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aCc7XHJcblxyXG4vKipcclxuICogQ29sbGlkZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb2xsaWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIGxvY2FsIGNvb3JkaW5hdGUgZnJvbSB0aGUgbm9kZSBvZiB0aGUgY29sbGlkZXIgZ3JvdXAuXHJcbiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIGNvbGxpZGVyLlxyXG4gICAgICogQHBhcmFtIHNwaGVyZSBUaGUgc3BlaGVyZSBtZXNoIGZvciB3b3JsZE1hdHJpeCBhbmQgZ2l6bW8uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgb2Zmc2V0OiBWZWN0b3IzLCBwdWJsaWMgcmVhZG9ubHkgcmFkaXVzOiBudW1iZXIsIHB1YmxpYyByZWFkb25seSBzcGhlcmU6IE1lc2gpIHt9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgSVZSTVNlY29uZGFyeUFuaW1hdGlvbiB9IGZyb20gJy4uL3ZybS1pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgQ29sbGlkZXJHcm91cCB9IGZyb20gJy4vY29sbGlkZXItZ3JvdXAnO1xyXG5pbXBvcnQgeyBWUk1TcHJpbmdCb25lIH0gZnJvbSAnLi92cm0tc3ByaW5nLWJvbmUnO1xyXG5cclxuLyoqXHJcbiAqIGZ1bmN0aW9uIHRvIGdldCBib25lIGZyb20gbm9kZUluZGV4XHJcbiAqL1xyXG50eXBlIGdldEJvbmUgPSAobm9kZUluZGV4OiBudW1iZXIpID0+IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+O1xyXG5cclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciBjcmVhdGluZyBzcHJpbmdzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnN0cnVjdFNwcmluZ3NPcHRpb25zIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJlc2lsaWVuY2Ugb2YgdGhlIHN3YXlpbmcgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHN0aWZmbmVzcz86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmVuZ3RoIG9mIGdyYXZpdHlcclxuICAgICAqL1xyXG4gICAgZ3Jhdml0eVBvd2VyPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGlyZWN0aW9uIG9mIGdyYXZpdHkuIFNldCAoMCwgLTEsIDApIGZvciBzaW11bGF0aW5nIHRoZSBncmF2aXR5LiBTZXQgKDEsIDAsIDApIGZvciBzaW11bGF0aW5nIHRoZSB3aW5kLlxyXG4gICAgICovXHJcbiAgICBncmF2aXR5RGlyPzogVmVjdG9yMztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJlc2lzdGFuY2UgKGRlY2VsZXJhdGlvbikgb2YgYXV0b21hdGljIGFuaW1hdGlvblxyXG4gICAgICovXHJcbiAgICBkcmFnRm9yY2U/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSB1c2VkIGZvciB0aGUgY29sbGlzaW9uIGRldGVjdGlvbiB3aXRoIGNvbGxpZGVyc1xyXG4gICAgICovXHJcbiAgICBoaXRSYWRpdXM/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWUk0gU3ByaW5nQm9uZSBDb250cm9sbGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3ByaW5nQm9uZUNvbnRyb2xsZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBTcHJpbmcgQm9uZSBMaXN0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3ByaW5nczogVlJNU3ByaW5nQm9uZVtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4dCBTZWNvbmRhcnlBbmltYXRpb24gT2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gZ2V0Qm9uZVxyXG4gICAgICovXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgZXh0OiBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uLCBnZXRCb25lOiBnZXRCb25lLCBvcHRpb25zPzogQ29uc3RydWN0U3ByaW5nc09wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBjb2xsaWRlckdyb3VwcyA9IHRoaXMuY29uc3RydWN0Q29sbGlkZXJHcm91cHMoZ2V0Qm9uZSk7XHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gdGhpcy5zcHJpbmdzID0gdGhpcy5jb25zdHJ1Y3RTcHJpbmdzKGdldEJvbmUsIGNvbGxpZGVyR3JvdXBzKTtcclxuICAgICAgICB0aGlzLnNwcmluZ3MgPSB0aGlzLmNvbnN0cnVjdFNwcmluZ3MoZ2V0Qm9uZSwgY29sbGlkZXJHcm91cHMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc3ByaW5ncyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGFsbCBTcHJpbmdCb25lc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZWx0YVRpbWUgRWxhcHNlZCBzZWMgZnJvbSBwcmV2aW91cyBmcmFtZVxyXG4gICAgICogQHNlZSBodHRwczovL2RvY3MudW5pdHkzZC5jb20vU2NyaXB0UmVmZXJlbmNlL1RpbWUtZGVsdGFUaW1lLmh0bWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIOODneODvOOCuuW+jOOBruOBguOCieOBtuOCiumYsuatouOBruOBn+OCgSBjbGFtcFxyXG4gICAgICAgIGRlbHRhVGltZSA9IE1hdGgubWF4KDAuMCwgTWF0aC5taW4oMTYuNjY2LCBkZWx0YVRpbWUpKSAvIDEwMDA7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLnNwcmluZ3MubWFwPFByb21pc2U8dm9pZD4+KChzcHJpbmcpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHNwcmluZy51cGRhdGUoZGVsdGFUaW1lKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvKiBEbyBub3RoaW5nICovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RDb2xsaWRlckdyb3VwcyhnZXRCb25lOiBnZXRCb25lKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV4dC5jb2xsaWRlckdyb3VwcyB8fCAhdGhpcy5leHQuY29sbGlkZXJHcm91cHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29sbGlkZXJHcm91cHM6IENvbGxpZGVyR3JvdXBbXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZXh0LmNvbGxpZGVyR3JvdXBzLmZvckVhY2goKGNvbGxpZGVyR3JvdXApID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9uZSA9IGdldEJvbmUoY29sbGlkZXJHcm91cC5ub2RlKSBhcyBUcmFuc2Zvcm1Ob2RlO1xyXG4gICAgICAgICAgICBjb25zdCBnID0gbmV3IENvbGxpZGVyR3JvdXAoYm9uZSk7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyR3JvdXAuY29sbGlkZXJzLmZvckVhY2goKGNvbGxpZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBnLmFkZENvbGxpZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFZSTSDlj7PmiYvns7tZX1VQLCAtWl9Gcm9udCDjgYvjgokgQmFieWxvbi5qcyDlt6bmiYvns7tZX1VQLCArWl9Gcm9udCDjgavjgZnjgotcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMygtY29sbGlkZXIub2Zmc2V0LngsIGNvbGxpZGVyLm9mZnNldC55LCAtY29sbGlkZXIub2Zmc2V0LnopLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyLnJhZGl1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyR3JvdXBzLnB1c2goZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbGxpZGVyR3JvdXBzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0U3ByaW5ncyhnZXRCb25lOiBnZXRCb25lLCBjb2xsaWRlckdyb3VwczogQ29sbGlkZXJHcm91cFtdLCBvcHRpb25zPzogQ29uc3RydWN0U3ByaW5nc09wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXh0LmJvbmVHcm91cHMgfHwgIXRoaXMuZXh0LmJvbmVHcm91cHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3ByaW5nczogVlJNU3ByaW5nQm9uZVtdID0gW107XHJcbiAgICAgICAgdGhpcy5leHQuYm9uZUdyb3Vwcy5mb3JFYWNoKChzcHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgcm9vdEJvbmVzID0gKHNwcmluZy5ib25lcyB8fCBbXSkubWFwKChib25lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Qm9uZShib25lKSBhcyBUcmFuc2Zvcm1Ob2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc3ByaW5nQ29sbGlkZXJzID0gKHNwcmluZy5jb2xsaWRlckdyb3VwcyB8fCBbXSkubWFwPENvbGxpZGVyR3JvdXA+KChnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGlkZXJHcm91cHNbZ107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzcHJpbmdzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICAgICAgICAgIC8vIG5ldyBWUk1TcHJpbmdCb25lKFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHNwcmluZy5jb21tZW50LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHNwcmluZy5zdGlmZmluZXNzLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHNwcmluZy5ncmF2aXR5UG93ZXIsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbmV3IFZlY3RvcjMoXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC8vIFZSTSDlj7PmiYvns7tZX1VQLCAtWl9Gcm9udCDjgYvjgokgQmFieWxvbi5qcyDlt6bmiYvns7tZX1VQLCArWl9Gcm9udCDjgavjgZnjgotcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLXNwcmluZy5ncmF2aXR5RGlyLngsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNwcmluZy5ncmF2aXR5RGlyLnksXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC1zcHJpbmcuZ3Jhdml0eURpci56XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgKS5ub3JtYWxpemUoKSxcclxuICAgICAgICAgICAgICAgIC8vICAgICBzcHJpbmcuZHJhZ0ZvcmNlLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGdldEJvbmUoc3ByaW5nLmNlbnRlciksXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc3ByaW5nLmhpdFJhZGl1cyxcclxuICAgICAgICAgICAgICAgIC8vICAgICByb290Qm9uZXMsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc3ByaW5nQ29sbGlkZXJzXHJcbiAgICAgICAgICAgICAgICAvLyApXHJcbiAgICAgICAgICAgICAgICBuZXcgVlJNU3ByaW5nQm9uZShcclxuICAgICAgICAgICAgICAgICAgICBzcHJpbmcuY29tbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zPy5zdGlmZm5lc3MgPyBvcHRpb25zLnN0aWZmbmVzcyA6IHNwcmluZy5zdGlmZmluZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM/LmdyYXZpdHlQb3dlciA/IG9wdGlvbnMuZ3Jhdml0eVBvd2VyIDogc3ByaW5nLmdyYXZpdHlQb3dlcixcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zPy5ncmF2aXR5RGlyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5ncmF2aXR5RGlyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3RvcjMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZSTSDlj7PmiYvns7tZX1VQLCAtWl9Gcm9udCDjgYvjgokgQmFieWxvbi5qcyDlt6bmiYvns7tZX1VQLCArWl9Gcm9udCDjgavjgZnjgotcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLXNwcmluZy5ncmF2aXR5RGlyLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmluZy5ncmF2aXR5RGlyLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1zcHJpbmcuZ3Jhdml0eURpci56XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKS5ub3JtYWxpemUoKSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zPy5kcmFnRm9yY2UgPyBvcHRpb25zLmRyYWdGb3JjZSA6IHNwcmluZy5kcmFnRm9yY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0Qm9uZShzcHJpbmcuY2VudGVyKSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zPy5oaXRSYWRpdXMgPyBvcHRpb25zLmhpdFJhZGl1cyA6IHNwcmluZy5oaXRSYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdEJvbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwcmluZ0NvbGxpZGVyc1xyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzcHJpbmdzO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IE1hdHJpeCwgUXVhdGVybmlvbiwgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgQ29sbGlkZXJHcm91cCB9IGZyb20gJy4vY29sbGlkZXItZ3JvdXAnO1xyXG4vLyBiYXNlZCBvblxyXG4vLyBodHRwOi8vcm9ja2V0anVtcC5za3IuanAvdW5pdHkzZC8xMDkvXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kd2FuZ28vVW5pVlJNL2Jsb2IvbWFzdGVyL1NjcmlwdHMvU3ByaW5nQm9uZS9WUk1TcHJpbmdCb25lLmNzXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9waXhpdi90aHJlZS12cm0vYmxvYi9hYWQ1NTFlMDQxZmFkNTUzYzE5ZDIwOTFlNWY1ZWFmZjFlYjhmYWE4L3BhY2thZ2VzL3RocmVlLXZybS9zcmMvc3ByaW5nYm9uZS9WUk1TcHJpbmdCb25lLnRzXHJcblxyXG5jb25zdCBJREVOVElUWV9NQVRSSVggPSBNYXRyaXguSWRlbnRpdHkoKTtcclxuXHJcbmNvbnN0IF92M0EgPSBuZXcgVmVjdG9yMygpO1xyXG5jb25zdCBfdjNCID0gbmV3IFZlY3RvcjMoKTtcclxuY29uc3QgX3YzQyA9IG5ldyBWZWN0b3IzKCk7XHJcbmNvbnN0IF9xdWF0QSA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbmNvbnN0IF9tYXRBID0gbmV3IE1hdHJpeCgpO1xyXG5jb25zdCBfbWF0QiA9IG5ldyBNYXRyaXgoKTtcclxuXHJcbi8qKlxyXG4gKiBWZXJsZXQgU3ByaW5nIEJvbmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWUk1TcHJpbmdCb25lTG9naWMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBpbml0aWFsIGxvY2FsIHRyYW5zZm9ybSBNYXJpeFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGluaXRpYWxMb2NhbE1hdHJpeDogTWF0cml4O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9uZWQgaW5pdGlhbCBsb2NhbCByb3RhdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGluaXRpYWxMb2NhbFJvdGF0aW9uOiBRdWF0ZXJuaW9uO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbG9uZWQgaW5pdGlhbCBsb2NhbCBjaGlsZCBwb3NpdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGluaXRpYWxMb2NhbENoaWxkUG9zaXRpb246IFZlY3RvcjM7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMZW5ndGggb2YgdGhlIGJvbmUgaW4gcmVsYXRpdmUgc3BhY2UgdW5pdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBjZW50ZXJTcGFjZUJvbmVMZW5ndGg6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogUG9zaXRpb24gb2YgdGhlIGJvbmUgaW4gcmVsYXRpdmUgc3BhY2UgdW5pdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBjZW50ZXJTcGFjZVBvc2l0aW9uOiBWZWN0b3IzO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZlcmVuY2Ugb2YgcGFyZW50IHJvdGF0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgYm9uZUF4aXM6IFZlY3RvcjM7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJyZW50VGFpbDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBwcml2YXRlIHByZXZUYWlsOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIHByaXZhdGUgbmV4dFRhaWw6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNlbnRlciBDZW50ZXIgcmVmZXJlbmNlIG9mIFRyYW5zZm9ybU5vZGVcclxuICAgICAqIEBwYXJhbSByYWRpdXMgQ29sbGlzaW9uIFJhZGl1c1xyXG4gICAgICogQHBhcmFtIHRyYW5zZm9ybSBCYXNlIFRyYW5zZm9ybU5vZGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBjZW50ZXI6IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+LCBwdWJsaWMgcmVhZG9ubHkgcmFkaXVzOiBudW1iZXIsIHB1YmxpYyByZWFkb25seSB0cmFuc2Zvcm06IFRyYW5zZm9ybU5vZGUpIHtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHJvdGF0aW9uUXVhdGVybmlvbiB3aGVuIG5vdCBpbml0aWFsaXplZFxyXG4gICAgICAgIGlmICghdHJhbnNmb3JtLnJvdGF0aW9uUXVhdGVybmlvbikge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uID0gdHJhbnNmb3JtLnJvdGF0aW9uLnRvUXVhdGVybmlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgd29ybGRNYXRyaXggPSB0cmFuc2Zvcm0uZ2V0V29ybGRNYXRyaXgoKTtcclxuICAgICAgICB0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24gPSB3b3JsZE1hdHJpeC5nZXRUcmFuc2xhdGlvbigpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxMb2NhbE1hdHJpeCA9IHRyYW5zZm9ybS5fbG9jYWxNYXRyaXguY2xvbmUoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxMb2NhbFJvdGF0aW9uID0gdHJhbnNmb3JtLnJvdGF0aW9uUXVhdGVybmlvbi5jbG9uZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHRyYW5zZm9ybS5nZXRDaGlsZFRyYW5zZm9ybU5vZGVzKHRydWUpO1xyXG4gICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsTG9jYWxDaGlsZFBvc2l0aW9uID0gdHJhbnNmb3JtLnBvc2l0aW9uLmNsb25lKCkubm9ybWFsaXplKCkuc2NhbGVJblBsYWNlKDAuMDcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbExvY2FsQ2hpbGRQb3NpdGlvbiA9IGNoaWxkcmVuWzBdLnBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYodGhpcy5pbml0aWFsTG9jYWxDaGlsZFBvc2l0aW9uLCB3b3JsZE1hdHJpeCwgdGhpcy5jdXJyZW50VGFpbCk7XHJcbiAgICAgICAgdGhpcy5wcmV2VGFpbC5jb3B5RnJvbSh0aGlzLmN1cnJlbnRUYWlsKTtcclxuICAgICAgICB0aGlzLm5leHRUYWlsLmNvcHlGcm9tKHRoaXMuY3VycmVudFRhaWwpO1xyXG5cclxuICAgICAgICB0aGlzLmJvbmVBeGlzID0gdGhpcy5pbml0aWFsTG9jYWxDaGlsZFBvc2l0aW9uLm5vcm1hbGl6ZVRvTmV3KCk7XHJcbiAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKHRoaXMuaW5pdGlhbExvY2FsQ2hpbGRQb3NpdGlvbiwgd29ybGRNYXRyaXgsIF92M0EpO1xyXG4gICAgICAgIHRoaXMuY2VudGVyU3BhY2VCb25lTGVuZ3RoID0gX3YzQS5zdWJ0cmFjdEluUGxhY2UodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKS5sZW5ndGgoKTtcclxuXHJcbiAgICAgICAgaWYgKGNlbnRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmdldE1hdHJpeFdvcmxkVG9DZW50ZXIoX21hdEEpO1xyXG5cclxuICAgICAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKHRoaXMuY3VycmVudFRhaWwsIF9tYXRBLCB0aGlzLmN1cnJlbnRUYWlsKTtcclxuICAgICAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKHRoaXMucHJldlRhaWwsIF9tYXRBLCB0aGlzLnByZXZUYWlsKTtcclxuICAgICAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKHRoaXMubmV4dFRhaWwsIF9tYXRBLCB0aGlzLm5leHRUYWlsKTtcclxuXHJcbiAgICAgICAgICAgIHdvcmxkTWF0cml4Lm11bHRpcGx5VG9SZWYoX21hdEEsIF9tYXRBKTtcclxuXHJcbiAgICAgICAgICAgIF9tYXRBLmdldFRyYW5zbGF0aW9uVG9SZWYodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZih0aGlzLmluaXRpYWxMb2NhbENoaWxkUG9zaXRpb24sIF9tYXRBLCBfdjNBKTtcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXJTcGFjZUJvbmVMZW5ndGggPSBfdjNBLnN1YnRyYWN0SW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pLmxlbmd0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBUYWlsIHBvc2l0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN0aWZmbmVzc0ZvcmNlIEN1cnJlbnQgZnJhbWUgc3RpZmZuZXNzXHJcbiAgICAgKiBAcGFyYW0gZHJhZ0ZvcmNlIEN1cnJlbnQgZnJhbWUgZHJhZyBmb3JjZVxyXG4gICAgICogQHBhcmFtIGV4dGVybmFsIEN1cnJlbnQgZnJhbWUgZXh0ZXJuYWwgZm9yY2VcclxuICAgICAqIEBwYXJhbSBjb2xsaWRlckdyb3VwcyBDdXJyZW50IGZyYW1lIGNvbGxpZGVyR3JvdXBzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGUoc3RpZmZuZXNzRm9yY2U6IG51bWJlciwgZHJhZ0ZvcmNlOiBudW1iZXIsIGV4dGVybmFsOiBWZWN0b3IzLCBjb2xsaWRlckdyb3VwczogQ29sbGlkZXJHcm91cFtdKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKE51bWJlci5pc05hTih0aGlzLnRyYW5zZm9ybS5nZXRBYnNvbHV0ZVBvc2l0aW9uKCkueCkpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHVwZGF0ZSB3aGVuIGFic29sdXRlIHBvc2l0aW9uIGlzIGludmFsaWRcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IGJvbmUgcG9zaXRpb24gaW4gY2VudGVyIHNwYWNlXHJcbiAgICAgICAgdGhpcy5nZXRNYXRyaXhXb3JsZFRvQ2VudGVyKF9tYXRBKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5nZXRXb3JsZE1hdHJpeCgpLm11bHRpcGx5VG9SZWYoX21hdEEsIF9tYXRBKTtcclxuICAgICAgICBfbWF0QS5nZXRUcmFuc2xhdGlvblRvUmVmKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbik7XHJcblxyXG4gICAgICAgIC8vIEdldCBwYXJlbnQgcG9zaXRpb24gaW4gY2VudGVyIHNwYWNlXHJcbiAgICAgICAgdGhpcy5nZXRNYXRyaXhXb3JsZFRvQ2VudGVyKF9tYXRCKTtcclxuICAgICAgICB0aGlzLmdldFBhcmVudE1hdHJpeFdvcmxkKCkubXVsdGlwbHlUb1JlZihfbWF0QiwgX21hdEIpO1xyXG5cclxuICAgICAgICAvLyB2ZXJsZXTnqY3liIbjgafmrKHjga7kvY3nva7jgpLoqIjnrpdcclxuICAgICAgICB0aGlzLm5leHRUYWlsLmNvcHlGcm9tKHRoaXMuY3VycmVudFRhaWwpO1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8g5rib6KGw5LuY44GN44Gn5YmN44Gu44OV44Os44O844Og44Gu56e75YuV44KS57aZ57aaXHJcbiAgICAgICAgICAgIF92M0EuY29weUZyb20odGhpcy5jdXJyZW50VGFpbClcclxuICAgICAgICAgICAgICAgIC5zdWJ0cmFjdEluUGxhY2UodGhpcy5wcmV2VGFpbClcclxuICAgICAgICAgICAgICAgIC5zY2FsZUluUGxhY2UoMS4wIC0gZHJhZ0ZvcmNlKTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0VGFpbC5hZGRJblBsYWNlKF92M0EpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIOimquOBruWbnui7ouOBq+OCiOOCi+WtkOODnOODvOODs+OBruenu+WLleebruaomVxyXG4gICAgICAgICAgICBfdjNBLmNvcHlGcm9tKHRoaXMuYm9uZUF4aXMpO1xyXG4gICAgICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYoX3YzQSwgdGhpcy5pbml0aWFsTG9jYWxNYXRyaXgsIF92M0EpO1xyXG4gICAgICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYoX3YzQSwgX21hdEIsIF92M0EpO1xyXG4gICAgICAgICAgICBfdjNBLnN1YnRyYWN0SW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pLm5vcm1hbGl6ZSgpLnNjYWxlSW5QbGFjZShzdGlmZm5lc3NGb3JjZSk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRhaWwuYWRkSW5QbGFjZShfdjNBKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyDlpJblipvjgavjgojjgovnp7vli5Xph49cclxuICAgICAgICAgICAgdGhpcy5uZXh0VGFpbC5hZGRJblBsYWNlKGV4dGVybmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyDplbfjgZXjgpIgYm9uZUxlbmd0aCDjgavlvLfliLZcclxuICAgICAgICAgICAgdGhpcy5uZXh0VGFpbC5zdWJ0cmFjdEluUGxhY2UodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKS5ub3JtYWxpemUoKS5zY2FsZUluUGxhY2UodGhpcy5jZW50ZXJTcGFjZUJvbmVMZW5ndGgpLmFkZEluUGxhY2UodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBDb2xsaXNpb24g44Gn56e75YuVXHJcbiAgICAgICAgICAgIHRoaXMuY29sbGlkZShjb2xsaWRlckdyb3VwcywgdGhpcy5uZXh0VGFpbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByZXZUYWlsLmNvcHlGcm9tKHRoaXMuY3VycmVudFRhaWwpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRhaWwuY29weUZyb20odGhpcy5uZXh0VGFpbCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdGlhbExvY2FsTWF0cml4Lm11bHRpcGx5VG9SZWYoX21hdEIsIF9tYXRBKTtcclxuICAgICAgICBjb25zdCBpbml0aWFsQ2VudGVyU3BhY2VNYXRyaXhJbnYgPSBfbWF0QS5pbnZlcnQoKTtcclxuICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYodGhpcy5uZXh0VGFpbCwgaW5pdGlhbENlbnRlclNwYWNlTWF0cml4SW52LCBfdjNBKTtcclxuICAgICAgICBfdjNBLm5vcm1hbGl6ZVRvUmVmKF92M0IpO1xyXG4gICAgICAgIFF1YXRlcm5pb24uRnJvbVVuaXRWZWN0b3JzVG9SZWYodGhpcy5ib25lQXhpcywgX3YzQiwgX3F1YXRBKTtcclxuICAgICAgICBjb25zdCBhcHBseVJvdGF0aW9uID0gX3F1YXRBO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbExvY2FsUm90YXRpb24ubXVsdGlwbHlUb1JlZihhcHBseVJvdGF0aW9uLCB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24hKTtcclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIFdvcmxkTWF0cml4XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uY29tcHV0ZVdvcmxkTWF0cml4KHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbWF0cml4IHRoYXQgY29udmVydHMgd29ybGQgc3BhY2UgaW50byBjZW50ZXIgc3BhY2UuXHJcbiAgICAgKiBAcGFyYW0gcmVzdWx0IFRhcmdldCBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRNYXRyaXhXb3JsZFRvQ2VudGVyKHJlc3VsdDogTWF0cml4KTogTWF0cml4IHtcclxuICAgICAgICBpZiAodGhpcy5jZW50ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXIuZ2V0V29ybGRNYXRyaXgoKS5pbnZlcnRUb1JlZihyZXN1bHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5jb3B5RnJvbShJREVOVElUWV9NQVRSSVgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgd29ybGQgbWF0cml4IG9mIGl0cyBwYXJlbnQgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFBhcmVudE1hdHJpeFdvcmxkKCk6IE1hdHJpeCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtLnBhcmVudCA/ICh0aGlzLnRyYW5zZm9ybS5wYXJlbnQgYXMgVHJhbnNmb3JtTm9kZSkuZ2V0V29ybGRNYXRyaXgoKSA6IElERU5USVRZX01BVFJJWDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOihneeqgeWIpOWumuOCkuihjOOBhlxyXG4gICAgICogQHBhcmFtIGNvbGxpZGVyR3JvdXBzXHJcbiAgICAgKiBAcGFyYW0gdGFpbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbGxpZGUoY29sbGlkZXJHcm91cHM6IENvbGxpZGVyR3JvdXBbXSwgdGFpbDogVmVjdG9yMykge1xyXG4gICAgICAgIGNvbGxpZGVyR3JvdXBzLmZvckVhY2goKGNvbGxpZGVyR3JvdXApID0+IHtcclxuICAgICAgICAgICAgY29sbGlkZXJHcm91cC5jb2xsaWRlcnMuZm9yRWFjaCgoY29sbGlkZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TWF0cml4V29ybGRUb0NlbnRlcihfbWF0QSk7XHJcbiAgICAgICAgICAgICAgICBjb2xsaWRlci5zcGhlcmUuY29tcHV0ZVdvcmxkTWF0cml4KCkubXVsdGlwbHlUb1JlZihfbWF0QSwgX21hdEEpO1xyXG4gICAgICAgICAgICAgICAgX21hdEEuZ2V0VHJhbnNsYXRpb25Ub1JlZihfdjNBKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxpZGVyQ2VudGVyU3BhY2VQb3NpdGlvbiA9IF92M0E7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1heEFic1NjYWxlID0gMDtcclxuICAgICAgICAgICAgICAgIGNvbGxpZGVyLnNwaGVyZS5hYnNvbHV0ZVNjYWxpbmcuYXNBcnJheSgpLmZvckVhY2goKHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhBYnNTY2FsZSA9IE1hdGgubWF4KG1heEFic1NjYWxlLCBNYXRoLmFicyhzKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxpZGVyUmFkaXVzID0gY29sbGlkZXIucmFkaXVzICogbWF4QWJzU2NhbGU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5yYWRpdXMgKyBjb2xsaWRlclJhZGl1cztcclxuXHJcbiAgICAgICAgICAgICAgICB0YWlsLnN1YnRyYWN0VG9SZWYoY29sbGlkZXJDZW50ZXJTcGFjZVBvc2l0aW9uLCBfdjNCKTtcclxuICAgICAgICAgICAgICAgIGlmIChfdjNCLmxlbmd0aFNxdWFyZWQoKSA8PSByICogcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IF92M0IuY29weUZyb20odGFpbCkuc3VidHJhY3RJblBsYWNlKGNvbGxpZGVyQ2VudGVyU3BhY2VQb3NpdGlvbikubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zRnJvbUNvbGxpZGVyID0gX3YzQy5jb3B5RnJvbShjb2xsaWRlckNlbnRlclNwYWNlUG9zaXRpb24pLmFkZEluUGxhY2Uobm9ybWFsLnNjYWxlSW5QbGFjZShyKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRhaWwuY29weUZyb20oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc0Zyb21Db2xsaWRlci5zdWJ0cmFjdEluUGxhY2UodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKS5ub3JtYWxpemUoKS5zY2FsZUluUGxhY2UodGhpcy5jZW50ZXJTcGFjZUJvbmVMZW5ndGgpLmFkZEluUGxhY2UodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFN0YW5kYXJkTWF0ZXJpYWwgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL3N0YW5kYXJkTWF0ZXJpYWwnO1xyXG5pbXBvcnQgeyBDb2xvcjMsIFZlY3RvcjMgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aCc7XHJcbmltcG9ydCB7IE1lc2hCdWlsZGVyIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoQnVpbGRlcic7XHJcbmltcG9ydCB0eXBlIHsgVHJhbnNmb3JtTm9kZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NZXNoZXMvdHJhbnNmb3JtTm9kZSc7XHJcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSB7IENvbGxpZGVyR3JvdXAgfSBmcm9tICcuL2NvbGxpZGVyLWdyb3VwJztcclxuaW1wb3J0IHsgVlJNU3ByaW5nQm9uZUxvZ2ljIH0gZnJvbSAnLi92cm0tc3ByaW5nLWJvbmUtbG9naWMnO1xyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuaW1wb3J0IHR5cGUgeyBDb25zdHJ1Y3RTcHJpbmdzT3B0aW9ucyB9IGZyb20gJy4vc3ByaW5nLWJvbmUtY29udHJvbGxlcic7XHJcblxyXG4vKipcclxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnJtLWMvVW5pVlJNL2Jsb2IvbWFzdGVyL0Fzc2V0cy9WUk0vVW5pVlJNL1NjcmlwdHMvU3ByaW5nQm9uZS9WUk1TcHJpbmdCb25lLmNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVlJNU3ByaW5nQm9uZSB7XHJcbiAgICBwdWJsaWMgdmVybGV0czogVlJNU3ByaW5nQm9uZUxvZ2ljW10gPSBbXTtcclxuICAgIHByaXZhdGUgYWN0aXZlQm9uZXM6IFRyYW5zZm9ybU5vZGVbXSA9IFtdO1xyXG5cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBwcml2YXRlIGRyYXdHaXptbyA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnJtLWMvdnJtLXNwZWNpZmljYXRpb24vdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8wLjBcclxuICAgICAqIEBwYXJhbSBjb21tZW50IEFubm90YXRpb24gY29tbWVudFxyXG4gICAgICogQHBhcmFtIHN0aWZmbmVzcyBUaGUgcmVzaWxpZW5jZSBvZiB0aGUgc3dheWluZyBvYmplY3QgKHRoZSBwb3dlciBvZiByZXR1cm5pbmcgdG8gdGhlIGluaXRpYWwgcG9zZSkuXHJcbiAgICAgKiBAcGFyYW0gZ3Jhdml0eVBvd2VyIFRoZSBzdHJlbmd0aCBvZiBncmF2aXR5LlxyXG4gICAgICogQHBhcmFtIGdyYXZpdHlEaXIgVGhlIGRpcmVjdGlvbiBvZiBncmF2aXR5LiBTZXQgKDAsIC0xLCAwKSBmb3Igc2ltdWxhdGluZyB0aGUgZ3Jhdml0eS4gU2V0ICgxLCAwLCAwKSBmb3Igc2ltdWxhdGluZyB0aGUgd2luZC5cclxuICAgICAqIEBwYXJhbSBkcmFnRm9yY2UgVGhlIHJlc2lzdGFuY2UgKGRlY2VsZXJhdGlvbikgb2YgYXV0b21hdGljIGFuaW1hdGlvbi5cclxuICAgICAqIEBwYXJhbSBjZW50ZXIgVGhlIHJlZmVyZW5jZSBwb2ludCBvZiBhIHN3YXlpbmcgb2JqZWN0IGNhbiBiZSBzZXQgYXQgYW55IGxvY2F0aW9uIGV4Y2VwdCB0aGUgb3JpZ2luLlxyXG4gICAgICogICAgICAgICAgICAgICBXaGVuIGltcGxlbWVudGluZyBVSSBtb3Zpbmcgd2l0aCB3YXJwLFxyXG4gICAgICogICAgICAgICAgICAgICB0aGUgcGFyZW50IG5vZGUgdG8gbW92ZSB3aXRoIHdhcnAgY2FuIGJlIHNwZWNpZmllZCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBtYWtlIHRoZSBvYmplY3Qgc3dheWluZyB3aXRoIHdhcnAgbW92ZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gaGl0UmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSB1c2VkIGZvciB0aGUgY29sbGlzaW9uIGRldGVjdGlvbiB3aXRoIGNvbGxpZGVycy5cclxuICAgICAqIEBwYXJhbSBib25lcyBTcGVjaWZ5IHRoZSBub2RlIGluZGV4IG9mIHRoZSByb290IGJvbmUgb2YgdGhlIHN3YXlpbmcgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGNvbGxpZGVyR3JvdXBzIFNwZWNpZnkgdGhlIGluZGV4IG9mIHRoZSBjb2xsaWRlciBncm91cCBmb3IgY29sbGlzaW9ucyB3aXRoIHN3YXlpbmcgb2JqZWN0cy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBjb21tZW50OiBzdHJpbmcsXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gcHVibGljIHJlYWRvbmx5IHN0aWZmbmVzczogbnVtYmVyLFxyXG4gICAgICAgIC8vIHB1YmxpYyByZWFkb25seSBncmF2aXR5UG93ZXI6IG51bWJlcixcclxuICAgICAgICAvLyBwdWJsaWMgcmVhZG9ubHkgZ3Jhdml0eURpcjogVmVjdG9yMyxcclxuICAgICAgICAvLyBwdWJsaWMgcmVhZG9ubHkgZHJhZ0ZvcmNlOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHN0aWZmbmVzczogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyBncmF2aXR5UG93ZXI6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgZ3Jhdml0eURpcjogVmVjdG9yMyxcclxuICAgICAgICBwdWJsaWMgZHJhZ0ZvcmNlOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNlbnRlcjogTnVsbGFibGU8VHJhbnNmb3JtTm9kZT4sXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gcHVibGljIHJlYWRvbmx5IGhpdFJhZGl1czogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyBoaXRSYWRpdXM6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYm9uZXM6IEFycmF5PE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+PixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgY29sbGlkZXJHcm91cHM6IENvbGxpZGVyR3JvdXBbXVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVCb25lcyA9IHRoaXMuYm9uZXMuZmlsdGVyKChib25lKSA9PiBib25lICE9PSBudWxsKSBhcyBUcmFuc2Zvcm1Ob2RlW107XHJcbiAgICAgICAgdGhpcy5hY3RpdmVCb25lcy5mb3JFYWNoKChib25lKSA9PiB7XHJcbiAgICAgICAgICAgIFtib25lXS5jb25jYXQoYm9uZS5nZXRDaGlsZFRyYW5zZm9ybU5vZGVzKCkpLmZvckVhY2goKGIpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVybGV0cy5wdXNoKG5ldyBWUk1TcHJpbmdCb25lTG9naWModGhpcy5jZW50ZXIsIHRoaXMuaGl0UmFkaXVzLCBiKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kcmF3R2l6bW8pIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cEdpem1vKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBHaXptbygpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZUJvbmVzLmZvckVhY2goKGJvbmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSBib25lLmdldFNjZW5lKCk7XHJcbiAgICAgICAgICAgIFtib25lXS5jb25jYXQoYm9uZS5nZXRDaGlsZFRyYW5zZm9ybU5vZGVzKCkpLmZvckVhY2goKGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJvbmVHaXptbyA9IE1lc2hCdWlsZGVyLkNyZWF0ZVNwaGVyZShcclxuICAgICAgICAgICAgICAgICAgICBiLm5hbWUgKyAnX2JvbmVHaXptbycsXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50czogNixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXI6IHRoaXMuaGl0UmFkaXVzICogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXQgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbChiLm5hbWUgKyAnX2JvbmVHaXptb21hdCcsIHNjZW5lKTtcclxuICAgICAgICAgICAgICAgIG1hdC5lbWlzc2l2ZUNvbG9yID0gQ29sb3IzLlJlZCgpO1xyXG4gICAgICAgICAgICAgICAgbWF0LndpcmVmcmFtZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBib25lR2l6bW8ubWF0ZXJpYWwgPSBtYXQ7XHJcbiAgICAgICAgICAgICAgICBib25lR2l6bW8uc2V0UGFyZW50KGIpO1xyXG4gICAgICAgICAgICAgICAgYm9uZUdpem1vLnBvc2l0aW9uID0gVmVjdG9yMy5aZXJvKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbGxpZGVyR3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gZ3JvdXAudHJhbnNmb3JtLmdldFNjZW5lKCk7XHJcbiAgICAgICAgICAgIGdyb3VwLmNvbGxpZGVycy5mb3JFYWNoKChjb2xsaWRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BoZXJlID0gY29sbGlkZXIuc3BoZXJlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzcGhlcmUuaXNFbmFibGVkKGZhbHNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5zZXRFbmFibGVkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdCA9IG5ldyBTdGFuZGFyZE1hdGVyaWFsKGdyb3VwLnRyYW5zZm9ybS5uYW1lICsgJ19jb2xsaWRlckdpem1vbWF0Jywgc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdC5lbWlzc2l2ZUNvbG9yID0gQ29sb3IzLlllbGxvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdC53aXJlZnJhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5tYXRlcmlhbCA9IG1hdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgYm9uZXNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVsdGFUaW1lXHJcbiAgICAgKi9cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLy8gcHVibGljIGFzeW5jIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlciwgYm9uZU9wdGlvbnM/OiBDb25zdHJ1Y3RTcHJpbmdzT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIGNvbnN0IG9sZE9wdGlvbnMgPSB0aGlzLnVwZGF0ZU9wdGlvbnMoYm9uZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICBjb25zdCBzdGlmZm5lc3MgPSB0aGlzLnN0aWZmbmVzcyAqIGRlbHRhVGltZTtcclxuICAgICAgICBjb25zdCBleHRlcm5hbCA9IHRoaXMuZ3Jhdml0eURpci5zY2FsZSh0aGlzLmdyYXZpdHlQb3dlciAqIGRlbHRhVGltZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gdGhpcy52ZXJsZXRzLm1hcDxQcm9taXNlPHZvaWQ+PigodmVybGV0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmVybGV0LnVwZGF0ZShzdGlmZm5lc3MsIHRoaXMuZHJhZ0ZvcmNlLCBleHRlcm5hbCwgdGhpcy5jb2xsaWRlckdyb3Vwcyk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICAvLyBSZXN0b3JlIG9wdGlvbnNcclxuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMob2xkT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8qIERvIE5vdGhpbmcgKi9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHByaXZhdGUgdXBkYXRlT3B0aW9ucyhib25lT3B0aW9ucz86IENvbnN0cnVjdFNwcmluZ3NPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgYmFja3VwT3B0aW9uczogQ29uc3RydWN0U3ByaW5nc09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHN0aWZmbmVzczogdGhpcy5zdGlmZm5lc3MsXHJcbiAgICAgICAgICAgIGdyYXZpdHlQb3dlcjogdGhpcy5ncmF2aXR5UG93ZXIsXHJcbiAgICAgICAgICAgIGdyYXZpdHlEaXI6IHRoaXMuZ3Jhdml0eURpci5jbG9uZSgpLFxyXG4gICAgICAgICAgICBkcmFnRm9yY2U6IHRoaXMuZHJhZ0ZvcmNlLFxyXG4gICAgICAgICAgICBoaXRSYWRpdXM6IHRoaXMuaGl0UmFkaXVzLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zdGlmZm5lc3MgPSBib25lT3B0aW9ucz8uc3RpZmZuZXNzIHx8IHRoaXMuc3RpZmZuZXNzO1xyXG4gICAgICAgIHRoaXMuZ3Jhdml0eVBvd2VyID0gYm9uZU9wdGlvbnM/LmdyYXZpdHlQb3dlciB8fCB0aGlzLmdyYXZpdHlQb3dlcjtcclxuICAgICAgICB0aGlzLmdyYXZpdHlEaXIgPSBib25lT3B0aW9ucz8uZ3Jhdml0eURpciB8fCB0aGlzLmdyYXZpdHlEaXI7XHJcbiAgICAgICAgdGhpcy5kcmFnRm9yY2UgPSBib25lT3B0aW9ucz8uZHJhZ0ZvcmNlIHx8IHRoaXMuZHJhZ0ZvcmNlO1xyXG4gICAgICAgIHRoaXMuaGl0UmFkaXVzID0gYm9uZU9wdGlvbnM/LmhpdFJhZGl1cyB8fCB0aGlzLmhpdFJhZGl1cztcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2t1cE9wdGlvbnM7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBNYXRlcmlhbCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgdHlwZSB7IE1lc2ggfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL21lc2gnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBJR0xURkxvYWRlckV4dGVuc2lvbiwgSU1hdGVyaWFsLCBJTWVzaFByaW1pdGl2ZSB9IGZyb20gJ0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMCc7XHJcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tICdAYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAnO1xyXG5pbXBvcnQgeyBWUk1NYW5hZ2VyIH0gZnJvbSAnLi92cm0tbWFuYWdlcic7XHJcbmltcG9ydCB7IFZSTU1hdGVyaWFsR2VuZXJhdG9yIH0gZnJvbSAnLi92cm0tbWF0ZXJpYWwtZ2VuZXJhdG9yJztcclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG5pbXBvcnQgeyBWUk1GaWxlTG9hZGVyIH0gZnJvbSAnLi92cm0tZmlsZS1sb2FkZXInO1xyXG5pbXBvcnQgeyBHTFRGTG9hZGVyRXh0ZW5zaW9uT2JzZXJ2ZXIgfSBmcm9tICcuLi8uLi9sb2FkZXItb2JzZXJ2ZXInO1xyXG5pbXBvcnQgeyBWM0RDb3JlIH0gZnJvbSAnLi4vLi4vLi4vaW5kZXgnO1xyXG5cclxuLyoqXHJcbiAqIGBleHRlbnNpb25zYCDjgavlhaXjgovmi6HlvLXjgq3jg7xcclxuICovXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG4vLyBjb25zdCBOQU1FID0gJ1ZSTSc7XHJcblxyXG4vKipcclxuICogVlJNIOaLoeW8teOCkuWHpueQhuOBmeOCi1xyXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL3ZybS1jL3ZybS1zcGVjaWZpY2F0aW9uL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMC4wKVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZSTUxvYWRlckV4dGVuc2lvbiBpbXBsZW1lbnRzIElHTFRGTG9hZGVyRXh0ZW5zaW9uIHtcclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBOQU1FID0gJ1ZSTSc7XHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWFkb25seSBuYW1lID0gVlJNTG9hZGVyRXh0ZW5zaW9uLk5BTUU7XHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBlbmFibGVkID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICog44GT44GuIE1lc2ggaW5kZXgg5Lul6ZmN44GM6Kqt44G/6L6844G/5a++6LGhXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWVzaGVzRnJvbSA9IDA7XHJcbiAgICAvKipcclxuICAgICAqIOOBk+OBriBUcmFuc2Zvcm1Ob2RlIGluZGV4IOS7pemZjeOBjOiqreOBv+i+vOOBv+WvvuixoVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRyYW5zZm9ybU5vZGVzRnJvbSA9IDA7XHJcbiAgICAvKipcclxuICAgICAqIOOBk+OBriBNYXRlcmlhbCBpbmRleCDku6XpmY3jgYzoqq3jgb/ovrzjgb/lr77osaFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBtYXRlcmlhbHNGcm9tID0gMDtcclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkZXIgb2JzZXJ2ZXJzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9hZGVyT2JzZXJ2ZXJzOiBHTFRGTG9hZGVyRXh0ZW5zaW9uT2JzZXJ2ZXJbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBvbkxvYWRlZENhbGxCYWNrOiBGdW5jdGlvbjtcclxuICAgIC8qKlxyXG4gICAgICogVlJNIE1hbmFnZXIgZnJvbSB0aGlzIGxvYWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWFuYWdlcjogVlJNTWFuYWdlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgbG9hZGVyOiBHTFRGTG9hZGVyLCBwcml2YXRlIHYzRENvcmU6IFYzRENvcmUpIHtcclxuICAgICAgICAvLyBHTFRGTG9hZGVyIGhhcyBhbHJlYWR5IGFkZGVkIHJvb3RNZXNoIGFzIF9fcm9vdF9fIGJlZm9yZSBsb2FkIGV4dGVuc2lvblxyXG4gICAgICAgIC8vIEBzZWUgZ2xURkxvYWRlci5fbG9hZERhdGFcclxuICAgICAgICB0aGlzLm1lc2hlc0Zyb20gPSB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUubWVzaGVzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1Ob2Rlc0Zyb20gPSB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUudHJhbnNmb3JtTm9kZXMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzRnJvbSA9IHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZS5tYXRlcmlhbHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICB0aGlzLmFkZExvYWRlck9ic2VydmVyKHRoaXMudjNEQ29yZSk7XHJcbiAgICAgICAgdGhpcy5vbkxvYWRlZENhbGxCYWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB2M0RDb3JlLmFkZFZSTU1hbmFnZXIodGhpcy5tYW5hZ2VyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHYzRENvcmUuYWRkT25Mb2FkQ29tcGxldGVDYWxsYmFja3ModGhpcy5vbkxvYWRlZENhbGxCYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgICh0aGlzLmxvYWRlciBhcyBhbnkpID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgdGhpcy5sb2FkZXJPYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnYzRENvcmUucmVtb3ZlT25Mb2FkQ29tcGxldGVDYWxsYmFjayh0aGlzLm9uTG9hZGVkQ2FsbEJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGluaGVyaXRkb2NcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uUmVhZHkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMgfHwgIXRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9uc1tWUk1Mb2FkZXJFeHRlbnNpb24uTkFNRV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICAvLyBjb25zdCBzY2VuZSA9IHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZTtcclxuICAgICAgICAvLyBjb25zdCBtYW5hZ2VyID0gbmV3IFZSTU1hbmFnZXIodGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zW1ZSTUxvYWRlckV4dGVuc2lvbi5OQU1FXSwgdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLCB0aGlzLm1lc2hlc0Zyb20sIHRoaXMudHJhbnNmb3JtTm9kZXNGcm9tLCB0aGlzLm1hdGVyaWFsc0Zyb20pO1xyXG4gICAgICAgIGNvbnN0IHVyaSA9ICh0aGlzLmxvYWRlci5wYXJlbnQgYXMgdW5rbm93biBhcyBWUk1GaWxlTG9hZGVyKS51cmk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFZSTU1hbmFnZXIoXHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9uc1tWUk1Mb2FkZXJFeHRlbnNpb24uTkFNRV0sXHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZSxcclxuICAgICAgICAgICAgdGhpcy5tZXNoZXNGcm9tLFxyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybU5vZGVzRnJvbSxcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHNGcm9tLFxyXG4gICAgICAgICAgICB1cmlcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIC8vIHNjZW5lLm1ldGFkYXRhID0gc2NlbmUubWV0YWRhdGEgfHwge307XHJcbiAgICAgICAgLy8gc2NlbmUubWV0YWRhdGEudnJtTWFuYWdlcnMgPSBzY2VuZS5tZXRhZGF0YS52cm1NYW5hZ2VycyB8fCBbXTtcclxuICAgICAgICAvLyBzY2VuZS5tZXRhZGF0YS52cm1NYW5hZ2Vycy5wdXNoKG1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZS5vbkRpc3Bvc2VPYnNlcnZhYmxlLmFkZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFNjZW5lIGRpc3Bvc2Ug5pmC44GrIE1hbmFnZXIg44KC56C05qOE44GZ44KLXHJcbiAgICAgICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgICAgICAvLyBtYW5hZ2VyLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLm1ldGFkYXRhLnZybU1hbmFnZXJzID0gW107XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIC8vIEluZm9ybSBvYnNlcnZlcnNcclxuICAgICAgICBmb3IgKGNvbnN0IG9ic2VydmVyIG9mIHRoaXMubG9hZGVyT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm9uTG9hZFJlYWR5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGluaGVyaXRkb2NcclxuICAgICAqL1xyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAvLyBwdWJsaWMgX2xvYWRWZXJ0ZXhEYXRhQXN5bmMoY29udGV4dDogc3RyaW5nLCBwcmltaXRpdmU6IElNZXNoUHJpbWl0aXZlLCBiYWJ5bG9uTWVzaDogTWVzaCkge1xyXG4gICAgcHVibGljIF9sb2FkVmVydGV4RGF0YUFzeW5jKGNvbnRleHQ6IHN0cmluZywgcHJpbWl0aXZlOiBJTWVzaFByaW1pdGl2ZSwgYmFieWxvbk1lc2g6IE1lc2gpOiBhbnkge1xyXG4gICAgICAgIGlmICghcHJpbWl0aXZlLmV4dHJhcyB8fCAhcHJpbWl0aXZlLmV4dHJhcy50YXJnZXROYW1lcykge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g44G+44GgIE1vcnBoVGFyZ2V0IOOBjOeUn+aIkOOBleOCjOOBpuOBhOOBquOBhOOBruOBp+OAgeODoeOCv+aDheWgseOBq+ODouODvOODleOCv+ODvOOCsuODg+ODiOaDheWgseOCkuWFpeOCjOOBpuOBiuOBj1xyXG4gICAgICAgIGJhYnlsb25NZXNoLm1ldGFkYXRhID0gYmFieWxvbk1lc2gubWV0YWRhdGEgfHwge307XHJcbiAgICAgICAgYmFieWxvbk1lc2gubWV0YWRhdGEudnJtVGFyZ2V0TmFtZXMgPSBwcmltaXRpdmUuZXh0cmFzLnRhcmdldE5hbWVzO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGluaGVyaXRkb2NcclxuICAgICAqL1xyXG4gICAgcHVibGljIF9sb2FkTWF0ZXJpYWxBc3luYyhjb250ZXh0OiBzdHJpbmcsIG1hdGVyaWFsOiBJTWF0ZXJpYWwsIG1lc2g6IE1lc2gsIGJhYnlsb25EcmF3TW9kZTogbnVtYmVyLCBhc3NpZ246IChiYWJ5bG9uTWF0ZXJpYWw6IE1hdGVyaWFsKSA9PiB2b2lkKTogTnVsbGFibGU8UHJvbWlzZTxNYXRlcmlhbD4+IHtcclxuICAgICAgICAvLyDjgrjjgqfjg43jg6zjg7zjgr/jgafjg57jg4bjg6rjgqLjg6vjgpLnlJ/miJDjgZnjgotcclxuICAgICAgICByZXR1cm4gbmV3IFZSTU1hdGVyaWFsR2VuZXJhdG9yKHRoaXMubG9hZGVyKS5nZW5lcmF0ZShjb250ZXh0LCBtYXRlcmlhbCwgbWVzaCwgYmFieWxvbkRyYXdNb2RlLCBhc3NpZ24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgb2JzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZExvYWRlck9ic2VydmVyKG9ic2VydmVyOiBHTFRGTG9hZGVyRXh0ZW5zaW9uT2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLmxvYWRlck9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbi8vIOODreODvOODgOODvOOBq+eZu+mMsuOBmeOCi1xyXG4vLyBHTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBWUk0obG9hZGVyKSk7XHJcbiIsImltcG9ydCB7IFNjZW5lTG9hZGVyIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL0xvYWRpbmcvc2NlbmVMb2FkZXInO1xyXG5pbXBvcnQgeyBHTFRGRmlsZUxvYWRlciB9IGZyb20gJ0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGL2dsVEZGaWxlTG9hZGVyJztcclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbmltcG9ydCB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgVlJNTWFuYWdlciB9IGZyb20gJy4vdnJtLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9zY2VuZSc7XHJcbmltcG9ydCB7IElTY2VuZUxvYWRlclByb2dyZXNzRXZlbnQgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9zY2VuZUxvYWRlcic7XHJcblxyXG4vKipcclxuICogVlJNL1ZDSSDjg5XjgqHjgqTjg6vjgpLoqq3jgb/ovrzjgoHjgovjgojjgYbjgavjgZnjgotcclxuICog5ouh5by15a2Q44KS5aSJ5pu044GX44Gf44Gg44GRXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVlJNRmlsZUxvYWRlciBleHRlbmRzIEdMVEZGaWxlTG9hZGVyIHtcclxuICAgIHB1YmxpYyBuYW1lID0gJ3ZybSc7XHJcbiAgICBwdWJsaWMgZXh0ZW5zaW9ucyA9IHtcclxuICAgICAgICAnLnZybSc6IHsgaXNCaW5hcnk6IHRydWUgfSxcclxuICAgICAgICAnLnZjaSc6IHsgaXNCaW5hcnk6IHRydWUgfSxcclxuICAgIH07XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyB1cmk6IHN0cmluZztcclxuICAgIHB1YmxpYyB2cm1NYW5hZ2VyOiBOdWxsYWJsZTxWUk1NYW5hZ2VyPiA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVBsdWdpbigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZSTUZpbGVMb2FkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBsb2FkQXN5bmMoc2NlbmU6IFNjZW5lLCBkYXRhOiBhbnksIHJvb3RVcmw6IHN0cmluZywgb25Qcm9ncmVzcz86IChldmVudDogSVNjZW5lTG9hZGVyUHJvZ3Jlc3NFdmVudCkgPT4gdm9pZCwgZmlsZU5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnVyaSA9IHJvb3RVcmw7XHJcbiAgICAgICAgaWYgKGZpbGVOYW1lKSB0aGlzLnVyaSArPSBmaWxlTmFtZTtcclxuICAgICAgICByZXR1cm4gc3VwZXIubG9hZEFzeW5jKHNjZW5lLCBkYXRhLCByb290VXJsLCBvblByb2dyZXNzLCBmaWxlTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG4vLyBpZiAoU2NlbmVMb2FkZXIpIHtcclxuLy8gICAgIFNjZW5lTG9hZGVyLlJlZ2lzdGVyUGx1Z2luKG5ldyBWUk1GaWxlTG9hZGVyKCkpO1xyXG4vLyB9XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgSVZSTVZlY3RvcjMge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgejogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk1cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTSB7XHJcbiAgICBleHBvcnRlclZlcnNpb246IHN0cmluZztcclxuICAgIHNwZWNWZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBtZXRhOiBJVlJNTWV0YTtcclxuICAgIGh1bWFub2lkOiBJVlJNSHVtYW5vaWQ7XHJcbiAgICBmaXJzdFBlcnNvbjogSVZSTUZpcnN0UGVyc29uO1xyXG4gICAgYmxlbmRTaGFwZU1hc3RlcjogSVZSTUJsZW5kU2hhcGVNYXN0ZXI7XHJcbiAgICBzZWNvbmRhcnlBbmltYXRpb246IElWUk1TZWNvbmRhcnlBbmltYXRpb247XHJcbiAgICBtYXRlcmlhbFByb3BlcnRpZXM6IElWUk1NYXRlcmlhbFByb3BlcnR5W107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBleHRlbnNpb25zLlZSTS5tZXRhXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NZXRhIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBhdXRob3I6IHN0cmluZztcclxuICAgIGNvbnRhY3RJbmZvcm1hdGlvbj86IHN0cmluZztcclxuICAgIHJlZmVyZW5jZT86IHN0cmluZztcclxuICAgIHRleHR1cmU/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBleHRlbnNpb25zLlZSTS5odW1hbm9pZFxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNSHVtYW5vaWQge1xyXG4gICAgaHVtYW5Cb25lczogSVZSTUh1bWFub2lkQm9uZVtdO1xyXG4gICAgYXJtU3RyZXRjaD86IG51bWJlcjtcclxuICAgIGxlZ1N0cmV0Y2g/OiBudW1iZXI7XHJcbiAgICB1cHBlckFybVR3aXN0PzogbnVtYmVyO1xyXG4gICAgbG93ZXJBcm1Ud2lzdD86IG51bWJlcjtcclxuICAgIHVwcGVyTGVnVHdpc3Q/OiBudW1iZXI7XHJcbiAgICBsb3dlckxlZ1R3aXN0PzogbnVtYmVyO1xyXG4gICAgZmVldFNwYWNpbmc/OiBudW1iZXI7XHJcbiAgICBoYXNUcmFuc2xhdGlvbkRvRj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUh1bWFub2lkQm9uZSB7XHJcbiAgICBib25lOiBzdHJpbmc7XHJcbiAgICBub2RlOiBudW1iZXI7XHJcbiAgICB1c2VEZWZhdWx0VmFsdWVzOiBib29sZWFuO1xyXG4gICAgbWluPzogSVZSTVZlY3RvcjM7XHJcbiAgICBtYXg/OiBJVlJNVmVjdG9yMztcclxuICAgIGNlbnRlcj86IElWUk1WZWN0b3IzO1xyXG4gICAgYXhpc0xlbmd0aD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNRmlyc3RQZXJzb25NZXNoQW5ub3RhdGlvbiB7XHJcbiAgICBtZXNoOiBudW1iZXI7XHJcbiAgICBmaXJzdFBlcnNvbkZsYWc6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNRmlyc3RQZXJzb25EZWdyZWVNYXAge1xyXG4gICAgY3VydmU6IG51bWJlcltdO1xyXG4gICAgeFJhbmdlOiBudW1iZXI7XHJcbiAgICB5UmFuZ2U6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIGV4dGVuc2lvbnMuVlJNLmZpcnN0UGVyc29uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1GaXJzdFBlcnNvbiB7XHJcbiAgICBmaXJzdFBlcnNvbkJvbmU6IG51bWJlcjtcclxuICAgIGZpcnN0UGVyc29uQm9uZU9mZnNldDogSVZSTVZlY3RvcjM7XHJcbiAgICBtZXNoQW5ub3RhdGlvbnM6IElWUk1GaXJzdFBlcnNvbk1lc2hBbm5vdGF0aW9uW107XHJcbiAgICBsb29rQXRUeXBlTmFtZTogJ0JvbmUnIHwgJ0JsZW5kU2hhcGUnO1xyXG4gICAgbG9va0F0SG9yaXpvbnRhbElubmVyOiBJVlJNRmlyc3RQZXJzb25EZWdyZWVNYXA7XHJcbiAgICBsb29rQXRIb3Jpem9udGFsT3V0ZXI6IElWUk1GaXJzdFBlcnNvbkRlZ3JlZU1hcDtcclxuICAgIGxvb2tBdFZlcnRpY2FsRG93bjogSVZSTUZpcnN0UGVyc29uRGVncmVlTWFwO1xyXG4gICAgbG9va0F0VmVydGljYWxVcDogSVZSTUZpcnN0UGVyc29uRGVncmVlTWFwO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk0uYmxlbmRTaGFwZU1hc3RlclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNQmxlbmRTaGFwZU1hc3RlciB7XHJcbiAgICBibGVuZFNoYXBlR3JvdXBzOiBJVlJNQmxlbmRTaGFwZUdyb3VwW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUJsZW5kU2hhcGVHcm91cCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwcmVzZXROYW1lOiBzdHJpbmc7XHJcbiAgICBiaW5kczogSVZSTUJsZW5kU2hhcGVCaW5kW107XHJcbiAgICBtYXRlcmlhbFZhbHVlczogSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmRbXTtcclxuICAgIGlzQmluYXJ5OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1CbGVuZFNoYXBlQmluZCB7XHJcbiAgICBtZXNoOiBudW1iZXI7XHJcbiAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgd2VpZ2h0OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmQge1xyXG4gICAgbWF0ZXJpYWxOYW1lOiBzdHJpbmc7XHJcbiAgICBwcm9wZXJ0eU5hbWU6IHN0cmluZztcclxuICAgIHRhcmdldFZhbHVlOiBudW1iZXJbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uU3ByaW5nIHtcclxuICAgIGNvbW1lbnQ6IHN0cmluZztcclxuICAgIHN0aWZmaW5lc3M6IG51bWJlcjtcclxuICAgIGdyYXZpdHlQb3dlcjogbnVtYmVyO1xyXG4gICAgZ3Jhdml0eURpcjogSVZSTVZlY3RvcjM7XHJcbiAgICBkcmFnRm9yY2U6IG51bWJlcjtcclxuICAgIGNlbnRlcjogbnVtYmVyO1xyXG4gICAgaGl0UmFkaXVzOiBudW1iZXI7XHJcbiAgICBib25lczogbnVtYmVyW107XHJcbiAgICBjb2xsaWRlckdyb3VwczogbnVtYmVyW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTVNlY29uZGFyeUFuaW1hdGlvbkNvbGxpZGVyIHtcclxuICAgIG9mZnNldDogSVZSTVZlY3RvcjM7XHJcbiAgICByYWRpdXM6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uQ29sbGlkZXJHcm91cCB7XHJcbiAgICBub2RlOiBudW1iZXI7XHJcbiAgICBjb2xsaWRlcnM6IElWUk1TZWNvbmRhcnlBbmltYXRpb25Db2xsaWRlcltdO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk0uc2Vjb25kYXJ5QW5pbWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1TZWNvbmRhcnlBbmltYXRpb24ge1xyXG4gICAgYm9uZUdyb3VwczogSVZSTVNlY29uZGFyeUFuaW1hdGlvblNwcmluZ1tdO1xyXG4gICAgY29sbGlkZXJHcm91cHM6IElWUk1TZWNvbmRhcnlBbmltYXRpb25Db2xsaWRlckdyb3VwW107XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyIHtcclxuICAgIFZSTV9VU0VfR0xURlNIQURFUiA9ICdWUk1fVVNFX0dMVEZTSEFERVInLFxyXG4gICAgVlJNTVRvb24gPSAnVlJNL01Ub29uJyxcclxuICAgIFZSTVVubGl0VHJhbnNwYXJlbnRaV3JpdGUgPSAnVlJNL1VubGl0VHJhbnNwYXJlbnRaV3JpdGUnLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NYXRlcmlhbFByb3BlcnR5RmxvYXRQcm9wZXJ0aWVzIHtcclxuICAgIF9DdXRvZmY/OiBudW1iZXI7XHJcbiAgICBfQnVtcFNjYWxlPzogbnVtYmVyO1xyXG4gICAgX1JlY2VpdmVTaGFkb3dSYXRlPzogbnVtYmVyO1xyXG4gICAgX1NoYWRpbmdHcmFkZVJhdGU/OiBudW1iZXI7XHJcbiAgICBfU2hhZGVTaGlmdD86IG51bWJlcjtcclxuICAgIF9TaGFkZVRvb255PzogbnVtYmVyO1xyXG4gICAgX0xpZ2h0Q29sb3JBdHRlbnVhdGlvbj86IG51bWJlcjtcclxuICAgIF9JbmRpcmVjdExpZ2h0SW50ZW5zaXR5PzogbnVtYmVyO1xyXG4gICAgX1JpbUxpZ2h0aW5nTWl4PzogbnVtYmVyO1xyXG4gICAgX1JpbUZyZXNuZWxQb3dlcj86IG51bWJlcjtcclxuICAgIF9SaW1MaWZ0PzogbnVtYmVyO1xyXG4gICAgX091dGxpbmVXaWR0aD86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U/OiBudW1iZXI7XHJcbiAgICBfT3V0bGluZUxpZ2h0aW5nTWl4PzogbnVtYmVyO1xyXG4gICAgX1V2QW5pbVNjcm9sbFg/OiBudW1iZXI7XHJcbiAgICBfVXZBbmltU2Nyb2xsWT86IG51bWJlcjtcclxuICAgIF9VdkFuaW1Sb3RhdGlvbj86IG51bWJlcjtcclxuICAgIF9EZWJ1Z01vZGU/OiBudW1iZXI7XHJcbiAgICBfQmxlbmRNb2RlPzogbnVtYmVyO1xyXG4gICAgX091dGxpbmVXaWR0aE1vZGU/OiBudW1iZXI7XHJcbiAgICBfT3V0bGluZUNvbG9yTW9kZT86IG51bWJlcjtcclxuICAgIF9DdWxsTW9kZT86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lQ3VsbE1vZGU/OiBudW1iZXI7XHJcbiAgICBfU3JjQmxlbmQ/OiBudW1iZXI7XHJcbiAgICBfRHN0QmxlbmQ/OiBudW1iZXI7XHJcbiAgICBfWldyaXRlPzogbnVtYmVyO1xyXG4gICAgW3Byb3A6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHkgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTU1hdGVyaWFsUHJvcGVydHlWZWN0b3JQcm9wZXJ0aWVzIHtcclxuICAgIF9Db2xvcj86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1NoYWRlQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9NYWluVGV4PzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfU2hhZGVUZXh0dXJlPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfQnVtcE1hcD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1JlY2VpdmVTaGFkb3dUZXh0dXJlPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfU2hhZGluZ0dyYWRlVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1JpbUNvbG9yPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfUmltVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1NwaGVyZUFkZD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX0VtaXNzaW9uQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9FbWlzc2lvbk1hcD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX091dGxpbmVXaWR0aFRleHR1cmU/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9PdXRsaW5lQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9VdkFuaW1NYXNrVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgW3Byb3A6IHN0cmluZ106IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5IHwgdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NYXRlcmlhbFByb3BlcnR5VGV4dHVyZVByb3BlcnRpZXMge1xyXG4gICAgX01haW5UZXg/OiBudW1iZXI7XHJcbiAgICBfU2hhZGVUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX0J1bXBNYXA/OiBudW1iZXI7XHJcbiAgICBfUmVjZWl2ZVNoYWRvd1RleHR1cmU/OiBudW1iZXI7XHJcbiAgICBfU2hhZGluZ0dyYWRlVGV4dHVyZT86IG51bWJlcjtcclxuICAgIF9SaW1UZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX1NwaGVyZUFkZD86IG51bWJlcjtcclxuICAgIF9FbWlzc2lvbk1hcD86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lV2lkdGhUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX1V2QW5pbU1hc2tUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgW3Byb3A6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eUtleXdvcmRNYXAge1xyXG4gICAgX05PUk1BTE1BUD86IGJvb2xlYW47XHJcbiAgICBfQUxQSEFURVNUX09OPzogYm9vbGVhbjtcclxuICAgIF9BTFBIQUJMRU5EX09OPzogYm9vbGVhbjtcclxuICAgIF9BTFBIQVBSRU1VTFRJUExZX09OPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVRhZ01hcCB7XHJcbiAgICBSZW5kZXJUeXBlPzogJ09wYXF1ZScgfCAnVHJhbnNwYXJlbnRDdXRvdXQnIHwgJ1RyYW5zcGFyZW50JztcclxufVxyXG5cclxuLyoqXHJcbiAqIGV4dGVuc2lvbnMuVlJNLm1hdGVyaWFsUHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eSB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBzaGFkZXI6IElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyO1xyXG4gICAgcmVuZGVyUXVldWU6IG51bWJlcjtcclxuICAgIGZsb2F0UHJvcGVydGllczogSVZSTU1hdGVyaWFsUHJvcGVydHlGbG9hdFByb3BlcnRpZXM7XHJcbiAgICB2ZWN0b3JQcm9wZXJ0aWVzOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVZlY3RvclByb3BlcnRpZXM7XHJcbiAgICB0ZXh0dXJlUHJvcGVydGllczogSVZSTU1hdGVyaWFsUHJvcGVydHlUZXh0dXJlUHJvcGVydGllcztcclxuICAgIGtleXdvcmRNYXA6IElWUk1NYXRlcmlhbFByb3BlcnR5S2V5d29yZE1hcDtcclxuICAgIHRhZ01hcDogSVZSTU1hdGVyaWFsUHJvcGVydHlUYWdNYXA7XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoJztcclxuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHR5cGUgeyBNb3JwaFRhcmdldCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9Nb3JwaC9tb3JwaFRhcmdldCc7XHJcbmltcG9ydCB0eXBlIHsgU2NlbmUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvc2NlbmUnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgU3ByaW5nQm9uZUNvbnRyb2xsZXIgfSBmcm9tICcuL3NlY29uZGFyeS1hbmltYXRpb24vc3ByaW5nLWJvbmUtY29udHJvbGxlcic7XHJcbmltcG9ydCB7IEh1bWFub2lkQm9uZSB9IGZyb20gJy4vaHVtYW5vaWQtYm9uZSc7XHJcbmltcG9ydCB0eXBlIHsgSVZSTSB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlciB9IGZyb20gJy4vbWF0ZXJpYWwtdmFsdWUtYmluZGluZy1tZXJnZXInO1xyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuaW1wb3J0IHR5cGUgeyBOb2RlLCBUYXJnZXRDYW1lcmEgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUnO1xyXG5cclxuaW50ZXJmYWNlIElzQmluYXJ5TWFwIHtcclxuICAgIFttb3JwaE5hbWU6IHN0cmluZ106IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBNb3JwaFRhcmdldFNldHRpbmcge1xyXG4gICAgdGFyZ2V0OiBNb3JwaFRhcmdldDtcclxuICAgIHdlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTW9ycGhUYXJnZXRNYXAge1xyXG4gICAgW21vcnBoTmFtZTogc3RyaW5nXTogTW9ycGhUYXJnZXRTZXR0aW5nW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcCB7XHJcbiAgICBbbW9ycGhOYW1lOiBzdHJpbmddOiBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFRyYW5zZm9ybU5vZGVNYXAge1xyXG4gICAgW2h1bWFuQm9uZU5hbWU6IHN0cmluZ106IFRyYW5zZm9ybU5vZGU7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUcmFuc2Zvcm1Ob2RlQ2FjaGUge1xyXG4gICAgW25vZGVJbmRleDogbnVtYmVyXTogVHJhbnNmb3JtTm9kZTtcclxufVxyXG5cclxuaW50ZXJmYWNlIE1lc2hDYWNoZSB7XHJcbiAgICBbbWVzaEluZGV4OiBudW1iZXJdOiBNZXNoW107XHJcbn1cclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG5leHBvcnQgY2xhc3MgbW9ycGhpbmdUYXJnZXRQcm9wZXJ0eSB7XHJcbiAgICBwcml2YXRlIF92YWx1ZTogbnVtYmVyO1xyXG4gICAgZ2V0IHZhbHVlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB2YWx1ZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2YWx1ZSkpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlci5tb3JwaGluZyh0aGlzLmxhYmVsLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIHByaXZhdGUgbWFuYWdlcjogVlJNTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuaW50ZXJmYWNlIE1vcnBoVGFyZ2V0UHJvcGVydHlNYXAge1xyXG4gICAgW21vcnBoTmFtZTogc3RyaW5nXTogbW9ycGhpbmdUYXJnZXRQcm9wZXJ0eTtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zZm9ybU5vZGVUcmVlTm9kZSB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGFyZW50OiBudW1iZXI7XHJcbiAgICBjaGlsZHJlbj86IFRyYW5zZm9ybU5vZGVUcmVlTm9kZVtdO1xyXG59XHJcblxyXG4vKipcclxuICogVW5pdHkgSHVtYW5vaWQgQm9uZSDlkI1cclxuICovXHJcbmV4cG9ydCB0eXBlIEh1bWFuQm9uZU5hbWUgPVxyXG4gICAgfCAnaGlwcydcclxuICAgIHwgJ2xlZnRVcHBlckxlZydcclxuICAgIHwgJ3JpZ2h0VXBwZXJMZWcnXHJcbiAgICB8ICdsZWZ0TG93ZXJMZWcnXHJcbiAgICB8ICdyaWdodExvd2VyTGVnJ1xyXG4gICAgfCAnbGVmdEZvb3QnXHJcbiAgICB8ICdyaWdodEZvb3QnXHJcbiAgICB8ICdzcGluZSdcclxuICAgIHwgJ2NoZXN0J1xyXG4gICAgfCAnbmVjaydcclxuICAgIHwgJ2hlYWQnXHJcbiAgICB8ICdsZWZ0U2hvdWxkZXInXHJcbiAgICB8ICdyaWdodFNob3VsZGVyJ1xyXG4gICAgfCAnbGVmdFVwcGVyQXJtJ1xyXG4gICAgfCAncmlnaHRVcHBlckFybSdcclxuICAgIHwgJ2xlZnRMb3dlckFybSdcclxuICAgIHwgJ3JpZ2h0TG93ZXJBcm0nXHJcbiAgICB8ICdsZWZ0SGFuZCdcclxuICAgIHwgJ3JpZ2h0SGFuZCdcclxuICAgIHwgJ2xlZnRUb2VzJ1xyXG4gICAgfCAncmlnaHRUb2VzJ1xyXG4gICAgfCAnbGVmdEV5ZSdcclxuICAgIHwgJ3JpZ2h0RXllJ1xyXG4gICAgfCAnamF3J1xyXG4gICAgfCAnbGVmdFRodW1iUHJveGltYWwnXHJcbiAgICB8ICdsZWZ0VGh1bWJJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdsZWZ0VGh1bWJEaXN0YWwnXHJcbiAgICB8ICdsZWZ0SW5kZXhQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRJbmRleEludGVybWVkaWF0ZSdcclxuICAgIHwgJ2xlZnRJbmRleERpc3RhbCdcclxuICAgIHwgJ2xlZnRNaWRkbGVQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRNaWRkbGVJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdsZWZ0TWlkZGxlRGlzdGFsJ1xyXG4gICAgfCAnbGVmdFJpbmdQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRSaW5nSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAnbGVmdFJpbmdEaXN0YWwnXHJcbiAgICB8ICdsZWZ0TGl0dGxlUHJveGltYWwnXHJcbiAgICB8ICdsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAnbGVmdExpdHRsZURpc3RhbCdcclxuICAgIHwgJ3JpZ2h0VGh1bWJQcm94aW1hbCdcclxuICAgIHwgJ3JpZ2h0VGh1bWJJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdyaWdodFRodW1iRGlzdGFsJ1xyXG4gICAgfCAncmlnaHRJbmRleFByb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRJbmRleEludGVybWVkaWF0ZSdcclxuICAgIHwgJ3JpZ2h0SW5kZXhEaXN0YWwnXHJcbiAgICB8ICdyaWdodE1pZGRsZVByb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRNaWRkbGVJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdyaWdodE1pZGRsZURpc3RhbCdcclxuICAgIHwgJ3JpZ2h0UmluZ1Byb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRSaW5nSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAncmlnaHRSaW5nRGlzdGFsJ1xyXG4gICAgfCAncmlnaHRMaXR0bGVQcm94aW1hbCdcclxuICAgIHwgJ3JpZ2h0TGl0dGxlSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAncmlnaHRMaXR0bGVEaXN0YWwnXHJcbiAgICB8ICd1cHBlckNoZXN0J1xyXG4gICAgfCBzdHJpbmc7XHJcblxyXG4vKipcclxuICogVlJNIOOCreODo+ODqeOCr+OCv+ODvOOCkuWLleS9nOOBleOBm+OCi+OBn+OCgeOBruODnuODjeODvOOCuOODo1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZSTU1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBpc0JpbmFyeU1vcnBoTWFwOiBJc0JpbmFyeU1hcCA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtb3JwaFRhcmdldE1hcDogTW9ycGhUYXJnZXRNYXAgPSB7fTtcclxuICAgIHByaXZhdGUgbWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXJNYXA6IE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwID0ge307XHJcbiAgICBwcml2YXRlIHByZXNldE1vcnBoVGFyZ2V0TWFwOiBNb3JwaFRhcmdldE1hcCA9IHt9O1xyXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Ob2RlTWFwOiBUcmFuc2Zvcm1Ob2RlTWFwID0ge307XHJcbiAgICBwcml2YXRlIHRyYW5zZm9ybU5vZGVDYWNoZTogVHJhbnNmb3JtTm9kZUNhY2hlID0ge307XHJcbiAgICBwcml2YXRlIG1lc2hDYWNoZTogTWVzaENhY2hlID0ge307XHJcbiAgICBwcml2YXRlIF9odW1hbm9pZEJvbmU6IEh1bWFub2lkQm9uZTtcclxuICAgIHByaXZhdGUgX3Jvb3RNZXNoOiBNZXNoO1xyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICBwdWJsaWMgc3RhdGljIFJPT1RfTUVTSF9QUkVGSVggPSAndnJtX3Jvb3RfJztcclxuICAgIHByaXZhdGUgX3Jvb3RTa2VsZXRvbjogTm9kZTtcclxuICAgIHByaXZhdGUgX2NhbWVyYXM6IFRhcmdldENhbWVyYVtdID0gW107XHJcbiAgICBnZXQgY2FtZXJhcygpOiBUYXJnZXRDYW1lcmFbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZENhbWVyYShjYW1lcmE6IFRhcmdldENhbWVyYSkge1xyXG4gICAgICAgIHRoaXMuX2NhbWVyYXMucHVzaChjYW1lcmEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldENhbWVyYXMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FtZXJhcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2Vjb25kYXJ5IEFuaW1hdGlvbiDjgajjgZfjgablrprnvqnjgZXjgozjgabjgYTjgosgVlJNIFNwcmluZyBCb25lIOOBruOCs+ODs+ODiOODreODvOODqVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3ByaW5nQm9uZUNvbnRyb2xsZXI6IFNwcmluZ0JvbmVDb250cm9sbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBleHQgZ2xURi5leHRlbnNpb25zLlZSTSDjga7kuK3ouqsganNvblxyXG4gICAgICogQHBhcmFtIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0gbWVzaGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga7jg6Hjg4Pjgrfjg6XjgYzjgZPjga4gVlJNIOOBq+ipsuW9k+OBmeOCi1xyXG4gICAgICogQHBhcmFtIHRyYW5zZm9ybU5vZGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga4gVHJhbnNmb3JtTm9kZSDjgYzjgZPjga4gVlJNIOOBq+ipsuW9k+OBmeOCi1xyXG4gICAgICogQHBhcmFtIG1hdGVyaWFsc05vZGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga4gTWF0ZXJpYWwg44GM44GT44GuIFZSTSDjgavoqbLlvZPjgZnjgotcclxuICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAqIEBwYXJhbSB1cmkgVVJJIHRoaXMgbWFuYWdlciBiZWxvbmdzIHRvXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZXh0OiBJVlJNLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBzY2VuZTogU2NlbmUsXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBtZXNoZXNGcm9tOiBudW1iZXIsXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB0cmFuc2Zvcm1Ob2Rlc0Zyb206IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG1hdGVyaWFsc05vZGVzRnJvbTogbnVtYmVyLFxyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSB1cmk6IHN0cmluZ1xyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5tZXNoQ2FjaGUgPSB0aGlzLmNvbnN0cnVjdE1lc2hDYWNoZSgpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtTm9kZUNhY2hlID0gdGhpcy5jb25zdHJ1Y3RUcmFuc2Zvcm1Ob2RlQ2FjaGUoKTtcclxuICAgICAgICB0aGlzLnNwcmluZ0JvbmVDb250cm9sbGVyID0gbmV3IFNwcmluZ0JvbmVDb250cm9sbGVyKHRoaXMuZXh0LnNlY29uZGFyeUFuaW1hdGlvbiwgdGhpcy5maW5kVHJhbnNmb3JtTm9kZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZXh0LmJsZW5kU2hhcGVNYXN0ZXIgJiYgdGhpcy5leHQuYmxlbmRTaGFwZU1hc3Rlci5ibGVuZFNoYXBlR3JvdXBzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0SXNCaW5hcnlNYXAoKTtcclxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RNb3JwaFRhcmdldE1hcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29uc3RydWN0VHJhbnNmb3JtTm9kZU1hcCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9odW1hbm9pZEJvbmUgPSBuZXcgSHVtYW5vaWRCb25lKHRoaXMudHJhbnNmb3JtTm9kZU1hcCk7XHJcblxyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIHRoaXMucmVtb3ZlRHVwbGljYXRlU2tlbGV0b25zKCk7XHJcbiAgICAgICAgdGhpcy5fcm9vdFNrZWxldG9uID0gdGhpcy5nZXRSb290U2tlbGV0b25Ob2RlKCk7XHJcblxyXG4gICAgICAgIC8vIFJlbmFtZSBfX3Jvb3RfXyBub2RlXHJcbiAgICAgICAgdGhpcy5yb290TWVzaC5uYW1lID0gVlJNTWFuYWdlci5ST09UX01FU0hfUFJFRklYICsgdGhpcy5zY2VuZS5nZXROb2RlcygpLmZpbHRlcigoZSkgPT4gZS5uYW1lLmluY2x1ZGVzKFZSTU1hbmFnZXIuUk9PVF9NRVNIX1BSRUZJWCkpLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGR1cGxpY2F0ZSBza2VsZXRvbnMgd2hlbiBpbXBvcnRpbmcgVlJNLlxyXG4gICAgICogT25seSB0ZXN0ZWQgb24gVlJvaWRTdHVkaW8gb3V0cHV0IGZpbGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZW1vdmVEdXBsaWNhdGVTa2VsZXRvbnMoKSB7XHJcbiAgICAgICAgbGV0IHNrZWxldG9uID0gbnVsbDtcclxuICAgICAgICBmb3IgKGNvbnN0IG5vZGVJbmRleCBvZiBPYmplY3Qua2V5cyh0aGlzLm1lc2hDYWNoZSkubWFwKE51bWJlcikpIHtcclxuICAgICAgICAgICAgY29uc3QgbWVzaGVzID0gdGhpcy5tZXNoQ2FjaGVbbm9kZUluZGV4XTtcclxuICAgICAgICAgICAgaWYgKG1lc2hlcy5sZW5ndGggJiYgbWVzaGVzWzBdLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tlbGV0b24gPSBtZXNoZXNbMF0uc2tlbGV0b247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Jvb3RNZXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RCb25lID0gc2tlbGV0b24uYm9uZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzdWFsbHkgaXQgaXMgY2FsbGVkIFwiUm9vdFwiLCBidXQgdGhlcmUgYXJlIGV4Y2VwdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RCb25lLm5hbWUgIT09ICdSb290JykgY29uc29sZS53YXJuKCdUaGUgZmlyc3QgYm9uZSBoYXMgYSBkaWZmZXJlbnQgbmFtZSB0aGFuIFwiUm9vdFwiJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZWFrIHNhbml0eSBjaGVja1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChza2VsZXRvbi5ib25lcy5sZW5ndGggIT0gbWVzaGVzWzBdLnNrZWxldG9uLmJvbmVzLmxlbmd0aCkgY29uc29sZS53YXJuKCdTa2VsZXRvbnMgaGF2ZSBkaWZmZXJlbnQgbnVtYmVycyBvZiBib25lcyEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaGVzWzBdLnNrZWxldG9uLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1lc2ggb2YgbWVzaGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc2guc2tlbGV0b24gPSBza2VsZXRvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAvKipcclxuICAgICAqIEZpbmQgdGhlIHJvb3Qgbm9kZSBvZiBza2VsZXRvbi5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0Um9vdFNrZWxldG9uTm9kZSgpOiBOb2RlIHtcclxuICAgICAgICBjb25zdCByb290TWVzaENoaWxkcmVuID0gdGhpcy5fcm9vdE1lc2guZ2V0Q2hpbGRyZW4oKG5vZGU6IE5vZGUpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUubmFtZSA9PT0gJ1Jvb3QnIHx8IG5vZGUubmFtZSA9PT0gJ0FybWF0dXJlJztcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocm9vdE1lc2hDaGlsZHJlbi5sZW5ndGggPiAwKSByZXR1cm4gcm9vdE1lc2hDaGlsZHJlblswXTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgaW4gc2NlbmUgZGlyZWN0bHlcclxuICAgICAgICAgICAgY29uc3Qgcm9vdE1lc2hDaGlsZCA9IHRoaXMuc2NlbmUuZ2V0Tm9kZUJ5TmFtZSgnUm9vdCcpID8gdGhpcy5zY2VuZS5nZXROb2RlQnlOYW1lKCdSb290JykgOiB0aGlzLnNjZW5lLmdldE5vZGVCeU5hbWUoJ0FybWF0dXJlJyk7XHJcbiAgICAgICAgICAgIGlmIChyb290TWVzaENoaWxkICYmICFyb290TWVzaENoaWxkLnBhcmVudCkgcmV0dXJuIHJvb3RNZXNoQ2hpbGQ7XHJcbiAgICAgICAgICAgIGVsc2UgdGhyb3cgRXJyb3IoJ0Nhbm5vdCBmaW5kIHJvb3Qgc2tlbGV0b24gbm9kZSEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWNvbmRhcnkgQW5pbWF0aW9uIOOCkuabtOaWsOOBmeOCi1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZWx0YVRpbWUg5YmN44OV44Os44O844Og44GL44KJ44Gu57WM6YGO56eS5pWwKHNlYylcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc3ByaW5nQm9uZUNvbnRyb2xsZXIudXBkYXRlKGRlbHRhVGltZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnoLTmo4Tlh6bnkIZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zcHJpbmdCb25lQ29udHJvbGxlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5faHVtYW5vaWRCb25lLmRpc3Bvc2UoKTtcclxuXHJcbiAgICAgICAgKHRoaXMubW9ycGhUYXJnZXRNYXAgYXMgYW55KSA9IG51bGw7XHJcbiAgICAgICAgKHRoaXMubWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXJNYXAgYXMgYW55KSA9IG51bGw7XHJcbiAgICAgICAgKHRoaXMucHJlc2V0TW9ycGhUYXJnZXRNYXAgYXMgYW55KSA9IG51bGw7XHJcbiAgICAgICAgKHRoaXMudHJhbnNmb3JtTm9kZU1hcCBhcyBhbnkpID0gbnVsbDtcclxuICAgICAgICAodGhpcy50cmFuc2Zvcm1Ob2RlQ2FjaGUgYXMgYW55KSA9IG51bGw7XHJcbiAgICAgICAgKHRoaXMubWVzaENhY2hlIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLl9yb290TWVzaCBhcyBhbnkpID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODouODvOODleOCo+ODs+OCsOOCkuihjOOBhlxyXG4gICAgICogQHBhcmFtIGxhYmVsIOODouODvOODleWQjVxyXG4gICAgICogQHBhcmFtIHZhbHVlIOWApCgw44CcMSlcclxuICAgICAqL1xyXG4gICAgcHVibGljIG1vcnBoaW5nKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB2ID0gdGhpcy5jYWxjTW9ycGhWYWx1ZShsYWJlbCwgdmFsdWUpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vcnBoVGFyZ2V0TWFwW2xhYmVsXSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vcnBoVGFyZ2V0TWFwW2xhYmVsXS5mb3JFYWNoKChzZXR0aW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nLnRhcmdldC5pbmZsdWVuY2UgPSB2ICogKHNldHRpbmcud2VpZ2h0IC8gMTAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwW2xhYmVsXSkge1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwW2xhYmVsXS5tb3JwaGluZyh2KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg5fjg6rjgrvjg4Pjg4jjg6Ljg7zjg5Xjga7jg6Ljg7zjg5XjgqPjg7PjgrDjgpLooYzjgYZcclxuICAgICAqIEBwYXJhbSBsYWJlbCDjg6Ljg7zjg5XlkI1cclxuICAgICAqIEBwYXJhbSB2YWx1ZSDlgKQoMOOAnDEpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtb3JwaGluZ1ByZXNldChsYWJlbDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZXNldE1vcnBoVGFyZ2V0TWFwW2xhYmVsXSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHYgPSB0aGlzLmNhbGNNb3JwaFZhbHVlKGxhYmVsLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5wcmVzZXRNb3JwaFRhcmdldE1hcFtsYWJlbF0uZm9yRWFjaCgoc2V0dGluZykgPT4ge1xyXG4gICAgICAgICAgICBzZXR0aW5nLnRhcmdldC5pbmZsdWVuY2UgPSB2ICogKHNldHRpbmcud2VpZ2h0IC8gMTAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODouODvOODleOCo+ODs+OCsOeUqOOBruWApOOCkuioiOeul+OBmeOCi1xyXG4gICAgICogQHBhcmFtIGxhYmVsIOODouODvOODleWQjVxyXG4gICAgICogQHBhcmFtIHZhbHVlIOWApFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGNNb3JwaFZhbHVlKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IHYgPSBNYXRoLm1heCgwLjAsIE1hdGgubWluKDEuMCwgdmFsdWUpKTtcclxuICAgICAgICBpZiAodGhpcy5pc0JpbmFyeU1vcnBoTWFwW2xhYmVsXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdiA+IDAuNSA/IDEuMCA6IDAuMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBsaXN0IG1vcnBoaW5nIG5hbWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE1vcnBoaW5nTGlzdCgpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubW9ycGhUYXJnZXRNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiA5Lq656ew5pmC44Gu44Kr44Oh44Op5L2N572u44KS57W25a++5bqn5qiZ44Go44GX44Gm5Y+W5b6X44GZ44KLXHJcbiAgICAgKlxyXG4gICAgICogZmlyc3RQZXJzb25Cb25lIOOBjOacquioreWumuOBruWgtOWQiOOBryBudWxsIOOCkui/lOOBmVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIOS4gOS6uuensOaZguOBruOCq+ODoeODqeOBruePvuWcqOOBq+OBiuOBkeOCi+e1tuWvvuW6p+aomVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Rmlyc3RQZXJzb25DYW1lcmFQb3NpdGlvbigpOiBOdWxsYWJsZTxWZWN0b3IzPiB7XHJcbiAgICAgICAgY29uc3QgZmlyc3RQZXJzb25Cb25lID0gdGhpcy5nZXRGaXJzdFBlcnNvbkJvbmUoKTtcclxuICAgICAgICBpZiAoIWZpcnN0UGVyc29uQm9uZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJhc2VQb3MgPSBmaXJzdFBlcnNvbkJvbmUuZ2V0QWJzb2x1dGVQb3NpdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldFBvcyA9IHRoaXMuZXh0LmZpcnN0UGVyc29uLmZpcnN0UGVyc29uQm9uZU9mZnNldDtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoYmFzZVBvcy54ICsgb2Zmc2V0UG9zLngsIGJhc2VQb3MueSArIG9mZnNldFBvcy55LCBiYXNlUG9zLnogKyBvZmZzZXRQb3Mueik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkuIDkurrnp7DmmYLjgavpoK3jgajjgb/jgarjgZkgVHJhbnNmb3JtTm9kZSDjgpLlj5blvpfjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZpcnN0UGVyc29uQm9uZSgpOiBOdWxsYWJsZTxUcmFuc2Zvcm1Ob2RlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZFRyYW5zZm9ybU5vZGUodGhpcy5leHQuZmlyc3RQZXJzb24uZmlyc3RQZXJzb25Cb25lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODnOODvOODs+WQjeOBi+OCieOBneOBruODnOODvOODs+OBq+ipsuW9k+OBmeOCiyBUcmFuc2Zvcm1Ob2RlIOOCkuWPluW+l+OBmeOCi1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIEh1bWFuQm9uZU5hbWVcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBodW1hbm9pZEJvbmUgZ2V0dGVyIGluc3RlYWQuIFRoaXMgbWV0aG9kIHdpbGwgZGVsZXRlIGF0IHYyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Qm9uZShuYW1lOiBIdW1hbkJvbmVOYW1lKTogTnVsbGFibGU8VHJhbnNmb3JtTm9kZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybU5vZGVNYXBbbmFtZV0gfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBIdW1hbm9pZEJvbmUgTWV0aG9kc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGh1bWFub2lkQm9uZSgpOiBIdW1hbm9pZEJvbmUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9odW1hbm9pZEJvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWUk0gUm9vdCBtZXNoXHJcbiAgICAgKlxyXG4gICAgICogVXNlZnVsIGZvciBNb2RlbCBUcmFuc2Zvcm1hdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJvb3RNZXNoKCk6IE1lc2gge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yb290TWVzaDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG5vZGUg55Wq5Y+344GL44KJ6Kmy5b2T44GZ44KLIFRyYW5zZm9ybU5vZGUg44KS5o6i44GZXHJcbiAgICAgKiDmlbDjgYzlpJrjgY/jgarjgovjga7jgafjgq3jg6Pjg4Pjgrfjg6Xjgavlj4LnhafjgpLmjIHjgaTmp4vpgKDjgavjgZnjgotcclxuICAgICAqIGdsdGYg44GuIG5vZGUg55Wq5Y+344GvIGBtZXRhZGF0YS5nbHRmLnBvaW50ZXJzYCDjgavoqJjpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAqIEBwYXJhbSBub2RlSW5kZXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpbmRUcmFuc2Zvcm1Ob2RlKG5vZGVJbmRleDogbnVtYmVyKTogTnVsbGFibGU8VHJhbnNmb3JtTm9kZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybU5vZGVDYWNoZVtub2RlSW5kZXhdIHx8IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtZXNoIOeVquWPt+OBi+OCieODoeODg+OCt+ODpeOCkuaOouOBmVxyXG4gICAgICogZ2x0ZiDjga4gbWVzaCDnlarlj7fjga8gYG1ldGFkYXRhLmdsdGYucG9pbnRlcnNgIOOBq+iomOmMsuOBleOCjOOBpuOBhOOCi1xyXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGZpbmRNZXNoZXMgaW5zdGVhZC4gVGhpcyBtZXRob2QgaGFzIGJyb2tlbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpbmRNZXNoKG1lc2hJbmRleDogbnVtYmVyKTogTnVsbGFibGU8TWVzaD4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tZXNoQ2FjaGVbbWVzaEluZGV4XSAmJiB0aGlzLm1lc2hDYWNoZVttZXNoSW5kZXhdWzBdKSB8fCBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbWVzaCDnlarlj7fjgYvjgonjg6Hjg4Pjgrfjg6XjgpLmjqLjgZlcclxuICAgICAqIGdsdGYg44GuIG1lc2gg55Wq5Y+344GvIGBtZXRhZGF0YS5nbHRmLnBvaW50ZXJzYCDjgavoqJjpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpbmRNZXNoZXMobWVzaEluZGV4OiBudW1iZXIpOiBOdWxsYWJsZTxNZXNoW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXNoQ2FjaGVbbWVzaEluZGV4XSB8fCBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LqL5YmN44GrIE1vcnBoVGFyZ2V0IOOBqCBpc0JpbmFyeSDjgpLntJDku5jjgZHjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RJc0JpbmFyeU1hcCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmV4dC5ibGVuZFNoYXBlTWFzdGVyLmJsZW5kU2hhcGVHcm91cHMuZm9yRWFjaCgoZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzQmluYXJ5TW9ycGhNYXBbZy5uYW1lXSA9IGcuaXNCaW5hcnk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkuovliY3jgasgTW9ycGhUYXJnZXQg44GoIEJsZW5kU2hhcGUg44KS57SQ5LuY44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0TW9ycGhUYXJnZXRNYXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5leHQuYmxlbmRTaGFwZU1hc3Rlci5ibGVuZFNoYXBlR3JvdXBzLmZvckVhY2goKGcpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFnLmJpbmRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZy5iaW5kcy5mb3JFYWNoKChiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoZXMgPSB0aGlzLmZpbmRNZXNoZXMoYi5tZXNoKTtcclxuICAgICAgICAgICAgICAgIGlmICghbWVzaGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFVuZGVmaW5lZCBCbGVuZFNoYXBlQmluZCBNZXNoYCwgYik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbWVzaGVzLmZvckVhY2goKG1lc2gpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3JwaFRhcmdldE1hbmFnZXIgPSBtZXNoLm1vcnBoVGFyZ2V0TWFuYWdlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vcnBoVGFyZ2V0TWFuYWdlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVW5kZWZpbmVkIG1vcnBoVGFyZ2V0TWFuYWdlcmAsIGIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG1vcnBoVGFyZ2V0TWFuYWdlci5nZXRUYXJnZXQoYi5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3JwaFRhcmdldE1hcFtnLm5hbWVdID0gdGhpcy5tb3JwaFRhcmdldE1hcFtnLm5hbWVdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9ycGhUYXJnZXRNYXBbZy5uYW1lXS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IGIud2VpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnLnByZXNldE5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVzZXRNb3JwaFRhcmdldE1hcFtnLnByZXNldE5hbWVdID0gdGhpcy5wcmVzZXRNb3JwaFRhcmdldE1hcFtnLnByZXNldE5hbWVdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXNldE1vcnBoVGFyZ2V0TWFwW2cucHJlc2V0TmFtZV0ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IGIud2VpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkuovliY3jgasgTWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXIg44Go44Oi44O844OV5ZCN44KS57SQ5LuY44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0TWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXJNYXAoKSB7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxzID0gdGhpcy5zY2VuZS5tYXRlcmlhbHMuc2xpY2UodGhpcy5tYXRlcmlhbHNOb2Rlc0Zyb20pO1xyXG4gICAgICAgIHRoaXMuZXh0LmJsZW5kU2hhcGVNYXN0ZXIuYmxlbmRTaGFwZUdyb3Vwcy5mb3JFYWNoKChnKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZy5tYXRlcmlhbFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXJNYXBbZy5uYW1lXSA9IG5ldyBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlcihtYXRlcmlhbHMsIGcubWF0ZXJpYWxWYWx1ZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LqL5YmN44GrIFRyYW5zZm9ybU5vZGUg44GoIGJvbmUg5ZCN44KS57SQ44Gl44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0VHJhbnNmb3JtTm9kZU1hcCgpIHtcclxuICAgICAgICB0aGlzLmV4dC5odW1hbm9pZC5odW1hbkJvbmVzLmZvckVhY2goKGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmluZFRyYW5zZm9ybU5vZGUoYi5ub2RlKTtcclxuICAgICAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1Ob2RlTWFwW2IuYm9uZV0gPSBub2RlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbm9kZSDnlarlj7fjgaggVHJhbnNmb3JtTm9kZSDjgpLntJDjgaXjgZHjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RUcmFuc2Zvcm1Ob2RlQ2FjaGUoKSB7XHJcbiAgICAgICAgY29uc3QgY2FjaGU6IFRyYW5zZm9ybU5vZGVDYWNoZSA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gdGhpcy50cmFuc2Zvcm1Ob2Rlc0Zyb207IGluZGV4IDwgdGhpcy5zY2VuZS50cmFuc2Zvcm1Ob2Rlcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuc2NlbmUudHJhbnNmb3JtTm9kZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAvLyDjg53jgqTjg7Pjgr/jgYznmbvpjLLjgZXjgozjgabjgYTjgarjgYTjgoLjga7jga/nnIHnlaVcclxuICAgICAgICAgICAgaWYgKCFub2RlIHx8ICFub2RlLm1ldGFkYXRhIHx8ICFub2RlLm1ldGFkYXRhLmdsdGYgfHwgIW5vZGUubWV0YWRhdGEuZ2x0Zi5wb2ludGVycyB8fCBub2RlLm1ldGFkYXRhLmdsdGYucG9pbnRlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBvaW50ZXIgb2Ygbm9kZS5tZXRhZGF0YS5nbHRmLnBvaW50ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRlci5zdGFydHNXaXRoKCcvbm9kZXMvJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlSW5kZXggPSBwYXJzZUludCgocG9pbnRlciBhcyBzdHJpbmcpLnN1YnN0cig3KSwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW25vZGVJbmRleF0gPSBub2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYWNoZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG1lc2gg55Wq5Y+344GoIE1lc2gg44KS57SQ44Gl44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0TWVzaENhY2hlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhY2hlOiBNZXNoQ2FjaGUgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMubWVzaGVzRnJvbTsgaW5kZXggPCB0aGlzLnNjZW5lLm1lc2hlcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuc2NlbmUubWVzaGVzW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKG1lc2guaWQgPT09ICdfX3Jvb3RfXycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jvb3RNZXNoID0gbWVzaCBhcyBNZXNoO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g44Od44Kk44Oz44K/44GM55m76Yyy44GV44KM44Gm44GE44Gq44GE44KC44Gu44Gv55yB55WlXHJcbiAgICAgICAgICAgIGlmICghbWVzaCB8fCAhbWVzaC5tZXRhZGF0YSB8fCAhbWVzaC5tZXRhZGF0YS5nbHRmIHx8ICFtZXNoLm1ldGFkYXRhLmdsdGYucG9pbnRlcnMgfHwgbWVzaC5tZXRhZGF0YS5nbHRmLnBvaW50ZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChjb25zdCBwb2ludGVyIG9mIG1lc2gubWV0YWRhdGEuZ2x0Zi5wb2ludGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSAocG9pbnRlciBhcyBzdHJpbmcpLm1hdGNoKC9eXFwvbWVzaGVzXFwvKFxcZCspLiskLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlSW5kZXggPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW25vZGVJbmRleF0gPSBjYWNoZVtub2RlSW5kZXhdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW25vZGVJbmRleF0ucHVzaChtZXNoIGFzIE1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYWNoZTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IE1hdGVyaWFsIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbCc7XHJcbmltcG9ydCB0eXBlIHsgQmFzZVRleHR1cmUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1RleHR1cmVzL2Jhc2VUZXh0dXJlJztcclxuaW1wb3J0IHR5cGUgeyBUZXh0dXJlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9UZXh0dXJlcy90ZXh0dXJlJztcclxuaW1wb3J0IHsgQ29sb3IzIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5pbXBvcnQgdHlwZSB7IE1lc2ggfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL21lc2gnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBHTFRGTG9hZGVyLCBJTWF0ZXJpYWwgfSBmcm9tICdAYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAnO1xyXG5pbXBvcnQgeyBNVG9vbk1hdGVyaWFsIH0gZnJvbSAnYmFieWxvbi1tdG9vbi1tYXRlcmlhbCc7XHJcbmltcG9ydCB0eXBlIHsgSVZSTU1hdGVyaWFsUHJvcGVydHksIElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5IH0gZnJvbSAnLi92cm0taW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyIH0gZnJvbSAnLi92cm0taW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2VuZ2luZSc7XHJcblxyXG4vKipcclxuICogVlJNIOOBp+aMh+WumuOBleOCjOOCiyBNYXRlcmlhbCDjgpLnlJ/miJDjgZnjgotcclxuICogW1ZSTSDjgYzmj5DkvpvjgZnjgovjgrfjgqfjg7zjg4BdKGh0dHBzOi8vdnJtLmRldi9lbi91bml2cm0vc2hhZGVycy9pbmRleC5odG1sKSDjgpLnibnlrprjgZfoqq3jgb/ovrzjgoBcclxuICogLSBVbmxpdFRleHR1cmU6IOS4jemAj+aYjiwgVlJNIOODleOCoeOCpOODq+WBtOOBpyBbS0hSX21hdGVyaWFsc191bmxpdF0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfdW5saXQpIOOBjOWumue+qeOBleOCjOOBpuOBhOOCi+OBn+OCgeOAgeS9leOCguOBl+OBquOBhFxyXG4gKiAtIFVubGl0Q3V0b3V0OiDpgI/mmI7luqbjgYzplr7lgKTku6XkuIvjga7pg6jliIbjgpLpgI/mmI7jgajjgZnjgossIOWQjOS4ilxyXG4gKiAtIFVubGl0VHJhbnNwYXJlbnQ6IOOCouODq+ODleOCoeODluODrOODs+ODieOAglpXcml0ZeOBl+OBquOBhCwg5ZCM5LiKXHJcbiAqIC0gVW5saXRUcmFuc3BhcmVudFpXcml0ZTog44Ki44Or44OV44Kh44OW44Os44Oz44OJ44CCWldyaXRl44GZ44KLLCDlkIzkuIrjgavliqDjgYjjgIHjg5fjg63jg5Hjg4bjgqPjgacgWldyaXRlIOOCkuW8t+WItuOBl+OBpuOBhOOBvuOBmVxyXG4gKiAtIE1Ub29uOiBNVG9vbk1hdGVyaWFsIOOCkuW3ruOBl+abv+OBiOOBpuOBhOOBvuOBmeOAglxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZSTU1hdGVyaWFsR2VuZXJhdG9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQGluaGVyaXRkb2NcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgbG9hZGVyOiBHTFRGTG9hZGVyKSB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oe44OG44Oq44Ki44Or44KS55Sf5oiQ44GZ44KLIFByb21pc2Ug44KS6L+U44GZXHJcbiAgICAgKiBWUk0g5a++6LGh5aSW44Gu5aC05ZCI44GvIG51bGxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdlbmVyYXRlKGNvbnRleHQ6IHN0cmluZywgbWF0ZXJpYWw6IElNYXRlcmlhbCwgbWVzaDogTWVzaCwgYmFieWxvbkRyYXdNb2RlOiBudW1iZXIsIGFzc2lnbjogKGJhYnlsb25NYXRlcmlhbDogTWF0ZXJpYWwpID0+IHZvaWQpOiBOdWxsYWJsZTxQcm9taXNlPE1hdGVyaWFsPj4ge1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsUHJvcCA9IHRoaXMuZmluZE1hdGVyaWFsUHJvcGVydHlCeU5hbWUobWF0ZXJpYWwubmFtZSwgdGhpcy5nZXRNYXRlcmlhbFByb3BlcnRpZXMoKSk7XHJcbiAgICAgICAgaWYgKCFtYXRlcmlhbFByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc2guYWxwaGFJbmRleCA9IG1hdGVyaWFsUHJvcC5yZW5kZXJRdWV1ZTtcclxuICAgICAgICBjb25zdCBuZXdNYXRlcmlhbCA9IHRoaXMuY3JlYXRlTWF0ZXJpYWxCeVNoYWRlcihjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbkRyYXdNb2RlLCBtYXRlcmlhbFByb3ApO1xyXG4gICAgICAgIGlmICghbmV3TWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2lnbihuZXdNYXRlcmlhbCk7XHJcbiAgICAgICAgaWYgKG5ld01hdGVyaWFsIGluc3RhbmNlb2YgTVRvb25NYXRlcmlhbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkTVRvb25UZXh0dXJlc0FzeW5jKGNvbnRleHQsIG5ld01hdGVyaWFsLCBtYXRlcmlhbFByb3ApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ld01hdGVyaWFsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFZSTSDjgb7jgZ/jga8gVkNJIOOBi+OCieODnuODhuODquOCouODq+ODl+ODreODkeODhuOCo+OBrumFjeWIl+OCkuaOouOBmVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE1hdGVyaWFsUHJvcGVydGllcygpOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVtdIHtcclxuICAgICAgICBpZiAoIXRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVlJNICYmIHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9ucy5WUk0ubWF0ZXJpYWxQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVlJNLm1hdGVyaWFsUHJvcGVydGllcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9ucy5WQ0FTVF92Y2lfbWF0ZXJpYWxfdW5pdHkgJiYgdGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zLlZDQVNUX3ZjaV9tYXRlcmlhbF91bml0eS5tYXRlcmlhbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9ucy5WQ0FTVF92Y2lfbWF0ZXJpYWxfdW5pdHkubWF0ZXJpYWxzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg57jg4bjg6rjgqLjg6vlkI3jgYvjgokgTWF0ZXJpYWxQcm9wZXJ0eSDjgpLmjqLjgZlcclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbE5hbWUg44Oe44OG44Oq44Ki44Or5ZCNXHJcbiAgICAgKiBAcGFyYW0gZXh0ZW5zaW9uIOaLoeW8teODh+ODvOOCv1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZpbmRNYXRlcmlhbFByb3BlcnR5QnlOYW1lKG1hdGVyaWFsTmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBtYXRlcmlhbHM6IElWUk1NYXRlcmlhbFByb3BlcnR5W10pOiBOdWxsYWJsZTxJVlJNTWF0ZXJpYWxQcm9wZXJ0eT4ge1xyXG4gICAgICAgIGlmICghbWF0ZXJpYWxOYW1lIHx8ICFtYXRlcmlhbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1hdHMgPSBtYXRlcmlhbHMuZmlsdGVyKCh2KSA9PiB2Lm5hbWUgPT09IG1hdGVyaWFsTmFtZSk7XHJcbiAgICAgICAgaWYgKG1hdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWF0cy5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlci5sb2coYER1cGxpY2F0ZWQgdnJtIG1hdGVyaWFsIG5hbWUgZm91bmQ6ICR7bWF0ZXJpYWxOYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF0c1ttYXRzLmxlbmd0aCAtIDFdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44OG44Kv44K544OB44Oj44KS6Kqt44G/6L6844KAXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCDnj77lnKjjga7jgrPjg7Pjg4bjgq3jgrnjg4hcclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCDnlJ/miJDjgZfjgZ8gTVRvb25NYXRlcmlhbFxyXG4gICAgICogQHBhcmFtIHByb3Ag55Sf5oiQ44GX44GfIE1Ub29uTWF0ZXJpYWwg44Gu44Oe44OG44Oq44Ki44Or44OX44Ot44OR44OG44KjXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9hZE1Ub29uVGV4dHVyZXNBc3luYyhjb250ZXh0OiBzdHJpbmcsIG1hdGVyaWFsOiBNVG9vbk1hdGVyaWFsLCBwcm9wOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eSk6IFByb21pc2U8TWF0ZXJpYWw+IHtcclxuICAgICAgICBjb25zdCBwcm9taXNlczogQXJyYXk8UHJvbWlzZTxCYXNlVGV4dHVyZT4+ID0gW107XHJcbiAgICAgICAgLy8g5YWo44Gm44Gu44OG44Kv44K544OB44Oj44GuIFVWIE9mZnNldCAmIFNjYWxlIOOBr+ODoeOCpOODs+ODhuOCr+OCueODgeODo+OBruOCguOBruOCkua1geeUqOOBmeOCi1xyXG4gICAgICAgIGNvbnN0IHV2T2Zmc2V0U2NhbGUgPSBwcm9wLnZlY3RvclByb3BlcnRpZXMuX01haW5UZXg7XHJcbiAgICAgICAgaWYgKCF1dk9mZnNldFNjYWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobWF0ZXJpYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhcHBseVRleHR1cmUgPSAoaW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZCwgY2FsbGJhY2s6ICh0ZXh0dXJlOiBCYXNlVGV4dHVyZSkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihpbmRleCwgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVyLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L3RleHR1cmVzLyR7aW5kZXh9YCwgeyBpbmRleDogdmFsdWUgfSwgKGJhYnlsb25UZXh0dXJlOiBCYXNlVGV4dHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlrp/pmpvjga8gVGV4dHVyZSDjgqTjg7Pjgrnjgr/jg7PjgrnjgYzmnaXjgovjga7jgafjgq3jg6Pjgrnjg4hcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGJhYnlsb25UZXh0dXJlIGFzIFRleHR1cmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQudU9mZnNldCA9IHV2T2Zmc2V0U2NhbGVbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQudk9mZnNldCA9IHV2T2Zmc2V0U2NhbGVbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQudVNjYWxlID0gdXZPZmZzZXRTY2FsZVsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdC52U2NhbGUgPSB1dk9mZnNldFNjYWxlWzNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhiYWJ5bG9uVGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFwcGx5VGV4dHVyZShwcm9wLnRleHR1cmVQcm9wZXJ0aWVzLl9NYWluVGV4LCAodGV4dHVyZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobWF0ZXJpYWwuYWxwaGFCbGVuZCB8fCBtYXRlcmlhbC5hbHBoYVRlc3QpIHtcclxuICAgICAgICAgICAgICAgIHRleHR1cmUuaGFzQWxwaGEgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLmRpZmZ1c2VUZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fU2hhZGVUZXh0dXJlLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLnNoYWRlVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fQnVtcE1hcCwgKHRleHR1cmUpID0+IChtYXRlcmlhbC5idW1wVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fUmVjZWl2ZVNoYWRvd1RleHR1cmUsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwucmVjZWl2ZVNoYWRvd1RleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1NoYWRpbmdHcmFkZVRleHR1cmUsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwuc2hhZGluZ0dyYWRlVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fUmltVGV4dHVyZSwgKHRleHR1cmUpID0+IChtYXRlcmlhbC5yaW1UZXh0dXJlID0gdGV4dHVyZSkpO1xyXG4gICAgICAgIGFwcGx5VGV4dHVyZShwcm9wLnRleHR1cmVQcm9wZXJ0aWVzLl9TcGhlcmVBZGQsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwubWF0Q2FwVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fRW1pc3Npb25NYXAsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwuZW1pc3NpdmVUZXh0dXJlID0gdGV4dHVyZSkpO1xyXG4gICAgICAgIGFwcGx5VGV4dHVyZShwcm9wLnRleHR1cmVQcm9wZXJ0aWVzLl9PdXRsaW5lV2lkdGhUZXh0dXJlLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVXaWR0aFRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1V2QW5pbU1hc2tUZXh0dXJlLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLnV2QW5pbWF0aW9uTWFza1RleHR1cmUgPSB0ZXh0dXJlKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiBtYXRlcmlhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjgrfjgqfjg7zjg4DlkI3jgYvjgonjg57jg4bjg6rjgqLjg6vjgpLmjqjmuKzjgZfjgabnlJ/miJDjgZnjgotcclxuICAgICAqIEBwYXJhbSBjb250ZXh0IOePvuWcqOOBruOCs+ODs+ODhuOCreOCueODiFxyXG4gICAgICogQHBhcmFtIG1hdGVyaWFsIGdsVEYg44Oe44OG44Oq44Ki44OrXHJcbiAgICAgKiBAcGFyYW0gYmFieWxvbkRyYXdNb2RlIOaPj+eUu+eorumhnlxyXG4gICAgICogQHBhcmFtIHByb3Ag55Sf5oiQ44GZ44KL44Oe44OG44Oq44Ki44Or44OX44Ot44OR44OG44KjXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlTWF0ZXJpYWxCeVNoYWRlcihjb250ZXh0OiBzdHJpbmcsIG1hdGVyaWFsOiBJTWF0ZXJpYWwsIGJhYnlsb25EcmF3TW9kZTogbnVtYmVyLCBwcm9wOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eSk6IE51bGxhYmxlPE1hdGVyaWFsPiB7XHJcbiAgICAgICAgaWYgKHByb3Auc2hhZGVyID09PSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVNoYWRlci5WUk1NVG9vbikge1xyXG4gICAgICAgICAgICBjb25zdCBtdG9vbk1hdGVyaWFsID0gbmV3IE1Ub29uTWF0ZXJpYWwobWF0ZXJpYWwubmFtZSB8fCBgTVRvb25NYXRlcmlhbCR7bWF0ZXJpYWwuaW5kZXh9YCwgdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRNVG9vbk1hdGVyaWFsUHJvcGVydGllcyhtdG9vbk1hdGVyaWFsLCBwcm9wKTtcclxuICAgICAgICAgICAgcmV0dXJuIG10b29uTWF0ZXJpYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9wLnNoYWRlciA9PT0gSVZSTU1hdGVyaWFsUHJvcGVydHlTaGFkZXIuVlJNVW5saXRUcmFuc3BhcmVudFpXcml0ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBtYXQgPSB0aGlzLmxvYWRlci5jcmVhdGVNYXRlcmlhbChjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbkRyYXdNb2RlKTtcclxuICAgICAgICAgICAgLy8g6YCa5bi444Oe44OG44Oq44Ki44Or44GrIERlcHRoIFdyaXRlIOOCkuW8t+WItlxyXG4gICAgICAgICAgICBtYXQuZGlzYWJsZURlcHRoV3JpdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgbWF0LmZvcmNlRGVwdGhXcml0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oe44OG44Oq44Ki44Or44GrIFZSTSDjg5fjg63jg5Hjg4bjgqPjgpLoqK3lrppcclxuICAgICAqIFZSTSDjg5fjg63jg5Hjg4bjgqPjgajjg57jg4bjg6rjgqLjg6vjg5fjg63jg5Hjg4bjgqPjga7jg57jg4Pjg5Tjg7PjgrDjgpLooYzjgaPjgabjgYTjgotcclxuICAgICAqIOWIneacn+WApOOBr+ODnuODhuODquOCouODq+Wun+ijheWBtOOBq+aMgeOBo+OBpuOBhOOCi+OBn+OCgeOAgeWApOOBjOOBguOCi+WgtOWQiOOBruOBv+S4iuabuOOBjeOBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldE1Ub29uTWF0ZXJpYWxQcm9wZXJ0aWVzKG1hdGVyaWFsOiBNVG9vbk1hdGVyaWFsLCBwcm9wOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eSkge1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9DdXRvZmYsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLmFscGhhQ3V0T2ZmID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8SVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk+KHByb3AudmVjdG9yUHJvcGVydGllcy5fQ29sb3IsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBuZXcgQ29sb3IzKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0pO1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5hbHBoYSA9IHZhbHVlWzNdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eT4ocHJvcC52ZWN0b3JQcm9wZXJ0aWVzLl9TaGFkZUNvbG9yLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuc2hhZGVDb2xvciA9IG5ldyBDb2xvcjModmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX0J1bXBTY2FsZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuYnVtcFNjYWxlID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fUmVjZWl2ZVNoYWRvd1JhdGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnJlY2VpdmVTaGFkb3dSYXRlID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fU2hhZGluZ0dyYWRlUmF0ZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuc2hhZGluZ0dyYWRlUmF0ZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1NoYWRlU2hpZnQsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnNoYWRlU2hpZnQgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9TaGFkZVRvb255LCAodmFsdWUpID0+IChtYXRlcmlhbC5zaGFkZVRvb255ID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fTGlnaHRDb2xvckF0dGVudWF0aW9uLCAodmFsdWUpID0+IChtYXRlcmlhbC5saWdodENvbG9yQXR0ZW51YXRpb24gPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9JbmRpcmVjdExpZ2h0SW50ZW5zaXR5LCAodmFsdWUpID0+IChtYXRlcmlhbC5pbmRpcmVjdExpZ2h0SW50ZW5zaXR5ID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8SVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk+KHByb3AudmVjdG9yUHJvcGVydGllcy5fUmltQ29sb3IsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5yaW1Db2xvciA9IG5ldyBDb2xvcjModmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1JpbUxpZ2h0aW5nTWl4LCAodmFsdWUpID0+IChtYXRlcmlhbC5yaW1MaWdodGluZ01peCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1JpbUZyZXNuZWxQb3dlciwgKHZhbHVlKSA9PiAobWF0ZXJpYWwucmltRnJlc25lbFBvd2VyID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fUmltTGlmdCwgKHZhbHVlKSA9PiAobWF0ZXJpYWwucmltTGlmdCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5Pihwcm9wLnZlY3RvclByb3BlcnRpZXMuX0VtaXNzaW9uQ29sb3IsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5lbWlzc2l2ZUNvbG9yID0gbmV3IENvbG9yMyh2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fT3V0bGluZVdpZHRoLCAodmFsdWUpID0+IChtYXRlcmlhbC5vdXRsaW5lV2lkdGggPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9PdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2UsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5Pihwcm9wLnZlY3RvclByb3BlcnRpZXMuX091dGxpbmVDb2xvciwgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLm91dGxpbmVDb2xvciA9IG5ldyBDb2xvcjModmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX091dGxpbmVMaWdodGluZ01peCwgKHZhbHVlKSA9PiAobWF0ZXJpYWwub3V0bGluZUxpZ2h0aW5nTWl4ID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fVXZBbmltU2Nyb2xsWCwgKHZhbHVlKSA9PiAobWF0ZXJpYWwudXZBbmltYXRpb25TY3JvbGxYID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fVXZBbmltU2Nyb2xsWSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwudXZBbmltYXRpb25TY3JvbGxZID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fVXZBbmltUm90YXRpb24sICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnV2QW5pbWF0aW9uUm90YXRpb24gPSB2YWx1ZSkpO1xyXG5cclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fRGVidWdNb2RlLCAodmFsdWUpID0+IChtYXRlcmlhbC5kZWJ1Z01vZGUgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9CbGVuZE1vZGUsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IC8vIE9wYXF1ZVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFscGhhQmxlbmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYVRlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTogLy8gVHJhbnNwYXJlbnRDdXRvdXRcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYUJsZW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFUZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYU1vZGUgPSBFbmdpbmUuQUxQSEFfQ09NQklORTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjogLy8gVHJhbnNwYXJlbnRcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYUJsZW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYVRlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYU1vZGUgPSBFbmdpbmUuQUxQSEFfQ09NQklORTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9PdXRsaW5lV2lkdGhNb2RlLCAodmFsdWUpID0+IChtYXRlcmlhbC5vdXRsaW5lV2lkdGhNb2RlID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fT3V0bGluZUNvbG9yTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwub3V0bGluZUNvbG9yTW9kZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX0N1bGxNb2RlLCAodmFsdWUpID0+IChtYXRlcmlhbC5jdWxsTW9kZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX091dGxpbmVDdWxsTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwub3V0bGluZUN1bGxNb2RlID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8Ym9vbGVhbj4ocHJvcC5rZXl3b3JkTWFwLl9BTFBIQUJMRU5EX09OLCAodmFsdWUpID0+IChtYXRlcmlhbC5hbHBoYUJsZW5kID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8Ym9vbGVhbj4ocHJvcC5rZXl3b3JkTWFwLl9BTFBIQVRFU1RfT04sICh2YWx1ZSkgPT4gKG1hdGVyaWFsLmFscGhhVGVzdCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1pXcml0ZSwgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLmZvcmNlRGVwdGhXcml0ZSA9IE1hdGgucm91bmQodmFsdWUpID09PSAxO1xyXG4gICAgICAgICAgICBpZiAobWF0ZXJpYWwuZm9yY2VEZXB0aFdyaXRlKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5kaXNhYmxlRGVwdGhXcml0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDjg5fjg63jg5Hjg4bjgqPjgYzoqK3lrprjgZXjgozjgabjgYTjgozjgbDjgrPjg7zjg6vjg5Djg4Pjgq/jgpLlrp/ooYzjgZnjgotcclxuICovXHJcbmZ1bmN0aW9uIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxUPihwcm9wOiBUIHwgdW5kZWZpbmVkLCBjYWxsYmFjazogKHZhbHVlOiBUKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAodHlwZW9mIHByb3AgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY2FsbGJhY2socHJvcCk7XHJcbn1cclxuIiwiaW1wb3J0IFwiQGJhYnlsb25qcy9jb3JlL0xvYWRpbmcvbG9hZGluZ1NjcmVlblwiO1xuXG4vLyBSZWdpc3RlciBwbHVnaW5zIChzaWRlIGVmZmVjdClcbmltcG9ydCBcIkBiYWJ5bG9uanMvY29yZS9Mb2FkaW5nL1BsdWdpbnMvYmFieWxvbkZpbGVMb2FkZXJcIjtcbmltcG9ydCBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHNcIjtcbmltcG9ydCBcIkBiYWJ5bG9uanMvbG9hZGVycy9nbFRGL2dsVEZGaWxlTG9hZGVyXCI7XG5cbi8vIERlYnVnXG5pbXBvcnQgXCJAYmFieWxvbmpzL2NvcmUvRGVidWdcIjtcbmltcG9ydCBcIkBiYWJ5bG9uanMvZ3VpXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2luc3BlY3RvclwiO1xuY29uc3QgZGVidWcgPSBmYWxzZTtcbmNvbnN0IHNoYWRvd19kZWJ1ZyA9IGZhbHNlO1xuY29uc3Qgc3BoZXJlcyA9IGZhbHNlO1xuXG5pbXBvcnQge1NjZW5lfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lXCI7XG5pbXBvcnQge0VuZ2luZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2VuZ2luZVwiO1xuaW1wb3J0IHtDb2xvcjMsIFZlY3RvcjN9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aFwiO1xuaW1wb3J0IHtTaGFkb3dHZW5lcmF0b3J9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL1NoYWRvd3Mvc2hhZG93R2VuZXJhdG9yXCI7XG5cbmltcG9ydCB7RGlyZWN0aW9uYWxMaWdodH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvZGlyZWN0aW9uYWxMaWdodFwiO1xuaW1wb3J0IHtIZW1pc3BoZXJpY0xpZ2h0fSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9oZW1pc3BoZXJpY0xpZ2h0XCI7XG5pbXBvcnQge1BvaW50TGlnaHR9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL3BvaW50TGlnaHRcIjtcbmltcG9ydCB7U3BoZXJlQnVpbGRlcn0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NZXNoZXMvQnVpbGRlcnMvc3BoZXJlQnVpbGRlclwiO1xuaW1wb3J0IHtUb3J1c0tub3RCdWlsZGVyfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01lc2hlcy9CdWlsZGVycy90b3J1c0tub3RCdWlsZGVyXCI7XG4vLyBpbXBvcnQge01Ub29uTWF0ZXJpYWx9IGZyb20gXCIuL3NoYWRlci9iYWJ5bG9uLW10b29uLW1hdGVyaWFsL3NyY1wiO1xuaW1wb3J0IHtUZXh0dXJlfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9UZXh0dXJlcy90ZXh0dXJlXCI7XG5pbXBvcnQge01hdGVyaWFsfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFwiO1xuaW1wb3J0IHtWZXJ0ZXhCdWZmZXJ9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQnVmZmVycy9idWZmZXJcIjtcbmltcG9ydCB7VlJNTWFuYWdlcn0gZnJvbSBcIi4vaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyY1wiO1xuaW1wb3J0IHtWM0RDb3JlfSBmcm9tIFwiLi9pbmRleFwiO1xuXG4vLyBJbml0IEJhYnlsb25KUyBFbmdpbmVcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW5kZXJDYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbmxldCBlbmdpbmU6IEVuZ2luZTtcbmlmIChFbmdpbmUuaXNTdXBwb3J0ZWQoKSkge1xuICAgIGVuZ2luZSA9IG5ldyBFbmdpbmUoY2FudmFzLCB0cnVlKTtcbn1cblxuY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdC1maWxlJykgYXMgSFRNTElucHV0RWxlbWVudDtcblxud2luZG93Lm9ubG9hZCA9IGFzeW5jIChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJPbmxvYWRcIik7XG4gICAgY29uc3QgdnJtRmlsZSA9ICd0ZXN0ZmlsZXMvNzgyMjQ0NDMzNjQ5NzAwNDUyNi52cm0nO1xuXG4gICAgLy8gQ3JlYXRlIHYzZCBjb3JlXG4gICAgY29uc3QgdjNEQ29yZSA9IG5ldyBWM0RDb3JlKGVuZ2luZSwgbmV3IFNjZW5lKGVuZ2luZSkpO1xuICAgIHYzRENvcmUudHJhbnNwYXJlbnRCYWNrZ3JvdW5kKCk7XG4gICAgYXdhaXQgdjNEQ29yZS5BcHBlbmRBc3luYygnJywgdnJtRmlsZSk7XG5cbiAgICAvLyBHZXQgbWFuYWdlcnNcbiAgICBjb25zdCB2cm1NYW5hZ2VyID0gdjNEQ29yZS5nZXRWUk1NYW5hZ2VyQnlVUkkodnJtRmlsZSk7XG4gICAgY29uc29sZS5sb2coXCJQcmludGluZyBsb2FkZWQgVlJNIGZpbGUgbWV0YWRhdGE6IFwiLCB2cm1NYW5hZ2VyLmV4dC5tZXRhKTtcblxuICAgIC8vIENhbWVyYVxuICAgIHYzRENvcmUuYXR0YWNoQ2FtZXJhVG8odnJtTWFuYWdlcik7XG5cbiAgICAvLyBMaWdodHNcbiAgICB2M0RDb3JlLmFkZEFtYmllbnRMaWdodChuZXcgQ29sb3IzKDEsIDEsIDEpKTtcblxuICAgIC8vIExvY2sgY2FtZXJhIHRhcmdldFxuICAgIHYzRENvcmUuc2NlbmUub25CZWZvcmVSZW5kZXJPYnNlcnZhYmxlLmFkZCgoKSA9PiB7XG4gICAgICAgIHZybU1hbmFnZXIuY2FtZXJhc1swXS5zZXRUYXJnZXQodnJtTWFuYWdlci5yb290TWVzaC5nZXRBYnNvbHV0ZVBvc2l0aW9uKCkpO1xuICAgIH0pO1xuXG4gICAgLy8gUmVuZGVyIGxvb3BcbiAgICBlbmdpbmUucnVuUmVuZGVyTG9vcCgoKSA9PiB7XG4gICAgICAgIHYzRENvcmUuc2NlbmUucmVuZGVyKCk7XG4gICAgfSk7XG5cbi8vIE1vZGVsIFRyYW5zZm9ybWF0aW9uXG4gICAgdnJtTWFuYWdlci5yb290TWVzaC50cmFuc2xhdGUobmV3IFZlY3RvcjMoMSwgMCwgMCksIDEpO1xuICAgIHZybU1hbmFnZXIucm9vdE1lc2gucm90YXRpb24gPSBuZXcgVmVjdG9yMygwLCAxMzUsIDApO1xuXG4vLyBXb3JrIHdpdGggSHVtYW5vaWRCb25lXG4gICAgdnJtTWFuYWdlci5odW1hbm9pZEJvbmUubGVmdFVwcGVyQXJtLmFkZFJvdGF0aW9uKDAsIC0wLjUsIDApO1xuICAgIHZybU1hbmFnZXIuaHVtYW5vaWRCb25lLmhlYWQuYWRkUm90YXRpb24oMC4xLCAwLCAwKTtcblxuLy8gV29yayB3aXRoIEJsZW5kU2hhcGUoTW9ycGhUYXJnZXQpXG4gICAgdnJtTWFuYWdlci5tb3JwaGluZygnSm95JywgMS4wKTtcbn07XG5cbmV4cG9ydCB7fTtcbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5leHBvcnQgKiBmcm9tIFwiLi92M2QtY29yZVwiXG5leHBvcnQgKiBmcm9tIFwiLi9oZWxwZXJcIlxuIiwiLyoqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgdjNkIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsXG4gKiBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5cbmltcG9ydCB7SGFyZHdhcmVTY2FsaW5nT3B0aW1pemF0aW9uLFxuICAgIExlbnNGbGFyZXNPcHRpbWl6YXRpb24sXG4gICAgTnVsbGFibGUsXG4gICAgUGFydGljbGVzT3B0aW1pemF0aW9uLFxuICAgIFBvc3RQcm9jZXNzZXNPcHRpbWl6YXRpb24sXG4gICAgUmVuZGVyVGFyZ2V0c09wdGltaXphdGlvbiwgU2NlbmUsIFNjZW5lT3B0aW1pemVyLCBTY2VuZU9wdGltaXplck9wdGlvbnMsIFRleHR1cmVPcHRpbWl6YXRpb24gfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlXCI7XG5pbXBvcnQge1YzRENvcmV9IGZyb20gXCIuLi9pbmRleFwiO1xuXG5leHBvcnQgY2xhc3MgVjNEU2NlbmVPcHRpbWl6ZXIge1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9taXplZCBzY2VuZSBvcHRpbWl6ZXIgb3B0aW9ucy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX29wdGlvbnM6IFNjZW5lT3B0aW1pemVyT3B0aW9ucztcbiAgICBnZXQgb3B0aW9ucygpOiBTY2VuZU9wdGltaXplck9wdGlvbnN7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICAgIH1cbiAgICBzZXQgb3B0aW9ucyh2YWx1ZTogU2NlbmVPcHRpbWl6ZXJPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2VuZU9wdGltaXplclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3B0aW1pemVyOiBTY2VuZU9wdGltaXplcjtcbiAgICBnZXQgb3B0aW1pemVyKCk6IFNjZW5lT3B0aW1pemVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGltaXplcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2NlbmU6IFNjZW5lLFxuICAgICAgICBvcHRpb25zPzogTnVsbGFibGU8U2NlbmVPcHRpbWl6ZXJPcHRpb25zPixcbiAgICApIHtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnMgfHwgVjNEU2NlbmVPcHRpbWl6ZXIuQ3VzdG9tT3B0aW1pemVyT3B0aW9ucygpO1xuICAgICAgICB0aGlzLl9vcHRpbWl6ZXIgPSBuZXcgU2NlbmVPcHRpbWl6ZXIoc2NlbmUsIHRoaXMuX29wdGlvbnMpO1xuICAgICAgICB0aGlzLl9vcHRpbWl6ZXIudGFyZ2V0RnJhbWVSYXRlID0gVjNEQ29yZS5GUkFNRVJBVEU7XG4gICAgICAgIHRoaXMuX29wdGltaXplci50cmFja2VyRHVyYXRpb24gPSAyMDAwO1xuXG4gICAgICAgIHRoaXMuX29wdGltaXplci5zdGFydCgpO1xuICAgICAgICB0aGlzLnNldHVwRm9jdXNFdmVudHModGhpcy5fb3B0aW1pemVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBDdXN0b21PcHRpbWl6ZXJPcHRpb25zKCk6IFNjZW5lT3B0aW1pemVyT3B0aW9ucyB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBuZXcgU2NlbmVPcHRpbWl6ZXJPcHRpb25zKCk7XG4gICAgICAgIG9wdGlvbnMuYWRkT3B0aW1pemF0aW9uKG5ldyBMZW5zRmxhcmVzT3B0aW1pemF0aW9uKDApKTtcbiAgICAgICAgb3B0aW9ucy5hZGRPcHRpbWl6YXRpb24obmV3IFBhcnRpY2xlc09wdGltaXphdGlvbigxKSk7XG4gICAgICAgIG9wdGlvbnMuYWRkT3B0aW1pemF0aW9uKG5ldyBUZXh0dXJlT3B0aW1pemF0aW9uKDEsIDUxMikpO1xuICAgICAgICBvcHRpb25zLmFkZE9wdGltaXphdGlvbihuZXcgUmVuZGVyVGFyZ2V0c09wdGltaXphdGlvbigyKSk7XG4gICAgICAgIG9wdGlvbnMuYWRkT3B0aW1pemF0aW9uKG5ldyBQb3N0UHJvY2Vzc2VzT3B0aW1pemF0aW9uKDMpKTtcbiAgICAgICAgb3B0aW9ucy5hZGRPcHRpbWl6YXRpb24obmV3IEhhcmR3YXJlU2NhbGluZ09wdGltaXphdGlvbig0LCAyKSk7XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cEZvY3VzRXZlbnRzKG9wdGltaXplcjogU2NlbmVPcHRpbWl6ZXIpIHtcbiAgICAgICAgaWYgKHdpbmRvdykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZXR1cEZvY3VzRXZlbnRzXCIpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3B0aW1pemVyIHN0YXJ0XCIpO1xuICAgICAgICAgICAgICAgIG9wdGltaXplci5zdGFydCgpO1xuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3B0aW1pemVyIHN0b3BcIik7XG4gICAgICAgICAgICAgICAgb3B0aW1pemVyLnN0b3AoKTtcbiAgICAgICAgICAgICAgICBvcHRpbWl6ZXIucmVzZXQoKTtcbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyoqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgdjNkIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsXG4gKiBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5cbmltcG9ydCB7TWF0ZXJpYWwsIEJhY2tncm91bmRNYXRlcmlhbCwgQmFzZVRleHR1cmUsIENvbG9yMywgQ3ViZVRleHR1cmUsIE1lc2gsIFNjZW5lLCBUZXh0dXJlfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlXCI7XG5pbXBvcnQge1NreU1hdGVyaWFsfSBmcm9tIFwiQGJhYnlsb25qcy9tYXRlcmlhbHNcIjtcblxuXG5leHBvcnQgY2xhc3MgdjNEU2t5Qm94IHtcblxuICAgIHByaXZhdGUgc3RhdGljIF9lbnZpcm9ubWVudFRleHR1cmVDRE5VcmwgPSBcImh0dHBzOi8vYXNzZXRzLmJhYnlsb25qcy5jb20vZW52aXJvbm1lbnRzL2Vudmlyb25tZW50U3BlY3VsYXIuZW52XCI7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9za3lib3g6IE1lc2g7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2t5Ym94QmFzZTogTWVzaDtcbiAgICBnZXQgc2t5Ym94KCk6IE1lc2gge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2t5Ym94O1xuICAgIH1cblxuICAgIHB1YmxpYyBza3lib3hNYXRlcmlhbDogQmFja2dyb3VuZE1hdGVyaWFsO1xuICAgIHB1YmxpYyBza3lib3hCYXNlTWF0ZXJpYWw6IFNreU1hdGVyaWFsO1xuICAgIHB1YmxpYyBza3lib3hSZWZsZWN0aW9uVGV4dHVyZTogQ3ViZVRleHR1cmU7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2NlbmU6IFNjZW5lLFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHRleHR1cmVOYW1lOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBib3hTaXplOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBlbnZUZXh0dXJlPzogQmFzZVRleHR1cmUsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3NreWJveCA9IE1lc2guQ3JlYXRlQm94KFwiU2t5Ym94XCIsIGJveFNpemUsIHRoaXMuc2NlbmUsIHVuZGVmaW5lZCwgTWVzaC5CQUNLU0lERSk7XG4gICAgICAgIHRoaXMuX3NreWJveEJhc2UgPSBNZXNoLkNyZWF0ZUJveChcIlNreWJveEJhc2VcIiwgYm94U2l6ZSsxLCB0aGlzLnNjZW5lLCB1bmRlZmluZWQsIE1lc2guQkFDS1NJREUpO1xuICAgICAgICB0aGlzLmNyZWF0ZU1hdGVyaWFsKHRleHR1cmVOYW1lKTtcbiAgICAgICAgdGhpcy5fc2t5Ym94Lm1hdGVyaWFsID0gdGhpcy5za3lib3hNYXRlcmlhbDtcbiAgICAgICAgdGhpcy5fc2t5Ym94QmFzZS5tYXRlcmlhbCA9IHRoaXMuc2t5Ym94QmFzZU1hdGVyaWFsO1xuICAgICAgICB0aGlzLl9za3lib3gucmVuZGVyaW5nR3JvdXBJZCA9IDA7XG4gICAgICAgIHRoaXMuX3NreWJveEJhc2UucmVuZGVyaW5nR3JvdXBJZCA9IDA7XG4gICAgICAgIHRoaXMuX3NreWJveC5tYXRlcmlhbC50cmFuc3BhcmVuY3lNb2RlID0gTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFURVNUQU5EQkxFTkQ7XG4gICAgICAgIHRoaXMuX3NreWJveC5tYXRlcmlhbC5hbHBoYSA9IDAuNTtcbiAgICAgICAgdGhpcy5zZXR1cEltYWdlUHJvY2Vzc2luZygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIHRoZSBza3lib3ggbWF0ZXJpYWwgYW5kIHRoZSBza3lib3ggcmVmbGVjdGlvbiB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHRleHR1cmVOYW1lIG5hbWUgKFVSSSkgdG8gdGhlIHRleHR1cmUgZmlsZXNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlTWF0ZXJpYWwodGV4dHVyZU5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNreWJveEJhc2VNYXRlcmlhbCA9IG5ldyBTa3lNYXRlcmlhbChcIlNreWJveEJhc2VNYXRlcmlhbFwiLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgdGhpcy5za3lib3hNYXRlcmlhbCA9IG5ldyBCYWNrZ3JvdW5kTWF0ZXJpYWwoXCJTa3lib3hNYXRlcmlhbFwiLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgdGhpcy5za3lib3hNYXRlcmlhbC5iYWNrRmFjZUN1bGxpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5za3lib3hNYXRlcmlhbC51c2VSR0JDb2xvciA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNreWJveE1hdGVyaWFsLnByaW1hcnlDb2xvciA9IG5ldyBDb2xvcjMoMSwgMSwgMSk7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwuZW5hYmxlTm9pc2UgPSB0cnVlO1xuICAgICAgICB0aGlzLnNreWJveFJlZmxlY3Rpb25UZXh0dXJlID0gbmV3IEN1YmVUZXh0dXJlKHRleHR1cmVOYW1lLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgdGhpcy5za3lib3hSZWZsZWN0aW9uVGV4dHVyZS5jb29yZGluYXRlc01vZGUgPSBUZXh0dXJlLlNLWUJPWF9NT0RFO1xuICAgICAgICB0aGlzLnNreWJveFJlZmxlY3Rpb25UZXh0dXJlLmdhbW1hU3BhY2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5za3lib3hNYXRlcmlhbC5yZWZsZWN0aW9uVGV4dHVyZSA9IHRoaXMuc2t5Ym94UmVmbGVjdGlvblRleHR1cmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dXAgdGhlIGltYWdlIHByb2Nlc3NpbmcgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBwcml2YXRlIHNldHVwSW1hZ2VQcm9jZXNzaW5nKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNjZW5lLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29udHJhc3QgPSAxLjI7XG4gICAgICAgIHRoaXMuc2NlbmUuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5leHBvc3VyZSA9IDAuODtcbiAgICAgICAgdGhpcy5zY2VuZS5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLnRvbmVNYXBwaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2NlbmUuZW52aXJvbm1lbnRUZXh0dXJlID0gdGhpcy5lbnZUZXh0dXJlID8gdGhpcy5lbnZUZXh0dXJlXG4gICAgICAgICAgICA6IEN1YmVUZXh0dXJlLkNyZWF0ZUZyb21QcmVmaWx0ZXJlZERhdGEodjNEU2t5Qm94Ll9lbnZpcm9ubWVudFRleHR1cmVDRE5VcmwsIHRoaXMuc2NlbmUpO1xuICAgIH1cbn1cbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge0lTaGFkb3dMaWdodCwgTGlnaHQsXG4gICAgQW5pbWF0aW9ufSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlXCI7XG5pbXBvcnQge0NvbG9yMywgQ29sb3I0LCBRdWF0ZXJuaW9uLCBTaXplLCBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0lTaGFkb3dMaWdodChsaWdodDogTGlnaHQpIDogbGlnaHQgaXMgSVNoYWRvd0xpZ2h0IHtcbiAgICByZXR1cm4gKGxpZ2h0IGFzIElTaGFkb3dMaWdodCkuc2V0U2hhZG93UHJvamVjdGlvbk1hdHJpeCAhPT0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5pbWF0aW9uRGF0YVR5cGUodmFsdWU6IGFueSkge1xuICAgIGxldCBkYXRhVHlwZSA9IHVuZGVmaW5lZDtcblxuICAgIGlmICghaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpICYmIGlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgICBkYXRhVHlwZSA9IEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FUO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBRdWF0ZXJuaW9uKSB7XG4gICAgICAgIGRhdGFUeXBlID0gQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfUVVBVEVSTklPTjtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVmVjdG9yMykge1xuICAgICAgICBkYXRhVHlwZSA9IEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX1ZFQ1RPUjM7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlY3RvcjIpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9WRUNUT1IyO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBDb2xvcjMpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9DT0xPUjM7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIENvbG9yNCkge1xuICAgICAgICBkYXRhVHlwZSA9IEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0NPTE9SNDtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgU2l6ZSkge1xuICAgICAgICBkYXRhVHlwZSA9IEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX1NJWkU7XG4gICAgfVxuXG4gICAgaWYgKGRhdGFUeXBlID09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGF0YVR5cGU7XG4gICAgfVxufVxuIiwiLyoqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgdjNkIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsXG4gKiBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5cbmltcG9ydCB7QXJjUm90YXRlQ2FtZXJhfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0NhbWVyYXMvYXJjUm90YXRlQ2FtZXJhXCI7XG5pbXBvcnQge1NjZW5lfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lXCI7XG5pbXBvcnQge0VuZ2luZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2VuZ2luZVwiO1xuaW1wb3J0IHtTY2VuZUxvYWRlcn0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9Mb2FkaW5nL3NjZW5lTG9hZGVyXCI7XG5pbXBvcnQge0NvbG9yMywgQ29sb3I0LCBWZWN0b3IzfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGhcIjtcblxuaW1wb3J0IHtHTFRGTG9hZGVyRXh0ZW5zaW9uT2JzZXJ2ZXJ9IGZyb20gXCIuL2ltcG9ydGVyL2xvYWRlci1vYnNlcnZlclwiO1xuaW1wb3J0IHtcbiAgICBWUk1GaWxlTG9hZGVyLFxuICAgIFZSTUxvYWRlckV4dGVuc2lvbixcbiAgICBWUk1NYW5hZ2VyXG59IGZyb20gXCIuL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wXCI7XG5pbXBvcnQgeyBIZW1pc3BoZXJpY0xpZ2h0IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvaGVtaXNwaGVyaWNMaWdodFwiO1xuaW1wb3J0IHtBbmltYXRpb24sIEFuaW1hdGFibGUsIENhbWVyYSwgRGVmYXVsdFJlbmRlcmluZ1BpcGVsaW5lLCBFdmVudFN0YXRlLCBJU2hhZG93TGlnaHQsIFNoYWRvd0dlbmVyYXRvciwgRGVwdGhPZkZpZWxkRWZmZWN0Qmx1ckxldmVsLCBJQW5pbWF0aW9uS2V5LCBFYXNpbmdGdW5jdGlvbiwgTnVsbGFibGUsIFNjZW5lT3B0aW1pemVyT3B0aW9ucyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmVcIjtcbmltcG9ydCB7Z2V0QW5pbWF0aW9uRGF0YVR5cGUsIGlzSVNoYWRvd0xpZ2h0fSBmcm9tIFwiLi91dGlsaXRpZXMvdHlwZXNcIjtcbmltcG9ydCB7VjNEU2NlbmVPcHRpbWl6ZXJ9IGZyb20gXCIuL3NjZW5lL29wdGltaXplclwiO1xuaW1wb3J0IHt2M0RTa3lCb3h9IGZyb20gXCIuL3NjZW5lL3NreWJveFwiO1xuXG5cbmV4cG9ydCBjbGFzcyBWM0RDb3JlIGltcGxlbWVudHMgR0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyIHtcblxuICAgIHB1YmxpYyBzdGF0aWMgRlJBTUVSQVRFID0gNjA7XG5cbiAgICAvKipcbiAgICAgKiBHTFRGRmlsZUxvYWRlciBwbHVnaW4gZmFjdG9yeVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBfdnJtRmlsZUxvYWRlciA9IG5ldyBWUk1GaWxlTG9hZGVyKCk7XG5cbiAgICAvLyBXaGV0aGVyIHN0YXJ0cyBzcHJpbmcgYm9uZXMgYW5pbWF0aW9uIGF1dG9tYXRpY2FsbHlcbiAgICBwcml2YXRlIF9zcHJpbmdCb25lc0F1dG9VcGRhdGUgPSB0cnVlO1xuICAgIGdldCBzcHJpbmdCb25lc0F1dG9VcGRhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zcHJpbmdCb25lc0F1dG9VcGRhdGU7XG4gICAgfVxuICAgIHNldCBzcHJpbmdCb25lc0F1dG9VcGRhdGUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fc3ByaW5nQm9uZXNBdXRvVXBkYXRlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hhZG93IGdlbmVyYXRvcnNcbiAgICAgKi9cbiAgICBwcml2YXRlIF9zaGFkb3dHZW5lcmF0b3JzOlxuICAgICAgICBNYXA8SVNoYWRvd0xpZ2h0LCBTaGFkb3dHZW5lcmF0b3I+ID1cbiAgICAgICAgbmV3IE1hcDxJU2hhZG93TGlnaHQsIFNoYWRvd0dlbmVyYXRvcj4oKTtcblxuICAgIC8qKlxuICAgICAqIFNjZW5lIG9wdGltaXplclxuICAgICAqL1xuICAgIHByaXZhdGUgX3NjZW5lT3B0aW1pemVyOiBWM0RTY2VuZU9wdGltaXplcjtcblxuICAgIC8qKlxuICAgICAqIFJlbmRlcmluZyBwaXBlbGluZVxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlcmluZ1BpcGVsaW5lOiBEZWZhdWx0UmVuZGVyaW5nUGlwZWxpbmU7XG4gICAgZ2V0IHJlbmRlcmluZ1BpcGVsaW5lKCk6IERlZmF1bHRSZW5kZXJpbmdQaXBlbGluZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJpbmdQaXBlbGluZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFja3Mgd2hlbiBsb2FkaW5nIGlzIGRvbmVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9vbkxvYWRDb21wbGV0ZUNhbGxiYWNrczogRnVuY3Rpb25bXSA9IFtdO1xuICAgIHB1YmxpYyBhZGRPbkxvYWRDb21wbGV0ZUNhbGxiYWNrcyhjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fb25Mb2FkQ29tcGxldGVDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZU9uTG9hZENvbXBsZXRlQ2FsbGJhY2soY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX29uTG9hZENvbXBsZXRlQ2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICBpZihpZHggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9vbkxvYWRDb21wbGV0ZUNhbGxiYWNrcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZXNldE9uTG9hZENvbXBsZXRlQ2FsbGJhY2tzKCkge1xuICAgICAgICB0aGlzLl9vbkxvYWRDb21wbGV0ZUNhbGxiYWNrcyA9IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2JlZm9yZVJlbmRlckZ1bmM6XG4gICAgICAgIChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB2b2lkID0gKCkgPT4ge307XG4gICAgcHJpdmF0ZSBfYWZ0ZXJSZW5kZXJGdW5jOlxuICAgICAgICAoZXZlbnREYXRhOiBTY2VuZSwgZXZlbnRTdGF0ZTogRXZlbnRTdGF0ZSkgPT4gdm9pZCA9ICgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBtYW5hZ2VyIG9mIHRoaXMubG9hZGVkVlJNTWFuYWdlcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zcHJpbmdCb25lc0F1dG9VcGRhdGUpXG4gICAgICAgICAgICAgICAgbWFuYWdlci51cGRhdGUodGhpcy5lbmdpbmUuZ2V0RGVsdGFUaW1lKCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHB1YmxpYyB1cGRhdGVCZWZvcmVSZW5kZXJGdW5jdGlvbihcbiAgICAgICAgZnVuYzogKGV2ZW50RGF0YTogU2NlbmUsIGV2ZW50U3RhdGU6IEV2ZW50U3RhdGUpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5fYmVmb3JlUmVuZGVyRnVuYyA9IGZ1bmM7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUFmdGVyUmVuZGVyRnVuY3Rpb24oXG4gICAgICAgIGZ1bmM6IChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX2FmdGVyUmVuZGVyRnVuYyA9IGZ1bmM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY2FtZXJhT25CZWZvcmVSZW5kZXJGdW5jOiBGdW5jdGlvbltdID0gW107XG4gICAgcHJpdmF0ZSBfbWFpbkNhbWVyYTogQ2FtZXJhO1xuICAgIGdldCBtYWluQ2FtZXJhKCk6IENhbWVyYSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYWluQ2FtZXJhO1xuICAgIH1cbiAgICBzZXQgbWFpbkNhbWVyYSh2YWx1ZTogQ2FtZXJhKSB7XG4gICAgICAgIHRoaXMuX21haW5DYW1lcmEgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2t5Qm94OiB2M0RTa3lCb3ggPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogTG9hZGVkIFZSTSBNYW5hZ2Vyc1xuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHVibGljIGxvYWRlZFZSTU1hbmFnZXJzOiBWUk1NYW5hZ2VyW10gPSBbXTtcbiAgICBwdWJsaWMgYWRkVlJNTWFuYWdlcihtYW5hZ2VyOiBWUk1NYW5hZ2VyKSB7XG4gICAgICAgIGlmIChtYW5hZ2VyKVxuICAgICAgICAgICAgdGhpcy5sb2FkZWRWUk1NYW5hZ2Vycy5wdXNoKG1hbmFnZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBWUk0gTWFuYWdlciBieSBpbmRleFxuICAgICAqIEBwYXJhbSBpZHhcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VlJNTWFuYWdlckJ5SW5kZXgoaWR4OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIChpZHggPj0gMCAmJiBpZHggPCB0aGlzLmxvYWRlZFZSTU1hbmFnZXJzLmxlbmd0aClcbiAgICAgICAgICAgID8gdGhpcy5sb2FkZWRWUk1NYW5hZ2Vyc1tpZHhdXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IFZSTSBNYW5hZ2VyIGJ5IFVSSVxuICAgICAqIFZSTSBkb2Vzbid0IGhhdmUgYW55IFVJRCBpbiBtZXRhZGF0YS4gVGl0bGUgY2FuIGJlIHVuZmlsbGVkIHRvby5cbiAgICAgKiBGaWxlbmFtZSBpcyB0aGUgb25seSByZWFzb25hYmxlIElELlxuICAgICAqIEBwYXJhbSB1cmlcbiAgICAgKi9cbiAgICAvLyBWUk0gZG9lc24ndCBoYXZlIGFueSBVSUQgaW4gbWV0YWRhdGEuIFRpdGxlIGNhbiBiZSB1bmZpbGxlZCB0b28uXG4gICAgLy8gRmlsZW5hbWUgaXMgdGhlIG9ubHkgcmVhc29uYWJsZSBJRC5cbiAgICBwdWJsaWMgZ2V0VlJNTWFuYWdlckJ5VVJJKHVyaTogU3RyaW5nKSB7XG4gICAgICAgIGZvciAoY29uc3QgbWFuYWdlciBvZiB0aGlzLmxvYWRlZFZSTU1hbmFnZXJzKSB7XG4gICAgICAgICAgICBpZiAobWFuYWdlci51cmkgPT09IHVyaSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IGVuZ2luZTogRW5naW5lLFxuICAgICAgICBwdWJsaWMgc2NlbmU/OiBTY2VuZSxcbiAgICAgICAgY2FtZXJhPzogQ2FtZXJhLFxuICAgICkge1xuICAgICAgICAvLyBSZWdpc3RlclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVnJtUGx1Z2luKCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJWcm1FeHRlbnNpb24oKTtcblxuICAgICAgICBpZiAoIXRoaXMuc2NlbmUpXG4gICAgICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFNjZW5lKHRoaXMuZW5naW5lKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5lbmdpbmUgPSB0aGlzLnNjZW5lLmdldEVuZ2luZSgpO1xuXG4gICAgICAgIHRoaXMuc2V0dXBPYnNlcnZhYmxlKCk7XG4gICAgICAgIHRoaXMuZW5hYmxlUmVzaXplKCk7XG5cbiAgICAgICAgaWYgKGNhbWVyYSkge1xuICAgICAgICAgICAgdGhpcy5fbWFpbkNhbWVyYSA9IGNhbWVyYTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3dpdGNoQWN0aXZlQ2FtZXJhKGNhbWVyYSk7XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgdGhpcy5hZGRDYW1lcmEoKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUgPSBuZXcgRGVmYXVsdFJlbmRlcmluZ1BpcGVsaW5lKFxuICAgICAgICAgICAgXCJkZWZhdWx0UGlwZWxpbmVcIiwgLy8gVGhlIG5hbWUgb2YgdGhlIHBpcGVsaW5lXG4gICAgICAgICAgICB0cnVlLCAvLyBEbyB5b3Ugd2FudCB0aGUgcGlwZWxpbmUgdG8gdXNlIEhEUiB0ZXh0dXJlP1xuICAgICAgICAgICAgdGhpcy5zY2VuZSwgLy8gVGhlIHNjZW5lIGluc3RhbmNlXG4gICAgICAgICAgICBbdGhpcy5fbWFpbkNhbWVyYV0gLy8gVGhlIGxpc3Qgb2YgY2FtZXJhcyB0byBiZSBhdHRhY2hlZCB0b1xuICAgICAgICApO1xuICAgICAgICB0aGlzLnNldHVwUmVuZGVyaW5nUGlwZWxpbmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGJhY2tncm91bmQgdHJhbnNwYXJlbnQuXG4gICAgICovXG4gICAgcHVibGljIHRyYW5zcGFyZW50QmFja2dyb3VuZCgpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5jbGVhckNvbG9yLmEgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgYmFja2dyb3VuZCBzb2xpZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgc29saWRCYWNrZ3JvdW5kKCkge1xuICAgICAgICB0aGlzLnNjZW5lLmNsZWFyQ29sb3IuYSA9IDE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlIGJhY2tncm91bmQgY29sb3IuXG4gICAgICogQHBhcmFtIGNvbG9yXG4gICAgICovXG4gICAgcHVibGljIHNldEJhY2tncm91bmRDb2xvcihjb2xvcjogQ29sb3IzKSB7XG4gICAgICAgIHRoaXMuc2NlbmUuY2xlYXJDb2xvciA9IENvbG9yNC5Gcm9tQ29sb3IzKGNvbG9yLCB0aGlzLnNjZW5lLmNsZWFyQ29sb3IuYSkudG9MaW5lYXJTcGFjZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBiYWNrZ3JvdW5kIGNvbG9yIGZyb20gaGV4IHN0cmluZy5cbiAgICAgKiBAcGFyYW0gaGV4IEhleCBjb2xvciBzdHJpbmdcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0QmFja2dyb3VuZENvbG9ySGV4KGhleDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZENvbG9yKENvbG9yMy5Gcm9tSGV4U3RyaW5nKGhleCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBhbWJpZW50IGxpZ2h0LlxuICAgICAqIEBwYXJhbSBjb2xvciBjb2xvciBvZiB0aGUgbGlnaHRcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkQW1iaWVudExpZ2h0KGNvbG9yPzogQ29sb3IzKSB7XG4gICAgICAgIGNvbnN0IGxpZ2h0ID0gbmV3IEhlbWlzcGhlcmljTGlnaHQoXG4gICAgICAgICAgICBcIlYzREhlbWlMaWdodFwiLFxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoMCwgMSwgMSksIHRoaXMuc2NlbmUpO1xuICAgICAgICBpZiAoY29sb3IpXG4gICAgICAgICAgICBsaWdodC5kaWZmdXNlID0gY29sb3I7XG4gICAgICAgIGxpZ2h0LnNldEVuYWJsZWQodHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgYmFzaWMgYXJjIHJvdGF0ZSBjYW1lcmEgdG8gc2NlbmUuXG4gICAgICogVE9ETzogdGhlcmUgc2VlbXMgdG8gYmUgYSBidWcgd2hlbiBtZXNoZXMgYXJlIG5lYXIgdGhlIGVkZ2Ugb2YgY2FtZXJhIGNvbmVcbiAgICAgKiBQcm9iYWJseSBoYXMgc29tZXRoaW5nIHRvIGRvIHdpdGggY3VsbGluZ1xuICAgICAqIEBwYXJhbSByYWRpdXMgcm90YXRpb24gcmFkaXVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBhZGRDYW1lcmEoXG4gICAgICAgIHJhZGl1czogbnVtYmVyID0gMyxcbiAgICApIHtcbiAgICAgICAgY29uc3QgY2FtZXJhID0gbmV3IEFyY1JvdGF0ZUNhbWVyYShcbiAgICAgICAgICAgICdWM0RNYWluQ2FtZXJhJyxcbiAgICAgICAgICAgIDAsIDAsIHJhZGl1cyxcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKDAsIDAsIDApLFxuICAgICAgICAgICAgdGhpcy5zY2VuZSwgdHJ1ZSk7XG4gICAgICAgIGNhbWVyYS5sb3dlclJhZGl1c0xpbWl0ID0gMC4xO1xuICAgICAgICBjYW1lcmEudXBwZXJSYWRpdXNMaW1pdCA9IDIwO1xuICAgICAgICBjYW1lcmEud2hlZWxEZWx0YVBlcmNlbnRhZ2UgPSAwLjA1O1xuICAgICAgICBjYW1lcmEubWluWiA9IDA7XG4gICAgICAgIGNhbWVyYS5zZXRQb3NpdGlvbihuZXcgVmVjdG9yMygwLCAxLjUsIC01KSk7XG4gICAgICAgIGNhbWVyYS5hdHRhY2hDb250cm9sKHRoaXMuZW5naW5lLmdldFJlbmRlcmluZ0NhbnZhcygpKTtcblxuICAgICAgICB0aGlzLl9tYWluQ2FtZXJhID0gY2FtZXJhO1xuICAgICAgICB0aGlzLnNjZW5lLnN3aXRjaEFjdGl2ZUNhbWVyYSh0aGlzLl9tYWluQ2FtZXJhLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBdHRhY2ggYSBhcmMgcm90YXRlIGZvbGxvd2luZyBjYW1lcmEgdG8gVlJNIG1vZGVsLlxuICAgICAqIFByb2JhYmx5IGhhcyBzb21ldGhpbmcgdG8gZG8gd2l0aCBjdWxsaW5nXG4gICAgICogQHBhcmFtIG1hbmFnZXIgVlJNIE1hbmFnZXIgdG8gYXR0YWNoIHRoZSBjYW1lcmEgdG9cbiAgICAgKiBAcGFyYW0gcmFkaXVzIHJvdGF0aW9uIHJhZGl1c1xuICAgICAqL1xuICAgIHB1YmxpYyBhdHRhY2hDYW1lcmFUbyhcbiAgICAgICAgbWFuYWdlcjogVlJNTWFuYWdlcixcbiAgICAgICAgcmFkaXVzOiBudW1iZXIgPSAzLFxuICAgICkge1xuICAgICAgICBjb25zdCBjYW1lcmEgPSBuZXcgQXJjUm90YXRlQ2FtZXJhKFxuICAgICAgICAgICAgJ1YzREFyY0NhbWVyYScgKyBtYW5hZ2VyLmNhbWVyYXMubGVuZ3RoLFxuICAgICAgICAgICAgMCwgMCwgcmFkaXVzLCBtYW5hZ2VyLnJvb3RNZXNoLnBvc2l0aW9uLFxuICAgICAgICAgICAgdGhpcy5zY2VuZSwgdHJ1ZSk7XG4gICAgICAgIGNhbWVyYS5sb3dlclJhZGl1c0xpbWl0ID0gMC4xO1xuICAgICAgICBjYW1lcmEudXBwZXJSYWRpdXNMaW1pdCA9IDIwO1xuICAgICAgICBjYW1lcmEud2hlZWxEZWx0YVBlcmNlbnRhZ2UgPSAwLjA1O1xuICAgICAgICBjYW1lcmEubWluWiA9IDA7XG4gICAgICAgIGNhbWVyYS5zZXRQb3NpdGlvbihuZXcgVmVjdG9yMygwLCAxLjUsIC01KSk7XG4gICAgICAgIGNhbWVyYS5zZXRUYXJnZXQobWFuYWdlci5yb290TWVzaC5nZXRBYnNvbHV0ZVBvc2l0aW9uKCkpO1xuICAgICAgICBjYW1lcmEuYXR0YWNoQ29udHJvbCh0aGlzLmVuZ2luZS5nZXRSZW5kZXJpbmdDYW52YXMoKSk7XG5cbiAgICAgICAgbWFuYWdlci5hcHBlbmRDYW1lcmEoY2FtZXJhKTtcblxuICAgICAgICB0aGlzLl9jYW1lcmFPbkJlZm9yZVJlbmRlckZ1bmMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICBjYW1lcmEuc2V0VGFyZ2V0KG1hbmFnZXIucm9vdE1lc2guZ2V0QWJzb2x1dGVQb3NpdGlvbigpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDcmVhdGUgYSBza3lib3ggZm9yIHRoZSBzY2VuZS5cbiAgICAgKiBAcGFyYW0gc2l6ZSBzaXplIG9mIHRoZSBza3lib3hcbiAgICAgKiBAcGFyYW0gdGV4dHVyZU5hbWUgcGF0aCB0byBza3lib3ggdGV4dHVyZVxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVTa3lCb3goXG4gICAgICAgIHNpemU6IG51bWJlcixcbiAgICAgICAgdGV4dHVyZU5hbWU/OiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIGlmICghdGhpcy5za3lCb3gpIHtcbiAgICAgICAgICAgIHRoaXMuc2t5Qm94ID0gbmV3IHYzRFNreUJveCh0aGlzLnNjZW5lLFxuICAgICAgICAgICAgICAgIHRleHR1cmVOYW1lID8gdGV4dHVyZU5hbWUgOiBcInRleHR1cmUvc2t5Ym94XCIsIHNpemUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlIHNoYWRvdyBjYXN0ZXIgZm9yIGxpZ2h0LlxuICAgICAqIEBwYXJhbSBsaWdodCBMaWdodCB0byBlbmFibGUgc2hhZG93cy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZW5hYmxlU2hhYm93cyhsaWdodD86IElTaGFkb3dMaWdodCkge1xuICAgICAgICBpZiAobGlnaHQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fc2hhZG93R2VuZXJhdG9ycy5oYXMobGlnaHQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hhZG93R2VuZXJhdG9yID0gbmV3IFNoYWRvd0dlbmVyYXRvcigxMDI0LCBsaWdodCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cFNoYWRvd0dlbmVyYXRvcihzaGFkb3dHZW5lcmF0b3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NoYWRvd0dlbmVyYXRvcnMuc2V0KGxpZ2h0LCBzaGFkb3dHZW5lcmF0b3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJMaWdodCBcIiArIGxpZ2h0Lm5hbWUgKyBcIiBhbHJlYWR5IGhhcyBhIHNoYWRvdyBnZW5lcmF0b3IhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsIG9mIHRoaXMuc2NlbmUubGlnaHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzSVNoYWRvd0xpZ2h0KGwpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoYWRvd0dlbmVyYXRvciA9IG5ldyBTaGFkb3dHZW5lcmF0b3IoMTAyNCwgbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBTaGFkb3dHZW5lcmF0b3Ioc2hhZG93R2VuZXJhdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hhZG93R2VuZXJhdG9ycy5zZXQobCwgc2hhZG93R2VuZXJhdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY29ycmVzcG9uZGluZyBzaGFkb3cgZ2VuZXJhdG9yIGZvciBsaWdodC5cbiAgICAgKiBAcGFyYW0gbGlnaHQgTGlnaHQgdG8gZ2V0IHNoYWRvdyBnZW5lcmF0b3JcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2hhZG93bkdlbmVyYXRvcihsaWdodDogSVNoYWRvd0xpZ2h0KTogTnVsbGFibGU8U2hhZG93R2VuZXJhdG9yPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFkb3dHZW5lcmF0b3JzLmdldChsaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIHN0YXJ0aW5nIGFuaW1hdGlvblxuICAgICAqIEBwYXJhbSB0YXJnZXRcbiAgICAgKiBAcGFyYW0gbmFtZVxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBkdXJhdGlvblxuICAgICAqIEBwYXJhbSBmcm9tXG4gICAgICogQHBhcmFtIHRvXG4gICAgICogQHBhcmFtIGxvb3BNb2RlXG4gICAgICogQHBhcmFtIGVhc2luZ0Z1bmN0aW9uXG4gICAgICogQHBhcmFtIGVhc2luZ01vZGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhcnRRdWlja0FuaW1hdGlvbihcbiAgICAgICAgdGFyZ2V0OiBhbnksXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgcHJvcGVydHk6IHN0cmluZyxcbiAgICAgICAgZHVyYXRpb246IG51bWJlcixcbiAgICAgICAgZnJvbTogYW55LFxuICAgICAgICB0bzogYW55LFxuICAgICAgICBsb29wTW9kZT86IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICAgICAgZWFzaW5nRnVuY3Rpb24/OiBFYXNpbmdGdW5jdGlvbixcbiAgICAgICAgZWFzaW5nTW9kZT86IG51bWJlclxuICAgICk6IEFuaW1hdGFibGUge1xuICAgICAgICBjb25zdCBhbmltID0gdGhpcy5jcmVhdGVBbmltYXRpb24oXG4gICAgICAgICAgICB0YXJnZXQsIG5hbWUsIHByb3BlcnR5LFxuICAgICAgICAgICAgW3tmcmFtZTogMCwgdmFsdWU6IGZyb219LCB7ZnJhbWU6IGR1cmF0aW9uLCB2YWx1ZTogdG99XSxcbiAgICAgICAgICAgIGxvb3BNb2RlLCBlYXNpbmdGdW5jdGlvbiwgZWFzaW5nTW9kZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZS5iZWdpbkRpcmVjdEFuaW1hdGlvbihhbmltWzBdLCBbYW5pbVsxXV0sIDAsIGR1cmF0aW9uLFxuICAgICAgICAgICAgZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhbmltYXRpb25cbiAgICAgKiBAcGFyYW0gdGFyZ2V0XG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlcbiAgICAgKiBAcGFyYW0ga2V5RnJhbWVzXG4gICAgICogQHBhcmFtIGxvb3BNb2RlXG4gICAgICogQHBhcmFtIGVhc2luZ0Z1bmN0aW9uXG4gICAgICogQHBhcmFtIGVhc2luZ01vZGVcbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlQW5pbWF0aW9uKFxuICAgICAgICB0YXJnZXQ6IGFueSxcbiAgICAgICAgbmFtZTogc3RyaW5nLFxuICAgICAgICBwcm9wZXJ0eTogc3RyaW5nLFxuICAgICAgICBrZXlGcmFtZXM6IEFycmF5PElBbmltYXRpb25LZXk+LFxuICAgICAgICBsb29wTW9kZT86IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICAgICAgZWFzaW5nRnVuY3Rpb24/OiBFYXNpbmdGdW5jdGlvbixcbiAgICAgICAgZWFzaW5nTW9kZT86IG51bWJlcixcbiAgICApOiBbYW55LCBBbmltYXRpb25dIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIGtleUZyYW1lcyBpcyBub3QgZW1wdHlcbiAgICAgICAgaWYgKGtleUZyYW1lcy5sZW5ndGggPCAxKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJLZXkgRnJhbWVzIGVtcHR5XCIpO1xuXG4gICAgICAgIC8vIEdldCBkYXRhIHR5cGVcbiAgICAgICAgY29uc3QgZGF0YVR5cGUgPSBnZXRBbmltYXRpb25EYXRhVHlwZShrZXlGcmFtZXNbMF0udmFsdWUpO1xuICAgICAgICBpZiAoZGF0YVR5cGUgPT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBkZXRlcm1pbmUgZGF0YSB0eXBlIGZyb20ga2V5ZnJhbWVzIVwiKTtcblxuICAgICAgICBjb25zdCBhbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKFxuICAgICAgICAgICAgbmFtZSwgcHJvcGVydHksIFYzRENvcmUuRlJBTUVSQVRFLFxuICAgICAgICAgICAgZGF0YVR5cGUsIGxvb3BNb2RlKTtcbiAgICAgICAgYW5pbWF0aW9uLnNldEtleXMoa2V5RnJhbWVzKTtcblxuICAgICAgICBpZiAoZWFzaW5nRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChlYXNpbmdNb2RlKVxuICAgICAgICAgICAgICAgIGVhc2luZ0Z1bmN0aW9uLnNldEVhc2luZ01vZGUoZWFzaW5nTW9kZSk7XG4gICAgICAgICAgICBhbmltYXRpb24uc2V0RWFzaW5nRnVuY3Rpb24oZWFzaW5nRnVuY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFt0YXJnZXQsIGFuaW1hdGlvbl07XG4gICAgfVxuXG4gICAgcHVibGljIGVuYWJsZU9wdGltaXplcihvcHRpb25zPzogU2NlbmVPcHRpbWl6ZXJPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3NjZW5lT3B0aW1pemVyID0gbmV3IFYzRFNjZW5lT3B0aW1pemVyKHRoaXMuc2NlbmUsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIERvbid0IG1ha2Ugd3JhcHBlcnMgc3RhdGljLCBzbyBwbHVnaW5zIHdpbGwgYWx3YXlzIGJlIHJlZ2lzdGVyZWRcbiAgICAvKipcbiAgICAgKiBXcmFwcGVyIGZvciBTY2VuZUxvYWRlci5BcHBlbmRBc3luYy5cbiAgICAgKiBAcGFyYW0gcm9vdFVybCBhIHN0cmluZyB0aGF0IGRlZmluZXMgdGhlIHJvb3QgdXJsIGZvciB0aGUgc2NlbmUgYW5kIHJlc291cmNlcyBvciB0aGUgY29uY2F0ZW5hdGlvbiBvZiByb290VVJMIGFuZCBmaWxlbmFtZVxuICAgICAqIEBwYXJhbSBzY2VuZUZpbGVuYW1lIGEgc3RyaW5nIHRoYXQgZGVmaW5lcyB0aGUgbmFtZSBvZiB0aGUgc2NlbmUgZmlsZSBvciBzdGFydHMgd2l0aCBcImRhdGE6XCIgZm9sbG93aW5nIGJ5IHRoZSBzdHJpbmdpZmllZCB2ZXJzaW9uIG9mIHRoZSBzY2VuZSBvciBhIEZpbGUgb2JqZWN0IChkZWZhdWx0OiBlbXB0eSBzdHJpbmcpXG4gICAgICovXG4gICAgcHVibGljIEFwcGVuZEFzeW5jKFxuICAgICAgICByb290VXJsOiBzdHJpbmcsXG4gICAgICAgIHNjZW5lRmlsZW5hbWU/OiBzdHJpbmcgfCBGaWxlLFxuICAgICk6IFByb21pc2U8U2NlbmU+IHtcbiAgICAgICAgcmV0dXJuIFNjZW5lTG9hZGVyLkFwcGVuZEFzeW5jKHJvb3RVcmwsIHNjZW5lRmlsZW5hbWUsIHRoaXMuc2NlbmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXBwZXIgZm9yIFNjZW5lTG9hZGVyLkxvYWRBc3luY1xuICAgICAqIEBwYXJhbSByb290VXJsIGEgc3RyaW5nIHRoYXQgZGVmaW5lcyB0aGUgcm9vdCB1cmwgZm9yIHRoZSBzY2VuZSBhbmQgcmVzb3VyY2VzIG9yIHRoZSBjb25jYXRlbmF0aW9uIG9mIHJvb3RVUkwgYW5kIGZpbGVuYW1lXG4gICAgICogQHBhcmFtIHNjZW5lRmlsZW5hbWUgYSBzdHJpbmcgdGhhdCBkZWZpbmVzIHRoZSBuYW1lIG9mIHRoZSBzY2VuZSBmaWxlIG9yIHN0YXJ0cyB3aXRoIFwiZGF0YTpcIiBmb2xsb3dpbmcgYnkgdGhlIHN0cmluZ2lmaWVkIHZlcnNpb24gb2YgdGhlIHNjZW5lIG9yIGEgRmlsZSBvYmplY3QgKGRlZmF1bHQ6IGVtcHR5IHN0cmluZylcbiAgICAgKi9cbiAgICBwdWJsaWMgTG9hZEFzeW5jKFxuICAgICAgICByb290VXJsOiBzdHJpbmcsXG4gICAgICAgIHNjZW5lRmlsZW5hbWU/OiBzdHJpbmcgfCBGaWxlLFxuICAgICk6IFByb21pc2U8U2NlbmU+IHtcbiAgICAgICAgcmV0dXJuIFNjZW5lTG9hZGVyLkxvYWRBc3luYyhyb290VXJsLCBzY2VuZUZpbGVuYW1lLCB0aGlzLmVuZ2luZSk7XG4gICAgfVxuXG4gICAgLy8gR0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyXG4gICAgcHVibGljIG9uTG9hZFJlYWR5KCkge1xuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5fb25Mb2FkQ29tcGxldGVDYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGYoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB1cCBmb3IgdGltZSB1cGRhdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHNldHVwT2JzZXJ2YWJsZSgpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5vbkJlZm9yZVJlbmRlck9ic2VydmFibGUuYWRkKFxuICAgICAgICAgICAgKGV2ZW50RGF0YTogU2NlbmUsIGV2ZW50U3RhdGU6IEV2ZW50U3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVSZW5kZXJGdW5jKGV2ZW50RGF0YSwgZXZlbnRTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIC8vIENhbWVyYVxuICAgICAgICB0aGlzLnNjZW5lLm9uQmVmb3JlUmVuZGVyT2JzZXJ2YWJsZS5hZGQoXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMuX2NhbWVyYU9uQmVmb3JlUmVuZGVyRnVuYylcbiAgICAgICAgICAgICAgICAgICAgZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIC8vIFVwZGF0ZSBzZWNvbmRhcnkgYW5pbWF0aW9uXG4gICAgICAgIHRoaXMuc2NlbmUub25BZnRlclJlbmRlck9ic2VydmFibGUuYWRkKFxuICAgICAgICAgICAgKGV2ZW50RGF0YTogU2NlbmUsIGV2ZW50U3RhdGU6IEV2ZW50U3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hZnRlclJlbmRlckZ1bmMoZXZlbnREYXRhLCBldmVudFN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGVuYWJsZVJlc2l6ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUuZ2V0UmVuZGVyaW5nQ2FudmFzKCkub25yZXNpemUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5yZXNpemUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBTaGFkb3dHZW5lcmF0b3Ioc2hhZG93R2VuZXJhdG9yOiBhbnkpIHtcbiAgICAgICAgc2hhZG93R2VuZXJhdG9yLnVzZVBlcmNlbnRhZ2VDbG9zZXJGaWx0ZXJpbmcgPSB0cnVlO1xuICAgICAgICBzaGFkb3dHZW5lcmF0b3IuZmlsdGVyaW5nUXVhbGl0eSA9IFNoYWRvd0dlbmVyYXRvci5RVUFMSVRZX0hJR0g7XG4gICAgfVxuXG4gICAgLy8gVE9ETyBVbnJlZ2lzdGVyXG4gICAgcHJpdmF0ZSByZWdpc3RlclZybUV4dGVuc2lvbigpIHtcbiAgICAgICAgLy8g44Ot44O844OA44O844Gr55m76Yyy44GZ44KLXG4gICAgICAgIEdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oVlJNTG9hZGVyRXh0ZW5zaW9uLk5BTUUsIChsb2FkZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVlJNTG9hZGVyRXh0ZW5zaW9uKGxvYWRlciwgdGhpcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJWcm1QbHVnaW4oKSB7XG4gICAgICAgIGlmIChTY2VuZUxvYWRlciAmJiBTY2VuZUxvYWRlci5HZXRQbHVnaW5Gb3JFeHRlbnNpb24oJy52cm0nKS5uYW1lID09PSAnYmFieWxvbi5qcycpIHtcbiAgICAgICAgICAgIFNjZW5lTG9hZGVyLlJlZ2lzdGVyUGx1Z2luKHRoaXMuX3ZybUZpbGVMb2FkZXIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByaXZhdGUgc2V0dXBSZW5kZXJpbmdQaXBlbGluZSgpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuc2FtcGxlcyA9IDQ7XG4gICAgICAgIHRoaXMuX3JlbmRlcmluZ1BpcGVsaW5lLmRlcHRoT2ZGaWVsZEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yZW5kZXJpbmdQaXBlbGluZS5kZXB0aE9mRmllbGRCbHVyTGV2ZWwgPSBEZXB0aE9mRmllbGRFZmZlY3RCbHVyTGV2ZWwuTWVkaXVtO1xuICAgICAgICB0aGlzLl9yZW5kZXJpbmdQaXBlbGluZS5kZXB0aE9mRmllbGQuZm9jdXNEaXN0YW5jZSAgPSAyMDAwOyAvLyBkaXN0YW5jZSBvZiB0aGUgY3VycmVudCBmb2N1cyBwb2ludCBmcm9tIHRoZSBjYW1lcmEgaW4gbWlsbGltZXRlcnMgY29uc2lkZXJpbmcgMSBzY2VuZSB1bml0IGlzIDEgbWV0ZXJcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuZGVwdGhPZkZpZWxkLmZvY2FsTGVuZ3RoICA9IDEwOyAvLyBmb2NhbCBsZW5ndGggb2YgdGhlIGNhbWVyYSBpbiBtaWxsaW1ldGVyc1xuICAgICAgICB0aGlzLl9yZW5kZXJpbmdQaXBlbGluZS5kZXB0aE9mRmllbGQuZlN0b3AgID0gMS40OyAvLyBha2EgRiBudW1iZXIgb2YgdGhlIGNhbWVyYSBkZWZpbmVkIGluIHN0b3BzIGFzIGl0IHdvdWxkIGJlIG9uIGEgcGh5c2ljYWwgZGV2aWNlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBWM0RDb3JlO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcIm1haW5cIjogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rdjNkX2NvcmVcIl0gPSBzZWxmW1wid2VicGFja0NodW5rdjNkX2NvcmVcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFtcImJhYnlsb25qc1wiXSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC10ZXN0LnRzXCIpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iLCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=