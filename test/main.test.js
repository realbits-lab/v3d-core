(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["v3d-core"] = factory();
	else
		root["v3d-core"] = factory();
})(self, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/babylon-mtoon-material/dist/index.module.js":
/*!******************************************************************!*\
  !*** ./node_modules/babylon-mtoon-material/dist/index.module.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

!function(e,i){ true?module.exports=i(__webpack_require__(/*! @babylonjs/core/Misc/decorators */ "./node_modules/@babylonjs/core/Misc/decorators.js"),__webpack_require__(/*! @babylonjs/core/Misc/smartArray */ "./node_modules/@babylonjs/core/Misc/smartArray.js"),__webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js"),__webpack_require__(/*! @babylonjs/core/Maths/math.vector */ "./node_modules/@babylonjs/core/Maths/math.vector.js"),__webpack_require__(/*! @babylonjs/core/Maths/math.color */ "./node_modules/@babylonjs/core/Maths/math.color.js"),__webpack_require__(/*! @babylonjs/core/Buffers/buffer */ "./node_modules/@babylonjs/core/Buffers/buffer.js"),__webpack_require__(/*! @babylonjs/core/Materials/imageProcessingConfiguration */ "./node_modules/@babylonjs/core/Materials/imageProcessingConfiguration.js"),__webpack_require__(/*! @babylonjs/core/Materials/material */ "./node_modules/@babylonjs/core/Materials/material.js"),__webpack_require__(/*! @babylonjs/core/Materials/pushMaterial */ "./node_modules/@babylonjs/core/Materials/pushMaterial.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialHelper */ "./node_modules/@babylonjs/core/Materials/materialHelper.js"),__webpack_require__(/*! @babylonjs/core/Engines/constants */ "./node_modules/@babylonjs/core/Engines/constants.js"),__webpack_require__(/*! @babylonjs/core/Materials/effectFallbacks */ "./node_modules/@babylonjs/core/Materials/effectFallbacks.js"),__webpack_require__(/*! @babylonjs/core/Materials/effect */ "./node_modules/@babylonjs/core/Materials/effect.js"),__webpack_require__(/*! @babylonjs/core/Materials/material.detailMapConfiguration */ "./node_modules/@babylonjs/core/Materials/material.detailMapConfiguration.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialPluginEvent */ "./node_modules/@babylonjs/core/Materials/materialPluginEvent.js"),__webpack_require__(/*! @babylonjs/core/Misc/iInspectable */ "./node_modules/@babylonjs/core/Misc/iInspectable.js"),__webpack_require__(/*! @babylonjs/core/sceneComponent */ "./node_modules/@babylonjs/core/sceneComponent.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialDefines */ "./node_modules/@babylonjs/core/Materials/materialDefines.js")):0}(self,((e,i,n,t,o,a,r,s,l,d,h,f,u,m,c,p,g,_)=>(()=>{"use strict";var A={908:e=>{e.exports=a},556:e=>{e.exports=h},272:e=>{e.exports=u},55:e=>{e.exports=f},677:e=>{e.exports=r},66:e=>{e.exports=s},824:e=>{e.exports=m},713:e=>{e.exports=_},221:e=>{e.exports=d},628:e=>{e.exports=c},721:e=>{e.exports=l},548:e=>{e.exports=o},694:e=>{e.exports=t},388:i=>{i.exports=e},812:e=>{e.exports=p},474:e=>{e.exports=i},538:e=>{e.exports=n},667:e=>{e.exports=g}},I={};function v(e){var i=I[e];if(void 0!==i)return i.exports;var n=I[e]={exports:{}};return A[e](n,n.exports,v),n.exports}v.d=(e,i)=>{for(var n in i)v.o(i,n)&&!v.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},v.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),v.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var M={};return(()=>{function e(e,i,n,t){var o,a=arguments.length,r=a<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,n,t);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(i,n,r):o(i,n))||r);return a>3&&r&&Object.defineProperty(i,n,r),r}v.r(M),v.d(M,{CullMode:()=>L,DebugMode:()=>T,MToonMaterial:()=>x,OutlineColorMode:()=>N,OutlineWidthMode:()=>D}),Object.create,Object.create;var i=v(388),n=v(474),t=v(538),o=v(694),a=v(548),r=v(908),s=v(677),l=v(66),d=v(721),h=v(221),f=v(556),u=v(55),m=v(272),c=v(824),p=v(628),g=v(812),_=v(667);class A{constructor(e,i){this.scene=e,this.material=i,this.name=`MToonOutline_${i.name}_${A.rendererId++}`,this.scene._addComponent(this),this._engine=this.scene.getEngine(),this._passIdForDrawWrapper=[];for(let e=0;e<1;++e)this._passIdForDrawWrapper[e]=this._engine.createRenderPassId(`Outline Renderer (${e})`)}register(){this.scene._afterRenderingMeshStage.registerStep(_.SceneComponentConstants.STEP_AFTERRENDERINGMESH_OUTLINE,this,this._afterRenderingMesh)}rebuild(){}dispose(){for(let e=0;e<this._passIdForDrawWrapper.length;++e)this._engine.releaseRenderPassId(this._passIdForDrawWrapper[e])}render(e,i,n){n=null!=n?n:this._passIdForDrawWrapper[0];const t=this.scene,o=e.effect;if(!o||!o.isReady()||!this.scene.activeCamera)return;const a=e._getDrawWrapper(n,!0);if(!a)return;if(a.setEffect(o),!a.effect||!a.effect.isReady())return;const r=e.getMesh(),s=r._internalAbstractMeshDataInfo._actAsRegularMesh?r:null,l=e.getRenderingMesh(),d=s||l;t.activeCamera&&(this.material.applyOutlineCullMode(),this.material.enableOutlineRender(),this._engine.enableEffect(a),this.isHardwareInstancedRendering(e,i)||l._bind(e,o,this.material.fillMode),this.material._preBind(o),l._processRendering(d,e,o,this.material.fillMode,i,this.isHardwareInstancedRendering(e,i),((i,n,t)=>{t&&t.bindForSubMesh(n,d,e)}),this.material),this.material.restoreOutlineCullMode(),this.material.disaableOutlineRender())}_afterRenderingMesh(e,i,n){if(!this.willRender(i))return;const t=this._engine.cullBackFaces;this._engine.cullBackFaces=!1,this.render(i,n,this._passIdForDrawWrapper[0]),this._engine.cullBackFaces=t}isHardwareInstancedRendering(e,i){return!!this._engine.getCaps().instancedArrays&&null!==i.visibleInstances[e._id]&&void 0!==i.visibleInstances[e._id]&&e.getRenderingMesh().hasThinInstances}willRender(e){const i=e.getMaterial();return!(!i||"MToonMaterial"!==i.getClassName()||i.getOutlineRendererName()!==this.name)}}A.rendererId=0;var I=v(713);class E extends I.MaterialDefines{constructor(e){super(e),this.CUSTOMUSERLIGHTING=!0,this.MTOON_OUTLINE_WIDTH_WORLD=!1,this.MTOON_OUTLINE_WIDTH_SCREEN=!1,this.MTOON_OUTLINE_COLOR_FIXED=!1,this.MTOON_OUTLINE_COLOR_MIXED=!1,this.MTOON_DEBUG_NORMAL=!1,this.MTOON_DEBUG_LITSHADERRATE=!1,this.SHADE=!1,this.SHADEDIRECTUV=0,this.RECEIVE_SHADOW=!1,this.RECEIVE_SHADOWDIRECTUV=0,this.SHADING_GRADE=!1,this.SHADING_GRADEDIRECTUV=0,this.RIM=!1,this.RIMDIRECTUV=0,this.MATCAP=!1,this.MATCAPDIRECTUV=0,this.OUTLINE_WIDTH=!1,this.OUTLINE_WIDTHDIRECTUV=0,this.UV_ANIMATION_MASK=!1,this.UV_ANIMATION_MASKDIRECTUV=0,this.MAINUV1=!1,this.MAINUV2=!1,this.MAINUV3=!1,this.MAINUV4=!1,this.MAINUV5=!1,this.MAINUV6=!1,this.DIFFUSE=!1,this.DIFFUSEDIRECTUV=0,this.BAKED_VERTEX_ANIMATION_TEXTURE=!1,this.EMISSIVE=!1,this.EMISSIVEDIRECTUV=0,this.BUMP=!1,this.BUMPDIRECTUV=0,this.PARALLAX=!1,this.PARALLAXOCCLUSION=!1,this.CLIPPLANE=!1,this.CLIPPLANE2=!1,this.CLIPPLANE3=!1,this.CLIPPLANE4=!1,this.CLIPPLANE5=!1,this.CLIPPLANE6=!1,this.ALPHATEST=!1,this.DEPTHPREPASS=!1,this.ALPHAFROMDIFFUSE=!1,this.POINTSIZE=!1,this.FOG=!1,this.NORMAL=!1,this.UV1=!1,this.UV2=!1,this.UV3=!1,this.UV4=!1,this.UV5=!1,this.UV6=!1,this.VERTEXCOLOR=!1,this.VERTEXALPHA=!1,this.NUM_BONE_INFLUENCERS=0,this.BonesPerMesh=0,this.BONETEXTURE=!1,this.BONES_VELOCITY_ENABLED=!1,this.INSTANCES=!1,this.THIN_INSTANCES=!1,this.OBJECTSPACE_NORMALMAP=!1,this.LOGARITHMICDEPTH=!1,this.TWOSIDEDLIGHTING=!1,this.SHADOWFLOAT=!1,this.MORPHTARGETS=!1,this.MORPHTARGETS_NORMAL=!1,this.MORPHTARGETS_TANGENT=!1,this.MORPHTARGETS_UV=!1,this.NUM_MORPH_INFLUENCERS=0,this.MORPHTARGETS_TEXTURE=!1,this.NONUNIFORMSCALING=!1,this.PREMULTIPLYALPHA=!1,this.ALPHATEST_AFTERALLALPHACOMPUTATIONS=!1,this.ALPHABLEND=!0,this.PREPASS=!1,this.PREPASS_IRRADIANCE=!1,this.PREPASS_IRRADIANCE_INDEX=-1,this.PREPASS_ALBEDO_SQRT=!1,this.PREPASS_ALBEDO_SQRT_INDEX=-1,this.PREPASS_DEPTH=!1,this.PREPASS_DEPTH_INDEX=-1,this.PREPASS_NORMAL=!1,this.PREPASS_NORMAL_INDEX=-1,this.PREPASS_POSITION=!1,this.PREPASS_POSITION_INDEX=-1,this.PREPASS_VELOCITY=!1,this.PREPASS_VELOCITY_INDEX=-1,this.PREPASS_REFLECTIVITY=!1,this.PREPASS_REFLECTIVITY_INDEX=-1,this.SCENE_MRT_COUNT=0,this.IMAGEPROCESSING=!1,this.VIGNETTE=!1,this.VIGNETTEBLENDMODEMULTIPLY=!1,this.VIGNETTEBLENDMODEOPAQUE=!1,this.TONEMAPPING=!1,this.TONEMAPPING_ACES=!1,this.CONTRAST=!1,this.COLORCURVES=!1,this.COLORGRADING=!1,this.COLORGRADING3D=!1,this.SAMPLER3DGREENDEPTH=!1,this.SAMPLER3DBGRMAP=!1,this.IMAGEPROCESSINGPOSTPROCESS=!1,this.SKIPFINALCOLORCLAMP=!1,this.MULTIVIEW=!1,this.ORDER_INDEPENDENT_TRANSPARENCY=!1,this.ORDER_INDEPENDENT_TRANSPARENCY_16BITS=!1,this.IS_REFLECTION_LINEAR=!1,this.IS_REFRACTION_LINEAR=!1,this.EXPOSURE=!1,this.FLIP_U=!1,this.FLIP_V=!1,this.rebuild()}setReflectionMode(e){throw new Error("This material cannot use `setReflectionMode`")}}const S={effect:null,subMesh:null};var T,N,D,L;!function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.LitShadeRate=2]="LitShadeRate"}(T||(T={})),function(e){e[e.FixedColor=0]="FixedColor",e[e.MixedLighting=1]="MixedLighting"}(N||(N={})),function(e){e[e.None=0]="None",e[e.WorldCorrdinates=1]="WorldCorrdinates",e[e.ScreenCoordinates=2]="ScreenCoordinates"}(D||(D={})),function(e){e[e.Off=0]="Off",e[e.Front=1]="Front",e[e.Back=2]="Back"}(L||(L={}));class x extends d.PushMaterial{constructor(e,i){super(e,i),this._diffuseTexture=null,this.diffuseTexture=null,this._emissiveTexture=null,this.emissiveTexture=null,this._bumpTexture=null,this.bumpTexture=null,this._shadeTexture=null,this.shadeTexture=null,this._receiveShadowTexture=null,this.receiveShadowTexture=null,this._shadingGradeTexture=null,this.shadingGradeTexture=null,this._rimTexture=null,this.rimTexture=null,this._matCapTexture=null,this.matCapTexture=null,this._outlineWidthTexture=null,this.outlineWidthTexture=null,this._uvAnimationMaskTexture=null,this.uvAnimationMaskTexture=null,this.diffuseColor=new a.Color3(1,1,1),this.ambientColor=new a.Color3(0,0,0),this.emissiveColor=new a.Color3(0,0,0),this.shadeColor=new a.Color3(.97,.81,.86),this.rimColor=new a.Color3(0,0,0),this.outlineColor=new a.Color3(0,0,0),this.useEmissiveAsIllumination=!1,this.linkEmissiveWithDiffuse=!1,this.useReflectionOverAlpha=!1,this._disableLighting=!1,this.useObjectSpaceNormalMap=!1,this.useParallax=!1,this.useParallaxOcclusion=!1,this.specularSupported=!1,this.useLightmapAsShadowmap=!1,this.useVertexColor=!1,this.useBones=!0,this.useMorphTargets=!0,this.useVertexAlpha=!1,this.useBakedVertexAnimation=!1,this.alphaCutOff=.4,this._useAlphaFromDiffuseTexture=!0,this._maxSimultaneousLights=4,this._invertNormalMapX=!0,this._invertNormalMapY=!0,this._twoSidedLighting=!1,this._renderTargets=new n.SmartArray(16),this._worldViewProjectionMatrix=o.Matrix.Zero(),this._globalAmbientColor=new a.Color3(0,0,0),this._cacheHasRenderTargetTextures=!1,this._bumpScale=1,this._receiveShadowRate=1,this._shadingGradeRate=1,this._shadeShift=0,this._shadeToony=.9,this._lightColorAttenuation=0,this._indirectLightIntensity=.1,this._rimLightingMix=0,this._rimFresnelPower=1,this._rimLift=0,this._outlineWidth=.5,this._outlineScaledMaxDistance=1,this._outlineLightingMix=1,this._uvAnimationScrollX=0,this._uvAnimationScrollY=0,this._uvAnimationRotation=0,this._alphaTest=!1,this._alphaBlend=!1,this._debugMode=T.None,this.debugMode=T.None,this._outlineWidthMode=D.None,this.isOutline=0,this.outlineColorMode=N.MixedLighting,this._cullMode=L.Back,this._outlineCullMode=L.Front,this.outlineCullMode=L.Front,this.storedCullMode=L.Back,this.flipU=!1,this.flipV=!1,this.detailMap=new c.DetailMapConfiguration(this),this._attachImageProcessingConfiguration(null),this.getRenderTargetTextures=()=>(this._renderTargets.reset(),this._eventInfo.renderTargets=this._renderTargets,this._callbackPluginEventFillRenderTargetTextures(this._eventInfo),this._renderTargets),m.Effect.IncludesShadersStore.mtoonUboDeclaration||(m.Effect.IncludesShadersStore.mtoonUboDeclaration="// it will be replaced to UboDeclaration(WebGL2) or VertexDeclaration(WebGL1).\n\nlayout(std140, column_major) uniform;\n\nuniform Material\n{\n    // Color & Texture\n    vec4 vDiffuseColor;\n    vec2 vDiffuseInfos;\n    mat4 diffuseMatrix;\n    vec4 vEmissiveColor;\n    vec2 vEmissiveInfos;\n    mat4 emissiveMatrix;\n    vec3 vBumpInfos;\n    mat4 bumpMatrix;\n    vec3 vShadeColor;\n    vec2 vShadeInfos;\n    mat4 shadeMatrix;\n    vec2 vReceiveShadowInfos;\n    mat4 receiveShadowMatrix;\n    vec2 vShadingGradeInfos;\n    mat4 shadingGradeMatrix;\n    vec3 vRimColor;\n    vec2 vRimInfos;\n    mat4 rimMatrix;\n    vec2 vMatCapInfos;\n    mat4 matCapMatrix;\n    vec4 vOutlineColor;\n    vec2 vOutlineWidthInfos;\n    mat4 outlineWidthMatrix;\n    vec2 vUvAnimationMaskInfos;\n    mat4 uvAnimationMaskMatrix;\n\n    // babylon specific\n    vec2 vTangentSpaceParams;\n    float pointSize;\n\n    // MToon params\n    float shadingGradeRate;\n    float receiveShadowRate;\n    float shadeShift;\n    float shadeToony;\n    float lightColorAttenuation;\n    float indirectLightIntensity;\n    float rimLightingMix;\n    float rimFresnelPower;\n    float rimLift;\n    float outlineWidth;\n    float outlineScaledMaxDistance;\n    float outlineLightingMix;\n    float uvAnimationScrollX;\n    float uvAnimationScrollY;\n    float uvAnimationRotation;\n\n    vec3 vEyeUp;\n    float alphaCutOff;\n    vec3 vAmbientColor;\n    float aspect;\n    float isOutline;\n    vec4 time;\n};\n\n// babylon specific\n#include<sceneUboDeclaration>\n#include<meshUboDeclaration>\n",m.Effect.IncludesShadersStore.mtoonVertexDeclaration="// Uniforms\nuniform mat4 viewProjection;\nuniform mat4 view;\nuniform mat4 projection;\nuniform float outlineWidth;\nuniform float outlineScaledMaxDistance;\nuniform float outlineLightingMix;\nuniform float isOutline;\nuniform float aspect;\n\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n\n#ifdef SHADE\nuniform vec2 vShadeInfos;\nuniform mat4 shadeMatrix;\n#endif\n\n#ifdef RECEIVE_SHADOW\nuniform vec2 vReceiveShadowInfos;\nuniform mat4 receiveShadowMatrix;\n#endif\n\n#ifdef SHADING_GRADE\nuniform vec2 vShadingGradeInfos;\nuniform mat4 shadingGradeMatrix;\n#endif\n\n#ifdef RIM\nuniform vec2 vRimInfos;\nuniform mat4 rimMatrix;\n#endif\n\n#ifdef MATCAP\nuniform vec2 vMatCapInfos;\nuniform mat4 matCapMatrix;\n#endif\n\n#ifdef OUTLINE_WIDTH\nuniform vec2 vOutlineWidthInfos;\nuniform mat4 outlineWidthMatrix;\n#endif\n\n#ifdef UV_ANIMATION_MASK\nuniform vec2 vUvAnimationMaskInfos;\nuniform mat4 uvAnimationMaskMatrix;\n#endif\n\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n",m.Effect.IncludesShadersStore.mtoonFragmentDeclaration="uniform vec4 vEyePosition;\n\n// Colors\nuniform vec4 vDiffuseColor;\nuniform vec3 vEmissiveColor;\nuniform vec3 vShadeColor;\nuniform vec3 vRimColor;\nuniform vec4 vOutlineColor;\nuniform vec3 vAmbientColor;\n\nuniform vec3 vEyeUp;\nuniform float aspect;\nuniform float alphaCutOff;\nuniform float visibility;\nuniform float isOutline;\nuniform vec4 time;\n\n// Samplers\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n\n#ifdef SHADE\nuniform vec2 vShadeInfos;\n#endif\n\n#ifdef RECEIVE_SHADOW\nuniform vec2 vReceiveShadowInfos;\n#endif\n\n#ifdef SHADING_GRADE\nuniform vec2 vShadingGradeInfos;\n#endif\n\n#ifdef RIM\nuniform vec2 vRimInfos;\n#endif\n\n#ifdef MATCAP\nuniform vec2 vMatCapInfos;\n#endif\n\n#ifdef OUTLINE_WIDTH\nuniform vec2 vOutlineWidthInfos;\n#endif\n\n#ifdef UV_ANIMATION_MASK\nuniform vec2 vUvAnimationMaskInfos;\n#endif\n\n// MToon params\nuniform float shadingGradeRate;\nuniform float receiveShadowRate;\nuniform float shadeShift;\nuniform float shadeToony;\nuniform float lightColorAttenuation;\nuniform float indirectLightIntensity;\nuniform float rimLightingMix;\nuniform float rimFresnelPower;\nuniform float rimLift;\nuniform float outlineWidth;\nuniform float outlineScaledMaxDistance;\nuniform float outlineLightingMix;\nuniform float uvAnimationScrollX;\nuniform float uvAnimationScrollY;\nuniform float uvAnimationRotation;\n",m.Effect.IncludesShadersStore.mtoonFragmentFunctions="\n/**\n* Compute Directional or Point light direction\n*/\nvec3 computeLightDirection(vec4 lightData) {\n    return normalize(mix(lightData.xyz - vPositionW, -lightData.xyz, lightData.w));\n}\n\n/**\n* Compute Spot Light direction\n*/\nvec3 computeSpotLightDirection(vec4 lightData) {\n    return normalize(lightData.xyz - vPositionW);\n}\n\n/**\n* Compute Hemispheric light direction\n*/\nvec3 computeHemisphericLightDirection(vec4 lightData, vec3 vNormal) {\n    return normalize(lightData.xyz);\n}\n\n/**\n* Compute MToon diffuse lighting\n*/\nvec4 computeMToonDiffuseLighting(vec3 worldView, vec3 worldNormal, vec2 mainUv, vec3 lightDirection, vec4 lightDiffuse, float shadowAttenuation) {\n    float _receiveShadow = receiveShadowRate;\n#ifdef RECEIVE_SHADOW\n    _receiveShadow = _receiveShadow * texture2D(receiveShadowSampler, mainUv).r * vReceiveShadowInfos.y;\n#endif\n\n    float _shadingGrade = 0.0;\n#ifdef SHADING_GRADE\n    _shadingGrade = 1.0 - texture2D(shadingGradeSampler, mainUv).r * vShadingGradeInfos.y;\n#endif\n    _shadingGrade = 1.0 - shadingGradeRate * _shadingGrade;\n\n    // Lighting\n    vec3 _lightColor = lightDiffuse.rgb * step(0.5, length(lightDirection)); // length(lightDir) is zero if directional light is disabled.\n    float _dotNL = dot(lightDirection, worldNormal);\n#ifdef MTOON_FORWARD_ADD\n    float _lightAttenuation = 1.0;\n#else\n    float _lightAttenuation = shadowAttenuation * mix(1.0, shadowAttenuation, _receiveShadow);\n#endif\n\n    // lighting intensity\n    float _lightIntensity = _dotNL;\n    _lightIntensity = _lightIntensity * 0.5 + 0.5; // from [-1, +1] to [0, 1]\n    _lightIntensity = _lightIntensity * _lightAttenuation; // receive shadow\n    _lightIntensity = _lightIntensity * _shadingGrade; // darker\n    _lightIntensity = _lightIntensity * 2.0 - 1.0; // from [0, 1] to [-1, +1]\n    // tooned. mapping from [minIntensityThreshold, maxIntensityThreshold] to [0, 1]\n    float _maxIntensityThreshold = mix(1.0, shadeShift, shadeToony);\n    float _minIntensityThreshold = shadeShift;\n    _lightIntensity = clamp((_lightIntensity - _minIntensityThreshold) / max(EPS_COL, (_maxIntensityThreshold - _minIntensityThreshold)), 0.0, 1.0);\n\n    // Albedo color\n    vec3 _shade = vShadeColor;\n#ifdef SHADE\n    _shade = _shade * texture2D(shadeSampler, mainUv).rgb * vShadeInfos.y;\n#endif\n\n    vec4 _lit = vDiffuseColor;\n#ifdef DIFFUSE\n    _lit = _lit * texture2D(diffuseSampler, mainUv) * vDiffuseInfos.y;\n#endif\n    vec3 _col = mix(_shade.rgb, _lit.rgb, _lightIntensity);\n\n    // Direct Light\n    vec3 _lighting = _lightColor;\n    _lighting = mix(_lighting, vec3(max(EPS_COL, max(_lighting.x, max(_lighting.y, _lighting.z)))), lightColorAttenuation); // color atten\n#ifdef MTOON_FORWARD_ADD\n    _lighting *= 0.5; // darken if additional light\n    _lighting *= min(0, dotNL) + 1.0; // darken dotNL < 0 area by using half lambert\n    _lighting *= shadowAttenuation; // darken if receiving shadow\n#else\n    // base light does not darken.\n#endif\n    _col *= _lighting;\n\n    // Indirect Light\n#ifdef MTOON_FORWARD_ADD\n#else\n    vec3 _toonedGI = vAmbientColor.rgb; // TODO: GI\n    vec3 _indirectLighting = mix(_toonedGI, vAmbientColor.rgb, indirectLightIntensity);\n    _indirectLighting = mix(_indirectLighting, vec3(max(EPS_COL, max(_indirectLighting.x, max(_indirectLighting.y, _indirectLighting.z)))), lightColorAttenuation); // color atten\n    _col += _indirectLighting * _lit.rgb;\n\n    _col = min(_col.rgb, _lit.rgb); // comment out if you want to PBR absolutely.\n#endif\n\n    // parametric rim lighting\n#ifdef MTOON_FORWARD_ADD\n    vec3 _staticRimLighting = vec3(0.0);\n    vec3 _mixedRimLighting = _lighting;\n#else\n    vec3 _staticRimLighting = vec3(1.0);\n    vec3 _mixedRimLighting = _lighting + _indirectLighting;\n#endif\n    vec3 _rimLighting = mix(_staticRimLighting, _mixedRimLighting, rimLightingMix);\n    vec3 _rimColor = vRimColor.rgb;\n#ifdef RIM\n    _rimColor = _rimColor * texture2D(rimSampler, vRimUV + mainUv).rgb * vRimInfos.y;\n#endif\n    vec3 _rim = pow(clamp(1.0 - dot(worldNormal, worldView) + rimLift, 0.0, 1.0), rimFresnelPower) * _rimColor.rgb;\n    _col += mix(_rim * _rimLighting, vec3(0.0), isOutline);\n\n    // additive matcap\n#ifdef MTOON_FORWARD_ADD\n#else\n#ifdef MATCAP\n    vec3 _worldViewUp = normalize(vEyeUp - worldView * dot(worldView, vEyeUp));\n    vec3 _worldViewRight = normalize(cross(worldView, _worldViewUp));\n    vec2 _matCapUv = vec2(dot(_worldViewRight, worldNormal), dot(_worldViewUp, worldNormal)) * 0.5 + 0.5;\n    // uv.y is reversed\n    _matCapUv.y = (1.0 - _matCapUv.y);\n    vec3 _matCapLighting = texture2D(matCapSampler, _matCapUv).rgb * vMatCapInfos.y;\n    _col += mix(_matCapLighting, vec3(0.0), isOutline);\n#endif\n#endif\n\n    // Emission\n#ifdef MTOON_FORWARD_ADD\n#else\n    vec3 _emission = vEmissiveColor.rgb;\n#ifdef EMISSIVE\n    _emission *= texture2D(emissiveSampler, mainUv).rgb * vEmissiveInfos.y;\n#endif\n    _col += mix(_emission, vec3(0.0), isOutline);\n#endif\n\n    float _alpha = 1.0;\n\n#if defined(ALPHABLEND) || defined(ALPHATEST)\n    _alpha = mix(_lit.a, _lit.a * vOutlineColor.a, isOutline);\n#endif\n\n    // outline\n#ifdef MTOON_OUTLINE_COLOR_FIXED\n    _col = mix(_col, vOutlineColor.rgb, isOutline);\n#elif defined(MTOON_OUTLINE_COLOR_MIXED)\n    _col = mix(_col, vOutlineColor.rgb * mix(vec3(1.0), _col, outlineLightingMix), isOutline);\n#else\n#endif\n\n    // debug\n#ifdef MTOON_DEBUG_NORMAL\n    #ifdef MTOON_FORWARD_ADD\n        return vec4(0.0);\n    #else\n        return vec4(worldNormal * 0.5 + 0.5, _lit.a);\n    #endif\n#elif defined(MTOON_DEBUG_LITSHADERATE)\n    #ifdef MTOON_FORWARD_ADD\n        return vec4(0.0);\n    #else\n        return vec4(_lightIntensity, _lit.a);\n    #endif\n#endif\n\n    return vec4(_col, _alpha);\n}\n",m.Effect.IncludesShadersStore.mtoonLightFragment="#ifdef LIGHT{X}\n    #if defined(SHADOWONLY) || defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X}) && defined(LIGHTMAPNOSPECULAR{X})\n        //No light calculation\n    #else\n        #ifdef PBR\n            // Compute Pre Lighting infos\n            #ifdef SPOTLIGHT{X}\n                preInfo = computePointAndSpotPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(POINTLIGHT{X})\n                preInfo = computePointAndSpotPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(HEMILIGHT{X})\n                preInfo = computeHemisphericPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(DIRLIGHT{X})\n                preInfo = computeDirectionalPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #endif\n\n            preInfo.NdotV = NdotV;\n\n            // Compute Attenuation infos\n            #ifdef SPOTLIGHT{X}\n                #ifdef LIGHT_FALLOFF_GLTF{X}\n                    preInfo.attenuation = computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared, light{X}.vLightFalloff.y);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_GLTF(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightFalloff.z, light{X}.vLightFalloff.w);\n                #elif defined(LIGHT_FALLOFF_PHYSICAL{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_Physical(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w);\n                #elif defined(LIGHT_FALLOFF_STANDARD{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Standard(preInfo.lightOffset, light{X}.vLightFalloff.x);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_Standard(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w, light{X}.vLightData.w);\n                #else\n                    preInfo.attenuation = computeDistanceLightFalloff(preInfo.lightOffset, preInfo.lightDistanceSquared, light{X}.vLightFalloff.x, light{X}.vLightFalloff.y);\n                    preInfo.attenuation *= computeDirectionalLightFalloff(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w, light{X}.vLightData.w, light{X}.vLightFalloff.z, light{X}.vLightFalloff.w);\n                #endif\n            #elif defined(POINTLIGHT{X})\n                #ifdef LIGHT_FALLOFF_GLTF{X}\n                    preInfo.attenuation = computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared, light{X}.vLightFalloff.y);\n                #elif defined(LIGHT_FALLOFF_PHYSICAL{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n                #elif defined(LIGHT_FALLOFF_STANDARD{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Standard(preInfo.lightOffset, light{X}.vLightFalloff.x);\n                #else\n                    preInfo.attenuation = computeDistanceLightFalloff(preInfo.lightOffset, preInfo.lightDistanceSquared, light{X}.vLightFalloff.x, light{X}.vLightFalloff.y);\n                #endif\n            #else\n                preInfo.attenuation = 1.0;\n            #endif\n\n            // Simulates Light radius for diffuse and spec term\n            // clear coat is using a dedicated roughness\n            #ifdef HEMILIGHT{X}\n                preInfo.roughness = roughness;\n            #else\n                preInfo.roughness = adjustRoughnessFromLightProperties(roughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n            #endif\n\n            // Diffuse contribution\n            #ifdef HEMILIGHT{X}\n                info.diffuse = computeHemisphericDiffuseLighting(preInfo, light{X}.vLightDiffuse.rgb, light{X}.vLightGround);\n            #elif defined(SS_TRANSLUCENCY)\n                info.diffuse = computeDiffuseAndTransmittedLighting(preInfo, light{X}.vLightDiffuse.rgb, subSurfaceOut.transmittance);\n            #else\n                info.diffuse = computeDiffuseLighting(preInfo, light{X}.vLightDiffuse.rgb);\n            #endif\n\n            // Specular contribution\n            #ifdef SPECULARTERM\n                #ifdef ANISOTROPIC\n                    info.specular = computeAnisotropicSpecularLighting(preInfo, viewDirectionW, normalW, anisotropicOut.anisotropicTangent, anisotropicOut.anisotropicBitangent, anisotropicOut.anisotropy, clearcoatOut.specularEnvironmentR0, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n                #else\n                    info.specular = computeSpecularLighting(preInfo, normalW, clearcoatOut.specularEnvironmentR0, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n                #endif\n            #endif\n\n            // Sheen contribution\n            #ifdef SHEEN\n                #ifdef SHEEN_LINKWITHALBEDO\n                    // BE Carefull: Sheen intensity is replacing the roughness value.\n                    preInfo.roughness = sheenOut.sheenIntensity;\n                #else\n                    #ifdef HEMILIGHT{X}\n                        preInfo.roughness = sheenOut.sheenRoughness;\n                    #else\n                        preInfo.roughness = adjustRoughnessFromLightProperties(sheenOut.sheenRoughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n                    #endif\n                #endif\n                info.sheen = computeSheenLighting(preInfo, normalW, sheenOut.sheenColor, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n            #endif\n\n            // Clear Coat contribution\n            #ifdef CLEARCOAT\n                // Simulates Light radius\n                #ifdef HEMILIGHT{X}\n                    preInfo.roughness = clearcoatOut.clearCoatRoughness;\n                #else\n                    preInfo.roughness = adjustRoughnessFromLightProperties(clearcoatOut.clearCoatRoughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n                #endif\n\n                info.clearCoat = computeClearCoatLighting(preInfo, clearcoatOut.clearCoatNormalW, clearcoatOut.clearCoatAARoughnessFactors.x, clearcoatOut.clearCoatIntensity, light{X}.vLightDiffuse.rgb);\n\n                #ifdef CLEARCOAT_TINT\n                    // Absorption\n                    absorption = computeClearCoatLightingAbsorption(clearcoatOut.clearCoatNdotVRefract, preInfo.L, clearcoatOut.clearCoatNormalW, clearcoatOut.clearCoatColor, clearcoatOut.clearCoatThickness, clearcoatOut.clearCoatIntensity);\n                    info.diffuse *= absorption;\n                    #ifdef SPECULARTERM\n                        info.specular *= absorption;\n                    #endif\n                #endif\n\n                // Apply energy conservation on diffuse and specular term.\n                info.diffuse *= info.clearCoat.w;\n                #ifdef SPECULARTERM\n                    info.specular *= info.clearCoat.w;\n                #endif\n                #ifdef SHEEN\n                    info.sheen *= info.clearCoat.w;\n                #endif\n            #endif\n        #else\n            #ifdef SPOTLIGHT{X}\n                info = computeSpotLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDirection, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightDiffuse.a, glossiness);\n            #elif defined(HEMILIGHT{X})\n                info = computeHemisphericLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightGround, glossiness);\n            #elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\n                info = computeLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightDiffuse.a, glossiness);\n            #endif\n        #endif\n\n        #ifdef PROJECTEDLIGHTTEXTURE{X}\n            info.diffuse *= computeProjectionTextureDiffuseLighting(projectionLightSampler{X}, textureProjectionMatrix{X});\n        #endif\n    #endif\n\n    #ifdef SHADOW{X}\n        #ifdef SHADOWCSM{X}\n            for (int i = 0; i < SHADOWCSMNUM_CASCADES{X}; i++)\n            {\n                #ifdef SHADOWCSM_RIGHTHANDED{X}\n                    diff{X} = viewFrustumZ{X}[i] + vPositionFromCamera{X}.z;\n                #else\n                    diff{X} = viewFrustumZ{X}[i] - vPositionFromCamera{X}.z;\n                #endif\n                if (diff{X} >= 0.) {\n                    index{X} = i;\n                    break;\n                }\n            }\n\n            #ifdef SHADOWCSMUSESHADOWMAXZ{X}\n            if (index{X} >= 0)\n            #endif\n            {\n                #if defined(SHADOWPCF{X})\n                    #if defined(SHADOWLOWQUALITY{X})\n                        shadow = computeShadowWithCSMPCF1(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #elif defined(SHADOWMEDIUMQUALITY{X})\n                        shadow = computeShadowWithCSMPCF3(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #else\n                        shadow = computeShadowWithCSMPCF5(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #endif\n                #elif defined(SHADOWPCSS{X})\n                    #if defined(SHADOWLOWQUALITY{X})\n                        shadow = computeShadowWithCSMPCSS16(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #elif defined(SHADOWMEDIUMQUALITY{X})\n                        shadow = computeShadowWithCSMPCSS32(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #else\n                        shadow = computeShadowWithCSMPCSS64(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #endif\n                #else\n                    shadow = computeShadowCSM(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                #endif\n\n                #ifdef SHADOWCSMDEBUG{X}\n                    shadowDebug{X} = vec3(shadow) * vCascadeColorsMultiplier{X}[index{X}];\n                #endif\n\n                #ifndef SHADOWCSMNOBLEND{X}\n                    float frustumLength = frustumLengths{X}[index{X}];\n                    float diffRatio = clamp(diff{X} / frustumLength, 0., 1.) * cascadeBlendFactor{X};\n                    if (index{X} < (SHADOWCSMNUM_CASCADES{X} - 1) && diffRatio < 1.)\n                    {\n                        index{X} += 1;\n                        float nextShadow = 0.;\n                        #if defined(SHADOWPCF{X})\n                            #if defined(SHADOWLOWQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCF1(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #elif defined(SHADOWMEDIUMQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCF3(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #else\n                                nextShadow = computeShadowWithCSMPCF5(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #endif\n                        #elif defined(SHADOWPCSS{X})\n                            #if defined(SHADOWLOWQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCSS16(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #elif defined(SHADOWMEDIUMQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCSS32(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #else\n                                nextShadow = computeShadowWithCSMPCSS64(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #endif\n                        #else\n                            nextShadow = computeShadowCSM(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                        #endif\n\n                        shadow = mix(nextShadow, shadow, diffRatio);\n                        #ifdef SHADOWCSMDEBUG{X}\n                            shadowDebug{X} = mix(vec3(nextShadow) * vCascadeColorsMultiplier{X}[index{X}], shadowDebug{X}, diffRatio);\n                        #endif\n                    }\n                #endif\n            }\n        #elif defined(SHADOWCLOSEESM{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithCloseESMCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithCloseESM(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWESM{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithESMCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithESM(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPOISSON{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithPoissonSamplingCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.x, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithPoissonSampling(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPCF{X})\n            #if defined(SHADOWLOWQUALITY{X})\n                shadow = computeShadowWithPCF1(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #elif defined(SHADOWMEDIUMQUALITY{X})\n                shadow = computeShadowWithPCF3(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #else\n                shadow = computeShadowWithPCF5(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPCSS{X})\n            #if defined(SHADOWLOWQUALITY{X})\n                shadow = computeShadowWithPCSS16(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #elif defined(SHADOWMEDIUMQUALITY{X})\n                shadow = computeShadowWithPCSS32(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #else\n                shadow = computeShadowWithPCSS64(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #else\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.depthValues);\n            #else\n                shadow = computeShadow(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #endif\n\n        #ifdef SHADOWONLY\n            #ifndef SHADOWINUSE\n                #define SHADOWINUSE\n            #endif\n            globalShadow += shadow;\n            shadowLightCount += 1.0;\n        #endif\n    #else\n        shadow = 1.;\n    #endif\n\n    #ifndef SHADOWONLY\n        #ifdef CUSTOMUSERLIGHTING\n            // Compute and reflect MToon lighting\n            #ifdef SPOTLIGHT{X}\n                lightDirection = computeSpotLightDirection(light{X}.vLightData);\n            #elif defined(HEMILIGHT{X})\n                lightDirection = computeHemisphericLightDirection(light{X}.vLightData, normalW.xyz);\n            #elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\n                lightDirection = computeLightDirection(light{X}.vLightData);\n            #endif\n            mtoonDiffuse = computeMToonDiffuseLighting(viewDirectionW.xyz, normalW.xyz, mainUv, lightDirection, light{X}.vLightDiffuse.rgba, shadow);\n            diffuseBase += mtoonDiffuse.rgb;\n            alpha = min(alpha, mtoonDiffuse.a);\n            #if defined(ALPHATEST) && ALPHATEST\n                alpha = (alpha - alphaCutOff) / max(fwidth(alpha), EPS_COL) + 0.5; // Alpha to Coverage\n                if (alpha < alphaCutOff) {\n                    discard;\n                }\n                alpha = 1.0; // Discarded, otherwise it should be assumed to have full opacity\n            #else\n                if (alpha - 0.0001 < 0.000) { // Slightly improves rendering with layered transparency\n                    discard;\n                }\n            #endif\n        #elif defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X})\n            diffuseBase += lightmapColor.rgb * shadow;\n            #ifdef SPECULARTERM\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    specularBase += info.specular * shadow * lightmapColor.rgb;\n                #endif\n            #endif\n            #ifdef CLEARCOAT\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    clearCoatBase += info.clearCoat.rgb * shadow * lightmapColor.rgb;\n                #endif\n            #endif\n            #ifdef SHEEN\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    sheenBase += info.sheen.rgb * shadow;\n                #endif\n            #endif\n        #else\n            #ifdef SHADOWCSMDEBUG{X}\n                diffuseBase += info.diffuse * shadowDebug{X};\n            #else\n                diffuseBase += info.diffuse * shadow;\n            #endif\n            #ifdef SPECULARTERM\n                specularBase += info.specular * shadow;\n            #endif\n            #ifdef CLEARCOAT\n                clearCoatBase += info.clearCoat.rgb * shadow;\n            #endif\n            #ifdef SHEEN\n                sheenBase += info.sheen.rgb * shadow;\n            #endif\n        #endif\n    #endif\n#endif\n",m.Effect.IncludesShadersStore.mtoonBumpFragment="// replace vBumpUV to mainUv\nvec2 uvOffset = vec2(0.0, 0.0);\n\n#if defined(BUMP) || defined(PARALLAX) || defined(DETAIL)\n    #ifdef NORMALXYSCALE\n        float normalScale = 1.0;\n    #elif defined(BUMP)\n        float normalScale = vBumpInfos.y;\n    #else\n        float normalScale = 1.0;\n    #endif\n\n    #if defined(TANGENT) && defined(NORMAL)\n        mat3 TBN = vTBN;\n    #elif defined(BUMP)\n        // vec2 TBNUV = gl_FrontFacing ? vBumpUV : -vBumpUV;\n        vec2 TBNUV = gl_FrontFacing ? mainUv : -mainUv;\n        mat3 TBN = cotangent_frame(normalW * normalScale, vPositionW, TBNUV, vTangentSpaceParams);\n    #else\n        vec2 TBNUV = gl_FrontFacing ? vDetailUV : -vDetailUV;\n        mat3 TBN = cotangent_frame(normalW * normalScale, vPositionW, TBNUV, vec2(1., 1.));\n    #endif\n#elif defined(ANISOTROPIC)\n    #if defined(TANGENT) && defined(NORMAL)\n        mat3 TBN = vTBN;\n    #else\n        // flip the uv for the backface\n        vec2 TBNUV = gl_FrontFacing ? vMainUV1 : -vMainUV1;\n        mat3 TBN = cotangent_frame(normalW, vPositionW, TBNUV, vec2(1., 1.));\n    #endif\n#endif\n\n#ifdef PARALLAX\n    mat3 invTBN = transposeMat3(TBN);\n\n    #ifdef PARALLAXOCCLUSION\n        // uvOffset = parallaxOcclusion(invTBN * -viewDirectionW, invTBN * normalW, vBumpUV, vBumpInfos.z);\n        uvOffset = parallaxOcclusion(invTBN * -viewDirectionW, invTBN * normalW, mainUv, vBumpInfos.z);\n    #else\n        uvOffset = parallaxOffset(invTBN * viewDirectionW, vBumpInfos.z);\n    #endif\n#endif\n\n#ifdef DETAIL\n    vec4 detailColor = texture2D(detailSampler, vDetailUV + uvOffset);\n    vec2 detailNormalRG = detailColor.wy * 2.0 - 1.0;\n    float detailNormalB = sqrt(1. - saturate(dot(detailNormalRG, detailNormalRG)));\n    vec3 detailNormal = vec3(detailNormalRG, detailNormalB);\n#endif\n\n#ifdef BUMP\n    #ifdef OBJECTSPACE_NORMALMAP\n        // normalW = normalize(texture2D(bumpSampler, vBumpUV).xyz  * 2.0 - 1.0);\n        normalW = normalize(texture2D(bumpSampler, mainUv).xyz  * 2.0 - 1.0);\n        normalW = normalize(mat3(normalMatrix) * normalW);\n    #elif !defined(DETAIL)\n        // normalW = perturbNormal(TBN, texture2D(bumpSampler, vBumpUV + uvOffset).xyz, vBumpInfos.y);\n        normalW = perturbNormal(TBN, texture2D(bumpSampler, mainUv + uvOffset).xyz, vBumpInfos.y);\n    #else\n        // vec3 bumpNormal = texture2D(bumpSampler, vBumpUV + uvOffset).xyz * 2.0 - 1.0;\n        vec3 bumpNormal = texture2D(bumpSampler, mainUv + uvOffset).xyz * 2.0 - 1.0;\n        // Reference for normal blending: https://blog.selfshadow.com/publications/blending-in-detail/\n        #if DETAIL_NORMALBLENDMETHOD == 0 // whiteout\n            detailNormal.xy *= vDetailInfos.z;\n            vec3 blendedNormal = normalize(vec3(bumpNormal.xy + detailNormal.xy, bumpNormal.z * detailNormal.z));\n        #elif DETAIL_NORMALBLENDMETHOD == 1 // RNM\n            detailNormal.xy *= vDetailInfos.z;\n            bumpNormal += vec3(0.0, 0.0, 1.0);\n            detailNormal *= vec3(-1.0, -1.0, 1.0);\n            vec3 blendedNormal = bumpNormal * dot(bumpNormal, detailNormal) / bumpNormal.z - detailNormal;\n        #endif\n        normalW = perturbNormalBase(TBN, blendedNormal, vBumpInfos.y);\n    #endif\n#elif defined(DETAIL)\n        detailNormal.xy *= vDetailInfos.z;\n        normalW = perturbNormalBase(TBN, detailNormal, vDetailInfos.z);\n#endif\n",m.Effect.ShadersStore.mtoonVertexShader="// it is based on default.vertex.fx\n// This include is special, it will be replaced to UboDeclaration(WebGL2) or VertexDeclaration(WebGL1).\n// @see effect.ts\n#include<__decl__mtoonVertex>\n\n// Attributes\n\n#define CUSTOM_VERTEX_BEGIN\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#include<uvAttributeDeclaration>[2..7]\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n\n#include<helperFunctions>\n\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n// Uniforms\n#include<instancesDeclaration>\n#include<prePassVertexDeclaration>\n\n#include<mainUVVaryingDeclaration>[1..7]\n\n#include<samplerVertexDeclaration>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,DETAIL,_VARYINGNAME_,Detail)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,AMBIENT,_VARYINGNAME_,Ambient)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,OPACITY,_VARYINGNAME_,Opacity)\n#include<samplerVertexDeclaration>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,LIGHTMAP,_VARYINGNAME_,Lightmap)\n// # if defined(SPECULARTERM)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular)\n// # endif\n#include<samplerVertexDeclaration>(_DEFINENAME_,BUMP,_VARYINGNAME_,Bump)\n#include<samplerVertexDeclaration>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade)\n#include<samplerVertexDeclaration>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow)\n#include<samplerVertexDeclaration>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade)\n#include<samplerVertexDeclaration>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim)\n#include<samplerVertexDeclaration>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap)\n#include<samplerVertexDeclaration>(_DEFINENAME_,OUTLINE_WIDTH,_VARYINGNAME_,OutlineWidth)\n#include<samplerVertexDeclaration>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask)\n\n// Additional Uniforms\n#ifdef OUTLINE_WIDTH\n    uniform sampler2D outlineWidthSampler;\n#endif\n\n// Output\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR)\nvarying vec4 vColor;\n#endif\n\n#include<bumpVertexDeclaration>\n\n#include<clipPlaneVertexDeclaration>\n\n#include<fogVertexDeclaration>\n#include<__decl__lightVxFragment>[0..maxSimultaneousLights]\n\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n\n// # ifdef REFLECTIONMAP_SKYBOX\n// varying vec3 vPositionUVW;\n// # endif\n\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n// varying vec3 vDirectionW;\n// # endif\n\n#include<logDepthDeclaration>\n#define CUSTOM_VERTEX_DEFINITIONS\n\nvoid main(void) {\n\n    #define CUSTOM_VERTEX_MAIN_BEGIN\n\n    vec3 positionUpdated = position;\n#ifdef NORMAL\n    vec3 normalUpdated = normal;\n#endif\n#ifdef TANGENT\n    vec4 tangentUpdated = tangent;\n#endif\n#ifdef UV1\n    vec2 uvUpdated = uv;\n#endif\n\n#include<morphTargetsVertexGlobal>\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n\n// # ifdef REFLECTIONMAP_SKYBOX\n//     vPositionUVW = positionUpdated;\n// # endif\n\n#define CUSTOM_VERTEX_UPDATE_POSITION\n\n#define CUSTOM_VERTEX_UPDATE_NORMAL\n\n#include<instancesVertex>\n\n#if defined(PREPASS) && defined(PREPASS_VELOCITY) && !defined(BONES_VELOCITY_ENABLED)\n    // Compute velocity before bones computation\n    vCurrentPosition = viewProjection * finalWorld * vec4(positionUpdated, 1.0);\n    vPreviousPosition = previousViewProjection * finalPreviousWorld * vec4(positionUpdated, 1.0);\n#endif\n\n#include<bonesVertex>\n#include<bakedVertexAnimation>\n\n    // Texture coordinates\n#ifndef UV1\n    vec2 uvUpdated = vec2(0., 0.);\n#endif\n#ifdef MAINUV1\n    vMainUV1 = uvUpdated;\n#endif\n#include<uvVariableDeclaration>[2..7]\n\n    float outlineTex = 1.0;\n    if (isOutline == 1.0) {\n#ifdef OUTLINE_WIDTH\n    #if OUTLINE_WIDTHDIRECTUV == 0\n        if (vOutlineWidthInfos.x == 0.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uvUpdated, 1.0, 0.0));\n        }\n        #ifdef UV2\n        else if (vOutlineWidthInfos.x == 1.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv2, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV3\n        else if (vOutlineWidthInfos.x == 2.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv3, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV4\n        else if (vOutlineWidthInfos.x == 3.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv4, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV5\n        else if (vOutlineWidthInfos.x == 4.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv5, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV6\n        else if (vOutlineWidthInfos.x == 5.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv6, 1.0, 0.0));\n        }\n        #endif\n    #elif defined(MAINUV1)\n        vec2 vOutlineWidthUV = vMainUV1;\n    #elif defined(MAINUV2)\n        vec2 vOutlineWidthUV = vMainUV2;\n    #else\n        vec2 vOutlineWidthUV = vec2(0., 0.);\n    #endif\n        outlineTex = texture2D(outlineWidthSampler, vOutlineWidthUV).r * vOutlineWidthInfos.y;\n#endif\n\n#if defined(MTOON_OUTLINE_WIDTH_WORLD) && defined(NORMAL)\n        // move slightly world normal\n        vec3 outlineOffset = 0.01 * outlineWidth * outlineTex * length(transposeMat3(inverseMat3(mat3(finalWorld))) * normalUpdated) * normalUpdated;\n        positionUpdated += outlineOffset;\n#endif\n    } // End isOutline == 1.0\n\n    vec4 worldPos = finalWorld * vec4(positionUpdated, 1.0);\n\n#ifdef NORMAL\n    mat3 normalWorld = mat3(finalWorld);\n\n    #if defined(INSTANCES) && defined(THIN_INSTANCES)\n        vNormalW = normalUpdated / vec3(dot(normalWorld[0], normalWorld[0]), dot(normalWorld[1], normalWorld[1]), dot(normalWorld[2], normalWorld[2]));\n        vNormalW = normalize(normalWorld * vNormalW);\n    #else\n        #ifdef NONUNIFORMSCALING\n            normalWorld = transposeMat3(inverseMat3(normalWorld));\n        #endif\n\n        vNormalW = normalize(normalWorld * normalUpdated);\n    #endif\n#endif\n\n#define CUSTOM_VERTEX_UPDATE_WORLDPOS\n\n#ifdef MULTIVIEW\n    if (gl_ViewID_OVR == 0u) {\n        gl_Position = viewProjection * worldPos;\n    } else {\n        gl_Position = viewProjectionR * worldPos;\n    }\n#else\n    gl_Position = viewProjection * worldPos;\n#endif\n\n    if (isOutline == 1.0) {\n#if defined(MTOON_OUTLINE_WIDTH_SCREEN) && defined(NORMAL)\n        vec3 viewNormal = transposeMat3(inverseMat3(mat3(view) * mat3(finalWorld))) * normalUpdated;\n        vec3 clipNormal = mat3(projection) * viewNormal;\n        vec2 projectedNormal = normalize(clipNormal.xy);\n        projectedNormal *= min(gl_Position.w, outlineScaledMaxDistance);\n        projectedNormal.x /= aspect; // aspect in original mtoon is y/x. aspect in babylon is x/y.\n        gl_Position.xy += 0.01 * outlineWidth * outlineTex * projectedNormal * clamp(1.0 - abs(normalize(viewNormal).z), 0.0, 1.0); // ignore offset when normal toward camera\n#endif\n\n        gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic from three-vrm\n    }\n\n    worldPos = finalWorld * vec4(positionUpdated, 1.0);\n    vPositionW = vec3(worldPos);\n\n#include<prePassVertex>\n\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n//     vDirectionW = normalize(vec3(finalWorld * vec4(positionUpdated, 0.0)));\n// # endif\n\n    #include<samplerVertexImplementation>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse,_MATRIXNAME_,diffuse,_INFONAME_,DiffuseInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,DETAIL,_VARYINGNAME_,Detail,_MATRIXNAME_,detail,_INFONAME_,DetailInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,AMBIENT,_VARYINGNAME_,Ambient,_MATRIXNAME_,ambient,_INFONAME_,AmbientInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,OPACITY,_VARYINGNAME_,Opacity,_MATRIXNAME_,opacity,_INFONAME_,OpacityInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive,_MATRIXNAME_,emissive,_INFONAME_,EmissiveInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,LIGHTMAP,_VARYINGNAME_,Lightmap,_MATRIXNAME_,lightmap,_INFONAME_,LightmapInfos.x)\n    // # if defined(SPECULARTERM)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular,_MATRIXNAME_,specular,_INFONAME_,SpecularInfos.x)\n    // # endif\n    #include<samplerVertexImplementation>(_DEFINENAME_,BUMP,_VARYINGNAME_,Bump,_MATRIXNAME_,bump,_INFONAME_,BumpInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade,_MATRIXNAME_,shade,_INFONAME_,ShadeInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow,_MATRIXNAME_,receiveShadow,_INFONAME_,ReceiveShadowInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade,_MATRIXNAME_,shadingGrade,_INFONAME_,ShadingGradeInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim,_MATRIXNAME_,rim,_INFONAME_,RimInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap,_MATRIXNAME_,matCap,_INFONAME_,MatCapInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask,_MATRIXNAME_,uvAnimationMask,_INFONAME_,uvAnimationMaskInfos.x)\n\n#include<bumpVertex>\n#include<clipPlaneVertex>\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\n    vColor = color;\n#elif defined(INSTANCESCOLOR) && INSTANCESCOLOR\n    vColor = instanceColor;\n#endif\n\n#include<pointCloudVertex>\n#include<logDepthVertex>\n\n#define CUSTOM_VERTEX_MAIN_END\n\n}\n",m.Effect.ShadersStore.mtoonFragmentShader="#include<__decl__mtoonFragment>\n\n#extension GL_OES_standard_derivatives : enable\n\n#include<prePassDeclaration>[SCENE_MRT_COUNT]\n#include<oitDeclaration>\n\n#define CUSTOM_FRAGMENT_BEGIN\n\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n\n// Constants\n#define RECIPROCAL_PI2 0.15915494\n#define PI_2 6.28318530718\n#define EPS_COL 0.00001\n\n// Input\nvarying vec3 vPositionW;\n\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR)\nvarying vec4 vColor;\n#endif\n\n#include<mainUVVaryingDeclaration>[1..7]\n\n// Helper functions\n#include<helperFunctions>\n\n// Lights\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n// Samplers\n#include<samplerFragmentDeclaration>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse,_SAMPLERNAME_,diffuse)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive,_SAMPLERNAME_,emissive)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade,_SAMPLERNAME_,shade)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow,_SAMPLERNAME_,receiveShadow)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade,_SAMPLERNAME_,shadingGrade)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim,_SAMPLERNAME_,rim)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap,_SAMPLERNAME_,matCap)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,OUTLINE_WIDTH,_VARYINGNAME_,OutlineWidth,_SAMPLERNAME_,outlineWidth)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask,_SAMPLERNAME_,uvAnimationMask)\n\n#include<mtoonFragmentFunctions>\n\n// # ifdef REFRACTION\n\n// # ifdef REFRACTIONMAP_3D\n// uniform samplerCube refractionCubeSampler;\n// # else\n// uniform sampler2D refraction2DSampler;\n// # endif\n\n// # endif\n\n// # if defined(SPECULARTERM)\n//     # include<samplerFragmentDeclaration>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular,_SAMPLERNAME_,specular)\n// # endif\n\n// // Fresnel\n// # include<fresnelFunction>\n\n// // Reflection\n// # ifdef REFLECTION\n// # ifdef REFLECTIONMAP_3D\n// uniform samplerCube reflectionCubeSampler;\n// # else\n// uniform sampler2D reflection2DSampler;\n// # endif\n\n// # ifdef REFLECTIONMAP_SKYBOX\n// varying vec3 vPositionUVW;\n// # else\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n// varying vec3 vDirectionW;\n// # endif\n\n// # endif\n\n// # include<reflectionFunction>\n\n// # endif\n\n#include<imageProcessingDeclaration>\n\n#include<imageProcessingFunctions>\n\n#include<bumpFragmentMainFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n\n#define CUSTOM_FRAGMENT_DEFINITIONS\n\nvoid main(void) {\n#ifdef MTOON_CLIP_IF_OUTLINE_IS_NONE\n    #ifdef MTOON_OUTLINE_WIDTH_WORLD\n    #elif defined(MTOON_OUTLINE_WIDTH_SCREEN)\n    #else\n        discard;\n    #endif\n#endif\n\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n\n#include<oitFragment>\n\n#include<clipPlaneFragment>\n\n    vec3 viewDirectionW = normalize(vEyePosition.xyz - vPositionW);\n\n    // Base color\n    vec4 baseColor = vec4(1., 1., 1., 1.);\n    vec3 diffuseColor = vec3(1., 1., 1.);\n\n    // Alpha\n    float alpha = 1.0;\n\n    // Bump\n#ifdef NORMAL\n    vec3 normalW = normalize(vNormalW);\n#else\n    vec3 normalW = normalize(-cross(dFdx(vPositionW), dFdy(vPositionW)));\n#endif\n\n#include<depthPrePass>\n\n    // Ambient color\n    vec3 baseAmbientColor = vec3(1., 1., 1.);\n    float glossiness = 0.;\n\n    // Lighting\n    vec3 diffuseBase = vec3(0., 0., 0.);\n    lightingInfo info;\n    float shadow = 1.;\n    vec3 lightDirection = vec3(0.0, 1.0, 0.0);\n    vec4 mtoonDiffuse = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // MToon UV\n    // All textures will use diffuse(_MainTex) UV\n    vec2 mainUv = vec2(0.0);\n#ifdef DIFFUSE\n    mainUv += vDiffuseUV;\n#elif defined(MAINUV1)\n    mainUv += vMainUV1;\n#elif defined(MAINUV2)\n    mainUv += vMainUV2;\n#endif\n\n    // uv anim\n    float uvAnim = time.y;\n#ifdef UV_ANIMATION_MASK\n    uvAnim *= texture2D(uvAnimationMaskSampler, mainUv).r;\n#endif\n    // translate uv in bottom-left origin coordinates.\n    // uv is reversed\n    mainUv += vec2(-uvAnimationScrollX, -uvAnimationScrollY) * uvAnim;\n    // rotate uv counter-clockwise around (0.5, 0.5) in bottom-left origin coordinates.\n    float rotateRad = uvAnimationRotation * PI_2 * uvAnim;\n    vec2 rotatePivot = vec2(0.5, 0.5);\n    mainUv = mat2(cos(rotateRad), -sin(rotateRad), sin(rotateRad), cos(rotateRad)) * (mainUv - rotatePivot) + rotatePivot;\n\n#ifdef FLIP_U\n    mainUv.x = 1.0 - mainUv.x;\n#endif\n#ifdef FLIP_V\n    mainUv.y = 1.0 - mainUv.y;\n#endif\n\n#include<mtoonBumpFragment>\n\n#ifdef TWOSIDEDLIGHTING\n    normalW = gl_FrontFacing ? normalW : -normalW;\n#endif\n\n// include customized lightFragment\n#include<mtoonLightFragment>[0..maxSimultaneousLights]\n\n    vec3 finalDiffuse = clamp(diffuseBase, 0.0, 1.0) * baseColor.rgb;\n\n    // Composition\n    vec4 color = vec4(finalDiffuse, clamp(alpha, 0.0, 1.0));\n\n    color.rgb = max(color.rgb, 0.);\n#include<logDepthFragment>\n#include<fogFragment>\n\n// Apply image processing if relevant. As this applies in linear space,\n// We first move from gamma to linear.\n#ifdef IMAGEPROCESSINGPOSTPROCESS\n    color.rgb = toLinearSpace(color.rgb);\n#else\n    #ifdef IMAGEPROCESSING\n        // FIXME: support image processing\n        // color.rgb = toLinearSpace(color.rgb);\n        // color = applyImageProcessing(color);\n    #endif\n#endif\n\n    color.a *= visibility;\n\n#ifdef PREMULTIPLYALPHA\n    // Convert to associative (premultiplied) format if needed.\n    color.rgb *= color.a;\n#endif\n\n#ifdef PREPASS\n    float writeGeometryInfo = color.a > 0.4 ? 1.0 : 0.0;\n\n    gl_FragData[0] = color; // We can't split irradiance on std material\n\n    #ifdef PREPASS_POSITION\n    gl_FragData[PREPASS_POSITION_INDEX] = vec4(vPositionW, writeGeometryInfo);\n    #endif\n\n    #ifdef PREPASS_VELOCITY\n    vec2 a = (vCurrentPosition.xy / vCurrentPosition.w) * 0.5 + 0.5;\n    vec2 b = (vPreviousPosition.xy / vPreviousPosition.w) * 0.5 + 0.5;\n\n    vec2 velocity = abs(a - b);\n    velocity = vec2(pow(velocity.x, 1.0 / 3.0), pow(velocity.y, 1.0 / 3.0)) * sign(a - b) * 0.5 + 0.5;\n\n    gl_FragData[PREPASS_VELOCITY_INDEX] = vec4(velocity, 0.0, writeGeometryInfo);\n    #endif\n\n    #ifdef PREPASS_IRRADIANCE\n        gl_FragData[PREPASS_IRRADIANCE_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo); //  We can't split irradiance on std material\n    #endif\n\n    #ifdef PREPASS_DEPTH\n        gl_FragData[PREPASS_DEPTH_INDEX] = vec4(vViewPos.z, 0.0, 0.0, writeGeometryInfo); // Linear depth\n    #endif\n\n    #ifdef PREPASS_NORMAL\n        gl_FragData[PREPASS_NORMAL_INDEX] = vec4((view * vec4(normalW, 0.0)).rgb, writeGeometryInfo); // Normal\n    #endif\n\n    #ifdef PREPASS_ALBEDO_SQRT\n        gl_FragData[PREPASS_ALBEDO_SQRT_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo); // We can't split albedo on std material\n    #endif\n    #ifdef PREPASS_REFLECTIVITY\n        #if defined(SPECULAR)\n            gl_FragData[PREPASS_REFLECTIVITY_INDEX] = vec4(specularMapColor.rgb, specularMapColor.a * writeGeometryInfo);\n        #else\n            gl_FragData[PREPASS_REFLECTIVITY_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo);\n        #endif\n    #endif\n#endif\n\n#if !defined(PREPASS) || defined(WEBGL2)\n    gl_FragColor = color;\n#endif\n\n#if ORDER_INDEPENDENT_TRANSPARENCY\n    if (fragDepth == nearestDepth) {\n        frontColor.rgb += color.rgb * color.a * alphaMultiplier;\n        frontColor.a = 1.0 - alphaMultiplier * (1.0 - color.a);\n    } else {\n        backColor += color;\n    }\n#endif\n\n#define CUSTOM_FRAGMENT_MAIN_END\n\n}\n"),this.inspectableCustomProperties=this.inspectableCustomProperties||[],this.inspectableCustomProperties.push({label:"DiffuseColor",propertyName:"diffuseColor",type:g.InspectableType.Color3},{label:"AmbientColor",propertyName:"ambientColor",type:g.InspectableType.Color3},{label:"EmissiveColor",propertyName:"emissiveColor",type:g.InspectableType.Color3},{label:"ShadeColor",propertyName:"shadeColor",type:g.InspectableType.Color3},{label:"RimColor",propertyName:"rimColor",type:g.InspectableType.Color3},{label:"OutlineColor",propertyName:"outlineColor",type:g.InspectableType.Color3},{label:"ReceiveShadowRate",propertyName:"receiveShadowRate",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"ShadingGradeRate",propertyName:"shadingGradeRate",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"ShadeShift",propertyName:"shadeShift",type:g.InspectableType.Slider,min:-1,max:1,step:.01},{label:"ShadeToony",propertyName:"shadeToony",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"LightColorAttenuation",propertyName:"lightColorAttenuation",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"IndirectLightIntensity",propertyName:"indirectLightIntensity",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"RimLightingMix",propertyName:"rimLightingMix",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"RimFresnelPower",propertyName:"rimFresnelPower",type:g.InspectableType.Slider,min:.01,max:100,step:4},{label:"RimLift",propertyName:"rimLift",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"OutlineWidth",propertyName:"outlineWidth",type:g.InspectableType.Slider,min:.01,max:1,step:.01},{label:"OutlineScaledMaxDistance",propertyName:"outlineScaledMaxDistance",type:g.InspectableType.Slider,min:1,max:10,step:.01},{label:"OutlineLightingMix",propertyName:"outlineLightingMix",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"DebugMode",propertyName:"debugMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineWidthMode",propertyName:"outlineWidthMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineColorMode",propertyName:"outlineColorMode",type:g.InspectableType.Slider,min:0,max:1,step:1},{label:"CullMode",propertyName:"cullMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineCullMode",propertyName:"outlineCullMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"AlphaCutOff",propertyName:"alphaCutOff",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"UV Animation Scroll X",propertyName:"uvAnimationScrollX",type:g.InspectableType.Slider,min:-1,max:1,step:.1},{label:"UV Animation Scroll Y",propertyName:"uvAnimationScrollY",type:g.InspectableType.Slider,min:-1,max:1,step:.1},{label:"UV Animation Rotation",propertyName:"uvAnimationRotation",type:g.InspectableType.Slider,min:-.5,max:.5,step:.01})}get appendedTextures(){return[this._diffuseTexture,this._emissiveTexture,this._bumpTexture,this._shadeTexture,this._receiveShadowTexture,this._shadingGradeTexture,this._rimTexture,this._matCapTexture,this._outlineWidthTexture,this._uvAnimationMaskTexture]}get appendedActiveTextures(){return this.appendedTextures.filter((e=>null!==e))}get imageProcessingConfiguration(){return this._imageProcessingConfiguration}set imageProcessingConfiguration(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsTexturesDirty()}_attachImageProcessingConfiguration(e){e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=e||this.getScene().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add((()=>{this._markAllSubMeshesAsImageProcessingDirty()}))))}get isPrePassCapable(){return!1}get cameraColorCurvesEnabled(){return this.imageProcessingConfiguration.colorCurvesEnabled}set cameraColorCurvesEnabled(e){this.imageProcessingConfiguration.colorCurvesEnabled=e}get cameraColorGradingEnabled(){return this.imageProcessingConfiguration.colorGradingEnabled}set cameraColorGradingEnabled(e){this.imageProcessingConfiguration.colorGradingEnabled=e}get cameraToneMappingEnabled(){return this._imageProcessingConfiguration.toneMappingEnabled}set cameraToneMappingEnabled(e){this._imageProcessingConfiguration.toneMappingEnabled=e}get cameraExposure(){return this._imageProcessingConfiguration.exposure}set cameraExposure(e){this._imageProcessingConfiguration.exposure=e}get cameraContrast(){return this._imageProcessingConfiguration.contrast}set cameraContrast(e){this._imageProcessingConfiguration.contrast=e}get cameraColorGradingTexture(){return this._imageProcessingConfiguration.colorGradingTexture}set cameraColorGradingTexture(e){this._imageProcessingConfiguration.colorGradingTexture=e}get cameraColorCurves(){return this._imageProcessingConfiguration.colorCurves}set cameraColorCurves(e){this._imageProcessingConfiguration.colorCurves=e}get canRenderToMRT(){return!0}get bumpScale(){return this._bumpScale}set bumpScale(e){this._bumpScale=e}get receiveShadowRate(){return this._receiveShadowRate}set receiveShadowRate(e){this._receiveShadowRate=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadingGradeRate(){return this._shadingGradeRate}set shadingGradeRate(e){this._shadingGradeRate=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadeShift(){return this._shadeShift}set shadeShift(e){this._shadeShift=Math.max(-1,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadeToony(){return this._shadeToony}set shadeToony(e){this._shadeToony=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get lightColorAttenuation(){return this._lightColorAttenuation}set lightColorAttenuation(e){this._lightColorAttenuation=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get indirectLightIntensity(){return this._indirectLightIntensity}set indirectLightIntensity(e){this._indirectLightIntensity=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get rimLightingMix(){return this._rimLightingMix}set rimLightingMix(e){this._rimLightingMix=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get rimFresnelPower(){return this._rimFresnelPower}set rimFresnelPower(e){this._rimFresnelPower=Math.max(0,Math.min(100,e)),this._markAllSubMeshesAsLightsDirty()}get rimLift(){return this._rimLift}set rimLift(e){this._rimLift=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get outlineWidth(){return this._outlineWidth}set outlineWidth(e){this._outlineWidth=Math.max(.01,Math.min(1,e)),this._markAllSubMeshesAsAttributesDirty()}get outlineScaledMaxDistance(){return this._outlineScaledMaxDistance}set outlineScaledMaxDistance(e){this._outlineScaledMaxDistance=Math.max(1,Math.min(10,e)),this._markAllSubMeshesAsAttributesDirty()}get outlineLightingMix(){return this._outlineLightingMix}set outlineLightingMix(e){this._outlineLightingMix=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsAttributesDirty()}get uvAnimationScrollX(){return this._uvAnimationScrollX}set uvAnimationScrollX(e){this._uvAnimationScrollX=e,this._markAllSubMeshesAsMiscDirty()}get uvAnimationScrollY(){return this._uvAnimationScrollY}set uvAnimationScrollY(e){this._uvAnimationScrollY=e,this._markAllSubMeshesAsMiscDirty()}get uvAnimationRotation(){return this._uvAnimationRotation}set uvAnimationRotation(e){this._uvAnimationRotation=e,this._markAllSubMeshesAsMiscDirty()}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest=e,e?this.alphaBlend?this._transparencyMode=l.Material.MATERIAL_ALPHATESTANDBLEND:this._transparencyMode=l.Material.MATERIAL_ALPHATEST:this.alphaBlend?this._transparencyMode=l.Material.MATERIAL_ALPHABLEND:this._transparencyMode=l.Material.MATERIAL_OPAQUE,this._markAllSubMeshesAsMiscDirty()}get alphaBlend(){return this._alphaBlend}set alphaBlend(e){this._alphaBlend=e,e?(this.backFaceCulling=!0,this.alphaTest?this._transparencyMode=l.Material.MATERIAL_ALPHATESTANDBLEND:this._transparencyMode=l.Material.MATERIAL_ALPHABLEND):this.alphaTest?this._transparencyMode=l.Material.MATERIAL_ALPHATEST:this._transparencyMode=l.Material.MATERIAL_OPAQUE,this._markAllSubMeshesAsMiscDirty()}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,e===D.None||this.outlineRenderer||(this.outlineRenderer=new A(this.getScene(),this)),this._markAllSubMeshesAsMiscDirty()}enableOutlineRender(){this.isOutline=1}disaableOutlineRender(){this.isOutline=0}get cullMode(){return this._cullMode}set cullMode(e){switch(this._cullMode=e,this._cullMode){case L.Off:this.backFaceCulling=!1,this.sideOrientation=l.Material.ClockWiseSideOrientation,this.twoSidedLighting=!1;break;case L.Front:this.backFaceCulling=!0,this.sideOrientation=l.Material.CounterClockWiseSideOrientation,this.twoSidedLighting=!0;break;case L.Back:this.backFaceCulling=!0,this.sideOrientation=l.Material.ClockWiseSideOrientation,this.twoSidedLighting=!1}this._markAllSubMeshesAsMiscDirty()}applyOutlineCullMode(){this.storedCullMode=this.cullMode,this.cullMode=this._outlineCullMode}restoreOutlineCullMode(){this.cullMode=this.storedCullMode}getOutlineRendererName(){return this.outlineRenderer?this.outlineRenderer.name:""}get hasRenderTargetTextures(){return!1}getClassName(){return"MToonMaterial"}get useLogarithmicDepth(){return this._useLogarithmicDepth}set useLogarithmicDepth(e){const i=e&&this.getScene().getEngine().getCaps().fragmentDepthSupported;this._useLogarithmicDepth!==i&&(this._useLogarithmicDepth=i,this._markAllSubMeshesAsMiscDirty())}needAlphaBlending(){return!this._disableAlphaBlending&&(this.alpha<1||this._shouldUseAlphaFromDiffuseTexture())}needAlphaTesting(){return!!this._forceAlphaTest||!!this._alphaTest||this._hasAlphaChannel()&&(null==this._transparencyMode||this._transparencyMode===l.Material.MATERIAL_ALPHATEST)}_shouldUseAlphaFromDiffuseTexture(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha&&this._useAlphaFromDiffuseTexture&&this._transparencyMode!==l.Material.MATERIAL_OPAQUE}_hasAlphaChannel(){return null!==this._diffuseTexture&&this._diffuseTexture.hasAlpha}getAlphaTestTexture(){return this._diffuseTexture}isReadyForSubMesh(e,i,n=!1){if(this._uniformBufferLayoutBuilt||this.buildUniformLayout(),i.effect&&this.isFrozen&&i.effect._wasPreviouslyReady&&i.effect._wasPreviouslyUsingInstances===n)return!0;i.materialDefines||(this._callbackPluginEventGeneric(p.MaterialPluginEvent.GetDefineNames,this._eventInfo),i.materialDefines=new E);const t=this.getScene(),o=i.materialDefines;if(this._isReadyForSubMesh(i))return!0;const a=t.getEngine();o._needNormals=h.MaterialHelper.PrepareDefinesForLights(t,e,o,this.specularSupported,this._maxSimultaneousLights,this._disableLighting),this.outlineWidthMode!==D.None&&(o._needNormals=!0),this.applyDefines(o),h.MaterialHelper.PrepareDefinesForMultiview(t,o);const l=this.needAlphaBlendingForMesh(e)&&t.useOrderIndependentTransparency;if(h.MaterialHelper.PrepareDefinesForOIT(t,o,l),o._areTexturesDirty){this._eventInfo.hasRenderTargetTextures=!1,this._callbackPluginEventHasRenderTargetTextures(this._eventInfo),this._cacheHasRenderTargetTextures=this._eventInfo.hasRenderTargetTextures,o._needUVs=!1;for(let e=1;e<=f.Constants.MAX_SUPPORTED_UV_SETS;++e)o["MAINUV"+e]=!1;if(t.texturesEnabled){if(!(this.isReadyForTexture(this._diffuseTexture,o,"DIFFUSE")&&this.isReadyForTexture(this._emissiveTexture,o,"EMISSIVE")&&this.isReadyForTexture(this._shadeTexture,o,"SHADE")&&this.isReadyForTexture(this._receiveShadowTexture,o,"RECEIVE_SHADOW")&&this.isReadyForTexture(this._shadingGradeTexture,o,"SHADING_GRADE")&&this.isReadyForTexture(this._rimTexture,o,"RIM")&&this.isReadyForTexture(this._matCapTexture,o,"MATCAP")&&this.isReadyForTexture(this._outlineWidthTexture,o,"OUTLINE_WIDTH")&&this.isReadyForTexture(this._uvAnimationMaskTexture,o,"UV_ANIMATION_MASK")))return!1;if(t.getEngine().getCaps().standardDerivatives&&this._bumpTexture){if(!this._bumpTexture.isReady())return!1;h.MaterialHelper.PrepareDefinesForMergedUV(this._bumpTexture,o,"BUMP"),o.PARALLAX=this.useParallax,o.PARALLAXOCCLUSION=this.useParallaxOcclusion,o.OBJECTSPACE_NORMALMAP=this.useObjectSpaceNormalMap}else o.BUMP=!1,o.PARALLAX=!1,o.PARALLAXOCCLUSION=!1;o.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else o.DIFFUSE=!1,o.EMISSIVE=!1,o.SHADE=!1,o.RECEIVE_SHADOW=!1,o.SHADING_GRADE=!1,o.RIM=!1,o.MATCAP=!1,o.OUTLINE_WIDTH=!1,o.BUMP=!1,o.UV_ANIMATION_MASK=!1;o.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture(),o.PREMULTIPLYALPHA=this.alphaMode===f.Constants.ALPHA_PREMULTIPLIED||this.alphaMode===f.Constants.ALPHA_PREMULTIPLIED_PORTERDUFF,o.ALPHATEST_AFTERALLALPHACOMPUTATIONS=null!==this.transparencyMode,o.ALPHABLEND=null===this.transparencyMode||this.needAlphaBlendingForMesh(e)}if(this._eventInfo.isReadyForSubMesh=!0,this._eventInfo.defines=o,this._callbackPluginEventIsReadyForSubMesh(this._eventInfo),!this._eventInfo.isReadyForSubMesh)return!1;if(o._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(o)}if(this.flipU!==o.FLIP_U&&(o.FLIP_U=this.flipU,o.markAsUnprocessed()),this.flipV!==o.FLIP_V&&(o.FLIP_V=this.flipV,o.markAsUnprocessed()),h.MaterialHelper.PrepareDefinesForMisc(e,t,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e)||this._forceAlphaTest,o),h.MaterialHelper.PrepareDefinesForFrameBoundValues(t,a,o,n,null,i.getRenderingMesh().hasThinInstances),this._eventInfo.defines=o,this._eventInfo.mesh=e,this._callbackPluginEventPrepareDefinesBeforeAttributes(this._eventInfo),h.MaterialHelper.PrepareDefinesForAttributes(e,o,this.useVertexColor,this.useBones,this.useMorphTargets,this.useVertexAlpha,this.useBakedVertexAnimation),this._callbackPluginEventPrepareDefines(this._eventInfo),o.isDirty){const n=o._areLightsDisposed;o.markAsProcessed();const l=new u.EffectFallbacks;o.BUMP&&l.addFallback(0,"BUMP"),o.PARALLAX&&l.addFallback(1,"PARALLAX"),o.PARALLAXOCCLUSION&&l.addFallback(0,"PARALLAXOCCLUSION"),o.FOG&&l.addFallback(1,"FOG"),o.POINTSIZE&&l.addFallback(0,"POINTSIZE"),o.LOGARITHMICDEPTH&&l.addFallback(0,"LOGARITHMICDEPTH"),h.MaterialHelper.HandleFallbacksForShadows(o,l,this._maxSimultaneousLights),o.MULTIVIEW&&l.addFallback(0,"MULTIVIEW");const d=[r.VertexBuffer.PositionKind];o.NORMAL&&d.push(r.VertexBuffer.NormalKind),o.TANGENT&&d.push(r.VertexBuffer.TangentKind);for(let e=1;e<=f.Constants.MAX_SUPPORTED_UV_SETS;++e)o["UV"+e]&&d.push(`uv${1===e?"":e}`);o.INSTANCESCOLOR&&d.push(r.VertexBuffer.ColorInstanceKind),h.MaterialHelper.PrepareAttributesForBones(d,e,o,l),h.MaterialHelper.PrepareAttributesForInstances(d,o),h.MaterialHelper.PrepareAttributesForMorphTargets(d,e,o),h.MaterialHelper.PrepareAttributesForBakedVertexAnimation(d,e,o);const m="mtoon",c=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","visibility","vFogInfos","vFogColor","pointSize","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","logarithmicDepthConstant","vTangentSpaceParams","alphaCutOff","boneTextureWidth","morphTargetTextureInfo","morphTargetTextureIndices","vDiffuseColor","vDiffuseInfos","diffuseMatrix","vEmissiveColor","vEmissiveInfos","emissiveMatrix","vBumpInfos","bumpMatrix","vShadeColor","vShadeInfos","shadeMatrix","vReceiveShadowInfos","receiveShadowMatrix","vShadingGradeInfos","shadingGradeMatrix","vRimColor","vRimInfos","RimMatrix","vMatCapInfos","MatCapMatrix","vOutlineColor","vOutlineWidthInfos","outlineWidthMatrix","aspect","isOutline","shadingGradeRate","receiveShadowRate","shadeShift","shadeToony","rimLightingMix","rimFresnelPower","rimLift","lightColorAttenuation","indirectLightIntensity","outlineWidth","outlineScaledMaxDistance","outlineLightingMix","uvAnimationScrollX","uvAnimationScrollY","uvAnimationRotation","vEyeUp","time","projection"],g=["diffuseSampler","ambientSampler","emissiveSampler","bumpSampler","boneSampler","morphTargets","oitDepthSampler","oitFrontColorSampler","shadeSampler","receiveShadowSampler","shadingGradeSampler","rimSampler","matCapSampler","outlineWidthSampler","uvAnimationMaskSampler"],_=["Material","Scene","Mesh"];this._eventInfo.fallbacks=l,this._eventInfo.fallbackRank=0,this._eventInfo.defines=o,this._eventInfo.uniforms=c,this._eventInfo.attributes=d,this._eventInfo.samplers=g,this._eventInfo.uniformBuffersNames=_,this._eventInfo.customCode=void 0,this._eventInfo.mesh=e,this._callbackPluginEventGeneric(p.MaterialPluginEvent.PrepareEffect,this._eventInfo),s.ImageProcessingConfiguration&&(s.ImageProcessingConfiguration.PrepareUniforms(c,o),s.ImageProcessingConfiguration.PrepareSamplers(g,o)),h.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:c,uniformBuffersNames:_,samplers:g,defines:o,maxSimultaneousLights:this._maxSimultaneousLights});const A={},I=o.toString(),v=i.effect;let M=t.getEngine().createEffect(m,{attributes:d,uniformsNames:c,uniformBuffersNames:_,samplers:g,defines:I,fallbacks:l,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:o.NUM_MORPH_INFLUENCERS},processFinalCode:A.processFinalCode,processCodeAfterIncludes:this._eventInfo.customCode,multiTarget:o.PREPASS},a);if(M)if(this._onEffectCreatedObservable&&(S.effect=M,S.subMesh=i,this._onEffectCreatedObservable.notifyObservers(S)),this.allowShaderHotSwapping&&v&&!M.isReady()){if(M=v,o.markAsUnprocessed(),n)return o._areLightsDisposed=!0,!1}else t.resetCachedMaterial(),i.setEffect(M,o,this._materialContext)}return!(!i.effect||!i.effect.isReady()||(o._renderId=t.getRenderId(),i.effect._wasPreviouslyReady=!0,i.effect._wasPreviouslyUsingInstances=n,0))}buildUniformLayout(){const e=this._uniformBuffer;e.addUniform("vDiffuseColor",4),e.addUniform("vDiffuseInfos",2),e.addUniform("diffuseMatrix",16),e.addUniform("vEmissiveColor",3),e.addUniform("vEmissiveInfos",2),e.addUniform("emissiveMatrix",16),e.addUniform("vBumpInfos",3),e.addUniform("bumpMatrix",16),e.addUniform("vShadeColor",3),e.addUniform("vShadeInfos",2),e.addUniform("shadeMatrix",16),e.addUniform("vReceiveShadowInfos",2),e.addUniform("receiveShadowMatrix",16),e.addUniform("vShadingGradeInfos",2),e.addUniform("shadingGradeMatrix",16),e.addUniform("vRimColor",3),e.addUniform("vRimInfos",2),e.addUniform("rimMatrix",16),e.addUniform("vMatCapInfos",2),e.addUniform("matCapMatrix",16),e.addUniform("vOutlineColor",3),e.addUniform("vOutlineWidthInfos",2),e.addUniform("outlineWidthMatrix",16),e.addUniform("vUvAnimationMaskInfos",2),e.addUniform("uvAnimationMaskMatrix",16),e.addUniform("vTangentSpaceParams",2),e.addUniform("pointSize",1),e.addUniform("shadingGradeRate",1),e.addUniform("receiveShadowRate",1),e.addUniform("shadeShift",1),e.addUniform("shadeToony",1),e.addUniform("lightColorAttenuation",1),e.addUniform("indirectLightIntensity",1),e.addUniform("rimLightingMix",1),e.addUniform("rimFresnelPower",1),e.addUniform("rimLift",1),e.addUniform("outlineWidth",1),e.addUniform("outlineScaledMaxDistance",1),e.addUniform("outlineLightingMix",1),e.addUniform("uvAnimationScrollX",1),e.addUniform("uvAnimationScrollY",1),e.addUniform("uvAnimationRotation",1),e.addUniform("vEyeUp",3),e.addUniform("alphaCutOff",1),e.addUniform("vAmbientColor",3),e.addUniform("aspect",1),e.addUniform("isOutline",1),e.addUniform("time",4),e.addUniform("visibility",1),super.buildUniformLayout()}bindForSubMesh(e,i,n){var a;const r=this.getScene(),s=n.materialDefines,l=n.effect;if(!s||!l)return;this._activeEffect=l,i.getMeshUniformBuffer().bindToEffect(l,"Mesh"),i.transferToEffect(e),this._uniformBuffer.bindToEffect(l,"Material"),this._eventInfo.subMesh=n,this._callbackPluginEventHardBindForSubMesh(this._eventInfo),s.OBJECTSPACE_NORMALMAP&&(e.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));const d=this._mustRebind(r,l,i.visibility);h.MaterialHelper.BindBonesParameters(i,l);const f=this._uniformBuffer;if(d){this.bindViewProjection(l),f.useUbo&&this.isFrozen&&f.isSync||(r.texturesEnabled&&(this.bindTexture(this._diffuseTexture,f,l,"diffuse","vDiffuseInfos"),this.bindTexture(this._emissiveTexture,f,l,"emissive","vEmissiveInfos"),this._bumpTexture&&r.getEngine().getCaps().standardDerivatives&&(f.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this._bumpScale),h.MaterialHelper.BindTextureMatrix(this._bumpTexture,f,"bump"),l.setTexture("bumpSampler",this._bumpTexture),r._mirroredCameraPosition?f.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):f.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),this.bindTexture(this._shadeTexture,f,l,"shade","vShadeInfos"),this.bindTexture(this._receiveShadowTexture,f,l,"receiveShadow","vReceiveShadowInfos"),this.bindTexture(this._shadingGradeTexture,f,l,"shadingGrade","vShadingGradeInfos"),this.bindTexture(this._rimTexture,f,l,"rim","vRimInfos"),this.bindTexture(this._matCapTexture,f,l,"matCap","vMatCapInfos"),this.bindTexture(this._outlineWidthTexture,f,l,"outlineWidth","vOutlineWidthInfos"),this.bindTexture(this._uvAnimationMaskTexture,f,l,"uvAnimationMask","vUvAnimationMaskInfos"),this._hasAlphaChannel()&&f.updateFloat("alphaCutOff",this.alphaCutOff)),this.pointsCloud&&f.updateFloat("pointSize",this.pointSize),f.updateFloat("receiveShadowRate",this._receiveShadowRate),f.updateFloat("shadingGradeRate",this._shadingGradeRate),f.updateFloat("shadeShift",this._shadeShift),f.updateFloat("shadeToony",this._shadeToony),f.updateFloat("lightColorAttenuation",this._lightColorAttenuation),f.updateFloat("indirectLightIntensity",this._indirectLightIntensity),f.updateFloat("rimLightingMix",this._rimLightingMix),f.updateFloat("rimFresnelPower",this._rimFresnelPower),f.updateFloat("rimLift",this._rimLift),f.updateFloat("outlineWidth",this._outlineWidth),f.updateFloat("outlineScaledMaxDistance",this._outlineScaledMaxDistance),f.updateFloat("outlineLightingMix",this._outlineLightingMix),f.updateFloat("uvAnimationScrollX",this._uvAnimationScrollX),f.updateFloat("uvAnimationScrollY",this._uvAnimationScrollY),f.updateFloat("uvAnimationRotation",this._uvAnimationRotation),r.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor),f.updateColor3("vAmbientColor",this._globalAmbientColor),f.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha),f.updateColor3("vEmissiveColor",this.emissiveColor),f.updateColor3("vShadeColor",this.shadeColor),f.updateColor3("vRimColor",this.rimColor),f.updateColor4("vOutlineColor",this.outlineColor,1),f.updateVector3("vEyeUp",r.activeCamera.upVector));const e=r;e.useOrderIndependentTransparency&&this.needAlphaBlendingForMesh(i)&&e.depthPeelingRenderer&&e.depthPeelingRenderer.bind(l),this._eventInfo.subMesh=n,this._callbackPluginEventBindForSubMesh(this._eventInfo),h.MaterialHelper.BindClipPlane(l,r),this.bindEyePosition(l)}else r.getEngine()._features.needToAlwaysBindUniformBuffers&&(this._needToBindSceneUbo=!0);if(d||!this.isFrozen){r.lightsEnabled&&!this._disableLighting&&h.MaterialHelper.BindLights(r,i,l,s,this._maxSimultaneousLights),(r.fogEnabled&&i.applyFog&&r.fogMode!==t.Scene.FOGMODE_NONE||i.receiveShadows)&&this.bindView(l),h.MaterialHelper.BindFogParameters(r,i,l),s.NUM_MORPH_INFLUENCERS&&h.MaterialHelper.BindMorphTargetParameters(i,l),s.BAKED_VERTEX_ANIMATION_TEXTURE&&(null===(a=i.bakedVertexAnimationManager)||void 0===a||a.bind(l,s.INSTANCES)),this.useLogarithmicDepth&&h.MaterialHelper.BindLogDepth(s,l,r),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect),f.updateFloat("aspect",r.getEngine().getAspectRatio(r.activeCamera)),f.updateFloat("isOutline",this.isOutline);const e=window.performance.now()/1e3;f.updateVector4("time",new o.Vector4(e/20,e,2*e,3*e))}this._afterBind(i,this._activeEffect),f.update()}getAnimatables(){const e=super.getAnimatables();for(const i of this.appendedActiveTextures)i.animations&&i.animations.length>0&&e.push(i);return e}getActiveTextures(){return super.getActiveTextures().concat(this.appendedActiveTextures)}hasTexture(e){if(super.hasTexture(e))return!0;for(const i of this.appendedActiveTextures)if(i===e)return!0;return!1}dispose(e,i){if(delete this.outlineRenderer,i)for(const e of this.appendedActiveTextures)e.dispose();this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),super.dispose(e,i)}clone(e){const n=i.SerializationHelper.Clone((()=>new x(e,this.getScene())),this);return n.name=e,n.id=e,this.stencil.copyTo(n.stencil),n}static Parse(e,n,t){const o=i.SerializationHelper.Parse((()=>new x(e.name,n)),e,n,t);return e.stencil&&o.stencil.parse(e.stencil,n,t),o}bindTexture(e,i,n,t,o){e&&(this._uniformBuffer.updateFloat2(o,e.coordinatesIndex,e.level),h.MaterialHelper.BindTextureMatrix(e,i,t),n.setTexture(`${t}Sampler`,e))}isReadyForTexture(e,i,n){return e?!!e.isReadyOrNotBlocking()&&(h.MaterialHelper.PrepareDefinesForMergedUV(e,i,n),!0):(i[n]=!1,!0)}applyDefines(e){switch(this._debugMode){case T.Normal:!0!==e.MTOON_DEBUG_NORMAL&&(e.MTOON_DEBUG_NORMAL=!0,e.MTOON_DEBUG_LITSHADERATE=!1,e.markAsUnprocessed());break;case T.LitShadeRate:!0!==e.MTOON_DEBUG_LITSHADERATE&&(e.MTOON_DEBUG_NORMAL=!1,e.MTOON_DEBUG_LITSHADERATE=!0,e.markAsUnprocessed());break;case T.None:!0===e.MTOON_DEBUG_NORMAL&&(e.MTOON_DEBUG_NORMAL=!1,e.markAsUnprocessed()),!0===e.MTOON_DEBUG_LITSHADERATE&&(e.MTOON_DEBUG_LITSHADERATE=!1,e.markAsUnprocessed())}switch(this.outlineWidthMode){case D.WorldCorrdinates:!0!==e.MTOON_OUTLINE_WIDTH_WORLD&&(e.MTOON_OUTLINE_WIDTH_WORLD=!0,e.MTOON_OUTLINE_WIDTH_SCREEN=!1,e.markAsUnprocessed());break;case D.ScreenCoordinates:!0!==e.MTOON_OUTLINE_WIDTH_SCREEN&&(e.MTOON_OUTLINE_WIDTH_WORLD=!1,e.MTOON_OUTLINE_WIDTH_SCREEN=!0,e.markAsUnprocessed());break;case D.None:!1===e.MTOON_OUTLINE_WIDTH_SCREEN&&!1===e.MTOON_OUTLINE_WIDTH_WORLD||(e.MTOON_OUTLINE_WIDTH_SCREEN=!1,e.MTOON_OUTLINE_WIDTH_WORLD=!1,e.markAsUnprocessed())}switch(this.outlineColorMode){case N.FixedColor:!0!==e.MTOON_OUTLINE_COLOR_FIXED&&(e.MTOON_OUTLINE_COLOR_FIXED=!0,e.MTOON_OUTLINE_COLOR_MIXED=!1,e.markAsUnprocessed());break;case N.MixedLighting:!0!==e.MTOON_OUTLINE_COLOR_MIXED&&(e.MTOON_OUTLINE_COLOR_FIXED=!1,e.MTOON_OUTLINE_COLOR_MIXED=!0,e.markAsUnprocessed())}}}e([(0,i.serializeAsTexture)("diffuseTexture")],x.prototype,"_diffuseTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],x.prototype,"diffuseTexture",void 0),e([(0,i.serializeAsTexture)("emissiveTexture")],x.prototype,"_emissiveTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"emissiveTexture",void 0),e([(0,i.serializeAsTexture)("bumpTexture")],x.prototype,"_bumpTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"bumpTexture",void 0),e([(0,i.serializeAsTexture)("shadeTexture")],x.prototype,"_shadeTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"shadeTexture",void 0),e([(0,i.serializeAsTexture)("receiveShadowTexture")],x.prototype,"_receiveShadowTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"receiveShadowTexture",void 0),e([(0,i.serializeAsTexture)("shadingGradeTexture")],x.prototype,"_shadingGradeTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"shadingGradeTexture",void 0),e([(0,i.serializeAsTexture)("rimTexture")],x.prototype,"_rimTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"rimTexture",void 0),e([(0,i.serializeAsTexture)("matCapTexture")],x.prototype,"_matCapTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"matCapTexture",void 0),e([(0,i.serializeAsTexture)("outlineWidthTexture")],x.prototype,"_outlineWidthTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"outlineWidthTexture",void 0),e([(0,i.serializeAsTexture)("outlineWidthTexture")],x.prototype,"_uvAnimationMaskTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"uvAnimationMaskTexture",void 0),e([(0,i.serializeAsColor3)("diffuse")],x.prototype,"diffuseColor",void 0),e([(0,i.serialize)("ambient")],x.prototype,"ambientColor",void 0),e([(0,i.serialize)("emissive")],x.prototype,"emissiveColor",void 0),e([(0,i.serialize)("shade")],x.prototype,"shadeColor",void 0),e([(0,i.serialize)("rim")],x.prototype,"rimColor",void 0),e([(0,i.serialize)("outline")],x.prototype,"outlineColor",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"useEmissiveAsIllumination",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"linkEmissiveWithDiffuse",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"useReflectionOverAlpha",void 0),e([(0,i.serialize)("disableLighting")],x.prototype,"_disableLighting",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsLightsDirty")],x.prototype,"disableLighting",void 0),e([(0,i.serialize)()],x.prototype,"alphaCutOff",void 0),e([(0,i.serialize)("useAlphaFromDiffuseTexture")],x.prototype,"_useAlphaFromDiffuseTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],x.prototype,"useAlphaFromDiffuseTexture",void 0),e([(0,i.serialize)("maxSimultaneousLights")],x.prototype,"_maxSimultaneousLights",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsLightsDirty")],x.prototype,"maxSimultaneousLights",void 0),e([(0,i.serialize)("invertNormalMapX")],x.prototype,"_invertNormalMapX",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"invertNormalMapX",void 0),e([(0,i.serialize)("invertNormalMapY")],x.prototype,"_invertNormalMapY",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"invertNormalMapY",void 0),e([(0,i.serialize)("twoSidedLighting")],x.prototype,"_twoSidedLighting",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"twoSidedLighting",void 0),e([(0,i.serialize)()],x.prototype,"bumpScale",null),e([(0,i.serialize)()],x.prototype,"receiveShadowRate",null),e([(0,i.serialize)()],x.prototype,"shadingGradeRate",null),e([(0,i.serialize)()],x.prototype,"shadeShift",null),e([(0,i.serialize)()],x.prototype,"shadeToony",null),e([(0,i.serialize)()],x.prototype,"lightColorAttenuation",null),e([(0,i.serialize)()],x.prototype,"indirectLightIntensity",null),e([(0,i.serialize)()],x.prototype,"rimLightingMix",null),e([(0,i.serialize)()],x.prototype,"rimFresnelPower",null),e([(0,i.serialize)()],x.prototype,"rimLift",null),e([(0,i.serialize)()],x.prototype,"outlineWidth",null),e([(0,i.serialize)()],x.prototype,"outlineScaledMaxDistance",null),e([(0,i.serialize)()],x.prototype,"outlineLightingMix",null),e([(0,i.serialize)()],x.prototype,"uvAnimationScrollX",null),e([(0,i.serialize)()],x.prototype,"uvAnimationScrollY",null),e([(0,i.serialize)()],x.prototype,"uvAnimationRotation",null),e([(0,i.serialize)("alphaTest")],x.prototype,"_alphaTest",void 0),e([(0,i.serialize)()],x.prototype,"alphaTest",null),e([(0,i.serialize)()],x.prototype,"alphaBlend",null),e([(0,i.serialize)("debugMode")],x.prototype,"_debugMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"debugMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"outlineColorMode",void 0),e([(0,i.serialize)()],x.prototype,"cullMode",null),e([(0,i.serialize)()],x.prototype,"_outlineCullMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"outlineCullMode",void 0),e([(0,i.serialize)("flipU")],x.prototype,"flipU",void 0),e([(0,i.serialize)("flipV")],x.prototype,"flipV",void 0),e([(0,i.serialize)()],x.prototype,"useLogarithmicDepth",null)})(),M})()));

/***/ }),

/***/ "./src/helper.ts":
/*!***********************!*\
  !*** ./src/helper.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DHelper": () => (/* binding */ V3DHelper)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */

class V3DHelper {
    constructor(core) {
        this.core = core;
    }
    /**
     * Make a node cast shadow from a ShadowGenerator
     * @param shadowGenerator
     * @param nodeName
     */
    addNodeToShadowCasterByName(shadowGenerator, nodeName) {
        shadowGenerator?.addShadowCaster(this.core.scene.getNodeByName(nodeName));
    }
    /**
     * Make nodes cast shadow from a ShadowGenerator
     * @param shadowGenerator
     * @param nodeName
     */
    addNodeToShadowCasterContainsName(shadowGenerator, nodeName) {
        if (!shadowGenerator)
            return;
        for (const node of this.core.scene.getNodes()) {
            if (node && node.name.includes(nodeName)) {
                shadowGenerator.addShadowCaster(node);
            }
        }
    }
    /**
     * Make node receive shadow
     * @param nodeName
     */
    makeReceiveShadowByName(nodeName) {
        this.core.scene.getNodeByName(nodeName).receiveShadows = true;
    }
    /**
     * Make nodes receive shadow
     * @param nodeName
     */
    makeReceiveShadowContainsName(nodeName) {
        for (const node of this.core.scene.getNodes()) {
            if (node && node.name.includes(nodeName)) {
                try {
                    node.receiveShadows = true;
                }
                catch (e) {
                    console.log(e);
                }
            }
        }
    }
    showSkeletonDebug(skeleton, mesh) {
        const options = {
            pauseAnimations: true,
            returnToRest: false,
            computeBonesUsingShaders: true,
            useAllBones: true,
            displayMode: _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SkeletonViewer.DISPLAY_LINES, //A value that controls which display mode to use. (SkeletonViewer.DISPLAY_LINES = 0, SkeletonViewer.DISPLAY_SPHERES = 1, SkeletonViewer.DISPLAY_SPHERE_AND_SPURS = 2). Default = 0.
        };
        const skeletonViewer = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SkeletonViewer(skeleton, //Target Skeleton
        mesh, //That skeletons Attached Mesh or a Node with the same globalMatrix
        this.core.scene, //The Scene scope
        true, //autoUpdateBoneMatrices?
        mesh.renderingGroupId > 0 ? mesh.renderingGroupId + 1 : 1, // renderingGroupId
        options);
        return skeletonViewer;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/errors.ts":
/*!*******************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/errors.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BoneNotFoundError": () => (/* binding */ BoneNotFoundError)
/* harmony export */ });
/**
 * Throws when mandatory bone could not find
 */
class BoneNotFoundError extends Error {
    constructor(boneName) {
        super(`Bone:${boneName} NotFound`);
        this.boneName = boneName;
        this.name = 'BoneNotFoundError';
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/humanoid-bone.ts":
/*!**************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/humanoid-bone.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HumanoidBone": () => (/* binding */ HumanoidBone)
/* harmony export */ });
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ "./src/importer/babylon-vrm-loader/src/errors.ts");

/**
 * HumanoidBone を取得するメソッド群
 * @see https://docs.unity3d.com/ja/2018.3/ScriptReference/HumanBodyBones.html
 */
class HumanoidBone {
    //* TODO: Patched.
    // public constructor(private nodeMap: TransformNodeMap) {}
    constructor(nodeMap) {
        this.nodeMap = nodeMap;
    }
    dispose() {
        this.nodeMap = null;
    }
    /**
     * 尻
     */
    get hips() {
        return this.getMandatoryBone('hips');
    }
    /**
     * 左太もも
     */
    get leftUpperLeg() {
        return this.getMandatoryBone('leftUpperLeg');
    }
    /**
     * 右太もも
     */
    get rightUpperLeg() {
        return this.getMandatoryBone('rightUpperLeg');
    }
    /**
     * 左ひざ
     */
    get leftLowerLeg() {
        return this.getMandatoryBone('leftLowerLeg');
    }
    /**
     * 右ひざ
     */
    get rightLowerLeg() {
        return this.getMandatoryBone('rightLowerLeg');
    }
    /**
     * 左足首
     */
    get leftFoot() {
        return this.getMandatoryBone('leftFoot');
    }
    /**
     * 右足首
     */
    get rightFoot() {
        return this.getMandatoryBone('rightFoot');
    }
    /**
     * 脊椎の第一
     */
    get spine() {
        return this.getMandatoryBone('spine');
    }
    /**
     * 胸
     */
    get chest() {
        return this.getMandatoryBone('chest');
    }
    /**
     * 首
     */
    get neck() {
        return this.getMandatoryBone('neck');
    }
    /**
     * 頭
     */
    get head() {
        return this.getMandatoryBone('head');
    }
    /**
     * 左肩
     */
    get leftShoulder() {
        return this.getMandatoryBone('leftShoulder');
    }
    /**
     * 右肩
     */
    get rightShoulder() {
        return this.getMandatoryBone('rightShoulder');
    }
    /**
     * 左上腕
     */
    get leftUpperArm() {
        return this.getMandatoryBone('leftUpperArm');
    }
    /**
     * 右上腕
     */
    get rightUpperArm() {
        return this.getMandatoryBone('rightUpperArm');
    }
    /**
     * 左ひじ
     */
    get leftLowerArm() {
        return this.getMandatoryBone('leftLowerArm');
    }
    /**
     * 右ひじ
     */
    get rightLowerArm() {
        return this.getMandatoryBone('rightLowerArm');
    }
    /**
     * 左手首
     */
    get leftHand() {
        return this.getMandatoryBone('leftHand');
    }
    /**
     * 右手首
     */
    get rightHand() {
        return this.getMandatoryBone('rightHand');
    }
    /**
     * 左つま先(Optional)
     */
    get leftToes() {
        return this.getOptionalBone('leftToes');
    }
    /**
     * 右つま先(Optional)
     */
    get rightToes() {
        return this.getOptionalBone('rightToes');
    }
    /**
     * 左目(Optional)
     */
    get leftEye() {
        return this.getOptionalBone('leftEye');
    }
    /**
     * 右目(Optional)
     */
    get rightEye() {
        return this.getOptionalBone('rightEye');
    }
    /**
     * 顎(Optional)
     */
    get jaw() {
        return this.getOptionalBone('jaw');
    }
    /**
     * 左親指第一指骨(Optional)
     */
    get leftThumbProximal() {
        return this.getOptionalBone('leftThumbProximal');
    }
    /**
     * 左親指第二指骨(Optional)
     */
    get leftThumbIntermediate() {
        return this.getOptionalBone('leftThumbIntermediate');
    }
    /**
     * 左親指第三指骨(Optional)
     */
    get leftThumbDistal() {
        return this.getOptionalBone('leftThumbDistal');
    }
    /**
     * 左人差し指第一指骨(Optional)
     */
    get leftIndexProximal() {
        return this.getOptionalBone('leftIndexProximal');
    }
    /**
     * 左人差し指第二指骨(Optional)
     */
    get leftIndexIntermediate() {
        return this.getOptionalBone('leftIndexIntermediate');
    }
    /**
     * 左人差し指第三指骨(Optional)
     */
    get leftIndexDistal() {
        return this.getOptionalBone('leftIndexDistal');
    }
    /**
     * 左中指第一指骨(Optional)
     */
    get leftMiddleProximal() {
        return this.getOptionalBone('leftMiddleProximal');
    }
    /**
     * 左中指第二指骨(Optional)
     */
    get leftMiddleIntermediate() {
        return this.getOptionalBone('leftMiddleIntermediate');
    }
    /**
     * 左中指第三指骨(Optional)
     */
    get leftMiddleDistal() {
        return this.getOptionalBone('leftMiddleDistal');
    }
    /**
     * 左薬指第一指骨(Optional)
     */
    get leftRingProximal() {
        return this.getOptionalBone('leftRingProximal');
    }
    /**
     * 左薬指第二指骨(Optional)
     */
    get leftRingIntermediate() {
        return this.getOptionalBone('leftRingIntermediate');
    }
    /**
     * 左薬指第三指骨(Optional)
     */
    get leftRingDistal() {
        return this.getOptionalBone('leftRingDistal');
    }
    /**
     * 左小指第一指骨(Optional)
     */
    get leftLittleProximal() {
        return this.getOptionalBone('leftLittleProximal');
    }
    /**
     * 左小指第二指骨(Optional)
     */
    get leftLittleIntermediate() {
        return this.getOptionalBone('leftLittleIntermediate');
    }
    /**
     * 左小指第三指骨(Optional)
     */
    get leftLittleDistal() {
        return this.getOptionalBone('leftLittleDistal');
    }
    /**
     * 右親指第一指骨(Optional)
     */
    get rightThumbProximal() {
        return this.getOptionalBone('rightThumbProximal');
    }
    /**
     * 右親指第二指骨(Optional)
     */
    get rightThumbIntermediate() {
        return this.getOptionalBone('rightThumbIntermediate');
    }
    /**
     * 右親指第三指骨(Optional)
     */
    get rightThumbDistal() {
        return this.getOptionalBone('rightThumbDistal');
    }
    /**
     * 右人差し指第一指骨(Optional)
     */
    get rightIndexProximal() {
        return this.getOptionalBone('rightIndexProximal');
    }
    /**
     * 右人差し指第二指骨(Optional)
     */
    get rightIndexIntermediate() {
        return this.getOptionalBone('rightIndexIntermediate');
    }
    /**
     * 右人差し指第三指骨(Optional)
     */
    get rightIndexDistal() {
        return this.getOptionalBone('rightIndexDistal');
    }
    /**
     * 右中指第一指骨(Optional)
     */
    get rightMiddleProximal() {
        return this.getOptionalBone('rightMiddleProximal');
    }
    /**
     * 右中指第二指骨(Optional)
     */
    get rightMiddleIntermediate() {
        return this.getOptionalBone('rightMiddleIntermediate');
    }
    /**
     * 右中指第三指骨(Optional)
     */
    get rightMiddleDistal() {
        return this.getOptionalBone('rightMiddleDistal');
    }
    /**
     * 右薬指第一指骨(Optional)
     */
    get rightRingProximal() {
        return this.getOptionalBone('rightRingProximal');
    }
    /**
     * 右薬指第二指骨(Optional)
     */
    get rightRingIntermediate() {
        return this.getOptionalBone('rightRingIntermediate');
    }
    /**
     * 右薬指第三指骨(Optional)
     */
    get rightRingDistal() {
        return this.getOptionalBone('rightRingDistal');
    }
    /**
     * 右小指第一指骨(Optional)
     */
    get rightLittleProximal() {
        return this.getOptionalBone('rightLittleProximal');
    }
    /**
     * 右小指第二指骨(Optional)
     */
    get rightLittleIntermediate() {
        return this.getOptionalBone('rightLittleIntermediate');
    }
    /**
     * 右小指第三指骨(Optional)
     */
    get rightLittleDistal() {
        return this.getOptionalBone('rightLittleDistal');
    }
    /**
     * 上胸(Optional)
     */
    get upperChest() {
        return this.getOptionalBone('upperChest');
    }
    /**
     * 必須ボーンを取得する。取得出来ない場合は例外を発生する
     *
     * @throws BoneNotFoundError
     * @param name HumanoidBoneName
     */
    getMandatoryBone(name) {
        const node = this.nodeMap[name];
        if (!node) {
            throw new _errors__WEBPACK_IMPORTED_MODULE_0__.BoneNotFoundError(name);
        }
        return node;
    }
    /**
     * オプショナルボーンを取得する
     *
     * @param name HumanoidBoneName
     */
    getOptionalBone(name) {
        return (this.nodeMap && this.nodeMap[name]) || null;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts":
/*!******************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MaterialValueBindingMerger": () => (/* binding */ MaterialValueBindingMerger)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! babylon-mtoon-material */ "./node_modules/babylon-mtoon-material/dist/index.module.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__);



const PBRMaterialTextureMap = {
    _MainTex: 'albedoTexture',
};
const PBRMaterialColorMap = {
    _Color: 'albedoColor',
};
const MToonMaterialTextureMap = {
    _MainTex: 'diffuseTexture',
    _EmissionMap: 'emissiveTexture',
    _BumpMap: 'bumpTexture',
    _ShadeTexture: 'shadeTexture',
    _ReceiveShadowTexture: 'receiveShadowTexture',
    _ShadingGradeTexture: 'shadingGradeTexture',
    _RimTexture: 'rimTexture',
    _SphereAdd: 'matCapTexture',
    _OutlineWidthTexture: 'outlineWidthTexture',
    _UvAnimMaskTexture: 'uvAnimationMaskTexture',
};
const MToonMaterialColorMap = {
    _Color: 'diffuseColor',
    _ShadeColor: 'shadeColor',
    _RimColor: 'rimColor',
    _EmissionColor: 'emissiveColor',
    _OutlineColor: 'outlineColor',
};
/**
 * @see https://github.com/vrm-c/UniVRM/blob/4ffd97c2e9339683ce9bf21e73f510bd90c2a5b2/Assets/VRM/Runtime/BlendShape/MaterialValueBindingMerger.cs
 */
class MaterialValueBindingMerger {
    /**
     * @param materials VRMの全 Material
     * @param materialValues
     */
    constructor(materials, materialValues) {
        this.materialValues = materialValues;
        this.m_materialMap = {};
        this.m_materialSetterMap = {};
        this.m_materialValueMap = {};
        this.m_used = {};
        this.baseValueCache = {};
        this.materialValuesToApply = {};
        if (materials.length === 0 || materialValues.length === 0) {
            return;
        }
        // プロパティ名の変換に対応している MToonMaterial と PBRMaterial を保存する
        materials.forEach((material) => {
            if (material instanceof babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__.MToonMaterial || material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
                this.m_materialMap[material.name] = material;
            }
        });
        materialValues.forEach((materialValue) => {
            const bindingKey = this.makeBindingKey(materialValue);
            if (this.m_materialSetterMap[bindingKey]) {
                return;
            }
            const material = this.m_materialMap[materialValue.materialName];
            if (!material) {
                return;
            }
            const baseValue = this.getMaterialProperty(material, materialValue.propertyName);
            if (!baseValue || materialValue.targetValue.length !== 4) {
                return;
            }
            // モーフィング用に baseValue (初期値) と materialValue を保存する
            this.baseValueCache[bindingKey] = baseValue;
            this.materialValuesToApply[bindingKey] = materialValue;
            const targetValue = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4.FromArray(materialValue.targetValue);
            const valueName = materialValue.propertyName;
            // Unity と座標系が異なるため、テクスチャの vOffset を反転する
            if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
                if (Object.keys(PBRMaterialTextureMap).some((k) => valueName.startsWith(k))) {
                    targetValue.w *= -1;
                }
            }
            else if (Object.keys(MToonMaterialTextureMap).some((k) => valueName.startsWith(k))) {
                targetValue.w *= -1;
            }
            if (valueName.endsWith('_ST_S')) {
                // テクスチャの u方向 のみ更新する
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    const src = this.getMaterialProperty(material, valueName);
                    src.x = propValue.x;
                    src.z = propValue.z;
                    this.updateMaterialProperty(material, valueName, src);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
            else if (valueName.endsWith('_ST_T')) {
                // テクスチャの v方向 のみ更新する
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    const src = this.getMaterialProperty(material, valueName);
                    src.y = propValue.y;
                    src.w = propValue.w;
                    this.updateMaterialProperty(material, valueName, src);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
            else {
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    this.updateMaterialProperty(material, valueName, propValue);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
        });
    }
    /**
     * UniVRM では Dictionary のキー用のクラスを定義しているが、文字列で代用する
     * MaterialValueBinding.BaseValue は対応するプロパティの初期値なので無視できる
     */
    makeBindingKey(materialValue) {
        return `${materialValue.materialName}_${materialValue.propertyName}_${materialValue.targetValue.join('-')}`;
    }
    /**
     * UniVRM では Dictionary のキー用のクラスを定義しているが、文字列で代用する
     */
    makeTargetKey(materialValue) {
        return `${materialValue.materialName}_${materialValue.propertyName}`;
    }
    /**
     * モーフィングを行う
     * @param value 値(0〜1)
     */
    morphing(value) {
        this.accumulateValue(value);
        this.apply();
    }
    /**
     * materialValue ごとに重みを計算する
     */
    accumulateValue(value) {
        this.materialValues.forEach((materialValue) => {
            const bindingKey = this.makeBindingKey(materialValue);
            if (this.m_materialValueMap[bindingKey]) {
                this.m_materialValueMap[bindingKey] += value;
            }
            else {
                this.m_materialValueMap[bindingKey] = value;
            }
        });
    }
    /**
     * Material のプロパティを更新する
     */
    apply() {
        this.m_used = {};
        Object.entries(this.materialValuesToApply).forEach(([bindingKey, materialValue]) => {
            const targetKey = this.makeTargetKey(materialValue);
            if (!(targetKey in this.m_used)) {
                const material = this.m_materialMap[materialValue.materialName];
                const value = this.baseValueCache[bindingKey].clone();
                // 対象のプロパティを初期値に戻す
                const valueName = materialValue.propertyName;
                if (valueName.endsWith('_ST_S')) {
                    const v = this.getMaterialProperty(material, valueName);
                    value.y = v.y;
                    value.w = v.w;
                }
                else if (valueName.endsWith('_ST_T')) {
                    const v = this.getMaterialProperty(material, valueName);
                    value.x = v.x;
                    value.z = v.z;
                }
                this.updateMaterialProperty(material, valueName, value);
                this.m_used[targetKey] = true;
            }
            const setter = this.m_materialSetterMap[bindingKey];
            if (setter) {
                setter(this.m_materialValueMap[bindingKey], false);
            }
        });
        this.m_materialValueMap = {};
    }
    /**
     * マテリアルのテクスチャか色に対応する Vector4 を取得する
     */
    getMaterialProperty(material, propertyName) {
        const match = propertyName.match(/^(_[^_]+)/);
        if (!match || !match[1]) {
            return null;
        }
        const key = match[1];
        if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
            if (PBRMaterialTextureMap[key]) {
                return this.convertTextureIntoVector4WhenNotNull(material[PBRMaterialTextureMap[key]]);
            }
            if (PBRMaterialColorMap[key]) {
                return this.convertColorIntoVector4(material[PBRMaterialColorMap[key]], material.alpha);
            }
            return null;
        }
        // MToonMaterial
        if (MToonMaterialTextureMap[key]) {
            return this.convertTextureIntoVector4WhenNotNull(material[MToonMaterialTextureMap[key]]);
        }
        if (MToonMaterialColorMap[key]) {
            return this.convertColorIntoVector4(material[MToonMaterialColorMap[key]], material.alpha);
        }
        return null;
    }
    /**
     * Texture を Vector4 に変換する
     */
    convertTextureIntoVector4WhenNotNull(texture) {
        if (!texture) {
            return null;
        }
        const t = texture;
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4(t.uScale, t.vScale, t.uOffset, t.vOffset);
    }
    /**
     * Color3 に alpha を加えて Vector4 に変換する
     */
    convertColorIntoVector4(color, alpha) {
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4(color.r, color.g, color.b, alpha);
    }
    /**
     * マテリアルのテクスチャか色を更新する
     */
    updateMaterialProperty(material, propertyName, value) {
        const match = propertyName.match(/^(_[^_]+)/);
        if (!match || !match[1]) {
            return;
        }
        const key = match[1];
        if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
            if (PBRMaterialTextureMap[key]) {
                this.updateTextureWhenNotNull(material[PBRMaterialTextureMap[key]], value);
                return;
            }
            if (PBRMaterialColorMap[key]) {
                if (key === '_Color') {
                    material.alpha = value.w;
                }
                this.updateColor(material[PBRMaterialColorMap[key]], value);
            }
            return;
        }
        // MToonMaterial
        if (MToonMaterialTextureMap[key]) {
            this.updateTextureWhenNotNull(material[MToonMaterialTextureMap[key]], value);
            return;
        }
        if (MToonMaterialColorMap[key]) {
            if (key === '_Color') {
                material.alpha = value.w;
            }
            this.updateColor(material[MToonMaterialColorMap[key]], value);
        }
    }
    /**
     * Texture を Vector4 で更新する
     */
    updateTextureWhenNotNull(texture, value) {
        if (texture) {
            const t = texture;
            t.uScale = value.x;
            t.vScale = value.y;
            t.uOffset = value.z;
            t.vOffset = value.w;
        }
    }
    /**
     * Color3 を Vector4 で更新する
     */
    updateColor(color, value) {
        color.r = value.x;
        color.g = value.y;
        color.b = value.z;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts":
/*!***********************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColliderGroup": () => (/* binding */ ColliderGroup)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Meshes_Builders_sphereBuilder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Meshes/Builders/sphereBuilder */ "./node_modules/@babylonjs/core/Meshes/Builders/sphereBuilder.js");
/* harmony import */ var _collider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collider */ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts");


/**
 * VRM SpringBone ColliderGroup
 */
class ColliderGroup {
    /**
     * @param transform The node of the collider group for setting up collision detections.
     */
    constructor(transform) {
        this.transform = transform;
        this.colliders = [];
    }
    /**
     * Add offsetted collider
     *
     * @param offset The local coordinate from the node of the collider group.
     * @param radius The radius of the collider.
     */
    addCollider(offset, radius) {
        const sphere = _babylonjs_core_Meshes_Builders_sphereBuilder__WEBPACK_IMPORTED_MODULE_0__.SphereBuilder.CreateSphere(`${this.transform.name}_ColliderSphere`, {
            segments: 6,
            diameter: radius * 2.0,
            updatable: true,
        }, this.transform.getScene());
        sphere.setParent(this.transform);
        sphere.setPositionWithLocalVector(offset);
        sphere.setEnabled(false);
        this.colliders.push(new _collider__WEBPACK_IMPORTED_MODULE_1__.Collider(offset, radius, sphere));
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts":
/*!*****************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Collider": () => (/* binding */ Collider)
/* harmony export */ });
/**
 * Collider
 */
class Collider {
    /**
     * @param offset The local coordinate from the node of the collider group.
     * @param radius The radius of the collider.
     * @param sphere The spehere mesh for worldMatrix and gizmo.
     */
    constructor(offset, radius, sphere) {
        this.offset = offset;
        this.radius = radius;
        this.sphere = sphere;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts":
/*!*******************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpringBoneController": () => (/* binding */ SpringBoneController)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _collider_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collider-group */ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts");
/* harmony import */ var _vrm_spring_bone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vrm-spring-bone */ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts");



/**
 * VRM SpringBone Controller
 */
class SpringBoneController {
    /**
     * @param ext SecondaryAnimation Object
     * @param getBone
     */
    //* TODO: Patched.
    constructor(ext, getBone, options) {
        this.ext = ext;
        const colliderGroups = this.constructColliderGroups(getBone);
        //* TODO: Patched.
        // this.springs = this.constructSprings(getBone, colliderGroups);
        this.springs = this.constructSprings(getBone, colliderGroups, options);
    }
    dispose() {
        this.springs = [];
    }
    /**
     * Update all SpringBones
     *
     * @param deltaTime Elapsed sec from previous frame
     * @see https://docs.unity3d.com/ScriptReference/Time-deltaTime.html
     */
    async update(deltaTime) {
        // ポーズ後のあらぶり防止のため clamp
        deltaTime = Math.max(0.0, Math.min(16.666, deltaTime)) / 1000;
        const promises = this.springs.map((spring) => {
            return spring.update(deltaTime);
        });
        return Promise.all(promises).then(() => {
            /* Do nothing */
        });
    }
    constructColliderGroups(getBone) {
        if (!this.ext.colliderGroups || !this.ext.colliderGroups.length) {
            return [];
        }
        const colliderGroups = [];
        this.ext.colliderGroups.forEach((colliderGroup) => {
            const bone = getBone(colliderGroup.node);
            const g = new _collider_group__WEBPACK_IMPORTED_MODULE_1__.ColliderGroup(bone);
            colliderGroup.colliders.forEach((collider) => {
                g.addCollider(
                // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
                new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(-collider.offset.x, collider.offset.y, -collider.offset.z), collider.radius);
            });
            colliderGroups.push(g);
        });
        return colliderGroups;
    }
    constructSprings(getBone, colliderGroups, options) {
        if (!this.ext.boneGroups || !this.ext.boneGroups.length) {
            return [];
        }
        const springs = [];
        this.ext.boneGroups.forEach((spring) => {
            const rootBones = (spring.bones || []).map((bone) => {
                return getBone(bone);
            });
            const springColliders = (spring.colliderGroups || []).map((g) => {
                return colliderGroups[g];
            });
            springs.push(
            //* TODO: Patched.
            // new VRMSpringBone(
            //     spring.comment,
            //     spring.stiffiness,
            //     spring.gravityPower,
            //     new Vector3(
            //         // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
            //         -spring.gravityDir.x,
            //         spring.gravityDir.y,
            //         -spring.gravityDir.z
            //     ).normalize(),
            //     spring.dragForce,
            //     getBone(spring.center),
            //     spring.hitRadius,
            //     rootBones,
            //     springColliders
            // )
            new _vrm_spring_bone__WEBPACK_IMPORTED_MODULE_2__.VRMSpringBone(spring.comment, options?.stiffness ? options.stiffness : spring.stiffiness, options?.gravityPower ? options.gravityPower : spring.gravityPower, options?.gravityDir
                ? options.gravityDir
                : new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(
                // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
                -spring.gravityDir.x, spring.gravityDir.y, -spring.gravityDir.z).normalize(), options?.dragForce ? options.dragForce : spring.dragForce, getBone(spring.center), options?.hitRadius ? options.hitRadius : spring.hitRadius, rootBones, springColliders));
        });
        return springs;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts":
/*!******************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBoneLogic": () => (/* binding */ VRMSpringBoneLogic)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");

// based on
// http://rocketjump.skr.jp/unity3d/109/
// https://github.com/dwango/UniVRM/blob/master/Scripts/SpringBone/VRMSpringBone.cs
// https://github.com/pixiv/three-vrm/blob/aad551e041fad553c19d2091e5f5eaff1eb8faa8/packages/three-vrm/src/springbone/VRMSpringBone.ts
const IDENTITY_MATRIX = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix.Identity();
const _v3A = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _v3B = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _v3C = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _quatA = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Quaternion();
const _matA = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix();
const _matB = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix();
/**
 * Verlet Spring Bone
 */
class VRMSpringBoneLogic {
    /**
     * @param center Center reference of TransformNode
     * @param radius Collision Radius
     * @param transform Base TransformNode
     */
    constructor(center, radius, transform) {
        this.center = center;
        this.radius = radius;
        this.transform = transform;
        this.currentTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        this.prevTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        this.nextTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        // Initialize rotationQuaternion when not initialized
        if (!transform.rotationQuaternion) {
            transform.rotationQuaternion = transform.rotation.toQuaternion();
        }
        const worldMatrix = transform.getWorldMatrix();
        this.centerSpacePosition = worldMatrix.getTranslation();
        this.initialLocalMatrix = transform._localMatrix.clone();
        this.initialLocalRotation = transform.rotationQuaternion.clone();
        const children = transform.getChildTransformNodes(true);
        if (children.length === 0) {
            this.initialLocalChildPosition = transform.position.clone().normalize().scaleInPlace(0.07);
        }
        else {
            this.initialLocalChildPosition = children[0].position.clone();
        }
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, worldMatrix, this.currentTail);
        this.prevTail.copyFrom(this.currentTail);
        this.nextTail.copyFrom(this.currentTail);
        this.boneAxis = this.initialLocalChildPosition.normalizeToNew();
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, worldMatrix, _v3A);
        this.centerSpaceBoneLength = _v3A.subtractInPlace(this.centerSpacePosition).length();
        if (center) {
            this.getMatrixWorldToCenter(_matA);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.currentTail, _matA, this.currentTail);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.prevTail, _matA, this.prevTail);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.nextTail, _matA, this.nextTail);
            worldMatrix.multiplyToRef(_matA, _matA);
            _matA.getTranslationToRef(this.centerSpacePosition);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, _matA, _v3A);
            this.centerSpaceBoneLength = _v3A.subtractInPlace(this.centerSpacePosition).length();
        }
    }
    /**
     * Update Tail position
     *
     * @param stiffnessForce Current frame stiffness
     * @param dragForce Current frame drag force
     * @param external Current frame external force
     * @param colliderGroups Current frame colliderGroups
     */
    update(stiffnessForce, dragForce, external, colliderGroups) {
        if (Number.isNaN(this.transform.getAbsolutePosition().x)) {
            // Do not update when absolute position is invalid
            return;
        }
        // Get bone position in center space
        this.getMatrixWorldToCenter(_matA);
        this.transform.getWorldMatrix().multiplyToRef(_matA, _matA);
        _matA.getTranslationToRef(this.centerSpacePosition);
        // Get parent position in center space
        this.getMatrixWorldToCenter(_matB);
        this.getParentMatrixWorld().multiplyToRef(_matB, _matB);
        // verlet積分で次の位置を計算
        this.nextTail.copyFrom(this.currentTail);
        {
            // 減衰付きで前のフレームの移動を継続
            _v3A.copyFrom(this.currentTail)
                .subtractInPlace(this.prevTail)
                .scaleInPlace(1.0 - dragForce);
            this.nextTail.addInPlace(_v3A);
        }
        {
            // 親の回転による子ボーンの移動目標
            _v3A.copyFrom(this.boneAxis);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(_v3A, this.initialLocalMatrix, _v3A);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(_v3A, _matB, _v3A);
            _v3A.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(stiffnessForce);
            this.nextTail.addInPlace(_v3A);
        }
        {
            // 外力による移動量
            this.nextTail.addInPlace(external);
        }
        {
            // 長さを boneLength に強制
            this.nextTail.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(this.centerSpaceBoneLength).addInPlace(this.centerSpacePosition);
        }
        {
            // Collision で移動
            this.collide(colliderGroups, this.nextTail);
        }
        this.prevTail.copyFrom(this.currentTail);
        this.currentTail.copyFrom(this.nextTail);
        this.initialLocalMatrix.multiplyToRef(_matB, _matA);
        const initialCenterSpaceMatrixInv = _matA.invert();
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.nextTail, initialCenterSpaceMatrixInv, _v3A);
        _v3A.normalizeToRef(_v3B);
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Quaternion.FromUnitVectorsToRef(this.boneAxis, _v3B, _quatA);
        const applyRotation = _quatA;
        this.initialLocalRotation.multiplyToRef(applyRotation, this.transform.rotationQuaternion);
        // update WorldMatrix
        this.transform.computeWorldMatrix(true);
    }
    /**
     * Create a matrix that converts world space into center space.
     * @param result Target matrix
     */
    getMatrixWorldToCenter(result) {
        if (this.center) {
            this.center.getWorldMatrix().invertToRef(result);
        }
        else {
            result.copyFrom(IDENTITY_MATRIX);
        }
        return result;
    }
    /**
     * Returns the world matrix of its parent object.
     */
    getParentMatrixWorld() {
        return this.transform.parent ? this.transform.parent.getWorldMatrix() : IDENTITY_MATRIX;
    }
    /**
     * 衝突判定を行う
     * @param colliderGroups
     * @param tail
     */
    collide(colliderGroups, tail) {
        colliderGroups.forEach((colliderGroup) => {
            colliderGroup.colliders.forEach((collider) => {
                this.getMatrixWorldToCenter(_matA);
                collider.sphere.computeWorldMatrix().multiplyToRef(_matA, _matA);
                _matA.getTranslationToRef(_v3A);
                const colliderCenterSpacePosition = _v3A;
                let maxAbsScale = 0;
                collider.sphere.absoluteScaling.asArray().forEach((s) => {
                    maxAbsScale = Math.max(maxAbsScale, Math.abs(s));
                });
                const colliderRadius = collider.radius * maxAbsScale;
                const r = this.radius + colliderRadius;
                tail.subtractToRef(colliderCenterSpacePosition, _v3B);
                if (_v3B.lengthSquared() <= r * r) {
                    const normal = _v3B.copyFrom(tail).subtractInPlace(colliderCenterSpacePosition).normalize();
                    const posFromCollider = _v3C.copyFrom(colliderCenterSpacePosition).addInPlace(normal.scaleInPlace(r));
                    tail.copyFrom(posFromCollider.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(this.centerSpaceBoneLength).addInPlace(this.centerSpacePosition));
                }
            });
        });
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts":
/*!************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBone": () => (/* binding */ VRMSpringBone)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/standardMaterial */ "./node_modules/@babylonjs/core/Materials/standardMaterial.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _babylonjs_core_Meshes_meshBuilder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Meshes/meshBuilder */ "./node_modules/@babylonjs/core/Meshes/meshBuilder.js");
/* harmony import */ var _vrm_spring_bone_logic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vrm-spring-bone-logic */ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts");




/**
 * @see https://github.com/vrm-c/UniVRM/blob/master/Assets/VRM/UniVRM/Scripts/SpringBone/VRMSpringBone.cs
 */
class VRMSpringBone {
    /**
     * @see https://github.com/vrm-c/vrm-specification/tree/master/specification/0.0
     * @param comment Annotation comment
     * @param stiffness The resilience of the swaying object (the power of returning to the initial pose).
     * @param gravityPower The strength of gravity.
     * @param gravityDir The direction of gravity. Set (0, -1, 0) for simulating the gravity. Set (1, 0, 0) for simulating the wind.
     * @param dragForce The resistance (deceleration) of automatic animation.
     * @param center The reference point of a swaying object can be set at any location except the origin.
     *               When implementing UI moving with warp,
     *               the parent node to move with warp can be specified if you don't want to make the object swaying with warp movement.
     * @param hitRadius The radius of the sphere used for the collision detection with colliders.
     * @param bones Specify the node index of the root bone of the swaying object.
     * @param colliderGroups Specify the index of the collider group for collisions with swaying objects.
     */
    constructor(comment, stiffness, gravityPower, gravityDir, dragForce, center, hitRadius, bones, colliderGroups) {
        this.comment = comment;
        this.stiffness = stiffness;
        this.gravityPower = gravityPower;
        this.gravityDir = gravityDir;
        this.dragForce = dragForce;
        this.center = center;
        this.hitRadius = hitRadius;
        this.bones = bones;
        this.colliderGroups = colliderGroups;
        this.verlets = [];
        this.activeBones = [];
        /** @hidden */
        this.drawGizmo = false;
        this.activeBones = this.bones.filter((bone) => bone !== null);
        this.activeBones.forEach((bone) => {
            [bone].concat(bone.getChildTransformNodes()).forEach((b) => {
                this.verlets.push(new _vrm_spring_bone_logic__WEBPACK_IMPORTED_MODULE_3__.VRMSpringBoneLogic(this.center, this.hitRadius, b));
            });
        });
        if (this.drawGizmo) {
            this.setupGizmo();
        }
    }
    setupGizmo() {
        this.activeBones.forEach((bone) => {
            const scene = bone.getScene();
            [bone].concat(bone.getChildTransformNodes()).forEach((b) => {
                const boneGizmo = _babylonjs_core_Meshes_meshBuilder__WEBPACK_IMPORTED_MODULE_2__.MeshBuilder.CreateSphere(b.name + '_boneGizmo', {
                    segments: 6,
                    diameter: this.hitRadius * 2,
                    updatable: true,
                }, scene);
                const mat = new _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__.StandardMaterial(b.name + '_boneGizmomat', scene);
                mat.emissiveColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3.Red();
                mat.wireframe = true;
                boneGizmo.material = mat;
                boneGizmo.setParent(b);
                boneGizmo.position = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero();
            });
        });
        this.colliderGroups.forEach((group) => {
            const scene = group.transform.getScene();
            group.colliders.forEach((collider) => {
                const sphere = collider.sphere;
                if (!sphere.isEnabled(false)) {
                    sphere.setEnabled(true);
                    const mat = new _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__.StandardMaterial(group.transform.name + '_colliderGizmomat', scene);
                    mat.emissiveColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3.Yellow();
                    mat.wireframe = true;
                    sphere.material = mat;
                }
            });
        });
    }
    /**
     * Update bones
     *
     * @param deltaTime
     */
    //* TODO: Patched.
    // public async update(deltaTime: number): Promise<void> {
    async update(deltaTime, boneOptions) {
        //* TODO: Patched.
        const oldOptions = this.updateOptions(boneOptions);
        const stiffness = this.stiffness * deltaTime;
        const external = this.gravityDir.scale(this.gravityPower * deltaTime);
        const promises = this.verlets.map((verlet) => {
            return new Promise((resolve) => {
                verlet.update(stiffness, this.dragForce, external, this.colliderGroups);
                resolve();
            });
        });
        //* TODO: Patched.
        // Restore options
        this.updateOptions(oldOptions);
        return Promise.all(promises).then(() => {
            /* Do Nothing */
        });
    }
    //* TODO: Patched.
    updateOptions(boneOptions) {
        const backupOptions = {
            stiffness: this.stiffness,
            gravityPower: this.gravityPower,
            gravityDir: this.gravityDir.clone(),
            dragForce: this.dragForce,
            hitRadius: this.hitRadius,
        };
        this.stiffness = boneOptions?.stiffness || this.stiffness;
        this.gravityPower = boneOptions?.gravityPower || this.gravityPower;
        this.gravityDir = boneOptions?.gravityDir || this.gravityDir;
        this.dragForce = boneOptions?.dragForce || this.dragForce;
        this.hitRadius = boneOptions?.hitRadius || this.hitRadius;
        return backupOptions;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-extension.ts":
/*!**************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-extension.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMLoaderExtension": () => (/* binding */ VRMLoaderExtension)
/* harmony export */ });
/* harmony import */ var _vrm_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vrm-manager */ "./src/importer/babylon-vrm-loader/src/vrm-manager.ts");
/* harmony import */ var _vrm_material_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vrm-material-generator */ "./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts");


/**
 * `extensions` に入る拡張キー
 */
//* TODO: Patched.
// const NAME = 'VRM';
/**
 * VRM 拡張を処理する
 * [Specification](https://github.com/vrm-c/vrm-specification/tree/master/specification/0.0)
 */
class VRMLoaderExtension {
    /**
     * @inheritdoc
     */
    //* TODO: Patched.
    constructor(loader, v3DCore) {
        this.loader = loader;
        this.v3DCore = v3DCore;
        /**
         * @inheritdoc
         */
        this.name = VRMLoaderExtension.NAME;
        /**
         * @inheritdoc
         */
        this.enabled = true;
        /**
         * この Mesh index 以降が読み込み対象
         */
        this.meshesFrom = 0;
        /**
         * この TransformNode index 以降が読み込み対象
         */
        this.transformNodesFrom = 0;
        /**
         * この Material index 以降が読み込み対象
         */
        this.materialsFrom = 0;
        //* TODO: Patched.
        /**
         * Loader observers
         */
        this.loaderObservers = [];
        // GLTFLoader has already added rootMesh as __root__ before load extension
        // @see glTFLoader._loadData
        this.meshesFrom = this.loader.babylonScene.meshes.length - 1;
        this.transformNodesFrom = this.loader.babylonScene.transformNodes.length;
        this.materialsFrom = this.loader.babylonScene.materials.length;
        //* TODO: Patched.
        this.addLoaderObserver(this.v3DCore);
        this.onLoadedCallBack = () => {
            v3DCore.addVRMManager(this.manager);
        };
        v3DCore.addOnLoadCompleteCallbacks(this.onLoadedCallBack);
    }
    /**
     * @inheritdoc
     */
    dispose() {
        this.loader = null;
        //* TODO: Patched.
        this.loaderObservers = [];
        this.v3DCore.removeOnLoadCompleteCallback(this.onLoadedCallBack);
    }
    /**
     * @inheritdoc
     */
    onReady() {
        if (!this.loader.gltf.extensions || !this.loader.gltf.extensions[VRMLoaderExtension.NAME]) {
            return;
        }
        //* TODO: Patched.
        // const scene = this.loader.babylonScene;
        // const manager = new VRMManager(this.loader.gltf.extensions[VRMLoaderExtension.NAME], this.loader.babylonScene, this.meshesFrom, this.transformNodesFrom, this.materialsFrom);
        this.manager = new _vrm_manager__WEBPACK_IMPORTED_MODULE_0__.VRMManager(this.loader.gltf.extensions[VRMLoaderExtension.NAME], this.loader.babylonScene, this.meshesFrom, this.transformNodesFrom, this.materialsFrom);
        //* TODO: Patched.
        // scene.metadata = scene.metadata || {};
        // scene.metadata.vrmManagers = scene.metadata.vrmManagers || [];
        // scene.metadata.vrmManagers.push(manager);
        this.loader.babylonScene.onDisposeObservable.add(() => {
            // Scene dispose 時に Manager も破棄する
            //* TODO: Patched.
            // manager.dispose();
            this.manager.dispose();
            // this.loader.babylonScene.metadata.vrmManagers = [];
        });
        //* TODO: Patched.
        // Inform observers
        for (const observer of this.loaderObservers) {
            observer.onLoadReady();
        }
    }
    /**
     * @inheritdoc
     */
    _loadVertexDataAsync(context, primitive, babylonMesh) {
        if (!primitive.extras || !primitive.extras.targetNames) {
            return null;
        }
        // まだ MorphTarget が生成されていないので、メタ情報にモーフターゲット情報を入れておく
        babylonMesh.metadata = babylonMesh.metadata || {};
        babylonMesh.metadata.vrmTargetNames = primitive.extras.targetNames;
        return null;
    }
    /**
     * @inheritdoc
     */
    _loadMaterialAsync(context, material, mesh, babylonDrawMode, assign) {
        // ジェネレータでマテリアルを生成する
        return new _vrm_material_generator__WEBPACK_IMPORTED_MODULE_1__.VRMMaterialGenerator(this.loader).generate(context, material, mesh, babylonDrawMode, assign);
    }
    //* TODO: Patched.
    /**
     * Add observer
     */
    addLoaderObserver(observer) {
        this.loaderObservers.push(observer);
    }
}
//* TODO: Patched.
VRMLoaderExtension.NAME = 'VRM';
//* TODO: Patched.
// ローダーに登録する
// GLTFLoader.RegisterExtension(NAME, (loader) => new VRM(loader));


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts":
/*!****************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMFileLoader": () => (/* binding */ VRMFileLoader)
/* harmony export */ });
/* harmony import */ var _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/loaders/glTF/glTFFileLoader */ "./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js");

/**
 * VRM/VCI ファイルを読み込めるようにする
 * 拡張子を変更しただけ
 */
class VRMFileLoader extends _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_0__.GLTFFileLoader {
    constructor() {
        super(...arguments);
        this.name = 'vrm';
        this.extensions = {
            '.vrm': { isBinary: true },
            '.vci': { isBinary: true },
        };
        this.vrmManager = null;
    }
    createPlugin() {
        return new VRMFileLoader();
    }
    //* TODO: Patched.
    loadAsync(scene, data, rootUrl, onProgress, fileName) {
        this.uri = rootUrl;
        if (fileName)
            this.uri += fileName;
        return super.loadAsync(scene, data, rootUrl, onProgress, fileName);
    }
}
//* TODO: Patched.
// if (SceneLoader) {
//     SceneLoader.RegisterPlugin(new VRMFileLoader());
// }


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts":
/*!***************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IVRMMaterialPropertyShader": () => (/* binding */ IVRMMaterialPropertyShader)
/* harmony export */ });
var IVRMMaterialPropertyShader;
(function (IVRMMaterialPropertyShader) {
    IVRMMaterialPropertyShader["VRM_USE_GLTFSHADER"] = "VRM_USE_GLTFSHADER";
    IVRMMaterialPropertyShader["VRMMToon"] = "VRM/MToon";
    IVRMMaterialPropertyShader["VRMUnlitTransparentZWrite"] = "VRM/UnlitTransparentZWrite";
})(IVRMMaterialPropertyShader || (IVRMMaterialPropertyShader = {}));


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-manager.ts":
/*!************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-manager.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "morphingTargetProperty": () => (/* binding */ morphingTargetProperty),
/* harmony export */   "VRMManager": () => (/* binding */ VRMManager)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _secondary_animation_spring_bone_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./secondary-animation/spring-bone-controller */ "./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts");
/* harmony import */ var _humanoid_bone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./humanoid-bone */ "./src/importer/babylon-vrm-loader/src/humanoid-bone.ts");
/* harmony import */ var _material_value_binding_merger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./material-value-binding-merger */ "./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts");




//* TODO: Patched.
class morphingTargetProperty {
    constructor(label, value, manager) {
        this.label = label;
        this.manager = manager;
        this._value = value;
    }
    get value() {
        return this._value;
    }
    set value(value) {
        this._value = Math.max(0, Math.min(1, value));
        this.manager.morphing(this.label, value);
    }
}
/**
 * VRM キャラクターを動作させるためのマネージャ
 */
class VRMManager {
    /**
     *
     * @param ext glTF.extensions.VRM の中身 json
     * @param scene
     * @param meshesFrom この番号以降のメッシュがこの VRM に該当する
     * @param transformNodesFrom この番号以降の TransformNode がこの VRM に該当する
     * @param materialsNodesFrom この番号以降の Material がこの VRM に該当する
     */
    constructor(ext, scene, meshesFrom, transformNodesFrom, materialsNodesFrom) {
        this.ext = ext;
        this.scene = scene;
        this.meshesFrom = meshesFrom;
        this.transformNodesFrom = transformNodesFrom;
        this.materialsNodesFrom = materialsNodesFrom;
        this.isBinaryMorphMap = {};
        this.morphTargetMap = {};
        this.materialValueBindingMergerMap = {};
        this.presetMorphTargetMap = {};
        this.transformNodeMap = {};
        this.transformNodeCache = {};
        this.meshCache = {};
        this._cameras = [];
        this.meshCache = this.constructMeshCache();
        this.transformNodeCache = this.constructTransformNodeCache();
        this.springBoneController = new _secondary_animation_spring_bone_controller__WEBPACK_IMPORTED_MODULE_1__.SpringBoneController(this.ext.secondaryAnimation, this.findTransformNode.bind(this));
        if (this.ext.blendShapeMaster && this.ext.blendShapeMaster.blendShapeGroups) {
            this.constructIsBinaryMap();
            this.constructMorphTargetMap();
            this.constructMaterialValueBindingMergerMap();
        }
        this.constructTransformNodeMap();
        this._humanoidBone = new _humanoid_bone__WEBPACK_IMPORTED_MODULE_2__.HumanoidBone(this.transformNodeMap);
        //* TODO: Patched.
        this.removeDuplicateSkeletons();
        this._rootSkeleton = this.getRootSkeletonNode();
        // Rename __root__ node
        this.rootMesh.name = VRMManager.ROOT_MESH_PREFIX + this.scene.getNodes().filter((e) => e.name.includes(VRMManager.ROOT_MESH_PREFIX)).length;
    }
    get cameras() {
        return this._cameras;
    }
    appendCamera(camera) {
        this._cameras.push(camera);
    }
    resetCameras() {
        this._cameras = [];
    }
    //* TODO: Patched.
    /**
     * Remove duplicate skeletons when importing VRM.
     * Only tested on VRoidStudio output files.
     * @private
     */
    removeDuplicateSkeletons() {
        let skeleton = null;
        for (const nodeIndex of Object.keys(this.meshCache).map(Number)) {
            const meshes = this.meshCache[nodeIndex];
            if (meshes.length && meshes[0].skeleton) {
                if (!skeleton) {
                    skeleton = meshes[0].skeleton;
                    if (this._rootMesh) {
                        const rootBone = skeleton.bones[0];
                        // Usually it is called "Root", but there are exceptions
                        if (rootBone.name !== 'Root')
                            console.warn('The first bone has a different name than "Root"');
                    }
                }
                else {
                    // weak sanity check
                    if (skeleton.bones.length != meshes[0].skeleton.bones.length)
                        console.warn('Skeletons have different numbers of bones!');
                    meshes[0].skeleton.dispose();
                    for (const mesh of meshes) {
                        mesh.skeleton = skeleton;
                    }
                }
            }
        }
    }
    //* TODO: Patched.
    /**
     * Find the root node of skeleton.
     * @private
     */
    getRootSkeletonNode() {
        const rootMeshChildren = this._rootMesh.getChildren((node) => {
            return node.name === 'Root' || node.name === 'Armature';
        });
        if (rootMeshChildren.length > 0)
            return rootMeshChildren[0];
        else {
            // Try to find in scene directly
            const rootMeshChild = this.scene.getNodeByName('Root') ? this.scene.getNodeByName('Root') : this.scene.getNodeByName('Armature');
            if (rootMeshChild && !rootMeshChild.parent)
                return rootMeshChild;
            else
                throw Error('Cannot find root skeleton node!');
        }
    }
    /**
     * Secondary Animation を更新する
     *
     * @param deltaTime 前フレームからの経過秒数(sec)
     */
    async update(deltaTime) {
        await this.springBoneController.update(deltaTime);
    }
    /**
     * 破棄処理
     */
    dispose() {
        this.springBoneController.dispose();
        this._humanoidBone.dispose();
        this.morphTargetMap = null;
        this.materialValueBindingMergerMap = null;
        this.presetMorphTargetMap = null;
        this.transformNodeMap = null;
        this.transformNodeCache = null;
        this.meshCache = null;
        this._rootMesh = null;
    }
    /**
     * モーフィングを行う
     * @param label モーフ名
     * @param value 値(0〜1)
     */
    morphing(label, value) {
        const v = this.calcMorphValue(label, value);
        if (this.morphTargetMap[label]) {
            this.morphTargetMap[label].forEach((setting) => {
                setting.target.influence = v * (setting.weight / 100);
            });
        }
        if (this.materialValueBindingMergerMap[label]) {
            this.materialValueBindingMergerMap[label].morphing(v);
        }
    }
    /**
     * プリセットモーフのモーフィングを行う
     * @param label モーフ名
     * @param value 値(0〜1)
     */
    morphingPreset(label, value) {
        if (!this.presetMorphTargetMap[label]) {
            return;
        }
        const v = this.calcMorphValue(label, value);
        this.presetMorphTargetMap[label].forEach((setting) => {
            setting.target.influence = v * (setting.weight / 100);
        });
    }
    /**
     * モーフィング用の値を計算する
     * @param label モーフ名
     * @param value 値
     */
    calcMorphValue(label, value) {
        const v = Math.max(0.0, Math.min(1.0, value));
        if (this.isBinaryMorphMap[label]) {
            return v > 0.5 ? 1.0 : 0.0;
        }
        return v;
    }
    /**
     * list morphing name
     */
    getMorphingList() {
        return Object.keys(this.morphTargetMap);
    }
    /**
     * 一人称時のカメラ位置を絶対座標として取得する
     *
     * firstPersonBone が未設定の場合は null を返す
     *
     * @returns 一人称時のカメラの現在における絶対座標
     */
    getFirstPersonCameraPosition() {
        const firstPersonBone = this.getFirstPersonBone();
        if (!firstPersonBone) {
            return null;
        }
        const basePos = firstPersonBone.getAbsolutePosition();
        const offsetPos = this.ext.firstPerson.firstPersonBoneOffset;
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(basePos.x + offsetPos.x, basePos.y + offsetPos.y, basePos.z + offsetPos.z);
    }
    /**
     * 一人称時に頭とみなす TransformNode を取得する
     */
    getFirstPersonBone() {
        return this.findTransformNode(this.ext.firstPerson.firstPersonBone);
    }
    /**
     * ボーン名からそのボーンに該当する TransformNode を取得する
     *
     * @param name HumanBoneName
     * @deprecated Use humanoidBone getter instead. This method will delete at v2.
     */
    getBone(name) {
        return this.transformNodeMap[name] || null;
    }
    /**
     * Get HumanoidBone Methods
     */
    get humanoidBone() {
        return this._humanoidBone;
    }
    /**
     * VRM Root mesh
     *
     * Useful for Model Transformation
     */
    get rootMesh() {
        return this._rootMesh;
    }
    /**
     * node 番号から該当する TransformNode を探す
     * 数が多くなるのでキャッシュに参照を持つ構造にする
     * gltf の node 番号は `metadata.gltf.pointers` に記録されている
     * @param nodeIndex
     */
    findTransformNode(nodeIndex) {
        return this.transformNodeCache[nodeIndex] || null;
    }
    /**
     * mesh 番号からメッシュを探す
     * gltf の mesh 番号は `metadata.gltf.pointers` に記録されている
     * @deprecated Use findMeshes instead. This method has broken.
     */
    findMesh(meshIndex) {
        return (this.meshCache[meshIndex] && this.meshCache[meshIndex][0]) || null;
    }
    /**
     * mesh 番号からメッシュを探す
     * gltf の mesh 番号は `metadata.gltf.pointers` に記録されている
     */
    findMeshes(meshIndex) {
        return this.meshCache[meshIndex] || null;
    }
    /**
     * 事前に MorphTarget と isBinary を紐付ける
     */
    constructIsBinaryMap() {
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            this.isBinaryMorphMap[g.name] = g.isBinary;
        });
    }
    /**
     * 事前に MorphTarget と BlendShape を紐付ける
     */
    constructMorphTargetMap() {
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            if (!g.binds) {
                return;
            }
            g.binds.forEach((b) => {
                const meshes = this.findMeshes(b.mesh);
                if (!meshes) {
                    console.log(`Undefined BlendShapeBind Mesh`, b);
                    return;
                }
                meshes.forEach((mesh) => {
                    const morphTargetManager = mesh.morphTargetManager;
                    if (!morphTargetManager) {
                        console.log(`Undefined morphTargetManager`, b);
                        return;
                    }
                    const target = morphTargetManager.getTarget(b.index);
                    this.morphTargetMap[g.name] = this.morphTargetMap[g.name] || [];
                    this.morphTargetMap[g.name].push({
                        target,
                        weight: b.weight,
                    });
                    if (g.presetName) {
                        this.presetMorphTargetMap[g.presetName] = this.presetMorphTargetMap[g.presetName] || [];
                        this.presetMorphTargetMap[g.presetName].push({
                            target,
                            weight: b.weight,
                        });
                    }
                });
            });
        });
    }
    /**
     * 事前に MaterialValueBindingMerger とモーフ名を紐付ける
     */
    constructMaterialValueBindingMergerMap() {
        const materials = this.scene.materials.slice(this.materialsNodesFrom);
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            if (!g.materialValues) {
                return;
            }
            this.materialValueBindingMergerMap[g.name] = new _material_value_binding_merger__WEBPACK_IMPORTED_MODULE_3__.MaterialValueBindingMerger(materials, g.materialValues);
        });
    }
    /**
     * 事前に TransformNode と bone 名を紐づける
     */
    constructTransformNodeMap() {
        this.ext.humanoid.humanBones.forEach((b) => {
            const node = this.findTransformNode(b.node);
            if (!node) {
                return;
            }
            this.transformNodeMap[b.bone] = node;
        });
    }
    /**
     * node 番号と TransformNode を紐づける
     */
    constructTransformNodeCache() {
        const cache = {};
        for (let index = this.transformNodesFrom; index < this.scene.transformNodes.length; index++) {
            const node = this.scene.transformNodes[index];
            // ポインタが登録されていないものは省略
            if (!node || !node.metadata || !node.metadata.gltf || !node.metadata.gltf.pointers || node.metadata.gltf.pointers.length === 0) {
                continue;
            }
            for (const pointer of node.metadata.gltf.pointers) {
                if (pointer.startsWith('/nodes/')) {
                    const nodeIndex = parseInt(pointer.substr(7), 10);
                    cache[nodeIndex] = node;
                    break;
                }
            }
        }
        return cache;
    }
    /**
     * mesh 番号と Mesh を紐づける
     */
    constructMeshCache() {
        const cache = {};
        for (let index = this.meshesFrom; index < this.scene.meshes.length; index++) {
            const mesh = this.scene.meshes[index];
            if (mesh.id === '__root__') {
                this._rootMesh = mesh;
                continue;
            }
            // ポインタが登録されていないものは省略
            if (!mesh || !mesh.metadata || !mesh.metadata.gltf || !mesh.metadata.gltf.pointers || mesh.metadata.gltf.pointers.length === 0) {
                continue;
            }
            for (const pointer of mesh.metadata.gltf.pointers) {
                const match = pointer.match(/^\/meshes\/(\d+).+$/);
                if (match) {
                    const nodeIndex = parseInt(match[1], 10);
                    cache[nodeIndex] = cache[nodeIndex] || [];
                    cache[nodeIndex].push(mesh);
                    break;
                }
            }
        }
        return cache;
    }
}
//* TODO: Patched.
VRMManager.ROOT_MESH_PREFIX = 'vrm_root_';


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts":
/*!***********************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMMaterialGenerator": () => (/* binding */ VRMMaterialGenerator)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! babylon-mtoon-material */ "./node_modules/babylon-mtoon-material/dist/index.module.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vrm-interfaces */ "./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts");
/* harmony import */ var _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Engines/engine */ "./node_modules/@babylonjs/core/Engines/engine.js");




/**
 * VRM で指定される Material を生成する
 * [VRM が提供するシェーダ](https://vrm.dev/en/univrm/shaders/index.html) を特定し読み込む
 * - UnlitTexture: 不透明, VRM ファイル側で [KHR_materials_unlit](https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_unlit) が定義されているため、何もしない
 * - UnlitCutout: 透明度が閾値以下の部分を透明とする, 同上
 * - UnlitTransparent: アルファブレンド。ZWriteしない, 同上
 * - UnlitTransparentZWrite: アルファブレンド。ZWriteする, 同上に加え、プロパティで ZWrite を強制しています
 * - MToon: MToonMaterial を差し替えています。
 */
class VRMMaterialGenerator {
    /**
     * @inheritdoc
     */
    constructor(loader) {
        this.loader = loader;
    }
    /**
     * マテリアルを生成する Promise を返す
     * VRM 対象外の場合は null
     */
    generate(context, material, mesh, babylonDrawMode, assign) {
        const materialProp = this.findMaterialPropertyByName(material.name, this.getMaterialProperties());
        if (!materialProp) {
            return null;
        }
        mesh.alphaIndex = materialProp.renderQueue;
        const newMaterial = this.createMaterialByShader(context, material, babylonDrawMode, materialProp);
        if (!newMaterial) {
            return null;
        }
        assign(newMaterial);
        if (newMaterial instanceof babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__.MToonMaterial) {
            return this.loadMToonTexturesAsync(context, newMaterial, materialProp);
        }
        return Promise.resolve(newMaterial);
    }
    /**
     * VRM または VCI からマテリアルプロパティの配列を探す
     */
    getMaterialProperties() {
        if (!this.loader.gltf.extensions) {
            return [];
        }
        if (this.loader.gltf.extensions.VRM && this.loader.gltf.extensions.VRM.materialProperties) {
            return this.loader.gltf.extensions.VRM.materialProperties;
        }
        if (this.loader.gltf.extensions.VCAST_vci_material_unity && this.loader.gltf.extensions.VCAST_vci_material_unity.materials) {
            return this.loader.gltf.extensions.VCAST_vci_material_unity.materials;
        }
        return [];
    }
    /**
     * マテリアル名から MaterialProperty を探す
     * @param materialName マテリアル名
     * @param extension 拡張データ
     */
    findMaterialPropertyByName(materialName, materials) {
        if (!materialName || !materials) {
            return null;
        }
        const mats = materials.filter((v) => v.name === materialName);
        if (mats.length === 0) {
            return null;
        }
        else if (mats.length >= 2) {
            this.loader.log(`Duplicated vrm material name found: ${materialName}`);
        }
        return mats[mats.length - 1];
    }
    /**
     * テクスチャを読み込む
     * @param context 現在のコンテキスト
     * @param material 生成した MToonMaterial
     * @param prop 生成した MToonMaterial のマテリアルプロパティ
     */
    loadMToonTexturesAsync(context, material, prop) {
        const promises = [];
        // 全てのテクスチャの UV Offset & Scale はメインテクスチャのものを流用する
        const uvOffsetScale = prop.vectorProperties._MainTex;
        if (!uvOffsetScale) {
            return Promise.resolve(material);
        }
        const applyTexture = (index, callback) => {
            applyPropertyWhenDefined(index, (value) => {
                promises.push(this.loader.loadTextureInfoAsync(`${context}/textures/${index}`, { index: value }, (babylonTexture) => {
                    // 実際は Texture インスタンスが来るのでキャスト
                    const t = babylonTexture;
                    t.uOffset = uvOffsetScale[0];
                    t.vOffset = uvOffsetScale[1];
                    t.uScale = uvOffsetScale[2];
                    t.vScale = uvOffsetScale[3];
                    callback(babylonTexture);
                }));
            });
        };
        applyTexture(prop.textureProperties._MainTex, (texture) => {
            if (material.alphaBlend || material.alphaTest) {
                texture.hasAlpha = true;
            }
            material.diffuseTexture = texture;
        });
        applyTexture(prop.textureProperties._ShadeTexture, (texture) => (material.shadeTexture = texture));
        applyTexture(prop.textureProperties._BumpMap, (texture) => (material.bumpTexture = texture));
        applyTexture(prop.textureProperties._ReceiveShadowTexture, (texture) => (material.receiveShadowTexture = texture));
        applyTexture(prop.textureProperties._ShadingGradeTexture, (texture) => (material.shadingGradeTexture = texture));
        applyTexture(prop.textureProperties._RimTexture, (texture) => (material.rimTexture = texture));
        applyTexture(prop.textureProperties._SphereAdd, (texture) => (material.matCapTexture = texture));
        applyTexture(prop.textureProperties._EmissionMap, (texture) => (material.emissiveTexture = texture));
        applyTexture(prop.textureProperties._OutlineWidthTexture, (texture) => (material.outlineWidthTexture = texture));
        applyTexture(prop.textureProperties._UvAnimMaskTexture, (texture) => (material.uvAnimationMaskTexture = texture));
        return Promise.all(promises).then(() => material);
    }
    /**
     * シェーダ名からマテリアルを推測して生成する
     * @param context 現在のコンテキスト
     * @param material glTF マテリアル
     * @param babylonDrawMode 描画種類
     * @param prop 生成するマテリアルプロパティ
     */
    createMaterialByShader(context, material, babylonDrawMode, prop) {
        if (prop.shader === _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__.IVRMMaterialPropertyShader.VRMMToon) {
            const mtoonMaterial = new babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__.MToonMaterial(material.name || `MToonMaterial${material.index}`, this.loader.babylonScene);
            this.setMToonMaterialProperties(mtoonMaterial, prop);
            return mtoonMaterial;
        }
        if (prop.shader === _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__.IVRMMaterialPropertyShader.VRMUnlitTransparentZWrite) {
            const mat = this.loader.createMaterial(context, material, babylonDrawMode);
            // 通常マテリアルに Depth Write を強制
            mat.disableDepthWrite = false;
            mat.forceDepthWrite = true;
            return mat;
        }
        return null;
    }
    /**
     * マテリアルに VRM プロパティを設定
     * VRM プロパティとマテリアルプロパティのマッピングを行っている
     * 初期値はマテリアル実装側に持っているため、値がある場合のみ上書きする
     */
    setMToonMaterialProperties(material, prop) {
        applyPropertyWhenDefined(prop.floatProperties._Cutoff, (value) => (material.alphaCutOff = value));
        applyPropertyWhenDefined(prop.vectorProperties._Color, (value) => {
            material.diffuseColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
            material.alpha = value[3];
        });
        applyPropertyWhenDefined(prop.vectorProperties._ShadeColor, (value) => {
            material.shadeColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._BumpScale, (value) => (material.bumpScale = value));
        applyPropertyWhenDefined(prop.floatProperties._ReceiveShadowRate, (value) => (material.receiveShadowRate = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadingGradeRate, (value) => (material.shadingGradeRate = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadeShift, (value) => (material.shadeShift = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadeToony, (value) => (material.shadeToony = value));
        applyPropertyWhenDefined(prop.floatProperties._LightColorAttenuation, (value) => (material.lightColorAttenuation = value));
        applyPropertyWhenDefined(prop.floatProperties._IndirectLightIntensity, (value) => (material.indirectLightIntensity = value));
        applyPropertyWhenDefined(prop.vectorProperties._RimColor, (value) => {
            material.rimColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._RimLightingMix, (value) => (material.rimLightingMix = value));
        applyPropertyWhenDefined(prop.floatProperties._RimFresnelPower, (value) => (material.rimFresnelPower = value));
        applyPropertyWhenDefined(prop.floatProperties._RimLift, (value) => (material.rimLift = value));
        applyPropertyWhenDefined(prop.vectorProperties._EmissionColor, (value) => {
            material.emissiveColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineWidth, (value) => (material.outlineWidth = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineScaledMaxDistance, (value) => (material.outlineScaledMaxDistance = value));
        applyPropertyWhenDefined(prop.vectorProperties._OutlineColor, (value) => {
            material.outlineColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineLightingMix, (value) => (material.outlineLightingMix = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimScrollX, (value) => (material.uvAnimationScrollX = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimScrollY, (value) => (material.uvAnimationScrollY = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimRotation, (value) => (material.uvAnimationRotation = value));
        applyPropertyWhenDefined(prop.floatProperties._DebugMode, (value) => (material.debugMode = value));
        applyPropertyWhenDefined(prop.floatProperties._BlendMode, (value) => {
            switch (value) {
                case 0: // Opaque
                    material.alphaBlend = false;
                    material.alphaTest = false;
                    break;
                case 1: // TransparentCutout
                    material.alphaBlend = false;
                    material.alphaTest = true;
                    material.alphaMode = _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__.Engine.ALPHA_COMBINE;
                    break;
                case 2: // Transparent
                    material.alphaBlend = true;
                    material.alphaTest = false;
                    material.alphaMode = _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__.Engine.ALPHA_COMBINE;
                    break;
            }
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineWidthMode, (value) => (material.outlineWidthMode = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineColorMode, (value) => (material.outlineColorMode = value));
        applyPropertyWhenDefined(prop.floatProperties._CullMode, (value) => (material.cullMode = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineCullMode, (value) => (material.outlineCullMode = value));
        applyPropertyWhenDefined(prop.keywordMap._ALPHABLEND_ON, (value) => (material.alphaBlend = value));
        applyPropertyWhenDefined(prop.keywordMap._ALPHATEST_ON, (value) => (material.alphaTest = value));
        applyPropertyWhenDefined(prop.floatProperties._ZWrite, (value) => {
            material.forceDepthWrite = Math.round(value) === 1;
            if (material.forceDepthWrite) {
                material.disableDepthWrite = false;
            }
        });
    }
}
/**
 * プロパティが設定されていればコールバックを実行する
 */
function applyPropertyWhenDefined(prop, callback) {
    if (typeof prop === 'undefined') {
        return;
    }
    callback(prop);
}


/***/ }),

/***/ "./src/index-test.ts":
/*!***************************!*\
  !*** ./src/index-test.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babylonjs_core_Loading_loadingScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Loading/loadingScreen */ "./node_modules/@babylonjs/core/Loading/loadingScreen.js");
/* harmony import */ var _babylonjs_core_Loading_Plugins_babylonFileLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Loading/Plugins/babylonFileLoader */ "./node_modules/@babylonjs/core/Loading/Plugins/babylonFileLoader.js");
/* harmony import */ var _babylonjs_core_Materials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Materials */ "./node_modules/@babylonjs/core/Materials/index.js");
/* harmony import */ var _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/loaders/glTF/glTFFileLoader */ "./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js");
/* harmony import */ var _babylonjs_core_Debug__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Debug */ "./node_modules/@babylonjs/core/Debug/index.js");
/* harmony import */ var _babylonjs_gui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/gui */ "./node_modules/@babylonjs/gui/index.js");
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/inspector */ "./node_modules/@babylonjs/inspector/dist/babylon.inspector.bundle.max.js");
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js");
/* harmony import */ var _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/Engines/engine */ "./node_modules/@babylonjs/core/Engines/engine.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./index */ "./src/index.ts");

// Register plugins (side effect)



// Debug



const debug = false;
const shadow_debug = false;
const spheres = false;




// Init BabylonJS Engine
const canvas = document.getElementById('renderCanvas');
let engine;
if (_babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__.Engine.isSupported()) {
    engine = new _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__.Engine(canvas, true);
}
const fileInput = document.getElementById('select-file');
window.onload = async (e) => {
    console.log("Onload");
    const vrmFile = 'testfiles/7822444336497004526.vrm';
    // Create v3d core
    const v3DCore = new _index__WEBPACK_IMPORTED_MODULE_10__.V3DCore(engine, new _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_7__.Scene(engine));
    v3DCore.transparentBackground();
    await v3DCore.AppendAsync('', vrmFile);
    // Get managers
    const vrmManager = v3DCore.getVRMManagerByURI(vrmFile);
    console.log("Printing loaded VRM file metadata: ", vrmManager.ext.meta);
    // Camera
    v3DCore.attachCameraTo(vrmManager);
    // Lights
    v3DCore.addAmbientLight(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Color3(1, 1, 1));
    // Lock camera target
    v3DCore.scene.onBeforeRenderObservable.add(() => {
        vrmManager.cameras[0].setTarget(vrmManager.rootMesh.getAbsolutePosition());
    });
    // Render loop
    engine.runRenderLoop(() => {
        v3DCore.scene.render();
    });
    // Model Transformation
    vrmManager.rootMesh.translate(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(1, 0, 0), 1);
    vrmManager.rootMesh.rotation = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0, 135, 0);
    // Work with HumanoidBone
    vrmManager.humanoidBone.leftUpperArm.addRotation(0, -0.5, 0);
    vrmManager.humanoidBone.head.addRotation(0.1, 0, 0);
    // Work with BlendShape(MorphTarget)
    vrmManager.morphing('Joy', 1.0);
};


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DCore": () => (/* reexport safe */ _v3d_core__WEBPACK_IMPORTED_MODULE_0__.V3DCore),
/* harmony export */   "V3DHelper": () => (/* reexport safe */ _helper__WEBPACK_IMPORTED_MODULE_1__.V3DHelper)
/* harmony export */ });
/* harmony import */ var _v3d_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v3d-core */ "./src/v3d-core.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/helper.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */




/***/ }),

/***/ "./src/scene/optimizer.ts":
/*!********************************!*\
  !*** ./src/scene/optimizer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DSceneOptimizer": () => (/* binding */ V3DSceneOptimizer)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ "./src/index.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


class V3DSceneOptimizer {
    constructor(scene, options) {
        this.scene = scene;
        this._options = options || V3DSceneOptimizer.CustomOptimizerOptions();
        this._optimizer = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SceneOptimizer(scene, this._options);
        this._optimizer.targetFrameRate = _index__WEBPACK_IMPORTED_MODULE_1__.V3DCore.FRAMERATE;
        this._optimizer.trackerDuration = 2000;
        this._optimizer.start();
        this.setupFocusEvents(this._optimizer);
    }
    get options() {
        return this._options;
    }
    set options(value) {
        this._options = value;
    }
    get optimizer() {
        return this._optimizer;
    }
    static CustomOptimizerOptions() {
        const options = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SceneOptimizerOptions();
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.LensFlaresOptimization(0));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.ParticlesOptimization(1));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.TextureOptimization(1, 512));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.RenderTargetsOptimization(2));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.PostProcessesOptimization(3));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.HardwareScalingOptimization(4, 2));
        return options;
    }
    setupFocusEvents(optimizer) {
        if (window) {
            console.log("setupFocusEvents");
            window.addEventListener('focusin', function (e) {
                console.log("Optimizer start");
                optimizer.start();
            }, true);
            window.addEventListener('focusout', function (e) {
                console.log("Optimizer stop");
                optimizer.stop();
                optimizer.reset();
            }, true);
        }
    }
}


/***/ }),

/***/ "./src/scene/skybox.ts":
/*!*****************************!*\
  !*** ./src/scene/skybox.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "v3DSkyBox": () => (/* binding */ v3DSkyBox)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _babylonjs_materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/materials */ "./node_modules/@babylonjs/materials/index.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


class v3DSkyBox {
    constructor(scene, textureName, boxSize, envTexture) {
        this.scene = scene;
        this.textureName = textureName;
        this.boxSize = boxSize;
        this.envTexture = envTexture;
        this._skybox = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.CreateBox("Skybox", boxSize, this.scene, undefined, _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.BACKSIDE);
        this._skyboxBase = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.CreateBox("SkyboxBase", boxSize + 1, this.scene, undefined, _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.BACKSIDE);
        this.createMaterial(textureName);
        this._skybox.material = this.skyboxMaterial;
        this._skyboxBase.material = this.skyboxBaseMaterial;
        this._skybox.renderingGroupId = 0;
        this._skyboxBase.renderingGroupId = 0;
        this._skybox.material.transparencyMode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Material.MATERIAL_ALPHATESTANDBLEND;
        this._skybox.material.alpha = 0.5;
        this.setupImageProcessing();
    }
    get skybox() {
        return this._skybox;
    }
    /**
     * Setup the skybox material and the skybox reflection texture
     * @param textureName name (URI) to the texture files
     * @private
     */
    createMaterial(textureName) {
        this.skyboxBaseMaterial = new _babylonjs_materials__WEBPACK_IMPORTED_MODULE_1__.SkyMaterial("SkyboxBaseMaterial", this.scene);
        this.skyboxMaterial = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.BackgroundMaterial("SkyboxMaterial", this.scene);
        this.skyboxMaterial.backFaceCulling = false;
        this.skyboxMaterial.useRGBColor = false;
        this.skyboxMaterial.primaryColor = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Color3(1, 1, 1);
        this.skyboxMaterial.enableNoise = true;
        this.skyboxReflectionTexture = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.CubeTexture(textureName, this.scene);
        this.skyboxReflectionTexture.coordinatesMode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Texture.SKYBOX_MODE;
        this.skyboxReflectionTexture.gammaSpace = false;
        this.skyboxMaterial.reflectionTexture = this.skyboxReflectionTexture;
    }
    /**
     * Setup the image processing according to the specified options.
     */
    setupImageProcessing() {
        this.scene.imageProcessingConfiguration.contrast = 1.2;
        this.scene.imageProcessingConfiguration.exposure = 0.8;
        this.scene.imageProcessingConfiguration.toneMappingEnabled = true;
        this.scene.environmentTexture = this.envTexture ? this.envTexture
            : _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.CubeTexture.CreateFromPrefilteredData(v3DSkyBox._environmentTextureCDNUrl, this.scene);
    }
}
v3DSkyBox._environmentTextureCDNUrl = "https://assets.babylonjs.com/environments/environmentSpecular.env";


/***/ }),

/***/ "./src/utilities/types.ts":
/*!********************************!*\
  !*** ./src/utilities/types.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isIShadowLight": () => (/* binding */ isIShadowLight),
/* harmony export */   "getAnimationDataType": () => (/* binding */ getAnimationDataType)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


function isIShadowLight(light) {
    return light.setShadowProjectionMatrix !== undefined;
}
function getAnimationDataType(value) {
    let dataType = undefined;
    if (!isNaN(parseFloat(value)) && isFinite(value)) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Quaternion) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_QUATERNION;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR3;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector2) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR2;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color4) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR4;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Size) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_SIZE;
    }
    if (dataType == undefined) {
        return null;
    }
    else {
        return dataType;
    }
}


/***/ }),

/***/ "./src/v3d-core.ts":
/*!*************************!*\
  !*** ./src/v3d-core.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DCore": () => (/* binding */ V3DCore),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Cameras/arcRotateCamera */ "./node_modules/@babylonjs/core/Cameras/arcRotateCamera.js");
/* harmony import */ var _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js");
/* harmony import */ var _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Loading/sceneLoader */ "./node_modules/@babylonjs/core/Loading/sceneLoader.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./importer/babylon-vrm-loader/src */ "./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts");
/* harmony import */ var _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./importer/babylon-vrm-loader/src */ "./src/importer/babylon-vrm-loader/src/vrm-extension.ts");
/* harmony import */ var _babylonjs_loaders_glTF_2_0__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/loaders/glTF/2.0 */ "./node_modules/@babylonjs/loaders/glTF/2.0/index.js");
/* harmony import */ var _babylonjs_core_Lights_hemisphericLight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Lights/hemisphericLight */ "./node_modules/@babylonjs/core/Lights/hemisphericLight.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _utilities_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/types */ "./src/utilities/types.ts");
/* harmony import */ var _scene_optimizer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./scene/optimizer */ "./src/scene/optimizer.ts");
/* harmony import */ var _scene_skybox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./scene/skybox */ "./src/scene/skybox.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */











class V3DCore {
    constructor(engine, scene, camera) {
        this.engine = engine;
        this.scene = scene;
        /**
         * GLTFFileLoader plugin factory
         * @private
         */
        this._vrmFileLoader = new _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_10__.VRMFileLoader();
        // Whether starts spring bones animation automatically
        this._springBonesAutoUpdate = true;
        /**
         * Shadow generators
         */
        this._shadowGenerators = new Map();
        /**
         * Callbacks when loading is done
         */
        this._onLoadCompleteCallbacks = [];
        this._beforeRenderFunc = () => { };
        this._afterRenderFunc = () => {
            for (const manager of this.loadedVRMManagers) {
                if (this._springBonesAutoUpdate)
                    manager.update(this.engine.getDeltaTime());
            }
        };
        this._cameraOnBeforeRenderFunc = [];
        this.skyBox = null;
        /**
         * Loaded VRM Managers
         * @private
         */
        this.loadedVRMManagers = [];
        // Register
        this.registerVrmPlugin();
        this.registerVrmExtension();
        if (!this.scene)
            this.scene = new _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_1__.Scene(this.engine);
        else
            this.engine = this.scene.getEngine();
        this.setupObservable();
        this.enableResize();
        if (camera) {
            this._mainCamera = camera;
            this.scene.switchActiveCamera(camera);
        }
        else
            this.addCamera();
        this._renderingPipeline = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.DefaultRenderingPipeline("defaultPipeline", // The name of the pipeline
        true, // Do you want the pipeline to use HDR texture?
        this.scene, // The scene instance
        [this._mainCamera] // The list of cameras to be attached to
        );
        this.setupRenderingPipeline();
    }
    get springBonesAutoUpdate() {
        return this._springBonesAutoUpdate;
    }
    set springBonesAutoUpdate(value) {
        this._springBonesAutoUpdate = value;
    }
    get renderingPipeline() {
        return this._renderingPipeline;
    }
    addOnLoadCompleteCallbacks(callback) {
        this._onLoadCompleteCallbacks.push(callback);
    }
    removeOnLoadCompleteCallback(callback) {
        const idx = this._onLoadCompleteCallbacks.indexOf(callback);
        if (idx !== -1) {
            this._onLoadCompleteCallbacks.splice(idx, 1);
        }
    }
    resetOnLoadCompleteCallbacks() {
        this._onLoadCompleteCallbacks = [];
    }
    updateBeforeRenderFunction(func) {
        this._beforeRenderFunc = func;
    }
    updateAfterRenderFunction(func) {
        this._afterRenderFunc = func;
    }
    get mainCamera() {
        return this._mainCamera;
    }
    set mainCamera(value) {
        this._mainCamera = value;
    }
    addVRMManager(manager) {
        if (manager)
            this.loadedVRMManagers.push(manager);
    }
    /**
     * Get VRM Manager by index
     * @param idx
     */
    getVRMManagerByIndex(idx) {
        return (idx >= 0 && idx < this.loadedVRMManagers.length)
            ? this.loadedVRMManagers[idx]
            : null;
    }
    /**
     * Get VRM Manager by URI
     * VRM doesn't have any UID in metadata. Title can be unfilled too.
     * Filename is the only reasonable ID.
     * @param uri
     */
    // VRM doesn't have any UID in metadata. Title can be unfilled too.
    // Filename is the only reasonable ID.
    getVRMManagerByURI(uri) {
        for (const manager of this.loadedVRMManagers) {
            if (manager.uri === uri)
                return manager;
        }
        return null;
    }
    /**
     * Make background transparent.
     */
    transparentBackground() {
        this.scene.clearColor.a = 0;
    }
    /**
     * Make background solid.
     */
    solidBackground() {
        this.scene.clearColor.a = 1;
    }
    /**
     * Change background color.
     * @param color
     */
    setBackgroundColor(color) {
        this.scene.clearColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Color4.FromColor3(color, this.scene.clearColor.a).toLinearSpace();
    }
    /**
     * Set background color from hex string.
     * @param hex Hex color string
     */
    setBackgroundColorHex(hex) {
        this.setBackgroundColor(_babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Color3.FromHexString(hex));
    }
    /**
     * Add an ambient light.
     * @param color color of the light
     */
    addAmbientLight(color) {
        const light = new _babylonjs_core_Lights_hemisphericLight__WEBPACK_IMPORTED_MODULE_5__.HemisphericLight("V3DHemiLight", new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1, 1), this.scene);
        if (color)
            light.diffuse = color;
        light.setEnabled(true);
    }
    /**
     * Add a basic arc rotate camera to scene.
     * TODO: there seems to be a bug when meshes are near the edge of camera cone
     * Probably has something to do with culling
     * @param radius rotation radius
     */
    addCamera(radius = 3) {
        const camera = new _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__.ArcRotateCamera('V3DMainCamera', 0, 0, radius, new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 0, 0), this.scene, true);
        camera.lowerRadiusLimit = 0.1;
        camera.upperRadiusLimit = 20;
        camera.wheelDeltaPercentage = 0.05;
        camera.minZ = 0;
        camera.setPosition(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1.5, -5));
        camera.attachControl(this.engine.getRenderingCanvas());
        this._mainCamera = camera;
        this.scene.switchActiveCamera(this._mainCamera, true);
    }
    /**
     * Attach a arc rotate following camera to VRM model.
     * Probably has something to do with culling
     * @param manager VRM Manager to attach the camera to
     * @param radius rotation radius
     */
    attachCameraTo(manager, radius = 3) {
        const camera = new _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__.ArcRotateCamera('V3DArcCamera' + manager.cameras.length, 0, 0, radius, manager.rootMesh.position, this.scene, true);
        camera.lowerRadiusLimit = 0.1;
        camera.upperRadiusLimit = 20;
        camera.wheelDeltaPercentage = 0.05;
        camera.minZ = 0;
        camera.setPosition(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1.5, -5));
        camera.setTarget(manager.rootMesh.getAbsolutePosition());
        camera.attachControl(this.engine.getRenderingCanvas());
        manager.appendCamera(camera);
        this._cameraOnBeforeRenderFunc.push(() => {
            camera.setTarget(manager.rootMesh.getAbsolutePosition());
        });
    }
    /**
     *
     * Create a skybox for the scene.
     * @param size size of the skybox
     * @param textureName path to skybox texture
     */
    createSkyBox(size, textureName) {
        if (!this.skyBox) {
            this.skyBox = new _scene_skybox__WEBPACK_IMPORTED_MODULE_9__.v3DSkyBox(this.scene, textureName ? textureName : "texture/skybox", size);
        }
    }
    /**
     * Enable shadow caster for light.
     * @param light Light to enable shadows.
     */
    enableShabows(light) {
        if (light) {
            if (!this._shadowGenerators.has(light)) {
                const shadowGenerator = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator(1024, light);
                this.setupShadowGenerator(shadowGenerator);
                this._shadowGenerators.set(light, shadowGenerator);
            }
            else {
                console.warn("Light " + light.name + " already has a shadow generator!");
            }
        }
        else {
            for (const l of this.scene.lights) {
                if ((0,_utilities_types__WEBPACK_IMPORTED_MODULE_7__.isIShadowLight)(l)) {
                    const shadowGenerator = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator(1024, l);
                    this.setupShadowGenerator(shadowGenerator);
                    this._shadowGenerators.set(l, shadowGenerator);
                }
            }
        }
    }
    /**
     * Get corresponding shadow generator for light.
     * @param light Light to get shadow generator
     */
    getShadownGenerator(light) {
        return this._shadowGenerators.get(light);
    }
    /**
     * Convenience function for starting animation
     * @param target
     * @param name
     * @param property
     * @param duration
     * @param from
     * @param to
     * @param loopMode
     * @param easingFunction
     * @param easingMode
     */
    startQuickAnimation(target, name, property, duration, from, to, loopMode, easingFunction, easingMode) {
        const anim = this.createAnimation(target, name, property, [{ frame: 0, value: from }, { frame: duration, value: to }], loopMode, easingFunction, easingMode);
        return this.scene.beginDirectAnimation(anim[0], [anim[1]], 0, duration, false);
    }
    /**
     * Convenience function for creating animation
     * @param target
     * @param name
     * @param property
     * @param keyFrames
     * @param loopMode
     * @param easingFunction
     * @param easingMode
     */
    createAnimation(target, name, property, keyFrames, loopMode, easingFunction, easingMode) {
        // Make sure keyFrames is not empty
        if (keyFrames.length < 1)
            throw Error("Key Frames empty");
        // Get data type
        const dataType = (0,_utilities_types__WEBPACK_IMPORTED_MODULE_7__.getAnimationDataType)(keyFrames[0].value);
        if (dataType === null)
            throw Error("Cannot determine data type from keyframes!");
        const animation = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.Animation(name, property, V3DCore.FRAMERATE, dataType, loopMode);
        animation.setKeys(keyFrames);
        if (easingFunction) {
            if (easingMode)
                easingFunction.setEasingMode(easingMode);
            animation.setEasingFunction(easingFunction);
        }
        return [target, animation];
    }
    enableOptimizer(options) {
        this._sceneOptimizer = new _scene_optimizer__WEBPACK_IMPORTED_MODULE_8__.V3DSceneOptimizer(this.scene, options);
    }
    // Don't make wrappers static, so plugins will always be registered
    /**
     * Wrapper for SceneLoader.AppendAsync.
     * @param rootUrl a string that defines the root url for the scene and resources or the concatenation of rootURL and filename
     * @param sceneFilename a string that defines the name of the scene file or starts with "data:" following by the stringified version of the scene or a File object (default: empty string)
     */
    AppendAsync(rootUrl, sceneFilename) {
        return _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.AppendAsync(rootUrl, sceneFilename, this.scene);
    }
    /**
     * Wrapper for SceneLoader.LoadAsync
     * @param rootUrl a string that defines the root url for the scene and resources or the concatenation of rootURL and filename
     * @param sceneFilename a string that defines the name of the scene file or starts with "data:" following by the stringified version of the scene or a File object (default: empty string)
     */
    LoadAsync(rootUrl, sceneFilename) {
        return _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.LoadAsync(rootUrl, sceneFilename, this.engine);
    }
    // GLTFLoaderExtensionObserver
    onLoadReady() {
        for (const f of this._onLoadCompleteCallbacks) {
            f();
        }
    }
    /**
     * Set up for time update.
     * @private
     */
    setupObservable() {
        this.scene.onBeforeRenderObservable.add((eventData, eventState) => {
            this._beforeRenderFunc(eventData, eventState);
        });
        // Camera
        this.scene.onBeforeRenderObservable.add(() => {
            for (const f of this._cameraOnBeforeRenderFunc)
                f();
        });
        // Update secondary animation
        this.scene.onAfterRenderObservable.add((eventData, eventState) => {
            this._afterRenderFunc(eventData, eventState);
        });
    }
    enableResize() {
        this.engine.getRenderingCanvas().onresize = () => {
            this.engine.resize();
        };
    }
    setupShadowGenerator(shadowGenerator) {
        shadowGenerator.usePercentageCloserFiltering = true;
        shadowGenerator.filteringQuality = _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator.QUALITY_HIGH;
    }
    // TODO Unregister
    registerVrmExtension() {
        // ローダーに登録する
        _babylonjs_loaders_glTF_2_0__WEBPACK_IMPORTED_MODULE_4__.GLTFLoader.RegisterExtension(_importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__.VRMLoaderExtension.NAME, (loader) => {
            return new _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__.VRMLoaderExtension(loader, this);
        });
    }
    registerVrmPlugin() {
        if (_babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader && _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.GetPluginForExtension('.vrm').name === 'babylon.js') {
            _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.RegisterPlugin(this._vrmFileLoader);
        }
    }
    ;
    setupRenderingPipeline() {
        this._renderingPipeline.samples = 4;
        this._renderingPipeline.depthOfFieldEnabled = true;
        this._renderingPipeline.depthOfFieldBlurLevel = _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.DepthOfFieldEffectBlurLevel.Medium;
        this._renderingPipeline.depthOfField.focusDistance = 2000; // distance of the current focus point from the camera in millimeters considering 1 scene unit is 1 meter
        this._renderingPipeline.depthOfField.focalLength = 10; // focal length of the camera in millimeters
        this._renderingPipeline.depthOfField.fStop = 1.4; // aka F number of the camera defined in stops as it would be on a physical device
    }
}
V3DCore.FRAMERATE = 60;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (V3DCore);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkv3d_core"] = self["webpackChunkv3d_core"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["babylonjs"], () => (__webpack_require__("./src/index-test.ts")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxnQkFBZ0Isd0dBQXdHLGdEQUFnRCxFQUFFLDBDQUEwQyxHQUFHLGtEQUFrRCxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSx1REFBdUQsdUNBQXVDLHVDQUF1QyxFQUFFLHNDQUFzQyxFQUFFLGdFQUFnRSxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLDJGQUEyRixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHNEQUFzRCxFQUFFLHNDQUFzQyxFQUFFLDJEQUEyRCxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLHNGQUFzRixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLDBEQUEwRCxFQUFFLHNDQUFzQyxFQUFFLHVFQUF1RSxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLGtHQUFrRyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHNEQUFzRCxFQUFFLDRDQUE0QyxFQUFFLHFFQUFxRSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLGdEQUFnRCxFQUFFLHFFQUFxRSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsdUJBQXVCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHVGQUF1RixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsdUJBQXVCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHVEQUF1RCxFQUFFLDRDQUE0QyxFQUFFLHVFQUF1RSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVB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O1dBQ0EsTUFBTSxxQkFBcUI7V0FDM0I7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7V0FFQTtXQUNBO1dBQ0E7Ozs7O1VFaERBO1VBQ0E7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9ub2RlX21vZHVsZXMvYmFieWxvbi1tdG9vbi1tYXRlcmlhbC9kaXN0L2luZGV4Lm1vZHVsZS5qcyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9oZWxwZXIudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9lcnJvcnMudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9odW1hbm9pZC1ib25lLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvbWF0ZXJpYWwtdmFsdWUtYmluZGluZy1tZXJnZXIudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9zZWNvbmRhcnktYW5pbWF0aW9uL2NvbGxpZGVyLWdyb3VwLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvc2Vjb25kYXJ5LWFuaW1hdGlvbi9jb2xsaWRlci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3NlY29uZGFyeS1hbmltYXRpb24vc3ByaW5nLWJvbmUtY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3NlY29uZGFyeS1hbmltYXRpb24vdnJtLXNwcmluZy1ib25lLWxvZ2ljLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvc2Vjb25kYXJ5LWFuaW1hdGlvbi92cm0tc3ByaW5nLWJvbmUudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy92cm0tZXh0ZW5zaW9uLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvdnJtLWZpbGUtbG9hZGVyLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvdnJtLWludGVyZmFjZXMudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy92cm0tbWFuYWdlci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3ZybS1tYXRlcmlhbC1nZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW5kZXgtdGVzdC50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9zY2VuZS9vcHRpbWl6ZXIudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvc2NlbmUvc2t5Ym94LnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL3V0aWxpdGllcy90eXBlcy50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy92M2QtY29yZS50cyIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL2JlZm9yZS1zdGFydHVwIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL2FmdGVyLXN0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1widjNkLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1widjNkLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG59KShzZWxmLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIhZnVuY3Rpb24oZSxpKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1pKHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9kZWNvcmF0b3JzXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9zbWFydEFycmF5XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLnZlY3RvclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGguY29sb3JcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9CdWZmZXJzL2J1ZmZlclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL3B1c2hNYXRlcmlhbFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbEhlbHBlclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL0VuZ2luZXMvY29uc3RhbnRzXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdEZhbGxiYWNrc1wiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwuZGV0YWlsTWFwQ29uZmlndXJhdGlvblwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFBsdWdpbkV2ZW50XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9pSW5zcGVjdGFibGVcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9zY2VuZUNvbXBvbmVudFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbERlZmluZXNcIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiQGJhYnlsb25qcy9jb3JlL01pc2MvZGVjb3JhdG9yc1wiLFwiQGJhYnlsb25qcy9jb3JlL01pc2Mvc21hcnRBcnJheVwiLFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3JcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yXCIsXCJAYmFieWxvbmpzL2NvcmUvQnVmZmVycy9idWZmZXJcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvblwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9wdXNoTWF0ZXJpYWxcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxIZWxwZXJcIixcIkBiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2NvbnN0YW50c1wiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RGYWxsYmFja3NcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0XCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsLmRldGFpbE1hcENvbmZpZ3VyYXRpb25cIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxQbHVnaW5FdmVudFwiLFwiQGJhYnlsb25qcy9jb3JlL01pc2MvaUluc3BlY3RhYmxlXCIsXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVDb21wb25lbnRcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxEZWZpbmVzXCJdLGkpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHNbXCJiYWJ5bG9uLW10b29uLW1hdGVyaWFsXCJdPWkocmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2RlY29yYXRvcnNcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NaXNjL3NtYXJ0QXJyYXlcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgudmVjdG9yXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC5jb2xvclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL0J1ZmZlcnMvYnVmZmVyXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb25cIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvcHVzaE1hdGVyaWFsXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsSGVscGVyXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9jb25zdGFudHNcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0RmFsbGJhY2tzXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbC5kZXRhaWxNYXBDb25maWd1cmF0aW9uXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsUGx1Z2luRXZlbnRcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2lJbnNwZWN0YWJsZVwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lQ29tcG9uZW50XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsRGVmaW5lc1wiKSk6ZVtcImJhYnlsb24tbXRvb24tbWF0ZXJpYWxcIl09aShlW1wiQGJhYnlsb25qcy9jb3JlL01pc2MvZGVjb3JhdG9yc1wiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01pc2Mvc21hcnRBcnJheVwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL3NjZW5lXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3JcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvQnVmZmVycy9idWZmZXJcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvblwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9wdXNoTWF0ZXJpYWxcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxIZWxwZXJcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2NvbnN0YW50c1wiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RGYWxsYmFja3NcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0XCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsLmRldGFpbE1hcENvbmZpZ3VyYXRpb25cIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxQbHVnaW5FdmVudFwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01pc2MvaUluc3BlY3RhYmxlXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVDb21wb25lbnRcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxEZWZpbmVzXCJdKX0oc2VsZiwoKGUsaSxuLHQsbyxhLHIscyxsLGQsaCxmLHUsbSxjLHAsZyxfKT0+KCgpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIEE9ezkwODplPT57ZS5leHBvcnRzPWF9LDU1NjplPT57ZS5leHBvcnRzPWh9LDI3MjplPT57ZS5leHBvcnRzPXV9LDU1OmU9PntlLmV4cG9ydHM9Zn0sNjc3OmU9PntlLmV4cG9ydHM9cn0sNjY6ZT0+e2UuZXhwb3J0cz1zfSw4MjQ6ZT0+e2UuZXhwb3J0cz1tfSw3MTM6ZT0+e2UuZXhwb3J0cz1ffSwyMjE6ZT0+e2UuZXhwb3J0cz1kfSw2Mjg6ZT0+e2UuZXhwb3J0cz1jfSw3MjE6ZT0+e2UuZXhwb3J0cz1sfSw1NDg6ZT0+e2UuZXhwb3J0cz1vfSw2OTQ6ZT0+e2UuZXhwb3J0cz10fSwzODg6aT0+e2kuZXhwb3J0cz1lfSw4MTI6ZT0+e2UuZXhwb3J0cz1wfSw0NzQ6ZT0+e2UuZXhwb3J0cz1pfSw1Mzg6ZT0+e2UuZXhwb3J0cz1ufSw2Njc6ZT0+e2UuZXhwb3J0cz1nfX0sST17fTtmdW5jdGlvbiB2KGUpe3ZhciBpPUlbZV07aWYodm9pZCAwIT09aSlyZXR1cm4gaS5leHBvcnRzO3ZhciBuPUlbZV09e2V4cG9ydHM6e319O3JldHVybiBBW2VdKG4sbi5leHBvcnRzLHYpLG4uZXhwb3J0c312LmQ9KGUsaSk9Pntmb3IodmFyIG4gaW4gaSl2Lm8oaSxuKSYmIXYubyhlLG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOiEwLGdldDppW25dfSl9LHYubz0oZSxpKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSksdi5yPWU9PntcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfTt2YXIgTT17fTtyZXR1cm4oKCk9PntmdW5jdGlvbiBlKGUsaSxuLHQpe3ZhciBvLGE9YXJndW1lbnRzLmxlbmd0aCxyPWE8Mz9pOm51bGw9PT10P3Q9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLG4pOnQ7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcj1SZWZsZWN0LmRlY29yYXRlKGUsaSxuLHQpO2Vsc2UgZm9yKHZhciBzPWUubGVuZ3RoLTE7cz49MDtzLS0pKG89ZVtzXSkmJihyPShhPDM/byhyKTphPjM/byhpLG4scik6byhpLG4pKXx8cik7cmV0dXJuIGE+MyYmciYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGksbixyKSxyfXYucihNKSx2LmQoTSx7Q3VsbE1vZGU6KCk9PkwsRGVidWdNb2RlOigpPT5ULE1Ub29uTWF0ZXJpYWw6KCk9PngsT3V0bGluZUNvbG9yTW9kZTooKT0+TixPdXRsaW5lV2lkdGhNb2RlOigpPT5EfSksT2JqZWN0LmNyZWF0ZSxPYmplY3QuY3JlYXRlO3ZhciBpPXYoMzg4KSxuPXYoNDc0KSx0PXYoNTM4KSxvPXYoNjk0KSxhPXYoNTQ4KSxyPXYoOTA4KSxzPXYoNjc3KSxsPXYoNjYpLGQ9dig3MjEpLGg9digyMjEpLGY9dig1NTYpLHU9dig1NSksbT12KDI3MiksYz12KDgyNCkscD12KDYyOCksZz12KDgxMiksXz12KDY2Nyk7Y2xhc3MgQXtjb25zdHJ1Y3RvcihlLGkpe3RoaXMuc2NlbmU9ZSx0aGlzLm1hdGVyaWFsPWksdGhpcy5uYW1lPWBNVG9vbk91dGxpbmVfJHtpLm5hbWV9XyR7QS5yZW5kZXJlcklkKyt9YCx0aGlzLnNjZW5lLl9hZGRDb21wb25lbnQodGhpcyksdGhpcy5fZW5naW5lPXRoaXMuc2NlbmUuZ2V0RW5naW5lKCksdGhpcy5fcGFzc0lkRm9yRHJhd1dyYXBwZXI9W107Zm9yKGxldCBlPTA7ZTwxOysrZSl0aGlzLl9wYXNzSWRGb3JEcmF3V3JhcHBlcltlXT10aGlzLl9lbmdpbmUuY3JlYXRlUmVuZGVyUGFzc0lkKGBPdXRsaW5lIFJlbmRlcmVyICgke2V9KWApfXJlZ2lzdGVyKCl7dGhpcy5zY2VuZS5fYWZ0ZXJSZW5kZXJpbmdNZXNoU3RhZ2UucmVnaXN0ZXJTdGVwKF8uU2NlbmVDb21wb25lbnRDb25zdGFudHMuU1RFUF9BRlRFUlJFTkRFUklOR01FU0hfT1VUTElORSx0aGlzLHRoaXMuX2FmdGVyUmVuZGVyaW5nTWVzaCl9cmVidWlsZCgpe31kaXNwb3NlKCl7Zm9yKGxldCBlPTA7ZTx0aGlzLl9wYXNzSWRGb3JEcmF3V3JhcHBlci5sZW5ndGg7KytlKXRoaXMuX2VuZ2luZS5yZWxlYXNlUmVuZGVyUGFzc0lkKHRoaXMuX3Bhc3NJZEZvckRyYXdXcmFwcGVyW2VdKX1yZW5kZXIoZSxpLG4pe249bnVsbCE9bj9uOnRoaXMuX3Bhc3NJZEZvckRyYXdXcmFwcGVyWzBdO2NvbnN0IHQ9dGhpcy5zY2VuZSxvPWUuZWZmZWN0O2lmKCFvfHwhby5pc1JlYWR5KCl8fCF0aGlzLnNjZW5lLmFjdGl2ZUNhbWVyYSlyZXR1cm47Y29uc3QgYT1lLl9nZXREcmF3V3JhcHBlcihuLCEwKTtpZighYSlyZXR1cm47aWYoYS5zZXRFZmZlY3QobyksIWEuZWZmZWN0fHwhYS5lZmZlY3QuaXNSZWFkeSgpKXJldHVybjtjb25zdCByPWUuZ2V0TWVzaCgpLHM9ci5faW50ZXJuYWxBYnN0cmFjdE1lc2hEYXRhSW5mby5fYWN0QXNSZWd1bGFyTWVzaD9yOm51bGwsbD1lLmdldFJlbmRlcmluZ01lc2goKSxkPXN8fGw7dC5hY3RpdmVDYW1lcmEmJih0aGlzLm1hdGVyaWFsLmFwcGx5T3V0bGluZUN1bGxNb2RlKCksdGhpcy5tYXRlcmlhbC5lbmFibGVPdXRsaW5lUmVuZGVyKCksdGhpcy5fZW5naW5lLmVuYWJsZUVmZmVjdChhKSx0aGlzLmlzSGFyZHdhcmVJbnN0YW5jZWRSZW5kZXJpbmcoZSxpKXx8bC5fYmluZChlLG8sdGhpcy5tYXRlcmlhbC5maWxsTW9kZSksdGhpcy5tYXRlcmlhbC5fcHJlQmluZChvKSxsLl9wcm9jZXNzUmVuZGVyaW5nKGQsZSxvLHRoaXMubWF0ZXJpYWwuZmlsbE1vZGUsaSx0aGlzLmlzSGFyZHdhcmVJbnN0YW5jZWRSZW5kZXJpbmcoZSxpKSwoKGksbix0KT0+e3QmJnQuYmluZEZvclN1Yk1lc2gobixkLGUpfSksdGhpcy5tYXRlcmlhbCksdGhpcy5tYXRlcmlhbC5yZXN0b3JlT3V0bGluZUN1bGxNb2RlKCksdGhpcy5tYXRlcmlhbC5kaXNhYWJsZU91dGxpbmVSZW5kZXIoKSl9X2FmdGVyUmVuZGVyaW5nTWVzaChlLGksbil7aWYoIXRoaXMud2lsbFJlbmRlcihpKSlyZXR1cm47Y29uc3QgdD10aGlzLl9lbmdpbmUuY3VsbEJhY2tGYWNlczt0aGlzLl9lbmdpbmUuY3VsbEJhY2tGYWNlcz0hMSx0aGlzLnJlbmRlcihpLG4sdGhpcy5fcGFzc0lkRm9yRHJhd1dyYXBwZXJbMF0pLHRoaXMuX2VuZ2luZS5jdWxsQmFja0ZhY2VzPXR9aXNIYXJkd2FyZUluc3RhbmNlZFJlbmRlcmluZyhlLGkpe3JldHVybiEhdGhpcy5fZW5naW5lLmdldENhcHMoKS5pbnN0YW5jZWRBcnJheXMmJm51bGwhPT1pLnZpc2libGVJbnN0YW5jZXNbZS5faWRdJiZ2b2lkIDAhPT1pLnZpc2libGVJbnN0YW5jZXNbZS5faWRdJiZlLmdldFJlbmRlcmluZ01lc2goKS5oYXNUaGluSW5zdGFuY2VzfXdpbGxSZW5kZXIoZSl7Y29uc3QgaT1lLmdldE1hdGVyaWFsKCk7cmV0dXJuISghaXx8XCJNVG9vbk1hdGVyaWFsXCIhPT1pLmdldENsYXNzTmFtZSgpfHxpLmdldE91dGxpbmVSZW5kZXJlck5hbWUoKSE9PXRoaXMubmFtZSl9fUEucmVuZGVyZXJJZD0wO3ZhciBJPXYoNzEzKTtjbGFzcyBFIGV4dGVuZHMgSS5NYXRlcmlhbERlZmluZXN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5DVVNUT01VU0VSTElHSFRJTkc9ITAsdGhpcy5NVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEPSExLHRoaXMuTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU49ITEsdGhpcy5NVE9PTl9PVVRMSU5FX0NPTE9SX0ZJWEVEPSExLHRoaXMuTVRPT05fT1VUTElORV9DT0xPUl9NSVhFRD0hMSx0aGlzLk1UT09OX0RFQlVHX05PUk1BTD0hMSx0aGlzLk1UT09OX0RFQlVHX0xJVFNIQURFUlJBVEU9ITEsdGhpcy5TSEFERT0hMSx0aGlzLlNIQURFRElSRUNUVVY9MCx0aGlzLlJFQ0VJVkVfU0hBRE9XPSExLHRoaXMuUkVDRUlWRV9TSEFET1dESVJFQ1RVVj0wLHRoaXMuU0hBRElOR19HUkFERT0hMSx0aGlzLlNIQURJTkdfR1JBREVESVJFQ1RVVj0wLHRoaXMuUklNPSExLHRoaXMuUklNRElSRUNUVVY9MCx0aGlzLk1BVENBUD0hMSx0aGlzLk1BVENBUERJUkVDVFVWPTAsdGhpcy5PVVRMSU5FX1dJRFRIPSExLHRoaXMuT1VUTElORV9XSURUSERJUkVDVFVWPTAsdGhpcy5VVl9BTklNQVRJT05fTUFTSz0hMSx0aGlzLlVWX0FOSU1BVElPTl9NQVNLRElSRUNUVVY9MCx0aGlzLk1BSU5VVjE9ITEsdGhpcy5NQUlOVVYyPSExLHRoaXMuTUFJTlVWMz0hMSx0aGlzLk1BSU5VVjQ9ITEsdGhpcy5NQUlOVVY1PSExLHRoaXMuTUFJTlVWNj0hMSx0aGlzLkRJRkZVU0U9ITEsdGhpcy5ESUZGVVNFRElSRUNUVVY9MCx0aGlzLkJBS0VEX1ZFUlRFWF9BTklNQVRJT05fVEVYVFVSRT0hMSx0aGlzLkVNSVNTSVZFPSExLHRoaXMuRU1JU1NJVkVESVJFQ1RVVj0wLHRoaXMuQlVNUD0hMSx0aGlzLkJVTVBESVJFQ1RVVj0wLHRoaXMuUEFSQUxMQVg9ITEsdGhpcy5QQVJBTExBWE9DQ0xVU0lPTj0hMSx0aGlzLkNMSVBQTEFORT0hMSx0aGlzLkNMSVBQTEFORTI9ITEsdGhpcy5DTElQUExBTkUzPSExLHRoaXMuQ0xJUFBMQU5FND0hMSx0aGlzLkNMSVBQTEFORTU9ITEsdGhpcy5DTElQUExBTkU2PSExLHRoaXMuQUxQSEFURVNUPSExLHRoaXMuREVQVEhQUkVQQVNTPSExLHRoaXMuQUxQSEFGUk9NRElGRlVTRT0hMSx0aGlzLlBPSU5UU0laRT0hMSx0aGlzLkZPRz0hMSx0aGlzLk5PUk1BTD0hMSx0aGlzLlVWMT0hMSx0aGlzLlVWMj0hMSx0aGlzLlVWMz0hMSx0aGlzLlVWND0hMSx0aGlzLlVWNT0hMSx0aGlzLlVWNj0hMSx0aGlzLlZFUlRFWENPTE9SPSExLHRoaXMuVkVSVEVYQUxQSEE9ITEsdGhpcy5OVU1fQk9ORV9JTkZMVUVOQ0VSUz0wLHRoaXMuQm9uZXNQZXJNZXNoPTAsdGhpcy5CT05FVEVYVFVSRT0hMSx0aGlzLkJPTkVTX1ZFTE9DSVRZX0VOQUJMRUQ9ITEsdGhpcy5JTlNUQU5DRVM9ITEsdGhpcy5USElOX0lOU1RBTkNFUz0hMSx0aGlzLk9CSkVDVFNQQUNFX05PUk1BTE1BUD0hMSx0aGlzLkxPR0FSSVRITUlDREVQVEg9ITEsdGhpcy5UV09TSURFRExJR0hUSU5HPSExLHRoaXMuU0hBRE9XRkxPQVQ9ITEsdGhpcy5NT1JQSFRBUkdFVFM9ITEsdGhpcy5NT1JQSFRBUkdFVFNfTk9STUFMPSExLHRoaXMuTU9SUEhUQVJHRVRTX1RBTkdFTlQ9ITEsdGhpcy5NT1JQSFRBUkdFVFNfVVY9ITEsdGhpcy5OVU1fTU9SUEhfSU5GTFVFTkNFUlM9MCx0aGlzLk1PUlBIVEFSR0VUU19URVhUVVJFPSExLHRoaXMuTk9OVU5JRk9STVNDQUxJTkc9ITEsdGhpcy5QUkVNVUxUSVBMWUFMUEhBPSExLHRoaXMuQUxQSEFURVNUX0FGVEVSQUxMQUxQSEFDT01QVVRBVElPTlM9ITEsdGhpcy5BTFBIQUJMRU5EPSEwLHRoaXMuUFJFUEFTUz0hMSx0aGlzLlBSRVBBU1NfSVJSQURJQU5DRT0hMSx0aGlzLlBSRVBBU1NfSVJSQURJQU5DRV9JTkRFWD0tMSx0aGlzLlBSRVBBU1NfQUxCRURPX1NRUlQ9ITEsdGhpcy5QUkVQQVNTX0FMQkVET19TUVJUX0lOREVYPS0xLHRoaXMuUFJFUEFTU19ERVBUSD0hMSx0aGlzLlBSRVBBU1NfREVQVEhfSU5ERVg9LTEsdGhpcy5QUkVQQVNTX05PUk1BTD0hMSx0aGlzLlBSRVBBU1NfTk9STUFMX0lOREVYPS0xLHRoaXMuUFJFUEFTU19QT1NJVElPTj0hMSx0aGlzLlBSRVBBU1NfUE9TSVRJT05fSU5ERVg9LTEsdGhpcy5QUkVQQVNTX1ZFTE9DSVRZPSExLHRoaXMuUFJFUEFTU19WRUxPQ0lUWV9JTkRFWD0tMSx0aGlzLlBSRVBBU1NfUkVGTEVDVElWSVRZPSExLHRoaXMuUFJFUEFTU19SRUZMRUNUSVZJVFlfSU5ERVg9LTEsdGhpcy5TQ0VORV9NUlRfQ09VTlQ9MCx0aGlzLklNQUdFUFJPQ0VTU0lORz0hMSx0aGlzLlZJR05FVFRFPSExLHRoaXMuVklHTkVUVEVCTEVORE1PREVNVUxUSVBMWT0hMSx0aGlzLlZJR05FVFRFQkxFTkRNT0RFT1BBUVVFPSExLHRoaXMuVE9ORU1BUFBJTkc9ITEsdGhpcy5UT05FTUFQUElOR19BQ0VTPSExLHRoaXMuQ09OVFJBU1Q9ITEsdGhpcy5DT0xPUkNVUlZFUz0hMSx0aGlzLkNPTE9SR1JBRElORz0hMSx0aGlzLkNPTE9SR1JBRElORzNEPSExLHRoaXMuU0FNUExFUjNER1JFRU5ERVBUSD0hMSx0aGlzLlNBTVBMRVIzREJHUk1BUD0hMSx0aGlzLklNQUdFUFJPQ0VTU0lOR1BPU1RQUk9DRVNTPSExLHRoaXMuU0tJUEZJTkFMQ09MT1JDTEFNUD0hMSx0aGlzLk1VTFRJVklFVz0hMSx0aGlzLk9SREVSX0lOREVQRU5ERU5UX1RSQU5TUEFSRU5DWT0hMSx0aGlzLk9SREVSX0lOREVQRU5ERU5UX1RSQU5TUEFSRU5DWV8xNkJJVFM9ITEsdGhpcy5JU19SRUZMRUNUSU9OX0xJTkVBUj0hMSx0aGlzLklTX1JFRlJBQ1RJT05fTElORUFSPSExLHRoaXMuRVhQT1NVUkU9ITEsdGhpcy5GTElQX1U9ITEsdGhpcy5GTElQX1Y9ITEsdGhpcy5yZWJ1aWxkKCl9c2V0UmVmbGVjdGlvbk1vZGUoZSl7dGhyb3cgbmV3IEVycm9yKFwiVGhpcyBtYXRlcmlhbCBjYW5ub3QgdXNlIGBzZXRSZWZsZWN0aW9uTW9kZWBcIil9fWNvbnN0IFM9e2VmZmVjdDpudWxsLHN1Yk1lc2g6bnVsbH07dmFyIFQsTixELEw7IWZ1bmN0aW9uKGUpe2VbZS5Ob25lPTBdPVwiTm9uZVwiLGVbZS5Ob3JtYWw9MV09XCJOb3JtYWxcIixlW2UuTGl0U2hhZGVSYXRlPTJdPVwiTGl0U2hhZGVSYXRlXCJ9KFR8fChUPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkZpeGVkQ29sb3I9MF09XCJGaXhlZENvbG9yXCIsZVtlLk1peGVkTGlnaHRpbmc9MV09XCJNaXhlZExpZ2h0aW5nXCJ9KE58fChOPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk5vbmU9MF09XCJOb25lXCIsZVtlLldvcmxkQ29ycmRpbmF0ZXM9MV09XCJXb3JsZENvcnJkaW5hdGVzXCIsZVtlLlNjcmVlbkNvb3JkaW5hdGVzPTJdPVwiU2NyZWVuQ29vcmRpbmF0ZXNcIn0oRHx8KEQ9e30pKSxmdW5jdGlvbihlKXtlW2UuT2ZmPTBdPVwiT2ZmXCIsZVtlLkZyb250PTFdPVwiRnJvbnRcIixlW2UuQmFjaz0yXT1cIkJhY2tcIn0oTHx8KEw9e30pKTtjbGFzcyB4IGV4dGVuZHMgZC5QdXNoTWF0ZXJpYWx7Y29uc3RydWN0b3IoZSxpKXtzdXBlcihlLGkpLHRoaXMuX2RpZmZ1c2VUZXh0dXJlPW51bGwsdGhpcy5kaWZmdXNlVGV4dHVyZT1udWxsLHRoaXMuX2VtaXNzaXZlVGV4dHVyZT1udWxsLHRoaXMuZW1pc3NpdmVUZXh0dXJlPW51bGwsdGhpcy5fYnVtcFRleHR1cmU9bnVsbCx0aGlzLmJ1bXBUZXh0dXJlPW51bGwsdGhpcy5fc2hhZGVUZXh0dXJlPW51bGwsdGhpcy5zaGFkZVRleHR1cmU9bnVsbCx0aGlzLl9yZWNlaXZlU2hhZG93VGV4dHVyZT1udWxsLHRoaXMucmVjZWl2ZVNoYWRvd1RleHR1cmU9bnVsbCx0aGlzLl9zaGFkaW5nR3JhZGVUZXh0dXJlPW51bGwsdGhpcy5zaGFkaW5nR3JhZGVUZXh0dXJlPW51bGwsdGhpcy5fcmltVGV4dHVyZT1udWxsLHRoaXMucmltVGV4dHVyZT1udWxsLHRoaXMuX21hdENhcFRleHR1cmU9bnVsbCx0aGlzLm1hdENhcFRleHR1cmU9bnVsbCx0aGlzLl9vdXRsaW5lV2lkdGhUZXh0dXJlPW51bGwsdGhpcy5vdXRsaW5lV2lkdGhUZXh0dXJlPW51bGwsdGhpcy5fdXZBbmltYXRpb25NYXNrVGV4dHVyZT1udWxsLHRoaXMudXZBbmltYXRpb25NYXNrVGV4dHVyZT1udWxsLHRoaXMuZGlmZnVzZUNvbG9yPW5ldyBhLkNvbG9yMygxLDEsMSksdGhpcy5hbWJpZW50Q29sb3I9bmV3IGEuQ29sb3IzKDAsMCwwKSx0aGlzLmVtaXNzaXZlQ29sb3I9bmV3IGEuQ29sb3IzKDAsMCwwKSx0aGlzLnNoYWRlQ29sb3I9bmV3IGEuQ29sb3IzKC45NywuODEsLjg2KSx0aGlzLnJpbUNvbG9yPW5ldyBhLkNvbG9yMygwLDAsMCksdGhpcy5vdXRsaW5lQ29sb3I9bmV3IGEuQ29sb3IzKDAsMCwwKSx0aGlzLnVzZUVtaXNzaXZlQXNJbGx1bWluYXRpb249ITEsdGhpcy5saW5rRW1pc3NpdmVXaXRoRGlmZnVzZT0hMSx0aGlzLnVzZVJlZmxlY3Rpb25PdmVyQWxwaGE9ITEsdGhpcy5fZGlzYWJsZUxpZ2h0aW5nPSExLHRoaXMudXNlT2JqZWN0U3BhY2VOb3JtYWxNYXA9ITEsdGhpcy51c2VQYXJhbGxheD0hMSx0aGlzLnVzZVBhcmFsbGF4T2NjbHVzaW9uPSExLHRoaXMuc3BlY3VsYXJTdXBwb3J0ZWQ9ITEsdGhpcy51c2VMaWdodG1hcEFzU2hhZG93bWFwPSExLHRoaXMudXNlVmVydGV4Q29sb3I9ITEsdGhpcy51c2VCb25lcz0hMCx0aGlzLnVzZU1vcnBoVGFyZ2V0cz0hMCx0aGlzLnVzZVZlcnRleEFscGhhPSExLHRoaXMudXNlQmFrZWRWZXJ0ZXhBbmltYXRpb249ITEsdGhpcy5hbHBoYUN1dE9mZj0uNCx0aGlzLl91c2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZT0hMCx0aGlzLl9tYXhTaW11bHRhbmVvdXNMaWdodHM9NCx0aGlzLl9pbnZlcnROb3JtYWxNYXBYPSEwLHRoaXMuX2ludmVydE5vcm1hbE1hcFk9ITAsdGhpcy5fdHdvU2lkZWRMaWdodGluZz0hMSx0aGlzLl9yZW5kZXJUYXJnZXRzPW5ldyBuLlNtYXJ0QXJyYXkoMTYpLHRoaXMuX3dvcmxkVmlld1Byb2plY3Rpb25NYXRyaXg9by5NYXRyaXguWmVybygpLHRoaXMuX2dsb2JhbEFtYmllbnRDb2xvcj1uZXcgYS5Db2xvcjMoMCwwLDApLHRoaXMuX2NhY2hlSGFzUmVuZGVyVGFyZ2V0VGV4dHVyZXM9ITEsdGhpcy5fYnVtcFNjYWxlPTEsdGhpcy5fcmVjZWl2ZVNoYWRvd1JhdGU9MSx0aGlzLl9zaGFkaW5nR3JhZGVSYXRlPTEsdGhpcy5fc2hhZGVTaGlmdD0wLHRoaXMuX3NoYWRlVG9vbnk9LjksdGhpcy5fbGlnaHRDb2xvckF0dGVudWF0aW9uPTAsdGhpcy5faW5kaXJlY3RMaWdodEludGVuc2l0eT0uMSx0aGlzLl9yaW1MaWdodGluZ01peD0wLHRoaXMuX3JpbUZyZXNuZWxQb3dlcj0xLHRoaXMuX3JpbUxpZnQ9MCx0aGlzLl9vdXRsaW5lV2lkdGg9LjUsdGhpcy5fb3V0bGluZVNjYWxlZE1heERpc3RhbmNlPTEsdGhpcy5fb3V0bGluZUxpZ2h0aW5nTWl4PTEsdGhpcy5fdXZBbmltYXRpb25TY3JvbGxYPTAsdGhpcy5fdXZBbmltYXRpb25TY3JvbGxZPTAsdGhpcy5fdXZBbmltYXRpb25Sb3RhdGlvbj0wLHRoaXMuX2FscGhhVGVzdD0hMSx0aGlzLl9hbHBoYUJsZW5kPSExLHRoaXMuX2RlYnVnTW9kZT1ULk5vbmUsdGhpcy5kZWJ1Z01vZGU9VC5Ob25lLHRoaXMuX291dGxpbmVXaWR0aE1vZGU9RC5Ob25lLHRoaXMuaXNPdXRsaW5lPTAsdGhpcy5vdXRsaW5lQ29sb3JNb2RlPU4uTWl4ZWRMaWdodGluZyx0aGlzLl9jdWxsTW9kZT1MLkJhY2ssdGhpcy5fb3V0bGluZUN1bGxNb2RlPUwuRnJvbnQsdGhpcy5vdXRsaW5lQ3VsbE1vZGU9TC5Gcm9udCx0aGlzLnN0b3JlZEN1bGxNb2RlPUwuQmFjayx0aGlzLmZsaXBVPSExLHRoaXMuZmxpcFY9ITEsdGhpcy5kZXRhaWxNYXA9bmV3IGMuRGV0YWlsTWFwQ29uZmlndXJhdGlvbih0aGlzKSx0aGlzLl9hdHRhY2hJbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uKG51bGwpLHRoaXMuZ2V0UmVuZGVyVGFyZ2V0VGV4dHVyZXM9KCk9Pih0aGlzLl9yZW5kZXJUYXJnZXRzLnJlc2V0KCksdGhpcy5fZXZlbnRJbmZvLnJlbmRlclRhcmdldHM9dGhpcy5fcmVuZGVyVGFyZ2V0cyx0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50RmlsbFJlbmRlclRhcmdldFRleHR1cmVzKHRoaXMuX2V2ZW50SW5mbyksdGhpcy5fcmVuZGVyVGFyZ2V0cyksbS5FZmZlY3QuSW5jbHVkZXNTaGFkZXJzU3RvcmUubXRvb25VYm9EZWNsYXJhdGlvbnx8KG0uRWZmZWN0LkluY2x1ZGVzU2hhZGVyc1N0b3JlLm10b29uVWJvRGVjbGFyYXRpb249XCIvLyBpdCB3aWxsIGJlIHJlcGxhY2VkIHRvIFVib0RlY2xhcmF0aW9uKFdlYkdMMikgb3IgVmVydGV4RGVjbGFyYXRpb24oV2ViR0wxKS5cXG5cXG5sYXlvdXQoc3RkMTQwLCBjb2x1bW5fbWFqb3IpIHVuaWZvcm07XFxuXFxudW5pZm9ybSBNYXRlcmlhbFxcbntcXG4gICAgLy8gQ29sb3IgJiBUZXh0dXJlXFxuICAgIHZlYzQgdkRpZmZ1c2VDb2xvcjtcXG4gICAgdmVjMiB2RGlmZnVzZUluZm9zO1xcbiAgICBtYXQ0IGRpZmZ1c2VNYXRyaXg7XFxuICAgIHZlYzQgdkVtaXNzaXZlQ29sb3I7XFxuICAgIHZlYzIgdkVtaXNzaXZlSW5mb3M7XFxuICAgIG1hdDQgZW1pc3NpdmVNYXRyaXg7XFxuICAgIHZlYzMgdkJ1bXBJbmZvcztcXG4gICAgbWF0NCBidW1wTWF0cml4O1xcbiAgICB2ZWMzIHZTaGFkZUNvbG9yO1xcbiAgICB2ZWMyIHZTaGFkZUluZm9zO1xcbiAgICBtYXQ0IHNoYWRlTWF0cml4O1xcbiAgICB2ZWMyIHZSZWNlaXZlU2hhZG93SW5mb3M7XFxuICAgIG1hdDQgcmVjZWl2ZVNoYWRvd01hdHJpeDtcXG4gICAgdmVjMiB2U2hhZGluZ0dyYWRlSW5mb3M7XFxuICAgIG1hdDQgc2hhZGluZ0dyYWRlTWF0cml4O1xcbiAgICB2ZWMzIHZSaW1Db2xvcjtcXG4gICAgdmVjMiB2UmltSW5mb3M7XFxuICAgIG1hdDQgcmltTWF0cml4O1xcbiAgICB2ZWMyIHZNYXRDYXBJbmZvcztcXG4gICAgbWF0NCBtYXRDYXBNYXRyaXg7XFxuICAgIHZlYzQgdk91dGxpbmVDb2xvcjtcXG4gICAgdmVjMiB2T3V0bGluZVdpZHRoSW5mb3M7XFxuICAgIG1hdDQgb3V0bGluZVdpZHRoTWF0cml4O1xcbiAgICB2ZWMyIHZVdkFuaW1hdGlvbk1hc2tJbmZvcztcXG4gICAgbWF0NCB1dkFuaW1hdGlvbk1hc2tNYXRyaXg7XFxuXFxuICAgIC8vIGJhYnlsb24gc3BlY2lmaWNcXG4gICAgdmVjMiB2VGFuZ2VudFNwYWNlUGFyYW1zO1xcbiAgICBmbG9hdCBwb2ludFNpemU7XFxuXFxuICAgIC8vIE1Ub29uIHBhcmFtc1xcbiAgICBmbG9hdCBzaGFkaW5nR3JhZGVSYXRlO1xcbiAgICBmbG9hdCByZWNlaXZlU2hhZG93UmF0ZTtcXG4gICAgZmxvYXQgc2hhZGVTaGlmdDtcXG4gICAgZmxvYXQgc2hhZGVUb29ueTtcXG4gICAgZmxvYXQgbGlnaHRDb2xvckF0dGVudWF0aW9uO1xcbiAgICBmbG9hdCBpbmRpcmVjdExpZ2h0SW50ZW5zaXR5O1xcbiAgICBmbG9hdCByaW1MaWdodGluZ01peDtcXG4gICAgZmxvYXQgcmltRnJlc25lbFBvd2VyO1xcbiAgICBmbG9hdCByaW1MaWZ0O1xcbiAgICBmbG9hdCBvdXRsaW5lV2lkdGg7XFxuICAgIGZsb2F0IG91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZTtcXG4gICAgZmxvYXQgb3V0bGluZUxpZ2h0aW5nTWl4O1xcbiAgICBmbG9hdCB1dkFuaW1hdGlvblNjcm9sbFg7XFxuICAgIGZsb2F0IHV2QW5pbWF0aW9uU2Nyb2xsWTtcXG4gICAgZmxvYXQgdXZBbmltYXRpb25Sb3RhdGlvbjtcXG5cXG4gICAgdmVjMyB2RXllVXA7XFxuICAgIGZsb2F0IGFscGhhQ3V0T2ZmO1xcbiAgICB2ZWMzIHZBbWJpZW50Q29sb3I7XFxuICAgIGZsb2F0IGFzcGVjdDtcXG4gICAgZmxvYXQgaXNPdXRsaW5lO1xcbiAgICB2ZWM0IHRpbWU7XFxufTtcXG5cXG4vLyBiYWJ5bG9uIHNwZWNpZmljXFxuI2luY2x1ZGU8c2NlbmVVYm9EZWNsYXJhdGlvbj5cXG4jaW5jbHVkZTxtZXNoVWJvRGVjbGFyYXRpb24+XFxuXCIsbS5FZmZlY3QuSW5jbHVkZXNTaGFkZXJzU3RvcmUubXRvb25WZXJ0ZXhEZWNsYXJhdGlvbj1cIi8vIFVuaWZvcm1zXFxudW5pZm9ybSBtYXQ0IHZpZXdQcm9qZWN0aW9uO1xcbnVuaWZvcm0gbWF0NCB2aWV3O1xcbnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uO1xcbnVuaWZvcm0gZmxvYXQgb3V0bGluZVdpZHRoO1xcbnVuaWZvcm0gZmxvYXQgb3V0bGluZVNjYWxlZE1heERpc3RhbmNlO1xcbnVuaWZvcm0gZmxvYXQgb3V0bGluZUxpZ2h0aW5nTWl4O1xcbnVuaWZvcm0gZmxvYXQgaXNPdXRsaW5lO1xcbnVuaWZvcm0gZmxvYXQgYXNwZWN0O1xcblxcbiNpZmRlZiBESUZGVVNFXFxudW5pZm9ybSBtYXQ0IGRpZmZ1c2VNYXRyaXg7XFxudW5pZm9ybSB2ZWMyIHZEaWZmdXNlSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIEVNSVNTSVZFXFxudW5pZm9ybSB2ZWMyIHZFbWlzc2l2ZUluZm9zO1xcbnVuaWZvcm0gbWF0NCBlbWlzc2l2ZU1hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgQlVNUFxcbnVuaWZvcm0gdmVjMyB2QnVtcEluZm9zO1xcbnVuaWZvcm0gbWF0NCBidW1wTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBTSEFERVxcbnVuaWZvcm0gdmVjMiB2U2hhZGVJbmZvcztcXG51bmlmb3JtIG1hdDQgc2hhZGVNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFJFQ0VJVkVfU0hBRE9XXFxudW5pZm9ybSB2ZWMyIHZSZWNlaXZlU2hhZG93SW5mb3M7XFxudW5pZm9ybSBtYXQ0IHJlY2VpdmVTaGFkb3dNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFNIQURJTkdfR1JBREVcXG51bmlmb3JtIHZlYzIgdlNoYWRpbmdHcmFkZUluZm9zO1xcbnVuaWZvcm0gbWF0NCBzaGFkaW5nR3JhZGVNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFJJTVxcbnVuaWZvcm0gdmVjMiB2UmltSW5mb3M7XFxudW5pZm9ybSBtYXQ0IHJpbU1hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgTUFUQ0FQXFxudW5pZm9ybSB2ZWMyIHZNYXRDYXBJbmZvcztcXG51bmlmb3JtIG1hdDQgbWF0Q2FwTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBPVVRMSU5FX1dJRFRIXFxudW5pZm9ybSB2ZWMyIHZPdXRsaW5lV2lkdGhJbmZvcztcXG51bmlmb3JtIG1hdDQgb3V0bGluZVdpZHRoTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBVVl9BTklNQVRJT05fTUFTS1xcbnVuaWZvcm0gdmVjMiB2VXZBbmltYXRpb25NYXNrSW5mb3M7XFxudW5pZm9ybSBtYXQ0IHV2QW5pbWF0aW9uTWFza01hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgUE9JTlRTSVpFXFxudW5pZm9ybSBmbG9hdCBwb2ludFNpemU7XFxuI2VuZGlmXFxuXCIsbS5FZmZlY3QuSW5jbHVkZXNTaGFkZXJzU3RvcmUubXRvb25GcmFnbWVudERlY2xhcmF0aW9uPVwidW5pZm9ybSB2ZWM0IHZFeWVQb3NpdGlvbjtcXG5cXG4vLyBDb2xvcnNcXG51bmlmb3JtIHZlYzQgdkRpZmZ1c2VDb2xvcjtcXG51bmlmb3JtIHZlYzMgdkVtaXNzaXZlQ29sb3I7XFxudW5pZm9ybSB2ZWMzIHZTaGFkZUNvbG9yO1xcbnVuaWZvcm0gdmVjMyB2UmltQ29sb3I7XFxudW5pZm9ybSB2ZWM0IHZPdXRsaW5lQ29sb3I7XFxudW5pZm9ybSB2ZWMzIHZBbWJpZW50Q29sb3I7XFxuXFxudW5pZm9ybSB2ZWMzIHZFeWVVcDtcXG51bmlmb3JtIGZsb2F0IGFzcGVjdDtcXG51bmlmb3JtIGZsb2F0IGFscGhhQ3V0T2ZmO1xcbnVuaWZvcm0gZmxvYXQgdmlzaWJpbGl0eTtcXG51bmlmb3JtIGZsb2F0IGlzT3V0bGluZTtcXG51bmlmb3JtIHZlYzQgdGltZTtcXG5cXG4vLyBTYW1wbGVyc1xcbiNpZmRlZiBESUZGVVNFXFxudW5pZm9ybSB2ZWMyIHZEaWZmdXNlSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIEVNSVNTSVZFXFxudW5pZm9ybSB2ZWMyIHZFbWlzc2l2ZUluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBCVU1QXFxudW5pZm9ybSB2ZWMzIHZCdW1wSW5mb3M7XFxudW5pZm9ybSB2ZWMyIHZUYW5nZW50U3BhY2VQYXJhbXM7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFNIQURFXFxudW5pZm9ybSB2ZWMyIHZTaGFkZUluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBSRUNFSVZFX1NIQURPV1xcbnVuaWZvcm0gdmVjMiB2UmVjZWl2ZVNoYWRvd0luZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBTSEFESU5HX0dSQURFXFxudW5pZm9ybSB2ZWMyIHZTaGFkaW5nR3JhZGVJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgUklNXFxudW5pZm9ybSB2ZWMyIHZSaW1JbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgTUFUQ0FQXFxudW5pZm9ybSB2ZWMyIHZNYXRDYXBJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgT1VUTElORV9XSURUSFxcbnVuaWZvcm0gdmVjMiB2T3V0bGluZVdpZHRoSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFVWX0FOSU1BVElPTl9NQVNLXFxudW5pZm9ybSB2ZWMyIHZVdkFuaW1hdGlvbk1hc2tJbmZvcztcXG4jZW5kaWZcXG5cXG4vLyBNVG9vbiBwYXJhbXNcXG51bmlmb3JtIGZsb2F0IHNoYWRpbmdHcmFkZVJhdGU7XFxudW5pZm9ybSBmbG9hdCByZWNlaXZlU2hhZG93UmF0ZTtcXG51bmlmb3JtIGZsb2F0IHNoYWRlU2hpZnQ7XFxudW5pZm9ybSBmbG9hdCBzaGFkZVRvb255O1xcbnVuaWZvcm0gZmxvYXQgbGlnaHRDb2xvckF0dGVudWF0aW9uO1xcbnVuaWZvcm0gZmxvYXQgaW5kaXJlY3RMaWdodEludGVuc2l0eTtcXG51bmlmb3JtIGZsb2F0IHJpbUxpZ2h0aW5nTWl4O1xcbnVuaWZvcm0gZmxvYXQgcmltRnJlc25lbFBvd2VyO1xcbnVuaWZvcm0gZmxvYXQgcmltTGlmdDtcXG51bmlmb3JtIGZsb2F0IG91dGxpbmVXaWR0aDtcXG51bmlmb3JtIGZsb2F0IG91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZTtcXG51bmlmb3JtIGZsb2F0IG91dGxpbmVMaWdodGluZ01peDtcXG51bmlmb3JtIGZsb2F0IHV2QW5pbWF0aW9uU2Nyb2xsWDtcXG51bmlmb3JtIGZsb2F0IHV2QW5pbWF0aW9uU2Nyb2xsWTtcXG51bmlmb3JtIGZsb2F0IHV2QW5pbWF0aW9uUm90YXRpb247XFxuXCIsbS5FZmZlY3QuSW5jbHVkZXNTaGFkZXJzU3RvcmUubXRvb25GcmFnbWVudEZ1bmN0aW9ucz1cIlxcbi8qKlxcbiogQ29tcHV0ZSBEaXJlY3Rpb25hbCBvciBQb2ludCBsaWdodCBkaXJlY3Rpb25cXG4qL1xcbnZlYzMgY29tcHV0ZUxpZ2h0RGlyZWN0aW9uKHZlYzQgbGlnaHREYXRhKSB7XFxuICAgIHJldHVybiBub3JtYWxpemUobWl4KGxpZ2h0RGF0YS54eXogLSB2UG9zaXRpb25XLCAtbGlnaHREYXRhLnh5eiwgbGlnaHREYXRhLncpKTtcXG59XFxuXFxuLyoqXFxuKiBDb21wdXRlIFNwb3QgTGlnaHQgZGlyZWN0aW9uXFxuKi9cXG52ZWMzIGNvbXB1dGVTcG90TGlnaHREaXJlY3Rpb24odmVjNCBsaWdodERhdGEpIHtcXG4gICAgcmV0dXJuIG5vcm1hbGl6ZShsaWdodERhdGEueHl6IC0gdlBvc2l0aW9uVyk7XFxufVxcblxcbi8qKlxcbiogQ29tcHV0ZSBIZW1pc3BoZXJpYyBsaWdodCBkaXJlY3Rpb25cXG4qL1xcbnZlYzMgY29tcHV0ZUhlbWlzcGhlcmljTGlnaHREaXJlY3Rpb24odmVjNCBsaWdodERhdGEsIHZlYzMgdk5vcm1hbCkge1xcbiAgICByZXR1cm4gbm9ybWFsaXplKGxpZ2h0RGF0YS54eXopO1xcbn1cXG5cXG4vKipcXG4qIENvbXB1dGUgTVRvb24gZGlmZnVzZSBsaWdodGluZ1xcbiovXFxudmVjNCBjb21wdXRlTVRvb25EaWZmdXNlTGlnaHRpbmcodmVjMyB3b3JsZFZpZXcsIHZlYzMgd29ybGROb3JtYWwsIHZlYzIgbWFpblV2LCB2ZWMzIGxpZ2h0RGlyZWN0aW9uLCB2ZWM0IGxpZ2h0RGlmZnVzZSwgZmxvYXQgc2hhZG93QXR0ZW51YXRpb24pIHtcXG4gICAgZmxvYXQgX3JlY2VpdmVTaGFkb3cgPSByZWNlaXZlU2hhZG93UmF0ZTtcXG4jaWZkZWYgUkVDRUlWRV9TSEFET1dcXG4gICAgX3JlY2VpdmVTaGFkb3cgPSBfcmVjZWl2ZVNoYWRvdyAqIHRleHR1cmUyRChyZWNlaXZlU2hhZG93U2FtcGxlciwgbWFpblV2KS5yICogdlJlY2VpdmVTaGFkb3dJbmZvcy55O1xcbiNlbmRpZlxcblxcbiAgICBmbG9hdCBfc2hhZGluZ0dyYWRlID0gMC4wO1xcbiNpZmRlZiBTSEFESU5HX0dSQURFXFxuICAgIF9zaGFkaW5nR3JhZGUgPSAxLjAgLSB0ZXh0dXJlMkQoc2hhZGluZ0dyYWRlU2FtcGxlciwgbWFpblV2KS5yICogdlNoYWRpbmdHcmFkZUluZm9zLnk7XFxuI2VuZGlmXFxuICAgIF9zaGFkaW5nR3JhZGUgPSAxLjAgLSBzaGFkaW5nR3JhZGVSYXRlICogX3NoYWRpbmdHcmFkZTtcXG5cXG4gICAgLy8gTGlnaHRpbmdcXG4gICAgdmVjMyBfbGlnaHRDb2xvciA9IGxpZ2h0RGlmZnVzZS5yZ2IgKiBzdGVwKDAuNSwgbGVuZ3RoKGxpZ2h0RGlyZWN0aW9uKSk7IC8vIGxlbmd0aChsaWdodERpcikgaXMgemVybyBpZiBkaXJlY3Rpb25hbCBsaWdodCBpcyBkaXNhYmxlZC5cXG4gICAgZmxvYXQgX2RvdE5MID0gZG90KGxpZ2h0RGlyZWN0aW9uLCB3b3JsZE5vcm1hbCk7XFxuI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuICAgIGZsb2F0IF9saWdodEF0dGVudWF0aW9uID0gMS4wO1xcbiNlbHNlXFxuICAgIGZsb2F0IF9saWdodEF0dGVudWF0aW9uID0gc2hhZG93QXR0ZW51YXRpb24gKiBtaXgoMS4wLCBzaGFkb3dBdHRlbnVhdGlvbiwgX3JlY2VpdmVTaGFkb3cpO1xcbiNlbmRpZlxcblxcbiAgICAvLyBsaWdodGluZyBpbnRlbnNpdHlcXG4gICAgZmxvYXQgX2xpZ2h0SW50ZW5zaXR5ID0gX2RvdE5MO1xcbiAgICBfbGlnaHRJbnRlbnNpdHkgPSBfbGlnaHRJbnRlbnNpdHkgKiAwLjUgKyAwLjU7IC8vIGZyb20gWy0xLCArMV0gdG8gWzAsIDFdXFxuICAgIF9saWdodEludGVuc2l0eSA9IF9saWdodEludGVuc2l0eSAqIF9saWdodEF0dGVudWF0aW9uOyAvLyByZWNlaXZlIHNoYWRvd1xcbiAgICBfbGlnaHRJbnRlbnNpdHkgPSBfbGlnaHRJbnRlbnNpdHkgKiBfc2hhZGluZ0dyYWRlOyAvLyBkYXJrZXJcXG4gICAgX2xpZ2h0SW50ZW5zaXR5ID0gX2xpZ2h0SW50ZW5zaXR5ICogMi4wIC0gMS4wOyAvLyBmcm9tIFswLCAxXSB0byBbLTEsICsxXVxcbiAgICAvLyB0b29uZWQuIG1hcHBpbmcgZnJvbSBbbWluSW50ZW5zaXR5VGhyZXNob2xkLCBtYXhJbnRlbnNpdHlUaHJlc2hvbGRdIHRvIFswLCAxXVxcbiAgICBmbG9hdCBfbWF4SW50ZW5zaXR5VGhyZXNob2xkID0gbWl4KDEuMCwgc2hhZGVTaGlmdCwgc2hhZGVUb29ueSk7XFxuICAgIGZsb2F0IF9taW5JbnRlbnNpdHlUaHJlc2hvbGQgPSBzaGFkZVNoaWZ0O1xcbiAgICBfbGlnaHRJbnRlbnNpdHkgPSBjbGFtcCgoX2xpZ2h0SW50ZW5zaXR5IC0gX21pbkludGVuc2l0eVRocmVzaG9sZCkgLyBtYXgoRVBTX0NPTCwgKF9tYXhJbnRlbnNpdHlUaHJlc2hvbGQgLSBfbWluSW50ZW5zaXR5VGhyZXNob2xkKSksIDAuMCwgMS4wKTtcXG5cXG4gICAgLy8gQWxiZWRvIGNvbG9yXFxuICAgIHZlYzMgX3NoYWRlID0gdlNoYWRlQ29sb3I7XFxuI2lmZGVmIFNIQURFXFxuICAgIF9zaGFkZSA9IF9zaGFkZSAqIHRleHR1cmUyRChzaGFkZVNhbXBsZXIsIG1haW5VdikucmdiICogdlNoYWRlSW5mb3MueTtcXG4jZW5kaWZcXG5cXG4gICAgdmVjNCBfbGl0ID0gdkRpZmZ1c2VDb2xvcjtcXG4jaWZkZWYgRElGRlVTRVxcbiAgICBfbGl0ID0gX2xpdCAqIHRleHR1cmUyRChkaWZmdXNlU2FtcGxlciwgbWFpblV2KSAqIHZEaWZmdXNlSW5mb3MueTtcXG4jZW5kaWZcXG4gICAgdmVjMyBfY29sID0gbWl4KF9zaGFkZS5yZ2IsIF9saXQucmdiLCBfbGlnaHRJbnRlbnNpdHkpO1xcblxcbiAgICAvLyBEaXJlY3QgTGlnaHRcXG4gICAgdmVjMyBfbGlnaHRpbmcgPSBfbGlnaHRDb2xvcjtcXG4gICAgX2xpZ2h0aW5nID0gbWl4KF9saWdodGluZywgdmVjMyhtYXgoRVBTX0NPTCwgbWF4KF9saWdodGluZy54LCBtYXgoX2xpZ2h0aW5nLnksIF9saWdodGluZy56KSkpKSwgbGlnaHRDb2xvckF0dGVudWF0aW9uKTsgLy8gY29sb3IgYXR0ZW5cXG4jaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4gICAgX2xpZ2h0aW5nICo9IDAuNTsgLy8gZGFya2VuIGlmIGFkZGl0aW9uYWwgbGlnaHRcXG4gICAgX2xpZ2h0aW5nICo9IG1pbigwLCBkb3ROTCkgKyAxLjA7IC8vIGRhcmtlbiBkb3ROTCA8IDAgYXJlYSBieSB1c2luZyBoYWxmIGxhbWJlcnRcXG4gICAgX2xpZ2h0aW5nICo9IHNoYWRvd0F0dGVudWF0aW9uOyAvLyBkYXJrZW4gaWYgcmVjZWl2aW5nIHNoYWRvd1xcbiNlbHNlXFxuICAgIC8vIGJhc2UgbGlnaHQgZG9lcyBub3QgZGFya2VuLlxcbiNlbmRpZlxcbiAgICBfY29sICo9IF9saWdodGluZztcXG5cXG4gICAgLy8gSW5kaXJlY3QgTGlnaHRcXG4jaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4jZWxzZVxcbiAgICB2ZWMzIF90b29uZWRHSSA9IHZBbWJpZW50Q29sb3IucmdiOyAvLyBUT0RPOiBHSVxcbiAgICB2ZWMzIF9pbmRpcmVjdExpZ2h0aW5nID0gbWl4KF90b29uZWRHSSwgdkFtYmllbnRDb2xvci5yZ2IsIGluZGlyZWN0TGlnaHRJbnRlbnNpdHkpO1xcbiAgICBfaW5kaXJlY3RMaWdodGluZyA9IG1peChfaW5kaXJlY3RMaWdodGluZywgdmVjMyhtYXgoRVBTX0NPTCwgbWF4KF9pbmRpcmVjdExpZ2h0aW5nLngsIG1heChfaW5kaXJlY3RMaWdodGluZy55LCBfaW5kaXJlY3RMaWdodGluZy56KSkpKSwgbGlnaHRDb2xvckF0dGVudWF0aW9uKTsgLy8gY29sb3IgYXR0ZW5cXG4gICAgX2NvbCArPSBfaW5kaXJlY3RMaWdodGluZyAqIF9saXQucmdiO1xcblxcbiAgICBfY29sID0gbWluKF9jb2wucmdiLCBfbGl0LnJnYik7IC8vIGNvbW1lbnQgb3V0IGlmIHlvdSB3YW50IHRvIFBCUiBhYnNvbHV0ZWx5LlxcbiNlbmRpZlxcblxcbiAgICAvLyBwYXJhbWV0cmljIHJpbSBsaWdodGluZ1xcbiNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiAgICB2ZWMzIF9zdGF0aWNSaW1MaWdodGluZyA9IHZlYzMoMC4wKTtcXG4gICAgdmVjMyBfbWl4ZWRSaW1MaWdodGluZyA9IF9saWdodGluZztcXG4jZWxzZVxcbiAgICB2ZWMzIF9zdGF0aWNSaW1MaWdodGluZyA9IHZlYzMoMS4wKTtcXG4gICAgdmVjMyBfbWl4ZWRSaW1MaWdodGluZyA9IF9saWdodGluZyArIF9pbmRpcmVjdExpZ2h0aW5nO1xcbiNlbmRpZlxcbiAgICB2ZWMzIF9yaW1MaWdodGluZyA9IG1peChfc3RhdGljUmltTGlnaHRpbmcsIF9taXhlZFJpbUxpZ2h0aW5nLCByaW1MaWdodGluZ01peCk7XFxuICAgIHZlYzMgX3JpbUNvbG9yID0gdlJpbUNvbG9yLnJnYjtcXG4jaWZkZWYgUklNXFxuICAgIF9yaW1Db2xvciA9IF9yaW1Db2xvciAqIHRleHR1cmUyRChyaW1TYW1wbGVyLCB2UmltVVYgKyBtYWluVXYpLnJnYiAqIHZSaW1JbmZvcy55O1xcbiNlbmRpZlxcbiAgICB2ZWMzIF9yaW0gPSBwb3coY2xhbXAoMS4wIC0gZG90KHdvcmxkTm9ybWFsLCB3b3JsZFZpZXcpICsgcmltTGlmdCwgMC4wLCAxLjApLCByaW1GcmVzbmVsUG93ZXIpICogX3JpbUNvbG9yLnJnYjtcXG4gICAgX2NvbCArPSBtaXgoX3JpbSAqIF9yaW1MaWdodGluZywgdmVjMygwLjApLCBpc091dGxpbmUpO1xcblxcbiAgICAvLyBhZGRpdGl2ZSBtYXRjYXBcXG4jaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4jZWxzZVxcbiNpZmRlZiBNQVRDQVBcXG4gICAgdmVjMyBfd29ybGRWaWV3VXAgPSBub3JtYWxpemUodkV5ZVVwIC0gd29ybGRWaWV3ICogZG90KHdvcmxkVmlldywgdkV5ZVVwKSk7XFxuICAgIHZlYzMgX3dvcmxkVmlld1JpZ2h0ID0gbm9ybWFsaXplKGNyb3NzKHdvcmxkVmlldywgX3dvcmxkVmlld1VwKSk7XFxuICAgIHZlYzIgX21hdENhcFV2ID0gdmVjMihkb3QoX3dvcmxkVmlld1JpZ2h0LCB3b3JsZE5vcm1hbCksIGRvdChfd29ybGRWaWV3VXAsIHdvcmxkTm9ybWFsKSkgKiAwLjUgKyAwLjU7XFxuICAgIC8vIHV2LnkgaXMgcmV2ZXJzZWRcXG4gICAgX21hdENhcFV2LnkgPSAoMS4wIC0gX21hdENhcFV2LnkpO1xcbiAgICB2ZWMzIF9tYXRDYXBMaWdodGluZyA9IHRleHR1cmUyRChtYXRDYXBTYW1wbGVyLCBfbWF0Q2FwVXYpLnJnYiAqIHZNYXRDYXBJbmZvcy55O1xcbiAgICBfY29sICs9IG1peChfbWF0Q2FwTGlnaHRpbmcsIHZlYzMoMC4wKSwgaXNPdXRsaW5lKTtcXG4jZW5kaWZcXG4jZW5kaWZcXG5cXG4gICAgLy8gRW1pc3Npb25cXG4jaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4jZWxzZVxcbiAgICB2ZWMzIF9lbWlzc2lvbiA9IHZFbWlzc2l2ZUNvbG9yLnJnYjtcXG4jaWZkZWYgRU1JU1NJVkVcXG4gICAgX2VtaXNzaW9uICo9IHRleHR1cmUyRChlbWlzc2l2ZVNhbXBsZXIsIG1haW5VdikucmdiICogdkVtaXNzaXZlSW5mb3MueTtcXG4jZW5kaWZcXG4gICAgX2NvbCArPSBtaXgoX2VtaXNzaW9uLCB2ZWMzKDAuMCksIGlzT3V0bGluZSk7XFxuI2VuZGlmXFxuXFxuICAgIGZsb2F0IF9hbHBoYSA9IDEuMDtcXG5cXG4jaWYgZGVmaW5lZChBTFBIQUJMRU5EKSB8fCBkZWZpbmVkKEFMUEhBVEVTVClcXG4gICAgX2FscGhhID0gbWl4KF9saXQuYSwgX2xpdC5hICogdk91dGxpbmVDb2xvci5hLCBpc091dGxpbmUpO1xcbiNlbmRpZlxcblxcbiAgICAvLyBvdXRsaW5lXFxuI2lmZGVmIE1UT09OX09VVExJTkVfQ09MT1JfRklYRURcXG4gICAgX2NvbCA9IG1peChfY29sLCB2T3V0bGluZUNvbG9yLnJnYiwgaXNPdXRsaW5lKTtcXG4jZWxpZiBkZWZpbmVkKE1UT09OX09VVExJTkVfQ09MT1JfTUlYRUQpXFxuICAgIF9jb2wgPSBtaXgoX2NvbCwgdk91dGxpbmVDb2xvci5yZ2IgKiBtaXgodmVjMygxLjApLCBfY29sLCBvdXRsaW5lTGlnaHRpbmdNaXgpLCBpc091dGxpbmUpO1xcbiNlbHNlXFxuI2VuZGlmXFxuXFxuICAgIC8vIGRlYnVnXFxuI2lmZGVmIE1UT09OX0RFQlVHX05PUk1BTFxcbiAgICAjaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4gICAgICAgIHJldHVybiB2ZWM0KDAuMCk7XFxuICAgICNlbHNlXFxuICAgICAgICByZXR1cm4gdmVjNCh3b3JsZE5vcm1hbCAqIDAuNSArIDAuNSwgX2xpdC5hKTtcXG4gICAgI2VuZGlmXFxuI2VsaWYgZGVmaW5lZChNVE9PTl9ERUJVR19MSVRTSEFERVJBVEUpXFxuICAgICNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiAgICAgICAgcmV0dXJuIHZlYzQoMC4wKTtcXG4gICAgI2Vsc2VcXG4gICAgICAgIHJldHVybiB2ZWM0KF9saWdodEludGVuc2l0eSwgX2xpdC5hKTtcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXFxuICAgIHJldHVybiB2ZWM0KF9jb2wsIF9hbHBoYSk7XFxufVxcblwiLG0uRWZmZWN0LkluY2x1ZGVzU2hhZGVyc1N0b3JlLm10b29uTGlnaHRGcmFnbWVudD1cIiNpZmRlZiBMSUdIVHtYfVxcbiAgICAjaWYgZGVmaW5lZChTSEFET1dPTkxZKSB8fCBkZWZpbmVkKExJR0hUTUFQKSAmJiBkZWZpbmVkKExJR0hUTUFQRVhDTFVERUR7WH0pICYmIGRlZmluZWQoTElHSFRNQVBOT1NQRUNVTEFSe1h9KVxcbiAgICAgICAgLy9ObyBsaWdodCBjYWxjdWxhdGlvblxcbiAgICAjZWxzZVxcbiAgICAgICAgI2lmZGVmIFBCUlxcbiAgICAgICAgICAgIC8vIENvbXB1dGUgUHJlIExpZ2h0aW5nIGluZm9zXFxuICAgICAgICAgICAgI2lmZGVmIFNQT1RMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICBwcmVJbmZvID0gY29tcHV0ZVBvaW50QW5kU3BvdFByZUxpZ2h0aW5nSW5mbyhsaWdodHtYfS52TGlnaHREYXRhLCB2aWV3RGlyZWN0aW9uVywgbm9ybWFsVyk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChQT0lOVExJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICBwcmVJbmZvID0gY29tcHV0ZVBvaW50QW5kU3BvdFByZUxpZ2h0aW5nSW5mbyhsaWdodHtYfS52TGlnaHREYXRhLCB2aWV3RGlyZWN0aW9uVywgbm9ybWFsVyk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChIRU1JTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgIHByZUluZm8gPSBjb21wdXRlSGVtaXNwaGVyaWNQcmVMaWdodGluZ0luZm8obGlnaHR7WH0udkxpZ2h0RGF0YSwgdmlld0RpcmVjdGlvblcsIG5vcm1hbFcpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoRElSTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgIHByZUluZm8gPSBjb21wdXRlRGlyZWN0aW9uYWxQcmVMaWdodGluZ0luZm8obGlnaHR7WH0udkxpZ2h0RGF0YSwgdmlld0RpcmVjdGlvblcsIG5vcm1hbFcpO1xcbiAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgIHByZUluZm8uTmRvdFYgPSBOZG90VjtcXG5cXG4gICAgICAgICAgICAvLyBDb21wdXRlIEF0dGVudWF0aW9uIGluZm9zXFxuICAgICAgICAgICAgI2lmZGVmIFNQT1RMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICAjaWZkZWYgTElHSFRfRkFMTE9GRl9HTFRGe1h9XFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmX0dMVEYocHJlSW5mby5saWdodERpc3RhbmNlU3F1YXJlZCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi55KTtcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gKj0gY29tcHV0ZURpcmVjdGlvbmFsTGlnaHRGYWxsb2ZmX0dMVEYobGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLnh5eiwgcHJlSW5mby5MLCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLnosIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYudyk7XFxuICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoTElHSFRfRkFMTE9GRl9QSFlTSUNBTHtYfSlcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmZfUGh5c2ljYWwocHJlSW5mby5saWdodERpc3RhbmNlU3F1YXJlZCk7XFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uICo9IGNvbXB1dGVEaXJlY3Rpb25hbExpZ2h0RmFsbG9mZl9QaHlzaWNhbChsaWdodHtYfS52TGlnaHREaXJlY3Rpb24ueHl6LCBwcmVJbmZvLkwsIGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbi53KTtcXG4gICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChMSUdIVF9GQUxMT0ZGX1NUQU5EQVJEe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZl9TdGFuZGFyZChwcmVJbmZvLmxpZ2h0T2Zmc2V0LCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLngpO1xcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiAqPSBjb21wdXRlRGlyZWN0aW9uYWxMaWdodEZhbGxvZmZfU3RhbmRhcmQobGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLnh5eiwgcHJlSW5mby5MLCBsaWdodHtYfS52TGlnaHREaXJlY3Rpb24udywgbGlnaHR7WH0udkxpZ2h0RGF0YS53KTtcXG4gICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmYocHJlSW5mby5saWdodE9mZnNldCwgcHJlSW5mby5saWdodERpc3RhbmNlU3F1YXJlZCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi54LCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLnkpO1xcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiAqPSBjb21wdXRlRGlyZWN0aW9uYWxMaWdodEZhbGxvZmYobGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLnh5eiwgcHJlSW5mby5MLCBsaWdodHtYfS52TGlnaHREaXJlY3Rpb24udywgbGlnaHR7WH0udkxpZ2h0RGF0YS53LCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLnosIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYudyk7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoUE9JTlRMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgI2lmZGVmIExJR0hUX0ZBTExPRkZfR0xURntYfVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZl9HTFRGKHByZUluZm8ubGlnaHREaXN0YW5jZVNxdWFyZWQsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueSk7XFxuICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoTElHSFRfRkFMTE9GRl9QSFlTSUNBTHtYfSlcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmZfUGh5c2ljYWwocHJlSW5mby5saWdodERpc3RhbmNlU3F1YXJlZCk7XFxuICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoTElHSFRfRkFMTE9GRl9TVEFOREFSRHtYfSlcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmZfU3RhbmRhcmQocHJlSW5mby5saWdodE9mZnNldCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi54KTtcXG4gICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmYocHJlSW5mby5saWdodE9mZnNldCwgcHJlSW5mby5saWdodERpc3RhbmNlU3F1YXJlZCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi54LCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLnkpO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gMS4wO1xcbiAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlcyBMaWdodCByYWRpdXMgZm9yIGRpZmZ1c2UgYW5kIHNwZWMgdGVybVxcbiAgICAgICAgICAgIC8vIGNsZWFyIGNvYXQgaXMgdXNpbmcgYSBkZWRpY2F0ZWQgcm91Z2huZXNzXFxuICAgICAgICAgICAgI2lmZGVmIEhFTUlMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICBwcmVJbmZvLnJvdWdobmVzcyA9IHJvdWdobmVzcztcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBwcmVJbmZvLnJvdWdobmVzcyA9IGFkanVzdFJvdWdobmVzc0Zyb21MaWdodFByb3BlcnRpZXMocm91Z2huZXNzLCBsaWdodHtYfS52TGlnaHRTcGVjdWxhci5hLCBwcmVJbmZvLmxpZ2h0RGlzdGFuY2UpO1xcbiAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgIC8vIERpZmZ1c2UgY29udHJpYnV0aW9uXFxuICAgICAgICAgICAgI2lmZGVmIEhFTUlMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICBpbmZvLmRpZmZ1c2UgPSBjb21wdXRlSGVtaXNwaGVyaWNEaWZmdXNlTGlnaHRpbmcocHJlSW5mbywgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IsIGxpZ2h0e1h9LnZMaWdodEdyb3VuZCk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTU19UUkFOU0xVQ0VOQ1kpXFxuICAgICAgICAgICAgICAgIGluZm8uZGlmZnVzZSA9IGNvbXB1dGVEaWZmdXNlQW5kVHJhbnNtaXR0ZWRMaWdodGluZyhwcmVJbmZvLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYiwgc3ViU3VyZmFjZU91dC50cmFuc21pdHRhbmNlKTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBpbmZvLmRpZmZ1c2UgPSBjb21wdXRlRGlmZnVzZUxpZ2h0aW5nKHByZUluZm8sIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiKTtcXG4gICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAvLyBTcGVjdWxhciBjb250cmlidXRpb25cXG4gICAgICAgICAgICAjaWZkZWYgU1BFQ1VMQVJURVJNXFxuICAgICAgICAgICAgICAgICNpZmRlZiBBTklTT1RST1BJQ1xcbiAgICAgICAgICAgICAgICAgICAgaW5mby5zcGVjdWxhciA9IGNvbXB1dGVBbmlzb3Ryb3BpY1NwZWN1bGFyTGlnaHRpbmcocHJlSW5mbywgdmlld0RpcmVjdGlvblcsIG5vcm1hbFcsIGFuaXNvdHJvcGljT3V0LmFuaXNvdHJvcGljVGFuZ2VudCwgYW5pc290cm9waWNPdXQuYW5pc290cm9waWNCaXRhbmdlbnQsIGFuaXNvdHJvcGljT3V0LmFuaXNvdHJvcHksIGNsZWFyY29hdE91dC5zcGVjdWxhckVudmlyb25tZW50UjAsIHNwZWN1bGFyRW52aXJvbm1lbnRSOTAsIEFBUm91Z2huZXNzRmFjdG9ycy54LCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYik7XFxuICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICBpbmZvLnNwZWN1bGFyID0gY29tcHV0ZVNwZWN1bGFyTGlnaHRpbmcocHJlSW5mbywgbm9ybWFsVywgY2xlYXJjb2F0T3V0LnNwZWN1bGFyRW52aXJvbm1lbnRSMCwgc3BlY3VsYXJFbnZpcm9ubWVudFI5MCwgQUFSb3VnaG5lc3NGYWN0b3JzLngsIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiKTtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgLy8gU2hlZW4gY29udHJpYnV0aW9uXFxuICAgICAgICAgICAgI2lmZGVmIFNIRUVOXFxuICAgICAgICAgICAgICAgICNpZmRlZiBTSEVFTl9MSU5LV0lUSEFMQkVET1xcbiAgICAgICAgICAgICAgICAgICAgLy8gQkUgQ2FyZWZ1bGw6IFNoZWVuIGludGVuc2l0eSBpcyByZXBsYWNpbmcgdGhlIHJvdWdobmVzcyB2YWx1ZS5cXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8ucm91Z2huZXNzID0gc2hlZW5PdXQuc2hlZW5JbnRlbnNpdHk7XFxuICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICAjaWZkZWYgSEVNSUxJR0hUe1h9XFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5yb3VnaG5lc3MgPSBzaGVlbk91dC5zaGVlblJvdWdobmVzcztcXG4gICAgICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5yb3VnaG5lc3MgPSBhZGp1c3RSb3VnaG5lc3NGcm9tTGlnaHRQcm9wZXJ0aWVzKHNoZWVuT3V0LnNoZWVuUm91Z2huZXNzLCBsaWdodHtYfS52TGlnaHRTcGVjdWxhci5hLCBwcmVJbmZvLmxpZ2h0RGlzdGFuY2UpO1xcbiAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICBpbmZvLnNoZWVuID0gY29tcHV0ZVNoZWVuTGlnaHRpbmcocHJlSW5mbywgbm9ybWFsVywgc2hlZW5PdXQuc2hlZW5Db2xvciwgc3BlY3VsYXJFbnZpcm9ubWVudFI5MCwgQUFSb3VnaG5lc3NGYWN0b3JzLngsIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiKTtcXG4gICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAvLyBDbGVhciBDb2F0IGNvbnRyaWJ1dGlvblxcbiAgICAgICAgICAgICNpZmRlZiBDTEVBUkNPQVRcXG4gICAgICAgICAgICAgICAgLy8gU2ltdWxhdGVzIExpZ2h0IHJhZGl1c1xcbiAgICAgICAgICAgICAgICAjaWZkZWYgSEVNSUxJR0hUe1h9XFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLnJvdWdobmVzcyA9IGNsZWFyY29hdE91dC5jbGVhckNvYXRSb3VnaG5lc3M7XFxuICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLnJvdWdobmVzcyA9IGFkanVzdFJvdWdobmVzc0Zyb21MaWdodFByb3BlcnRpZXMoY2xlYXJjb2F0T3V0LmNsZWFyQ29hdFJvdWdobmVzcywgbGlnaHR7WH0udkxpZ2h0U3BlY3VsYXIuYSwgcHJlSW5mby5saWdodERpc3RhbmNlKTtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgICAgIGluZm8uY2xlYXJDb2F0ID0gY29tcHV0ZUNsZWFyQ29hdExpZ2h0aW5nKHByZUluZm8sIGNsZWFyY29hdE91dC5jbGVhckNvYXROb3JtYWxXLCBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0QUFSb3VnaG5lc3NGYWN0b3JzLngsIGNsZWFyY29hdE91dC5jbGVhckNvYXRJbnRlbnNpdHksIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiKTtcXG5cXG4gICAgICAgICAgICAgICAgI2lmZGVmIENMRUFSQ09BVF9USU5UXFxuICAgICAgICAgICAgICAgICAgICAvLyBBYnNvcnB0aW9uXFxuICAgICAgICAgICAgICAgICAgICBhYnNvcnB0aW9uID0gY29tcHV0ZUNsZWFyQ29hdExpZ2h0aW5nQWJzb3JwdGlvbihjbGVhcmNvYXRPdXQuY2xlYXJDb2F0TmRvdFZSZWZyYWN0LCBwcmVJbmZvLkwsIGNsZWFyY29hdE91dC5jbGVhckNvYXROb3JtYWxXLCBjbGVhcmNvYXRPdXQuY2xlYXJDb2F0Q29sb3IsIGNsZWFyY29hdE91dC5jbGVhckNvYXRUaGlja25lc3MsIGNsZWFyY29hdE91dC5jbGVhckNvYXRJbnRlbnNpdHkpO1xcbiAgICAgICAgICAgICAgICAgICAgaW5mby5kaWZmdXNlICo9IGFic29ycHRpb247XFxuICAgICAgICAgICAgICAgICAgICAjaWZkZWYgU1BFQ1VMQVJURVJNXFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5zcGVjdWxhciAqPSBhYnNvcnB0aW9uO1xcbiAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgICAgICAvLyBBcHBseSBlbmVyZ3kgY29uc2VydmF0aW9uIG9uIGRpZmZ1c2UgYW5kIHNwZWN1bGFyIHRlcm0uXFxuICAgICAgICAgICAgICAgIGluZm8uZGlmZnVzZSAqPSBpbmZvLmNsZWFyQ29hdC53O1xcbiAgICAgICAgICAgICAgICAjaWZkZWYgU1BFQ1VMQVJURVJNXFxuICAgICAgICAgICAgICAgICAgICBpbmZvLnNwZWN1bGFyICo9IGluZm8uY2xlYXJDb2F0Lnc7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAjaWZkZWYgU0hFRU5cXG4gICAgICAgICAgICAgICAgICAgIGluZm8uc2hlZW4gKj0gaW5mby5jbGVhckNvYXQudztcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICNpZmRlZiBTUE9UTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgaW5mbyA9IGNvbXB1dGVTcG90TGlnaHRpbmcodmlld0RpcmVjdGlvblcsIG5vcm1hbFcsIGxpZ2h0e1h9LnZMaWdodERhdGEsIGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbiwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IsIGxpZ2h0e1h9LnZMaWdodFNwZWN1bGFyLnJnYiwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5hLCBnbG9zc2luZXNzKTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKEhFTUlMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgaW5mbyA9IGNvbXB1dGVIZW1pc3BoZXJpY0xpZ2h0aW5nKHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXLCBsaWdodHtYfS52TGlnaHREYXRhLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYiwgbGlnaHR7WH0udkxpZ2h0U3BlY3VsYXIucmdiLCBsaWdodHtYfS52TGlnaHRHcm91bmQsIGdsb3NzaW5lc3MpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoUE9JTlRMSUdIVHtYfSkgfHwgZGVmaW5lZChESVJMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgaW5mbyA9IGNvbXB1dGVMaWdodGluZyh2aWV3RGlyZWN0aW9uVywgbm9ybWFsVywgbGlnaHR7WH0udkxpZ2h0RGF0YSwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IsIGxpZ2h0e1h9LnZMaWdodFNwZWN1bGFyLnJnYiwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5hLCBnbG9zc2luZXNzKTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgI2lmZGVmIFBST0pFQ1RFRExJR0hUVEVYVFVSRXtYfVxcbiAgICAgICAgICAgIGluZm8uZGlmZnVzZSAqPSBjb21wdXRlUHJvamVjdGlvblRleHR1cmVEaWZmdXNlTGlnaHRpbmcocHJvamVjdGlvbkxpZ2h0U2FtcGxlcntYfSwgdGV4dHVyZVByb2plY3Rpb25NYXRyaXh7WH0pO1xcbiAgICAgICAgI2VuZGlmXFxuICAgICNlbmRpZlxcblxcbiAgICAjaWZkZWYgU0hBRE9Xe1h9XFxuICAgICAgICAjaWZkZWYgU0hBRE9XQ1NNe1h9XFxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBTSEFET1dDU01OVU1fQ0FTQ0FERVN7WH07IGkrKylcXG4gICAgICAgICAgICB7XFxuICAgICAgICAgICAgICAgICNpZmRlZiBTSEFET1dDU01fUklHSFRIQU5ERUR7WH1cXG4gICAgICAgICAgICAgICAgICAgIGRpZmZ7WH0gPSB2aWV3RnJ1c3R1bVp7WH1baV0gKyB2UG9zaXRpb25Gcm9tQ2FtZXJhe1h9Lno7XFxuICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICBkaWZme1h9ID0gdmlld0ZydXN0dW1ae1h9W2ldIC0gdlBvc2l0aW9uRnJvbUNhbWVyYXtYfS56O1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgaWYgKGRpZmZ7WH0gPj0gMC4pIHtcXG4gICAgICAgICAgICAgICAgICAgIGluZGV4e1h9ID0gaTtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICNpZmRlZiBTSEFET1dDU01VU0VTSEFET1dNQVhae1h9XFxuICAgICAgICAgICAgaWYgKGluZGV4e1h9ID49IDApXFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dQQ0Z7WH0pXFxuICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dMT1dRVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENGMShmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dNRURJVU1RVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENGMyhmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnl6LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ0Y1KGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueXosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XUENTU3tYfSlcXG4gICAgICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0xPV1FVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ1NTMTYoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncsIGxpZ2h0U2l6ZVVWQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIGRlcHRoQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIHBlbnVtYnJhRGFya25lc3N7WH0pO1xcbiAgICAgICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dNRURJVU1RVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENTUzMyKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53LCBsaWdodFNpemVVVkNvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBkZXB0aENvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBwZW51bWJyYURhcmtuZXNze1h9KTtcXG4gICAgICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ1NTNjQoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncsIGxpZ2h0U2l6ZVVWQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIGRlcHRoQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIHBlbnVtYnJhRGFya25lc3N7WH0pO1xcbiAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93Q1NNKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgICAgICAjaWZkZWYgU0hBRE9XQ1NNREVCVUd7WH1cXG4gICAgICAgICAgICAgICAgICAgIHNoYWRvd0RlYnVne1h9ID0gdmVjMyhzaGFkb3cpICogdkNhc2NhZGVDb2xvcnNNdWx0aXBsaWVye1h9W2luZGV4e1h9XTtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgICAgICNpZm5kZWYgU0hBRE9XQ1NNTk9CTEVORHtYfVxcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZnJ1c3R1bUxlbmd0aCA9IGZydXN0dW1MZW5ndGhze1h9W2luZGV4e1h9XTtcXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IGRpZmZSYXRpbyA9IGNsYW1wKGRpZmZ7WH0gLyBmcnVzdHVtTGVuZ3RoLCAwLiwgMS4pICogY2FzY2FkZUJsZW5kRmFjdG9ye1h9O1xcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4e1h9IDwgKFNIQURPV0NTTU5VTV9DQVNDQURFU3tYfSAtIDEpICYmIGRpZmZSYXRpbyA8IDEuKVxcbiAgICAgICAgICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4e1h9ICs9IDE7XFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQgbmV4dFNoYWRvdyA9IDAuO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV1BDRntYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XTE9XUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDRjEoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dNRURJVU1RVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENGMyhmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnl6LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDRjUoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55eiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XUENTU3tYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XTE9XUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDU1MxNihmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udywgbGlnaHRTaXplVVZDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgZGVwdGhDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgcGVudW1icmFEYXJrbmVzc3tYfSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XTUVESVVNUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDU1MzMihmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udywgbGlnaHRTaXplVVZDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgZGVwdGhDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgcGVudW1icmFEYXJrbmVzc3tYfSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ1NTNjQoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncsIGxpZ2h0U2l6ZVVWQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIGRlcHRoQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIHBlbnVtYnJhRGFya25lc3N7WH0pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2hhZG93ID0gY29tcHV0ZVNoYWRvd0NTTShmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IG1peChuZXh0U2hhZG93LCBzaGFkb3csIGRpZmZSYXRpbyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgI2lmZGVmIFNIQURPV0NTTURFQlVHe1h9XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0RlYnVne1h9ID0gbWl4KHZlYzMobmV4dFNoYWRvdykgKiB2Q2FzY2FkZUNvbG9yc011bHRpcGxpZXJ7WH1baW5kZXh7WH1dLCBzaGFkb3dEZWJ1Z3tYfSwgZGlmZlJhdGlvKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dDTE9TRUVTTXtYfSlcXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dDVUJFe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENsb3NlRVNNQ3ViZShsaWdodHtYfS52TGlnaHREYXRhLnh5eiwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uZGVwdGhWYWx1ZXMpO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ2xvc2VFU00odlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dFU017WH0pXFxuICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XQ1VCRXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhFU01DdWJlKGxpZ2h0e1h9LnZMaWdodERhdGEueHl6LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5kZXB0aFZhbHVlcyk7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhFU00odlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dQT0lTU09Oe1h9KVxcbiAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0NVQkV7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUG9pc3NvblNhbXBsaW5nQ3ViZShsaWdodHtYfS52TGlnaHREYXRhLnh5eiwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uZGVwdGhWYWx1ZXMpO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUG9pc3NvblNhbXBsaW5nKHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XUENGe1h9KVxcbiAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0xPV1FVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUENGMSh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dNRURJVU1RVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBDRjModlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnl6LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBDRjUodlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnl6LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XUENTU3tYfSlcXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dMT1dRVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aFBDU1MxNih2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV01FRElVTVFVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUENTUzMyKHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUENTUzY0KHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dDVUJFe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93Q3ViZShsaWdodHtYfS52TGlnaHREYXRhLnh5eiwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uZGVwdGhWYWx1ZXMpO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3codlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAjaWZkZWYgU0hBRE9XT05MWVxcbiAgICAgICAgICAgICNpZm5kZWYgU0hBRE9XSU5VU0VcXG4gICAgICAgICAgICAgICAgI2RlZmluZSBTSEFET1dJTlVTRVxcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgIGdsb2JhbFNoYWRvdyArPSBzaGFkb3c7XFxuICAgICAgICAgICAgc2hhZG93TGlnaHRDb3VudCArPSAxLjA7XFxuICAgICAgICAjZW5kaWZcXG4gICAgI2Vsc2VcXG4gICAgICAgIHNoYWRvdyA9IDEuO1xcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmbmRlZiBTSEFET1dPTkxZXFxuICAgICAgICAjaWZkZWYgQ1VTVE9NVVNFUkxJR0hUSU5HXFxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBhbmQgcmVmbGVjdCBNVG9vbiBsaWdodGluZ1xcbiAgICAgICAgICAgICNpZmRlZiBTUE9UTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24gPSBjb21wdXRlU3BvdExpZ2h0RGlyZWN0aW9uKGxpZ2h0e1h9LnZMaWdodERhdGEpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoSEVNSUxJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICBsaWdodERpcmVjdGlvbiA9IGNvbXB1dGVIZW1pc3BoZXJpY0xpZ2h0RGlyZWN0aW9uKGxpZ2h0e1h9LnZMaWdodERhdGEsIG5vcm1hbFcueHl6KTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFBPSU5UTElHSFR7WH0pIHx8IGRlZmluZWQoRElSTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uID0gY29tcHV0ZUxpZ2h0RGlyZWN0aW9uKGxpZ2h0e1h9LnZMaWdodERhdGEpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgIG10b29uRGlmZnVzZSA9IGNvbXB1dGVNVG9vbkRpZmZ1c2VMaWdodGluZyh2aWV3RGlyZWN0aW9uVy54eXosIG5vcm1hbFcueHl6LCBtYWluVXYsIGxpZ2h0RGlyZWN0aW9uLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYmEsIHNoYWRvdyk7XFxuICAgICAgICAgICAgZGlmZnVzZUJhc2UgKz0gbXRvb25EaWZmdXNlLnJnYjtcXG4gICAgICAgICAgICBhbHBoYSA9IG1pbihhbHBoYSwgbXRvb25EaWZmdXNlLmEpO1xcbiAgICAgICAgICAgICNpZiBkZWZpbmVkKEFMUEhBVEVTVCkgJiYgQUxQSEFURVNUXFxuICAgICAgICAgICAgICAgIGFscGhhID0gKGFscGhhIC0gYWxwaGFDdXRPZmYpIC8gbWF4KGZ3aWR0aChhbHBoYSksIEVQU19DT0wpICsgMC41OyAvLyBBbHBoYSB0byBDb3ZlcmFnZVxcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEgPCBhbHBoYUN1dE9mZikge1xcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBhbHBoYSA9IDEuMDsgLy8gRGlzY2FyZGVkLCBvdGhlcndpc2UgaXQgc2hvdWxkIGJlIGFzc3VtZWQgdG8gaGF2ZSBmdWxsIG9wYWNpdHlcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEgLSAwLjAwMDEgPCAwLjAwMCkgeyAvLyBTbGlnaHRseSBpbXByb3ZlcyByZW5kZXJpbmcgd2l0aCBsYXllcmVkIHRyYW5zcGFyZW5jeVxcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VsaWYgZGVmaW5lZChMSUdIVE1BUCkgJiYgZGVmaW5lZChMSUdIVE1BUEVYQ0xVREVEe1h9KVxcbiAgICAgICAgICAgIGRpZmZ1c2VCYXNlICs9IGxpZ2h0bWFwQ29sb3IucmdiICogc2hhZG93O1xcbiAgICAgICAgICAgICNpZmRlZiBTUEVDVUxBUlRFUk1cXG4gICAgICAgICAgICAgICAgI2lmbmRlZiBMSUdIVE1BUE5PU1BFQ1VMQVJ7WH1cXG4gICAgICAgICAgICAgICAgICAgIHNwZWN1bGFyQmFzZSArPSBpbmZvLnNwZWN1bGFyICogc2hhZG93ICogbGlnaHRtYXBDb2xvci5yZ2I7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNpZmRlZiBDTEVBUkNPQVRcXG4gICAgICAgICAgICAgICAgI2lmbmRlZiBMSUdIVE1BUE5PU1BFQ1VMQVJ7WH1cXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29hdEJhc2UgKz0gaW5mby5jbGVhckNvYXQucmdiICogc2hhZG93ICogbGlnaHRtYXBDb2xvci5yZ2I7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNpZmRlZiBTSEVFTlxcbiAgICAgICAgICAgICAgICAjaWZuZGVmIExJR0hUTUFQTk9TUEVDVUxBUntYfVxcbiAgICAgICAgICAgICAgICAgICAgc2hlZW5CYXNlICs9IGluZm8uc2hlZW4ucmdiICogc2hhZG93O1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbHNlXFxuICAgICAgICAgICAgI2lmZGVmIFNIQURPV0NTTURFQlVHe1h9XFxuICAgICAgICAgICAgICAgIGRpZmZ1c2VCYXNlICs9IGluZm8uZGlmZnVzZSAqIHNoYWRvd0RlYnVne1h9O1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIGRpZmZ1c2VCYXNlICs9IGluZm8uZGlmZnVzZSAqIHNoYWRvdztcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjaWZkZWYgU1BFQ1VMQVJURVJNXFxuICAgICAgICAgICAgICAgIHNwZWN1bGFyQmFzZSArPSBpbmZvLnNwZWN1bGFyICogc2hhZG93O1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNpZmRlZiBDTEVBUkNPQVRcXG4gICAgICAgICAgICAgICAgY2xlYXJDb2F0QmFzZSArPSBpbmZvLmNsZWFyQ29hdC5yZ2IgKiBzaGFkb3c7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2lmZGVmIFNIRUVOXFxuICAgICAgICAgICAgICAgIHNoZWVuQmFzZSArPSBpbmZvLnNoZWVuLnJnYiAqIHNoYWRvdztcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbmRpZlxcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cIixtLkVmZmVjdC5JbmNsdWRlc1NoYWRlcnNTdG9yZS5tdG9vbkJ1bXBGcmFnbWVudD1cIi8vIHJlcGxhY2UgdkJ1bXBVViB0byBtYWluVXZcXG52ZWMyIHV2T2Zmc2V0ID0gdmVjMigwLjAsIDAuMCk7XFxuXFxuI2lmIGRlZmluZWQoQlVNUCkgfHwgZGVmaW5lZChQQVJBTExBWCkgfHwgZGVmaW5lZChERVRBSUwpXFxuICAgICNpZmRlZiBOT1JNQUxYWVNDQUxFXFxuICAgICAgICBmbG9hdCBub3JtYWxTY2FsZSA9IDEuMDtcXG4gICAgI2VsaWYgZGVmaW5lZChCVU1QKVxcbiAgICAgICAgZmxvYXQgbm9ybWFsU2NhbGUgPSB2QnVtcEluZm9zLnk7XFxuICAgICNlbHNlXFxuICAgICAgICBmbG9hdCBub3JtYWxTY2FsZSA9IDEuMDtcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZiBkZWZpbmVkKFRBTkdFTlQpICYmIGRlZmluZWQoTk9STUFMKVxcbiAgICAgICAgbWF0MyBUQk4gPSB2VEJOO1xcbiAgICAjZWxpZiBkZWZpbmVkKEJVTVApXFxuICAgICAgICAvLyB2ZWMyIFRCTlVWID0gZ2xfRnJvbnRGYWNpbmcgPyB2QnVtcFVWIDogLXZCdW1wVVY7XFxuICAgICAgICB2ZWMyIFRCTlVWID0gZ2xfRnJvbnRGYWNpbmcgPyBtYWluVXYgOiAtbWFpblV2O1xcbiAgICAgICAgbWF0MyBUQk4gPSBjb3RhbmdlbnRfZnJhbWUobm9ybWFsVyAqIG5vcm1hbFNjYWxlLCB2UG9zaXRpb25XLCBUQk5VViwgdlRhbmdlbnRTcGFjZVBhcmFtcyk7XFxuICAgICNlbHNlXFxuICAgICAgICB2ZWMyIFRCTlVWID0gZ2xfRnJvbnRGYWNpbmcgPyB2RGV0YWlsVVYgOiAtdkRldGFpbFVWO1xcbiAgICAgICAgbWF0MyBUQk4gPSBjb3RhbmdlbnRfZnJhbWUobm9ybWFsVyAqIG5vcm1hbFNjYWxlLCB2UG9zaXRpb25XLCBUQk5VViwgdmVjMigxLiwgMS4pKTtcXG4gICAgI2VuZGlmXFxuI2VsaWYgZGVmaW5lZChBTklTT1RST1BJQylcXG4gICAgI2lmIGRlZmluZWQoVEFOR0VOVCkgJiYgZGVmaW5lZChOT1JNQUwpXFxuICAgICAgICBtYXQzIFRCTiA9IHZUQk47XFxuICAgICNlbHNlXFxuICAgICAgICAvLyBmbGlwIHRoZSB1diBmb3IgdGhlIGJhY2tmYWNlXFxuICAgICAgICB2ZWMyIFRCTlVWID0gZ2xfRnJvbnRGYWNpbmcgPyB2TWFpblVWMSA6IC12TWFpblVWMTtcXG4gICAgICAgIG1hdDMgVEJOID0gY290YW5nZW50X2ZyYW1lKG5vcm1hbFcsIHZQb3NpdGlvblcsIFRCTlVWLCB2ZWMyKDEuLCAxLikpO1xcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cXG4jaWZkZWYgUEFSQUxMQVhcXG4gICAgbWF0MyBpbnZUQk4gPSB0cmFuc3Bvc2VNYXQzKFRCTik7XFxuXFxuICAgICNpZmRlZiBQQVJBTExBWE9DQ0xVU0lPTlxcbiAgICAgICAgLy8gdXZPZmZzZXQgPSBwYXJhbGxheE9jY2x1c2lvbihpbnZUQk4gKiAtdmlld0RpcmVjdGlvblcsIGludlRCTiAqIG5vcm1hbFcsIHZCdW1wVVYsIHZCdW1wSW5mb3Mueik7XFxuICAgICAgICB1dk9mZnNldCA9IHBhcmFsbGF4T2NjbHVzaW9uKGludlRCTiAqIC12aWV3RGlyZWN0aW9uVywgaW52VEJOICogbm9ybWFsVywgbWFpblV2LCB2QnVtcEluZm9zLnopO1xcbiAgICAjZWxzZVxcbiAgICAgICAgdXZPZmZzZXQgPSBwYXJhbGxheE9mZnNldChpbnZUQk4gKiB2aWV3RGlyZWN0aW9uVywgdkJ1bXBJbmZvcy56KTtcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXFxuI2lmZGVmIERFVEFJTFxcbiAgICB2ZWM0IGRldGFpbENvbG9yID0gdGV4dHVyZTJEKGRldGFpbFNhbXBsZXIsIHZEZXRhaWxVViArIHV2T2Zmc2V0KTtcXG4gICAgdmVjMiBkZXRhaWxOb3JtYWxSRyA9IGRldGFpbENvbG9yLnd5ICogMi4wIC0gMS4wO1xcbiAgICBmbG9hdCBkZXRhaWxOb3JtYWxCID0gc3FydCgxLiAtIHNhdHVyYXRlKGRvdChkZXRhaWxOb3JtYWxSRywgZGV0YWlsTm9ybWFsUkcpKSk7XFxuICAgIHZlYzMgZGV0YWlsTm9ybWFsID0gdmVjMyhkZXRhaWxOb3JtYWxSRywgZGV0YWlsTm9ybWFsQik7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIEJVTVBcXG4gICAgI2lmZGVmIE9CSkVDVFNQQUNFX05PUk1BTE1BUFxcbiAgICAgICAgLy8gbm9ybWFsVyA9IG5vcm1hbGl6ZSh0ZXh0dXJlMkQoYnVtcFNhbXBsZXIsIHZCdW1wVVYpLnh5eiAgKiAyLjAgLSAxLjApO1xcbiAgICAgICAgbm9ybWFsVyA9IG5vcm1hbGl6ZSh0ZXh0dXJlMkQoYnVtcFNhbXBsZXIsIG1haW5VdikueHl6ICAqIDIuMCAtIDEuMCk7XFxuICAgICAgICBub3JtYWxXID0gbm9ybWFsaXplKG1hdDMobm9ybWFsTWF0cml4KSAqIG5vcm1hbFcpO1xcbiAgICAjZWxpZiAhZGVmaW5lZChERVRBSUwpXFxuICAgICAgICAvLyBub3JtYWxXID0gcGVydHVyYk5vcm1hbChUQk4sIHRleHR1cmUyRChidW1wU2FtcGxlciwgdkJ1bXBVViArIHV2T2Zmc2V0KS54eXosIHZCdW1wSW5mb3MueSk7XFxuICAgICAgICBub3JtYWxXID0gcGVydHVyYk5vcm1hbChUQk4sIHRleHR1cmUyRChidW1wU2FtcGxlciwgbWFpblV2ICsgdXZPZmZzZXQpLnh5eiwgdkJ1bXBJbmZvcy55KTtcXG4gICAgI2Vsc2VcXG4gICAgICAgIC8vIHZlYzMgYnVtcE5vcm1hbCA9IHRleHR1cmUyRChidW1wU2FtcGxlciwgdkJ1bXBVViArIHV2T2Zmc2V0KS54eXogKiAyLjAgLSAxLjA7XFxuICAgICAgICB2ZWMzIGJ1bXBOb3JtYWwgPSB0ZXh0dXJlMkQoYnVtcFNhbXBsZXIsIG1haW5VdiArIHV2T2Zmc2V0KS54eXogKiAyLjAgLSAxLjA7XFxuICAgICAgICAvLyBSZWZlcmVuY2UgZm9yIG5vcm1hbCBibGVuZGluZzogaHR0cHM6Ly9ibG9nLnNlbGZzaGFkb3cuY29tL3B1YmxpY2F0aW9ucy9ibGVuZGluZy1pbi1kZXRhaWwvXFxuICAgICAgICAjaWYgREVUQUlMX05PUk1BTEJMRU5ETUVUSE9EID09IDAgLy8gd2hpdGVvdXRcXG4gICAgICAgICAgICBkZXRhaWxOb3JtYWwueHkgKj0gdkRldGFpbEluZm9zLno7XFxuICAgICAgICAgICAgdmVjMyBibGVuZGVkTm9ybWFsID0gbm9ybWFsaXplKHZlYzMoYnVtcE5vcm1hbC54eSArIGRldGFpbE5vcm1hbC54eSwgYnVtcE5vcm1hbC56ICogZGV0YWlsTm9ybWFsLnopKTtcXG4gICAgICAgICNlbGlmIERFVEFJTF9OT1JNQUxCTEVORE1FVEhPRCA9PSAxIC8vIFJOTVxcbiAgICAgICAgICAgIGRldGFpbE5vcm1hbC54eSAqPSB2RGV0YWlsSW5mb3MuejtcXG4gICAgICAgICAgICBidW1wTm9ybWFsICs9IHZlYzMoMC4wLCAwLjAsIDEuMCk7XFxuICAgICAgICAgICAgZGV0YWlsTm9ybWFsICo9IHZlYzMoLTEuMCwgLTEuMCwgMS4wKTtcXG4gICAgICAgICAgICB2ZWMzIGJsZW5kZWROb3JtYWwgPSBidW1wTm9ybWFsICogZG90KGJ1bXBOb3JtYWwsIGRldGFpbE5vcm1hbCkgLyBidW1wTm9ybWFsLnogLSBkZXRhaWxOb3JtYWw7XFxuICAgICAgICAjZW5kaWZcXG4gICAgICAgIG5vcm1hbFcgPSBwZXJ0dXJiTm9ybWFsQmFzZShUQk4sIGJsZW5kZWROb3JtYWwsIHZCdW1wSW5mb3MueSk7XFxuICAgICNlbmRpZlxcbiNlbGlmIGRlZmluZWQoREVUQUlMKVxcbiAgICAgICAgZGV0YWlsTm9ybWFsLnh5ICo9IHZEZXRhaWxJbmZvcy56O1xcbiAgICAgICAgbm9ybWFsVyA9IHBlcnR1cmJOb3JtYWxCYXNlKFRCTiwgZGV0YWlsTm9ybWFsLCB2RGV0YWlsSW5mb3Mueik7XFxuI2VuZGlmXFxuXCIsbS5FZmZlY3QuU2hhZGVyc1N0b3JlLm10b29uVmVydGV4U2hhZGVyPVwiLy8gaXQgaXMgYmFzZWQgb24gZGVmYXVsdC52ZXJ0ZXguZnhcXG4vLyBUaGlzIGluY2x1ZGUgaXMgc3BlY2lhbCwgaXQgd2lsbCBiZSByZXBsYWNlZCB0byBVYm9EZWNsYXJhdGlvbihXZWJHTDIpIG9yIFZlcnRleERlY2xhcmF0aW9uKFdlYkdMMSkuXFxuLy8gQHNlZSBlZmZlY3QudHNcXG4jaW5jbHVkZTxfX2RlY2xfX210b29uVmVydGV4Plxcblxcbi8vIEF0dHJpYnV0ZXNcXG5cXG4jZGVmaW5lIENVU1RPTV9WRVJURVhfQkVHSU5cXG5cXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcXG4jaWZkZWYgTk9STUFMXFxuYXR0cmlidXRlIHZlYzMgbm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBUQU5HRU5UXFxuYXR0cmlidXRlIHZlYzQgdGFuZ2VudDtcXG4jZW5kaWZcXG4jaWZkZWYgVVYxXFxuYXR0cmlidXRlIHZlYzIgdXY7XFxuI2VuZGlmXFxuI2luY2x1ZGU8dXZBdHRyaWJ1dGVEZWNsYXJhdGlvbj5bMi4uN11cXG4jaWZkZWYgVkVSVEVYQ09MT1JcXG5hdHRyaWJ1dGUgdmVjNCBjb2xvcjtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxoZWxwZXJGdW5jdGlvbnM+XFxuXFxuI2luY2x1ZGU8Ym9uZXNEZWNsYXJhdGlvbj5cXG4jaW5jbHVkZTxiYWtlZFZlcnRleEFuaW1hdGlvbkRlY2xhcmF0aW9uPlxcblxcbi8vIFVuaWZvcm1zXFxuI2luY2x1ZGU8aW5zdGFuY2VzRGVjbGFyYXRpb24+XFxuI2luY2x1ZGU8cHJlUGFzc1ZlcnRleERlY2xhcmF0aW9uPlxcblxcbiNpbmNsdWRlPG1haW5VVlZhcnlpbmdEZWNsYXJhdGlvbj5bMS4uN11cXG5cXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxESUZGVVNFLF9WQVJZSU5HTkFNRV8sRGlmZnVzZSlcXG4vLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sREVUQUlMLF9WQVJZSU5HTkFNRV8sRGV0YWlsKVxcbi8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxBTUJJRU5ULF9WQVJZSU5HTkFNRV8sQW1iaWVudClcXG4vLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sT1BBQ0lUWSxfVkFSWUlOR05BTUVfLE9wYWNpdHkpXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sRU1JU1NJVkUsX1ZBUllJTkdOQU1FXyxFbWlzc2l2ZSlcXG4vLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sTElHSFRNQVAsX1ZBUllJTkdOQU1FXyxMaWdodG1hcClcXG4vLyAjIGlmIGRlZmluZWQoU1BFQ1VMQVJURVJNKVxcbi8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxTUEVDVUxBUixfVkFSWUlOR05BTUVfLFNwZWN1bGFyKVxcbi8vICMgZW5kaWZcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxCVU1QLF9WQVJZSU5HTkFNRV8sQnVtcClcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxTSEFERSxfVkFSWUlOR05BTUVfLFNoYWRlKVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFJFQ0VJVkVfU0hBRE9XLF9WQVJZSU5HTkFNRV8sUmVjZWl2ZVNoYWRvdylcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxTSEFESU5HX0dSQURFLF9WQVJZSU5HTkFNRV8sU2hhZGluZ0dyYWRlKVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFJJTSxfVkFSWUlOR05BTUVfLFJpbSlcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxNQVRDQVAsX1ZBUllJTkdOQU1FXyxNYXRDYXApXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sT1VUTElORV9XSURUSCxfVkFSWUlOR05BTUVfLE91dGxpbmVXaWR0aClcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxVVl9BTklNQVRJT05fTUFTSyxfVkFSWUlOR05BTUVfLFV2QW5pbWF0aW9uTWFzaylcXG5cXG4vLyBBZGRpdGlvbmFsIFVuaWZvcm1zXFxuI2lmZGVmIE9VVExJTkVfV0lEVEhcXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgb3V0bGluZVdpZHRoU2FtcGxlcjtcXG4jZW5kaWZcXG5cXG4vLyBPdXRwdXRcXG52YXJ5aW5nIHZlYzMgdlBvc2l0aW9uVztcXG4jaWZkZWYgTk9STUFMXFxudmFyeWluZyB2ZWMzIHZOb3JtYWxXO1xcbiNlbmRpZlxcblxcbiNpZiBkZWZpbmVkKFZFUlRFWENPTE9SKSB8fCBkZWZpbmVkKElOU1RBTkNFU0NPTE9SKVxcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8YnVtcFZlcnRleERlY2xhcmF0aW9uPlxcblxcbiNpbmNsdWRlPGNsaXBQbGFuZVZlcnRleERlY2xhcmF0aW9uPlxcblxcbiNpbmNsdWRlPGZvZ1ZlcnRleERlY2xhcmF0aW9uPlxcbiNpbmNsdWRlPF9fZGVjbF9fbGlnaHRWeEZyYWdtZW50PlswLi5tYXhTaW11bHRhbmVvdXNMaWdodHNdXFxuXFxuI2luY2x1ZGU8bW9ycGhUYXJnZXRzVmVydGV4R2xvYmFsRGVjbGFyYXRpb24+XFxuI2luY2x1ZGU8bW9ycGhUYXJnZXRzVmVydGV4RGVjbGFyYXRpb24+WzAuLm1heFNpbXVsdGFuZW91c01vcnBoVGFyZ2V0c11cXG5cXG4vLyAjIGlmZGVmIFJFRkxFQ1RJT05NQVBfU0tZQk9YXFxuLy8gdmFyeWluZyB2ZWMzIHZQb3NpdGlvblVWVztcXG4vLyAjIGVuZGlmXFxuXFxuLy8gIyBpZiBkZWZpbmVkKFJFRkxFQ1RJT05NQVBfRVFVSVJFQ1RBTkdVTEFSX0ZJWEVEKSB8fCBkZWZpbmVkKFJFRkxFQ1RJT05NQVBfTUlSUk9SRURFUVVJUkVDVEFOR1VMQVJfRklYRUQpXFxuLy8gdmFyeWluZyB2ZWMzIHZEaXJlY3Rpb25XO1xcbi8vICMgZW5kaWZcXG5cXG4jaW5jbHVkZTxsb2dEZXB0aERlY2xhcmF0aW9uPlxcbiNkZWZpbmUgQ1VTVE9NX1ZFUlRFWF9ERUZJTklUSU9OU1xcblxcbnZvaWQgbWFpbih2b2lkKSB7XFxuXFxuICAgICNkZWZpbmUgQ1VTVE9NX1ZFUlRFWF9NQUlOX0JFR0lOXFxuXFxuICAgIHZlYzMgcG9zaXRpb25VcGRhdGVkID0gcG9zaXRpb247XFxuI2lmZGVmIE5PUk1BTFxcbiAgICB2ZWMzIG5vcm1hbFVwZGF0ZWQgPSBub3JtYWw7XFxuI2VuZGlmXFxuI2lmZGVmIFRBTkdFTlRcXG4gICAgdmVjNCB0YW5nZW50VXBkYXRlZCA9IHRhbmdlbnQ7XFxuI2VuZGlmXFxuI2lmZGVmIFVWMVxcbiAgICB2ZWMyIHV2VXBkYXRlZCA9IHV2O1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPG1vcnBoVGFyZ2V0c1ZlcnRleEdsb2JhbD5cXG4jaW5jbHVkZTxtb3JwaFRhcmdldHNWZXJ0ZXg+WzAuLm1heFNpbXVsdGFuZW91c01vcnBoVGFyZ2V0c11cXG5cXG4vLyAjIGlmZGVmIFJFRkxFQ1RJT05NQVBfU0tZQk9YXFxuLy8gICAgIHZQb3NpdGlvblVWVyA9IHBvc2l0aW9uVXBkYXRlZDtcXG4vLyAjIGVuZGlmXFxuXFxuI2RlZmluZSBDVVNUT01fVkVSVEVYX1VQREFURV9QT1NJVElPTlxcblxcbiNkZWZpbmUgQ1VTVE9NX1ZFUlRFWF9VUERBVEVfTk9STUFMXFxuXFxuI2luY2x1ZGU8aW5zdGFuY2VzVmVydGV4PlxcblxcbiNpZiBkZWZpbmVkKFBSRVBBU1MpICYmIGRlZmluZWQoUFJFUEFTU19WRUxPQ0lUWSkgJiYgIWRlZmluZWQoQk9ORVNfVkVMT0NJVFlfRU5BQkxFRClcXG4gICAgLy8gQ29tcHV0ZSB2ZWxvY2l0eSBiZWZvcmUgYm9uZXMgY29tcHV0YXRpb25cXG4gICAgdkN1cnJlbnRQb3NpdGlvbiA9IHZpZXdQcm9qZWN0aW9uICogZmluYWxXb3JsZCAqIHZlYzQocG9zaXRpb25VcGRhdGVkLCAxLjApO1xcbiAgICB2UHJldmlvdXNQb3NpdGlvbiA9IHByZXZpb3VzVmlld1Byb2plY3Rpb24gKiBmaW5hbFByZXZpb3VzV29ybGQgKiB2ZWM0KHBvc2l0aW9uVXBkYXRlZCwgMS4wKTtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxib25lc1ZlcnRleD5cXG4jaW5jbHVkZTxiYWtlZFZlcnRleEFuaW1hdGlvbj5cXG5cXG4gICAgLy8gVGV4dHVyZSBjb29yZGluYXRlc1xcbiNpZm5kZWYgVVYxXFxuICAgIHZlYzIgdXZVcGRhdGVkID0gdmVjMigwLiwgMC4pO1xcbiNlbmRpZlxcbiNpZmRlZiBNQUlOVVYxXFxuICAgIHZNYWluVVYxID0gdXZVcGRhdGVkO1xcbiNlbmRpZlxcbiNpbmNsdWRlPHV2VmFyaWFibGVEZWNsYXJhdGlvbj5bMi4uN11cXG5cXG4gICAgZmxvYXQgb3V0bGluZVRleCA9IDEuMDtcXG4gICAgaWYgKGlzT3V0bGluZSA9PSAxLjApIHtcXG4jaWZkZWYgT1VUTElORV9XSURUSFxcbiAgICAjaWYgT1VUTElORV9XSURUSERJUkVDVFVWID09IDBcXG4gICAgICAgIGlmICh2T3V0bGluZVdpZHRoSW5mb3MueCA9PSAwLilcXG4gICAgICAgIHtcXG4gICAgICAgICAgICB2T3V0bGluZVdpZHRoVVYgPSB2ZWMyKG91dGxpbmVXaWR0aE1hdHJpeCAqIHZlYzQodXZVcGRhdGVkLCAxLjAsIDAuMCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgI2lmZGVmIFVWMlxcbiAgICAgICAgZWxzZSBpZiAodk91dGxpbmVXaWR0aEluZm9zLnggPT0gMS4pXFxuICAgICAgICB7XFxuICAgICAgICAgICAgdk91dGxpbmVXaWR0aFVWID0gdmVjMihvdXRsaW5lV2lkdGhNYXRyaXggKiB2ZWM0KHV2MiwgMS4wLCAwLjApKTtcXG4gICAgICAgIH1cXG4gICAgICAgICNlbmRpZlxcbiAgICAgICAgI2lmZGVmIFVWM1xcbiAgICAgICAgZWxzZSBpZiAodk91dGxpbmVXaWR0aEluZm9zLnggPT0gMi4pXFxuICAgICAgICB7XFxuICAgICAgICAgICAgdk91dGxpbmVXaWR0aFVWID0gdmVjMihvdXRsaW5lV2lkdGhNYXRyaXggKiB2ZWM0KHV2MywgMS4wLCAwLjApKTtcXG4gICAgICAgIH1cXG4gICAgICAgICNlbmRpZlxcbiAgICAgICAgI2lmZGVmIFVWNFxcbiAgICAgICAgZWxzZSBpZiAodk91dGxpbmVXaWR0aEluZm9zLnggPT0gMy4pXFxuICAgICAgICB7XFxuICAgICAgICAgICAgdk91dGxpbmVXaWR0aFVWID0gdmVjMihvdXRsaW5lV2lkdGhNYXRyaXggKiB2ZWM0KHV2NCwgMS4wLCAwLjApKTtcXG4gICAgICAgIH1cXG4gICAgICAgICNlbmRpZlxcbiAgICAgICAgI2lmZGVmIFVWNVxcbiAgICAgICAgZWxzZSBpZiAodk91dGxpbmVXaWR0aEluZm9zLnggPT0gNC4pXFxuICAgICAgICB7XFxuICAgICAgICAgICAgdk91dGxpbmVXaWR0aFVWID0gdmVjMihvdXRsaW5lV2lkdGhNYXRyaXggKiB2ZWM0KHV2NSwgMS4wLCAwLjApKTtcXG4gICAgICAgIH1cXG4gICAgICAgICNlbmRpZlxcbiAgICAgICAgI2lmZGVmIFVWNlxcbiAgICAgICAgZWxzZSBpZiAodk91dGxpbmVXaWR0aEluZm9zLnggPT0gNS4pXFxuICAgICAgICB7XFxuICAgICAgICAgICAgdk91dGxpbmVXaWR0aFVWID0gdmVjMihvdXRsaW5lV2lkdGhNYXRyaXggKiB2ZWM0KHV2NiwgMS4wLCAwLjApKTtcXG4gICAgICAgIH1cXG4gICAgICAgICNlbmRpZlxcbiAgICAjZWxpZiBkZWZpbmVkKE1BSU5VVjEpXFxuICAgICAgICB2ZWMyIHZPdXRsaW5lV2lkdGhVViA9IHZNYWluVVYxO1xcbiAgICAjZWxpZiBkZWZpbmVkKE1BSU5VVjIpXFxuICAgICAgICB2ZWMyIHZPdXRsaW5lV2lkdGhVViA9IHZNYWluVVYyO1xcbiAgICAjZWxzZVxcbiAgICAgICAgdmVjMiB2T3V0bGluZVdpZHRoVVYgPSB2ZWMyKDAuLCAwLik7XFxuICAgICNlbmRpZlxcbiAgICAgICAgb3V0bGluZVRleCA9IHRleHR1cmUyRChvdXRsaW5lV2lkdGhTYW1wbGVyLCB2T3V0bGluZVdpZHRoVVYpLnIgKiB2T3V0bGluZVdpZHRoSW5mb3MueTtcXG4jZW5kaWZcXG5cXG4jaWYgZGVmaW5lZChNVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEKSAmJiBkZWZpbmVkKE5PUk1BTClcXG4gICAgICAgIC8vIG1vdmUgc2xpZ2h0bHkgd29ybGQgbm9ybWFsXFxuICAgICAgICB2ZWMzIG91dGxpbmVPZmZzZXQgPSAwLjAxICogb3V0bGluZVdpZHRoICogb3V0bGluZVRleCAqIGxlbmd0aCh0cmFuc3Bvc2VNYXQzKGludmVyc2VNYXQzKG1hdDMoZmluYWxXb3JsZCkpKSAqIG5vcm1hbFVwZGF0ZWQpICogbm9ybWFsVXBkYXRlZDtcXG4gICAgICAgIHBvc2l0aW9uVXBkYXRlZCArPSBvdXRsaW5lT2Zmc2V0O1xcbiNlbmRpZlxcbiAgICB9IC8vIEVuZCBpc091dGxpbmUgPT0gMS4wXFxuXFxuICAgIHZlYzQgd29ybGRQb3MgPSBmaW5hbFdvcmxkICogdmVjNChwb3NpdGlvblVwZGF0ZWQsIDEuMCk7XFxuXFxuI2lmZGVmIE5PUk1BTFxcbiAgICBtYXQzIG5vcm1hbFdvcmxkID0gbWF0MyhmaW5hbFdvcmxkKTtcXG5cXG4gICAgI2lmIGRlZmluZWQoSU5TVEFOQ0VTKSAmJiBkZWZpbmVkKFRISU5fSU5TVEFOQ0VTKVxcbiAgICAgICAgdk5vcm1hbFcgPSBub3JtYWxVcGRhdGVkIC8gdmVjMyhkb3Qobm9ybWFsV29ybGRbMF0sIG5vcm1hbFdvcmxkWzBdKSwgZG90KG5vcm1hbFdvcmxkWzFdLCBub3JtYWxXb3JsZFsxXSksIGRvdChub3JtYWxXb3JsZFsyXSwgbm9ybWFsV29ybGRbMl0pKTtcXG4gICAgICAgIHZOb3JtYWxXID0gbm9ybWFsaXplKG5vcm1hbFdvcmxkICogdk5vcm1hbFcpO1xcbiAgICAjZWxzZVxcbiAgICAgICAgI2lmZGVmIE5PTlVOSUZPUk1TQ0FMSU5HXFxuICAgICAgICAgICAgbm9ybWFsV29ybGQgPSB0cmFuc3Bvc2VNYXQzKGludmVyc2VNYXQzKG5vcm1hbFdvcmxkKSk7XFxuICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgIHZOb3JtYWxXID0gbm9ybWFsaXplKG5vcm1hbFdvcmxkICogbm9ybWFsVXBkYXRlZCk7XFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblxcbiNkZWZpbmUgQ1VTVE9NX1ZFUlRFWF9VUERBVEVfV09STERQT1NcXG5cXG4jaWZkZWYgTVVMVElWSUVXXFxuICAgIGlmIChnbF9WaWV3SURfT1ZSID09IDB1KSB7XFxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHZpZXdQcm9qZWN0aW9uICogd29ybGRQb3M7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHZpZXdQcm9qZWN0aW9uUiAqIHdvcmxkUG9zO1xcbiAgICB9XFxuI2Vsc2VcXG4gICAgZ2xfUG9zaXRpb24gPSB2aWV3UHJvamVjdGlvbiAqIHdvcmxkUG9zO1xcbiNlbmRpZlxcblxcbiAgICBpZiAoaXNPdXRsaW5lID09IDEuMCkge1xcbiNpZiBkZWZpbmVkKE1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOKSAmJiBkZWZpbmVkKE5PUk1BTClcXG4gICAgICAgIHZlYzMgdmlld05vcm1hbCA9IHRyYW5zcG9zZU1hdDMoaW52ZXJzZU1hdDMobWF0Myh2aWV3KSAqIG1hdDMoZmluYWxXb3JsZCkpKSAqIG5vcm1hbFVwZGF0ZWQ7XFxuICAgICAgICB2ZWMzIGNsaXBOb3JtYWwgPSBtYXQzKHByb2plY3Rpb24pICogdmlld05vcm1hbDtcXG4gICAgICAgIHZlYzIgcHJvamVjdGVkTm9ybWFsID0gbm9ybWFsaXplKGNsaXBOb3JtYWwueHkpO1xcbiAgICAgICAgcHJvamVjdGVkTm9ybWFsICo9IG1pbihnbF9Qb3NpdGlvbi53LCBvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2UpO1xcbiAgICAgICAgcHJvamVjdGVkTm9ybWFsLnggLz0gYXNwZWN0OyAvLyBhc3BlY3QgaW4gb3JpZ2luYWwgbXRvb24gaXMgeS94LiBhc3BlY3QgaW4gYmFieWxvbiBpcyB4L3kuXFxuICAgICAgICBnbF9Qb3NpdGlvbi54eSArPSAwLjAxICogb3V0bGluZVdpZHRoICogb3V0bGluZVRleCAqIHByb2plY3RlZE5vcm1hbCAqIGNsYW1wKDEuMCAtIGFicyhub3JtYWxpemUodmlld05vcm1hbCkueiksIDAuMCwgMS4wKTsgLy8gaWdub3JlIG9mZnNldCB3aGVuIG5vcm1hbCB0b3dhcmQgY2FtZXJhXFxuI2VuZGlmXFxuXFxuICAgICAgICBnbF9Qb3NpdGlvbi56ICs9IDFFLTYgKiBnbF9Qb3NpdGlvbi53OyAvLyBhbnRpLWFydGlmYWN0IG1hZ2ljIGZyb20gdGhyZWUtdnJtXFxuICAgIH1cXG5cXG4gICAgd29ybGRQb3MgPSBmaW5hbFdvcmxkICogdmVjNChwb3NpdGlvblVwZGF0ZWQsIDEuMCk7XFxuICAgIHZQb3NpdGlvblcgPSB2ZWMzKHdvcmxkUG9zKTtcXG5cXG4jaW5jbHVkZTxwcmVQYXNzVmVydGV4Plxcblxcbi8vICMgaWYgZGVmaW5lZChSRUZMRUNUSU9OTUFQX0VRVUlSRUNUQU5HVUxBUl9GSVhFRCkgfHwgZGVmaW5lZChSRUZMRUNUSU9OTUFQX01JUlJPUkVERVFVSVJFQ1RBTkdVTEFSX0ZJWEVEKVxcbi8vICAgICB2RGlyZWN0aW9uVyA9IG5vcm1hbGl6ZSh2ZWMzKGZpbmFsV29ybGQgKiB2ZWM0KHBvc2l0aW9uVXBkYXRlZCwgMC4wKSkpO1xcbi8vICMgZW5kaWZcXG5cXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sRElGRlVTRSxfVkFSWUlOR05BTUVfLERpZmZ1c2UsX01BVFJJWE5BTUVfLGRpZmZ1c2UsX0lORk9OQU1FXyxEaWZmdXNlSW5mb3MueClcXG4gICAgLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLERFVEFJTCxfVkFSWUlOR05BTUVfLERldGFpbCxfTUFUUklYTkFNRV8sZGV0YWlsLF9JTkZPTkFNRV8sRGV0YWlsSW5mb3MueClcXG4gICAgLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLEFNQklFTlQsX1ZBUllJTkdOQU1FXyxBbWJpZW50LF9NQVRSSVhOQU1FXyxhbWJpZW50LF9JTkZPTkFNRV8sQW1iaWVudEluZm9zLngpXFxuICAgIC8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxPUEFDSVRZLF9WQVJZSU5HTkFNRV8sT3BhY2l0eSxfTUFUUklYTkFNRV8sb3BhY2l0eSxfSU5GT05BTUVfLE9wYWNpdHlJbmZvcy54KVxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxFTUlTU0lWRSxfVkFSWUlOR05BTUVfLEVtaXNzaXZlLF9NQVRSSVhOQU1FXyxlbWlzc2l2ZSxfSU5GT05BTUVfLEVtaXNzaXZlSW5mb3MueClcXG4gICAgLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLExJR0hUTUFQLF9WQVJZSU5HTkFNRV8sTGlnaHRtYXAsX01BVFJJWE5BTUVfLGxpZ2h0bWFwLF9JTkZPTkFNRV8sTGlnaHRtYXBJbmZvcy54KVxcbiAgICAvLyAjIGlmIGRlZmluZWQoU1BFQ1VMQVJURVJNKVxcbiAgICAvLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sU1BFQ1VMQVIsX1ZBUllJTkdOQU1FXyxTcGVjdWxhcixfTUFUUklYTkFNRV8sc3BlY3VsYXIsX0lORk9OQU1FXyxTcGVjdWxhckluZm9zLngpXFxuICAgIC8vICMgZW5kaWZcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sQlVNUCxfVkFSWUlOR05BTUVfLEJ1bXAsX01BVFJJWE5BTUVfLGJ1bXAsX0lORk9OQU1FXyxCdW1wSW5mb3MueClcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sU0hBREUsX1ZBUllJTkdOQU1FXyxTaGFkZSxfTUFUUklYTkFNRV8sc2hhZGUsX0lORk9OQU1FXyxTaGFkZUluZm9zLngpXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLFJFQ0VJVkVfU0hBRE9XLF9WQVJZSU5HTkFNRV8sUmVjZWl2ZVNoYWRvdyxfTUFUUklYTkFNRV8scmVjZWl2ZVNoYWRvdyxfSU5GT05BTUVfLFJlY2VpdmVTaGFkb3dJbmZvcy54KVxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxTSEFESU5HX0dSQURFLF9WQVJZSU5HTkFNRV8sU2hhZGluZ0dyYWRlLF9NQVRSSVhOQU1FXyxzaGFkaW5nR3JhZGUsX0lORk9OQU1FXyxTaGFkaW5nR3JhZGVJbmZvcy54KVxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxSSU0sX1ZBUllJTkdOQU1FXyxSaW0sX01BVFJJWE5BTUVfLHJpbSxfSU5GT05BTUVfLFJpbUluZm9zLngpXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLE1BVENBUCxfVkFSWUlOR05BTUVfLE1hdENhcCxfTUFUUklYTkFNRV8sbWF0Q2FwLF9JTkZPTkFNRV8sTWF0Q2FwSW5mb3MueClcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sVVZfQU5JTUFUSU9OX01BU0ssX1ZBUllJTkdOQU1FXyxVdkFuaW1hdGlvbk1hc2ssX01BVFJJWE5BTUVfLHV2QW5pbWF0aW9uTWFzayxfSU5GT05BTUVfLHV2QW5pbWF0aW9uTWFza0luZm9zLngpXFxuXFxuI2luY2x1ZGU8YnVtcFZlcnRleD5cXG4jaW5jbHVkZTxjbGlwUGxhbmVWZXJ0ZXg+XFxuI2luY2x1ZGU8Zm9nVmVydGV4PlxcbiNpbmNsdWRlPHNoYWRvd3NWZXJ0ZXg+WzAuLm1heFNpbXVsdGFuZW91c0xpZ2h0c11cXG5cXG4jaWZkZWYgVkVSVEVYQ09MT1JcXG4gICAgdkNvbG9yID0gY29sb3I7XFxuI2VsaWYgZGVmaW5lZChJTlNUQU5DRVNDT0xPUikgJiYgSU5TVEFOQ0VTQ09MT1JcXG4gICAgdkNvbG9yID0gaW5zdGFuY2VDb2xvcjtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxwb2ludENsb3VkVmVydGV4PlxcbiNpbmNsdWRlPGxvZ0RlcHRoVmVydGV4PlxcblxcbiNkZWZpbmUgQ1VTVE9NX1ZFUlRFWF9NQUlOX0VORFxcblxcbn1cXG5cIixtLkVmZmVjdC5TaGFkZXJzU3RvcmUubXRvb25GcmFnbWVudFNoYWRlcj1cIiNpbmNsdWRlPF9fZGVjbF9fbXRvb25GcmFnbWVudD5cXG5cXG4jZXh0ZW5zaW9uIEdMX09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyA6IGVuYWJsZVxcblxcbiNpbmNsdWRlPHByZVBhc3NEZWNsYXJhdGlvbj5bU0NFTkVfTVJUX0NPVU5UXVxcbiNpbmNsdWRlPG9pdERlY2xhcmF0aW9uPlxcblxcbiNkZWZpbmUgQ1VTVE9NX0ZSQUdNRU5UX0JFR0lOXFxuXFxuI2lmZGVmIExPR0FSSVRITUlDREVQVEhcXG4jZXh0ZW5zaW9uIEdMX0VYVF9mcmFnX2RlcHRoIDogZW5hYmxlXFxuI2VuZGlmXFxuXFxuLy8gQ29uc3RhbnRzXFxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJMiAwLjE1OTE1NDk0XFxuI2RlZmluZSBQSV8yIDYuMjgzMTg1MzA3MThcXG4jZGVmaW5lIEVQU19DT0wgMC4wMDAwMVxcblxcbi8vIElucHV0XFxudmFyeWluZyB2ZWMzIHZQb3NpdGlvblc7XFxuXFxuI2lmZGVmIE5PUk1BTFxcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsVztcXG4jZW5kaWZcXG5cXG4jaWYgZGVmaW5lZChWRVJURVhDT0xPUikgfHwgZGVmaW5lZChJTlNUQU5DRVNDT0xPUilcXG52YXJ5aW5nIHZlYzQgdkNvbG9yO1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPG1haW5VVlZhcnlpbmdEZWNsYXJhdGlvbj5bMS4uN11cXG5cXG4vLyBIZWxwZXIgZnVuY3Rpb25zXFxuI2luY2x1ZGU8aGVscGVyRnVuY3Rpb25zPlxcblxcbi8vIExpZ2h0c1xcbiNpbmNsdWRlPF9fZGVjbF9fbGlnaHRGcmFnbWVudD5bMC4ubWF4U2ltdWx0YW5lb3VzTGlnaHRzXVxcblxcbiNpbmNsdWRlPGxpZ2h0c0ZyYWdtZW50RnVuY3Rpb25zPlxcbiNpbmNsdWRlPHNoYWRvd3NGcmFnbWVudEZ1bmN0aW9ucz5cXG5cXG4vLyBTYW1wbGVyc1xcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sRElGRlVTRSxfVkFSWUlOR05BTUVfLERpZmZ1c2UsX1NBTVBMRVJOQU1FXyxkaWZmdXNlKVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sRU1JU1NJVkUsX1ZBUllJTkdOQU1FXyxFbWlzc2l2ZSxfU0FNUExFUk5BTUVfLGVtaXNzaXZlKVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sU0hBREUsX1ZBUllJTkdOQU1FXyxTaGFkZSxfU0FNUExFUk5BTUVfLHNoYWRlKVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sUkVDRUlWRV9TSEFET1csX1ZBUllJTkdOQU1FXyxSZWNlaXZlU2hhZG93LF9TQU1QTEVSTkFNRV8scmVjZWl2ZVNoYWRvdylcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFNIQURJTkdfR1JBREUsX1ZBUllJTkdOQU1FXyxTaGFkaW5nR3JhZGUsX1NBTVBMRVJOQU1FXyxzaGFkaW5nR3JhZGUpXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxSSU0sX1ZBUllJTkdOQU1FXyxSaW0sX1NBTVBMRVJOQU1FXyxyaW0pXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxNQVRDQVAsX1ZBUllJTkdOQU1FXyxNYXRDYXAsX1NBTVBMRVJOQU1FXyxtYXRDYXApXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxPVVRMSU5FX1dJRFRILF9WQVJZSU5HTkFNRV8sT3V0bGluZVdpZHRoLF9TQU1QTEVSTkFNRV8sb3V0bGluZVdpZHRoKVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sVVZfQU5JTUFUSU9OX01BU0ssX1ZBUllJTkdOQU1FXyxVdkFuaW1hdGlvbk1hc2ssX1NBTVBMRVJOQU1FXyx1dkFuaW1hdGlvbk1hc2spXFxuXFxuI2luY2x1ZGU8bXRvb25GcmFnbWVudEZ1bmN0aW9ucz5cXG5cXG4vLyAjIGlmZGVmIFJFRlJBQ1RJT05cXG5cXG4vLyAjIGlmZGVmIFJFRlJBQ1RJT05NQVBfM0RcXG4vLyB1bmlmb3JtIHNhbXBsZXJDdWJlIHJlZnJhY3Rpb25DdWJlU2FtcGxlcjtcXG4vLyAjIGVsc2VcXG4vLyB1bmlmb3JtIHNhbXBsZXIyRCByZWZyYWN0aW9uMkRTYW1wbGVyO1xcbi8vICMgZW5kaWZcXG5cXG4vLyAjIGVuZGlmXFxuXFxuLy8gIyBpZiBkZWZpbmVkKFNQRUNVTEFSVEVSTSlcXG4vLyAgICAgIyBpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sU1BFQ1VMQVIsX1ZBUllJTkdOQU1FXyxTcGVjdWxhcixfU0FNUExFUk5BTUVfLHNwZWN1bGFyKVxcbi8vICMgZW5kaWZcXG5cXG4vLyAvLyBGcmVzbmVsXFxuLy8gIyBpbmNsdWRlPGZyZXNuZWxGdW5jdGlvbj5cXG5cXG4vLyAvLyBSZWZsZWN0aW9uXFxuLy8gIyBpZmRlZiBSRUZMRUNUSU9OXFxuLy8gIyBpZmRlZiBSRUZMRUNUSU9OTUFQXzNEXFxuLy8gdW5pZm9ybSBzYW1wbGVyQ3ViZSByZWZsZWN0aW9uQ3ViZVNhbXBsZXI7XFxuLy8gIyBlbHNlXFxuLy8gdW5pZm9ybSBzYW1wbGVyMkQgcmVmbGVjdGlvbjJEU2FtcGxlcjtcXG4vLyAjIGVuZGlmXFxuXFxuLy8gIyBpZmRlZiBSRUZMRUNUSU9OTUFQX1NLWUJPWFxcbi8vIHZhcnlpbmcgdmVjMyB2UG9zaXRpb25VVlc7XFxuLy8gIyBlbHNlXFxuLy8gIyBpZiBkZWZpbmVkKFJFRkxFQ1RJT05NQVBfRVFVSVJFQ1RBTkdVTEFSX0ZJWEVEKSB8fCBkZWZpbmVkKFJFRkxFQ1RJT05NQVBfTUlSUk9SRURFUVVJUkVDVEFOR1VMQVJfRklYRUQpXFxuLy8gdmFyeWluZyB2ZWMzIHZEaXJlY3Rpb25XO1xcbi8vICMgZW5kaWZcXG5cXG4vLyAjIGVuZGlmXFxuXFxuLy8gIyBpbmNsdWRlPHJlZmxlY3Rpb25GdW5jdGlvbj5cXG5cXG4vLyAjIGVuZGlmXFxuXFxuI2luY2x1ZGU8aW1hZ2VQcm9jZXNzaW5nRGVjbGFyYXRpb24+XFxuXFxuI2luY2x1ZGU8aW1hZ2VQcm9jZXNzaW5nRnVuY3Rpb25zPlxcblxcbiNpbmNsdWRlPGJ1bXBGcmFnbWVudE1haW5GdW5jdGlvbnM+XFxuI2luY2x1ZGU8YnVtcEZyYWdtZW50RnVuY3Rpb25zPlxcbiNpbmNsdWRlPGNsaXBQbGFuZUZyYWdtZW50RGVjbGFyYXRpb24+XFxuI2luY2x1ZGU8bG9nRGVwdGhEZWNsYXJhdGlvbj5cXG4jaW5jbHVkZTxmb2dGcmFnbWVudERlY2xhcmF0aW9uPlxcblxcbiNkZWZpbmUgQ1VTVE9NX0ZSQUdNRU5UX0RFRklOSVRJT05TXFxuXFxudm9pZCBtYWluKHZvaWQpIHtcXG4jaWZkZWYgTVRPT05fQ0xJUF9JRl9PVVRMSU5FX0lTX05PTkVcXG4gICAgI2lmZGVmIE1UT09OX09VVExJTkVfV0lEVEhfV09STERcXG4gICAgI2VsaWYgZGVmaW5lZChNVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTilcXG4gICAgI2Vsc2VcXG4gICAgICAgIGRpc2NhcmQ7XFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblxcbiNkZWZpbmUgQ1VTVE9NX0ZSQUdNRU5UX01BSU5fQkVHSU5cXG5cXG4jaW5jbHVkZTxvaXRGcmFnbWVudD5cXG5cXG4jaW5jbHVkZTxjbGlwUGxhbmVGcmFnbWVudD5cXG5cXG4gICAgdmVjMyB2aWV3RGlyZWN0aW9uVyA9IG5vcm1hbGl6ZSh2RXllUG9zaXRpb24ueHl6IC0gdlBvc2l0aW9uVyk7XFxuXFxuICAgIC8vIEJhc2UgY29sb3JcXG4gICAgdmVjNCBiYXNlQ29sb3IgPSB2ZWM0KDEuLCAxLiwgMS4sIDEuKTtcXG4gICAgdmVjMyBkaWZmdXNlQ29sb3IgPSB2ZWMzKDEuLCAxLiwgMS4pO1xcblxcbiAgICAvLyBBbHBoYVxcbiAgICBmbG9hdCBhbHBoYSA9IDEuMDtcXG5cXG4gICAgLy8gQnVtcFxcbiNpZmRlZiBOT1JNQUxcXG4gICAgdmVjMyBub3JtYWxXID0gbm9ybWFsaXplKHZOb3JtYWxXKTtcXG4jZWxzZVxcbiAgICB2ZWMzIG5vcm1hbFcgPSBub3JtYWxpemUoLWNyb3NzKGRGZHgodlBvc2l0aW9uVyksIGRGZHkodlBvc2l0aW9uVykpKTtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxkZXB0aFByZVBhc3M+XFxuXFxuICAgIC8vIEFtYmllbnQgY29sb3JcXG4gICAgdmVjMyBiYXNlQW1iaWVudENvbG9yID0gdmVjMygxLiwgMS4sIDEuKTtcXG4gICAgZmxvYXQgZ2xvc3NpbmVzcyA9IDAuO1xcblxcbiAgICAvLyBMaWdodGluZ1xcbiAgICB2ZWMzIGRpZmZ1c2VCYXNlID0gdmVjMygwLiwgMC4sIDAuKTtcXG4gICAgbGlnaHRpbmdJbmZvIGluZm87XFxuICAgIGZsb2F0IHNoYWRvdyA9IDEuO1xcbiAgICB2ZWMzIGxpZ2h0RGlyZWN0aW9uID0gdmVjMygwLjAsIDEuMCwgMC4wKTtcXG4gICAgdmVjNCBtdG9vbkRpZmZ1c2UgPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDEuMCk7XFxuXFxuICAgIC8vIE1Ub29uIFVWXFxuICAgIC8vIEFsbCB0ZXh0dXJlcyB3aWxsIHVzZSBkaWZmdXNlKF9NYWluVGV4KSBVVlxcbiAgICB2ZWMyIG1haW5VdiA9IHZlYzIoMC4wKTtcXG4jaWZkZWYgRElGRlVTRVxcbiAgICBtYWluVXYgKz0gdkRpZmZ1c2VVVjtcXG4jZWxpZiBkZWZpbmVkKE1BSU5VVjEpXFxuICAgIG1haW5VdiArPSB2TWFpblVWMTtcXG4jZWxpZiBkZWZpbmVkKE1BSU5VVjIpXFxuICAgIG1haW5VdiArPSB2TWFpblVWMjtcXG4jZW5kaWZcXG5cXG4gICAgLy8gdXYgYW5pbVxcbiAgICBmbG9hdCB1dkFuaW0gPSB0aW1lLnk7XFxuI2lmZGVmIFVWX0FOSU1BVElPTl9NQVNLXFxuICAgIHV2QW5pbSAqPSB0ZXh0dXJlMkQodXZBbmltYXRpb25NYXNrU2FtcGxlciwgbWFpblV2KS5yO1xcbiNlbmRpZlxcbiAgICAvLyB0cmFuc2xhdGUgdXYgaW4gYm90dG9tLWxlZnQgb3JpZ2luIGNvb3JkaW5hdGVzLlxcbiAgICAvLyB1diBpcyByZXZlcnNlZFxcbiAgICBtYWluVXYgKz0gdmVjMigtdXZBbmltYXRpb25TY3JvbGxYLCAtdXZBbmltYXRpb25TY3JvbGxZKSAqIHV2QW5pbTtcXG4gICAgLy8gcm90YXRlIHV2IGNvdW50ZXItY2xvY2t3aXNlIGFyb3VuZCAoMC41LCAwLjUpIGluIGJvdHRvbS1sZWZ0IG9yaWdpbiBjb29yZGluYXRlcy5cXG4gICAgZmxvYXQgcm90YXRlUmFkID0gdXZBbmltYXRpb25Sb3RhdGlvbiAqIFBJXzIgKiB1dkFuaW07XFxuICAgIHZlYzIgcm90YXRlUGl2b3QgPSB2ZWMyKDAuNSwgMC41KTtcXG4gICAgbWFpblV2ID0gbWF0Mihjb3Mocm90YXRlUmFkKSwgLXNpbihyb3RhdGVSYWQpLCBzaW4ocm90YXRlUmFkKSwgY29zKHJvdGF0ZVJhZCkpICogKG1haW5VdiAtIHJvdGF0ZVBpdm90KSArIHJvdGF0ZVBpdm90O1xcblxcbiNpZmRlZiBGTElQX1VcXG4gICAgbWFpblV2LnggPSAxLjAgLSBtYWluVXYueDtcXG4jZW5kaWZcXG4jaWZkZWYgRkxJUF9WXFxuICAgIG1haW5Vdi55ID0gMS4wIC0gbWFpblV2Lnk7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8bXRvb25CdW1wRnJhZ21lbnQ+XFxuXFxuI2lmZGVmIFRXT1NJREVETElHSFRJTkdcXG4gICAgbm9ybWFsVyA9IGdsX0Zyb250RmFjaW5nID8gbm9ybWFsVyA6IC1ub3JtYWxXO1xcbiNlbmRpZlxcblxcbi8vIGluY2x1ZGUgY3VzdG9taXplZCBsaWdodEZyYWdtZW50XFxuI2luY2x1ZGU8bXRvb25MaWdodEZyYWdtZW50PlswLi5tYXhTaW11bHRhbmVvdXNMaWdodHNdXFxuXFxuICAgIHZlYzMgZmluYWxEaWZmdXNlID0gY2xhbXAoZGlmZnVzZUJhc2UsIDAuMCwgMS4wKSAqIGJhc2VDb2xvci5yZ2I7XFxuXFxuICAgIC8vIENvbXBvc2l0aW9uXFxuICAgIHZlYzQgY29sb3IgPSB2ZWM0KGZpbmFsRGlmZnVzZSwgY2xhbXAoYWxwaGEsIDAuMCwgMS4wKSk7XFxuXFxuICAgIGNvbG9yLnJnYiA9IG1heChjb2xvci5yZ2IsIDAuKTtcXG4jaW5jbHVkZTxsb2dEZXB0aEZyYWdtZW50PlxcbiNpbmNsdWRlPGZvZ0ZyYWdtZW50Plxcblxcbi8vIEFwcGx5IGltYWdlIHByb2Nlc3NpbmcgaWYgcmVsZXZhbnQuIEFzIHRoaXMgYXBwbGllcyBpbiBsaW5lYXIgc3BhY2UsXFxuLy8gV2UgZmlyc3QgbW92ZSBmcm9tIGdhbW1hIHRvIGxpbmVhci5cXG4jaWZkZWYgSU1BR0VQUk9DRVNTSU5HUE9TVFBST0NFU1NcXG4gICAgY29sb3IucmdiID0gdG9MaW5lYXJTcGFjZShjb2xvci5yZ2IpO1xcbiNlbHNlXFxuICAgICNpZmRlZiBJTUFHRVBST0NFU1NJTkdcXG4gICAgICAgIC8vIEZJWE1FOiBzdXBwb3J0IGltYWdlIHByb2Nlc3NpbmdcXG4gICAgICAgIC8vIGNvbG9yLnJnYiA9IHRvTGluZWFyU3BhY2UoY29sb3IucmdiKTtcXG4gICAgICAgIC8vIGNvbG9yID0gYXBwbHlJbWFnZVByb2Nlc3NpbmcoY29sb3IpO1xcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cXG4gICAgY29sb3IuYSAqPSB2aXNpYmlsaXR5O1xcblxcbiNpZmRlZiBQUkVNVUxUSVBMWUFMUEhBXFxuICAgIC8vIENvbnZlcnQgdG8gYXNzb2NpYXRpdmUgKHByZW11bHRpcGxpZWQpIGZvcm1hdCBpZiBuZWVkZWQuXFxuICAgIGNvbG9yLnJnYiAqPSBjb2xvci5hO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBQUkVQQVNTXFxuICAgIGZsb2F0IHdyaXRlR2VvbWV0cnlJbmZvID0gY29sb3IuYSA+IDAuNCA/IDEuMCA6IDAuMDtcXG5cXG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSBjb2xvcjsgLy8gV2UgY2FuJ3Qgc3BsaXQgaXJyYWRpYW5jZSBvbiBzdGQgbWF0ZXJpYWxcXG5cXG4gICAgI2lmZGVmIFBSRVBBU1NfUE9TSVRJT05cXG4gICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19QT1NJVElPTl9JTkRFWF0gPSB2ZWM0KHZQb3NpdGlvblcsIHdyaXRlR2VvbWV0cnlJbmZvKTtcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZmRlZiBQUkVQQVNTX1ZFTE9DSVRZXFxuICAgIHZlYzIgYSA9ICh2Q3VycmVudFBvc2l0aW9uLnh5IC8gdkN1cnJlbnRQb3NpdGlvbi53KSAqIDAuNSArIDAuNTtcXG4gICAgdmVjMiBiID0gKHZQcmV2aW91c1Bvc2l0aW9uLnh5IC8gdlByZXZpb3VzUG9zaXRpb24udykgKiAwLjUgKyAwLjU7XFxuXFxuICAgIHZlYzIgdmVsb2NpdHkgPSBhYnMoYSAtIGIpO1xcbiAgICB2ZWxvY2l0eSA9IHZlYzIocG93KHZlbG9jaXR5LngsIDEuMCAvIDMuMCksIHBvdyh2ZWxvY2l0eS55LCAxLjAgLyAzLjApKSAqIHNpZ24oYSAtIGIpICogMC41ICsgMC41O1xcblxcbiAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX1ZFTE9DSVRZX0lOREVYXSA9IHZlYzQodmVsb2NpdHksIDAuMCwgd3JpdGVHZW9tZXRyeUluZm8pO1xcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmZGVmIFBSRVBBU1NfSVJSQURJQU5DRVxcbiAgICAgICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19JUlJBRElBTkNFX0lOREVYXSA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgd3JpdGVHZW9tZXRyeUluZm8pOyAvLyAgV2UgY2FuJ3Qgc3BsaXQgaXJyYWRpYW5jZSBvbiBzdGQgbWF0ZXJpYWxcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZmRlZiBQUkVQQVNTX0RFUFRIXFxuICAgICAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX0RFUFRIX0lOREVYXSA9IHZlYzQodlZpZXdQb3MueiwgMC4wLCAwLjAsIHdyaXRlR2VvbWV0cnlJbmZvKTsgLy8gTGluZWFyIGRlcHRoXFxuICAgICNlbmRpZlxcblxcbiAgICAjaWZkZWYgUFJFUEFTU19OT1JNQUxcXG4gICAgICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfTk9STUFMX0lOREVYXSA9IHZlYzQoKHZpZXcgKiB2ZWM0KG5vcm1hbFcsIDAuMCkpLnJnYiwgd3JpdGVHZW9tZXRyeUluZm8pOyAvLyBOb3JtYWxcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZmRlZiBQUkVQQVNTX0FMQkVET19TUVJUXFxuICAgICAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX0FMQkVET19TUVJUX0lOREVYXSA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgd3JpdGVHZW9tZXRyeUluZm8pOyAvLyBXZSBjYW4ndCBzcGxpdCBhbGJlZG8gb24gc3RkIG1hdGVyaWFsXFxuICAgICNlbmRpZlxcbiAgICAjaWZkZWYgUFJFUEFTU19SRUZMRUNUSVZJVFlcXG4gICAgICAgICNpZiBkZWZpbmVkKFNQRUNVTEFSKVxcbiAgICAgICAgICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfUkVGTEVDVElWSVRZX0lOREVYXSA9IHZlYzQoc3BlY3VsYXJNYXBDb2xvci5yZ2IsIHNwZWN1bGFyTWFwQ29sb3IuYSAqIHdyaXRlR2VvbWV0cnlJbmZvKTtcXG4gICAgICAgICNlbHNlXFxuICAgICAgICAgICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19SRUZMRUNUSVZJVFlfSU5ERVhdID0gdmVjNCgwLjAsIDAuMCwgMC4wLCB3cml0ZUdlb21ldHJ5SW5mbyk7XFxuICAgICAgICAjZW5kaWZcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXFxuI2lmICFkZWZpbmVkKFBSRVBBU1MpIHx8IGRlZmluZWQoV0VCR0wyKVxcbiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG4jZW5kaWZcXG5cXG4jaWYgT1JERVJfSU5ERVBFTkRFTlRfVFJBTlNQQVJFTkNZXFxuICAgIGlmIChmcmFnRGVwdGggPT0gbmVhcmVzdERlcHRoKSB7XFxuICAgICAgICBmcm9udENvbG9yLnJnYiArPSBjb2xvci5yZ2IgKiBjb2xvci5hICogYWxwaGFNdWx0aXBsaWVyO1xcbiAgICAgICAgZnJvbnRDb2xvci5hID0gMS4wIC0gYWxwaGFNdWx0aXBsaWVyICogKDEuMCAtIGNvbG9yLmEpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgYmFja0NvbG9yICs9IGNvbG9yO1xcbiAgICB9XFxuI2VuZGlmXFxuXFxuI2RlZmluZSBDVVNUT01fRlJBR01FTlRfTUFJTl9FTkRcXG5cXG59XFxuXCIpLHRoaXMuaW5zcGVjdGFibGVDdXN0b21Qcm9wZXJ0aWVzPXRoaXMuaW5zcGVjdGFibGVDdXN0b21Qcm9wZXJ0aWVzfHxbXSx0aGlzLmluc3BlY3RhYmxlQ3VzdG9tUHJvcGVydGllcy5wdXNoKHtsYWJlbDpcIkRpZmZ1c2VDb2xvclwiLHByb3BlcnR5TmFtZTpcImRpZmZ1c2VDb2xvclwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuQ29sb3IzfSx7bGFiZWw6XCJBbWJpZW50Q29sb3JcIixwcm9wZXJ0eU5hbWU6XCJhbWJpZW50Q29sb3JcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLkNvbG9yM30se2xhYmVsOlwiRW1pc3NpdmVDb2xvclwiLHByb3BlcnR5TmFtZTpcImVtaXNzaXZlQ29sb3JcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLkNvbG9yM30se2xhYmVsOlwiU2hhZGVDb2xvclwiLHByb3BlcnR5TmFtZTpcInNoYWRlQ29sb3JcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLkNvbG9yM30se2xhYmVsOlwiUmltQ29sb3JcIixwcm9wZXJ0eU5hbWU6XCJyaW1Db2xvclwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuQ29sb3IzfSx7bGFiZWw6XCJPdXRsaW5lQ29sb3JcIixwcm9wZXJ0eU5hbWU6XCJvdXRsaW5lQ29sb3JcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLkNvbG9yM30se2xhYmVsOlwiUmVjZWl2ZVNoYWRvd1JhdGVcIixwcm9wZXJ0eU5hbWU6XCJyZWNlaXZlU2hhZG93UmF0ZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJTaGFkaW5nR3JhZGVSYXRlXCIscHJvcGVydHlOYW1lOlwic2hhZGluZ0dyYWRlUmF0ZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJTaGFkZVNoaWZ0XCIscHJvcGVydHlOYW1lOlwic2hhZGVTaGlmdFwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjotMSxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiU2hhZGVUb29ueVwiLHByb3BlcnR5TmFtZTpcInNoYWRlVG9vbnlcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiTGlnaHRDb2xvckF0dGVudWF0aW9uXCIscHJvcGVydHlOYW1lOlwibGlnaHRDb2xvckF0dGVudWF0aW9uXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIkluZGlyZWN0TGlnaHRJbnRlbnNpdHlcIixwcm9wZXJ0eU5hbWU6XCJpbmRpcmVjdExpZ2h0SW50ZW5zaXR5XCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIlJpbUxpZ2h0aW5nTWl4XCIscHJvcGVydHlOYW1lOlwicmltTGlnaHRpbmdNaXhcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiUmltRnJlc25lbFBvd2VyXCIscHJvcGVydHlOYW1lOlwicmltRnJlc25lbFBvd2VyXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOi4wMSxtYXg6MTAwLHN0ZXA6NH0se2xhYmVsOlwiUmltTGlmdFwiLHByb3BlcnR5TmFtZTpcInJpbUxpZnRcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiT3V0bGluZVdpZHRoXCIscHJvcGVydHlOYW1lOlwib3V0bGluZVdpZHRoXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOi4wMSxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiT3V0bGluZVNjYWxlZE1heERpc3RhbmNlXCIscHJvcGVydHlOYW1lOlwib3V0bGluZVNjYWxlZE1heERpc3RhbmNlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjEsbWF4OjEwLHN0ZXA6LjAxfSx7bGFiZWw6XCJPdXRsaW5lTGlnaHRpbmdNaXhcIixwcm9wZXJ0eU5hbWU6XCJvdXRsaW5lTGlnaHRpbmdNaXhcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiRGVidWdNb2RlXCIscHJvcGVydHlOYW1lOlwiZGVidWdNb2RlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjIsc3RlcDoxfSx7bGFiZWw6XCJPdXRsaW5lV2lkdGhNb2RlXCIscHJvcGVydHlOYW1lOlwib3V0bGluZVdpZHRoTW9kZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoyLHN0ZXA6MX0se2xhYmVsOlwiT3V0bGluZUNvbG9yTW9kZVwiLHByb3BlcnR5TmFtZTpcIm91dGxpbmVDb2xvck1vZGVcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOjF9LHtsYWJlbDpcIkN1bGxNb2RlXCIscHJvcGVydHlOYW1lOlwiY3VsbE1vZGVcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MixzdGVwOjF9LHtsYWJlbDpcIk91dGxpbmVDdWxsTW9kZVwiLHByb3BlcnR5TmFtZTpcIm91dGxpbmVDdWxsTW9kZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoyLHN0ZXA6MX0se2xhYmVsOlwiQWxwaGFDdXRPZmZcIixwcm9wZXJ0eU5hbWU6XCJhbHBoYUN1dE9mZlwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJVViBBbmltYXRpb24gU2Nyb2xsIFhcIixwcm9wZXJ0eU5hbWU6XCJ1dkFuaW1hdGlvblNjcm9sbFhcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46LTEsbWF4OjEsc3RlcDouMX0se2xhYmVsOlwiVVYgQW5pbWF0aW9uIFNjcm9sbCBZXCIscHJvcGVydHlOYW1lOlwidXZBbmltYXRpb25TY3JvbGxZXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOi0xLG1heDoxLHN0ZXA6LjF9LHtsYWJlbDpcIlVWIEFuaW1hdGlvbiBSb3RhdGlvblwiLHByb3BlcnR5TmFtZTpcInV2QW5pbWF0aW9uUm90YXRpb25cIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46LS41LG1heDouNSxzdGVwOi4wMX0pfWdldCBhcHBlbmRlZFRleHR1cmVzKCl7cmV0dXJuW3RoaXMuX2RpZmZ1c2VUZXh0dXJlLHRoaXMuX2VtaXNzaXZlVGV4dHVyZSx0aGlzLl9idW1wVGV4dHVyZSx0aGlzLl9zaGFkZVRleHR1cmUsdGhpcy5fcmVjZWl2ZVNoYWRvd1RleHR1cmUsdGhpcy5fc2hhZGluZ0dyYWRlVGV4dHVyZSx0aGlzLl9yaW1UZXh0dXJlLHRoaXMuX21hdENhcFRleHR1cmUsdGhpcy5fb3V0bGluZVdpZHRoVGV4dHVyZSx0aGlzLl91dkFuaW1hdGlvbk1hc2tUZXh0dXJlXX1nZXQgYXBwZW5kZWRBY3RpdmVUZXh0dXJlcygpe3JldHVybiB0aGlzLmFwcGVuZGVkVGV4dHVyZXMuZmlsdGVyKChlPT5udWxsIT09ZSkpfWdldCBpbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uKCl7cmV0dXJuIHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb259c2V0IGltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24oZSl7dGhpcy5fYXR0YWNoSW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbihlKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5KCl9X2F0dGFjaEltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24oZSl7ZSE9PXRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24mJih0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uJiZ0aGlzLl9pbWFnZVByb2Nlc3NpbmdPYnNlcnZlciYmdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5vblVwZGF0ZVBhcmFtZXRlcnMucmVtb3ZlKHRoaXMuX2ltYWdlUHJvY2Vzc2luZ09ic2VydmVyKSx0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uPWV8fHRoaXMuZ2V0U2NlbmUoKS5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24mJih0aGlzLl9pbWFnZVByb2Nlc3NpbmdPYnNlcnZlcj10aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLm9uVXBkYXRlUGFyYW1ldGVycy5hZGQoKCgpPT57dGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzSW1hZ2VQcm9jZXNzaW5nRGlydHkoKX0pKSkpfWdldCBpc1ByZVBhc3NDYXBhYmxlKCl7cmV0dXJuITF9Z2V0IGNhbWVyYUNvbG9yQ3VydmVzRW5hYmxlZCgpe3JldHVybiB0aGlzLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JDdXJ2ZXNFbmFibGVkfXNldCBjYW1lcmFDb2xvckN1cnZlc0VuYWJsZWQoZSl7dGhpcy5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yQ3VydmVzRW5hYmxlZD1lfWdldCBjYW1lcmFDb2xvckdyYWRpbmdFbmFibGVkKCl7cmV0dXJuIHRoaXMuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckdyYWRpbmdFbmFibGVkfXNldCBjYW1lcmFDb2xvckdyYWRpbmdFbmFibGVkKGUpe3RoaXMuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckdyYWRpbmdFbmFibGVkPWV9Z2V0IGNhbWVyYVRvbmVNYXBwaW5nRW5hYmxlZCgpe3JldHVybiB0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLnRvbmVNYXBwaW5nRW5hYmxlZH1zZXQgY2FtZXJhVG9uZU1hcHBpbmdFbmFibGVkKGUpe3RoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24udG9uZU1hcHBpbmdFbmFibGVkPWV9Z2V0IGNhbWVyYUV4cG9zdXJlKCl7cmV0dXJuIHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uZXhwb3N1cmV9c2V0IGNhbWVyYUV4cG9zdXJlKGUpe3RoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uZXhwb3N1cmU9ZX1nZXQgY2FtZXJhQ29udHJhc3QoKXtyZXR1cm4gdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb250cmFzdH1zZXQgY2FtZXJhQ29udHJhc3QoZSl7dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb250cmFzdD1lfWdldCBjYW1lcmFDb2xvckdyYWRpbmdUZXh0dXJlKCl7cmV0dXJuIHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JHcmFkaW5nVGV4dHVyZX1zZXQgY2FtZXJhQ29sb3JHcmFkaW5nVGV4dHVyZShlKXt0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yR3JhZGluZ1RleHR1cmU9ZX1nZXQgY2FtZXJhQ29sb3JDdXJ2ZXMoKXtyZXR1cm4gdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckN1cnZlc31zZXQgY2FtZXJhQ29sb3JDdXJ2ZXMoZSl7dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckN1cnZlcz1lfWdldCBjYW5SZW5kZXJUb01SVCgpe3JldHVybiEwfWdldCBidW1wU2NhbGUoKXtyZXR1cm4gdGhpcy5fYnVtcFNjYWxlfXNldCBidW1wU2NhbGUoZSl7dGhpcy5fYnVtcFNjYWxlPWV9Z2V0IHJlY2VpdmVTaGFkb3dSYXRlKCl7cmV0dXJuIHRoaXMuX3JlY2VpdmVTaGFkb3dSYXRlfXNldCByZWNlaXZlU2hhZG93UmF0ZShlKXt0aGlzLl9yZWNlaXZlU2hhZG93UmF0ZT1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IHNoYWRpbmdHcmFkZVJhdGUoKXtyZXR1cm4gdGhpcy5fc2hhZGluZ0dyYWRlUmF0ZX1zZXQgc2hhZGluZ0dyYWRlUmF0ZShlKXt0aGlzLl9zaGFkaW5nR3JhZGVSYXRlPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgc2hhZGVTaGlmdCgpe3JldHVybiB0aGlzLl9zaGFkZVNoaWZ0fXNldCBzaGFkZVNoaWZ0KGUpe3RoaXMuX3NoYWRlU2hpZnQ9TWF0aC5tYXgoLTEsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgc2hhZGVUb29ueSgpe3JldHVybiB0aGlzLl9zaGFkZVRvb255fXNldCBzaGFkZVRvb255KGUpe3RoaXMuX3NoYWRlVG9vbnk9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCBsaWdodENvbG9yQXR0ZW51YXRpb24oKXtyZXR1cm4gdGhpcy5fbGlnaHRDb2xvckF0dGVudWF0aW9ufXNldCBsaWdodENvbG9yQXR0ZW51YXRpb24oZSl7dGhpcy5fbGlnaHRDb2xvckF0dGVudWF0aW9uPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgaW5kaXJlY3RMaWdodEludGVuc2l0eSgpe3JldHVybiB0aGlzLl9pbmRpcmVjdExpZ2h0SW50ZW5zaXR5fXNldCBpbmRpcmVjdExpZ2h0SW50ZW5zaXR5KGUpe3RoaXMuX2luZGlyZWN0TGlnaHRJbnRlbnNpdHk9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCByaW1MaWdodGluZ01peCgpe3JldHVybiB0aGlzLl9yaW1MaWdodGluZ01peH1zZXQgcmltTGlnaHRpbmdNaXgoZSl7dGhpcy5fcmltTGlnaHRpbmdNaXg9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCByaW1GcmVzbmVsUG93ZXIoKXtyZXR1cm4gdGhpcy5fcmltRnJlc25lbFBvd2VyfXNldCByaW1GcmVzbmVsUG93ZXIoZSl7dGhpcy5fcmltRnJlc25lbFBvd2VyPU1hdGgubWF4KDAsTWF0aC5taW4oMTAwLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCByaW1MaWZ0KCl7cmV0dXJuIHRoaXMuX3JpbUxpZnR9c2V0IHJpbUxpZnQoZSl7dGhpcy5fcmltTGlmdD1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IG91dGxpbmVXaWR0aCgpe3JldHVybiB0aGlzLl9vdXRsaW5lV2lkdGh9c2V0IG91dGxpbmVXaWR0aChlKXt0aGlzLl9vdXRsaW5lV2lkdGg9TWF0aC5tYXgoLjAxLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0F0dHJpYnV0ZXNEaXJ0eSgpfWdldCBvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2UoKXtyZXR1cm4gdGhpcy5fb3V0bGluZVNjYWxlZE1heERpc3RhbmNlfXNldCBvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2UoZSl7dGhpcy5fb3V0bGluZVNjYWxlZE1heERpc3RhbmNlPU1hdGgubWF4KDEsTWF0aC5taW4oMTAsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0F0dHJpYnV0ZXNEaXJ0eSgpfWdldCBvdXRsaW5lTGlnaHRpbmdNaXgoKXtyZXR1cm4gdGhpcy5fb3V0bGluZUxpZ2h0aW5nTWl4fXNldCBvdXRsaW5lTGlnaHRpbmdNaXgoZSl7dGhpcy5fb3V0bGluZUxpZ2h0aW5nTWl4PU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzQXR0cmlidXRlc0RpcnR5KCl9Z2V0IHV2QW5pbWF0aW9uU2Nyb2xsWCgpe3JldHVybiB0aGlzLl91dkFuaW1hdGlvblNjcm9sbFh9c2V0IHV2QW5pbWF0aW9uU2Nyb2xsWChlKXt0aGlzLl91dkFuaW1hdGlvblNjcm9sbFg9ZSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKX1nZXQgdXZBbmltYXRpb25TY3JvbGxZKCl7cmV0dXJuIHRoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWX1zZXQgdXZBbmltYXRpb25TY3JvbGxZKGUpe3RoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWT1lLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpfWdldCB1dkFuaW1hdGlvblJvdGF0aW9uKCl7cmV0dXJuIHRoaXMuX3V2QW5pbWF0aW9uUm90YXRpb259c2V0IHV2QW5pbWF0aW9uUm90YXRpb24oZSl7dGhpcy5fdXZBbmltYXRpb25Sb3RhdGlvbj1lLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpfWdldCBhbHBoYVRlc3QoKXtyZXR1cm4gdGhpcy5fYWxwaGFUZXN0fXNldCBhbHBoYVRlc3QoZSl7dGhpcy5fYWxwaGFUZXN0PWUsZT90aGlzLmFscGhhQmxlbmQ/dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBVEVTVEFOREJMRU5EOnRoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9BTFBIQVRFU1Q6dGhpcy5hbHBoYUJsZW5kP3RoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9BTFBIQUJMRU5EOnRoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9PUEFRVUUsdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCl9Z2V0IGFscGhhQmxlbmQoKXtyZXR1cm4gdGhpcy5fYWxwaGFCbGVuZH1zZXQgYWxwaGFCbGVuZChlKXt0aGlzLl9hbHBoYUJsZW5kPWUsZT8odGhpcy5iYWNrRmFjZUN1bGxpbmc9ITAsdGhpcy5hbHBoYVRlc3Q/dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBVEVTVEFOREJMRU5EOnRoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9BTFBIQUJMRU5EKTp0aGlzLmFscGhhVGVzdD90aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFURVNUOnRoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9PUEFRVUUsdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCl9Z2V0IG91dGxpbmVXaWR0aE1vZGUoKXtyZXR1cm4gdGhpcy5fb3V0bGluZVdpZHRoTW9kZX1zZXQgb3V0bGluZVdpZHRoTW9kZShlKXt0aGlzLl9vdXRsaW5lV2lkdGhNb2RlPWUsZT09PUQuTm9uZXx8dGhpcy5vdXRsaW5lUmVuZGVyZXJ8fCh0aGlzLm91dGxpbmVSZW5kZXJlcj1uZXcgQSh0aGlzLmdldFNjZW5lKCksdGhpcykpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpfWVuYWJsZU91dGxpbmVSZW5kZXIoKXt0aGlzLmlzT3V0bGluZT0xfWRpc2FhYmxlT3V0bGluZVJlbmRlcigpe3RoaXMuaXNPdXRsaW5lPTB9Z2V0IGN1bGxNb2RlKCl7cmV0dXJuIHRoaXMuX2N1bGxNb2RlfXNldCBjdWxsTW9kZShlKXtzd2l0Y2godGhpcy5fY3VsbE1vZGU9ZSx0aGlzLl9jdWxsTW9kZSl7Y2FzZSBMLk9mZjp0aGlzLmJhY2tGYWNlQ3VsbGluZz0hMSx0aGlzLnNpZGVPcmllbnRhdGlvbj1sLk1hdGVyaWFsLkNsb2NrV2lzZVNpZGVPcmllbnRhdGlvbix0aGlzLnR3b1NpZGVkTGlnaHRpbmc9ITE7YnJlYWs7Y2FzZSBMLkZyb250OnRoaXMuYmFja0ZhY2VDdWxsaW5nPSEwLHRoaXMuc2lkZU9yaWVudGF0aW9uPWwuTWF0ZXJpYWwuQ291bnRlckNsb2NrV2lzZVNpZGVPcmllbnRhdGlvbix0aGlzLnR3b1NpZGVkTGlnaHRpbmc9ITA7YnJlYWs7Y2FzZSBMLkJhY2s6dGhpcy5iYWNrRmFjZUN1bGxpbmc9ITAsdGhpcy5zaWRlT3JpZW50YXRpb249bC5NYXRlcmlhbC5DbG9ja1dpc2VTaWRlT3JpZW50YXRpb24sdGhpcy50d29TaWRlZExpZ2h0aW5nPSExfXRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpfWFwcGx5T3V0bGluZUN1bGxNb2RlKCl7dGhpcy5zdG9yZWRDdWxsTW9kZT10aGlzLmN1bGxNb2RlLHRoaXMuY3VsbE1vZGU9dGhpcy5fb3V0bGluZUN1bGxNb2RlfXJlc3RvcmVPdXRsaW5lQ3VsbE1vZGUoKXt0aGlzLmN1bGxNb2RlPXRoaXMuc3RvcmVkQ3VsbE1vZGV9Z2V0T3V0bGluZVJlbmRlcmVyTmFtZSgpe3JldHVybiB0aGlzLm91dGxpbmVSZW5kZXJlcj90aGlzLm91dGxpbmVSZW5kZXJlci5uYW1lOlwiXCJ9Z2V0IGhhc1JlbmRlclRhcmdldFRleHR1cmVzKCl7cmV0dXJuITF9Z2V0Q2xhc3NOYW1lKCl7cmV0dXJuXCJNVG9vbk1hdGVyaWFsXCJ9Z2V0IHVzZUxvZ2FyaXRobWljRGVwdGgoKXtyZXR1cm4gdGhpcy5fdXNlTG9nYXJpdGhtaWNEZXB0aH1zZXQgdXNlTG9nYXJpdGhtaWNEZXB0aChlKXtjb25zdCBpPWUmJnRoaXMuZ2V0U2NlbmUoKS5nZXRFbmdpbmUoKS5nZXRDYXBzKCkuZnJhZ21lbnREZXB0aFN1cHBvcnRlZDt0aGlzLl91c2VMb2dhcml0aG1pY0RlcHRoIT09aSYmKHRoaXMuX3VzZUxvZ2FyaXRobWljRGVwdGg9aSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKSl9bmVlZEFscGhhQmxlbmRpbmcoKXtyZXR1cm4hdGhpcy5fZGlzYWJsZUFscGhhQmxlbmRpbmcmJih0aGlzLmFscGhhPDF8fHRoaXMuX3Nob3VsZFVzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlKCkpfW5lZWRBbHBoYVRlc3RpbmcoKXtyZXR1cm4hIXRoaXMuX2ZvcmNlQWxwaGFUZXN0fHwhIXRoaXMuX2FscGhhVGVzdHx8dGhpcy5faGFzQWxwaGFDaGFubmVsKCkmJihudWxsPT10aGlzLl90cmFuc3BhcmVuY3lNb2RlfHx0aGlzLl90cmFuc3BhcmVuY3lNb2RlPT09bC5NYXRlcmlhbC5NQVRFUklBTF9BTFBIQVRFU1QpfV9zaG91bGRVc2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZSgpe3JldHVybiBudWxsIT10aGlzLl9kaWZmdXNlVGV4dHVyZSYmdGhpcy5fZGlmZnVzZVRleHR1cmUuaGFzQWxwaGEmJnRoaXMuX3VzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlJiZ0aGlzLl90cmFuc3BhcmVuY3lNb2RlIT09bC5NYXRlcmlhbC5NQVRFUklBTF9PUEFRVUV9X2hhc0FscGhhQ2hhbm5lbCgpe3JldHVybiBudWxsIT09dGhpcy5fZGlmZnVzZVRleHR1cmUmJnRoaXMuX2RpZmZ1c2VUZXh0dXJlLmhhc0FscGhhfWdldEFscGhhVGVzdFRleHR1cmUoKXtyZXR1cm4gdGhpcy5fZGlmZnVzZVRleHR1cmV9aXNSZWFkeUZvclN1Yk1lc2goZSxpLG49ITEpe2lmKHRoaXMuX3VuaWZvcm1CdWZmZXJMYXlvdXRCdWlsdHx8dGhpcy5idWlsZFVuaWZvcm1MYXlvdXQoKSxpLmVmZmVjdCYmdGhpcy5pc0Zyb3plbiYmaS5lZmZlY3QuX3dhc1ByZXZpb3VzbHlSZWFkeSYmaS5lZmZlY3QuX3dhc1ByZXZpb3VzbHlVc2luZ0luc3RhbmNlcz09PW4pcmV0dXJuITA7aS5tYXRlcmlhbERlZmluZXN8fCh0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50R2VuZXJpYyhwLk1hdGVyaWFsUGx1Z2luRXZlbnQuR2V0RGVmaW5lTmFtZXMsdGhpcy5fZXZlbnRJbmZvKSxpLm1hdGVyaWFsRGVmaW5lcz1uZXcgRSk7Y29uc3QgdD10aGlzLmdldFNjZW5lKCksbz1pLm1hdGVyaWFsRGVmaW5lcztpZih0aGlzLl9pc1JlYWR5Rm9yU3ViTWVzaChpKSlyZXR1cm4hMDtjb25zdCBhPXQuZ2V0RW5naW5lKCk7by5fbmVlZE5vcm1hbHM9aC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0ZvckxpZ2h0cyh0LGUsbyx0aGlzLnNwZWN1bGFyU3VwcG9ydGVkLHRoaXMuX21heFNpbXVsdGFuZW91c0xpZ2h0cyx0aGlzLl9kaXNhYmxlTGlnaHRpbmcpLHRoaXMub3V0bGluZVdpZHRoTW9kZSE9PUQuTm9uZSYmKG8uX25lZWROb3JtYWxzPSEwKSx0aGlzLmFwcGx5RGVmaW5lcyhvKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yTXVsdGl2aWV3KHQsbyk7Y29uc3QgbD10aGlzLm5lZWRBbHBoYUJsZW5kaW5nRm9yTWVzaChlKSYmdC51c2VPcmRlckluZGVwZW5kZW50VHJhbnNwYXJlbmN5O2lmKGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JPSVQodCxvLGwpLG8uX2FyZVRleHR1cmVzRGlydHkpe3RoaXMuX2V2ZW50SW5mby5oYXNSZW5kZXJUYXJnZXRUZXh0dXJlcz0hMSx0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50SGFzUmVuZGVyVGFyZ2V0VGV4dHVyZXModGhpcy5fZXZlbnRJbmZvKSx0aGlzLl9jYWNoZUhhc1JlbmRlclRhcmdldFRleHR1cmVzPXRoaXMuX2V2ZW50SW5mby5oYXNSZW5kZXJUYXJnZXRUZXh0dXJlcyxvLl9uZWVkVVZzPSExO2ZvcihsZXQgZT0xO2U8PWYuQ29uc3RhbnRzLk1BWF9TVVBQT1JURURfVVZfU0VUUzsrK2Upb1tcIk1BSU5VVlwiK2VdPSExO2lmKHQudGV4dHVyZXNFbmFibGVkKXtpZighKHRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fZGlmZnVzZVRleHR1cmUsbyxcIkRJRkZVU0VcIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fZW1pc3NpdmVUZXh0dXJlLG8sXCJFTUlTU0lWRVwiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9zaGFkZVRleHR1cmUsbyxcIlNIQURFXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX3JlY2VpdmVTaGFkb3dUZXh0dXJlLG8sXCJSRUNFSVZFX1NIQURPV1wiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9zaGFkaW5nR3JhZGVUZXh0dXJlLG8sXCJTSEFESU5HX0dSQURFXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX3JpbVRleHR1cmUsbyxcIlJJTVwiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9tYXRDYXBUZXh0dXJlLG8sXCJNQVRDQVBcIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fb3V0bGluZVdpZHRoVGV4dHVyZSxvLFwiT1VUTElORV9XSURUSFwiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl91dkFuaW1hdGlvbk1hc2tUZXh0dXJlLG8sXCJVVl9BTklNQVRJT05fTUFTS1wiKSkpcmV0dXJuITE7aWYodC5nZXRFbmdpbmUoKS5nZXRDYXBzKCkuc3RhbmRhcmREZXJpdmF0aXZlcyYmdGhpcy5fYnVtcFRleHR1cmUpe2lmKCF0aGlzLl9idW1wVGV4dHVyZS5pc1JlYWR5KCkpcmV0dXJuITE7aC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0Zvck1lcmdlZFVWKHRoaXMuX2J1bXBUZXh0dXJlLG8sXCJCVU1QXCIpLG8uUEFSQUxMQVg9dGhpcy51c2VQYXJhbGxheCxvLlBBUkFMTEFYT0NDTFVTSU9OPXRoaXMudXNlUGFyYWxsYXhPY2NsdXNpb24sby5PQkpFQ1RTUEFDRV9OT1JNQUxNQVA9dGhpcy51c2VPYmplY3RTcGFjZU5vcm1hbE1hcH1lbHNlIG8uQlVNUD0hMSxvLlBBUkFMTEFYPSExLG8uUEFSQUxMQVhPQ0NMVVNJT049ITE7by5UV09TSURFRExJR0hUSU5HPSF0aGlzLl9iYWNrRmFjZUN1bGxpbmcmJnRoaXMuX3R3b1NpZGVkTGlnaHRpbmd9ZWxzZSBvLkRJRkZVU0U9ITEsby5FTUlTU0lWRT0hMSxvLlNIQURFPSExLG8uUkVDRUlWRV9TSEFET1c9ITEsby5TSEFESU5HX0dSQURFPSExLG8uUklNPSExLG8uTUFUQ0FQPSExLG8uT1VUTElORV9XSURUSD0hMSxvLkJVTVA9ITEsby5VVl9BTklNQVRJT05fTUFTSz0hMTtvLkFMUEhBRlJPTURJRkZVU0U9dGhpcy5fc2hvdWxkVXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmUoKSxvLlBSRU1VTFRJUExZQUxQSEE9dGhpcy5hbHBoYU1vZGU9PT1mLkNvbnN0YW50cy5BTFBIQV9QUkVNVUxUSVBMSUVEfHx0aGlzLmFscGhhTW9kZT09PWYuQ29uc3RhbnRzLkFMUEhBX1BSRU1VTFRJUExJRURfUE9SVEVSRFVGRixvLkFMUEhBVEVTVF9BRlRFUkFMTEFMUEhBQ09NUFVUQVRJT05TPW51bGwhPT10aGlzLnRyYW5zcGFyZW5jeU1vZGUsby5BTFBIQUJMRU5EPW51bGw9PT10aGlzLnRyYW5zcGFyZW5jeU1vZGV8fHRoaXMubmVlZEFscGhhQmxlbmRpbmdGb3JNZXNoKGUpfWlmKHRoaXMuX2V2ZW50SW5mby5pc1JlYWR5Rm9yU3ViTWVzaD0hMCx0aGlzLl9ldmVudEluZm8uZGVmaW5lcz1vLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRJc1JlYWR5Rm9yU3ViTWVzaCh0aGlzLl9ldmVudEluZm8pLCF0aGlzLl9ldmVudEluZm8uaXNSZWFkeUZvclN1Yk1lc2gpcmV0dXJuITE7aWYoby5fYXJlSW1hZ2VQcm9jZXNzaW5nRGlydHkmJnRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24pe2lmKCF0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmlzUmVhZHkoKSlyZXR1cm4hMTt0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLnByZXBhcmVEZWZpbmVzKG8pfWlmKHRoaXMuZmxpcFUhPT1vLkZMSVBfVSYmKG8uRkxJUF9VPXRoaXMuZmxpcFUsby5tYXJrQXNVbnByb2Nlc3NlZCgpKSx0aGlzLmZsaXBWIT09by5GTElQX1YmJihvLkZMSVBfVj10aGlzLmZsaXBWLG8ubWFya0FzVW5wcm9jZXNzZWQoKSksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0Zvck1pc2MoZSx0LHRoaXMuX3VzZUxvZ2FyaXRobWljRGVwdGgsdGhpcy5wb2ludHNDbG91ZCx0aGlzLmZvZ0VuYWJsZWQsdGhpcy5fc2hvdWxkVHVybkFscGhhVGVzdE9uKGUpfHx0aGlzLl9mb3JjZUFscGhhVGVzdCxvKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yRnJhbWVCb3VuZFZhbHVlcyh0LGEsbyxuLG51bGwsaS5nZXRSZW5kZXJpbmdNZXNoKCkuaGFzVGhpbkluc3RhbmNlcyksdGhpcy5fZXZlbnRJbmZvLmRlZmluZXM9byx0aGlzLl9ldmVudEluZm8ubWVzaD1lLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRQcmVwYXJlRGVmaW5lc0JlZm9yZUF0dHJpYnV0ZXModGhpcy5fZXZlbnRJbmZvKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yQXR0cmlidXRlcyhlLG8sdGhpcy51c2VWZXJ0ZXhDb2xvcix0aGlzLnVzZUJvbmVzLHRoaXMudXNlTW9ycGhUYXJnZXRzLHRoaXMudXNlVmVydGV4QWxwaGEsdGhpcy51c2VCYWtlZFZlcnRleEFuaW1hdGlvbiksdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudFByZXBhcmVEZWZpbmVzKHRoaXMuX2V2ZW50SW5mbyksby5pc0RpcnR5KXtjb25zdCBuPW8uX2FyZUxpZ2h0c0Rpc3Bvc2VkO28ubWFya0FzUHJvY2Vzc2VkKCk7Y29uc3QgbD1uZXcgdS5FZmZlY3RGYWxsYmFja3M7by5CVU1QJiZsLmFkZEZhbGxiYWNrKDAsXCJCVU1QXCIpLG8uUEFSQUxMQVgmJmwuYWRkRmFsbGJhY2soMSxcIlBBUkFMTEFYXCIpLG8uUEFSQUxMQVhPQ0NMVVNJT04mJmwuYWRkRmFsbGJhY2soMCxcIlBBUkFMTEFYT0NDTFVTSU9OXCIpLG8uRk9HJiZsLmFkZEZhbGxiYWNrKDEsXCJGT0dcIiksby5QT0lOVFNJWkUmJmwuYWRkRmFsbGJhY2soMCxcIlBPSU5UU0laRVwiKSxvLkxPR0FSSVRITUlDREVQVEgmJmwuYWRkRmFsbGJhY2soMCxcIkxPR0FSSVRITUlDREVQVEhcIiksaC5NYXRlcmlhbEhlbHBlci5IYW5kbGVGYWxsYmFja3NGb3JTaGFkb3dzKG8sbCx0aGlzLl9tYXhTaW11bHRhbmVvdXNMaWdodHMpLG8uTVVMVElWSUVXJiZsLmFkZEZhbGxiYWNrKDAsXCJNVUxUSVZJRVdcIik7Y29uc3QgZD1bci5WZXJ0ZXhCdWZmZXIuUG9zaXRpb25LaW5kXTtvLk5PUk1BTCYmZC5wdXNoKHIuVmVydGV4QnVmZmVyLk5vcm1hbEtpbmQpLG8uVEFOR0VOVCYmZC5wdXNoKHIuVmVydGV4QnVmZmVyLlRhbmdlbnRLaW5kKTtmb3IobGV0IGU9MTtlPD1mLkNvbnN0YW50cy5NQVhfU1VQUE9SVEVEX1VWX1NFVFM7KytlKW9bXCJVVlwiK2VdJiZkLnB1c2goYHV2JHsxPT09ZT9cIlwiOmV9YCk7by5JTlNUQU5DRVNDT0xPUiYmZC5wdXNoKHIuVmVydGV4QnVmZmVyLkNvbG9ySW5zdGFuY2VLaW5kKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVBdHRyaWJ1dGVzRm9yQm9uZXMoZCxlLG8sbCksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlQXR0cmlidXRlc0Zvckluc3RhbmNlcyhkLG8pLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZUF0dHJpYnV0ZXNGb3JNb3JwaFRhcmdldHMoZCxlLG8pLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZUF0dHJpYnV0ZXNGb3JCYWtlZFZlcnRleEFuaW1hdGlvbihkLGUsbyk7Y29uc3QgbT1cIm10b29uXCIsYz1bXCJ3b3JsZFwiLFwidmlld1wiLFwidmlld1Byb2plY3Rpb25cIixcInZFeWVQb3NpdGlvblwiLFwidkxpZ2h0c1R5cGVcIixcInZBbWJpZW50Q29sb3JcIixcInZpc2liaWxpdHlcIixcInZGb2dJbmZvc1wiLFwidkZvZ0NvbG9yXCIsXCJwb2ludFNpemVcIixcIm1Cb25lc1wiLFwidkNsaXBQbGFuZVwiLFwidkNsaXBQbGFuZTJcIixcInZDbGlwUGxhbmUzXCIsXCJ2Q2xpcFBsYW5lNFwiLFwidkNsaXBQbGFuZTVcIixcInZDbGlwUGxhbmU2XCIsXCJsb2dhcml0aG1pY0RlcHRoQ29uc3RhbnRcIixcInZUYW5nZW50U3BhY2VQYXJhbXNcIixcImFscGhhQ3V0T2ZmXCIsXCJib25lVGV4dHVyZVdpZHRoXCIsXCJtb3JwaFRhcmdldFRleHR1cmVJbmZvXCIsXCJtb3JwaFRhcmdldFRleHR1cmVJbmRpY2VzXCIsXCJ2RGlmZnVzZUNvbG9yXCIsXCJ2RGlmZnVzZUluZm9zXCIsXCJkaWZmdXNlTWF0cml4XCIsXCJ2RW1pc3NpdmVDb2xvclwiLFwidkVtaXNzaXZlSW5mb3NcIixcImVtaXNzaXZlTWF0cml4XCIsXCJ2QnVtcEluZm9zXCIsXCJidW1wTWF0cml4XCIsXCJ2U2hhZGVDb2xvclwiLFwidlNoYWRlSW5mb3NcIixcInNoYWRlTWF0cml4XCIsXCJ2UmVjZWl2ZVNoYWRvd0luZm9zXCIsXCJyZWNlaXZlU2hhZG93TWF0cml4XCIsXCJ2U2hhZGluZ0dyYWRlSW5mb3NcIixcInNoYWRpbmdHcmFkZU1hdHJpeFwiLFwidlJpbUNvbG9yXCIsXCJ2UmltSW5mb3NcIixcIlJpbU1hdHJpeFwiLFwidk1hdENhcEluZm9zXCIsXCJNYXRDYXBNYXRyaXhcIixcInZPdXRsaW5lQ29sb3JcIixcInZPdXRsaW5lV2lkdGhJbmZvc1wiLFwib3V0bGluZVdpZHRoTWF0cml4XCIsXCJhc3BlY3RcIixcImlzT3V0bGluZVwiLFwic2hhZGluZ0dyYWRlUmF0ZVwiLFwicmVjZWl2ZVNoYWRvd1JhdGVcIixcInNoYWRlU2hpZnRcIixcInNoYWRlVG9vbnlcIixcInJpbUxpZ2h0aW5nTWl4XCIsXCJyaW1GcmVzbmVsUG93ZXJcIixcInJpbUxpZnRcIixcImxpZ2h0Q29sb3JBdHRlbnVhdGlvblwiLFwiaW5kaXJlY3RMaWdodEludGVuc2l0eVwiLFwib3V0bGluZVdpZHRoXCIsXCJvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2VcIixcIm91dGxpbmVMaWdodGluZ01peFwiLFwidXZBbmltYXRpb25TY3JvbGxYXCIsXCJ1dkFuaW1hdGlvblNjcm9sbFlcIixcInV2QW5pbWF0aW9uUm90YXRpb25cIixcInZFeWVVcFwiLFwidGltZVwiLFwicHJvamVjdGlvblwiXSxnPVtcImRpZmZ1c2VTYW1wbGVyXCIsXCJhbWJpZW50U2FtcGxlclwiLFwiZW1pc3NpdmVTYW1wbGVyXCIsXCJidW1wU2FtcGxlclwiLFwiYm9uZVNhbXBsZXJcIixcIm1vcnBoVGFyZ2V0c1wiLFwib2l0RGVwdGhTYW1wbGVyXCIsXCJvaXRGcm9udENvbG9yU2FtcGxlclwiLFwic2hhZGVTYW1wbGVyXCIsXCJyZWNlaXZlU2hhZG93U2FtcGxlclwiLFwic2hhZGluZ0dyYWRlU2FtcGxlclwiLFwicmltU2FtcGxlclwiLFwibWF0Q2FwU2FtcGxlclwiLFwib3V0bGluZVdpZHRoU2FtcGxlclwiLFwidXZBbmltYXRpb25NYXNrU2FtcGxlclwiXSxfPVtcIk1hdGVyaWFsXCIsXCJTY2VuZVwiLFwiTWVzaFwiXTt0aGlzLl9ldmVudEluZm8uZmFsbGJhY2tzPWwsdGhpcy5fZXZlbnRJbmZvLmZhbGxiYWNrUmFuaz0wLHRoaXMuX2V2ZW50SW5mby5kZWZpbmVzPW8sdGhpcy5fZXZlbnRJbmZvLnVuaWZvcm1zPWMsdGhpcy5fZXZlbnRJbmZvLmF0dHJpYnV0ZXM9ZCx0aGlzLl9ldmVudEluZm8uc2FtcGxlcnM9Zyx0aGlzLl9ldmVudEluZm8udW5pZm9ybUJ1ZmZlcnNOYW1lcz1fLHRoaXMuX2V2ZW50SW5mby5jdXN0b21Db2RlPXZvaWQgMCx0aGlzLl9ldmVudEluZm8ubWVzaD1lLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRHZW5lcmljKHAuTWF0ZXJpYWxQbHVnaW5FdmVudC5QcmVwYXJlRWZmZWN0LHRoaXMuX2V2ZW50SW5mbykscy5JbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uJiYocy5JbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLlByZXBhcmVVbmlmb3JtcyhjLG8pLHMuSW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5QcmVwYXJlU2FtcGxlcnMoZyxvKSksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlVW5pZm9ybXNBbmRTYW1wbGVyc0xpc3Qoe3VuaWZvcm1zTmFtZXM6Yyx1bmlmb3JtQnVmZmVyc05hbWVzOl8sc2FtcGxlcnM6ZyxkZWZpbmVzOm8sbWF4U2ltdWx0YW5lb3VzTGlnaHRzOnRoaXMuX21heFNpbXVsdGFuZW91c0xpZ2h0c30pO2NvbnN0IEE9e30sST1vLnRvU3RyaW5nKCksdj1pLmVmZmVjdDtsZXQgTT10LmdldEVuZ2luZSgpLmNyZWF0ZUVmZmVjdChtLHthdHRyaWJ1dGVzOmQsdW5pZm9ybXNOYW1lczpjLHVuaWZvcm1CdWZmZXJzTmFtZXM6XyxzYW1wbGVyczpnLGRlZmluZXM6SSxmYWxsYmFja3M6bCxvbkNvbXBpbGVkOnRoaXMub25Db21waWxlZCxvbkVycm9yOnRoaXMub25FcnJvcixpbmRleFBhcmFtZXRlcnM6e21heFNpbXVsdGFuZW91c0xpZ2h0czp0aGlzLl9tYXhTaW11bHRhbmVvdXNMaWdodHMsbWF4U2ltdWx0YW5lb3VzTW9ycGhUYXJnZXRzOm8uTlVNX01PUlBIX0lORkxVRU5DRVJTfSxwcm9jZXNzRmluYWxDb2RlOkEucHJvY2Vzc0ZpbmFsQ29kZSxwcm9jZXNzQ29kZUFmdGVySW5jbHVkZXM6dGhpcy5fZXZlbnRJbmZvLmN1c3RvbUNvZGUsbXVsdGlUYXJnZXQ6by5QUkVQQVNTfSxhKTtpZihNKWlmKHRoaXMuX29uRWZmZWN0Q3JlYXRlZE9ic2VydmFibGUmJihTLmVmZmVjdD1NLFMuc3ViTWVzaD1pLHRoaXMuX29uRWZmZWN0Q3JlYXRlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKFMpKSx0aGlzLmFsbG93U2hhZGVySG90U3dhcHBpbmcmJnYmJiFNLmlzUmVhZHkoKSl7aWYoTT12LG8ubWFya0FzVW5wcm9jZXNzZWQoKSxuKXJldHVybiBvLl9hcmVMaWdodHNEaXNwb3NlZD0hMCwhMX1lbHNlIHQucmVzZXRDYWNoZWRNYXRlcmlhbCgpLGkuc2V0RWZmZWN0KE0sbyx0aGlzLl9tYXRlcmlhbENvbnRleHQpfXJldHVybiEoIWkuZWZmZWN0fHwhaS5lZmZlY3QuaXNSZWFkeSgpfHwoby5fcmVuZGVySWQ9dC5nZXRSZW5kZXJJZCgpLGkuZWZmZWN0Ll93YXNQcmV2aW91c2x5UmVhZHk9ITAsaS5lZmZlY3QuX3dhc1ByZXZpb3VzbHlVc2luZ0luc3RhbmNlcz1uLDApKX1idWlsZFVuaWZvcm1MYXlvdXQoKXtjb25zdCBlPXRoaXMuX3VuaWZvcm1CdWZmZXI7ZS5hZGRVbmlmb3JtKFwidkRpZmZ1c2VDb2xvclwiLDQpLGUuYWRkVW5pZm9ybShcInZEaWZmdXNlSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJkaWZmdXNlTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZFbWlzc2l2ZUNvbG9yXCIsMyksZS5hZGRVbmlmb3JtKFwidkVtaXNzaXZlSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJlbWlzc2l2ZU1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2QnVtcEluZm9zXCIsMyksZS5hZGRVbmlmb3JtKFwiYnVtcE1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2U2hhZGVDb2xvclwiLDMpLGUuYWRkVW5pZm9ybShcInZTaGFkZUluZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwic2hhZGVNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidlJlY2VpdmVTaGFkb3dJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcInJlY2VpdmVTaGFkb3dNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidlNoYWRpbmdHcmFkZUluZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwic2hhZGluZ0dyYWRlTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZSaW1Db2xvclwiLDMpLGUuYWRkVW5pZm9ybShcInZSaW1JbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcInJpbU1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2TWF0Q2FwSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJtYXRDYXBNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidk91dGxpbmVDb2xvclwiLDMpLGUuYWRkVW5pZm9ybShcInZPdXRsaW5lV2lkdGhJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcIm91dGxpbmVXaWR0aE1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2VXZBbmltYXRpb25NYXNrSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJ1dkFuaW1hdGlvbk1hc2tNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidlRhbmdlbnRTcGFjZVBhcmFtc1wiLDIpLGUuYWRkVW5pZm9ybShcInBvaW50U2l6ZVwiLDEpLGUuYWRkVW5pZm9ybShcInNoYWRpbmdHcmFkZVJhdGVcIiwxKSxlLmFkZFVuaWZvcm0oXCJyZWNlaXZlU2hhZG93UmF0ZVwiLDEpLGUuYWRkVW5pZm9ybShcInNoYWRlU2hpZnRcIiwxKSxlLmFkZFVuaWZvcm0oXCJzaGFkZVRvb255XCIsMSksZS5hZGRVbmlmb3JtKFwibGlnaHRDb2xvckF0dGVudWF0aW9uXCIsMSksZS5hZGRVbmlmb3JtKFwiaW5kaXJlY3RMaWdodEludGVuc2l0eVwiLDEpLGUuYWRkVW5pZm9ybShcInJpbUxpZ2h0aW5nTWl4XCIsMSksZS5hZGRVbmlmb3JtKFwicmltRnJlc25lbFBvd2VyXCIsMSksZS5hZGRVbmlmb3JtKFwicmltTGlmdFwiLDEpLGUuYWRkVW5pZm9ybShcIm91dGxpbmVXaWR0aFwiLDEpLGUuYWRkVW5pZm9ybShcIm91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZVwiLDEpLGUuYWRkVW5pZm9ybShcIm91dGxpbmVMaWdodGluZ01peFwiLDEpLGUuYWRkVW5pZm9ybShcInV2QW5pbWF0aW9uU2Nyb2xsWFwiLDEpLGUuYWRkVW5pZm9ybShcInV2QW5pbWF0aW9uU2Nyb2xsWVwiLDEpLGUuYWRkVW5pZm9ybShcInV2QW5pbWF0aW9uUm90YXRpb25cIiwxKSxlLmFkZFVuaWZvcm0oXCJ2RXllVXBcIiwzKSxlLmFkZFVuaWZvcm0oXCJhbHBoYUN1dE9mZlwiLDEpLGUuYWRkVW5pZm9ybShcInZBbWJpZW50Q29sb3JcIiwzKSxlLmFkZFVuaWZvcm0oXCJhc3BlY3RcIiwxKSxlLmFkZFVuaWZvcm0oXCJpc091dGxpbmVcIiwxKSxlLmFkZFVuaWZvcm0oXCJ0aW1lXCIsNCksZS5hZGRVbmlmb3JtKFwidmlzaWJpbGl0eVwiLDEpLHN1cGVyLmJ1aWxkVW5pZm9ybUxheW91dCgpfWJpbmRGb3JTdWJNZXNoKGUsaSxuKXt2YXIgYTtjb25zdCByPXRoaXMuZ2V0U2NlbmUoKSxzPW4ubWF0ZXJpYWxEZWZpbmVzLGw9bi5lZmZlY3Q7aWYoIXN8fCFsKXJldHVybjt0aGlzLl9hY3RpdmVFZmZlY3Q9bCxpLmdldE1lc2hVbmlmb3JtQnVmZmVyKCkuYmluZFRvRWZmZWN0KGwsXCJNZXNoXCIpLGkudHJhbnNmZXJUb0VmZmVjdChlKSx0aGlzLl91bmlmb3JtQnVmZmVyLmJpbmRUb0VmZmVjdChsLFwiTWF0ZXJpYWxcIiksdGhpcy5fZXZlbnRJbmZvLnN1Yk1lc2g9bix0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50SGFyZEJpbmRGb3JTdWJNZXNoKHRoaXMuX2V2ZW50SW5mbykscy5PQkpFQ1RTUEFDRV9OT1JNQUxNQVAmJihlLnRvTm9ybWFsTWF0cml4KHRoaXMuX25vcm1hbE1hdHJpeCksdGhpcy5iaW5kT25seU5vcm1hbE1hdHJpeCh0aGlzLl9ub3JtYWxNYXRyaXgpKTtjb25zdCBkPXRoaXMuX211c3RSZWJpbmQocixsLGkudmlzaWJpbGl0eSk7aC5NYXRlcmlhbEhlbHBlci5CaW5kQm9uZXNQYXJhbWV0ZXJzKGksbCk7Y29uc3QgZj10aGlzLl91bmlmb3JtQnVmZmVyO2lmKGQpe3RoaXMuYmluZFZpZXdQcm9qZWN0aW9uKGwpLGYudXNlVWJvJiZ0aGlzLmlzRnJvemVuJiZmLmlzU3luY3x8KHIudGV4dHVyZXNFbmFibGVkJiYodGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9kaWZmdXNlVGV4dHVyZSxmLGwsXCJkaWZmdXNlXCIsXCJ2RGlmZnVzZUluZm9zXCIpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fZW1pc3NpdmVUZXh0dXJlLGYsbCxcImVtaXNzaXZlXCIsXCJ2RW1pc3NpdmVJbmZvc1wiKSx0aGlzLl9idW1wVGV4dHVyZSYmci5nZXRFbmdpbmUoKS5nZXRDYXBzKCkuc3RhbmRhcmREZXJpdmF0aXZlcyYmKGYudXBkYXRlRmxvYXQzKFwidkJ1bXBJbmZvc1wiLHRoaXMuX2J1bXBUZXh0dXJlLmNvb3JkaW5hdGVzSW5kZXgsMS90aGlzLl9idW1wVGV4dHVyZS5sZXZlbCx0aGlzLl9idW1wU2NhbGUpLGguTWF0ZXJpYWxIZWxwZXIuQmluZFRleHR1cmVNYXRyaXgodGhpcy5fYnVtcFRleHR1cmUsZixcImJ1bXBcIiksbC5zZXRUZXh0dXJlKFwiYnVtcFNhbXBsZXJcIix0aGlzLl9idW1wVGV4dHVyZSksci5fbWlycm9yZWRDYW1lcmFQb3NpdGlvbj9mLnVwZGF0ZUZsb2F0MihcInZUYW5nZW50U3BhY2VQYXJhbXNcIix0aGlzLl9pbnZlcnROb3JtYWxNYXBYPzE6LTEsdGhpcy5faW52ZXJ0Tm9ybWFsTWFwWT8xOi0xKTpmLnVwZGF0ZUZsb2F0MihcInZUYW5nZW50U3BhY2VQYXJhbXNcIix0aGlzLl9pbnZlcnROb3JtYWxNYXBYPy0xOjEsdGhpcy5faW52ZXJ0Tm9ybWFsTWFwWT8tMToxKSksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9zaGFkZVRleHR1cmUsZixsLFwic2hhZGVcIixcInZTaGFkZUluZm9zXCIpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fcmVjZWl2ZVNoYWRvd1RleHR1cmUsZixsLFwicmVjZWl2ZVNoYWRvd1wiLFwidlJlY2VpdmVTaGFkb3dJbmZvc1wiKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX3NoYWRpbmdHcmFkZVRleHR1cmUsZixsLFwic2hhZGluZ0dyYWRlXCIsXCJ2U2hhZGluZ0dyYWRlSW5mb3NcIiksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9yaW1UZXh0dXJlLGYsbCxcInJpbVwiLFwidlJpbUluZm9zXCIpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fbWF0Q2FwVGV4dHVyZSxmLGwsXCJtYXRDYXBcIixcInZNYXRDYXBJbmZvc1wiKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX291dGxpbmVXaWR0aFRleHR1cmUsZixsLFwib3V0bGluZVdpZHRoXCIsXCJ2T3V0bGluZVdpZHRoSW5mb3NcIiksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl91dkFuaW1hdGlvbk1hc2tUZXh0dXJlLGYsbCxcInV2QW5pbWF0aW9uTWFza1wiLFwidlV2QW5pbWF0aW9uTWFza0luZm9zXCIpLHRoaXMuX2hhc0FscGhhQ2hhbm5lbCgpJiZmLnVwZGF0ZUZsb2F0KFwiYWxwaGFDdXRPZmZcIix0aGlzLmFscGhhQ3V0T2ZmKSksdGhpcy5wb2ludHNDbG91ZCYmZi51cGRhdGVGbG9hdChcInBvaW50U2l6ZVwiLHRoaXMucG9pbnRTaXplKSxmLnVwZGF0ZUZsb2F0KFwicmVjZWl2ZVNoYWRvd1JhdGVcIix0aGlzLl9yZWNlaXZlU2hhZG93UmF0ZSksZi51cGRhdGVGbG9hdChcInNoYWRpbmdHcmFkZVJhdGVcIix0aGlzLl9zaGFkaW5nR3JhZGVSYXRlKSxmLnVwZGF0ZUZsb2F0KFwic2hhZGVTaGlmdFwiLHRoaXMuX3NoYWRlU2hpZnQpLGYudXBkYXRlRmxvYXQoXCJzaGFkZVRvb255XCIsdGhpcy5fc2hhZGVUb29ueSksZi51cGRhdGVGbG9hdChcImxpZ2h0Q29sb3JBdHRlbnVhdGlvblwiLHRoaXMuX2xpZ2h0Q29sb3JBdHRlbnVhdGlvbiksZi51cGRhdGVGbG9hdChcImluZGlyZWN0TGlnaHRJbnRlbnNpdHlcIix0aGlzLl9pbmRpcmVjdExpZ2h0SW50ZW5zaXR5KSxmLnVwZGF0ZUZsb2F0KFwicmltTGlnaHRpbmdNaXhcIix0aGlzLl9yaW1MaWdodGluZ01peCksZi51cGRhdGVGbG9hdChcInJpbUZyZXNuZWxQb3dlclwiLHRoaXMuX3JpbUZyZXNuZWxQb3dlciksZi51cGRhdGVGbG9hdChcInJpbUxpZnRcIix0aGlzLl9yaW1MaWZ0KSxmLnVwZGF0ZUZsb2F0KFwib3V0bGluZVdpZHRoXCIsdGhpcy5fb3V0bGluZVdpZHRoKSxmLnVwZGF0ZUZsb2F0KFwib3V0bGluZVNjYWxlZE1heERpc3RhbmNlXCIsdGhpcy5fb3V0bGluZVNjYWxlZE1heERpc3RhbmNlKSxmLnVwZGF0ZUZsb2F0KFwib3V0bGluZUxpZ2h0aW5nTWl4XCIsdGhpcy5fb3V0bGluZUxpZ2h0aW5nTWl4KSxmLnVwZGF0ZUZsb2F0KFwidXZBbmltYXRpb25TY3JvbGxYXCIsdGhpcy5fdXZBbmltYXRpb25TY3JvbGxYKSxmLnVwZGF0ZUZsb2F0KFwidXZBbmltYXRpb25TY3JvbGxZXCIsdGhpcy5fdXZBbmltYXRpb25TY3JvbGxZKSxmLnVwZGF0ZUZsb2F0KFwidXZBbmltYXRpb25Sb3RhdGlvblwiLHRoaXMuX3V2QW5pbWF0aW9uUm90YXRpb24pLHIuYW1iaWVudENvbG9yLm11bHRpcGx5VG9SZWYodGhpcy5hbWJpZW50Q29sb3IsdGhpcy5fZ2xvYmFsQW1iaWVudENvbG9yKSxmLnVwZGF0ZUNvbG9yMyhcInZBbWJpZW50Q29sb3JcIix0aGlzLl9nbG9iYWxBbWJpZW50Q29sb3IpLGYudXBkYXRlQ29sb3I0KFwidkRpZmZ1c2VDb2xvclwiLHRoaXMuZGlmZnVzZUNvbG9yLHRoaXMuYWxwaGEpLGYudXBkYXRlQ29sb3IzKFwidkVtaXNzaXZlQ29sb3JcIix0aGlzLmVtaXNzaXZlQ29sb3IpLGYudXBkYXRlQ29sb3IzKFwidlNoYWRlQ29sb3JcIix0aGlzLnNoYWRlQ29sb3IpLGYudXBkYXRlQ29sb3IzKFwidlJpbUNvbG9yXCIsdGhpcy5yaW1Db2xvciksZi51cGRhdGVDb2xvcjQoXCJ2T3V0bGluZUNvbG9yXCIsdGhpcy5vdXRsaW5lQ29sb3IsMSksZi51cGRhdGVWZWN0b3IzKFwidkV5ZVVwXCIsci5hY3RpdmVDYW1lcmEudXBWZWN0b3IpKTtjb25zdCBlPXI7ZS51c2VPcmRlckluZGVwZW5kZW50VHJhbnNwYXJlbmN5JiZ0aGlzLm5lZWRBbHBoYUJsZW5kaW5nRm9yTWVzaChpKSYmZS5kZXB0aFBlZWxpbmdSZW5kZXJlciYmZS5kZXB0aFBlZWxpbmdSZW5kZXJlci5iaW5kKGwpLHRoaXMuX2V2ZW50SW5mby5zdWJNZXNoPW4sdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudEJpbmRGb3JTdWJNZXNoKHRoaXMuX2V2ZW50SW5mbyksaC5NYXRlcmlhbEhlbHBlci5CaW5kQ2xpcFBsYW5lKGwsciksdGhpcy5iaW5kRXllUG9zaXRpb24obCl9ZWxzZSByLmdldEVuZ2luZSgpLl9mZWF0dXJlcy5uZWVkVG9BbHdheXNCaW5kVW5pZm9ybUJ1ZmZlcnMmJih0aGlzLl9uZWVkVG9CaW5kU2NlbmVVYm89ITApO2lmKGR8fCF0aGlzLmlzRnJvemVuKXtyLmxpZ2h0c0VuYWJsZWQmJiF0aGlzLl9kaXNhYmxlTGlnaHRpbmcmJmguTWF0ZXJpYWxIZWxwZXIuQmluZExpZ2h0cyhyLGksbCxzLHRoaXMuX21heFNpbXVsdGFuZW91c0xpZ2h0cyksKHIuZm9nRW5hYmxlZCYmaS5hcHBseUZvZyYmci5mb2dNb2RlIT09dC5TY2VuZS5GT0dNT0RFX05PTkV8fGkucmVjZWl2ZVNoYWRvd3MpJiZ0aGlzLmJpbmRWaWV3KGwpLGguTWF0ZXJpYWxIZWxwZXIuQmluZEZvZ1BhcmFtZXRlcnMocixpLGwpLHMuTlVNX01PUlBIX0lORkxVRU5DRVJTJiZoLk1hdGVyaWFsSGVscGVyLkJpbmRNb3JwaFRhcmdldFBhcmFtZXRlcnMoaSxsKSxzLkJBS0VEX1ZFUlRFWF9BTklNQVRJT05fVEVYVFVSRSYmKG51bGw9PT0oYT1pLmJha2VkVmVydGV4QW5pbWF0aW9uTWFuYWdlcil8fHZvaWQgMD09PWF8fGEuYmluZChsLHMuSU5TVEFOQ0VTKSksdGhpcy51c2VMb2dhcml0aG1pY0RlcHRoJiZoLk1hdGVyaWFsSGVscGVyLkJpbmRMb2dEZXB0aChzLGwsciksdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbiYmIXRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uYXBwbHlCeVBvc3RQcm9jZXNzJiZ0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmJpbmQodGhpcy5fYWN0aXZlRWZmZWN0KSxmLnVwZGF0ZUZsb2F0KFwiYXNwZWN0XCIsci5nZXRFbmdpbmUoKS5nZXRBc3BlY3RSYXRpbyhyLmFjdGl2ZUNhbWVyYSkpLGYudXBkYXRlRmxvYXQoXCJpc091dGxpbmVcIix0aGlzLmlzT3V0bGluZSk7Y29uc3QgZT13aW5kb3cucGVyZm9ybWFuY2Uubm93KCkvMWUzO2YudXBkYXRlVmVjdG9yNChcInRpbWVcIixuZXcgby5WZWN0b3I0KGUvMjAsZSwyKmUsMyplKSl9dGhpcy5fYWZ0ZXJCaW5kKGksdGhpcy5fYWN0aXZlRWZmZWN0KSxmLnVwZGF0ZSgpfWdldEFuaW1hdGFibGVzKCl7Y29uc3QgZT1zdXBlci5nZXRBbmltYXRhYmxlcygpO2Zvcihjb25zdCBpIG9mIHRoaXMuYXBwZW5kZWRBY3RpdmVUZXh0dXJlcylpLmFuaW1hdGlvbnMmJmkuYW5pbWF0aW9ucy5sZW5ndGg+MCYmZS5wdXNoKGkpO3JldHVybiBlfWdldEFjdGl2ZVRleHR1cmVzKCl7cmV0dXJuIHN1cGVyLmdldEFjdGl2ZVRleHR1cmVzKCkuY29uY2F0KHRoaXMuYXBwZW5kZWRBY3RpdmVUZXh0dXJlcyl9aGFzVGV4dHVyZShlKXtpZihzdXBlci5oYXNUZXh0dXJlKGUpKXJldHVybiEwO2Zvcihjb25zdCBpIG9mIHRoaXMuYXBwZW5kZWRBY3RpdmVUZXh0dXJlcylpZihpPT09ZSlyZXR1cm4hMDtyZXR1cm4hMX1kaXNwb3NlKGUsaSl7aWYoZGVsZXRlIHRoaXMub3V0bGluZVJlbmRlcmVyLGkpZm9yKGNvbnN0IGUgb2YgdGhpcy5hcHBlbmRlZEFjdGl2ZVRleHR1cmVzKWUuZGlzcG9zZSgpO3RoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24mJnRoaXMuX2ltYWdlUHJvY2Vzc2luZ09ic2VydmVyJiZ0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLm9uVXBkYXRlUGFyYW1ldGVycy5yZW1vdmUodGhpcy5faW1hZ2VQcm9jZXNzaW5nT2JzZXJ2ZXIpLHN1cGVyLmRpc3Bvc2UoZSxpKX1jbG9uZShlKXtjb25zdCBuPWkuU2VyaWFsaXphdGlvbkhlbHBlci5DbG9uZSgoKCk9Pm5ldyB4KGUsdGhpcy5nZXRTY2VuZSgpKSksdGhpcyk7cmV0dXJuIG4ubmFtZT1lLG4uaWQ9ZSx0aGlzLnN0ZW5jaWwuY29weVRvKG4uc3RlbmNpbCksbn1zdGF0aWMgUGFyc2UoZSxuLHQpe2NvbnN0IG89aS5TZXJpYWxpemF0aW9uSGVscGVyLlBhcnNlKCgoKT0+bmV3IHgoZS5uYW1lLG4pKSxlLG4sdCk7cmV0dXJuIGUuc3RlbmNpbCYmby5zdGVuY2lsLnBhcnNlKGUuc3RlbmNpbCxuLHQpLG99YmluZFRleHR1cmUoZSxpLG4sdCxvKXtlJiYodGhpcy5fdW5pZm9ybUJ1ZmZlci51cGRhdGVGbG9hdDIobyxlLmNvb3JkaW5hdGVzSW5kZXgsZS5sZXZlbCksaC5NYXRlcmlhbEhlbHBlci5CaW5kVGV4dHVyZU1hdHJpeChlLGksdCksbi5zZXRUZXh0dXJlKGAke3R9U2FtcGxlcmAsZSkpfWlzUmVhZHlGb3JUZXh0dXJlKGUsaSxuKXtyZXR1cm4gZT8hIWUuaXNSZWFkeU9yTm90QmxvY2tpbmcoKSYmKGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JNZXJnZWRVVihlLGksbiksITApOihpW25dPSExLCEwKX1hcHBseURlZmluZXMoZSl7c3dpdGNoKHRoaXMuX2RlYnVnTW9kZSl7Y2FzZSBULk5vcm1hbDohMCE9PWUuTVRPT05fREVCVUdfTk9STUFMJiYoZS5NVE9PTl9ERUJVR19OT1JNQUw9ITAsZS5NVE9PTl9ERUJVR19MSVRTSEFERVJBVEU9ITEsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKTticmVhaztjYXNlIFQuTGl0U2hhZGVSYXRlOiEwIT09ZS5NVE9PTl9ERUJVR19MSVRTSEFERVJBVEUmJihlLk1UT09OX0RFQlVHX05PUk1BTD0hMSxlLk1UT09OX0RFQlVHX0xJVFNIQURFUkFURT0hMCxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpO2JyZWFrO2Nhc2UgVC5Ob25lOiEwPT09ZS5NVE9PTl9ERUJVR19OT1JNQUwmJihlLk1UT09OX0RFQlVHX05PUk1BTD0hMSxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpLCEwPT09ZS5NVE9PTl9ERUJVR19MSVRTSEFERVJBVEUmJihlLk1UT09OX0RFQlVHX0xJVFNIQURFUkFURT0hMSxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpfXN3aXRjaCh0aGlzLm91dGxpbmVXaWR0aE1vZGUpe2Nhc2UgRC5Xb3JsZENvcnJkaW5hdGVzOiEwIT09ZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEJiYoZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEPSEwLGUuTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU49ITEsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKTticmVhaztjYXNlIEQuU2NyZWVuQ29vcmRpbmF0ZXM6ITAhPT1lLk1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOJiYoZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEPSExLGUuTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU49ITAsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKTticmVhaztjYXNlIEQuTm9uZTohMT09PWUuTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU4mJiExPT09ZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1dPUkxEfHwoZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTj0hMSxlLk1UT09OX09VVExJTkVfV0lEVEhfV09STEQ9ITEsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKX1zd2l0Y2godGhpcy5vdXRsaW5lQ29sb3JNb2RlKXtjYXNlIE4uRml4ZWRDb2xvcjohMCE9PWUuTVRPT05fT1VUTElORV9DT0xPUl9GSVhFRCYmKGUuTVRPT05fT1VUTElORV9DT0xPUl9GSVhFRD0hMCxlLk1UT09OX09VVExJTkVfQ09MT1JfTUlYRUQ9ITEsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKTticmVhaztjYXNlIE4uTWl4ZWRMaWdodGluZzohMCE9PWUuTVRPT05fT1VUTElORV9DT0xPUl9NSVhFRCYmKGUuTVRPT05fT1VUTElORV9DT0xPUl9GSVhFRD0hMSxlLk1UT09OX09VVExJTkVfQ09MT1JfTUlYRUQ9ITAsZS5tYXJrQXNVbnByb2Nlc3NlZCgpKX19fWUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcImRpZmZ1c2VUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9kaWZmdXNlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0FuZE1pc2NEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJkaWZmdXNlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwiZW1pc3NpdmVUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9lbWlzc2l2ZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJlbWlzc2l2ZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcImJ1bXBUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9idW1wVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImJ1bXBUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJzaGFkZVRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX3NoYWRlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInNoYWRlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwicmVjZWl2ZVNoYWRvd1RleHR1cmVcIildLHgucHJvdG90eXBlLFwiX3JlY2VpdmVTaGFkb3dUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwicmVjZWl2ZVNoYWRvd1RleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcInNoYWRpbmdHcmFkZVRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX3NoYWRpbmdHcmFkZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJzaGFkaW5nR3JhZGVUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJyaW1UZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9yaW1UZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwicmltVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwibWF0Q2FwVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfbWF0Q2FwVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcIm1hdENhcFRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcIm91dGxpbmVXaWR0aFRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX291dGxpbmVXaWR0aFRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJvdXRsaW5lV2lkdGhUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJvdXRsaW5lV2lkdGhUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl91dkFuaW1hdGlvbk1hc2tUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwidXZBbmltYXRpb25NYXNrVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc0NvbG9yMykoXCJkaWZmdXNlXCIpXSx4LnByb3RvdHlwZSxcImRpZmZ1c2VDb2xvclwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwiYW1iaWVudFwiKV0seC5wcm90b3R5cGUsXCJhbWJpZW50Q29sb3JcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcImVtaXNzaXZlXCIpXSx4LnByb3RvdHlwZSxcImVtaXNzaXZlQ29sb3JcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcInNoYWRlXCIpXSx4LnByb3RvdHlwZSxcInNoYWRlQ29sb3JcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcInJpbVwiKV0seC5wcm90b3R5cGUsXCJyaW1Db2xvclwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwib3V0bGluZVwiKV0seC5wcm90b3R5cGUsXCJvdXRsaW5lQ29sb3JcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJ1c2VFbWlzc2l2ZUFzSWxsdW1pbmF0aW9uXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwibGlua0VtaXNzaXZlV2l0aERpZmZ1c2VcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJ1c2VSZWZsZWN0aW9uT3ZlckFscGhhXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJkaXNhYmxlTGlnaHRpbmdcIildLHgucHJvdG90eXBlLFwiX2Rpc2FibGVMaWdodGluZ1wiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJkaXNhYmxlTGlnaHRpbmdcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcImFscGhhQ3V0T2ZmXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJ1c2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfdXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNBbmRNaXNjRGlydHlcIildLHgucHJvdG90eXBlLFwidXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcIm1heFNpbXVsdGFuZW91c0xpZ2h0c1wiKV0seC5wcm90b3R5cGUsXCJfbWF4U2ltdWx0YW5lb3VzTGlnaHRzXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcIm1heFNpbXVsdGFuZW91c0xpZ2h0c1wiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwiaW52ZXJ0Tm9ybWFsTWFwWFwiKV0seC5wcm90b3R5cGUsXCJfaW52ZXJ0Tm9ybWFsTWFwWFwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImludmVydE5vcm1hbE1hcFhcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcImludmVydE5vcm1hbE1hcFlcIildLHgucHJvdG90eXBlLFwiX2ludmVydE5vcm1hbE1hcFlcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJpbnZlcnROb3JtYWxNYXBZXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJ0d29TaWRlZExpZ2h0aW5nXCIpXSx4LnByb3RvdHlwZSxcIl90d29TaWRlZExpZ2h0aW5nXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwidHdvU2lkZWRMaWdodGluZ1wiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwiYnVtcFNjYWxlXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwicmVjZWl2ZVNoYWRvd1JhdGVcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJzaGFkaW5nR3JhZGVSYXRlXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwic2hhZGVTaGlmdFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInNoYWRlVG9vbnlcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJsaWdodENvbG9yQXR0ZW51YXRpb25cIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJpbmRpcmVjdExpZ2h0SW50ZW5zaXR5XCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwicmltTGlnaHRpbmdNaXhcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJyaW1GcmVzbmVsUG93ZXJcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJyaW1MaWZ0XCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwib3V0bGluZVdpZHRoXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwib3V0bGluZVNjYWxlZE1heERpc3RhbmNlXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwib3V0bGluZUxpZ2h0aW5nTWl4XCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwidXZBbmltYXRpb25TY3JvbGxYXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwidXZBbmltYXRpb25TY3JvbGxZXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwidXZBbmltYXRpb25Sb3RhdGlvblwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKShcImFscGhhVGVzdFwiKV0seC5wcm90b3R5cGUsXCJfYWxwaGFUZXN0XCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJhbHBoYVRlc3RcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJhbHBoYUJsZW5kXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKFwiZGVidWdNb2RlXCIpXSx4LnByb3RvdHlwZSxcIl9kZWJ1Z01vZGVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImRlYnVnTW9kZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHlcIildLHgucHJvdG90eXBlLFwib3V0bGluZUNvbG9yTW9kZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwiY3VsbE1vZGVcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJfb3V0bGluZUN1bGxNb2RlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJvdXRsaW5lQ3VsbE1vZGVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcImZsaXBVXCIpXSx4LnByb3RvdHlwZSxcImZsaXBVXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJmbGlwVlwiKV0seC5wcm90b3R5cGUsXCJmbGlwVlwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwidXNlTG9nYXJpdGhtaWNEZXB0aFwiLG51bGwpfSkoKSxNfSkoKSkpOyIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge0Fic3RyYWN0TWVzaCwgTWVzaCwgTnVsbGFibGUsIFNoYWRvd0dlbmVyYXRvciwgU2tlbGV0b24sIFNrZWxldG9uVmlld2VyLCBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZVwiO1xuaW1wb3J0IFYzRENvcmUgZnJvbSBcIi4vdjNkLWNvcmVcIjtcblxuZXhwb3J0IGNsYXNzIFYzREhlbHBlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb3JlOiBWM0RDb3JlXG4gICAgKSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBhIG5vZGUgY2FzdCBzaGFkb3cgZnJvbSBhIFNoYWRvd0dlbmVyYXRvclxuICAgICAqIEBwYXJhbSBzaGFkb3dHZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gbm9kZU5hbWVcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkTm9kZVRvU2hhZG93Q2FzdGVyQnlOYW1lKFxuICAgICAgICBzaGFkb3dHZW5lcmF0b3I6IE51bGxhYmxlPFNoYWRvd0dlbmVyYXRvcj4sXG4gICAgICAgIG5vZGVOYW1lOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgc2hhZG93R2VuZXJhdG9yPy5hZGRTaGFkb3dDYXN0ZXIodGhpcy5jb3JlLnNjZW5lLmdldE5vZGVCeU5hbWUobm9kZU5hbWUpIGFzIE1lc2gpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2Ugbm9kZXMgY2FzdCBzaGFkb3cgZnJvbSBhIFNoYWRvd0dlbmVyYXRvclxuICAgICAqIEBwYXJhbSBzaGFkb3dHZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gbm9kZU5hbWVcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkTm9kZVRvU2hhZG93Q2FzdGVyQ29udGFpbnNOYW1lKFxuICAgICAgICBzaGFkb3dHZW5lcmF0b3I6IE51bGxhYmxlPFNoYWRvd0dlbmVyYXRvcj4sXG4gICAgICAgIG5vZGVOYW1lOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgaWYgKCFzaGFkb3dHZW5lcmF0b3IpIHJldHVybjtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMuY29yZS5zY2VuZS5nZXROb2RlcygpKSB7XG4gICAgICAgICAgICBpZiAobm9kZSAmJiBub2RlLm5hbWUuaW5jbHVkZXMobm9kZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgc2hhZG93R2VuZXJhdG9yLmFkZFNoYWRvd0Nhc3Rlcihub2RlIGFzIE1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBub2RlIHJlY2VpdmUgc2hhZG93XG4gICAgICogQHBhcmFtIG5vZGVOYW1lXG4gICAgICovXG4gICAgcHVibGljIG1ha2VSZWNlaXZlU2hhZG93QnlOYW1lKG5vZGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgKHRoaXMuY29yZS5zY2VuZS5nZXROb2RlQnlOYW1lKG5vZGVOYW1lKSBhcyBNZXNoKS5yZWNlaXZlU2hhZG93cyA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBub2RlcyByZWNlaXZlIHNoYWRvd1xuICAgICAqIEBwYXJhbSBub2RlTmFtZVxuICAgICAqL1xuICAgIHB1YmxpYyBtYWtlUmVjZWl2ZVNoYWRvd0NvbnRhaW5zTmFtZShub2RlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLmNvcmUuc2NlbmUuZ2V0Tm9kZXMoKSkge1xuICAgICAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5uYW1lLmluY2x1ZGVzKG5vZGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIChub2RlIGFzIE1lc2gpLnJlY2VpdmVTaGFkb3dzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzaG93U2tlbGV0b25EZWJ1ZyhcbiAgICAgICAgc2tlbGV0b246IFNrZWxldG9uLFxuICAgICAgICBtZXNoOiBBYnN0cmFjdE1lc2hcbiAgICApIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHBhdXNlQW5pbWF0aW9ucyA6IHRydWUsIC8vVHJ1ZSBvciBGYWxzZSBmbGFnIHRvIHBhdXNlIHRoZSBhbmltYXRpb25zIHdoaWxlIHRyeWluZyB0byBjb25zdHJ1Y3QgdGhlIGRlYnVnTWVzaC4gRGVmYXVsdDogVHJ1ZVxuICAgICAgICAgICAgcmV0dXJuVG9SZXN0IDogZmFsc2UsIC8vRmxhZyB0byBmb3JjZSB0aGUgc2tlbGV0b24gYmFjayBpbnRvIGl0cyByZXN0UG9zZSBiZWZvcmUgY29uc3RydWN0aW5nIHRoZSBkZWJ1Z01lc2guIERlZmF1bHQ6IEZhbHNlXG4gICAgICAgICAgICBjb21wdXRlQm9uZXNVc2luZ1NoYWRlcnMgOiB0cnVlLCAvL1RlbGwgdGhlIGRlYnVnTWVzaCB0byB1c2Ugb3Igbm90IHVzZSB0aGUgR1BVIGZvciBpdHMgY2FsY3VsYXRpb25zLCBpZiB5b3UgZXZlciB3YW50IHRvIGRvIHBpY2tpbmcgb24gdGhlIG1lc2ggdGhpcyB3aWxsIG5lZWQgdG8gYmUgRmFsc2UuIERlZmF1bHQ6IFRydWVcbiAgICAgICAgICAgIHVzZUFsbEJvbmVzIDogdHJ1ZSwgLy9WaXN1YWxpemUgYWxsIGJvbmVzIG9yIHNraXAgdGhlIG9uZXMgd2l0aCBubyBpbmZsdWVuY2UuXG4gICAgICAgICAgICBkaXNwbGF5TW9kZSA6IFNrZWxldG9uVmlld2VyLkRJU1BMQVlfTElORVMsIC8vQSB2YWx1ZSB0aGF0IGNvbnRyb2xzIHdoaWNoIGRpc3BsYXkgbW9kZSB0byB1c2UuIChTa2VsZXRvblZpZXdlci5ESVNQTEFZX0xJTkVTID0gMCwgU2tlbGV0b25WaWV3ZXIuRElTUExBWV9TUEhFUkVTID0gMSwgU2tlbGV0b25WaWV3ZXIuRElTUExBWV9TUEhFUkVfQU5EX1NQVVJTID0gMikuIERlZmF1bHQgPSAwLlxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBza2VsZXRvblZpZXdlciA9IG5ldyBTa2VsZXRvblZpZXdlcihcbiAgICAgICAgICAgIHNrZWxldG9uLCAvL1RhcmdldCBTa2VsZXRvblxuICAgICAgICAgICAgbWVzaCwgLy9UaGF0IHNrZWxldG9ucyBBdHRhY2hlZCBNZXNoIG9yIGEgTm9kZSB3aXRoIHRoZSBzYW1lIGdsb2JhbE1hdHJpeFxuICAgICAgICAgICAgdGhpcy5jb3JlLnNjZW5lLCAvL1RoZSBTY2VuZSBzY29wZVxuICAgICAgICAgICAgdHJ1ZSwgLy9hdXRvVXBkYXRlQm9uZU1hdHJpY2VzP1xuICAgICAgICAgICAgbWVzaC5yZW5kZXJpbmdHcm91cElkID4gMCA/IG1lc2gucmVuZGVyaW5nR3JvdXBJZCArIDEgOiAxLCAvLyByZW5kZXJpbmdHcm91cElkXG4gICAgICAgICAgICBvcHRpb25zLCAvL0NvbmZpZ3VyYXRpb24gT3B0aW9uc1xuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBza2VsZXRvblZpZXdlcjtcbiAgICB9XG59XG4iLCIvKipcclxuICogVGhyb3dzIHdoZW4gbWFuZGF0b3J5IGJvbmUgY291bGQgbm90IGZpbmRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBCb25lTm90Rm91bmRFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBuYW1lID0gJ0JvbmVOb3RGb3VuZEVycm9yJztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IGJvbmVOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihgQm9uZToke2JvbmVOYW1lfSBOb3RGb3VuZGApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgVHJhbnNmb3JtTm9kZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NZXNoZXMvdHJhbnNmb3JtTm9kZSc7XHJcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBCb25lTm90Rm91bmRFcnJvciB9IGZyb20gJy4vZXJyb3JzJztcclxuXHJcbmludGVyZmFjZSBUcmFuc2Zvcm1Ob2RlTWFwIHtcclxuICAgIFtuYW1lOiBzdHJpbmddOiBUcmFuc2Zvcm1Ob2RlO1xyXG59XHJcblxyXG4vKipcclxuICogSHVtYW5vaWRCb25lIOOCkuWPluW+l+OBmeOCi+ODoeOCveODg+ODiee+pFxyXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy51bml0eTNkLmNvbS9qYS8yMDE4LjMvU2NyaXB0UmVmZXJlbmNlL0h1bWFuQm9keUJvbmVzLmh0bWxcclxuICovXHJcbmV4cG9ydCBjbGFzcyBIdW1hbm9pZEJvbmUge1xyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSBub2RlTWFwOiBUcmFuc2Zvcm1Ob2RlTWFwKSB7fVxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyBub2RlTWFwOiBUcmFuc2Zvcm1Ob2RlTWFwKSB7fVxyXG5cclxuICAgIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgICh0aGlzLm5vZGVNYXAgYXMgYW55KSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsLtcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBoaXBzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2hpcHMnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5aSq44KC44KCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFVwcGVyTGVnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2xlZnRVcHBlckxlZycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PlpKrjgoLjgoJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFVwcGVyTGVnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3JpZ2h0VXBwZXJMZWcnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem44Gy44GWXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdExvd2VyTGVnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2xlZnRMb3dlckxlZycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PjgbLjgZZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodExvd2VyTGVnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3JpZ2h0TG93ZXJMZWcnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6Laz6aaWXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdEZvb3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbGVmdEZvb3QnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6Laz6aaWXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRGb290KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3JpZ2h0Rm9vdCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDohIrmpI7jga7nrKzkuIBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBzcGluZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdzcGluZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDog7hcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjaGVzdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdjaGVzdCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpppZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBuZWNrKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ25lY2snKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6aCtXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgaGVhZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdoZWFkJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puiCqVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRTaG91bGRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdsZWZ0U2hvdWxkZXInKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6IKpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRTaG91bGRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdyaWdodFNob3VsZGVyJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puS4iuiFlVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRVcHBlckFybSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdsZWZ0VXBwZXJBcm0nKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5LiK6IWVXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRVcHBlckFybSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdyaWdodFVwcGVyQXJtJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puOBsuOBmFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRMb3dlckFybSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdsZWZ0TG93ZXJBcm0nKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z44Gy44GYXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRMb3dlckFybSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdyaWdodExvd2VyQXJtJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puaJi+mmllxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRIYW5kKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2xlZnRIYW5kJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+aJi+mmllxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0SGFuZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdyaWdodEhhbmQnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem44Gk44G+5YWIKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRUb2VzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdFRvZXMnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z44Gk44G+5YWIKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0VG9lcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0VG9lcycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bnm64oT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdEV5ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRFeWUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z55uuKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0RXllKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRFeWUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6aGOKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGphdygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2phdycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bopqrmjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFRodW1iUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0VGh1bWJQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bopqrmjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFRodW1iSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdFRodW1iSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puimquaMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0VGh1bWJEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0VGh1bWJEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5Lq65beu44GX5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRJbmRleFByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdEluZGV4UHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5Lq65beu44GX5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRJbmRleEludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRJbmRleEludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bkurrlt67jgZfmjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdEluZGV4RGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdEluZGV4RGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puS4reaMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TWlkZGxlUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0TWlkZGxlUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5Lit5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRNaWRkbGVJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0TWlkZGxlSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puS4reaMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TWlkZGxlRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdE1pZGRsZURpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bolqzmjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFJpbmdQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRSaW5nUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6Jas5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRSaW5nSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdFJpbmdJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6Jas5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRSaW5nRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdFJpbmdEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5bCP5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRMaXR0bGVQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRMaXR0bGVQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6blsI/mjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdExpdHRsZUludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRMaXR0bGVJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5bCP5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRMaXR0bGVEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0TGl0dGxlRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+imquaMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFRodW1iUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodFRodW1iUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6Kaq5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0VGh1bWJJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodFRodW1iSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+imquaMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFRodW1iRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRUaHVtYkRpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7Pkurrlt67jgZfmjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRJbmRleFByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRJbmRleFByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+S6uuW3ruOBl+aMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodEluZGV4SW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRJbmRleEludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7Pkurrlt67jgZfmjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRJbmRleERpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0SW5kZXhEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5Lit5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TWlkZGxlUHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodE1pZGRsZVByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+S4reaMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodE1pZGRsZUludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0TWlkZGxlSW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+S4reaMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodE1pZGRsZURpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0TWlkZGxlRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+iWrOaMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFJpbmdQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0UmluZ1Byb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+iWrOaMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFJpbmdJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodFJpbmdJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6Jas5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0UmluZ0Rpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0UmluZ0Rpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PlsI/mjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRMaXR0bGVQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0TGl0dGxlUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5bCP5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TGl0dGxlSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRMaXR0bGVJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5bCP5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TGl0dGxlRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRMaXR0bGVEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5LiK6IO4KE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHVwcGVyQ2hlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCd1cHBlckNoZXN0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlv4XpoIjjg5zjg7zjg7PjgpLlj5blvpfjgZnjgovjgILlj5blvpflh7rmnaXjgarjgYTloLTlkIjjga/kvovlpJbjgpLnmbrnlJ/jgZnjgotcclxuICAgICAqXHJcbiAgICAgKiBAdGhyb3dzIEJvbmVOb3RGb3VuZEVycm9yXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBIdW1hbm9pZEJvbmVOYW1lXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0TWFuZGF0b3J5Qm9uZShuYW1lOiBzdHJpbmcpOiBUcmFuc2Zvcm1Ob2RlIHtcclxuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5ub2RlTWFwW25hbWVdO1xyXG4gICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQm9uZU5vdEZvdW5kRXJyb3IobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Kq44OX44K344On44OK44Or44Oc44O844Oz44KS5Y+W5b6X44GZ44KLXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgSHVtYW5vaWRCb25lTmFtZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE9wdGlvbmFsQm9uZShuYW1lOiBzdHJpbmcpOiBOdWxsYWJsZTxUcmFuc2Zvcm1Ob2RlPiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm5vZGVNYXAgJiYgdGhpcy5ub2RlTWFwW25hbWVdKSB8fCBudWxsO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgQ29sb3IzIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5pbXBvcnQgeyBWZWN0b3I0IH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5pbXBvcnQgdHlwZSB7IE1hdGVyaWFsLCBCYXNlVGV4dHVyZSwgVGV4dHVyZSwgTnVsbGFibGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUnO1xyXG5pbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZSc7XHJcbmltcG9ydCB0eXBlIHsgSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmQgfSBmcm9tICcuL3ZybS1pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgTVRvb25NYXRlcmlhbCB9IGZyb20gJ2JhYnlsb24tbXRvb24tbWF0ZXJpYWwnO1xyXG5cclxudHlwZSBTdXBwb3J0ZWRNYXRlcmlhbCA9IE1Ub29uTWF0ZXJpYWwgfCBQQlJNYXRlcmlhbDtcclxuXHJcbi8qKlxyXG4gKiBmaXJzdFZhbHVlIOOBryBmYWxzZSDlm7rlrprjgaDjgYzjgIEgVW5pVlJNIOOBq+WAo+OBo+OBpuWumue+qeOBl+OBpuOBhOOCi1xyXG4gKi9cclxudHlwZSBTZXR0ZXIgPSAodmFsdWU6IG51bWJlciwgZmlyc3RWYWx1ZTogYm9vbGVhbikgPT4gdm9pZDtcclxuXHJcbmNvbnN0IFBCUk1hdGVyaWFsVGV4dHVyZU1hcDogeyBbcHJvcGVydHlOYW1lOiBzdHJpbmddOiBrZXlvZiBQQlJNYXRlcmlhbCB9ID0ge1xyXG4gICAgX01haW5UZXg6ICdhbGJlZG9UZXh0dXJlJyxcclxufTtcclxuXHJcbmNvbnN0IFBCUk1hdGVyaWFsQ29sb3JNYXA6IHsgW3Byb3BlcnR5TmFtZTogc3RyaW5nXToga2V5b2YgUEJSTWF0ZXJpYWwgfSA9IHtcclxuICAgIF9Db2xvcjogJ2FsYmVkb0NvbG9yJyxcclxufTtcclxuXHJcbmNvbnN0IE1Ub29uTWF0ZXJpYWxUZXh0dXJlTWFwOiB7IFtwcm9wZXJ0eU5hbWU6IHN0cmluZ106IGtleW9mIE1Ub29uTWF0ZXJpYWwgfSA9IHtcclxuICAgIF9NYWluVGV4OiAnZGlmZnVzZVRleHR1cmUnLFxyXG4gICAgX0VtaXNzaW9uTWFwOiAnZW1pc3NpdmVUZXh0dXJlJyxcclxuICAgIF9CdW1wTWFwOiAnYnVtcFRleHR1cmUnLFxyXG4gICAgX1NoYWRlVGV4dHVyZTogJ3NoYWRlVGV4dHVyZScsXHJcbiAgICBfUmVjZWl2ZVNoYWRvd1RleHR1cmU6ICdyZWNlaXZlU2hhZG93VGV4dHVyZScsXHJcbiAgICBfU2hhZGluZ0dyYWRlVGV4dHVyZTogJ3NoYWRpbmdHcmFkZVRleHR1cmUnLFxyXG4gICAgX1JpbVRleHR1cmU6ICdyaW1UZXh0dXJlJyxcclxuICAgIF9TcGhlcmVBZGQ6ICdtYXRDYXBUZXh0dXJlJyxcclxuICAgIF9PdXRsaW5lV2lkdGhUZXh0dXJlOiAnb3V0bGluZVdpZHRoVGV4dHVyZScsXHJcbiAgICBfVXZBbmltTWFza1RleHR1cmU6ICd1dkFuaW1hdGlvbk1hc2tUZXh0dXJlJyxcclxufTtcclxuXHJcbmNvbnN0IE1Ub29uTWF0ZXJpYWxDb2xvck1hcDogeyBbcHJvcGVydHlOYW1lOiBzdHJpbmddOiBrZXlvZiBNVG9vbk1hdGVyaWFsIH0gPSB7XHJcbiAgICBfQ29sb3I6ICdkaWZmdXNlQ29sb3InLFxyXG4gICAgX1NoYWRlQ29sb3I6ICdzaGFkZUNvbG9yJyxcclxuICAgIF9SaW1Db2xvcjogJ3JpbUNvbG9yJyxcclxuICAgIF9FbWlzc2lvbkNvbG9yOiAnZW1pc3NpdmVDb2xvcicsXHJcbiAgICBfT3V0bGluZUNvbG9yOiAnb3V0bGluZUNvbG9yJyxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92cm0tYy9VbmlWUk0vYmxvYi80ZmZkOTdjMmU5MzM5NjgzY2U5YmYyMWU3M2Y1MTBiZDkwYzJhNWIyL0Fzc2V0cy9WUk0vUnVudGltZS9CbGVuZFNoYXBlL01hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyLmNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXIge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBtX21hdGVyaWFsTWFwOiB7IFttYXRlcmlhbE5hbWU6IHN0cmluZ106IFN1cHBvcnRlZE1hdGVyaWFsIH0gPSB7fTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbV9tYXRlcmlhbFNldHRlck1hcDogeyBbYmluZGluZ0tleTogc3RyaW5nXTogU2V0dGVyIH0gPSB7fTtcclxuICAgIHByaXZhdGUgbV9tYXRlcmlhbFZhbHVlTWFwOiB7IFtiaW5kaW5nS2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtX3VzZWQ6IHsgW3RhcmdldEtleTogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGJhc2VWYWx1ZUNhY2hlOiB7IFtiaW5kaW5nS2V5OiBzdHJpbmddOiBWZWN0b3I0IH0gPSB7fTtcclxuICAgIHByaXZhdGUgbWF0ZXJpYWxWYWx1ZXNUb0FwcGx5OiB7IFtiaW5kaW5nS2V5OiBzdHJpbmddOiBJVlJNQmxlbmRTaGFwZU1hdGVyaWFsQmluZCB9ID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWxzIFZSTeOBruWFqCBNYXRlcmlhbFxyXG4gICAgICogQHBhcmFtIG1hdGVyaWFsVmFsdWVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihtYXRlcmlhbHM6IE1hdGVyaWFsW10sIHByaXZhdGUgcmVhZG9ubHkgbWF0ZXJpYWxWYWx1ZXM6IElWUk1CbGVuZFNoYXBlTWF0ZXJpYWxCaW5kW10pIHtcclxuICAgICAgICBpZiAobWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCB8fCBtYXRlcmlhbFZhbHVlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDjg5fjg63jg5Hjg4bjgqPlkI3jga7lpInmj5vjgavlr77lv5zjgZfjgabjgYTjgosgTVRvb25NYXRlcmlhbCDjgaggUEJSTWF0ZXJpYWwg44KS5L+d5a2Y44GZ44KLXHJcbiAgICAgICAgbWF0ZXJpYWxzLmZvckVhY2goKG1hdGVyaWFsKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbCBpbnN0YW5jZW9mIE1Ub29uTWF0ZXJpYWwgfHwgbWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX21hdGVyaWFsTWFwW21hdGVyaWFsLm5hbWVdID0gbWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBtYXRlcmlhbFZhbHVlcy5mb3JFYWNoKChtYXRlcmlhbFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdLZXkgPSB0aGlzLm1ha2VCaW5kaW5nS2V5KG1hdGVyaWFsVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tX21hdGVyaWFsU2V0dGVyTWFwW2JpbmRpbmdLZXldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1fbWF0ZXJpYWxNYXBbbWF0ZXJpYWxWYWx1ZS5tYXRlcmlhbE5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgYmFzZVZhbHVlID0gdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCBtYXRlcmlhbFZhbHVlLnByb3BlcnR5TmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghYmFzZVZhbHVlIHx8IG1hdGVyaWFsVmFsdWUudGFyZ2V0VmFsdWUubGVuZ3RoICE9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g44Oi44O844OV44Kj44Oz44Kw55So44GrIGJhc2VWYWx1ZSAo5Yid5pyf5YCkKSDjgaggbWF0ZXJpYWxWYWx1ZSDjgpLkv53lrZjjgZnjgotcclxuICAgICAgICAgICAgdGhpcy5iYXNlVmFsdWVDYWNoZVtiaW5kaW5nS2V5XSA9IGJhc2VWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFZhbHVlc1RvQXBwbHlbYmluZGluZ0tleV0gPSBtYXRlcmlhbFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSBWZWN0b3I0LkZyb21BcnJheShtYXRlcmlhbFZhbHVlLnRhcmdldFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVOYW1lID0gbWF0ZXJpYWxWYWx1ZS5wcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgICAgIC8vIFVuaXR5IOOBqOW6p+aomeezu+OBjOeVsOOBquOCi+OBn+OCgeOAgeODhuOCr+OCueODgeODo+OBriB2T2Zmc2V0IOOCkuWPjei7ouOBmeOCi1xyXG4gICAgICAgICAgICBpZiAobWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKFBCUk1hdGVyaWFsVGV4dHVyZU1hcCkuc29tZSgoaykgPT4gdmFsdWVOYW1lLnN0YXJ0c1dpdGgoaykpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VmFsdWUudyAqPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyhNVG9vbk1hdGVyaWFsVGV4dHVyZU1hcCkuc29tZSgoaykgPT4gdmFsdWVOYW1lLnN0YXJ0c1dpdGgoaykpKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRWYWx1ZS53ICo9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZU5hbWUuZW5kc1dpdGgoJ19TVF9TJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIOODhuOCr+OCueODgeODo+OBriB15pa55ZCRIOOBruOBv+abtOaWsOOBmeOCi1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGVyOiBTZXR0ZXIgPSAodmFsdWUsIGZpcnN0VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBmaXJzdFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYmFzZVZhbHVlLmFkZCh0YXJnZXRWYWx1ZS5zdWJ0cmFjdChiYXNlVmFsdWUpLnNjYWxlKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSkhLmFkZCh0YXJnZXRWYWx1ZS5zdWJ0cmFjdChiYXNlVmFsdWUpLnNjYWxlKHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjID0gdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUpITtcclxuICAgICAgICAgICAgICAgICAgICBzcmMueCA9IHByb3BWYWx1ZS54O1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYy56ID0gcHJvcFZhbHVlLno7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUsIHNyYyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX21hdGVyaWFsU2V0dGVyTWFwW2JpbmRpbmdLZXldID0gc2V0dGVyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlTmFtZS5lbmRzV2l0aCgnX1NUX1QnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8g44OG44Kv44K544OB44Oj44GuIHbmlrnlkJEg44Gu44G/5pu05paw44GZ44KLXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0ZXI6IFNldHRlciA9ICh2YWx1ZSwgZmlyc3RWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BWYWx1ZSA9IGZpcnN0VmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlVmFsdWUuYWRkKHRhcmdldFZhbHVlLnN1YnRyYWN0KGJhc2VWYWx1ZSkuc2NhbGUodmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lKSEuYWRkKHRhcmdldFZhbHVlLnN1YnRyYWN0KGJhc2VWYWx1ZSkuc2NhbGUodmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmMgPSB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSkhO1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYy55ID0gcHJvcFZhbHVlLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjLncgPSBwcm9wVmFsdWUudztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSwgc3JjKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fbWF0ZXJpYWxTZXR0ZXJNYXBbYmluZGluZ0tleV0gPSBzZXR0ZXI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0ZXI6IFNldHRlciA9ICh2YWx1ZSwgZmlyc3RWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BWYWx1ZSA9IGZpcnN0VmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlVmFsdWUuYWRkKHRhcmdldFZhbHVlLnN1YnRyYWN0KGJhc2VWYWx1ZSkuc2NhbGUodmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lKSEuYWRkKHRhcmdldFZhbHVlLnN1YnRyYWN0KGJhc2VWYWx1ZSkuc2NhbGUodmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSwgcHJvcFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fbWF0ZXJpYWxTZXR0ZXJNYXBbYmluZGluZ0tleV0gPSBzZXR0ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVuaVZSTSDjgafjga8gRGljdGlvbmFyeSDjga7jgq3jg7znlKjjga7jgq/jg6njgrnjgpLlrprnvqnjgZfjgabjgYTjgovjgYzjgIHmloflrZfliJfjgafku6PnlKjjgZnjgotcclxuICAgICAqIE1hdGVyaWFsVmFsdWVCaW5kaW5nLkJhc2VWYWx1ZSDjga/lr77lv5zjgZnjgovjg5fjg63jg5Hjg4bjgqPjga7liJ3mnJ/lgKTjgarjga7jgafnhKHoppbjgafjgY3jgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBtYWtlQmluZGluZ0tleShtYXRlcmlhbFZhbHVlOiBJVlJNQmxlbmRTaGFwZU1hdGVyaWFsQmluZCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGAke21hdGVyaWFsVmFsdWUubWF0ZXJpYWxOYW1lfV8ke21hdGVyaWFsVmFsdWUucHJvcGVydHlOYW1lfV8ke21hdGVyaWFsVmFsdWUudGFyZ2V0VmFsdWUuam9pbignLScpfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbmlWUk0g44Gn44GvIERpY3Rpb25hcnkg44Gu44Kt44O855So44Gu44Kv44Op44K544KS5a6a576p44GX44Gm44GE44KL44GM44CB5paH5a2X5YiX44Gn5Luj55So44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWFrZVRhcmdldEtleShtYXRlcmlhbFZhbHVlOiBJVlJNQmxlbmRTaGFwZU1hdGVyaWFsQmluZCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGAke21hdGVyaWFsVmFsdWUubWF0ZXJpYWxOYW1lfV8ke21hdGVyaWFsVmFsdWUucHJvcGVydHlOYW1lfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg6Ljg7zjg5XjgqPjg7PjgrDjgpLooYzjgYZcclxuICAgICAqIEBwYXJhbSB2YWx1ZSDlgKQoMOOAnDEpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtb3JwaGluZyh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRlVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuYXBwbHkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG1hdGVyaWFsVmFsdWUg44GU44Go44Gr6YeN44G/44KS6KiI566X44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYWNjdW11bGF0ZVZhbHVlKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsVmFsdWVzLmZvckVhY2goKG1hdGVyaWFsVmFsdWUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYmluZGluZ0tleSA9IHRoaXMubWFrZUJpbmRpbmdLZXkobWF0ZXJpYWxWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1fbWF0ZXJpYWxWYWx1ZU1hcFtiaW5kaW5nS2V5XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX21hdGVyaWFsVmFsdWVNYXBbYmluZGluZ0tleV0gKz0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fbWF0ZXJpYWxWYWx1ZU1hcFtiaW5kaW5nS2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRlcmlhbCDjga7jg5fjg63jg5Hjg4bjgqPjgpLmm7TmlrDjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhcHBseSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1fdXNlZCA9IHt9O1xyXG5cclxuICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLm1hdGVyaWFsVmFsdWVzVG9BcHBseSkuZm9yRWFjaCgoW2JpbmRpbmdLZXksIG1hdGVyaWFsVmFsdWVdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEtleSA9IHRoaXMubWFrZVRhcmdldEtleShtYXRlcmlhbFZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKCEodGFyZ2V0S2V5IGluIHRoaXMubV91c2VkKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1fbWF0ZXJpYWxNYXBbbWF0ZXJpYWxWYWx1ZS5tYXRlcmlhbE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmJhc2VWYWx1ZUNhY2hlW2JpbmRpbmdLZXldLmNsb25lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5a++6LGh44Gu44OX44Ot44OR44OG44Kj44KS5Yid5pyf5YCk44Gr5oi744GZXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZU5hbWUgPSBtYXRlcmlhbFZhbHVlLnByb3BlcnR5TmFtZTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZU5hbWUuZW5kc1dpdGgoJ19TVF9TJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUpITtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS55ID0gdi55O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLncgPSB2Lnc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlTmFtZS5lbmRzV2l0aCgnX1NUX1QnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSkhO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnggPSB2Lng7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUueiA9IHYuejtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX3VzZWRbdGFyZ2V0S2V5XSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNldHRlciA9IHRoaXMubV9tYXRlcmlhbFNldHRlck1hcFtiaW5kaW5nS2V5XTtcclxuICAgICAgICAgICAgaWYgKHNldHRlcikge1xyXG4gICAgICAgICAgICAgICAgc2V0dGVyKHRoaXMubV9tYXRlcmlhbFZhbHVlTWFwW2JpbmRpbmdLZXldLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5tX21hdGVyaWFsVmFsdWVNYXAgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODnuODhuODquOCouODq+OBruODhuOCr+OCueODgeODo+OBi+iJsuOBq+WvvuW/nOOBmeOCiyBWZWN0b3I0IOOCkuWPluW+l+OBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWw6IFN1cHBvcnRlZE1hdGVyaWFsLCBwcm9wZXJ0eU5hbWU6IHN0cmluZyk6IE51bGxhYmxlPFZlY3RvcjQ+IHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IHByb3BlcnR5TmFtZS5tYXRjaCgvXihfW15fXSspLyk7XHJcbiAgICAgICAgaWYgKCFtYXRjaCB8fCAhbWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdO1xyXG4gICAgICAgIGlmIChtYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgIGlmIChQQlJNYXRlcmlhbFRleHR1cmVNYXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRleHR1cmVJbnRvVmVjdG9yNFdoZW5Ob3ROdWxsKG1hdGVyaWFsW1BCUk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFBCUk1hdGVyaWFsQ29sb3JNYXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydENvbG9ySW50b1ZlY3RvcjQobWF0ZXJpYWxbUEJSTWF0ZXJpYWxDb2xvck1hcFtrZXldXSwgbWF0ZXJpYWwuYWxwaGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNVG9vbk1hdGVyaWFsXHJcbiAgICAgICAgaWYgKE1Ub29uTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRleHR1cmVJbnRvVmVjdG9yNFdoZW5Ob3ROdWxsKG1hdGVyaWFsW01Ub29uTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV1dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE1Ub29uTWF0ZXJpYWxDb2xvck1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRDb2xvckludG9WZWN0b3I0KG1hdGVyaWFsW01Ub29uTWF0ZXJpYWxDb2xvck1hcFtrZXldXSwgbWF0ZXJpYWwuYWxwaGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRleHR1cmUg44KSIFZlY3RvcjQg44Gr5aSJ5o+b44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29udmVydFRleHR1cmVJbnRvVmVjdG9yNFdoZW5Ob3ROdWxsKHRleHR1cmU6IE51bGxhYmxlPEJhc2VUZXh0dXJlPik6IE51bGxhYmxlPFZlY3RvcjQ+IHtcclxuICAgICAgICBpZiAoIXRleHR1cmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHQgPSB0ZXh0dXJlIGFzIFRleHR1cmU7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3I0KHQudVNjYWxlLCB0LnZTY2FsZSwgdC51T2Zmc2V0LCB0LnZPZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29sb3IzIOOBqyBhbHBoYSDjgpLliqDjgYjjgaYgVmVjdG9yNCDjgavlpInmj5vjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb252ZXJ0Q29sb3JJbnRvVmVjdG9yNChjb2xvcjogQ29sb3IzLCBhbHBoYTogbnVtYmVyKTogVmVjdG9yNCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3I0KGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIsIGFscGhhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODnuODhuODquOCouODq+OBruODhuOCr+OCueODgeODo+OBi+iJsuOCkuabtOaWsOOBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZU1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWw6IFN1cHBvcnRlZE1hdGVyaWFsLCBwcm9wZXJ0eU5hbWU6IHN0cmluZywgdmFsdWU6IFZlY3RvcjQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IHByb3BlcnR5TmFtZS5tYXRjaCgvXihfW15fXSspLyk7XHJcbiAgICAgICAgaWYgKCFtYXRjaCB8fCAhbWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXkgPSBtYXRjaFsxXTtcclxuICAgICAgICBpZiAobWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkge1xyXG4gICAgICAgICAgICBpZiAoUEJSTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGV4dHVyZVdoZW5Ob3ROdWxsKG1hdGVyaWFsW1BCUk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldXSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChQQlJNYXRlcmlhbENvbG9yTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdfQ29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGEgPSB2YWx1ZS53O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xvcihtYXRlcmlhbFtQQlJNYXRlcmlhbENvbG9yTWFwW2tleV1dLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNVG9vbk1hdGVyaWFsXHJcbiAgICAgICAgaWYgKE1Ub29uTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlV2hlbk5vdE51bGwobWF0ZXJpYWxbTVRvb25NYXRlcmlhbFRleHR1cmVNYXBba2V5XV0sIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTVRvb25NYXRlcmlhbENvbG9yTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ19Db2xvcicpIHtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFscGhhID0gdmFsdWUudztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbG9yKG1hdGVyaWFsW01Ub29uTWF0ZXJpYWxDb2xvck1hcFtrZXldXSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRleHR1cmUg44KSIFZlY3RvcjQg44Gn5pu05paw44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlVGV4dHVyZVdoZW5Ob3ROdWxsKHRleHR1cmU6IE51bGxhYmxlPEJhc2VUZXh0dXJlPiwgdmFsdWU6IFZlY3RvcjQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGV4dHVyZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gdGV4dHVyZSBhcyBUZXh0dXJlO1xyXG4gICAgICAgICAgICB0LnVTY2FsZSA9IHZhbHVlLng7XHJcbiAgICAgICAgICAgIHQudlNjYWxlID0gdmFsdWUueTtcclxuICAgICAgICAgICAgdC51T2Zmc2V0ID0gdmFsdWUuejtcclxuICAgICAgICAgICAgdC52T2Zmc2V0ID0gdmFsdWUudztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb2xvcjMg44KSIFZlY3RvcjQg44Gn5pu05paw44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlQ29sb3IoY29sb3I6IENvbG9yMywgdmFsdWU6IFZlY3RvcjQpOiB2b2lkIHtcclxuICAgICAgICBjb2xvci5yID0gdmFsdWUueDtcclxuICAgICAgICBjb2xvci5nID0gdmFsdWUueTtcclxuICAgICAgICBjb2xvci5iID0gdmFsdWUuejtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IFZlY3RvcjMgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aCc7XHJcbmltcG9ydCB0eXBlIHsgVHJhbnNmb3JtTm9kZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NZXNoZXMvdHJhbnNmb3JtTm9kZSc7XHJcbmltcG9ydCB7IFNwaGVyZUJ1aWxkZXIgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL0J1aWxkZXJzL3NwaGVyZUJ1aWxkZXInO1xyXG5pbXBvcnQgeyBDb2xsaWRlciB9IGZyb20gJy4vY29sbGlkZXInO1xyXG5cclxuLyoqXHJcbiAqIFZSTSBTcHJpbmdCb25lIENvbGxpZGVyR3JvdXBcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb2xsaWRlckdyb3VwIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBjb2xsaWRlcnM6IENvbGxpZGVyW10gPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB0cmFuc2Zvcm0gVGhlIG5vZGUgb2YgdGhlIGNvbGxpZGVyIGdyb3VwIGZvciBzZXR0aW5nIHVwIGNvbGxpc2lvbiBkZXRlY3Rpb25zLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHRyYW5zZm9ybTogVHJhbnNmb3JtTm9kZSkge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBvZmZzZXR0ZWQgY29sbGlkZXJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBsb2NhbCBjb29yZGluYXRlIGZyb20gdGhlIG5vZGUgb2YgdGhlIGNvbGxpZGVyIGdyb3VwLlxyXG4gICAgICogQHBhcmFtIHJhZGl1cyBUaGUgcmFkaXVzIG9mIHRoZSBjb2xsaWRlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbGxpZGVyKG9mZnNldDogVmVjdG9yMywgcmFkaXVzOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBzcGhlcmUgPSBTcGhlcmVCdWlsZGVyLkNyZWF0ZVNwaGVyZShcclxuICAgICAgICAgICAgYCR7dGhpcy50cmFuc2Zvcm0ubmFtZX1fQ29sbGlkZXJTcGhlcmVgLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50czogNixcclxuICAgICAgICAgICAgICAgIGRpYW1ldGVyOiByYWRpdXMgKiAyLjAsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLmdldFNjZW5lKClcclxuICAgICAgICApO1xyXG4gICAgICAgIHNwaGVyZS5zZXRQYXJlbnQodGhpcy50cmFuc2Zvcm0pO1xyXG4gICAgICAgIHNwaGVyZS5zZXRQb3NpdGlvbldpdGhMb2NhbFZlY3RvcihvZmZzZXQpO1xyXG4gICAgICAgIHNwaGVyZS5zZXRFbmFibGVkKGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb2xsaWRlcnMucHVzaChuZXcgQ29sbGlkZXIob2Zmc2V0LCByYWRpdXMsIHNwaGVyZSkpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgTWVzaCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZSc7XHJcbmltcG9ydCB0eXBlIHsgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuXHJcbi8qKlxyXG4gKiBDb2xsaWRlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbGxpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBUaGUgbG9jYWwgY29vcmRpbmF0ZSBmcm9tIHRoZSBub2RlIG9mIHRoZSBjb2xsaWRlciBncm91cC5cclxuICAgICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgY29sbGlkZXIuXHJcbiAgICAgKiBAcGFyYW0gc3BoZXJlIFRoZSBzcGVoZXJlIG1lc2ggZm9yIHdvcmxkTWF0cml4IGFuZCBnaXptby5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBvZmZzZXQ6IFZlY3RvcjMsIHB1YmxpYyByZWFkb25seSByYWRpdXM6IG51bWJlciwgcHVibGljIHJlYWRvbmx5IHNwaGVyZTogTWVzaCkge31cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5pbXBvcnQgdHlwZSB7IFRyYW5zZm9ybU5vZGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3RyYW5zZm9ybU5vZGUnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uIH0gZnJvbSAnLi4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBDb2xsaWRlckdyb3VwIH0gZnJvbSAnLi9jb2xsaWRlci1ncm91cCc7XHJcbmltcG9ydCB7IFZSTVNwcmluZ0JvbmUgfSBmcm9tICcuL3ZybS1zcHJpbmctYm9uZSc7XHJcblxyXG4vKipcclxuICogZnVuY3Rpb24gdG8gZ2V0IGJvbmUgZnJvbSBub2RlSW5kZXhcclxuICovXHJcbnR5cGUgZ2V0Qm9uZSA9IChub2RlSW5kZXg6IG51bWJlcikgPT4gTnVsbGFibGU8VHJhbnNmb3JtTm9kZT47XHJcblxyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIGNyZWF0aW5nIHNwcmluZ3NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc3RydWN0U3ByaW5nc09wdGlvbnMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcmVzaWxpZW5jZSBvZiB0aGUgc3dheWluZyBvYmplY3RcclxuICAgICAqL1xyXG4gICAgc3RpZmZuZXNzPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RyZW5ndGggb2YgZ3Jhdml0eVxyXG4gICAgICovXHJcbiAgICBncmF2aXR5UG93ZXI/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkaXJlY3Rpb24gb2YgZ3Jhdml0eS4gU2V0ICgwLCAtMSwgMCkgZm9yIHNpbXVsYXRpbmcgdGhlIGdyYXZpdHkuIFNldCAoMSwgMCwgMCkgZm9yIHNpbXVsYXRpbmcgdGhlIHdpbmQuXHJcbiAgICAgKi9cclxuICAgIGdyYXZpdHlEaXI/OiBWZWN0b3IzO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcmVzaXN0YW5jZSAoZGVjZWxlcmF0aW9uKSBvZiBhdXRvbWF0aWMgYW5pbWF0aW9uXHJcbiAgICAgKi9cclxuICAgIGRyYWdGb3JjZT86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlIHVzZWQgZm9yIHRoZSBjb2xsaXNpb24gZGV0ZWN0aW9uIHdpdGggY29sbGlkZXJzXHJcbiAgICAgKi9cclxuICAgIGhpdFJhZGl1cz86IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZSTSBTcHJpbmdCb25lIENvbnRyb2xsZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcHJpbmdCb25lQ29udHJvbGxlciB7XHJcbiAgICAvKipcclxuICAgICAqIFNwcmluZyBCb25lIExpc3RcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzcHJpbmdzOiBWUk1TcHJpbmdCb25lW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXh0IFNlY29uZGFyeUFuaW1hdGlvbiBPYmplY3RcclxuICAgICAqIEBwYXJhbSBnZXRCb25lXHJcbiAgICAgKi9cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBleHQ6IElWUk1TZWNvbmRhcnlBbmltYXRpb24sIGdldEJvbmU6IGdldEJvbmUsIG9wdGlvbnM/OiBDb25zdHJ1Y3RTcHJpbmdzT3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVyR3JvdXBzID0gdGhpcy5jb25zdHJ1Y3RDb2xsaWRlckdyb3VwcyhnZXRCb25lKTtcclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICAvLyB0aGlzLnNwcmluZ3MgPSB0aGlzLmNvbnN0cnVjdFNwcmluZ3MoZ2V0Qm9uZSwgY29sbGlkZXJHcm91cHMpO1xyXG4gICAgICAgIHRoaXMuc3ByaW5ncyA9IHRoaXMuY29uc3RydWN0U3ByaW5ncyhnZXRCb25lLCBjb2xsaWRlckdyb3Vwcywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpbmdzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgYWxsIFNwcmluZ0JvbmVzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlbHRhVGltZSBFbGFwc2VkIHNlYyBmcm9tIHByZXZpb3VzIGZyYW1lXHJcbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9jcy51bml0eTNkLmNvbS9TY3JpcHRSZWZlcmVuY2UvVGltZS1kZWx0YVRpbWUuaHRtbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8g44Od44O844K65b6M44Gu44GC44KJ44G244KK6Ziy5q2i44Gu44Gf44KBIGNsYW1wXHJcbiAgICAgICAgZGVsdGFUaW1lID0gTWF0aC5tYXgoMC4wLCBNYXRoLm1pbigxNi42NjYsIGRlbHRhVGltZSkpIC8gMTAwMDtcclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMuc3ByaW5ncy5tYXA8UHJvbWlzZTx2b2lkPj4oKHNwcmluZykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3ByaW5nLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8qIERvIG5vdGhpbmcgKi9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdENvbGxpZGVyR3JvdXBzKGdldEJvbmU6IGdldEJvbmUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXh0LmNvbGxpZGVyR3JvdXBzIHx8ICF0aGlzLmV4dC5jb2xsaWRlckdyb3Vwcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb2xsaWRlckdyb3VwczogQ29sbGlkZXJHcm91cFtdID0gW107XHJcbiAgICAgICAgdGhpcy5leHQuY29sbGlkZXJHcm91cHMuZm9yRWFjaCgoY29sbGlkZXJHcm91cCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBib25lID0gZ2V0Qm9uZShjb2xsaWRlckdyb3VwLm5vZGUpIGFzIFRyYW5zZm9ybU5vZGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGcgPSBuZXcgQ29sbGlkZXJHcm91cChib25lKTtcclxuICAgICAgICAgICAgY29sbGlkZXJHcm91cC5jb2xsaWRlcnMuZm9yRWFjaCgoY29sbGlkZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGcuYWRkQ29sbGlkZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVlJNIOWPs+aJi+ezu1lfVVAsIC1aX0Zyb250IOOBi+OCiSBCYWJ5bG9uLmpzIOW3puaJi+ezu1lfVVAsICtaX0Zyb250IOOBq+OBmeOCi1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IzKC1jb2xsaWRlci5vZmZzZXQueCwgY29sbGlkZXIub2Zmc2V0LnksIC1jb2xsaWRlci5vZmZzZXQueiksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlkZXIucmFkaXVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29sbGlkZXJHcm91cHMucHVzaChnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY29sbGlkZXJHcm91cHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RTcHJpbmdzKGdldEJvbmU6IGdldEJvbmUsIGNvbGxpZGVyR3JvdXBzOiBDb2xsaWRlckdyb3VwW10sIG9wdGlvbnM/OiBDb25zdHJ1Y3RTcHJpbmdzT3B0aW9ucykge1xyXG4gICAgICAgIGlmICghdGhpcy5leHQuYm9uZUdyb3VwcyB8fCAhdGhpcy5leHQuYm9uZUdyb3Vwcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzcHJpbmdzOiBWUk1TcHJpbmdCb25lW10gPSBbXTtcclxuICAgICAgICB0aGlzLmV4dC5ib25lR3JvdXBzLmZvckVhY2goKHNwcmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByb290Qm9uZXMgPSAoc3ByaW5nLmJvbmVzIHx8IFtdKS5tYXAoKGJvbmUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCb25lKGJvbmUpIGFzIFRyYW5zZm9ybU5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBzcHJpbmdDb2xsaWRlcnMgPSAoc3ByaW5nLmNvbGxpZGVyR3JvdXBzIHx8IFtdKS5tYXA8Q29sbGlkZXJHcm91cD4oKGcpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xsaWRlckdyb3Vwc1tnXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNwcmluZ3MucHVzaChcclxuICAgICAgICAgICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgICAgICAgICAgLy8gbmV3IFZSTVNwcmluZ0JvbmUoXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc3ByaW5nLmNvbW1lbnQsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc3ByaW5nLnN0aWZmaW5lc3MsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc3ByaW5nLmdyYXZpdHlQb3dlcixcclxuICAgICAgICAgICAgICAgIC8vICAgICBuZXcgVmVjdG9yMyhcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gVlJNIOWPs+aJi+ezu1lfVVAsIC1aX0Zyb250IOOBi+OCiSBCYWJ5bG9uLmpzIOW3puaJi+ezu1lfVVAsICtaX0Zyb250IOOBq+OBmeOCi1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAtc3ByaW5nLmdyYXZpdHlEaXIueCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc3ByaW5nLmdyYXZpdHlEaXIueSxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLXNwcmluZy5ncmF2aXR5RGlyLnpcclxuICAgICAgICAgICAgICAgIC8vICAgICApLm5vcm1hbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHNwcmluZy5kcmFnRm9yY2UsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZ2V0Qm9uZShzcHJpbmcuY2VudGVyKSxcclxuICAgICAgICAgICAgICAgIC8vICAgICBzcHJpbmcuaGl0UmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHJvb3RCb25lcyxcclxuICAgICAgICAgICAgICAgIC8vICAgICBzcHJpbmdDb2xsaWRlcnNcclxuICAgICAgICAgICAgICAgIC8vIClcclxuICAgICAgICAgICAgICAgIG5ldyBWUk1TcHJpbmdCb25lKFxyXG4gICAgICAgICAgICAgICAgICAgIHNwcmluZy5jb21tZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM/LnN0aWZmbmVzcyA/IG9wdGlvbnMuc3RpZmZuZXNzIDogc3ByaW5nLnN0aWZmaW5lc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz8uZ3Jhdml0eVBvd2VyID8gb3B0aW9ucy5ncmF2aXR5UG93ZXIgOiBzcHJpbmcuZ3Jhdml0eVBvd2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM/LmdyYXZpdHlEaXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmdyYXZpdHlEaXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yMyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVlJNIOWPs+aJi+ezu1lfVVAsIC1aX0Zyb250IOOBi+OCiSBCYWJ5bG9uLmpzIOW3puaJi+ezu1lfVVAsICtaX0Zyb250IOOBq+OBmeOCi1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtc3ByaW5nLmdyYXZpdHlEaXIueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaW5nLmdyYXZpdHlEaXIueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLXNwcmluZy5ncmF2aXR5RGlyLnpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICApLm5vcm1hbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM/LmRyYWdGb3JjZSA/IG9wdGlvbnMuZHJhZ0ZvcmNlIDogc3ByaW5nLmRyYWdGb3JjZSxcclxuICAgICAgICAgICAgICAgICAgICBnZXRCb25lKHNwcmluZy5jZW50ZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM/LmhpdFJhZGl1cyA/IG9wdGlvbnMuaGl0UmFkaXVzIDogc3ByaW5nLmhpdFJhZGl1cyxcclxuICAgICAgICAgICAgICAgICAgICByb290Qm9uZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3ByaW5nQ29sbGlkZXJzXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHNwcmluZ3M7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTWF0cml4LCBRdWF0ZXJuaW9uLCBWZWN0b3IzIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5pbXBvcnQgdHlwZSB7IFRyYW5zZm9ybU5vZGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3RyYW5zZm9ybU5vZGUnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBDb2xsaWRlckdyb3VwIH0gZnJvbSAnLi9jb2xsaWRlci1ncm91cCc7XHJcbi8vIGJhc2VkIG9uXHJcbi8vIGh0dHA6Ly9yb2NrZXRqdW1wLnNrci5qcC91bml0eTNkLzEwOS9cclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2R3YW5nby9VbmlWUk0vYmxvYi9tYXN0ZXIvU2NyaXB0cy9TcHJpbmdCb25lL1ZSTVNwcmluZ0JvbmUuY3NcclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3BpeGl2L3RocmVlLXZybS9ibG9iL2FhZDU1MWUwNDFmYWQ1NTNjMTlkMjA5MWU1ZjVlYWZmMWViOGZhYTgvcGFja2FnZXMvdGhyZWUtdnJtL3NyYy9zcHJpbmdib25lL1ZSTVNwcmluZ0JvbmUudHNcclxuXHJcbmNvbnN0IElERU5USVRZX01BVFJJWCA9IE1hdHJpeC5JZGVudGl0eSgpO1xyXG5cclxuY29uc3QgX3YzQSA9IG5ldyBWZWN0b3IzKCk7XHJcbmNvbnN0IF92M0IgPSBuZXcgVmVjdG9yMygpO1xyXG5jb25zdCBfdjNDID0gbmV3IFZlY3RvcjMoKTtcclxuY29uc3QgX3F1YXRBID0gbmV3IFF1YXRlcm5pb24oKTtcclxuY29uc3QgX21hdEEgPSBuZXcgTWF0cml4KCk7XHJcbmNvbnN0IF9tYXRCID0gbmV3IE1hdHJpeCgpO1xyXG5cclxuLyoqXHJcbiAqIFZlcmxldCBTcHJpbmcgQm9uZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZSTVNwcmluZ0JvbmVMb2dpYyB7XHJcbiAgICAvKipcclxuICAgICAqIGluaXRpYWwgbG9jYWwgdHJhbnNmb3JtIE1hcml4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgaW5pdGlhbExvY2FsTWF0cml4OiBNYXRyaXg7XHJcbiAgICAvKipcclxuICAgICAqIENsb25lZCBpbml0aWFsIGxvY2FsIHJvdGF0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgaW5pdGlhbExvY2FsUm90YXRpb246IFF1YXRlcm5pb247XHJcbiAgICAvKipcclxuICAgICAqIENsb25lZCBpbml0aWFsIGxvY2FsIGNoaWxkIHBvc2l0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgaW5pdGlhbExvY2FsQ2hpbGRQb3NpdGlvbjogVmVjdG9yMztcclxuXHJcbiAgICAvKipcclxuICAgICAqIExlbmd0aCBvZiB0aGUgYm9uZSBpbiByZWxhdGl2ZSBzcGFjZSB1bml0LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNlbnRlclNwYWNlQm9uZUxlbmd0aDogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBQb3NpdGlvbiBvZiB0aGUgYm9uZSBpbiByZWxhdGl2ZSBzcGFjZSB1bml0LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNlbnRlclNwYWNlUG9zaXRpb246IFZlY3RvcjM7XHJcbiAgICAvKipcclxuICAgICAqIFJlZmVyZW5jZSBvZiBwYXJlbnQgcm90YXRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBib25lQXhpczogVmVjdG9yMztcclxuXHJcbiAgICBwcml2YXRlIGN1cnJlbnRUYWlsOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIHByaXZhdGUgcHJldlRhaWw6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgcHJpdmF0ZSBuZXh0VGFpbDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gY2VudGVyIENlbnRlciByZWZlcmVuY2Ugb2YgVHJhbnNmb3JtTm9kZVxyXG4gICAgICogQHBhcmFtIHJhZGl1cyBDb2xsaXNpb24gUmFkaXVzXHJcbiAgICAgKiBAcGFyYW0gdHJhbnNmb3JtIEJhc2UgVHJhbnNmb3JtTm9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IGNlbnRlcjogTnVsbGFibGU8VHJhbnNmb3JtTm9kZT4sIHB1YmxpYyByZWFkb25seSByYWRpdXM6IG51bWJlciwgcHVibGljIHJlYWRvbmx5IHRyYW5zZm9ybTogVHJhbnNmb3JtTm9kZSkge1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgcm90YXRpb25RdWF0ZXJuaW9uIHdoZW4gbm90IGluaXRpYWxpemVkXHJcbiAgICAgICAgaWYgKCF0cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uKSB7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24gPSB0cmFuc2Zvcm0ucm90YXRpb24udG9RdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB3b3JsZE1hdHJpeCA9IHRyYW5zZm9ybS5nZXRXb3JsZE1hdHJpeCgpO1xyXG4gICAgICAgIHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbiA9IHdvcmxkTWF0cml4LmdldFRyYW5zbGF0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdGlhbExvY2FsTWF0cml4ID0gdHJhbnNmb3JtLl9sb2NhbE1hdHJpeC5jbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbExvY2FsUm90YXRpb24gPSB0cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uLmNsb25lKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdHJhbnNmb3JtLmdldENoaWxkVHJhbnNmb3JtTm9kZXModHJ1ZSk7XHJcbiAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxMb2NhbENoaWxkUG9zaXRpb24gPSB0cmFuc2Zvcm0ucG9zaXRpb24uY2xvbmUoKS5ub3JtYWxpemUoKS5zY2FsZUluUGxhY2UoMC4wNyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsTG9jYWxDaGlsZFBvc2l0aW9uID0gY2hpbGRyZW5bMF0ucG9zaXRpb24uY2xvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZih0aGlzLmluaXRpYWxMb2NhbENoaWxkUG9zaXRpb24sIHdvcmxkTWF0cml4LCB0aGlzLmN1cnJlbnRUYWlsKTtcclxuICAgICAgICB0aGlzLnByZXZUYWlsLmNvcHlGcm9tKHRoaXMuY3VycmVudFRhaWwpO1xyXG4gICAgICAgIHRoaXMubmV4dFRhaWwuY29weUZyb20odGhpcy5jdXJyZW50VGFpbCk7XHJcblxyXG4gICAgICAgIHRoaXMuYm9uZUF4aXMgPSB0aGlzLmluaXRpYWxMb2NhbENoaWxkUG9zaXRpb24ubm9ybWFsaXplVG9OZXcoKTtcclxuICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYodGhpcy5pbml0aWFsTG9jYWxDaGlsZFBvc2l0aW9uLCB3b3JsZE1hdHJpeCwgX3YzQSk7XHJcbiAgICAgICAgdGhpcy5jZW50ZXJTcGFjZUJvbmVMZW5ndGggPSBfdjNBLnN1YnRyYWN0SW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pLmxlbmd0aCgpO1xyXG5cclxuICAgICAgICBpZiAoY2VudGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TWF0cml4V29ybGRUb0NlbnRlcihfbWF0QSk7XHJcblxyXG4gICAgICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYodGhpcy5jdXJyZW50VGFpbCwgX21hdEEsIHRoaXMuY3VycmVudFRhaWwpO1xyXG4gICAgICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYodGhpcy5wcmV2VGFpbCwgX21hdEEsIHRoaXMucHJldlRhaWwpO1xyXG4gICAgICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYodGhpcy5uZXh0VGFpbCwgX21hdEEsIHRoaXMubmV4dFRhaWwpO1xyXG5cclxuICAgICAgICAgICAgd29ybGRNYXRyaXgubXVsdGlwbHlUb1JlZihfbWF0QSwgX21hdEEpO1xyXG5cclxuICAgICAgICAgICAgX21hdEEuZ2V0VHJhbnNsYXRpb25Ub1JlZih0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKHRoaXMuaW5pdGlhbExvY2FsQ2hpbGRQb3NpdGlvbiwgX21hdEEsIF92M0EpO1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclNwYWNlQm9uZUxlbmd0aCA9IF92M0Euc3VidHJhY3RJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbikubGVuZ3RoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIFRhaWwgcG9zaXRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3RpZmZuZXNzRm9yY2UgQ3VycmVudCBmcmFtZSBzdGlmZm5lc3NcclxuICAgICAqIEBwYXJhbSBkcmFnRm9yY2UgQ3VycmVudCBmcmFtZSBkcmFnIGZvcmNlXHJcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWwgQ3VycmVudCBmcmFtZSBleHRlcm5hbCBmb3JjZVxyXG4gICAgICogQHBhcmFtIGNvbGxpZGVyR3JvdXBzIEN1cnJlbnQgZnJhbWUgY29sbGlkZXJHcm91cHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZShzdGlmZm5lc3NGb3JjZTogbnVtYmVyLCBkcmFnRm9yY2U6IG51bWJlciwgZXh0ZXJuYWw6IFZlY3RvcjMsIGNvbGxpZGVyR3JvdXBzOiBDb2xsaWRlckdyb3VwW10pOiB2b2lkIHtcclxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHRoaXMudHJhbnNmb3JtLmdldEFic29sdXRlUG9zaXRpb24oKS54KSkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgdXBkYXRlIHdoZW4gYWJzb2x1dGUgcG9zaXRpb24gaXMgaW52YWxpZFxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgYm9uZSBwb3NpdGlvbiBpbiBjZW50ZXIgc3BhY2VcclxuICAgICAgICB0aGlzLmdldE1hdHJpeFdvcmxkVG9DZW50ZXIoX21hdEEpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLmdldFdvcmxkTWF0cml4KCkubXVsdGlwbHlUb1JlZihfbWF0QSwgX21hdEEpO1xyXG4gICAgICAgIF9tYXRBLmdldFRyYW5zbGF0aW9uVG9SZWYodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IHBhcmVudCBwb3NpdGlvbiBpbiBjZW50ZXIgc3BhY2VcclxuICAgICAgICB0aGlzLmdldE1hdHJpeFdvcmxkVG9DZW50ZXIoX21hdEIpO1xyXG4gICAgICAgIHRoaXMuZ2V0UGFyZW50TWF0cml4V29ybGQoKS5tdWx0aXBseVRvUmVmKF9tYXRCLCBfbWF0Qik7XHJcblxyXG4gICAgICAgIC8vIHZlcmxldOepjeWIhuOBp+asoeOBruS9jee9ruOCkuioiOeul1xyXG4gICAgICAgIHRoaXMubmV4dFRhaWwuY29weUZyb20odGhpcy5jdXJyZW50VGFpbCk7XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyDmuJvoobDku5jjgY3jgafliY3jga7jg5Xjg6zjg7zjg6Djga7np7vli5XjgpLntpnntppcclxuICAgICAgICAgICAgX3YzQS5jb3B5RnJvbSh0aGlzLmN1cnJlbnRUYWlsKVxyXG4gICAgICAgICAgICAgICAgLnN1YnRyYWN0SW5QbGFjZSh0aGlzLnByZXZUYWlsKVxyXG4gICAgICAgICAgICAgICAgLnNjYWxlSW5QbGFjZSgxLjAgLSBkcmFnRm9yY2UpO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRUYWlsLmFkZEluUGxhY2UoX3YzQSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8g6Kaq44Gu5Zue6Lui44Gr44KI44KL5a2Q44Oc44O844Oz44Gu56e75YuV55uu5qiZXHJcbiAgICAgICAgICAgIF92M0EuY29weUZyb20odGhpcy5ib25lQXhpcyk7XHJcbiAgICAgICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZihfdjNBLCB0aGlzLmluaXRpYWxMb2NhbE1hdHJpeCwgX3YzQSk7XHJcbiAgICAgICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZihfdjNBLCBfbWF0QiwgX3YzQSk7XHJcbiAgICAgICAgICAgIF92M0Euc3VidHJhY3RJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbikubm9ybWFsaXplKCkuc2NhbGVJblBsYWNlKHN0aWZmbmVzc0ZvcmNlKTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0VGFpbC5hZGRJblBsYWNlKF92M0EpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIOWkluWKm+OBq+OCiOOCi+enu+WLlemHj1xyXG4gICAgICAgICAgICB0aGlzLm5leHRUYWlsLmFkZEluUGxhY2UoZXh0ZXJuYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIOmVt+OBleOCkiBib25lTGVuZ3RoIOOBq+W8t+WItlxyXG4gICAgICAgICAgICB0aGlzLm5leHRUYWlsLnN1YnRyYWN0SW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pLm5vcm1hbGl6ZSgpLnNjYWxlSW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlQm9uZUxlbmd0aCkuYWRkSW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIENvbGxpc2lvbiDjgafnp7vli5VcclxuICAgICAgICAgICAgdGhpcy5jb2xsaWRlKGNvbGxpZGVyR3JvdXBzLCB0aGlzLm5leHRUYWlsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucHJldlRhaWwuY29weUZyb20odGhpcy5jdXJyZW50VGFpbCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGFpbC5jb3B5RnJvbSh0aGlzLm5leHRUYWlsKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsTG9jYWxNYXRyaXgubXVsdGlwbHlUb1JlZihfbWF0QiwgX21hdEEpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxDZW50ZXJTcGFjZU1hdHJpeEludiA9IF9tYXRBLmludmVydCgpO1xyXG4gICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZih0aGlzLm5leHRUYWlsLCBpbml0aWFsQ2VudGVyU3BhY2VNYXRyaXhJbnYsIF92M0EpO1xyXG4gICAgICAgIF92M0Eubm9ybWFsaXplVG9SZWYoX3YzQik7XHJcbiAgICAgICAgUXVhdGVybmlvbi5Gcm9tVW5pdFZlY3RvcnNUb1JlZih0aGlzLmJvbmVBeGlzLCBfdjNCLCBfcXVhdEEpO1xyXG4gICAgICAgIGNvbnN0IGFwcGx5Um90YXRpb24gPSBfcXVhdEE7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTG9jYWxSb3RhdGlvbi5tdWx0aXBseVRvUmVmKGFwcGx5Um90YXRpb24sIHRoaXMudHJhbnNmb3JtLnJvdGF0aW9uUXVhdGVybmlvbiEpO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUgV29ybGRNYXRyaXhcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5jb21wdXRlV29ybGRNYXRyaXgodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBtYXRyaXggdGhhdCBjb252ZXJ0cyB3b3JsZCBzcGFjZSBpbnRvIGNlbnRlciBzcGFjZS5cclxuICAgICAqIEBwYXJhbSByZXN1bHQgVGFyZ2V0IG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE1hdHJpeFdvcmxkVG9DZW50ZXIocmVzdWx0OiBNYXRyaXgpOiBNYXRyaXgge1xyXG4gICAgICAgIGlmICh0aGlzLmNlbnRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlci5nZXRXb3JsZE1hdHJpeCgpLmludmVydFRvUmVmKHJlc3VsdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0LmNvcHlGcm9tKElERU5USVRZX01BVFJJWCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB3b3JsZCBtYXRyaXggb2YgaXRzIHBhcmVudCBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0UGFyZW50TWF0cml4V29ybGQoKTogTWF0cml4IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm0ucGFyZW50ID8gKHRoaXMudHJhbnNmb3JtLnBhcmVudCBhcyBUcmFuc2Zvcm1Ob2RlKS5nZXRXb3JsZE1hdHJpeCgpIDogSURFTlRJVFlfTUFUUklYO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6KGd56qB5Yik5a6a44KS6KGM44GGXHJcbiAgICAgKiBAcGFyYW0gY29sbGlkZXJHcm91cHNcclxuICAgICAqIEBwYXJhbSB0YWlsXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29sbGlkZShjb2xsaWRlckdyb3VwczogQ29sbGlkZXJHcm91cFtdLCB0YWlsOiBWZWN0b3IzKSB7XHJcbiAgICAgICAgY29sbGlkZXJHcm91cHMuZm9yRWFjaCgoY29sbGlkZXJHcm91cCkgPT4ge1xyXG4gICAgICAgICAgICBjb2xsaWRlckdyb3VwLmNvbGxpZGVycy5mb3JFYWNoKChjb2xsaWRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNYXRyaXhXb3JsZFRvQ2VudGVyKF9tYXRBKTtcclxuICAgICAgICAgICAgICAgIGNvbGxpZGVyLnNwaGVyZS5jb21wdXRlV29ybGRNYXRyaXgoKS5tdWx0aXBseVRvUmVmKF9tYXRBLCBfbWF0QSk7XHJcbiAgICAgICAgICAgICAgICBfbWF0QS5nZXRUcmFuc2xhdGlvblRvUmVmKF92M0EpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sbGlkZXJDZW50ZXJTcGFjZVBvc2l0aW9uID0gX3YzQTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4QWJzU2NhbGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZXIuc3BoZXJlLmFic29sdXRlU2NhbGluZy5hc0FycmF5KCkuZm9yRWFjaCgocykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heEFic1NjYWxlID0gTWF0aC5tYXgobWF4QWJzU2NhbGUsIE1hdGguYWJzKHMpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sbGlkZXJSYWRpdXMgPSBjb2xsaWRlci5yYWRpdXMgKiBtYXhBYnNTY2FsZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLnJhZGl1cyArIGNvbGxpZGVyUmFkaXVzO1xyXG5cclxuICAgICAgICAgICAgICAgIHRhaWwuc3VidHJhY3RUb1JlZihjb2xsaWRlckNlbnRlclNwYWNlUG9zaXRpb24sIF92M0IpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF92M0IubGVuZ3RoU3F1YXJlZCgpIDw9IHIgKiByKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsID0gX3YzQi5jb3B5RnJvbSh0YWlsKS5zdWJ0cmFjdEluUGxhY2UoY29sbGlkZXJDZW50ZXJTcGFjZVBvc2l0aW9uKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NGcm9tQ29sbGlkZXIgPSBfdjNDLmNvcHlGcm9tKGNvbGxpZGVyQ2VudGVyU3BhY2VQb3NpdGlvbikuYWRkSW5QbGFjZShub3JtYWwuc2NhbGVJblBsYWNlKHIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGFpbC5jb3B5RnJvbShcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zRnJvbUNvbGxpZGVyLnN1YnRyYWN0SW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pLm5vcm1hbGl6ZSgpLnNjYWxlSW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlQm9uZUxlbmd0aCkuYWRkSW5QbGFjZSh0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU3RhbmRhcmRNYXRlcmlhbCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvc3RhbmRhcmRNYXRlcmlhbCc7XHJcbmltcG9ydCB7IENvbG9yMywgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHsgTWVzaEJ1aWxkZXIgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL21lc2hCdWlsZGVyJztcclxuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgQ29sbGlkZXJHcm91cCB9IGZyb20gJy4vY29sbGlkZXItZ3JvdXAnO1xyXG5pbXBvcnQgeyBWUk1TcHJpbmdCb25lTG9naWMgfSBmcm9tICcuL3ZybS1zcHJpbmctYm9uZS1sb2dpYyc7XHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG5pbXBvcnQgdHlwZSB7IENvbnN0cnVjdFNwcmluZ3NPcHRpb25zIH0gZnJvbSAnLi9zcHJpbmctYm9uZS1jb250cm9sbGVyJztcclxuXHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92cm0tYy9VbmlWUk0vYmxvYi9tYXN0ZXIvQXNzZXRzL1ZSTS9VbmlWUk0vU2NyaXB0cy9TcHJpbmdCb25lL1ZSTVNwcmluZ0JvbmUuY3NcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWUk1TcHJpbmdCb25lIHtcclxuICAgIHB1YmxpYyB2ZXJsZXRzOiBWUk1TcHJpbmdCb25lTG9naWNbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBhY3RpdmVCb25lczogVHJhbnNmb3JtTm9kZVtdID0gW107XHJcblxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIHByaXZhdGUgZHJhd0dpem1vID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92cm0tYy92cm0tc3BlY2lmaWNhdGlvbi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzAuMFxyXG4gICAgICogQHBhcmFtIGNvbW1lbnQgQW5ub3RhdGlvbiBjb21tZW50XHJcbiAgICAgKiBAcGFyYW0gc3RpZmZuZXNzIFRoZSByZXNpbGllbmNlIG9mIHRoZSBzd2F5aW5nIG9iamVjdCAodGhlIHBvd2VyIG9mIHJldHVybmluZyB0byB0aGUgaW5pdGlhbCBwb3NlKS5cclxuICAgICAqIEBwYXJhbSBncmF2aXR5UG93ZXIgVGhlIHN0cmVuZ3RoIG9mIGdyYXZpdHkuXHJcbiAgICAgKiBAcGFyYW0gZ3Jhdml0eURpciBUaGUgZGlyZWN0aW9uIG9mIGdyYXZpdHkuIFNldCAoMCwgLTEsIDApIGZvciBzaW11bGF0aW5nIHRoZSBncmF2aXR5LiBTZXQgKDEsIDAsIDApIGZvciBzaW11bGF0aW5nIHRoZSB3aW5kLlxyXG4gICAgICogQHBhcmFtIGRyYWdGb3JjZSBUaGUgcmVzaXN0YW5jZSAoZGVjZWxlcmF0aW9uKSBvZiBhdXRvbWF0aWMgYW5pbWF0aW9uLlxyXG4gICAgICogQHBhcmFtIGNlbnRlciBUaGUgcmVmZXJlbmNlIHBvaW50IG9mIGEgc3dheWluZyBvYmplY3QgY2FuIGJlIHNldCBhdCBhbnkgbG9jYXRpb24gZXhjZXB0IHRoZSBvcmlnaW4uXHJcbiAgICAgKiAgICAgICAgICAgICAgIFdoZW4gaW1wbGVtZW50aW5nIFVJIG1vdmluZyB3aXRoIHdhcnAsXHJcbiAgICAgKiAgICAgICAgICAgICAgIHRoZSBwYXJlbnQgbm9kZSB0byBtb3ZlIHdpdGggd2FycCBjYW4gYmUgc3BlY2lmaWVkIGlmIHlvdSBkb24ndCB3YW50IHRvIG1ha2UgdGhlIG9iamVjdCBzd2F5aW5nIHdpdGggd2FycCBtb3ZlbWVudC5cclxuICAgICAqIEBwYXJhbSBoaXRSYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlIHVzZWQgZm9yIHRoZSBjb2xsaXNpb24gZGV0ZWN0aW9uIHdpdGggY29sbGlkZXJzLlxyXG4gICAgICogQHBhcmFtIGJvbmVzIFNwZWNpZnkgdGhlIG5vZGUgaW5kZXggb2YgdGhlIHJvb3QgYm9uZSBvZiB0aGUgc3dheWluZyBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0gY29sbGlkZXJHcm91cHMgU3BlY2lmeSB0aGUgaW5kZXggb2YgdGhlIGNvbGxpZGVyIGdyb3VwIGZvciBjb2xsaXNpb25zIHdpdGggc3dheWluZyBvYmplY3RzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNvbW1lbnQ6IHN0cmluZyxcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgc3RpZmZuZXNzOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGdyYXZpdHlQb3dlcjogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBncmF2aXR5RGlyOiBWZWN0b3IzLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBkcmFnRm9yY2U6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgY2VudGVyOiBOdWxsYWJsZTxUcmFuc2Zvcm1Ob2RlPixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaGl0UmFkaXVzOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGJvbmVzOiBBcnJheTxOdWxsYWJsZTxUcmFuc2Zvcm1Ob2RlPj4sXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNvbGxpZGVyR3JvdXBzOiBDb2xsaWRlckdyb3VwW11cclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQm9uZXMgPSB0aGlzLmJvbmVzLmZpbHRlcigoYm9uZSkgPT4gYm9uZSAhPT0gbnVsbCkgYXMgVHJhbnNmb3JtTm9kZVtdO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQm9uZXMuZm9yRWFjaCgoYm9uZSkgPT4ge1xyXG4gICAgICAgICAgICBbYm9uZV0uY29uY2F0KGJvbmUuZ2V0Q2hpbGRUcmFuc2Zvcm1Ob2RlcygpKS5mb3JFYWNoKChiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlcmxldHMucHVzaChuZXcgVlJNU3ByaW5nQm9uZUxvZ2ljKHRoaXMuY2VudGVyLCB0aGlzLmhpdFJhZGl1cywgYikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZHJhd0dpem1vKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBHaXptbygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwR2l6bW8oKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVCb25lcy5mb3JFYWNoKChib25lKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gYm9uZS5nZXRTY2VuZSgpO1xyXG4gICAgICAgICAgICBbYm9uZV0uY29uY2F0KGJvbmUuZ2V0Q2hpbGRUcmFuc2Zvcm1Ob2RlcygpKS5mb3JFYWNoKChiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib25lR2l6bW8gPSBNZXNoQnVpbGRlci5DcmVhdGVTcGhlcmUoXHJcbiAgICAgICAgICAgICAgICAgICAgYi5uYW1lICsgJ19ib25lR2l6bW8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudHM6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiB0aGlzLmhpdFJhZGl1cyAqIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0ID0gbmV3IFN0YW5kYXJkTWF0ZXJpYWwoYi5uYW1lICsgJ19ib25lR2l6bW9tYXQnLCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBtYXQuZW1pc3NpdmVDb2xvciA9IENvbG9yMy5SZWQoKTtcclxuICAgICAgICAgICAgICAgIG1hdC53aXJlZnJhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYm9uZUdpem1vLm1hdGVyaWFsID0gbWF0O1xyXG4gICAgICAgICAgICAgICAgYm9uZUdpem1vLnNldFBhcmVudChiKTtcclxuICAgICAgICAgICAgICAgIGJvbmVHaXptby5wb3NpdGlvbiA9IFZlY3RvcjMuWmVybygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb2xsaWRlckdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IGdyb3VwLnRyYW5zZm9ybS5nZXRTY2VuZSgpO1xyXG4gICAgICAgICAgICBncm91cC5jb2xsaWRlcnMuZm9yRWFjaCgoY29sbGlkZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwaGVyZSA9IGNvbGxpZGVyLnNwaGVyZTtcclxuICAgICAgICAgICAgICAgIGlmICghc3BoZXJlLmlzRW5hYmxlZChmYWxzZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGhlcmUuc2V0RW5hYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXQgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbChncm91cC50cmFuc2Zvcm0ubmFtZSArICdfY29sbGlkZXJHaXptb21hdCcsIHNjZW5lKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXQuZW1pc3NpdmVDb2xvciA9IENvbG9yMy5ZZWxsb3coKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXQud2lyZWZyYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzcGhlcmUubWF0ZXJpYWwgPSBtYXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGJvbmVzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlbHRhVGltZVxyXG4gICAgICovXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIC8vIHB1YmxpYyBhc3luYyB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIsIGJvbmVPcHRpb25zPzogQ29uc3RydWN0U3ByaW5nc09wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICBjb25zdCBvbGRPcHRpb25zID0gdGhpcy51cGRhdGVPcHRpb25zKGJvbmVPcHRpb25zKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RpZmZuZXNzID0gdGhpcy5zdGlmZm5lc3MgKiBkZWx0YVRpbWU7XHJcbiAgICAgICAgY29uc3QgZXh0ZXJuYWwgPSB0aGlzLmdyYXZpdHlEaXIuc2NhbGUodGhpcy5ncmF2aXR5UG93ZXIgKiBkZWx0YVRpbWUpO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMudmVybGV0cy5tYXA8UHJvbWlzZTx2b2lkPj4oKHZlcmxldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgICAgIHZlcmxldC51cGRhdGUoc3RpZmZuZXNzLCB0aGlzLmRyYWdGb3JjZSwgZXh0ZXJuYWwsIHRoaXMuY29sbGlkZXJHcm91cHMpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gUmVzdG9yZSBvcHRpb25zXHJcbiAgICAgICAgdGhpcy51cGRhdGVPcHRpb25zKG9sZE9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvKiBEbyBOb3RoaW5nICovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU9wdGlvbnMoYm9uZU9wdGlvbnM/OiBDb25zdHJ1Y3RTcHJpbmdzT3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGJhY2t1cE9wdGlvbnM6IENvbnN0cnVjdFNwcmluZ3NPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBzdGlmZm5lc3M6IHRoaXMuc3RpZmZuZXNzLFxyXG4gICAgICAgICAgICBncmF2aXR5UG93ZXI6IHRoaXMuZ3Jhdml0eVBvd2VyLFxyXG4gICAgICAgICAgICBncmF2aXR5RGlyOiB0aGlzLmdyYXZpdHlEaXIuY2xvbmUoKSxcclxuICAgICAgICAgICAgZHJhZ0ZvcmNlOiB0aGlzLmRyYWdGb3JjZSxcclxuICAgICAgICAgICAgaGl0UmFkaXVzOiB0aGlzLmhpdFJhZGl1cyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3RpZmZuZXNzID0gYm9uZU9wdGlvbnM/LnN0aWZmbmVzcyB8fCB0aGlzLnN0aWZmbmVzcztcclxuICAgICAgICB0aGlzLmdyYXZpdHlQb3dlciA9IGJvbmVPcHRpb25zPy5ncmF2aXR5UG93ZXIgfHwgdGhpcy5ncmF2aXR5UG93ZXI7XHJcbiAgICAgICAgdGhpcy5ncmF2aXR5RGlyID0gYm9uZU9wdGlvbnM/LmdyYXZpdHlEaXIgfHwgdGhpcy5ncmF2aXR5RGlyO1xyXG4gICAgICAgIHRoaXMuZHJhZ0ZvcmNlID0gYm9uZU9wdGlvbnM/LmRyYWdGb3JjZSB8fCB0aGlzLmRyYWdGb3JjZTtcclxuICAgICAgICB0aGlzLmhpdFJhZGl1cyA9IGJvbmVPcHRpb25zPy5oaXRSYWRpdXMgfHwgdGhpcy5oaXRSYWRpdXM7XHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrdXBPcHRpb25zO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgTWF0ZXJpYWwgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsJztcclxuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgSUdMVEZMb2FkZXJFeHRlbnNpb24sIElNYXRlcmlhbCwgSU1lc2hQcmltaXRpdmUgfSBmcm9tICdAYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAnO1xyXG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSAnQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wJztcclxuaW1wb3J0IHsgVlJNTWFuYWdlciB9IGZyb20gJy4vdnJtLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBWUk1NYXRlcmlhbEdlbmVyYXRvciB9IGZyb20gJy4vdnJtLW1hdGVyaWFsLWdlbmVyYXRvcic7XHJcblxyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuaW1wb3J0IHsgR0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyIH0gZnJvbSAnLi4vLi4vbG9hZGVyLW9ic2VydmVyJztcclxuaW1wb3J0IHsgVjNEQ29yZSB9IGZyb20gJy4uLy4uLy4uL2luZGV4JztcclxuXHJcbi8qKlxyXG4gKiBgZXh0ZW5zaW9uc2Ag44Gr5YWl44KL5ouh5by144Kt44O8XHJcbiAqL1xyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuLy8gY29uc3QgTkFNRSA9ICdWUk0nO1xyXG5cclxuLyoqXHJcbiAqIFZSTSDmi6HlvLXjgpLlh6bnkIbjgZnjgotcclxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS92cm0tYy92cm0tc3BlY2lmaWNhdGlvbi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzAuMClcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWUk1Mb2FkZXJFeHRlbnNpb24gaW1wbGVtZW50cyBJR0xURkxvYWRlckV4dGVuc2lvbiB7XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTkFNRSA9ICdWUk0nO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9IFZSTUxvYWRlckV4dGVuc2lvbi5OQU1FO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZW5hYmxlZCA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIOOBk+OBriBNZXNoIGluZGV4IOS7pemZjeOBjOiqreOBv+i+vOOBv+WvvuixoVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1lc2hlc0Zyb20gPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiDjgZPjga4gVHJhbnNmb3JtTm9kZSBpbmRleCDku6XpmY3jgYzoqq3jgb/ovrzjgb/lr77osaFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Ob2Rlc0Zyb20gPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiDjgZPjga4gTWF0ZXJpYWwgaW5kZXgg5Lul6ZmN44GM6Kqt44G/6L6844G/5a++6LGhXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWF0ZXJpYWxzRnJvbSA9IDA7XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZGVyIG9ic2VydmVyc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvYWRlck9ic2VydmVyczogR0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyW10gPSBbXTtcclxuICAgIHByaXZhdGUgb25Mb2FkZWRDYWxsQmFjazogRnVuY3Rpb247XHJcbiAgICAvKipcclxuICAgICAqIFZSTSBNYW5hZ2VyIGZyb20gdGhpcyBsb2FkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1hbmFnZXI6IFZSTU1hbmFnZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIGxvYWRlcjogR0xURkxvYWRlciwgcHJpdmF0ZSB2M0RDb3JlOiBWM0RDb3JlKSB7XHJcbiAgICAgICAgLy8gR0xURkxvYWRlciBoYXMgYWxyZWFkeSBhZGRlZCByb290TWVzaCBhcyBfX3Jvb3RfXyBiZWZvcmUgbG9hZCBleHRlbnNpb25cclxuICAgICAgICAvLyBAc2VlIGdsVEZMb2FkZXIuX2xvYWREYXRhXHJcbiAgICAgICAgdGhpcy5tZXNoZXNGcm9tID0gdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLm1lc2hlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtTm9kZXNGcm9tID0gdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLnRyYW5zZm9ybU5vZGVzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsc0Zyb20gPSB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUubWF0ZXJpYWxzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgdGhpcy5hZGRMb2FkZXJPYnNlcnZlcih0aGlzLnYzRENvcmUpO1xyXG4gICAgICAgIHRoaXMub25Mb2FkZWRDYWxsQmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgdjNEQ29yZS5hZGRWUk1NYW5hZ2VyKHRoaXMubWFuYWdlcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2M0RDb3JlLmFkZE9uTG9hZENvbXBsZXRlQ2FsbGJhY2tzKHRoaXMub25Mb2FkZWRDYWxsQmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICAodGhpcy5sb2FkZXIgYXMgYW55KSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIHRoaXMubG9hZGVyT2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy52M0RDb3JlLnJlbW92ZU9uTG9hZENvbXBsZXRlQ2FsbGJhY2sodGhpcy5vbkxvYWRlZENhbGxCYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblJlYWR5KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zIHx8ICF0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnNbVlJNTG9hZGVyRXh0ZW5zaW9uLk5BTUVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gY29uc3Qgc2NlbmUgPSB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmU7XHJcbiAgICAgICAgLy8gY29uc3QgbWFuYWdlciA9IG5ldyBWUk1NYW5hZ2VyKHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9uc1tWUk1Mb2FkZXJFeHRlbnNpb24uTkFNRV0sIHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZSwgdGhpcy5tZXNoZXNGcm9tLCB0aGlzLnRyYW5zZm9ybU5vZGVzRnJvbSwgdGhpcy5tYXRlcmlhbHNGcm9tKTtcclxuICAgICAgICB0aGlzLm1hbmFnZXIgPSBuZXcgVlJNTWFuYWdlcih0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnNbVlJNTG9hZGVyRXh0ZW5zaW9uLk5BTUVdLCB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUsIHRoaXMubWVzaGVzRnJvbSwgdGhpcy50cmFuc2Zvcm1Ob2Rlc0Zyb20sIHRoaXMubWF0ZXJpYWxzRnJvbSk7XHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gc2NlbmUubWV0YWRhdGEgPSBzY2VuZS5tZXRhZGF0YSB8fCB7fTtcclxuICAgICAgICAvLyBzY2VuZS5tZXRhZGF0YS52cm1NYW5hZ2VycyA9IHNjZW5lLm1ldGFkYXRhLnZybU1hbmFnZXJzIHx8IFtdO1xyXG4gICAgICAgIC8vIHNjZW5lLm1ldGFkYXRhLnZybU1hbmFnZXJzLnB1c2gobWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLm9uRGlzcG9zZU9ic2VydmFibGUuYWRkKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gU2NlbmUgZGlzcG9zZSDmmYLjgasgTWFuYWdlciDjgoLnoLTmo4TjgZnjgotcclxuICAgICAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgICAgIC8vIG1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUubWV0YWRhdGEudnJtTWFuYWdlcnMgPSBbXTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gSW5mb3JtIG9ic2VydmVyc1xyXG4gICAgICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgdGhpcy5sb2FkZXJPYnNlcnZlcnMpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIub25Mb2FkUmVhZHkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgX2xvYWRWZXJ0ZXhEYXRhQXN5bmMoY29udGV4dDogc3RyaW5nLCBwcmltaXRpdmU6IElNZXNoUHJpbWl0aXZlLCBiYWJ5bG9uTWVzaDogTWVzaCkge1xyXG4gICAgICAgIGlmICghcHJpbWl0aXZlLmV4dHJhcyB8fCAhcHJpbWl0aXZlLmV4dHJhcy50YXJnZXROYW1lcykge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g44G+44GgIE1vcnBoVGFyZ2V0IOOBjOeUn+aIkOOBleOCjOOBpuOBhOOBquOBhOOBruOBp+OAgeODoeOCv+aDheWgseOBq+ODouODvOODleOCv+ODvOOCsuODg+ODiOaDheWgseOCkuWFpeOCjOOBpuOBiuOBj1xyXG4gICAgICAgIGJhYnlsb25NZXNoLm1ldGFkYXRhID0gYmFieWxvbk1lc2gubWV0YWRhdGEgfHwge307XHJcbiAgICAgICAgYmFieWxvbk1lc2gubWV0YWRhdGEudnJtVGFyZ2V0TmFtZXMgPSBwcmltaXRpdmUuZXh0cmFzLnRhcmdldE5hbWVzO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGluaGVyaXRkb2NcclxuICAgICAqL1xyXG4gICAgcHVibGljIF9sb2FkTWF0ZXJpYWxBc3luYyhjb250ZXh0OiBzdHJpbmcsIG1hdGVyaWFsOiBJTWF0ZXJpYWwsIG1lc2g6IE1lc2gsIGJhYnlsb25EcmF3TW9kZTogbnVtYmVyLCBhc3NpZ246IChiYWJ5bG9uTWF0ZXJpYWw6IE1hdGVyaWFsKSA9PiB2b2lkKTogTnVsbGFibGU8UHJvbWlzZTxNYXRlcmlhbD4+IHtcclxuICAgICAgICAvLyDjgrjjgqfjg43jg6zjg7zjgr/jgafjg57jg4bjg6rjgqLjg6vjgpLnlJ/miJDjgZnjgotcclxuICAgICAgICByZXR1cm4gbmV3IFZSTU1hdGVyaWFsR2VuZXJhdG9yKHRoaXMubG9hZGVyKS5nZW5lcmF0ZShjb250ZXh0LCBtYXRlcmlhbCwgbWVzaCwgYmFieWxvbkRyYXdNb2RlLCBhc3NpZ24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgb2JzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZExvYWRlck9ic2VydmVyKG9ic2VydmVyOiBHTFRGTG9hZGVyRXh0ZW5zaW9uT2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLmxvYWRlck9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbi8vIOODreODvOODgOODvOOBq+eZu+mMsuOBmeOCi1xyXG4vLyBHTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBWUk0obG9hZGVyKSk7XHJcbiIsImltcG9ydCB7IFNjZW5lTG9hZGVyIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL0xvYWRpbmcvc2NlbmVMb2FkZXInO1xyXG5pbXBvcnQgeyBHTFRGRmlsZUxvYWRlciB9IGZyb20gJ0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGL2dsVEZGaWxlTG9hZGVyJztcclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbmltcG9ydCB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgVlJNTWFuYWdlciB9IGZyb20gJy4vdnJtLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9zY2VuZSc7XHJcbmltcG9ydCB7IElTY2VuZUxvYWRlclByb2dyZXNzRXZlbnQgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9zY2VuZUxvYWRlcic7XHJcblxyXG4vKipcclxuICogVlJNL1ZDSSDjg5XjgqHjgqTjg6vjgpLoqq3jgb/ovrzjgoHjgovjgojjgYbjgavjgZnjgotcclxuICog5ouh5by15a2Q44KS5aSJ5pu044GX44Gf44Gg44GRXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVlJNRmlsZUxvYWRlciBleHRlbmRzIEdMVEZGaWxlTG9hZGVyIHtcclxuICAgIHB1YmxpYyBuYW1lID0gJ3ZybSc7XHJcbiAgICBwdWJsaWMgZXh0ZW5zaW9ucyA9IHtcclxuICAgICAgICAnLnZybSc6IHsgaXNCaW5hcnk6IHRydWUgfSxcclxuICAgICAgICAnLnZjaSc6IHsgaXNCaW5hcnk6IHRydWUgfSxcclxuICAgIH07XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyB1cmk6IHN0cmluZztcclxuICAgIHB1YmxpYyB2cm1NYW5hZ2VyOiBOdWxsYWJsZTxWUk1NYW5hZ2VyPiA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVBsdWdpbigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZSTUZpbGVMb2FkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBsb2FkQXN5bmMoc2NlbmU6IFNjZW5lLCBkYXRhOiBhbnksIHJvb3RVcmw6IHN0cmluZywgb25Qcm9ncmVzcz86IChldmVudDogSVNjZW5lTG9hZGVyUHJvZ3Jlc3NFdmVudCkgPT4gdm9pZCwgZmlsZU5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnVyaSA9IHJvb3RVcmw7XHJcbiAgICAgICAgaWYgKGZpbGVOYW1lKSB0aGlzLnVyaSArPSBmaWxlTmFtZTtcclxuICAgICAgICByZXR1cm4gc3VwZXIubG9hZEFzeW5jKHNjZW5lLCBkYXRhLCByb290VXJsLCBvblByb2dyZXNzLCBmaWxlTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG4vLyBpZiAoU2NlbmVMb2FkZXIpIHtcclxuLy8gICAgIFNjZW5lTG9hZGVyLlJlZ2lzdGVyUGx1Z2luKG5ldyBWUk1GaWxlTG9hZGVyKCkpO1xyXG4vLyB9XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgSVZSTVZlY3RvcjMge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgejogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk1cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTSB7XHJcbiAgICBleHBvcnRlclZlcnNpb246IHN0cmluZztcclxuICAgIHNwZWNWZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBtZXRhOiBJVlJNTWV0YTtcclxuICAgIGh1bWFub2lkOiBJVlJNSHVtYW5vaWQ7XHJcbiAgICBmaXJzdFBlcnNvbjogSVZSTUZpcnN0UGVyc29uO1xyXG4gICAgYmxlbmRTaGFwZU1hc3RlcjogSVZSTUJsZW5kU2hhcGVNYXN0ZXI7XHJcbiAgICBzZWNvbmRhcnlBbmltYXRpb246IElWUk1TZWNvbmRhcnlBbmltYXRpb247XHJcbiAgICBtYXRlcmlhbFByb3BlcnRpZXM6IElWUk1NYXRlcmlhbFByb3BlcnR5W107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBleHRlbnNpb25zLlZSTS5tZXRhXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NZXRhIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBhdXRob3I6IHN0cmluZztcclxuICAgIGNvbnRhY3RJbmZvcm1hdGlvbj86IHN0cmluZztcclxuICAgIHJlZmVyZW5jZT86IHN0cmluZztcclxuICAgIHRleHR1cmU/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBleHRlbnNpb25zLlZSTS5odW1hbm9pZFxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNSHVtYW5vaWQge1xyXG4gICAgaHVtYW5Cb25lczogSVZSTUh1bWFub2lkQm9uZVtdO1xyXG4gICAgYXJtU3RyZXRjaD86IG51bWJlcjtcclxuICAgIGxlZ1N0cmV0Y2g/OiBudW1iZXI7XHJcbiAgICB1cHBlckFybVR3aXN0PzogbnVtYmVyO1xyXG4gICAgbG93ZXJBcm1Ud2lzdD86IG51bWJlcjtcclxuICAgIHVwcGVyTGVnVHdpc3Q/OiBudW1iZXI7XHJcbiAgICBsb3dlckxlZ1R3aXN0PzogbnVtYmVyO1xyXG4gICAgZmVldFNwYWNpbmc/OiBudW1iZXI7XHJcbiAgICBoYXNUcmFuc2xhdGlvbkRvRj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUh1bWFub2lkQm9uZSB7XHJcbiAgICBib25lOiBzdHJpbmc7XHJcbiAgICBub2RlOiBudW1iZXI7XHJcbiAgICB1c2VEZWZhdWx0VmFsdWVzOiBib29sZWFuO1xyXG4gICAgbWluPzogSVZSTVZlY3RvcjM7XHJcbiAgICBtYXg/OiBJVlJNVmVjdG9yMztcclxuICAgIGNlbnRlcj86IElWUk1WZWN0b3IzO1xyXG4gICAgYXhpc0xlbmd0aD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNRmlyc3RQZXJzb25NZXNoQW5ub3RhdGlvbiB7XHJcbiAgICBtZXNoOiBudW1iZXI7XHJcbiAgICBmaXJzdFBlcnNvbkZsYWc6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNRmlyc3RQZXJzb25EZWdyZWVNYXAge1xyXG4gICAgY3VydmU6IG51bWJlcltdO1xyXG4gICAgeFJhbmdlOiBudW1iZXI7XHJcbiAgICB5UmFuZ2U6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIGV4dGVuc2lvbnMuVlJNLmZpcnN0UGVyc29uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1GaXJzdFBlcnNvbiB7XHJcbiAgICBmaXJzdFBlcnNvbkJvbmU6IG51bWJlcjtcclxuICAgIGZpcnN0UGVyc29uQm9uZU9mZnNldDogSVZSTVZlY3RvcjM7XHJcbiAgICBtZXNoQW5ub3RhdGlvbnM6IElWUk1GaXJzdFBlcnNvbk1lc2hBbm5vdGF0aW9uW107XHJcbiAgICBsb29rQXRUeXBlTmFtZTogJ0JvbmUnIHwgJ0JsZW5kU2hhcGUnO1xyXG4gICAgbG9va0F0SG9yaXpvbnRhbElubmVyOiBJVlJNRmlyc3RQZXJzb25EZWdyZWVNYXA7XHJcbiAgICBsb29rQXRIb3Jpem9udGFsT3V0ZXI6IElWUk1GaXJzdFBlcnNvbkRlZ3JlZU1hcDtcclxuICAgIGxvb2tBdFZlcnRpY2FsRG93bjogSVZSTUZpcnN0UGVyc29uRGVncmVlTWFwO1xyXG4gICAgbG9va0F0VmVydGljYWxVcDogSVZSTUZpcnN0UGVyc29uRGVncmVlTWFwO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk0uYmxlbmRTaGFwZU1hc3RlclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNQmxlbmRTaGFwZU1hc3RlciB7XHJcbiAgICBibGVuZFNoYXBlR3JvdXBzOiBJVlJNQmxlbmRTaGFwZUdyb3VwW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUJsZW5kU2hhcGVHcm91cCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwcmVzZXROYW1lOiBzdHJpbmc7XHJcbiAgICBiaW5kczogSVZSTUJsZW5kU2hhcGVCaW5kW107XHJcbiAgICBtYXRlcmlhbFZhbHVlczogSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmRbXTtcclxuICAgIGlzQmluYXJ5OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1CbGVuZFNoYXBlQmluZCB7XHJcbiAgICBtZXNoOiBudW1iZXI7XHJcbiAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgd2VpZ2h0OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmQge1xyXG4gICAgbWF0ZXJpYWxOYW1lOiBzdHJpbmc7XHJcbiAgICBwcm9wZXJ0eU5hbWU6IHN0cmluZztcclxuICAgIHRhcmdldFZhbHVlOiBudW1iZXJbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uU3ByaW5nIHtcclxuICAgIGNvbW1lbnQ6IHN0cmluZztcclxuICAgIHN0aWZmaW5lc3M6IG51bWJlcjtcclxuICAgIGdyYXZpdHlQb3dlcjogbnVtYmVyO1xyXG4gICAgZ3Jhdml0eURpcjogSVZSTVZlY3RvcjM7XHJcbiAgICBkcmFnRm9yY2U6IG51bWJlcjtcclxuICAgIGNlbnRlcjogbnVtYmVyO1xyXG4gICAgaGl0UmFkaXVzOiBudW1iZXI7XHJcbiAgICBib25lczogbnVtYmVyW107XHJcbiAgICBjb2xsaWRlckdyb3VwczogbnVtYmVyW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTVNlY29uZGFyeUFuaW1hdGlvbkNvbGxpZGVyIHtcclxuICAgIG9mZnNldDogSVZSTVZlY3RvcjM7XHJcbiAgICByYWRpdXM6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uQ29sbGlkZXJHcm91cCB7XHJcbiAgICBub2RlOiBudW1iZXI7XHJcbiAgICBjb2xsaWRlcnM6IElWUk1TZWNvbmRhcnlBbmltYXRpb25Db2xsaWRlcltdO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk0uc2Vjb25kYXJ5QW5pbWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1TZWNvbmRhcnlBbmltYXRpb24ge1xyXG4gICAgYm9uZUdyb3VwczogSVZSTVNlY29uZGFyeUFuaW1hdGlvblNwcmluZ1tdO1xyXG4gICAgY29sbGlkZXJHcm91cHM6IElWUk1TZWNvbmRhcnlBbmltYXRpb25Db2xsaWRlckdyb3VwW107XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyIHtcclxuICAgIFZSTV9VU0VfR0xURlNIQURFUiA9ICdWUk1fVVNFX0dMVEZTSEFERVInLFxyXG4gICAgVlJNTVRvb24gPSAnVlJNL01Ub29uJyxcclxuICAgIFZSTVVubGl0VHJhbnNwYXJlbnRaV3JpdGUgPSAnVlJNL1VubGl0VHJhbnNwYXJlbnRaV3JpdGUnLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NYXRlcmlhbFByb3BlcnR5RmxvYXRQcm9wZXJ0aWVzIHtcclxuICAgIF9DdXRvZmY/OiBudW1iZXI7XHJcbiAgICBfQnVtcFNjYWxlPzogbnVtYmVyO1xyXG4gICAgX1JlY2VpdmVTaGFkb3dSYXRlPzogbnVtYmVyO1xyXG4gICAgX1NoYWRpbmdHcmFkZVJhdGU/OiBudW1iZXI7XHJcbiAgICBfU2hhZGVTaGlmdD86IG51bWJlcjtcclxuICAgIF9TaGFkZVRvb255PzogbnVtYmVyO1xyXG4gICAgX0xpZ2h0Q29sb3JBdHRlbnVhdGlvbj86IG51bWJlcjtcclxuICAgIF9JbmRpcmVjdExpZ2h0SW50ZW5zaXR5PzogbnVtYmVyO1xyXG4gICAgX1JpbUxpZ2h0aW5nTWl4PzogbnVtYmVyO1xyXG4gICAgX1JpbUZyZXNuZWxQb3dlcj86IG51bWJlcjtcclxuICAgIF9SaW1MaWZ0PzogbnVtYmVyO1xyXG4gICAgX091dGxpbmVXaWR0aD86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U/OiBudW1iZXI7XHJcbiAgICBfT3V0bGluZUxpZ2h0aW5nTWl4PzogbnVtYmVyO1xyXG4gICAgX1V2QW5pbVNjcm9sbFg/OiBudW1iZXI7XHJcbiAgICBfVXZBbmltU2Nyb2xsWT86IG51bWJlcjtcclxuICAgIF9VdkFuaW1Sb3RhdGlvbj86IG51bWJlcjtcclxuICAgIF9EZWJ1Z01vZGU/OiBudW1iZXI7XHJcbiAgICBfQmxlbmRNb2RlPzogbnVtYmVyO1xyXG4gICAgX091dGxpbmVXaWR0aE1vZGU/OiBudW1iZXI7XHJcbiAgICBfT3V0bGluZUNvbG9yTW9kZT86IG51bWJlcjtcclxuICAgIF9DdWxsTW9kZT86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lQ3VsbE1vZGU/OiBudW1iZXI7XHJcbiAgICBfU3JjQmxlbmQ/OiBudW1iZXI7XHJcbiAgICBfRHN0QmxlbmQ/OiBudW1iZXI7XHJcbiAgICBfWldyaXRlPzogbnVtYmVyO1xyXG4gICAgW3Byb3A6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHkgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTU1hdGVyaWFsUHJvcGVydHlWZWN0b3JQcm9wZXJ0aWVzIHtcclxuICAgIF9Db2xvcj86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1NoYWRlQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9NYWluVGV4PzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfU2hhZGVUZXh0dXJlPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfQnVtcE1hcD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1JlY2VpdmVTaGFkb3dUZXh0dXJlPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfU2hhZGluZ0dyYWRlVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1JpbUNvbG9yPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfUmltVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1NwaGVyZUFkZD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX0VtaXNzaW9uQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9FbWlzc2lvbk1hcD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX091dGxpbmVXaWR0aFRleHR1cmU/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9PdXRsaW5lQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9VdkFuaW1NYXNrVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgW3Byb3A6IHN0cmluZ106IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5IHwgdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NYXRlcmlhbFByb3BlcnR5VGV4dHVyZVByb3BlcnRpZXMge1xyXG4gICAgX01haW5UZXg/OiBudW1iZXI7XHJcbiAgICBfU2hhZGVUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX0J1bXBNYXA/OiBudW1iZXI7XHJcbiAgICBfUmVjZWl2ZVNoYWRvd1RleHR1cmU/OiBudW1iZXI7XHJcbiAgICBfU2hhZGluZ0dyYWRlVGV4dHVyZT86IG51bWJlcjtcclxuICAgIF9SaW1UZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX1NwaGVyZUFkZD86IG51bWJlcjtcclxuICAgIF9FbWlzc2lvbk1hcD86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lV2lkdGhUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX1V2QW5pbU1hc2tUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgW3Byb3A6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eUtleXdvcmRNYXAge1xyXG4gICAgX05PUk1BTE1BUD86IGJvb2xlYW47XHJcbiAgICBfQUxQSEFURVNUX09OPzogYm9vbGVhbjtcclxuICAgIF9BTFBIQUJMRU5EX09OPzogYm9vbGVhbjtcclxuICAgIF9BTFBIQVBSRU1VTFRJUExZX09OPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVRhZ01hcCB7XHJcbiAgICBSZW5kZXJUeXBlPzogJ09wYXF1ZScgfCAnVHJhbnNwYXJlbnRDdXRvdXQnIHwgJ1RyYW5zcGFyZW50JztcclxufVxyXG5cclxuLyoqXHJcbiAqIGV4dGVuc2lvbnMuVlJNLm1hdGVyaWFsUHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eSB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBzaGFkZXI6IElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyO1xyXG4gICAgcmVuZGVyUXVldWU6IG51bWJlcjtcclxuICAgIGZsb2F0UHJvcGVydGllczogSVZSTU1hdGVyaWFsUHJvcGVydHlGbG9hdFByb3BlcnRpZXM7XHJcbiAgICB2ZWN0b3JQcm9wZXJ0aWVzOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVZlY3RvclByb3BlcnRpZXM7XHJcbiAgICB0ZXh0dXJlUHJvcGVydGllczogSVZSTU1hdGVyaWFsUHJvcGVydHlUZXh0dXJlUHJvcGVydGllcztcclxuICAgIGtleXdvcmRNYXA6IElWUk1NYXRlcmlhbFByb3BlcnR5S2V5d29yZE1hcDtcclxuICAgIHRhZ01hcDogSVZSTU1hdGVyaWFsUHJvcGVydHlUYWdNYXA7XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoJztcclxuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHR5cGUgeyBNb3JwaFRhcmdldCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9Nb3JwaC9tb3JwaFRhcmdldCc7XHJcbmltcG9ydCB0eXBlIHsgU2NlbmUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvc2NlbmUnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgU3ByaW5nQm9uZUNvbnRyb2xsZXIgfSBmcm9tICcuL3NlY29uZGFyeS1hbmltYXRpb24vc3ByaW5nLWJvbmUtY29udHJvbGxlcic7XHJcbmltcG9ydCB7IEh1bWFub2lkQm9uZSB9IGZyb20gJy4vaHVtYW5vaWQtYm9uZSc7XHJcbmltcG9ydCB0eXBlIHsgSVZSTSB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlciB9IGZyb20gJy4vbWF0ZXJpYWwtdmFsdWUtYmluZGluZy1tZXJnZXInO1xyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuaW1wb3J0IHR5cGUgeyBOb2RlLCBUYXJnZXRDYW1lcmEgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUnO1xyXG5cclxuaW50ZXJmYWNlIElzQmluYXJ5TWFwIHtcclxuICAgIFttb3JwaE5hbWU6IHN0cmluZ106IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBNb3JwaFRhcmdldFNldHRpbmcge1xyXG4gICAgdGFyZ2V0OiBNb3JwaFRhcmdldDtcclxuICAgIHdlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTW9ycGhUYXJnZXRNYXAge1xyXG4gICAgW21vcnBoTmFtZTogc3RyaW5nXTogTW9ycGhUYXJnZXRTZXR0aW5nW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcCB7XHJcbiAgICBbbW9ycGhOYW1lOiBzdHJpbmddOiBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFRyYW5zZm9ybU5vZGVNYXAge1xyXG4gICAgW2h1bWFuQm9uZU5hbWU6IHN0cmluZ106IFRyYW5zZm9ybU5vZGU7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUcmFuc2Zvcm1Ob2RlQ2FjaGUge1xyXG4gICAgW25vZGVJbmRleDogbnVtYmVyXTogVHJhbnNmb3JtTm9kZTtcclxufVxyXG5cclxuaW50ZXJmYWNlIE1lc2hDYWNoZSB7XHJcbiAgICBbbWVzaEluZGV4OiBudW1iZXJdOiBNZXNoW107XHJcbn1cclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG5leHBvcnQgY2xhc3MgbW9ycGhpbmdUYXJnZXRQcm9wZXJ0eSB7XHJcbiAgICBwcml2YXRlIF92YWx1ZTogbnVtYmVyO1xyXG4gICAgZ2V0IHZhbHVlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB2YWx1ZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2YWx1ZSkpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlci5tb3JwaGluZyh0aGlzLmxhYmVsLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIHByaXZhdGUgbWFuYWdlcjogVlJNTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuaW50ZXJmYWNlIE1vcnBoVGFyZ2V0UHJvcGVydHlNYXAge1xyXG4gICAgW21vcnBoTmFtZTogc3RyaW5nXTogbW9ycGhpbmdUYXJnZXRQcm9wZXJ0eTtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zZm9ybU5vZGVUcmVlTm9kZSB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGFyZW50OiBudW1iZXI7XHJcbiAgICBjaGlsZHJlbj86IFRyYW5zZm9ybU5vZGVUcmVlTm9kZVtdO1xyXG59XHJcblxyXG4vKipcclxuICogVW5pdHkgSHVtYW5vaWQgQm9uZSDlkI1cclxuICovXHJcbmV4cG9ydCB0eXBlIEh1bWFuQm9uZU5hbWUgPVxyXG4gICAgfCAnaGlwcydcclxuICAgIHwgJ2xlZnRVcHBlckxlZydcclxuICAgIHwgJ3JpZ2h0VXBwZXJMZWcnXHJcbiAgICB8ICdsZWZ0TG93ZXJMZWcnXHJcbiAgICB8ICdyaWdodExvd2VyTGVnJ1xyXG4gICAgfCAnbGVmdEZvb3QnXHJcbiAgICB8ICdyaWdodEZvb3QnXHJcbiAgICB8ICdzcGluZSdcclxuICAgIHwgJ2NoZXN0J1xyXG4gICAgfCAnbmVjaydcclxuICAgIHwgJ2hlYWQnXHJcbiAgICB8ICdsZWZ0U2hvdWxkZXInXHJcbiAgICB8ICdyaWdodFNob3VsZGVyJ1xyXG4gICAgfCAnbGVmdFVwcGVyQXJtJ1xyXG4gICAgfCAncmlnaHRVcHBlckFybSdcclxuICAgIHwgJ2xlZnRMb3dlckFybSdcclxuICAgIHwgJ3JpZ2h0TG93ZXJBcm0nXHJcbiAgICB8ICdsZWZ0SGFuZCdcclxuICAgIHwgJ3JpZ2h0SGFuZCdcclxuICAgIHwgJ2xlZnRUb2VzJ1xyXG4gICAgfCAncmlnaHRUb2VzJ1xyXG4gICAgfCAnbGVmdEV5ZSdcclxuICAgIHwgJ3JpZ2h0RXllJ1xyXG4gICAgfCAnamF3J1xyXG4gICAgfCAnbGVmdFRodW1iUHJveGltYWwnXHJcbiAgICB8ICdsZWZ0VGh1bWJJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdsZWZ0VGh1bWJEaXN0YWwnXHJcbiAgICB8ICdsZWZ0SW5kZXhQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRJbmRleEludGVybWVkaWF0ZSdcclxuICAgIHwgJ2xlZnRJbmRleERpc3RhbCdcclxuICAgIHwgJ2xlZnRNaWRkbGVQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRNaWRkbGVJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdsZWZ0TWlkZGxlRGlzdGFsJ1xyXG4gICAgfCAnbGVmdFJpbmdQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRSaW5nSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAnbGVmdFJpbmdEaXN0YWwnXHJcbiAgICB8ICdsZWZ0TGl0dGxlUHJveGltYWwnXHJcbiAgICB8ICdsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAnbGVmdExpdHRsZURpc3RhbCdcclxuICAgIHwgJ3JpZ2h0VGh1bWJQcm94aW1hbCdcclxuICAgIHwgJ3JpZ2h0VGh1bWJJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdyaWdodFRodW1iRGlzdGFsJ1xyXG4gICAgfCAncmlnaHRJbmRleFByb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRJbmRleEludGVybWVkaWF0ZSdcclxuICAgIHwgJ3JpZ2h0SW5kZXhEaXN0YWwnXHJcbiAgICB8ICdyaWdodE1pZGRsZVByb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRNaWRkbGVJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdyaWdodE1pZGRsZURpc3RhbCdcclxuICAgIHwgJ3JpZ2h0UmluZ1Byb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRSaW5nSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAncmlnaHRSaW5nRGlzdGFsJ1xyXG4gICAgfCAncmlnaHRMaXR0bGVQcm94aW1hbCdcclxuICAgIHwgJ3JpZ2h0TGl0dGxlSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAncmlnaHRMaXR0bGVEaXN0YWwnXHJcbiAgICB8ICd1cHBlckNoZXN0J1xyXG4gICAgfCBzdHJpbmc7XHJcblxyXG4vKipcclxuICogVlJNIOOCreODo+ODqeOCr+OCv+ODvOOCkuWLleS9nOOBleOBm+OCi+OBn+OCgeOBruODnuODjeODvOOCuOODo1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZSTU1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBpc0JpbmFyeU1vcnBoTWFwOiBJc0JpbmFyeU1hcCA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtb3JwaFRhcmdldE1hcDogTW9ycGhUYXJnZXRNYXAgPSB7fTtcclxuICAgIHByaXZhdGUgbWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXJNYXA6IE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwID0ge307XHJcbiAgICBwcml2YXRlIHByZXNldE1vcnBoVGFyZ2V0TWFwOiBNb3JwaFRhcmdldE1hcCA9IHt9O1xyXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Ob2RlTWFwOiBUcmFuc2Zvcm1Ob2RlTWFwID0ge307XHJcbiAgICBwcml2YXRlIHRyYW5zZm9ybU5vZGVDYWNoZTogVHJhbnNmb3JtTm9kZUNhY2hlID0ge307XHJcbiAgICBwcml2YXRlIG1lc2hDYWNoZTogTWVzaENhY2hlID0ge307XHJcbiAgICBwcml2YXRlIF9odW1hbm9pZEJvbmU6IEh1bWFub2lkQm9uZTtcclxuICAgIHByaXZhdGUgX3Jvb3RNZXNoOiBNZXNoO1xyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICBwdWJsaWMgc3RhdGljIFJPT1RfTUVTSF9QUkVGSVggPSAndnJtX3Jvb3RfJztcclxuICAgIHByaXZhdGUgX3Jvb3RTa2VsZXRvbjogTm9kZTtcclxuICAgIHByaXZhdGUgX2NhbWVyYXM6IFRhcmdldENhbWVyYVtdID0gW107XHJcbiAgICBnZXQgY2FtZXJhcygpOiBUYXJnZXRDYW1lcmFbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZENhbWVyYShjYW1lcmE6IFRhcmdldENhbWVyYSkge1xyXG4gICAgICAgIHRoaXMuX2NhbWVyYXMucHVzaChjYW1lcmEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldENhbWVyYXMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FtZXJhcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2Vjb25kYXJ5IEFuaW1hdGlvbiDjgajjgZfjgablrprnvqnjgZXjgozjgabjgYTjgosgVlJNIFNwcmluZyBCb25lIOOBruOCs+ODs+ODiOODreODvOODqVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3ByaW5nQm9uZUNvbnRyb2xsZXI6IFNwcmluZ0JvbmVDb250cm9sbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBleHQgZ2xURi5leHRlbnNpb25zLlZSTSDjga7kuK3ouqsganNvblxyXG4gICAgICogQHBhcmFtIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0gbWVzaGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga7jg6Hjg4Pjgrfjg6XjgYzjgZPjga4gVlJNIOOBq+ipsuW9k+OBmeOCi1xyXG4gICAgICogQHBhcmFtIHRyYW5zZm9ybU5vZGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga4gVHJhbnNmb3JtTm9kZSDjgYzjgZPjga4gVlJNIOOBq+ipsuW9k+OBmeOCi1xyXG4gICAgICogQHBhcmFtIG1hdGVyaWFsc05vZGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga4gTWF0ZXJpYWwg44GM44GT44GuIFZSTSDjgavoqbLlvZPjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBleHQ6IElWUk0sXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHNjZW5lOiBTY2VuZSxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG1lc2hlc0Zyb206IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHRyYW5zZm9ybU5vZGVzRnJvbTogbnVtYmVyLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgbWF0ZXJpYWxzTm9kZXNGcm9tOiBudW1iZXJcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubWVzaENhY2hlID0gdGhpcy5jb25zdHJ1Y3RNZXNoQ2FjaGUoKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybU5vZGVDYWNoZSA9IHRoaXMuY29uc3RydWN0VHJhbnNmb3JtTm9kZUNhY2hlKCk7XHJcbiAgICAgICAgdGhpcy5zcHJpbmdCb25lQ29udHJvbGxlciA9IG5ldyBTcHJpbmdCb25lQ29udHJvbGxlcih0aGlzLmV4dC5zZWNvbmRhcnlBbmltYXRpb24sIHRoaXMuZmluZFRyYW5zZm9ybU5vZGUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmV4dC5ibGVuZFNoYXBlTWFzdGVyICYmIHRoaXMuZXh0LmJsZW5kU2hhcGVNYXN0ZXIuYmxlbmRTaGFwZUdyb3Vwcykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdElzQmluYXJ5TWFwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0TW9ycGhUYXJnZXRNYXAoKTtcclxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnN0cnVjdFRyYW5zZm9ybU5vZGVNYXAoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faHVtYW5vaWRCb25lID0gbmV3IEh1bWFub2lkQm9uZSh0aGlzLnRyYW5zZm9ybU5vZGVNYXApO1xyXG5cclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICB0aGlzLnJlbW92ZUR1cGxpY2F0ZVNrZWxldG9ucygpO1xyXG4gICAgICAgIHRoaXMuX3Jvb3RTa2VsZXRvbiA9IHRoaXMuZ2V0Um9vdFNrZWxldG9uTm9kZSgpO1xyXG5cclxuICAgICAgICAvLyBSZW5hbWUgX19yb290X18gbm9kZVxyXG4gICAgICAgIHRoaXMucm9vdE1lc2gubmFtZSA9IFZSTU1hbmFnZXIuUk9PVF9NRVNIX1BSRUZJWCArIHRoaXMuc2NlbmUuZ2V0Tm9kZXMoKS5maWx0ZXIoKGUpID0+IGUubmFtZS5pbmNsdWRlcyhWUk1NYW5hZ2VyLlJPT1RfTUVTSF9QUkVGSVgpKS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBkdXBsaWNhdGUgc2tlbGV0b25zIHdoZW4gaW1wb3J0aW5nIFZSTS5cclxuICAgICAqIE9ubHkgdGVzdGVkIG9uIFZSb2lkU3R1ZGlvIG91dHB1dCBmaWxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVtb3ZlRHVwbGljYXRlU2tlbGV0b25zKCkge1xyXG4gICAgICAgIGxldCBza2VsZXRvbiA9IG51bGw7XHJcbiAgICAgICAgZm9yIChjb25zdCBub2RlSW5kZXggb2YgT2JqZWN0LmtleXModGhpcy5tZXNoQ2FjaGUpLm1hcChOdW1iZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2hlcyA9IHRoaXMubWVzaENhY2hlW25vZGVJbmRleF07XHJcbiAgICAgICAgICAgIGlmIChtZXNoZXMubGVuZ3RoICYmIG1lc2hlc1swXS5za2VsZXRvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFza2VsZXRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNrZWxldG9uID0gbWVzaGVzWzBdLnNrZWxldG9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yb290TWVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb290Qm9uZSA9IHNrZWxldG9uLmJvbmVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc3VhbGx5IGl0IGlzIGNhbGxlZCBcIlJvb3RcIiwgYnV0IHRoZXJlIGFyZSBleGNlcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb290Qm9uZS5uYW1lICE9PSAnUm9vdCcpIGNvbnNvbGUud2FybignVGhlIGZpcnN0IGJvbmUgaGFzIGEgZGlmZmVyZW50IG5hbWUgdGhhbiBcIlJvb3RcIicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2VhayBzYW5pdHkgY2hlY2tcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2tlbGV0b24uYm9uZXMubGVuZ3RoICE9IG1lc2hlc1swXS5za2VsZXRvbi5ib25lcy5sZW5ndGgpIGNvbnNvbGUud2FybignU2tlbGV0b25zIGhhdmUgZGlmZmVyZW50IG51bWJlcnMgb2YgYm9uZXMhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hlc1swXS5za2VsZXRvbi5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtZXNoIG9mIG1lc2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoLnNrZWxldG9uID0gc2tlbGV0b247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kIHRoZSByb290IG5vZGUgb2Ygc2tlbGV0b24uXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFJvb3RTa2VsZXRvbk5vZGUoKTogTm9kZSB7XHJcbiAgICAgICAgY29uc3Qgcm9vdE1lc2hDaGlsZHJlbiA9IHRoaXMuX3Jvb3RNZXNoLmdldENoaWxkcmVuKChub2RlOiBOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLm5hbWUgPT09ICdSb290JyB8fCBub2RlLm5hbWUgPT09ICdBcm1hdHVyZSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJvb3RNZXNoQ2hpbGRyZW4ubGVuZ3RoID4gMCkgcmV0dXJuIHJvb3RNZXNoQ2hpbGRyZW5bMF07XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBmaW5kIGluIHNjZW5lIGRpcmVjdGx5XHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RNZXNoQ2hpbGQgPSB0aGlzLnNjZW5lLmdldE5vZGVCeU5hbWUoJ1Jvb3QnKSA/IHRoaXMuc2NlbmUuZ2V0Tm9kZUJ5TmFtZSgnUm9vdCcpIDogdGhpcy5zY2VuZS5nZXROb2RlQnlOYW1lKCdBcm1hdHVyZScpO1xyXG4gICAgICAgICAgICBpZiAocm9vdE1lc2hDaGlsZCAmJiAhcm9vdE1lc2hDaGlsZC5wYXJlbnQpIHJldHVybiByb290TWVzaENoaWxkO1xyXG4gICAgICAgICAgICBlbHNlIHRocm93IEVycm9yKCdDYW5ub3QgZmluZCByb290IHNrZWxldG9uIG5vZGUhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2Vjb25kYXJ5IEFuaW1hdGlvbiDjgpLmm7TmlrDjgZnjgotcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVsdGFUaW1lIOWJjeODleODrOODvOODoOOBi+OCieOBrue1jOmBjuenkuaVsChzZWMpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNwcmluZ0JvbmVDb250cm9sbGVyLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog56C05qOE5Yem55CGXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3ByaW5nQm9uZUNvbnRyb2xsZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2h1bWFub2lkQm9uZS5kaXNwb3NlKCk7XHJcblxyXG4gICAgICAgICh0aGlzLm1vcnBoVGFyZ2V0TWFwIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLm1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLnByZXNldE1vcnBoVGFyZ2V0TWFwIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLnRyYW5zZm9ybU5vZGVNYXAgYXMgYW55KSA9IG51bGw7XHJcbiAgICAgICAgKHRoaXMudHJhbnNmb3JtTm9kZUNhY2hlIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLm1lc2hDYWNoZSBhcyBhbnkpID0gbnVsbDtcclxuICAgICAgICAodGhpcy5fcm9vdE1lc2ggYXMgYW55KSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg6Ljg7zjg5XjgqPjg7PjgrDjgpLooYzjgYZcclxuICAgICAqIEBwYXJhbSBsYWJlbCDjg6Ljg7zjg5XlkI1cclxuICAgICAqIEBwYXJhbSB2YWx1ZSDlgKQoMOOAnDEpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtb3JwaGluZyhsYWJlbDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMuY2FsY01vcnBoVmFsdWUobGFiZWwsIHZhbHVlKTtcclxuICAgICAgICBpZiAodGhpcy5tb3JwaFRhcmdldE1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3JwaFRhcmdldE1hcFtsYWJlbF0uZm9yRWFjaCgoc2V0dGluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZy50YXJnZXQuaW5mbHVlbmNlID0gdiAqIChzZXR0aW5nLndlaWdodCAvIDEwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcFtsYWJlbF0ubW9ycGhpbmcodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44OX44Oq44K744OD44OI44Oi44O844OV44Gu44Oi44O844OV44Kj44Oz44Kw44KS6KGM44GGXHJcbiAgICAgKiBAcGFyYW0gbGFiZWwg44Oi44O844OV5ZCNXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUg5YCkKDDjgJwxKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbW9ycGhpbmdQcmVzZXQobGFiZWw6IHN0cmluZywgdmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVzZXRNb3JwaFRhcmdldE1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB2ID0gdGhpcy5jYWxjTW9ycGhWYWx1ZShsYWJlbCwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMucHJlc2V0TW9ycGhUYXJnZXRNYXBbbGFiZWxdLmZvckVhY2goKHNldHRpbmcpID0+IHtcclxuICAgICAgICAgICAgc2V0dGluZy50YXJnZXQuaW5mbHVlbmNlID0gdiAqIChzZXR0aW5nLndlaWdodCAvIDEwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg6Ljg7zjg5XjgqPjg7PjgrDnlKjjga7lgKTjgpLoqIjnrpfjgZnjgotcclxuICAgICAqIEBwYXJhbSBsYWJlbCDjg6Ljg7zjg5XlkI1cclxuICAgICAqIEBwYXJhbSB2YWx1ZSDlgKRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxjTW9ycGhWYWx1ZShsYWJlbDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCB2ID0gTWF0aC5tYXgoMC4wLCBNYXRoLm1pbigxLjAsIHZhbHVlKSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCaW5hcnlNb3JwaE1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYgPiAwLjUgPyAxLjAgOiAwLjA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbGlzdCBtb3JwaGluZyBuYW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNb3JwaGluZ0xpc3QoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm1vcnBoVGFyZ2V0TWFwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS4gOS6uuensOaZguOBruOCq+ODoeODqeS9jee9ruOCkue1tuWvvuW6p+aomeOBqOOBl+OBpuWPluW+l+OBmeOCi1xyXG4gICAgICpcclxuICAgICAqIGZpcnN0UGVyc29uQm9uZSDjgYzmnKroqK3lrprjga7loLTlkIjjga8gbnVsbCDjgpLov5TjgZlcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyDkuIDkurrnp7DmmYLjga7jgqvjg6Hjg6njga7nj77lnKjjgavjgYrjgZHjgovntbblr77luqfmqJlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZpcnN0UGVyc29uQ2FtZXJhUG9zaXRpb24oKTogTnVsbGFibGU8VmVjdG9yMz4ge1xyXG4gICAgICAgIGNvbnN0IGZpcnN0UGVyc29uQm9uZSA9IHRoaXMuZ2V0Rmlyc3RQZXJzb25Cb25lKCk7XHJcbiAgICAgICAgaWYgKCFmaXJzdFBlcnNvbkJvbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBiYXNlUG9zID0gZmlyc3RQZXJzb25Cb25lLmdldEFic29sdXRlUG9zaXRpb24oKTtcclxuICAgICAgICBjb25zdCBvZmZzZXRQb3MgPSB0aGlzLmV4dC5maXJzdFBlcnNvbi5maXJzdFBlcnNvbkJvbmVPZmZzZXQ7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKGJhc2VQb3MueCArIG9mZnNldFBvcy54LCBiYXNlUG9zLnkgKyBvZmZzZXRQb3MueSwgYmFzZVBvcy56ICsgb2Zmc2V0UG9zLnopO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiA5Lq656ew5pmC44Gr6aCt44Go44G/44Gq44GZIFRyYW5zZm9ybU5vZGUg44KS5Y+W5b6X44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRGaXJzdFBlcnNvbkJvbmUoKTogTnVsbGFibGU8VHJhbnNmb3JtTm9kZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRUcmFuc2Zvcm1Ob2RlKHRoaXMuZXh0LmZpcnN0UGVyc29uLmZpcnN0UGVyc29uQm9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg5zjg7zjg7PlkI3jgYvjgonjgZ3jga7jg5zjg7zjg7PjgavoqbLlvZPjgZnjgosgVHJhbnNmb3JtTm9kZSDjgpLlj5blvpfjgZnjgotcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBIdW1hbkJvbmVOYW1lXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgaHVtYW5vaWRCb25lIGdldHRlciBpbnN0ZWFkLiBUaGlzIG1ldGhvZCB3aWxsIGRlbGV0ZSBhdCB2Mi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEJvbmUobmFtZTogSHVtYW5Cb25lTmFtZSk6IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Ob2RlTWFwW25hbWVdIHx8IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgSHVtYW5vaWRCb25lIE1ldGhvZHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBodW1hbm9pZEJvbmUoKTogSHVtYW5vaWRCb25lIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faHVtYW5vaWRCb25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVlJNIFJvb3QgbWVzaFxyXG4gICAgICpcclxuICAgICAqIFVzZWZ1bCBmb3IgTW9kZWwgVHJhbnNmb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByb290TWVzaCgpOiBNZXNoIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcm9vdE1lc2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBub2RlIOeVquWPt+OBi+OCieipsuW9k+OBmeOCiyBUcmFuc2Zvcm1Ob2RlIOOCkuaOouOBmVxyXG4gICAgICog5pWw44GM5aSa44GP44Gq44KL44Gu44Gn44Kt44Oj44OD44K344Ol44Gr5Y+C54Wn44KS5oyB44Gk5qeL6YCg44Gr44GZ44KLXHJcbiAgICAgKiBnbHRmIOOBriBub2RlIOeVquWPt+OBryBgbWV0YWRhdGEuZ2x0Zi5wb2ludGVyc2Ag44Gr6KiY6Yyy44GV44KM44Gm44GE44KLXHJcbiAgICAgKiBAcGFyYW0gbm9kZUluZGV4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5kVHJhbnNmb3JtTm9kZShub2RlSW5kZXg6IG51bWJlcik6IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Ob2RlQ2FjaGVbbm9kZUluZGV4XSB8fCBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbWVzaCDnlarlj7fjgYvjgonjg6Hjg4Pjgrfjg6XjgpLmjqLjgZlcclxuICAgICAqIGdsdGYg44GuIG1lc2gg55Wq5Y+344GvIGBtZXRhZGF0YS5nbHRmLnBvaW50ZXJzYCDjgavoqJjpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBmaW5kTWVzaGVzIGluc3RlYWQuIFRoaXMgbWV0aG9kIGhhcyBicm9rZW4uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5kTWVzaChtZXNoSW5kZXg6IG51bWJlcik6IE51bGxhYmxlPE1lc2g+IHtcclxuICAgICAgICByZXR1cm4gKHRoaXMubWVzaENhY2hlW21lc2hJbmRleF0gJiYgdGhpcy5tZXNoQ2FjaGVbbWVzaEluZGV4XVswXSkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG1lc2gg55Wq5Y+344GL44KJ44Oh44OD44K344Ol44KS5o6i44GZXHJcbiAgICAgKiBnbHRmIOOBriBtZXNoIOeVquWPt+OBryBgbWV0YWRhdGEuZ2x0Zi5wb2ludGVyc2Ag44Gr6KiY6Yyy44GV44KM44Gm44GE44KLXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5kTWVzaGVzKG1lc2hJbmRleDogbnVtYmVyKTogTnVsbGFibGU8TWVzaFtdPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzaENhY2hlW21lc2hJbmRleF0gfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6i+WJjeOBqyBNb3JwaFRhcmdldCDjgaggaXNCaW5hcnkg44KS57SQ5LuY44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0SXNCaW5hcnlNYXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5leHQuYmxlbmRTaGFwZU1hc3Rlci5ibGVuZFNoYXBlR3JvdXBzLmZvckVhY2goKGcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc0JpbmFyeU1vcnBoTWFwW2cubmFtZV0gPSBnLmlzQmluYXJ5O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LqL5YmN44GrIE1vcnBoVGFyZ2V0IOOBqCBCbGVuZFNoYXBlIOOCkue0kOS7mOOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdE1vcnBoVGFyZ2V0TWFwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXh0LmJsZW5kU2hhcGVNYXN0ZXIuYmxlbmRTaGFwZUdyb3Vwcy5mb3JFYWNoKChnKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZy5iaW5kcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGcuYmluZHMuZm9yRWFjaCgoYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaGVzID0gdGhpcy5maW5kTWVzaGVzKGIubWVzaCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1lc2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVbmRlZmluZWQgQmxlbmRTaGFwZUJpbmQgTWVzaGAsIGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1lc2hlcy5mb3JFYWNoKChtZXNoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9ycGhUYXJnZXRNYW5hZ2VyID0gbWVzaC5tb3JwaFRhcmdldE1hbmFnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb3JwaFRhcmdldE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFVuZGVmaW5lZCBtb3JwaFRhcmdldE1hbmFnZXJgLCBiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBtb3JwaFRhcmdldE1hbmFnZXIuZ2V0VGFyZ2V0KGIuaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9ycGhUYXJnZXRNYXBbZy5uYW1lXSA9IHRoaXMubW9ycGhUYXJnZXRNYXBbZy5uYW1lXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vcnBoVGFyZ2V0TWFwW2cubmFtZV0ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBiLndlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZy5wcmVzZXROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlc2V0TW9ycGhUYXJnZXRNYXBbZy5wcmVzZXROYW1lXSA9IHRoaXMucHJlc2V0TW9ycGhUYXJnZXRNYXBbZy5wcmVzZXROYW1lXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVzZXRNb3JwaFRhcmdldE1hcFtnLnByZXNldE5hbWVdLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBiLndlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LqL5YmN44GrIE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyIOOBqOODouODvOODleWQjeOCkue0kOS7mOOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwKCkge1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFscyA9IHRoaXMuc2NlbmUubWF0ZXJpYWxzLnNsaWNlKHRoaXMubWF0ZXJpYWxzTm9kZXNGcm9tKTtcclxuICAgICAgICB0aGlzLmV4dC5ibGVuZFNoYXBlTWFzdGVyLmJsZW5kU2hhcGVHcm91cHMuZm9yRWFjaCgoZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWcubWF0ZXJpYWxWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwW2cubmFtZV0gPSBuZXcgTWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXIobWF0ZXJpYWxzLCBnLm1hdGVyaWFsVmFsdWVzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6i+WJjeOBqyBUcmFuc2Zvcm1Ob2RlIOOBqCBib25lIOWQjeOCkue0kOOBpeOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdFRyYW5zZm9ybU5vZGVNYXAoKSB7XHJcbiAgICAgICAgdGhpcy5leHQuaHVtYW5vaWQuaHVtYW5Cb25lcy5mb3JFYWNoKChiKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmRUcmFuc2Zvcm1Ob2RlKGIubm9kZSk7XHJcbiAgICAgICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtTm9kZU1hcFtiLmJvbmVdID0gbm9kZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG5vZGUg55Wq5Y+344GoIFRyYW5zZm9ybU5vZGUg44KS57SQ44Gl44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0VHJhbnNmb3JtTm9kZUNhY2hlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhY2hlOiBUcmFuc2Zvcm1Ob2RlQ2FjaGUgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMudHJhbnNmb3JtTm9kZXNGcm9tOyBpbmRleCA8IHRoaXMuc2NlbmUudHJhbnNmb3JtTm9kZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnNjZW5lLnRyYW5zZm9ybU5vZGVzW2luZGV4XTtcclxuICAgICAgICAgICAgLy8g44Od44Kk44Oz44K/44GM55m76Yyy44GV44KM44Gm44GE44Gq44GE44KC44Gu44Gv55yB55WlXHJcbiAgICAgICAgICAgIGlmICghbm9kZSB8fCAhbm9kZS5tZXRhZGF0YSB8fCAhbm9kZS5tZXRhZGF0YS5nbHRmIHx8ICFub2RlLm1ldGFkYXRhLmdsdGYucG9pbnRlcnMgfHwgbm9kZS5tZXRhZGF0YS5nbHRmLnBvaW50ZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChjb25zdCBwb2ludGVyIG9mIG5vZGUubWV0YWRhdGEuZ2x0Zi5wb2ludGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50ZXIuc3RhcnRzV2l0aCgnL25vZGVzLycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZUluZGV4ID0gcGFyc2VJbnQoKHBvaW50ZXIgYXMgc3RyaW5nKS5zdWJzdHIoNyksIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZVtub2RlSW5kZXhdID0gbm9kZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FjaGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtZXNoIOeVquWPt+OBqCBNZXNoIOOCkue0kOOBpeOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdE1lc2hDYWNoZSgpIHtcclxuICAgICAgICBjb25zdCBjYWNoZTogTWVzaENhY2hlID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSB0aGlzLm1lc2hlc0Zyb207IGluZGV4IDwgdGhpcy5zY2VuZS5tZXNoZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLnNjZW5lLm1lc2hlc1tpbmRleF07XHJcbiAgICAgICAgICAgIGlmIChtZXNoLmlkID09PSAnX19yb290X18nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yb290TWVzaCA9IG1lc2ggYXMgTWVzaDtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOODneOCpOODs+OCv+OBjOeZu+mMsuOBleOCjOOBpuOBhOOBquOBhOOCguOBruOBr+ecgeeVpVxyXG4gICAgICAgICAgICBpZiAoIW1lc2ggfHwgIW1lc2gubWV0YWRhdGEgfHwgIW1lc2gubWV0YWRhdGEuZ2x0ZiB8fCAhbWVzaC5tZXRhZGF0YS5nbHRmLnBvaW50ZXJzIHx8IG1lc2gubWV0YWRhdGEuZ2x0Zi5wb2ludGVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcG9pbnRlciBvZiBtZXNoLm1ldGFkYXRhLmdsdGYucG9pbnRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gKHBvaW50ZXIgYXMgc3RyaW5nKS5tYXRjaCgvXlxcL21lc2hlc1xcLyhcXGQrKS4rJC8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZUluZGV4ID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZVtub2RlSW5kZXhdID0gY2FjaGVbbm9kZUluZGV4XSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZVtub2RlSW5kZXhdLnB1c2gobWVzaCBhcyBNZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FjaGU7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBNYXRlcmlhbCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgdHlwZSB7IEJhc2VUZXh0dXJlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9UZXh0dXJlcy9iYXNlVGV4dHVyZSc7XHJcbmltcG9ydCB0eXBlIHsgVGV4dHVyZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvdGV4dHVyZSc7XHJcbmltcG9ydCB7IENvbG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgR0xURkxvYWRlciwgSU1hdGVyaWFsIH0gZnJvbSAnQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wJztcclxuaW1wb3J0IHsgTVRvb25NYXRlcmlhbCB9IGZyb20gJ2JhYnlsb24tbXRvb24tbWF0ZXJpYWwnO1xyXG5pbXBvcnQgdHlwZSB7IElWUk1NYXRlcmlhbFByb3BlcnR5LCBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eSB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVNoYWRlciB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9lbmdpbmUnO1xyXG5cclxuLyoqXHJcbiAqIFZSTSDjgafmjIflrprjgZXjgozjgosgTWF0ZXJpYWwg44KS55Sf5oiQ44GZ44KLXHJcbiAqIFtWUk0g44GM5o+Q5L6b44GZ44KL44K344Kn44O844OAXShodHRwczovL3ZybS5kZXYvZW4vdW5pdnJtL3NoYWRlcnMvaW5kZXguaHRtbCkg44KS54m55a6a44GX6Kqt44G/6L6844KAXHJcbiAqIC0gVW5saXRUZXh0dXJlOiDkuI3pgI/mmI4sIFZSTSDjg5XjgqHjgqTjg6vlgbTjgacgW0tIUl9tYXRlcmlhbHNfdW5saXRdKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21haW4vZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3VubGl0KSDjgYzlrprnvqnjgZXjgozjgabjgYTjgovjgZ/jgoHjgIHkvZXjgoLjgZfjgarjgYRcclxuICogLSBVbmxpdEN1dG91dDog6YCP5piO5bqm44GM6Za+5YCk5Lul5LiL44Gu6YOo5YiG44KS6YCP5piO44Go44GZ44KLLCDlkIzkuIpcclxuICogLSBVbmxpdFRyYW5zcGFyZW50OiDjgqLjg6vjg5XjgqHjg5bjg6zjg7Pjg4njgIJaV3JpdGXjgZfjgarjgYQsIOWQjOS4ilxyXG4gKiAtIFVubGl0VHJhbnNwYXJlbnRaV3JpdGU6IOOCouODq+ODleOCoeODluODrOODs+ODieOAglpXcml0ZeOBmeOCiywg5ZCM5LiK44Gr5Yqg44GI44CB44OX44Ot44OR44OG44Kj44GnIFpXcml0ZSDjgpLlvLfliLbjgZfjgabjgYTjgb7jgZlcclxuICogLSBNVG9vbjogTVRvb25NYXRlcmlhbCDjgpLlt67jgZfmm7/jgYjjgabjgYTjgb7jgZnjgIJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWUk1NYXRlcmlhbEdlbmVyYXRvciB7XHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGxvYWRlcjogR0xURkxvYWRlcikge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODnuODhuODquOCouODq+OCkueUn+aIkOOBmeOCiyBQcm9taXNlIOOCkui/lOOBmVxyXG4gICAgICogVlJNIOWvvuixoeWkluOBruWgtOWQiOOBryBudWxsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZW5lcmF0ZShjb250ZXh0OiBzdHJpbmcsIG1hdGVyaWFsOiBJTWF0ZXJpYWwsIG1lc2g6IE1lc2gsIGJhYnlsb25EcmF3TW9kZTogbnVtYmVyLCBhc3NpZ246IChiYWJ5bG9uTWF0ZXJpYWw6IE1hdGVyaWFsKSA9PiB2b2lkKTogTnVsbGFibGU8UHJvbWlzZTxNYXRlcmlhbD4+IHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbFByb3AgPSB0aGlzLmZpbmRNYXRlcmlhbFByb3BlcnR5QnlOYW1lKG1hdGVyaWFsLm5hbWUsIHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0aWVzKCkpO1xyXG4gICAgICAgIGlmICghbWF0ZXJpYWxQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNoLmFscGhhSW5kZXggPSBtYXRlcmlhbFByb3AucmVuZGVyUXVldWU7XHJcbiAgICAgICAgY29uc3QgbmV3TWF0ZXJpYWwgPSB0aGlzLmNyZWF0ZU1hdGVyaWFsQnlTaGFkZXIoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25EcmF3TW9kZSwgbWF0ZXJpYWxQcm9wKTtcclxuICAgICAgICBpZiAoIW5ld01hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhc3NpZ24obmV3TWF0ZXJpYWwpO1xyXG4gICAgICAgIGlmIChuZXdNYXRlcmlhbCBpbnN0YW5jZW9mIE1Ub29uTWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZE1Ub29uVGV4dHVyZXNBc3luYyhjb250ZXh0LCBuZXdNYXRlcmlhbCwgbWF0ZXJpYWxQcm9wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXdNYXRlcmlhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWUk0g44G+44Gf44GvIFZDSSDjgYvjgonjg57jg4bjg6rjgqLjg6vjg5fjg63jg5Hjg4bjgqPjga7phY3liJfjgpLmjqLjgZlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRNYXRlcmlhbFByb3BlcnRpZXMoKTogSVZSTU1hdGVyaWFsUHJvcGVydHlbXSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zLlZSTSAmJiB0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVlJNLm1hdGVyaWFsUHJvcGVydGllcykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zLlZSTS5tYXRlcmlhbFByb3BlcnRpZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVkNBU1RfdmNpX21hdGVyaWFsX3VuaXR5ICYmIHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9ucy5WQ0FTVF92Y2lfbWF0ZXJpYWxfdW5pdHkubWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVkNBU1RfdmNpX21hdGVyaWFsX3VuaXR5Lm1hdGVyaWFscztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oe44OG44Oq44Ki44Or5ZCN44GL44KJIE1hdGVyaWFsUHJvcGVydHkg44KS5o6i44GZXHJcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWxOYW1lIOODnuODhuODquOCouODq+WQjVxyXG4gICAgICogQHBhcmFtIGV4dGVuc2lvbiDmi6HlvLXjg4fjg7zjgr9cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmaW5kTWF0ZXJpYWxQcm9wZXJ0eUJ5TmFtZShtYXRlcmlhbE5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWF0ZXJpYWxzOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVtdKTogTnVsbGFibGU8SVZSTU1hdGVyaWFsUHJvcGVydHk+IHtcclxuICAgICAgICBpZiAoIW1hdGVyaWFsTmFtZSB8fCAhbWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtYXRzID0gbWF0ZXJpYWxzLmZpbHRlcigodikgPT4gdi5uYW1lID09PSBtYXRlcmlhbE5hbWUpO1xyXG4gICAgICAgIGlmIChtYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hdHMubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZXIubG9nKGBEdXBsaWNhdGVkIHZybSBtYXRlcmlhbCBuYW1lIGZvdW5kOiAke21hdGVyaWFsTmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hdHNbbWF0cy5sZW5ndGggLSAxXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODhuOCr+OCueODgeODo+OCkuiqreOBv+i+vOOCgFxyXG4gICAgICogQHBhcmFtIGNvbnRleHQg54++5Zyo44Gu44Kz44Oz44OG44Kt44K544OIXHJcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWwg55Sf5oiQ44GX44GfIE1Ub29uTWF0ZXJpYWxcclxuICAgICAqIEBwYXJhbSBwcm9wIOeUn+aIkOOBl+OBnyBNVG9vbk1hdGVyaWFsIOOBruODnuODhuODquOCouODq+ODl+ODreODkeODhuOCo1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvYWRNVG9vblRleHR1cmVzQXN5bmMoY29udGV4dDogc3RyaW5nLCBtYXRlcmlhbDogTVRvb25NYXRlcmlhbCwgcHJvcDogSVZSTU1hdGVyaWFsUHJvcGVydHkpOiBQcm9taXNlPE1hdGVyaWFsPiB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXM6IEFycmF5PFByb21pc2U8QmFzZVRleHR1cmU+PiA9IFtdO1xyXG4gICAgICAgIC8vIOWFqOOBpuOBruODhuOCr+OCueODgeODo+OBriBVViBPZmZzZXQgJiBTY2FsZSDjga/jg6HjgqTjg7Pjg4bjgq/jgrnjg4Hjg6Pjga7jgoLjga7jgpLmtYHnlKjjgZnjgotcclxuICAgICAgICBjb25zdCB1dk9mZnNldFNjYWxlID0gcHJvcC52ZWN0b3JQcm9wZXJ0aWVzLl9NYWluVGV4O1xyXG4gICAgICAgIGlmICghdXZPZmZzZXRTY2FsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hdGVyaWFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYXBwbHlUZXh0dXJlID0gKGluZGV4OiBudW1iZXIgfCB1bmRlZmluZWQsIGNhbGxiYWNrOiAodGV4dHVyZTogQmFzZVRleHR1cmUpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4oaW5kZXgsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS90ZXh0dXJlcy8ke2luZGV4fWAsIHsgaW5kZXg6IHZhbHVlIH0sIChiYWJ5bG9uVGV4dHVyZTogQmFzZVRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a6f6Zqb44GvIFRleHR1cmUg44Kk44Oz44K544K/44Oz44K544GM5p2l44KL44Gu44Gn44Kt44Oj44K544OIXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBiYWJ5bG9uVGV4dHVyZSBhcyBUZXh0dXJlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnVPZmZzZXQgPSB1dk9mZnNldFNjYWxlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnZPZmZzZXQgPSB1dk9mZnNldFNjYWxlWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnVTY2FsZSA9IHV2T2Zmc2V0U2NhbGVbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQudlNjYWxlID0gdXZPZmZzZXRTY2FsZVszXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYmFieWxvblRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fTWFpblRleCwgKHRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmFscGhhQmxlbmQgfHwgbWF0ZXJpYWwuYWxwaGFUZXN0KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmhhc0FscGhhID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXRlcmlhbC5kaWZmdXNlVGV4dHVyZSA9IHRleHR1cmU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1NoYWRlVGV4dHVyZSwgKHRleHR1cmUpID0+IChtYXRlcmlhbC5zaGFkZVRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX0J1bXBNYXAsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwuYnVtcFRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1JlY2VpdmVTaGFkb3dUZXh0dXJlLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLnJlY2VpdmVTaGFkb3dUZXh0dXJlID0gdGV4dHVyZSkpO1xyXG4gICAgICAgIGFwcGx5VGV4dHVyZShwcm9wLnRleHR1cmVQcm9wZXJ0aWVzLl9TaGFkaW5nR3JhZGVUZXh0dXJlLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLnNoYWRpbmdHcmFkZVRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1JpbVRleHR1cmUsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwucmltVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fU3BoZXJlQWRkLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLm1hdENhcFRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX0VtaXNzaW9uTWFwLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLmVtaXNzaXZlVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fT3V0bGluZVdpZHRoVGV4dHVyZSwgKHRleHR1cmUpID0+IChtYXRlcmlhbC5vdXRsaW5lV2lkdGhUZXh0dXJlID0gdGV4dHVyZSkpO1xyXG4gICAgICAgIGFwcGx5VGV4dHVyZShwcm9wLnRleHR1cmVQcm9wZXJ0aWVzLl9VdkFuaW1NYXNrVGV4dHVyZSwgKHRleHR1cmUpID0+IChtYXRlcmlhbC51dkFuaW1hdGlvbk1hc2tUZXh0dXJlID0gdGV4dHVyZSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4gbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44K344Kn44O844OA5ZCN44GL44KJ44Oe44OG44Oq44Ki44Or44KS5o6o5ris44GX44Gm55Sf5oiQ44GZ44KLXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCDnj77lnKjjga7jgrPjg7Pjg4bjgq3jgrnjg4hcclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBnbFRGIOODnuODhuODquOCouODq1xyXG4gICAgICogQHBhcmFtIGJhYnlsb25EcmF3TW9kZSDmj4/nlLvnqK7poZ5cclxuICAgICAqIEBwYXJhbSBwcm9wIOeUn+aIkOOBmeOCi+ODnuODhuODquOCouODq+ODl+ODreODkeODhuOCo1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZU1hdGVyaWFsQnlTaGFkZXIoY29udGV4dDogc3RyaW5nLCBtYXRlcmlhbDogSU1hdGVyaWFsLCBiYWJ5bG9uRHJhd01vZGU6IG51bWJlciwgcHJvcDogSVZSTU1hdGVyaWFsUHJvcGVydHkpOiBOdWxsYWJsZTxNYXRlcmlhbD4ge1xyXG4gICAgICAgIGlmIChwcm9wLnNoYWRlciA9PT0gSVZSTU1hdGVyaWFsUHJvcGVydHlTaGFkZXIuVlJNTVRvb24pIHtcclxuICAgICAgICAgICAgY29uc3QgbXRvb25NYXRlcmlhbCA9IG5ldyBNVG9vbk1hdGVyaWFsKG1hdGVyaWFsLm5hbWUgfHwgYE1Ub29uTWF0ZXJpYWwke21hdGVyaWFsLmluZGV4fWAsIHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TVRvb25NYXRlcmlhbFByb3BlcnRpZXMobXRvb25NYXRlcmlhbCwgcHJvcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtdG9vbk1hdGVyaWFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvcC5zaGFkZXIgPT09IElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyLlZSTVVubGl0VHJhbnNwYXJlbnRaV3JpdGUpIHtcclxuICAgICAgICAgICAgY29uc3QgbWF0ID0gdGhpcy5sb2FkZXIuY3JlYXRlTWF0ZXJpYWwoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25EcmF3TW9kZSk7XHJcbiAgICAgICAgICAgIC8vIOmAmuW4uOODnuODhuODquOCouODq+OBqyBEZXB0aCBXcml0ZSDjgpLlvLfliLZcclxuICAgICAgICAgICAgbWF0LmRpc2FibGVEZXB0aFdyaXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1hdC5mb3JjZURlcHRoV3JpdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODnuODhuODquOCouODq+OBqyBWUk0g44OX44Ot44OR44OG44Kj44KS6Kit5a6aXHJcbiAgICAgKiBWUk0g44OX44Ot44OR44OG44Kj44Go44Oe44OG44Oq44Ki44Or44OX44Ot44OR44OG44Kj44Gu44Oe44OD44OU44Oz44Kw44KS6KGM44Gj44Gm44GE44KLXHJcbiAgICAgKiDliJ3mnJ/lgKTjga/jg57jg4bjg6rjgqLjg6vlrp/oo4XlgbTjgavmjIHjgaPjgabjgYTjgovjgZ/jgoHjgIHlgKTjgYzjgYLjgovloLTlkIjjga7jgb/kuIrmm7jjgY3jgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRNVG9vbk1hdGVyaWFsUHJvcGVydGllcyhtYXRlcmlhbDogTVRvb25NYXRlcmlhbCwgcHJvcDogSVZSTU1hdGVyaWFsUHJvcGVydHkpIHtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fQ3V0b2ZmLCAodmFsdWUpID0+IChtYXRlcmlhbC5hbHBoYUN1dE9mZiA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5Pihwcm9wLnZlY3RvclByb3BlcnRpZXMuX0NvbG9yLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gbmV3IENvbG9yMyh2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdKTtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGEgPSB2YWx1ZVszXTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8SVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk+KHByb3AudmVjdG9yUHJvcGVydGllcy5fU2hhZGVDb2xvciwgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnNoYWRlQ29sb3IgPSBuZXcgQ29sb3IzKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9CdW1wU2NhbGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLmJ1bXBTY2FsZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1JlY2VpdmVTaGFkb3dSYXRlLCAodmFsdWUpID0+IChtYXRlcmlhbC5yZWNlaXZlU2hhZG93UmF0ZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1NoYWRpbmdHcmFkZVJhdGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnNoYWRpbmdHcmFkZVJhdGUgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9TaGFkZVNoaWZ0LCAodmFsdWUpID0+IChtYXRlcmlhbC5zaGFkZVNoaWZ0ID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fU2hhZGVUb29ueSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuc2hhZGVUb29ueSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX0xpZ2h0Q29sb3JBdHRlbnVhdGlvbiwgKHZhbHVlKSA9PiAobWF0ZXJpYWwubGlnaHRDb2xvckF0dGVudWF0aW9uID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fSW5kaXJlY3RMaWdodEludGVuc2l0eSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuaW5kaXJlY3RMaWdodEludGVuc2l0eSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5Pihwcm9wLnZlY3RvclByb3BlcnRpZXMuX1JpbUNvbG9yLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwucmltQ29sb3IgPSBuZXcgQ29sb3IzKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9SaW1MaWdodGluZ01peCwgKHZhbHVlKSA9PiAobWF0ZXJpYWwucmltTGlnaHRpbmdNaXggPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9SaW1GcmVzbmVsUG93ZXIsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnJpbUZyZXNuZWxQb3dlciA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1JpbUxpZnQsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnJpbUxpZnQgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eT4ocHJvcC52ZWN0b3JQcm9wZXJ0aWVzLl9FbWlzc2lvbkNvbG9yLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmVDb2xvciA9IG5ldyBDb2xvcjModmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX091dGxpbmVXaWR0aCwgKHZhbHVlKSA9PiAobWF0ZXJpYWwub3V0bGluZVdpZHRoID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fT3V0bGluZVNjYWxlZE1heERpc3RhbmNlLCAodmFsdWUpID0+IChtYXRlcmlhbC5vdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2UgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eT4ocHJvcC52ZWN0b3JQcm9wZXJ0aWVzLl9PdXRsaW5lQ29sb3IsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5vdXRsaW5lQ29sb3IgPSBuZXcgQ29sb3IzKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9PdXRsaW5lTGlnaHRpbmdNaXgsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVMaWdodGluZ01peCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1V2QW5pbVNjcm9sbFgsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnV2QW5pbWF0aW9uU2Nyb2xsWCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1V2QW5pbVNjcm9sbFksICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnV2QW5pbWF0aW9uU2Nyb2xsWSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1V2QW5pbVJvdGF0aW9uLCAodmFsdWUpID0+IChtYXRlcmlhbC51dkFuaW1hdGlvblJvdGF0aW9uID0gdmFsdWUpKTtcclxuXHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX0RlYnVnTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuZGVidWdNb2RlID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fQmxlbmRNb2RlLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiAvLyBPcGFxdWVcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYUJsZW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFUZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6IC8vIFRyYW5zcGFyZW50Q3V0b3V0XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFCbGVuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFscGhhVGVzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFNb2RlID0gRW5naW5lLkFMUEhBX0NPTUJJTkU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6IC8vIFRyYW5zcGFyZW50XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFCbGVuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFUZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFNb2RlID0gRW5naW5lLkFMUEhBX0NPTUJJTkU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fT3V0bGluZVdpZHRoTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwub3V0bGluZVdpZHRoTW9kZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX091dGxpbmVDb2xvck1vZGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVDb2xvck1vZGUgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9DdWxsTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuY3VsbE1vZGUgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9PdXRsaW5lQ3VsbE1vZGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVDdWxsTW9kZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPGJvb2xlYW4+KHByb3Aua2V5d29yZE1hcC5fQUxQSEFCTEVORF9PTiwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuYWxwaGFCbGVuZCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPGJvb2xlYW4+KHByb3Aua2V5d29yZE1hcC5fQUxQSEFURVNUX09OLCAodmFsdWUpID0+IChtYXRlcmlhbC5hbHBoYVRlc3QgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9aV3JpdGUsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5mb3JjZURlcHRoV3JpdGUgPSBNYXRoLnJvdW5kKHZhbHVlKSA9PT0gMTtcclxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmZvcmNlRGVwdGhXcml0ZSkge1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGlzYWJsZURlcHRoV3JpdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog44OX44Ot44OR44OG44Kj44GM6Kit5a6a44GV44KM44Gm44GE44KM44Gw44Kz44O844Or44OQ44OD44Kv44KS5a6f6KGM44GZ44KLXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8VD4ocHJvcDogVCB8IHVuZGVmaW5lZCwgY2FsbGJhY2s6ICh2YWx1ZTogVCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9wID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrKHByb3ApO1xyXG59XHJcbiIsImltcG9ydCBcIkBiYWJ5bG9uanMvY29yZS9Mb2FkaW5nL2xvYWRpbmdTY3JlZW5cIjtcblxuLy8gUmVnaXN0ZXIgcGx1Z2lucyAoc2lkZSBlZmZlY3QpXG5pbXBvcnQgXCJAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9QbHVnaW5zL2JhYnlsb25GaWxlTG9hZGVyXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2xvYWRlcnMvZ2xURi9nbFRGRmlsZUxvYWRlclwiO1xuXG4vLyBEZWJ1Z1xuaW1wb3J0IFwiQGJhYnlsb25qcy9jb3JlL0RlYnVnXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2d1aVwiO1xuaW1wb3J0IFwiQGJhYnlsb25qcy9pbnNwZWN0b3JcIjtcbmNvbnN0IGRlYnVnID0gZmFsc2U7XG5jb25zdCBzaGFkb3dfZGVidWcgPSBmYWxzZTtcbmNvbnN0IHNwaGVyZXMgPSBmYWxzZTtcblxuaW1wb3J0IHtTY2VuZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiO1xuaW1wb3J0IHtFbmdpbmV9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9lbmdpbmVcIjtcbmltcG9ydCB7Q29sb3IzLCBWZWN0b3IzfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGhcIjtcbmltcG9ydCB7U2hhZG93R2VuZXJhdG9yfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9TaGFkb3dzL3NoYWRvd0dlbmVyYXRvclwiO1xuXG5pbXBvcnQge0RpcmVjdGlvbmFsTGlnaHR9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL2RpcmVjdGlvbmFsTGlnaHRcIjtcbmltcG9ydCB7SGVtaXNwaGVyaWNMaWdodH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvaGVtaXNwaGVyaWNMaWdodFwiO1xuaW1wb3J0IHtQb2ludExpZ2h0fSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9wb2ludExpZ2h0XCI7XG5pbXBvcnQge1NwaGVyZUJ1aWxkZXJ9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL0J1aWxkZXJzL3NwaGVyZUJ1aWxkZXJcIjtcbmltcG9ydCB7VG9ydXNLbm90QnVpbGRlcn0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NZXNoZXMvQnVpbGRlcnMvdG9ydXNLbm90QnVpbGRlclwiO1xuLy8gaW1wb3J0IHtNVG9vbk1hdGVyaWFsfSBmcm9tIFwiLi9zaGFkZXIvYmFieWxvbi1tdG9vbi1tYXRlcmlhbC9zcmNcIjtcbmltcG9ydCB7VGV4dHVyZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvdGV4dHVyZVwiO1xuaW1wb3J0IHtNYXRlcmlhbH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7VmVydGV4QnVmZmVyfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0J1ZmZlcnMvYnVmZmVyXCI7XG5pbXBvcnQge1ZSTU1hbmFnZXJ9IGZyb20gXCIuL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmNcIjtcbmltcG9ydCB7VjNEQ29yZX0gZnJvbSBcIi4vaW5kZXhcIjtcblxuLy8gSW5pdCBCYWJ5bG9uSlMgRW5naW5lXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuZGVyQ2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5sZXQgZW5naW5lOiBFbmdpbmU7XG5pZiAoRW5naW5lLmlzU3VwcG9ydGVkKCkpIHtcbiAgICBlbmdpbmUgPSBuZXcgRW5naW5lKGNhbnZhcywgdHJ1ZSk7XG59XG5cbmNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3QtZmlsZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbndpbmRvdy5vbmxvYWQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiT25sb2FkXCIpO1xuICAgIGNvbnN0IHZybUZpbGUgPSAndGVzdGZpbGVzLzc4MjI0NDQzMzY0OTcwMDQ1MjYudnJtJztcblxuICAgIC8vIENyZWF0ZSB2M2QgY29yZVxuICAgIGNvbnN0IHYzRENvcmUgPSBuZXcgVjNEQ29yZShlbmdpbmUsIG5ldyBTY2VuZShlbmdpbmUpKTtcbiAgICB2M0RDb3JlLnRyYW5zcGFyZW50QmFja2dyb3VuZCgpO1xuICAgIGF3YWl0IHYzRENvcmUuQXBwZW5kQXN5bmMoJycsIHZybUZpbGUpO1xuXG4gICAgLy8gR2V0IG1hbmFnZXJzXG4gICAgY29uc3QgdnJtTWFuYWdlciA9IHYzRENvcmUuZ2V0VlJNTWFuYWdlckJ5VVJJKHZybUZpbGUpO1xuICAgIGNvbnNvbGUubG9nKFwiUHJpbnRpbmcgbG9hZGVkIFZSTSBmaWxlIG1ldGFkYXRhOiBcIiwgdnJtTWFuYWdlci5leHQubWV0YSk7XG5cbiAgICAvLyBDYW1lcmFcbiAgICB2M0RDb3JlLmF0dGFjaENhbWVyYVRvKHZybU1hbmFnZXIpO1xuXG4gICAgLy8gTGlnaHRzXG4gICAgdjNEQ29yZS5hZGRBbWJpZW50TGlnaHQobmV3IENvbG9yMygxLCAxLCAxKSk7XG5cbiAgICAvLyBMb2NrIGNhbWVyYSB0YXJnZXRcbiAgICB2M0RDb3JlLnNjZW5lLm9uQmVmb3JlUmVuZGVyT2JzZXJ2YWJsZS5hZGQoKCkgPT4ge1xuICAgICAgICB2cm1NYW5hZ2VyLmNhbWVyYXNbMF0uc2V0VGFyZ2V0KHZybU1hbmFnZXIucm9vdE1lc2guZ2V0QWJzb2x1dGVQb3NpdGlvbigpKTtcbiAgICB9KTtcblxuICAgIC8vIFJlbmRlciBsb29wXG4gICAgZW5naW5lLnJ1blJlbmRlckxvb3AoKCkgPT4ge1xuICAgICAgICB2M0RDb3JlLnNjZW5lLnJlbmRlcigpO1xuICAgIH0pO1xuXG4vLyBNb2RlbCBUcmFuc2Zvcm1hdGlvblxuICAgIHZybU1hbmFnZXIucm9vdE1lc2gudHJhbnNsYXRlKG5ldyBWZWN0b3IzKDEsIDAsIDApLCAxKTtcbiAgICB2cm1NYW5hZ2VyLnJvb3RNZXNoLnJvdGF0aW9uID0gbmV3IFZlY3RvcjMoMCwgMTM1LCAwKTtcblxuLy8gV29yayB3aXRoIEh1bWFub2lkQm9uZVxuICAgIHZybU1hbmFnZXIuaHVtYW5vaWRCb25lLmxlZnRVcHBlckFybS5hZGRSb3RhdGlvbigwLCAtMC41LCAwKTtcbiAgICB2cm1NYW5hZ2VyLmh1bWFub2lkQm9uZS5oZWFkLmFkZFJvdGF0aW9uKDAuMSwgMCwgMCk7XG5cbi8vIFdvcmsgd2l0aCBCbGVuZFNoYXBlKE1vcnBoVGFyZ2V0KVxuICAgIHZybU1hbmFnZXIubW9ycGhpbmcoJ0pveScsIDEuMCk7XG59O1xuXG5leHBvcnQge307XG4iLCIvKiogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB2M2QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSxcbiAqIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cblxuZXhwb3J0ICogZnJvbSBcIi4vdjNkLWNvcmVcIlxuZXhwb3J0ICogZnJvbSBcIi4vaGVscGVyXCJcbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge0hhcmR3YXJlU2NhbGluZ09wdGltaXphdGlvbixcbiAgICBMZW5zRmxhcmVzT3B0aW1pemF0aW9uLFxuICAgIE51bGxhYmxlLFxuICAgIFBhcnRpY2xlc09wdGltaXphdGlvbixcbiAgICBQb3N0UHJvY2Vzc2VzT3B0aW1pemF0aW9uLFxuICAgIFJlbmRlclRhcmdldHNPcHRpbWl6YXRpb24sIFNjZW5lLCBTY2VuZU9wdGltaXplciwgU2NlbmVPcHRpbWl6ZXJPcHRpb25zLCBUZXh0dXJlT3B0aW1pemF0aW9uIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZVwiO1xuaW1wb3J0IHtWM0RDb3JlfSBmcm9tIFwiLi4vaW5kZXhcIjtcblxuZXhwb3J0IGNsYXNzIFYzRFNjZW5lT3B0aW1pemVyIHtcblxuICAgIC8qKlxuICAgICAqIEN1c3RvbWl6ZWQgc2NlbmUgb3B0aW1pemVyIG9wdGlvbnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9vcHRpb25zOiBTY2VuZU9wdGltaXplck9wdGlvbnM7XG4gICAgZ2V0IG9wdGlvbnMoKTogU2NlbmVPcHRpbWl6ZXJPcHRpb25ze1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG4gICAgc2V0IG9wdGlvbnModmFsdWU6IFNjZW5lT3B0aW1pemVyT3B0aW9ucykge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NlbmVPcHRpbWl6ZXJcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX29wdGltaXplcjogU2NlbmVPcHRpbWl6ZXI7XG4gICAgZ2V0IG9wdGltaXplcigpOiBTY2VuZU9wdGltaXplciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpbWl6ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHNjZW5lOiBTY2VuZSxcbiAgICAgICAgb3B0aW9ucz86IE51bGxhYmxlPFNjZW5lT3B0aW1pemVyT3B0aW9ucz4sXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IFYzRFNjZW5lT3B0aW1pemVyLkN1c3RvbU9wdGltaXplck9wdGlvbnMoKTtcbiAgICAgICAgdGhpcy5fb3B0aW1pemVyID0gbmV3IFNjZW5lT3B0aW1pemVyKHNjZW5lLCB0aGlzLl9vcHRpb25zKTtcbiAgICAgICAgdGhpcy5fb3B0aW1pemVyLnRhcmdldEZyYW1lUmF0ZSA9IFYzRENvcmUuRlJBTUVSQVRFO1xuICAgICAgICB0aGlzLl9vcHRpbWl6ZXIudHJhY2tlckR1cmF0aW9uID0gMjAwMDtcblxuICAgICAgICB0aGlzLl9vcHRpbWl6ZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5zZXR1cEZvY3VzRXZlbnRzKHRoaXMuX29wdGltaXplcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgQ3VzdG9tT3B0aW1pemVyT3B0aW9ucygpOiBTY2VuZU9wdGltaXplck9wdGlvbnMge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gbmV3IFNjZW5lT3B0aW1pemVyT3B0aW9ucygpO1xuICAgICAgICBvcHRpb25zLmFkZE9wdGltaXphdGlvbihuZXcgTGVuc0ZsYXJlc09wdGltaXphdGlvbigwKSk7XG4gICAgICAgIG9wdGlvbnMuYWRkT3B0aW1pemF0aW9uKG5ldyBQYXJ0aWNsZXNPcHRpbWl6YXRpb24oMSkpO1xuICAgICAgICBvcHRpb25zLmFkZE9wdGltaXphdGlvbihuZXcgVGV4dHVyZU9wdGltaXphdGlvbigxLCA1MTIpKTtcbiAgICAgICAgb3B0aW9ucy5hZGRPcHRpbWl6YXRpb24obmV3IFJlbmRlclRhcmdldHNPcHRpbWl6YXRpb24oMikpO1xuICAgICAgICBvcHRpb25zLmFkZE9wdGltaXphdGlvbihuZXcgUG9zdFByb2Nlc3Nlc09wdGltaXphdGlvbigzKSk7XG4gICAgICAgIG9wdGlvbnMuYWRkT3B0aW1pemF0aW9uKG5ldyBIYXJkd2FyZVNjYWxpbmdPcHRpbWl6YXRpb24oNCwgMikpO1xuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBGb2N1c0V2ZW50cyhvcHRpbWl6ZXI6IFNjZW5lT3B0aW1pemVyKSB7XG4gICAgICAgIGlmICh3aW5kb3cpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2V0dXBGb2N1c0V2ZW50c1wiKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJyxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9wdGltaXplciBzdGFydFwiKTtcbiAgICAgICAgICAgICAgICBvcHRpbWl6ZXIuc3RhcnQoKTtcbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JyxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9wdGltaXplciBzdG9wXCIpO1xuICAgICAgICAgICAgICAgIG9wdGltaXplci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgb3B0aW1pemVyLnJlc2V0KCk7XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge01hdGVyaWFsLCBCYWNrZ3JvdW5kTWF0ZXJpYWwsIEJhc2VUZXh0dXJlLCBDb2xvcjMsIEN1YmVUZXh0dXJlLCBNZXNoLCBTY2VuZSwgVGV4dHVyZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZVwiO1xuaW1wb3J0IHtTa3lNYXRlcmlhbH0gZnJvbSBcIkBiYWJ5bG9uanMvbWF0ZXJpYWxzXCI7XG5cblxuZXhwb3J0IGNsYXNzIHYzRFNreUJveCB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBfZW52aXJvbm1lbnRUZXh0dXJlQ0ROVXJsID0gXCJodHRwczovL2Fzc2V0cy5iYWJ5bG9uanMuY29tL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudFNwZWN1bGFyLmVudlwiO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2t5Ym94OiBNZXNoO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NreWJveEJhc2U6IE1lc2g7XG4gICAgZ2V0IHNreWJveCgpOiBNZXNoIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NreWJveDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2t5Ym94TWF0ZXJpYWw6IEJhY2tncm91bmRNYXRlcmlhbDtcbiAgICBwdWJsaWMgc2t5Ym94QmFzZU1hdGVyaWFsOiBTa3lNYXRlcmlhbDtcbiAgICBwdWJsaWMgc2t5Ym94UmVmbGVjdGlvblRleHR1cmU6IEN1YmVUZXh0dXJlO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHNjZW5lOiBTY2VuZSxcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB0ZXh0dXJlTmFtZTogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYm94U2l6ZTogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZW52VGV4dHVyZT86IEJhc2VUZXh0dXJlLFxuICAgICkge1xuICAgICAgICB0aGlzLl9za3lib3ggPSBNZXNoLkNyZWF0ZUJveChcIlNreWJveFwiLCBib3hTaXplLCB0aGlzLnNjZW5lLCB1bmRlZmluZWQsIE1lc2guQkFDS1NJREUpO1xuICAgICAgICB0aGlzLl9za3lib3hCYXNlID0gTWVzaC5DcmVhdGVCb3goXCJTa3lib3hCYXNlXCIsIGJveFNpemUrMSwgdGhpcy5zY2VuZSwgdW5kZWZpbmVkLCBNZXNoLkJBQ0tTSURFKTtcbiAgICAgICAgdGhpcy5jcmVhdGVNYXRlcmlhbCh0ZXh0dXJlTmFtZSk7XG4gICAgICAgIHRoaXMuX3NreWJveC5tYXRlcmlhbCA9IHRoaXMuc2t5Ym94TWF0ZXJpYWw7XG4gICAgICAgIHRoaXMuX3NreWJveEJhc2UubWF0ZXJpYWwgPSB0aGlzLnNreWJveEJhc2VNYXRlcmlhbDtcbiAgICAgICAgdGhpcy5fc2t5Ym94LnJlbmRlcmluZ0dyb3VwSWQgPSAwO1xuICAgICAgICB0aGlzLl9za3lib3hCYXNlLnJlbmRlcmluZ0dyb3VwSWQgPSAwO1xuICAgICAgICB0aGlzLl9za3lib3gubWF0ZXJpYWwudHJhbnNwYXJlbmN5TW9kZSA9IE1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBVEVTVEFOREJMRU5EO1xuICAgICAgICB0aGlzLl9za3lib3gubWF0ZXJpYWwuYWxwaGEgPSAwLjU7XG4gICAgICAgIHRoaXMuc2V0dXBJbWFnZVByb2Nlc3NpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB0aGUgc2t5Ym94IG1hdGVyaWFsIGFuZCB0aGUgc2t5Ym94IHJlZmxlY3Rpb24gdGV4dHVyZVxuICAgICAqIEBwYXJhbSB0ZXh0dXJlTmFtZSBuYW1lIChVUkkpIHRvIHRoZSB0ZXh0dXJlIGZpbGVzXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZU1hdGVyaWFsKHRleHR1cmVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5za3lib3hCYXNlTWF0ZXJpYWwgPSBuZXcgU2t5TWF0ZXJpYWwoXCJTa3lib3hCYXNlTWF0ZXJpYWxcIiwgdGhpcy5zY2VuZSk7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwgPSBuZXcgQmFja2dyb3VuZE1hdGVyaWFsKFwiU2t5Ym94TWF0ZXJpYWxcIiwgdGhpcy5zY2VuZSk7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwuYmFja0ZhY2VDdWxsaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwudXNlUkdCQ29sb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5za3lib3hNYXRlcmlhbC5wcmltYXJ5Q29sb3IgPSBuZXcgQ29sb3IzKDEsIDEsIDEpO1xuICAgICAgICB0aGlzLnNreWJveE1hdGVyaWFsLmVuYWJsZU5vaXNlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5za3lib3hSZWZsZWN0aW9uVGV4dHVyZSA9IG5ldyBDdWJlVGV4dHVyZSh0ZXh0dXJlTmFtZSwgdGhpcy5zY2VuZSk7XG4gICAgICAgIHRoaXMuc2t5Ym94UmVmbGVjdGlvblRleHR1cmUuY29vcmRpbmF0ZXNNb2RlID0gVGV4dHVyZS5TS1lCT1hfTU9ERTtcbiAgICAgICAgdGhpcy5za3lib3hSZWZsZWN0aW9uVGV4dHVyZS5nYW1tYVNwYWNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwucmVmbGVjdGlvblRleHR1cmUgPSB0aGlzLnNreWJveFJlZmxlY3Rpb25UZXh0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIHRoZSBpbWFnZSBwcm9jZXNzaW5nIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIG9wdGlvbnMuXG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXR1cEltYWdlUHJvY2Vzc2luZygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2VuZS5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbnRyYXN0ID0gMS4yO1xuICAgICAgICB0aGlzLnNjZW5lLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uZXhwb3N1cmUgPSAwLjg7XG4gICAgICAgIHRoaXMuc2NlbmUuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi50b25lTWFwcGluZ0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjZW5lLmVudmlyb25tZW50VGV4dHVyZSA9IHRoaXMuZW52VGV4dHVyZSA/IHRoaXMuZW52VGV4dHVyZVxuICAgICAgICAgICAgOiBDdWJlVGV4dHVyZS5DcmVhdGVGcm9tUHJlZmlsdGVyZWREYXRhKHYzRFNreUJveC5fZW52aXJvbm1lbnRUZXh0dXJlQ0ROVXJsLCB0aGlzLnNjZW5lKTtcbiAgICB9XG59XG4iLCIvKiogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB2M2QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSxcbiAqIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cblxuaW1wb3J0IHtJU2hhZG93TGlnaHQsIExpZ2h0LFxuICAgIEFuaW1hdGlvbn0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZVwiO1xuaW1wb3J0IHtDb2xvcjMsIENvbG9yNCwgUXVhdGVybmlvbiwgU2l6ZSwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNJU2hhZG93TGlnaHQobGlnaHQ6IExpZ2h0KSA6IGxpZ2h0IGlzIElTaGFkb3dMaWdodCB7XG4gICAgcmV0dXJuIChsaWdodCBhcyBJU2hhZG93TGlnaHQpLnNldFNoYWRvd1Byb2plY3Rpb25NYXRyaXggIT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1hdGlvbkRhdGFUeXBlKHZhbHVlOiBhbnkpIHtcbiAgICBsZXQgZGF0YVR5cGUgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIWlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSAmJiBpc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVDtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgUXVhdGVybmlvbikge1xuICAgICAgICBkYXRhVHlwZSA9IEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX1FVQVRFUk5JT047XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlY3RvcjMpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9WRUNUT1IzO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBWZWN0b3IyKSB7XG4gICAgICAgIGRhdGFUeXBlID0gQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfVkVDVE9SMjtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQ29sb3IzKSB7XG4gICAgICAgIGRhdGFUeXBlID0gQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfQ09MT1IzO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBDb2xvcjQpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9DT0xPUjQ7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFNpemUpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9TSVpFO1xuICAgIH1cblxuICAgIGlmIChkYXRhVHlwZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRhdGFUeXBlO1xuICAgIH1cbn1cbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge0FyY1JvdGF0ZUNhbWVyYX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9DYW1lcmFzL2FyY1JvdGF0ZUNhbWVyYVwiO1xuaW1wb3J0IHtTY2VuZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiO1xuaW1wb3J0IHtFbmdpbmV9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9lbmdpbmVcIjtcbmltcG9ydCB7U2NlbmVMb2FkZXJ9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9zY2VuZUxvYWRlclwiO1xuaW1wb3J0IHtDb2xvcjMsIENvbG9yNCwgVmVjdG9yM30gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoXCI7XG5cbmltcG9ydCB7R0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyfSBmcm9tIFwiLi9pbXBvcnRlci9sb2FkZXItb2JzZXJ2ZXJcIjtcbmltcG9ydCB7XG4gICAgVlJNRmlsZUxvYWRlcixcbiAgICBWUk1Mb2FkZXJFeHRlbnNpb24sXG4gICAgVlJNTWFuYWdlclxufSBmcm9tIFwiLi9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjXCI7XG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSBcIkBiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMFwiO1xuaW1wb3J0IHsgSGVtaXNwaGVyaWNMaWdodCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL2hlbWlzcGhlcmljTGlnaHRcIjtcbmltcG9ydCB7QW5pbWF0aW9uLCBBbmltYXRhYmxlLCBDYW1lcmEsIERlZmF1bHRSZW5kZXJpbmdQaXBlbGluZSwgRXZlbnRTdGF0ZSwgSVNoYWRvd0xpZ2h0LCBTaGFkb3dHZW5lcmF0b3IsIERlcHRoT2ZGaWVsZEVmZmVjdEJsdXJMZXZlbCwgSUFuaW1hdGlvbktleSwgRWFzaW5nRnVuY3Rpb24sIE51bGxhYmxlLCBTY2VuZU9wdGltaXplck9wdGlvbnMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlXCI7XG5pbXBvcnQge2dldEFuaW1hdGlvbkRhdGFUeXBlLCBpc0lTaGFkb3dMaWdodH0gZnJvbSBcIi4vdXRpbGl0aWVzL3R5cGVzXCI7XG5pbXBvcnQge1YzRFNjZW5lT3B0aW1pemVyfSBmcm9tIFwiLi9zY2VuZS9vcHRpbWl6ZXJcIjtcbmltcG9ydCB7djNEU2t5Qm94fSBmcm9tIFwiLi9zY2VuZS9za3lib3hcIjtcblxuXG5leHBvcnQgY2xhc3MgVjNEQ29yZSBpbXBsZW1lbnRzIEdMVEZMb2FkZXJFeHRlbnNpb25PYnNlcnZlciB7XG5cbiAgICBwdWJsaWMgc3RhdGljIEZSQU1FUkFURSA9IDYwO1xuXG4gICAgLyoqXG4gICAgICogR0xURkZpbGVMb2FkZXIgcGx1Z2luIGZhY3RvcnlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX3ZybUZpbGVMb2FkZXIgPSBuZXcgVlJNRmlsZUxvYWRlcigpO1xuXG4gICAgLy8gV2hldGhlciBzdGFydHMgc3ByaW5nIGJvbmVzIGFuaW1hdGlvbiBhdXRvbWF0aWNhbGx5XG4gICAgcHJpdmF0ZSBfc3ByaW5nQm9uZXNBdXRvVXBkYXRlID0gdHJ1ZTtcbiAgICBnZXQgc3ByaW5nQm9uZXNBdXRvVXBkYXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3ByaW5nQm9uZXNBdXRvVXBkYXRlO1xuICAgIH1cbiAgICBzZXQgc3ByaW5nQm9uZXNBdXRvVXBkYXRlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3NwcmluZ0JvbmVzQXV0b1VwZGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNoYWRvdyBnZW5lcmF0b3JzXG4gICAgICovXG4gICAgcHJpdmF0ZSBfc2hhZG93R2VuZXJhdG9yczpcbiAgICAgICAgTWFwPElTaGFkb3dMaWdodCwgU2hhZG93R2VuZXJhdG9yPiA9XG4gICAgICAgIG5ldyBNYXA8SVNoYWRvd0xpZ2h0LCBTaGFkb3dHZW5lcmF0b3I+KCk7XG5cbiAgICAvKipcbiAgICAgKiBTY2VuZSBvcHRpbWl6ZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIF9zY2VuZU9wdGltaXplcjogVjNEU2NlbmVPcHRpbWl6ZXI7XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJpbmcgcGlwZWxpbmVcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZW5kZXJpbmdQaXBlbGluZTogRGVmYXVsdFJlbmRlcmluZ1BpcGVsaW5lO1xuICAgIGdldCByZW5kZXJpbmdQaXBlbGluZSgpOiBEZWZhdWx0UmVuZGVyaW5nUGlwZWxpbmUge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2tzIHdoZW4gbG9hZGluZyBpcyBkb25lXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25Mb2FkQ29tcGxldGVDYWxsYmFja3M6IEZ1bmN0aW9uW10gPSBbXTtcbiAgICBwdWJsaWMgYWRkT25Mb2FkQ29tcGxldGVDYWxsYmFja3MoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX29uTG9hZENvbXBsZXRlQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVPbkxvYWRDb21wbGV0ZUNhbGxiYWNrKGNhbGxiYWNrOiBGdW5jdGlvbikge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9vbkxvYWRDb21wbGV0ZUNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgaWYoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fb25Mb2FkQ29tcGxldGVDYWxsYmFja3Muc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXRPbkxvYWRDb21wbGV0ZUNhbGxiYWNrcygpIHtcbiAgICAgICAgdGhpcy5fb25Mb2FkQ29tcGxldGVDYWxsYmFja3MgPSBbXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9iZWZvcmVSZW5kZXJGdW5jOlxuICAgICAgICAoZXZlbnREYXRhOiBTY2VuZSwgZXZlbnRTdGF0ZTogRXZlbnRTdGF0ZSkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAgIHByaXZhdGUgX2FmdGVyUmVuZGVyRnVuYzpcbiAgICAgICAgKGV2ZW50RGF0YTogU2NlbmUsIGV2ZW50U3RhdGU6IEV2ZW50U3RhdGUpID0+IHZvaWQgPSAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgbWFuYWdlciBvZiB0aGlzLmxvYWRlZFZSTU1hbmFnZXJzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fc3ByaW5nQm9uZXNBdXRvVXBkYXRlKVxuICAgICAgICAgICAgICAgIG1hbmFnZXIudXBkYXRlKHRoaXMuZW5naW5lLmdldERlbHRhVGltZSgpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwdWJsaWMgdXBkYXRlQmVmb3JlUmVuZGVyRnVuY3Rpb24oXG4gICAgICAgIGZ1bmM6IChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX2JlZm9yZVJlbmRlckZ1bmMgPSBmdW5jO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVBZnRlclJlbmRlckZ1bmN0aW9uKFxuICAgICAgICBmdW5jOiAoZXZlbnREYXRhOiBTY2VuZSwgZXZlbnRTdGF0ZTogRXZlbnRTdGF0ZSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9hZnRlclJlbmRlckZ1bmMgPSBmdW5jO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NhbWVyYU9uQmVmb3JlUmVuZGVyRnVuYzogRnVuY3Rpb25bXSA9IFtdO1xuICAgIHByaXZhdGUgX21haW5DYW1lcmE6IENhbWVyYTtcbiAgICBnZXQgbWFpbkNhbWVyYSgpOiBDYW1lcmEge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFpbkNhbWVyYTtcbiAgICB9XG4gICAgc2V0IG1haW5DYW1lcmEodmFsdWU6IENhbWVyYSkge1xuICAgICAgICB0aGlzLl9tYWluQ2FtZXJhID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHNreUJveDogdjNEU2t5Qm94ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIExvYWRlZCBWUk0gTWFuYWdlcnNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBsb2FkZWRWUk1NYW5hZ2VyczogVlJNTWFuYWdlcltdID0gW107XG4gICAgcHVibGljIGFkZFZSTU1hbmFnZXIobWFuYWdlcjogVlJNTWFuYWdlcikge1xuICAgICAgICBpZiAobWFuYWdlcilcbiAgICAgICAgICAgIHRoaXMubG9hZGVkVlJNTWFuYWdlcnMucHVzaChtYW5hZ2VyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgVlJNIE1hbmFnZXIgYnkgaW5kZXhcbiAgICAgKiBAcGFyYW0gaWR4XG4gICAgICovXG4gICAgcHVibGljIGdldFZSTU1hbmFnZXJCeUluZGV4KGlkeDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiAoaWR4ID49IDAgJiYgaWR4IDwgdGhpcy5sb2FkZWRWUk1NYW5hZ2Vycy5sZW5ndGgpXG4gICAgICAgICAgICA/IHRoaXMubG9hZGVkVlJNTWFuYWdlcnNbaWR4XVxuICAgICAgICAgICAgOiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBWUk0gTWFuYWdlciBieSBVUklcbiAgICAgKiBWUk0gZG9lc24ndCBoYXZlIGFueSBVSUQgaW4gbWV0YWRhdGEuIFRpdGxlIGNhbiBiZSB1bmZpbGxlZCB0b28uXG4gICAgICogRmlsZW5hbWUgaXMgdGhlIG9ubHkgcmVhc29uYWJsZSBJRC5cbiAgICAgKiBAcGFyYW0gdXJpXG4gICAgICovXG4gICAgLy8gVlJNIGRvZXNuJ3QgaGF2ZSBhbnkgVUlEIGluIG1ldGFkYXRhLiBUaXRsZSBjYW4gYmUgdW5maWxsZWQgdG9vLlxuICAgIC8vIEZpbGVuYW1lIGlzIHRoZSBvbmx5IHJlYXNvbmFibGUgSUQuXG4gICAgcHVibGljIGdldFZSTU1hbmFnZXJCeVVSSSh1cmk6IFN0cmluZykge1xuICAgICAgICBmb3IgKGNvbnN0IG1hbmFnZXIgb2YgdGhpcy5sb2FkZWRWUk1NYW5hZ2Vycykge1xuICAgICAgICAgICAgaWYgKG1hbmFnZXIudXJpID09PSB1cmkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSBlbmdpbmU6IEVuZ2luZSxcbiAgICAgICAgcHVibGljIHNjZW5lPzogU2NlbmUsXG4gICAgICAgIGNhbWVyYT86IENhbWVyYSxcbiAgICApIHtcbiAgICAgICAgLy8gUmVnaXN0ZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlclZybVBsdWdpbigpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVnJtRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnNjZW5lKVxuICAgICAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBTY2VuZSh0aGlzLmVuZ2luZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuZW5naW5lID0gdGhpcy5zY2VuZS5nZXRFbmdpbmUoKTtcblxuICAgICAgICB0aGlzLnNldHVwT2JzZXJ2YWJsZSgpO1xuICAgICAgICB0aGlzLmVuYWJsZVJlc2l6ZSgpO1xuXG4gICAgICAgIGlmIChjYW1lcmEpIHtcbiAgICAgICAgICAgIHRoaXMuX21haW5DYW1lcmEgPSBjYW1lcmE7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN3aXRjaEFjdGl2ZUNhbWVyYShjYW1lcmEpO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIHRoaXMuYWRkQ2FtZXJhKCk7XG4gICAgICAgIHRoaXMuX3JlbmRlcmluZ1BpcGVsaW5lID0gbmV3IERlZmF1bHRSZW5kZXJpbmdQaXBlbGluZShcbiAgICAgICAgICAgIFwiZGVmYXVsdFBpcGVsaW5lXCIsIC8vIFRoZSBuYW1lIG9mIHRoZSBwaXBlbGluZVxuICAgICAgICAgICAgdHJ1ZSwgLy8gRG8geW91IHdhbnQgdGhlIHBpcGVsaW5lIHRvIHVzZSBIRFIgdGV4dHVyZT9cbiAgICAgICAgICAgIHRoaXMuc2NlbmUsIC8vIFRoZSBzY2VuZSBpbnN0YW5jZVxuICAgICAgICAgICAgW3RoaXMuX21haW5DYW1lcmFdIC8vIFRoZSBsaXN0IG9mIGNhbWVyYXMgdG8gYmUgYXR0YWNoZWQgdG9cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zZXR1cFJlbmRlcmluZ1BpcGVsaW5lKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBiYWNrZ3JvdW5kIHRyYW5zcGFyZW50LlxuICAgICAqL1xuICAgIHB1YmxpYyB0cmFuc3BhcmVudEJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMuc2NlbmUuY2xlYXJDb2xvci5hID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGJhY2tncm91bmQgc29saWQuXG4gICAgICovXG4gICAgcHVibGljIHNvbGlkQmFja2dyb3VuZCgpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5jbGVhckNvbG9yLmEgPSAxO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZSBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgICAqIEBwYXJhbSBjb2xvclxuICAgICAqL1xuICAgIHB1YmxpYyBzZXRCYWNrZ3JvdW5kQ29sb3IoY29sb3I6IENvbG9yMykge1xuICAgICAgICB0aGlzLnNjZW5lLmNsZWFyQ29sb3IgPSBDb2xvcjQuRnJvbUNvbG9yMyhjb2xvciwgdGhpcy5zY2VuZS5jbGVhckNvbG9yLmEpLnRvTGluZWFyU3BhY2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYmFja2dyb3VuZCBjb2xvciBmcm9tIGhleCBzdHJpbmcuXG4gICAgICogQHBhcmFtIGhleCBIZXggY29sb3Igc3RyaW5nXG4gICAgICovXG4gICAgcHVibGljIHNldEJhY2tncm91bmRDb2xvckhleChoZXg6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNldEJhY2tncm91bmRDb2xvcihDb2xvcjMuRnJvbUhleFN0cmluZyhoZXgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYW1iaWVudCBsaWdodC5cbiAgICAgKiBAcGFyYW0gY29sb3IgY29sb3Igb2YgdGhlIGxpZ2h0XG4gICAgICovXG4gICAgcHVibGljIGFkZEFtYmllbnRMaWdodChjb2xvcj86IENvbG9yMykge1xuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBIZW1pc3BoZXJpY0xpZ2h0KFxuICAgICAgICAgICAgXCJWM0RIZW1pTGlnaHRcIixcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKDAsIDEsIDEpLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgaWYgKGNvbG9yKVxuICAgICAgICAgICAgbGlnaHQuZGlmZnVzZSA9IGNvbG9yO1xuICAgICAgICBsaWdodC5zZXRFbmFibGVkKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGJhc2ljIGFyYyByb3RhdGUgY2FtZXJhIHRvIHNjZW5lLlxuICAgICAqIFRPRE86IHRoZXJlIHNlZW1zIHRvIGJlIGEgYnVnIHdoZW4gbWVzaGVzIGFyZSBuZWFyIHRoZSBlZGdlIG9mIGNhbWVyYSBjb25lXG4gICAgICogUHJvYmFibHkgaGFzIHNvbWV0aGluZyB0byBkbyB3aXRoIGN1bGxpbmdcbiAgICAgKiBAcGFyYW0gcmFkaXVzIHJvdGF0aW9uIHJhZGl1c1xuICAgICAqL1xuICAgIHByaXZhdGUgYWRkQ2FtZXJhKFxuICAgICAgICByYWRpdXM6IG51bWJlciA9IDMsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBBcmNSb3RhdGVDYW1lcmEoXG4gICAgICAgICAgICAnVjNETWFpbkNhbWVyYScsXG4gICAgICAgICAgICAwLCAwLCByYWRpdXMsXG4gICAgICAgICAgICBuZXcgVmVjdG9yMygwLCAwLCAwKSxcbiAgICAgICAgICAgIHRoaXMuc2NlbmUsIHRydWUpO1xuICAgICAgICBjYW1lcmEubG93ZXJSYWRpdXNMaW1pdCA9IDAuMTtcbiAgICAgICAgY2FtZXJhLnVwcGVyUmFkaXVzTGltaXQgPSAyMDtcbiAgICAgICAgY2FtZXJhLndoZWVsRGVsdGFQZXJjZW50YWdlID0gMC4wNTtcbiAgICAgICAgY2FtZXJhLm1pblogPSAwO1xuICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3IFZlY3RvcjMoMCwgMS41LCAtNSkpO1xuICAgICAgICBjYW1lcmEuYXR0YWNoQ29udHJvbCh0aGlzLmVuZ2luZS5nZXRSZW5kZXJpbmdDYW52YXMoKSk7XG5cbiAgICAgICAgdGhpcy5fbWFpbkNhbWVyYSA9IGNhbWVyYTtcbiAgICAgICAgdGhpcy5zY2VuZS5zd2l0Y2hBY3RpdmVDYW1lcmEodGhpcy5fbWFpbkNhbWVyYSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXR0YWNoIGEgYXJjIHJvdGF0ZSBmb2xsb3dpbmcgY2FtZXJhIHRvIFZSTSBtb2RlbC5cbiAgICAgKiBQcm9iYWJseSBoYXMgc29tZXRoaW5nIHRvIGRvIHdpdGggY3VsbGluZ1xuICAgICAqIEBwYXJhbSBtYW5hZ2VyIFZSTSBNYW5hZ2VyIHRvIGF0dGFjaCB0aGUgY2FtZXJhIHRvXG4gICAgICogQHBhcmFtIHJhZGl1cyByb3RhdGlvbiByYWRpdXNcbiAgICAgKi9cbiAgICBwdWJsaWMgYXR0YWNoQ2FtZXJhVG8oXG4gICAgICAgIG1hbmFnZXI6IFZSTU1hbmFnZXIsXG4gICAgICAgIHJhZGl1czogbnVtYmVyID0gMyxcbiAgICApIHtcbiAgICAgICAgY29uc3QgY2FtZXJhID0gbmV3IEFyY1JvdGF0ZUNhbWVyYShcbiAgICAgICAgICAgICdWM0RBcmNDYW1lcmEnICsgbWFuYWdlci5jYW1lcmFzLmxlbmd0aCxcbiAgICAgICAgICAgIDAsIDAsIHJhZGl1cywgbWFuYWdlci5yb290TWVzaC5wb3NpdGlvbixcbiAgICAgICAgICAgIHRoaXMuc2NlbmUsIHRydWUpO1xuICAgICAgICBjYW1lcmEubG93ZXJSYWRpdXNMaW1pdCA9IDAuMTtcbiAgICAgICAgY2FtZXJhLnVwcGVyUmFkaXVzTGltaXQgPSAyMDtcbiAgICAgICAgY2FtZXJhLndoZWVsRGVsdGFQZXJjZW50YWdlID0gMC4wNTtcbiAgICAgICAgY2FtZXJhLm1pblogPSAwO1xuICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3IFZlY3RvcjMoMCwgMS41LCAtNSkpO1xuICAgICAgICBjYW1lcmEuc2V0VGFyZ2V0KG1hbmFnZXIucm9vdE1lc2guZ2V0QWJzb2x1dGVQb3NpdGlvbigpKTtcbiAgICAgICAgY2FtZXJhLmF0dGFjaENvbnRyb2wodGhpcy5lbmdpbmUuZ2V0UmVuZGVyaW5nQ2FudmFzKCkpO1xuXG4gICAgICAgIG1hbmFnZXIuYXBwZW5kQ2FtZXJhKGNhbWVyYSk7XG5cbiAgICAgICAgdGhpcy5fY2FtZXJhT25CZWZvcmVSZW5kZXJGdW5jLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgY2FtZXJhLnNldFRhcmdldChtYW5hZ2VyLnJvb3RNZXNoLmdldEFic29sdXRlUG9zaXRpb24oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ3JlYXRlIGEgc2t5Ym94IGZvciB0aGUgc2NlbmUuXG4gICAgICogQHBhcmFtIHNpemUgc2l6ZSBvZiB0aGUgc2t5Ym94XG4gICAgICogQHBhcmFtIHRleHR1cmVOYW1lIHBhdGggdG8gc2t5Ym94IHRleHR1cmVcbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlU2t5Qm94KFxuICAgICAgICBzaXplOiBudW1iZXIsXG4gICAgICAgIHRleHR1cmVOYW1lPzogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBpZiAoIXRoaXMuc2t5Qm94KSB7XG4gICAgICAgICAgICB0aGlzLnNreUJveCA9IG5ldyB2M0RTa3lCb3godGhpcy5zY2VuZSxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlTmFtZSA/IHRleHR1cmVOYW1lIDogXCJ0ZXh0dXJlL3NreWJveFwiLCBzaXplKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBzaGFkb3cgY2FzdGVyIGZvciBsaWdodC5cbiAgICAgKiBAcGFyYW0gbGlnaHQgTGlnaHQgdG8gZW5hYmxlIHNoYWRvd3MuXG4gICAgICovXG4gICAgcHVibGljIGVuYWJsZVNoYWJvd3MobGlnaHQ/OiBJU2hhZG93TGlnaHQpIHtcbiAgICAgICAgaWYgKGxpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3NoYWRvd0dlbmVyYXRvcnMuaGFzKGxpZ2h0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoYWRvd0dlbmVyYXRvciA9IG5ldyBTaGFkb3dHZW5lcmF0b3IoMTAyNCwgbGlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBTaGFkb3dHZW5lcmF0b3Ioc2hhZG93R2VuZXJhdG9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaGFkb3dHZW5lcmF0b3JzLnNldChsaWdodCwgc2hhZG93R2VuZXJhdG9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTGlnaHQgXCIgKyBsaWdodC5uYW1lICsgXCIgYWxyZWFkeSBoYXMgYSBzaGFkb3cgZ2VuZXJhdG9yIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLnNjZW5lLmxpZ2h0cykge1xuICAgICAgICAgICAgICAgIGlmIChpc0lTaGFkb3dMaWdodChsKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGFkb3dHZW5lcmF0b3IgPSBuZXcgU2hhZG93R2VuZXJhdG9yKDEwMjQsIGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHVwU2hhZG93R2VuZXJhdG9yKHNoYWRvd0dlbmVyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NoYWRvd0dlbmVyYXRvcnMuc2V0KGwsIHNoYWRvd0dlbmVyYXRvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvcnJlc3BvbmRpbmcgc2hhZG93IGdlbmVyYXRvciBmb3IgbGlnaHQuXG4gICAgICogQHBhcmFtIGxpZ2h0IExpZ2h0IHRvIGdldCBzaGFkb3cgZ2VuZXJhdG9yXG4gICAgICovXG4gICAgcHVibGljIGdldFNoYWRvd25HZW5lcmF0b3IobGlnaHQ6IElTaGFkb3dMaWdodCk6IE51bGxhYmxlPFNoYWRvd0dlbmVyYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hhZG93R2VuZXJhdG9ycy5nZXQobGlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBzdGFydGluZyBhbmltYXRpb25cbiAgICAgKiBAcGFyYW0gdGFyZ2V0XG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gZHVyYXRpb25cbiAgICAgKiBAcGFyYW0gZnJvbVxuICAgICAqIEBwYXJhbSB0b1xuICAgICAqIEBwYXJhbSBsb29wTW9kZVxuICAgICAqIEBwYXJhbSBlYXNpbmdGdW5jdGlvblxuICAgICAqIEBwYXJhbSBlYXNpbmdNb2RlXG4gICAgICovXG4gICAgcHVibGljIHN0YXJ0UXVpY2tBbmltYXRpb24oXG4gICAgICAgIHRhcmdldDogYW55LFxuICAgICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHByb3BlcnR5OiBzdHJpbmcsXG4gICAgICAgIGR1cmF0aW9uOiBudW1iZXIsXG4gICAgICAgIGZyb206IGFueSxcbiAgICAgICAgdG86IGFueSxcbiAgICAgICAgbG9vcE1vZGU/OiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgICAgIGVhc2luZ0Z1bmN0aW9uPzogRWFzaW5nRnVuY3Rpb24sXG4gICAgICAgIGVhc2luZ01vZGU/OiBudW1iZXJcbiAgICApOiBBbmltYXRhYmxlIHtcbiAgICAgICAgY29uc3QgYW5pbSA9IHRoaXMuY3JlYXRlQW5pbWF0aW9uKFxuICAgICAgICAgICAgdGFyZ2V0LCBuYW1lLCBwcm9wZXJ0eSxcbiAgICAgICAgICAgIFt7ZnJhbWU6IDAsIHZhbHVlOiBmcm9tfSwge2ZyYW1lOiBkdXJhdGlvbiwgdmFsdWU6IHRvfV0sXG4gICAgICAgICAgICBsb29wTW9kZSwgZWFzaW5nRnVuY3Rpb24sIGVhc2luZ01vZGVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuYmVnaW5EaXJlY3RBbmltYXRpb24oYW5pbVswXSwgW2FuaW1bMV1dLCAwLCBkdXJhdGlvbixcbiAgICAgICAgICAgIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtIHRhcmdldFxuICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICogQHBhcmFtIHByb3BlcnR5XG4gICAgICogQHBhcmFtIGtleUZyYW1lc1xuICAgICAqIEBwYXJhbSBsb29wTW9kZVxuICAgICAqIEBwYXJhbSBlYXNpbmdGdW5jdGlvblxuICAgICAqIEBwYXJhbSBlYXNpbmdNb2RlXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZUFuaW1hdGlvbihcbiAgICAgICAgdGFyZ2V0OiBhbnksXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgcHJvcGVydHk6IHN0cmluZyxcbiAgICAgICAga2V5RnJhbWVzOiBBcnJheTxJQW5pbWF0aW9uS2V5PixcbiAgICAgICAgbG9vcE1vZGU/OiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgICAgIGVhc2luZ0Z1bmN0aW9uPzogRWFzaW5nRnVuY3Rpb24sXG4gICAgICAgIGVhc2luZ01vZGU/OiBudW1iZXIsXG4gICAgKTogW2FueSwgQW5pbWF0aW9uXSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBrZXlGcmFtZXMgaXMgbm90IGVtcHR5XG4gICAgICAgIGlmIChrZXlGcmFtZXMubGVuZ3RoIDwgMSlcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiS2V5IEZyYW1lcyBlbXB0eVwiKTtcblxuICAgICAgICAvLyBHZXQgZGF0YSB0eXBlXG4gICAgICAgIGNvbnN0IGRhdGFUeXBlID0gZ2V0QW5pbWF0aW9uRGF0YVR5cGUoa2V5RnJhbWVzWzBdLnZhbHVlKTtcbiAgICAgICAgaWYgKGRhdGFUeXBlID09PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDYW5ub3QgZGV0ZXJtaW5lIGRhdGEgdHlwZSBmcm9tIGtleWZyYW1lcyFcIik7XG5cbiAgICAgICAgY29uc3QgYW5pbWF0aW9uID0gbmV3IEFuaW1hdGlvbihcbiAgICAgICAgICAgIG5hbWUsIHByb3BlcnR5LCBWM0RDb3JlLkZSQU1FUkFURSxcbiAgICAgICAgICAgIGRhdGFUeXBlLCBsb29wTW9kZSk7XG4gICAgICAgIGFuaW1hdGlvbi5zZXRLZXlzKGtleUZyYW1lcyk7XG5cbiAgICAgICAgaWYgKGVhc2luZ0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZWFzaW5nTW9kZSlcbiAgICAgICAgICAgICAgICBlYXNpbmdGdW5jdGlvbi5zZXRFYXNpbmdNb2RlKGVhc2luZ01vZGUpO1xuICAgICAgICAgICAgYW5pbWF0aW9uLnNldEVhc2luZ0Z1bmN0aW9uKGVhc2luZ0Z1bmN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbdGFyZ2V0LCBhbmltYXRpb25dO1xuICAgIH1cblxuICAgIHB1YmxpYyBlbmFibGVPcHRpbWl6ZXIob3B0aW9ucz86IFNjZW5lT3B0aW1pemVyT3B0aW9ucykge1xuICAgICAgICB0aGlzLl9zY2VuZU9wdGltaXplciA9IG5ldyBWM0RTY2VuZU9wdGltaXplcih0aGlzLnNjZW5lLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBtYWtlIHdyYXBwZXJzIHN0YXRpYywgc28gcGx1Z2lucyB3aWxsIGFsd2F5cyBiZSByZWdpc3RlcmVkXG4gICAgLyoqXG4gICAgICogV3JhcHBlciBmb3IgU2NlbmVMb2FkZXIuQXBwZW5kQXN5bmMuXG4gICAgICogQHBhcmFtIHJvb3RVcmwgYSBzdHJpbmcgdGhhdCBkZWZpbmVzIHRoZSByb290IHVybCBmb3IgdGhlIHNjZW5lIGFuZCByZXNvdXJjZXMgb3IgdGhlIGNvbmNhdGVuYXRpb24gb2Ygcm9vdFVSTCBhbmQgZmlsZW5hbWVcbiAgICAgKiBAcGFyYW0gc2NlbmVGaWxlbmFtZSBhIHN0cmluZyB0aGF0IGRlZmluZXMgdGhlIG5hbWUgb2YgdGhlIHNjZW5lIGZpbGUgb3Igc3RhcnRzIHdpdGggXCJkYXRhOlwiIGZvbGxvd2luZyBieSB0aGUgc3RyaW5naWZpZWQgdmVyc2lvbiBvZiB0aGUgc2NlbmUgb3IgYSBGaWxlIG9iamVjdCAoZGVmYXVsdDogZW1wdHkgc3RyaW5nKVxuICAgICAqL1xuICAgIHB1YmxpYyBBcHBlbmRBc3luYyhcbiAgICAgICAgcm9vdFVybDogc3RyaW5nLFxuICAgICAgICBzY2VuZUZpbGVuYW1lPzogc3RyaW5nIHwgRmlsZSxcbiAgICApOiBQcm9taXNlPFNjZW5lPiB7XG4gICAgICAgIHJldHVybiBTY2VuZUxvYWRlci5BcHBlbmRBc3luYyhyb290VXJsLCBzY2VuZUZpbGVuYW1lLCB0aGlzLnNjZW5lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcGVyIGZvciBTY2VuZUxvYWRlci5Mb2FkQXN5bmNcbiAgICAgKiBAcGFyYW0gcm9vdFVybCBhIHN0cmluZyB0aGF0IGRlZmluZXMgdGhlIHJvb3QgdXJsIGZvciB0aGUgc2NlbmUgYW5kIHJlc291cmNlcyBvciB0aGUgY29uY2F0ZW5hdGlvbiBvZiByb290VVJMIGFuZCBmaWxlbmFtZVxuICAgICAqIEBwYXJhbSBzY2VuZUZpbGVuYW1lIGEgc3RyaW5nIHRoYXQgZGVmaW5lcyB0aGUgbmFtZSBvZiB0aGUgc2NlbmUgZmlsZSBvciBzdGFydHMgd2l0aCBcImRhdGE6XCIgZm9sbG93aW5nIGJ5IHRoZSBzdHJpbmdpZmllZCB2ZXJzaW9uIG9mIHRoZSBzY2VuZSBvciBhIEZpbGUgb2JqZWN0IChkZWZhdWx0OiBlbXB0eSBzdHJpbmcpXG4gICAgICovXG4gICAgcHVibGljIExvYWRBc3luYyhcbiAgICAgICAgcm9vdFVybDogc3RyaW5nLFxuICAgICAgICBzY2VuZUZpbGVuYW1lPzogc3RyaW5nIHwgRmlsZSxcbiAgICApOiBQcm9taXNlPFNjZW5lPiB7XG4gICAgICAgIHJldHVybiBTY2VuZUxvYWRlci5Mb2FkQXN5bmMocm9vdFVybCwgc2NlbmVGaWxlbmFtZSwgdGhpcy5lbmdpbmUpO1xuICAgIH1cblxuICAgIC8vIEdMVEZMb2FkZXJFeHRlbnNpb25PYnNlcnZlclxuICAgIHB1YmxpYyBvbkxvYWRSZWFkeSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMuX29uTG9hZENvbXBsZXRlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICBmKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdXAgZm9yIHRpbWUgdXBkYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXR1cE9ic2VydmFibGUoKSB7XG4gICAgICAgIHRoaXMuc2NlbmUub25CZWZvcmVSZW5kZXJPYnNlcnZhYmxlLmFkZChcbiAgICAgICAgICAgIChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYmVmb3JlUmVuZGVyRnVuYyhldmVudERhdGEsIGV2ZW50U3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICAvLyBDYW1lcmFcbiAgICAgICAgdGhpcy5zY2VuZS5vbkJlZm9yZVJlbmRlck9ic2VydmFibGUuYWRkKFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZiBvZiB0aGlzLl9jYW1lcmFPbkJlZm9yZVJlbmRlckZ1bmMpXG4gICAgICAgICAgICAgICAgICAgIGYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICAvLyBVcGRhdGUgc2Vjb25kYXJ5IGFuaW1hdGlvblxuICAgICAgICB0aGlzLnNjZW5lLm9uQWZ0ZXJSZW5kZXJPYnNlcnZhYmxlLmFkZChcbiAgICAgICAgICAgIChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWZ0ZXJSZW5kZXJGdW5jKGV2ZW50RGF0YSwgZXZlbnRTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbmFibGVSZXNpemUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLmdldFJlbmRlcmluZ0NhbnZhcygpLm9ucmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUucmVzaXplKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwU2hhZG93R2VuZXJhdG9yKHNoYWRvd0dlbmVyYXRvcjogYW55KSB7XG4gICAgICAgIHNoYWRvd0dlbmVyYXRvci51c2VQZXJjZW50YWdlQ2xvc2VyRmlsdGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgc2hhZG93R2VuZXJhdG9yLmZpbHRlcmluZ1F1YWxpdHkgPSBTaGFkb3dHZW5lcmF0b3IuUVVBTElUWV9ISUdIO1xuICAgIH1cblxuICAgIC8vIFRPRE8gVW5yZWdpc3RlclxuICAgIHByaXZhdGUgcmVnaXN0ZXJWcm1FeHRlbnNpb24oKSB7XG4gICAgICAgIC8vIOODreODvOODgOODvOOBq+eZu+mMsuOBmeOCi1xuICAgICAgICBHTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKFZSTUxvYWRlckV4dGVuc2lvbi5OQU1FLCAobG9hZGVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZSTUxvYWRlckV4dGVuc2lvbihsb2FkZXIsIHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyVnJtUGx1Z2luKCkge1xuICAgICAgICBpZiAoU2NlbmVMb2FkZXIgJiYgU2NlbmVMb2FkZXIuR2V0UGx1Z2luRm9yRXh0ZW5zaW9uKCcudnJtJykubmFtZSA9PT0gJ2JhYnlsb24uanMnKSB7XG4gICAgICAgICAgICBTY2VuZUxvYWRlci5SZWdpc3RlclBsdWdpbih0aGlzLl92cm1GaWxlTG9hZGVyKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIHNldHVwUmVuZGVyaW5nUGlwZWxpbmUoKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmluZ1BpcGVsaW5lLnNhbXBsZXMgPSA0O1xuICAgICAgICB0aGlzLl9yZW5kZXJpbmdQaXBlbGluZS5kZXB0aE9mRmllbGRFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuZGVwdGhPZkZpZWxkQmx1ckxldmVsID0gRGVwdGhPZkZpZWxkRWZmZWN0Qmx1ckxldmVsLk1lZGl1bTtcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuZGVwdGhPZkZpZWxkLmZvY3VzRGlzdGFuY2UgID0gMjAwMDsgLy8gZGlzdGFuY2Ugb2YgdGhlIGN1cnJlbnQgZm9jdXMgcG9pbnQgZnJvbSB0aGUgY2FtZXJhIGluIG1pbGxpbWV0ZXJzIGNvbnNpZGVyaW5nIDEgc2NlbmUgdW5pdCBpcyAxIG1ldGVyXG4gICAgICAgIHRoaXMuX3JlbmRlcmluZ1BpcGVsaW5lLmRlcHRoT2ZGaWVsZC5mb2NhbExlbmd0aCAgPSAxMDsgLy8gZm9jYWwgbGVuZ3RoIG9mIHRoZSBjYW1lcmEgaW4gbWlsbGltZXRlcnNcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuZGVwdGhPZkZpZWxkLmZTdG9wICA9IDEuNDsgLy8gYWthIEYgbnVtYmVyIG9mIHRoZSBjYW1lcmEgZGVmaW5lZCBpbiBzdG9wcyBhcyBpdCB3b3VsZCBiZSBvbiBhIHBoeXNpY2FsIGRldmljZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVjNEQ29yZTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0XCJtYWluXCI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3YzZF9jb3JlXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3YzZF9jb3JlXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbXCJiYWJ5bG9uanNcIl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgtdGVzdC50c1wiKSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9