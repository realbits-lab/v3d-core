(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["v3d-core"] = factory();
	else
		root["v3d-core"] = factory();
})(self, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/babylon-mtoon-material/dist/index.module.js":
/*!******************************************************************!*\
  !*** ./node_modules/babylon-mtoon-material/dist/index.module.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

!function(e,i){ true?module.exports=i(__webpack_require__(/*! @babylonjs/core/Misc/decorators */ "./node_modules/@babylonjs/core/Misc/decorators.js"),__webpack_require__(/*! @babylonjs/core/Misc/smartArray */ "./node_modules/@babylonjs/core/Misc/smartArray.js"),__webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js"),__webpack_require__(/*! @babylonjs/core/Maths/math.vector */ "./node_modules/@babylonjs/core/Maths/math.vector.js"),__webpack_require__(/*! @babylonjs/core/Maths/math.color */ "./node_modules/@babylonjs/core/Maths/math.color.js"),__webpack_require__(/*! @babylonjs/core/Buffers/buffer */ "./node_modules/@babylonjs/core/Buffers/buffer.js"),__webpack_require__(/*! @babylonjs/core/Materials/imageProcessingConfiguration */ "./node_modules/@babylonjs/core/Materials/imageProcessingConfiguration.js"),__webpack_require__(/*! @babylonjs/core/Materials/material */ "./node_modules/@babylonjs/core/Materials/material.js"),__webpack_require__(/*! @babylonjs/core/Materials/pushMaterial */ "./node_modules/@babylonjs/core/Materials/pushMaterial.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialHelper */ "./node_modules/@babylonjs/core/Materials/materialHelper.js"),__webpack_require__(/*! @babylonjs/core/Engines/constants */ "./node_modules/@babylonjs/core/Engines/constants.js"),__webpack_require__(/*! @babylonjs/core/Materials/effectFallbacks */ "./node_modules/@babylonjs/core/Materials/effectFallbacks.js"),__webpack_require__(/*! @babylonjs/core/Materials/effect */ "./node_modules/@babylonjs/core/Materials/effect.js"),__webpack_require__(/*! @babylonjs/core/Materials/material.detailMapConfiguration */ "./node_modules/@babylonjs/core/Materials/material.detailMapConfiguration.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialPluginEvent */ "./node_modules/@babylonjs/core/Materials/materialPluginEvent.js"),__webpack_require__(/*! @babylonjs/core/Misc/iInspectable */ "./node_modules/@babylonjs/core/Misc/iInspectable.js"),__webpack_require__(/*! @babylonjs/core/sceneComponent */ "./node_modules/@babylonjs/core/sceneComponent.js"),__webpack_require__(/*! @babylonjs/core/Materials/materialDefines */ "./node_modules/@babylonjs/core/Materials/materialDefines.js")):0}(self,((e,i,n,t,o,a,r,s,l,d,h,f,u,m,c,p,g,_)=>(()=>{"use strict";var A={908:e=>{e.exports=a},556:e=>{e.exports=h},272:e=>{e.exports=u},55:e=>{e.exports=f},677:e=>{e.exports=r},66:e=>{e.exports=s},824:e=>{e.exports=m},713:e=>{e.exports=_},221:e=>{e.exports=d},628:e=>{e.exports=c},721:e=>{e.exports=l},548:e=>{e.exports=o},694:e=>{e.exports=t},388:i=>{i.exports=e},812:e=>{e.exports=p},474:e=>{e.exports=i},538:e=>{e.exports=n},667:e=>{e.exports=g}},I={};function v(e){var i=I[e];if(void 0!==i)return i.exports;var n=I[e]={exports:{}};return A[e](n,n.exports,v),n.exports}v.d=(e,i)=>{for(var n in i)v.o(i,n)&&!v.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},v.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),v.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var M={};return(()=>{function e(e,i,n,t){var o,a=arguments.length,r=a<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,n,t);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(i,n,r):o(i,n))||r);return a>3&&r&&Object.defineProperty(i,n,r),r}v.r(M),v.d(M,{CullMode:()=>L,DebugMode:()=>T,MToonMaterial:()=>x,OutlineColorMode:()=>N,OutlineWidthMode:()=>D}),Object.create,Object.create;var i=v(388),n=v(474),t=v(538),o=v(694),a=v(548),r=v(908),s=v(677),l=v(66),d=v(721),h=v(221),f=v(556),u=v(55),m=v(272),c=v(824),p=v(628),g=v(812),_=v(667);class A{constructor(e,i){this.scene=e,this.material=i,this.name=`MToonOutline_${i.name}_${A.rendererId++}`,this.scene._addComponent(this),this._engine=this.scene.getEngine(),this._passIdForDrawWrapper=[];for(let e=0;e<1;++e)this._passIdForDrawWrapper[e]=this._engine.createRenderPassId(`Outline Renderer (${e})`)}register(){this.scene._afterRenderingMeshStage.registerStep(_.SceneComponentConstants.STEP_AFTERRENDERINGMESH_OUTLINE,this,this._afterRenderingMesh)}rebuild(){}dispose(){for(let e=0;e<this._passIdForDrawWrapper.length;++e)this._engine.releaseRenderPassId(this._passIdForDrawWrapper[e])}render(e,i,n){n=null!=n?n:this._passIdForDrawWrapper[0];const t=this.scene,o=e.effect;if(!o||!o.isReady()||!this.scene.activeCamera)return;const a=e._getDrawWrapper(n,!0);if(!a)return;if(a.setEffect(o),!a.effect||!a.effect.isReady())return;const r=e.getMesh(),s=r._internalAbstractMeshDataInfo._actAsRegularMesh?r:null,l=e.getRenderingMesh(),d=s||l;t.activeCamera&&(this.material.applyOutlineCullMode(),this.material.enableOutlineRender(),this._engine.enableEffect(a),this.isHardwareInstancedRendering(e,i)||l._bind(e,o,this.material.fillMode),this.material._preBind(o),l._processRendering(d,e,o,this.material.fillMode,i,this.isHardwareInstancedRendering(e,i),((i,n,t)=>{t&&t.bindForSubMesh(n,d,e)}),this.material),this.material.restoreOutlineCullMode(),this.material.disaableOutlineRender())}_afterRenderingMesh(e,i,n){if(!this.willRender(i))return;const t=this._engine.cullBackFaces;this._engine.cullBackFaces=!1,this.render(i,n,this._passIdForDrawWrapper[0]),this._engine.cullBackFaces=t}isHardwareInstancedRendering(e,i){return!!this._engine.getCaps().instancedArrays&&null!==i.visibleInstances[e._id]&&void 0!==i.visibleInstances[e._id]&&e.getRenderingMesh().hasThinInstances}willRender(e){const i=e.getMaterial();return!(!i||"MToonMaterial"!==i.getClassName()||i.getOutlineRendererName()!==this.name)}}A.rendererId=0;var I=v(713);class E extends I.MaterialDefines{constructor(e){super(e),this.CUSTOMUSERLIGHTING=!0,this.MTOON_OUTLINE_WIDTH_WORLD=!1,this.MTOON_OUTLINE_WIDTH_SCREEN=!1,this.MTOON_OUTLINE_COLOR_FIXED=!1,this.MTOON_OUTLINE_COLOR_MIXED=!1,this.MTOON_DEBUG_NORMAL=!1,this.MTOON_DEBUG_LITSHADERRATE=!1,this.SHADE=!1,this.SHADEDIRECTUV=0,this.RECEIVE_SHADOW=!1,this.RECEIVE_SHADOWDIRECTUV=0,this.SHADING_GRADE=!1,this.SHADING_GRADEDIRECTUV=0,this.RIM=!1,this.RIMDIRECTUV=0,this.MATCAP=!1,this.MATCAPDIRECTUV=0,this.OUTLINE_WIDTH=!1,this.OUTLINE_WIDTHDIRECTUV=0,this.UV_ANIMATION_MASK=!1,this.UV_ANIMATION_MASKDIRECTUV=0,this.MAINUV1=!1,this.MAINUV2=!1,this.MAINUV3=!1,this.MAINUV4=!1,this.MAINUV5=!1,this.MAINUV6=!1,this.DIFFUSE=!1,this.DIFFUSEDIRECTUV=0,this.BAKED_VERTEX_ANIMATION_TEXTURE=!1,this.EMISSIVE=!1,this.EMISSIVEDIRECTUV=0,this.BUMP=!1,this.BUMPDIRECTUV=0,this.PARALLAX=!1,this.PARALLAXOCCLUSION=!1,this.CLIPPLANE=!1,this.CLIPPLANE2=!1,this.CLIPPLANE3=!1,this.CLIPPLANE4=!1,this.CLIPPLANE5=!1,this.CLIPPLANE6=!1,this.ALPHATEST=!1,this.DEPTHPREPASS=!1,this.ALPHAFROMDIFFUSE=!1,this.POINTSIZE=!1,this.FOG=!1,this.NORMAL=!1,this.UV1=!1,this.UV2=!1,this.UV3=!1,this.UV4=!1,this.UV5=!1,this.UV6=!1,this.VERTEXCOLOR=!1,this.VERTEXALPHA=!1,this.NUM_BONE_INFLUENCERS=0,this.BonesPerMesh=0,this.BONETEXTURE=!1,this.BONES_VELOCITY_ENABLED=!1,this.INSTANCES=!1,this.THIN_INSTANCES=!1,this.OBJECTSPACE_NORMALMAP=!1,this.LOGARITHMICDEPTH=!1,this.TWOSIDEDLIGHTING=!1,this.SHADOWFLOAT=!1,this.MORPHTARGETS=!1,this.MORPHTARGETS_NORMAL=!1,this.MORPHTARGETS_TANGENT=!1,this.MORPHTARGETS_UV=!1,this.NUM_MORPH_INFLUENCERS=0,this.MORPHTARGETS_TEXTURE=!1,this.NONUNIFORMSCALING=!1,this.PREMULTIPLYALPHA=!1,this.ALPHATEST_AFTERALLALPHACOMPUTATIONS=!1,this.ALPHABLEND=!0,this.PREPASS=!1,this.PREPASS_IRRADIANCE=!1,this.PREPASS_IRRADIANCE_INDEX=-1,this.PREPASS_ALBEDO_SQRT=!1,this.PREPASS_ALBEDO_SQRT_INDEX=-1,this.PREPASS_DEPTH=!1,this.PREPASS_DEPTH_INDEX=-1,this.PREPASS_NORMAL=!1,this.PREPASS_NORMAL_INDEX=-1,this.PREPASS_POSITION=!1,this.PREPASS_POSITION_INDEX=-1,this.PREPASS_VELOCITY=!1,this.PREPASS_VELOCITY_INDEX=-1,this.PREPASS_REFLECTIVITY=!1,this.PREPASS_REFLECTIVITY_INDEX=-1,this.SCENE_MRT_COUNT=0,this.IMAGEPROCESSING=!1,this.VIGNETTE=!1,this.VIGNETTEBLENDMODEMULTIPLY=!1,this.VIGNETTEBLENDMODEOPAQUE=!1,this.TONEMAPPING=!1,this.TONEMAPPING_ACES=!1,this.CONTRAST=!1,this.COLORCURVES=!1,this.COLORGRADING=!1,this.COLORGRADING3D=!1,this.SAMPLER3DGREENDEPTH=!1,this.SAMPLER3DBGRMAP=!1,this.IMAGEPROCESSINGPOSTPROCESS=!1,this.SKIPFINALCOLORCLAMP=!1,this.MULTIVIEW=!1,this.ORDER_INDEPENDENT_TRANSPARENCY=!1,this.ORDER_INDEPENDENT_TRANSPARENCY_16BITS=!1,this.IS_REFLECTION_LINEAR=!1,this.IS_REFRACTION_LINEAR=!1,this.EXPOSURE=!1,this.FLIP_U=!1,this.FLIP_V=!1,this.rebuild()}setReflectionMode(e){throw new Error("This material cannot use `setReflectionMode`")}}const S={effect:null,subMesh:null};var T,N,D,L;!function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.LitShadeRate=2]="LitShadeRate"}(T||(T={})),function(e){e[e.FixedColor=0]="FixedColor",e[e.MixedLighting=1]="MixedLighting"}(N||(N={})),function(e){e[e.None=0]="None",e[e.WorldCorrdinates=1]="WorldCorrdinates",e[e.ScreenCoordinates=2]="ScreenCoordinates"}(D||(D={})),function(e){e[e.Off=0]="Off",e[e.Front=1]="Front",e[e.Back=2]="Back"}(L||(L={}));class x extends d.PushMaterial{constructor(e,i){super(e,i),this._diffuseTexture=null,this.diffuseTexture=null,this._emissiveTexture=null,this.emissiveTexture=null,this._bumpTexture=null,this.bumpTexture=null,this._shadeTexture=null,this.shadeTexture=null,this._receiveShadowTexture=null,this.receiveShadowTexture=null,this._shadingGradeTexture=null,this.shadingGradeTexture=null,this._rimTexture=null,this.rimTexture=null,this._matCapTexture=null,this.matCapTexture=null,this._outlineWidthTexture=null,this.outlineWidthTexture=null,this._uvAnimationMaskTexture=null,this.uvAnimationMaskTexture=null,this.diffuseColor=new a.Color3(1,1,1),this.ambientColor=new a.Color3(0,0,0),this.emissiveColor=new a.Color3(0,0,0),this.shadeColor=new a.Color3(.97,.81,.86),this.rimColor=new a.Color3(0,0,0),this.outlineColor=new a.Color3(0,0,0),this.useEmissiveAsIllumination=!1,this.linkEmissiveWithDiffuse=!1,this.useReflectionOverAlpha=!1,this._disableLighting=!1,this.useObjectSpaceNormalMap=!1,this.useParallax=!1,this.useParallaxOcclusion=!1,this.specularSupported=!1,this.useLightmapAsShadowmap=!1,this.useVertexColor=!1,this.useBones=!0,this.useMorphTargets=!0,this.useVertexAlpha=!1,this.useBakedVertexAnimation=!1,this.alphaCutOff=.4,this._useAlphaFromDiffuseTexture=!0,this._maxSimultaneousLights=4,this._invertNormalMapX=!0,this._invertNormalMapY=!0,this._twoSidedLighting=!1,this._renderTargets=new n.SmartArray(16),this._worldViewProjectionMatrix=o.Matrix.Zero(),this._globalAmbientColor=new a.Color3(0,0,0),this._cacheHasRenderTargetTextures=!1,this._bumpScale=1,this._receiveShadowRate=1,this._shadingGradeRate=1,this._shadeShift=0,this._shadeToony=.9,this._lightColorAttenuation=0,this._indirectLightIntensity=.1,this._rimLightingMix=0,this._rimFresnelPower=1,this._rimLift=0,this._outlineWidth=.5,this._outlineScaledMaxDistance=1,this._outlineLightingMix=1,this._uvAnimationScrollX=0,this._uvAnimationScrollY=0,this._uvAnimationRotation=0,this._alphaTest=!1,this._alphaBlend=!1,this._debugMode=T.None,this.debugMode=T.None,this._outlineWidthMode=D.None,this.isOutline=0,this.outlineColorMode=N.MixedLighting,this._cullMode=L.Back,this._outlineCullMode=L.Front,this.outlineCullMode=L.Front,this.storedCullMode=L.Back,this.flipU=!1,this.flipV=!1,this.detailMap=new c.DetailMapConfiguration(this),this._attachImageProcessingConfiguration(null),this.getRenderTargetTextures=()=>(this._renderTargets.reset(),this._eventInfo.renderTargets=this._renderTargets,this._callbackPluginEventFillRenderTargetTextures(this._eventInfo),this._renderTargets),m.Effect.IncludesShadersStore.mtoonUboDeclaration||(m.Effect.IncludesShadersStore.mtoonUboDeclaration="// it will be replaced to UboDeclaration(WebGL2) or VertexDeclaration(WebGL1).\n\nlayout(std140, column_major) uniform;\n\nuniform Material\n{\n    // Color & Texture\n    vec4 vDiffuseColor;\n    vec2 vDiffuseInfos;\n    mat4 diffuseMatrix;\n    vec4 vEmissiveColor;\n    vec2 vEmissiveInfos;\n    mat4 emissiveMatrix;\n    vec3 vBumpInfos;\n    mat4 bumpMatrix;\n    vec3 vShadeColor;\n    vec2 vShadeInfos;\n    mat4 shadeMatrix;\n    vec2 vReceiveShadowInfos;\n    mat4 receiveShadowMatrix;\n    vec2 vShadingGradeInfos;\n    mat4 shadingGradeMatrix;\n    vec3 vRimColor;\n    vec2 vRimInfos;\n    mat4 rimMatrix;\n    vec2 vMatCapInfos;\n    mat4 matCapMatrix;\n    vec4 vOutlineColor;\n    vec2 vOutlineWidthInfos;\n    mat4 outlineWidthMatrix;\n    vec2 vUvAnimationMaskInfos;\n    mat4 uvAnimationMaskMatrix;\n\n    // babylon specific\n    vec2 vTangentSpaceParams;\n    float pointSize;\n\n    // MToon params\n    float shadingGradeRate;\n    float receiveShadowRate;\n    float shadeShift;\n    float shadeToony;\n    float lightColorAttenuation;\n    float indirectLightIntensity;\n    float rimLightingMix;\n    float rimFresnelPower;\n    float rimLift;\n    float outlineWidth;\n    float outlineScaledMaxDistance;\n    float outlineLightingMix;\n    float uvAnimationScrollX;\n    float uvAnimationScrollY;\n    float uvAnimationRotation;\n\n    vec3 vEyeUp;\n    float alphaCutOff;\n    vec3 vAmbientColor;\n    float aspect;\n    float isOutline;\n    vec4 time;\n};\n\n// babylon specific\n#include<sceneUboDeclaration>\n#include<meshUboDeclaration>\n",m.Effect.IncludesShadersStore.mtoonVertexDeclaration="// Uniforms\nuniform mat4 viewProjection;\nuniform mat4 view;\nuniform mat4 projection;\nuniform float outlineWidth;\nuniform float outlineScaledMaxDistance;\nuniform float outlineLightingMix;\nuniform float isOutline;\nuniform float aspect;\n\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n\n#ifdef SHADE\nuniform vec2 vShadeInfos;\nuniform mat4 shadeMatrix;\n#endif\n\n#ifdef RECEIVE_SHADOW\nuniform vec2 vReceiveShadowInfos;\nuniform mat4 receiveShadowMatrix;\n#endif\n\n#ifdef SHADING_GRADE\nuniform vec2 vShadingGradeInfos;\nuniform mat4 shadingGradeMatrix;\n#endif\n\n#ifdef RIM\nuniform vec2 vRimInfos;\nuniform mat4 rimMatrix;\n#endif\n\n#ifdef MATCAP\nuniform vec2 vMatCapInfos;\nuniform mat4 matCapMatrix;\n#endif\n\n#ifdef OUTLINE_WIDTH\nuniform vec2 vOutlineWidthInfos;\nuniform mat4 outlineWidthMatrix;\n#endif\n\n#ifdef UV_ANIMATION_MASK\nuniform vec2 vUvAnimationMaskInfos;\nuniform mat4 uvAnimationMaskMatrix;\n#endif\n\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n",m.Effect.IncludesShadersStore.mtoonFragmentDeclaration="uniform vec4 vEyePosition;\n\n// Colors\nuniform vec4 vDiffuseColor;\nuniform vec3 vEmissiveColor;\nuniform vec3 vShadeColor;\nuniform vec3 vRimColor;\nuniform vec4 vOutlineColor;\nuniform vec3 vAmbientColor;\n\nuniform vec3 vEyeUp;\nuniform float aspect;\nuniform float alphaCutOff;\nuniform float visibility;\nuniform float isOutline;\nuniform vec4 time;\n\n// Samplers\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n\n#ifdef SHADE\nuniform vec2 vShadeInfos;\n#endif\n\n#ifdef RECEIVE_SHADOW\nuniform vec2 vReceiveShadowInfos;\n#endif\n\n#ifdef SHADING_GRADE\nuniform vec2 vShadingGradeInfos;\n#endif\n\n#ifdef RIM\nuniform vec2 vRimInfos;\n#endif\n\n#ifdef MATCAP\nuniform vec2 vMatCapInfos;\n#endif\n\n#ifdef OUTLINE_WIDTH\nuniform vec2 vOutlineWidthInfos;\n#endif\n\n#ifdef UV_ANIMATION_MASK\nuniform vec2 vUvAnimationMaskInfos;\n#endif\n\n// MToon params\nuniform float shadingGradeRate;\nuniform float receiveShadowRate;\nuniform float shadeShift;\nuniform float shadeToony;\nuniform float lightColorAttenuation;\nuniform float indirectLightIntensity;\nuniform float rimLightingMix;\nuniform float rimFresnelPower;\nuniform float rimLift;\nuniform float outlineWidth;\nuniform float outlineScaledMaxDistance;\nuniform float outlineLightingMix;\nuniform float uvAnimationScrollX;\nuniform float uvAnimationScrollY;\nuniform float uvAnimationRotation;\n",m.Effect.IncludesShadersStore.mtoonFragmentFunctions="\n/**\n* Compute Directional or Point light direction\n*/\nvec3 computeLightDirection(vec4 lightData) {\n    return normalize(mix(lightData.xyz - vPositionW, -lightData.xyz, lightData.w));\n}\n\n/**\n* Compute Spot Light direction\n*/\nvec3 computeSpotLightDirection(vec4 lightData) {\n    return normalize(lightData.xyz - vPositionW);\n}\n\n/**\n* Compute Hemispheric light direction\n*/\nvec3 computeHemisphericLightDirection(vec4 lightData, vec3 vNormal) {\n    return normalize(lightData.xyz);\n}\n\n/**\n* Compute MToon diffuse lighting\n*/\nvec4 computeMToonDiffuseLighting(vec3 worldView, vec3 worldNormal, vec2 mainUv, vec3 lightDirection, vec4 lightDiffuse, float shadowAttenuation) {\n    float _receiveShadow = receiveShadowRate;\n#ifdef RECEIVE_SHADOW\n    _receiveShadow = _receiveShadow * texture2D(receiveShadowSampler, mainUv).r * vReceiveShadowInfos.y;\n#endif\n\n    float _shadingGrade = 0.0;\n#ifdef SHADING_GRADE\n    _shadingGrade = 1.0 - texture2D(shadingGradeSampler, mainUv).r * vShadingGradeInfos.y;\n#endif\n    _shadingGrade = 1.0 - shadingGradeRate * _shadingGrade;\n\n    // Lighting\n    vec3 _lightColor = lightDiffuse.rgb * step(0.5, length(lightDirection)); // length(lightDir) is zero if directional light is disabled.\n    float _dotNL = dot(lightDirection, worldNormal);\n#ifdef MTOON_FORWARD_ADD\n    float _lightAttenuation = 1.0;\n#else\n    float _lightAttenuation = shadowAttenuation * mix(1.0, shadowAttenuation, _receiveShadow);\n#endif\n\n    // lighting intensity\n    float _lightIntensity = _dotNL;\n    _lightIntensity = _lightIntensity * 0.5 + 0.5; // from [-1, +1] to [0, 1]\n    _lightIntensity = _lightIntensity * _lightAttenuation; // receive shadow\n    _lightIntensity = _lightIntensity * _shadingGrade; // darker\n    _lightIntensity = _lightIntensity * 2.0 - 1.0; // from [0, 1] to [-1, +1]\n    // tooned. mapping from [minIntensityThreshold, maxIntensityThreshold] to [0, 1]\n    float _maxIntensityThreshold = mix(1.0, shadeShift, shadeToony);\n    float _minIntensityThreshold = shadeShift;\n    _lightIntensity = clamp((_lightIntensity - _minIntensityThreshold) / max(EPS_COL, (_maxIntensityThreshold - _minIntensityThreshold)), 0.0, 1.0);\n\n    // Albedo color\n    vec3 _shade = vShadeColor;\n#ifdef SHADE\n    _shade = _shade * texture2D(shadeSampler, mainUv).rgb * vShadeInfos.y;\n#endif\n\n    vec4 _lit = vDiffuseColor;\n#ifdef DIFFUSE\n    _lit = _lit * texture2D(diffuseSampler, mainUv) * vDiffuseInfos.y;\n#endif\n    vec3 _col = mix(_shade.rgb, _lit.rgb, _lightIntensity);\n\n    // Direct Light\n    vec3 _lighting = _lightColor;\n    _lighting = mix(_lighting, vec3(max(EPS_COL, max(_lighting.x, max(_lighting.y, _lighting.z)))), lightColorAttenuation); // color atten\n#ifdef MTOON_FORWARD_ADD\n    _lighting *= 0.5; // darken if additional light\n    _lighting *= min(0, dotNL) + 1.0; // darken dotNL < 0 area by using half lambert\n    _lighting *= shadowAttenuation; // darken if receiving shadow\n#else\n    // base light does not darken.\n#endif\n    _col *= _lighting;\n\n    // Indirect Light\n#ifdef MTOON_FORWARD_ADD\n#else\n    vec3 _toonedGI = vAmbientColor.rgb; // TODO: GI\n    vec3 _indirectLighting = mix(_toonedGI, vAmbientColor.rgb, indirectLightIntensity);\n    _indirectLighting = mix(_indirectLighting, vec3(max(EPS_COL, max(_indirectLighting.x, max(_indirectLighting.y, _indirectLighting.z)))), lightColorAttenuation); // color atten\n    _col += _indirectLighting * _lit.rgb;\n\n    _col = min(_col.rgb, _lit.rgb); // comment out if you want to PBR absolutely.\n#endif\n\n    // parametric rim lighting\n#ifdef MTOON_FORWARD_ADD\n    vec3 _staticRimLighting = vec3(0.0);\n    vec3 _mixedRimLighting = _lighting;\n#else\n    vec3 _staticRimLighting = vec3(1.0);\n    vec3 _mixedRimLighting = _lighting + _indirectLighting;\n#endif\n    vec3 _rimLighting = mix(_staticRimLighting, _mixedRimLighting, rimLightingMix);\n    vec3 _rimColor = vRimColor.rgb;\n#ifdef RIM\n    _rimColor = _rimColor * texture2D(rimSampler, vRimUV + mainUv).rgb * vRimInfos.y;\n#endif\n    vec3 _rim = pow(clamp(1.0 - dot(worldNormal, worldView) + rimLift, 0.0, 1.0), rimFresnelPower) * _rimColor.rgb;\n    _col += mix(_rim * _rimLighting, vec3(0.0), isOutline);\n\n    // additive matcap\n#ifdef MTOON_FORWARD_ADD\n#else\n#ifdef MATCAP\n    vec3 _worldViewUp = normalize(vEyeUp - worldView * dot(worldView, vEyeUp));\n    vec3 _worldViewRight = normalize(cross(worldView, _worldViewUp));\n    vec2 _matCapUv = vec2(dot(_worldViewRight, worldNormal), dot(_worldViewUp, worldNormal)) * 0.5 + 0.5;\n    // uv.y is reversed\n    _matCapUv.y = (1.0 - _matCapUv.y);\n    vec3 _matCapLighting = texture2D(matCapSampler, _matCapUv).rgb * vMatCapInfos.y;\n    _col += mix(_matCapLighting, vec3(0.0), isOutline);\n#endif\n#endif\n\n    // Emission\n#ifdef MTOON_FORWARD_ADD\n#else\n    vec3 _emission = vEmissiveColor.rgb;\n#ifdef EMISSIVE\n    _emission *= texture2D(emissiveSampler, mainUv).rgb * vEmissiveInfos.y;\n#endif\n    _col += mix(_emission, vec3(0.0), isOutline);\n#endif\n\n    float _alpha = 1.0;\n\n#if defined(ALPHABLEND) || defined(ALPHATEST)\n    _alpha = mix(_lit.a, _lit.a * vOutlineColor.a, isOutline);\n#endif\n\n    // outline\n#ifdef MTOON_OUTLINE_COLOR_FIXED\n    _col = mix(_col, vOutlineColor.rgb, isOutline);\n#elif defined(MTOON_OUTLINE_COLOR_MIXED)\n    _col = mix(_col, vOutlineColor.rgb * mix(vec3(1.0), _col, outlineLightingMix), isOutline);\n#else\n#endif\n\n    // debug\n#ifdef MTOON_DEBUG_NORMAL\n    #ifdef MTOON_FORWARD_ADD\n        return vec4(0.0);\n    #else\n        return vec4(worldNormal * 0.5 + 0.5, _lit.a);\n    #endif\n#elif defined(MTOON_DEBUG_LITSHADERATE)\n    #ifdef MTOON_FORWARD_ADD\n        return vec4(0.0);\n    #else\n        return vec4(_lightIntensity, _lit.a);\n    #endif\n#endif\n\n    return vec4(_col, _alpha);\n}\n",m.Effect.IncludesShadersStore.mtoonLightFragment="#ifdef LIGHT{X}\n    #if defined(SHADOWONLY) || defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X}) && defined(LIGHTMAPNOSPECULAR{X})\n        //No light calculation\n    #else\n        #ifdef PBR\n            // Compute Pre Lighting infos\n            #ifdef SPOTLIGHT{X}\n                preInfo = computePointAndSpotPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(POINTLIGHT{X})\n                preInfo = computePointAndSpotPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(HEMILIGHT{X})\n                preInfo = computeHemisphericPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #elif defined(DIRLIGHT{X})\n                preInfo = computeDirectionalPreLightingInfo(light{X}.vLightData, viewDirectionW, normalW);\n            #endif\n\n            preInfo.NdotV = NdotV;\n\n            // Compute Attenuation infos\n            #ifdef SPOTLIGHT{X}\n                #ifdef LIGHT_FALLOFF_GLTF{X}\n                    preInfo.attenuation = computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared, light{X}.vLightFalloff.y);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_GLTF(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightFalloff.z, light{X}.vLightFalloff.w);\n                #elif defined(LIGHT_FALLOFF_PHYSICAL{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_Physical(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w);\n                #elif defined(LIGHT_FALLOFF_STANDARD{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Standard(preInfo.lightOffset, light{X}.vLightFalloff.x);\n                    preInfo.attenuation *= computeDirectionalLightFalloff_Standard(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w, light{X}.vLightData.w);\n                #else\n                    preInfo.attenuation = computeDistanceLightFalloff(preInfo.lightOffset, preInfo.lightDistanceSquared, light{X}.vLightFalloff.x, light{X}.vLightFalloff.y);\n                    preInfo.attenuation *= computeDirectionalLightFalloff(light{X}.vLightDirection.xyz, preInfo.L, light{X}.vLightDirection.w, light{X}.vLightData.w, light{X}.vLightFalloff.z, light{X}.vLightFalloff.w);\n                #endif\n            #elif defined(POINTLIGHT{X})\n                #ifdef LIGHT_FALLOFF_GLTF{X}\n                    preInfo.attenuation = computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared, light{X}.vLightFalloff.y);\n                #elif defined(LIGHT_FALLOFF_PHYSICAL{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n                #elif defined(LIGHT_FALLOFF_STANDARD{X})\n                    preInfo.attenuation = computeDistanceLightFalloff_Standard(preInfo.lightOffset, light{X}.vLightFalloff.x);\n                #else\n                    preInfo.attenuation = computeDistanceLightFalloff(preInfo.lightOffset, preInfo.lightDistanceSquared, light{X}.vLightFalloff.x, light{X}.vLightFalloff.y);\n                #endif\n            #else\n                preInfo.attenuation = 1.0;\n            #endif\n\n            // Simulates Light radius for diffuse and spec term\n            // clear coat is using a dedicated roughness\n            #ifdef HEMILIGHT{X}\n                preInfo.roughness = roughness;\n            #else\n                preInfo.roughness = adjustRoughnessFromLightProperties(roughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n            #endif\n\n            // Diffuse contribution\n            #ifdef HEMILIGHT{X}\n                info.diffuse = computeHemisphericDiffuseLighting(preInfo, light{X}.vLightDiffuse.rgb, light{X}.vLightGround);\n            #elif defined(SS_TRANSLUCENCY)\n                info.diffuse = computeDiffuseAndTransmittedLighting(preInfo, light{X}.vLightDiffuse.rgb, subSurfaceOut.transmittance);\n            #else\n                info.diffuse = computeDiffuseLighting(preInfo, light{X}.vLightDiffuse.rgb);\n            #endif\n\n            // Specular contribution\n            #ifdef SPECULARTERM\n                #ifdef ANISOTROPIC\n                    info.specular = computeAnisotropicSpecularLighting(preInfo, viewDirectionW, normalW, anisotropicOut.anisotropicTangent, anisotropicOut.anisotropicBitangent, anisotropicOut.anisotropy, clearcoatOut.specularEnvironmentR0, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n                #else\n                    info.specular = computeSpecularLighting(preInfo, normalW, clearcoatOut.specularEnvironmentR0, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n                #endif\n            #endif\n\n            // Sheen contribution\n            #ifdef SHEEN\n                #ifdef SHEEN_LINKWITHALBEDO\n                    // BE Carefull: Sheen intensity is replacing the roughness value.\n                    preInfo.roughness = sheenOut.sheenIntensity;\n                #else\n                    #ifdef HEMILIGHT{X}\n                        preInfo.roughness = sheenOut.sheenRoughness;\n                    #else\n                        preInfo.roughness = adjustRoughnessFromLightProperties(sheenOut.sheenRoughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n                    #endif\n                #endif\n                info.sheen = computeSheenLighting(preInfo, normalW, sheenOut.sheenColor, specularEnvironmentR90, AARoughnessFactors.x, light{X}.vLightDiffuse.rgb);\n            #endif\n\n            // Clear Coat contribution\n            #ifdef CLEARCOAT\n                // Simulates Light radius\n                #ifdef HEMILIGHT{X}\n                    preInfo.roughness = clearcoatOut.clearCoatRoughness;\n                #else\n                    preInfo.roughness = adjustRoughnessFromLightProperties(clearcoatOut.clearCoatRoughness, light{X}.vLightSpecular.a, preInfo.lightDistance);\n                #endif\n\n                info.clearCoat = computeClearCoatLighting(preInfo, clearcoatOut.clearCoatNormalW, clearcoatOut.clearCoatAARoughnessFactors.x, clearcoatOut.clearCoatIntensity, light{X}.vLightDiffuse.rgb);\n\n                #ifdef CLEARCOAT_TINT\n                    // Absorption\n                    absorption = computeClearCoatLightingAbsorption(clearcoatOut.clearCoatNdotVRefract, preInfo.L, clearcoatOut.clearCoatNormalW, clearcoatOut.clearCoatColor, clearcoatOut.clearCoatThickness, clearcoatOut.clearCoatIntensity);\n                    info.diffuse *= absorption;\n                    #ifdef SPECULARTERM\n                        info.specular *= absorption;\n                    #endif\n                #endif\n\n                // Apply energy conservation on diffuse and specular term.\n                info.diffuse *= info.clearCoat.w;\n                #ifdef SPECULARTERM\n                    info.specular *= info.clearCoat.w;\n                #endif\n                #ifdef SHEEN\n                    info.sheen *= info.clearCoat.w;\n                #endif\n            #endif\n        #else\n            #ifdef SPOTLIGHT{X}\n                info = computeSpotLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDirection, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightDiffuse.a, glossiness);\n            #elif defined(HEMILIGHT{X})\n                info = computeHemisphericLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightGround, glossiness);\n            #elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\n                info = computeLighting(viewDirectionW, normalW, light{X}.vLightData, light{X}.vLightDiffuse.rgb, light{X}.vLightSpecular.rgb, light{X}.vLightDiffuse.a, glossiness);\n            #endif\n        #endif\n\n        #ifdef PROJECTEDLIGHTTEXTURE{X}\n            info.diffuse *= computeProjectionTextureDiffuseLighting(projectionLightSampler{X}, textureProjectionMatrix{X});\n        #endif\n    #endif\n\n    #ifdef SHADOW{X}\n        #ifdef SHADOWCSM{X}\n            for (int i = 0; i < SHADOWCSMNUM_CASCADES{X}; i++)\n            {\n                #ifdef SHADOWCSM_RIGHTHANDED{X}\n                    diff{X} = viewFrustumZ{X}[i] + vPositionFromCamera{X}.z;\n                #else\n                    diff{X} = viewFrustumZ{X}[i] - vPositionFromCamera{X}.z;\n                #endif\n                if (diff{X} >= 0.) {\n                    index{X} = i;\n                    break;\n                }\n            }\n\n            #ifdef SHADOWCSMUSESHADOWMAXZ{X}\n            if (index{X} >= 0)\n            #endif\n            {\n                #if defined(SHADOWPCF{X})\n                    #if defined(SHADOWLOWQUALITY{X})\n                        shadow = computeShadowWithCSMPCF1(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #elif defined(SHADOWMEDIUMQUALITY{X})\n                        shadow = computeShadowWithCSMPCF3(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #else\n                        shadow = computeShadowWithCSMPCF5(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                    #endif\n                #elif defined(SHADOWPCSS{X})\n                    #if defined(SHADOWLOWQUALITY{X})\n                        shadow = computeShadowWithCSMPCSS16(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #elif defined(SHADOWMEDIUMQUALITY{X})\n                        shadow = computeShadowWithCSMPCSS32(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #else\n                        shadow = computeShadowWithCSMPCSS64(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                    #endif\n                #else\n                    shadow = computeShadowCSM(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                #endif\n\n                #ifdef SHADOWCSMDEBUG{X}\n                    shadowDebug{X} = vec3(shadow) * vCascadeColorsMultiplier{X}[index{X}];\n                #endif\n\n                #ifndef SHADOWCSMNOBLEND{X}\n                    float frustumLength = frustumLengths{X}[index{X}];\n                    float diffRatio = clamp(diff{X} / frustumLength, 0., 1.) * cascadeBlendFactor{X};\n                    if (index{X} < (SHADOWCSMNUM_CASCADES{X} - 1) && diffRatio < 1.)\n                    {\n                        index{X} += 1;\n                        float nextShadow = 0.;\n                        #if defined(SHADOWPCF{X})\n                            #if defined(SHADOWLOWQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCF1(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #elif defined(SHADOWMEDIUMQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCF3(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #else\n                                nextShadow = computeShadowWithCSMPCF5(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                            #endif\n                        #elif defined(SHADOWPCSS{X})\n                            #if defined(SHADOWLOWQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCSS16(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #elif defined(SHADOWMEDIUMQUALITY{X})\n                                nextShadow = computeShadowWithCSMPCSS32(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #else\n                                nextShadow = computeShadowWithCSMPCSS64(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w, lightSizeUVCorrection{X}[index{X}], depthCorrection{X}[index{X}], penumbraDarkness{X});\n                            #endif\n                        #else\n                            nextShadow = computeShadowCSM(float(index{X}), vPositionFromLight{X}[index{X}], vDepthMetric{X}[index{X}], shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n                        #endif\n\n                        shadow = mix(nextShadow, shadow, diffRatio);\n                        #ifdef SHADOWCSMDEBUG{X}\n                            shadowDebug{X} = mix(vec3(nextShadow) * vCascadeColorsMultiplier{X}[index{X}], shadowDebug{X}, diffRatio);\n                        #endif\n                    }\n                #endif\n            }\n        #elif defined(SHADOWCLOSEESM{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithCloseESMCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithCloseESM(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWESM{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithESMCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithESM(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.z, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPOISSON{X})\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowWithPoissonSamplingCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.x, light{X}.depthValues);\n            #else\n                shadow = computeShadowWithPoissonSampling(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPCF{X})\n            #if defined(SHADOWLOWQUALITY{X})\n                shadow = computeShadowWithPCF1(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #elif defined(SHADOWMEDIUMQUALITY{X})\n                shadow = computeShadowWithPCF3(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #else\n                shadow = computeShadowWithPCF5(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.yz, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #elif defined(SHADOWPCSS{X})\n            #if defined(SHADOWLOWQUALITY{X})\n                shadow = computeShadowWithPCSS16(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #elif defined(SHADOWMEDIUMQUALITY{X})\n                shadow = computeShadowWithPCSS32(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #else\n                shadow = computeShadowWithPCSS64(vPositionFromLight{X}, vDepthMetric{X}, depthSampler{X}, shadowSampler{X}, light{X}.shadowsInfo.y, light{X}.shadowsInfo.z, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #else\n            #if defined(SHADOWCUBE{X})\n                shadow = computeShadowCube(light{X}.vLightData.xyz, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.depthValues);\n            #else\n                shadow = computeShadow(vPositionFromLight{X}, vDepthMetric{X}, shadowSampler{X}, light{X}.shadowsInfo.x, light{X}.shadowsInfo.w);\n            #endif\n        #endif\n\n        #ifdef SHADOWONLY\n            #ifndef SHADOWINUSE\n                #define SHADOWINUSE\n            #endif\n            globalShadow += shadow;\n            shadowLightCount += 1.0;\n        #endif\n    #else\n        shadow = 1.;\n    #endif\n\n    #ifndef SHADOWONLY\n        #ifdef CUSTOMUSERLIGHTING\n            // Compute and reflect MToon lighting\n            #ifdef SPOTLIGHT{X}\n                lightDirection = computeSpotLightDirection(light{X}.vLightData);\n            #elif defined(HEMILIGHT{X})\n                lightDirection = computeHemisphericLightDirection(light{X}.vLightData, normalW.xyz);\n            #elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\n                lightDirection = computeLightDirection(light{X}.vLightData);\n            #endif\n            mtoonDiffuse = computeMToonDiffuseLighting(viewDirectionW.xyz, normalW.xyz, mainUv, lightDirection, light{X}.vLightDiffuse.rgba, shadow);\n            diffuseBase += mtoonDiffuse.rgb;\n            alpha = min(alpha, mtoonDiffuse.a);\n            #if defined(ALPHATEST) && ALPHATEST\n                alpha = (alpha - alphaCutOff) / max(fwidth(alpha), EPS_COL) + 0.5; // Alpha to Coverage\n                if (alpha < alphaCutOff) {\n                    discard;\n                }\n                alpha = 1.0; // Discarded, otherwise it should be assumed to have full opacity\n            #else\n                if (alpha - 0.0001 < 0.000) { // Slightly improves rendering with layered transparency\n                    discard;\n                }\n            #endif\n        #elif defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X})\n            diffuseBase += lightmapColor.rgb * shadow;\n            #ifdef SPECULARTERM\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    specularBase += info.specular * shadow * lightmapColor.rgb;\n                #endif\n            #endif\n            #ifdef CLEARCOAT\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    clearCoatBase += info.clearCoat.rgb * shadow * lightmapColor.rgb;\n                #endif\n            #endif\n            #ifdef SHEEN\n                #ifndef LIGHTMAPNOSPECULAR{X}\n                    sheenBase += info.sheen.rgb * shadow;\n                #endif\n            #endif\n        #else\n            #ifdef SHADOWCSMDEBUG{X}\n                diffuseBase += info.diffuse * shadowDebug{X};\n            #else\n                diffuseBase += info.diffuse * shadow;\n            #endif\n            #ifdef SPECULARTERM\n                specularBase += info.specular * shadow;\n            #endif\n            #ifdef CLEARCOAT\n                clearCoatBase += info.clearCoat.rgb * shadow;\n            #endif\n            #ifdef SHEEN\n                sheenBase += info.sheen.rgb * shadow;\n            #endif\n        #endif\n    #endif\n#endif\n",m.Effect.IncludesShadersStore.mtoonBumpFragment="// replace vBumpUV to mainUv\nvec2 uvOffset = vec2(0.0, 0.0);\n\n#if defined(BUMP) || defined(PARALLAX) || defined(DETAIL)\n    #ifdef NORMALXYSCALE\n        float normalScale = 1.0;\n    #elif defined(BUMP)\n        float normalScale = vBumpInfos.y;\n    #else\n        float normalScale = 1.0;\n    #endif\n\n    #if defined(TANGENT) && defined(NORMAL)\n        mat3 TBN = vTBN;\n    #elif defined(BUMP)\n        // vec2 TBNUV = gl_FrontFacing ? vBumpUV : -vBumpUV;\n        vec2 TBNUV = gl_FrontFacing ? mainUv : -mainUv;\n        mat3 TBN = cotangent_frame(normalW * normalScale, vPositionW, TBNUV, vTangentSpaceParams);\n    #else\n        vec2 TBNUV = gl_FrontFacing ? vDetailUV : -vDetailUV;\n        mat3 TBN = cotangent_frame(normalW * normalScale, vPositionW, TBNUV, vec2(1., 1.));\n    #endif\n#elif defined(ANISOTROPIC)\n    #if defined(TANGENT) && defined(NORMAL)\n        mat3 TBN = vTBN;\n    #else\n        // flip the uv for the backface\n        vec2 TBNUV = gl_FrontFacing ? vMainUV1 : -vMainUV1;\n        mat3 TBN = cotangent_frame(normalW, vPositionW, TBNUV, vec2(1., 1.));\n    #endif\n#endif\n\n#ifdef PARALLAX\n    mat3 invTBN = transposeMat3(TBN);\n\n    #ifdef PARALLAXOCCLUSION\n        // uvOffset = parallaxOcclusion(invTBN * -viewDirectionW, invTBN * normalW, vBumpUV, vBumpInfos.z);\n        uvOffset = parallaxOcclusion(invTBN * -viewDirectionW, invTBN * normalW, mainUv, vBumpInfos.z);\n    #else\n        uvOffset = parallaxOffset(invTBN * viewDirectionW, vBumpInfos.z);\n    #endif\n#endif\n\n#ifdef DETAIL\n    vec4 detailColor = texture2D(detailSampler, vDetailUV + uvOffset);\n    vec2 detailNormalRG = detailColor.wy * 2.0 - 1.0;\n    float detailNormalB = sqrt(1. - saturate(dot(detailNormalRG, detailNormalRG)));\n    vec3 detailNormal = vec3(detailNormalRG, detailNormalB);\n#endif\n\n#ifdef BUMP\n    #ifdef OBJECTSPACE_NORMALMAP\n        // normalW = normalize(texture2D(bumpSampler, vBumpUV).xyz  * 2.0 - 1.0);\n        normalW = normalize(texture2D(bumpSampler, mainUv).xyz  * 2.0 - 1.0);\n        normalW = normalize(mat3(normalMatrix) * normalW);\n    #elif !defined(DETAIL)\n        // normalW = perturbNormal(TBN, texture2D(bumpSampler, vBumpUV + uvOffset).xyz, vBumpInfos.y);\n        normalW = perturbNormal(TBN, texture2D(bumpSampler, mainUv + uvOffset).xyz, vBumpInfos.y);\n    #else\n        // vec3 bumpNormal = texture2D(bumpSampler, vBumpUV + uvOffset).xyz * 2.0 - 1.0;\n        vec3 bumpNormal = texture2D(bumpSampler, mainUv + uvOffset).xyz * 2.0 - 1.0;\n        // Reference for normal blending: https://blog.selfshadow.com/publications/blending-in-detail/\n        #if DETAIL_NORMALBLENDMETHOD == 0 // whiteout\n            detailNormal.xy *= vDetailInfos.z;\n            vec3 blendedNormal = normalize(vec3(bumpNormal.xy + detailNormal.xy, bumpNormal.z * detailNormal.z));\n        #elif DETAIL_NORMALBLENDMETHOD == 1 // RNM\n            detailNormal.xy *= vDetailInfos.z;\n            bumpNormal += vec3(0.0, 0.0, 1.0);\n            detailNormal *= vec3(-1.0, -1.0, 1.0);\n            vec3 blendedNormal = bumpNormal * dot(bumpNormal, detailNormal) / bumpNormal.z - detailNormal;\n        #endif\n        normalW = perturbNormalBase(TBN, blendedNormal, vBumpInfos.y);\n    #endif\n#elif defined(DETAIL)\n        detailNormal.xy *= vDetailInfos.z;\n        normalW = perturbNormalBase(TBN, detailNormal, vDetailInfos.z);\n#endif\n",m.Effect.ShadersStore.mtoonVertexShader="// it is based on default.vertex.fx\n// This include is special, it will be replaced to UboDeclaration(WebGL2) or VertexDeclaration(WebGL1).\n// @see effect.ts\n#include<__decl__mtoonVertex>\n\n// Attributes\n\n#define CUSTOM_VERTEX_BEGIN\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#include<uvAttributeDeclaration>[2..7]\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n\n#include<helperFunctions>\n\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n// Uniforms\n#include<instancesDeclaration>\n#include<prePassVertexDeclaration>\n\n#include<mainUVVaryingDeclaration>[1..7]\n\n#include<samplerVertexDeclaration>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,DETAIL,_VARYINGNAME_,Detail)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,AMBIENT,_VARYINGNAME_,Ambient)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,OPACITY,_VARYINGNAME_,Opacity)\n#include<samplerVertexDeclaration>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,LIGHTMAP,_VARYINGNAME_,Lightmap)\n// # if defined(SPECULARTERM)\n// # include<samplerVertexDeclaration>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular)\n// # endif\n#include<samplerVertexDeclaration>(_DEFINENAME_,BUMP,_VARYINGNAME_,Bump)\n#include<samplerVertexDeclaration>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade)\n#include<samplerVertexDeclaration>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow)\n#include<samplerVertexDeclaration>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade)\n#include<samplerVertexDeclaration>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim)\n#include<samplerVertexDeclaration>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap)\n#include<samplerVertexDeclaration>(_DEFINENAME_,OUTLINE_WIDTH,_VARYINGNAME_,OutlineWidth)\n#include<samplerVertexDeclaration>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask)\n\n// Additional Uniforms\n#ifdef OUTLINE_WIDTH\n    uniform sampler2D outlineWidthSampler;\n#endif\n\n// Output\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR)\nvarying vec4 vColor;\n#endif\n\n#include<bumpVertexDeclaration>\n\n#include<clipPlaneVertexDeclaration>\n\n#include<fogVertexDeclaration>\n#include<__decl__lightVxFragment>[0..maxSimultaneousLights]\n\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n\n// # ifdef REFLECTIONMAP_SKYBOX\n// varying vec3 vPositionUVW;\n// # endif\n\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n// varying vec3 vDirectionW;\n// # endif\n\n#include<logDepthDeclaration>\n#define CUSTOM_VERTEX_DEFINITIONS\n\nvoid main(void) {\n\n    #define CUSTOM_VERTEX_MAIN_BEGIN\n\n    vec3 positionUpdated = position;\n#ifdef NORMAL\n    vec3 normalUpdated = normal;\n#endif\n#ifdef TANGENT\n    vec4 tangentUpdated = tangent;\n#endif\n#ifdef UV1\n    vec2 uvUpdated = uv;\n#endif\n\n#include<morphTargetsVertexGlobal>\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n\n// # ifdef REFLECTIONMAP_SKYBOX\n//     vPositionUVW = positionUpdated;\n// # endif\n\n#define CUSTOM_VERTEX_UPDATE_POSITION\n\n#define CUSTOM_VERTEX_UPDATE_NORMAL\n\n#include<instancesVertex>\n\n#if defined(PREPASS) && defined(PREPASS_VELOCITY) && !defined(BONES_VELOCITY_ENABLED)\n    // Compute velocity before bones computation\n    vCurrentPosition = viewProjection * finalWorld * vec4(positionUpdated, 1.0);\n    vPreviousPosition = previousViewProjection * finalPreviousWorld * vec4(positionUpdated, 1.0);\n#endif\n\n#include<bonesVertex>\n#include<bakedVertexAnimation>\n\n    // Texture coordinates\n#ifndef UV1\n    vec2 uvUpdated = vec2(0., 0.);\n#endif\n#ifdef MAINUV1\n    vMainUV1 = uvUpdated;\n#endif\n#include<uvVariableDeclaration>[2..7]\n\n    float outlineTex = 1.0;\n    if (isOutline == 1.0) {\n#ifdef OUTLINE_WIDTH\n    #if OUTLINE_WIDTHDIRECTUV == 0\n        if (vOutlineWidthInfos.x == 0.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uvUpdated, 1.0, 0.0));\n        }\n        #ifdef UV2\n        else if (vOutlineWidthInfos.x == 1.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv2, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV3\n        else if (vOutlineWidthInfos.x == 2.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv3, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV4\n        else if (vOutlineWidthInfos.x == 3.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv4, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV5\n        else if (vOutlineWidthInfos.x == 4.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv5, 1.0, 0.0));\n        }\n        #endif\n        #ifdef UV6\n        else if (vOutlineWidthInfos.x == 5.)\n        {\n            vOutlineWidthUV = vec2(outlineWidthMatrix * vec4(uv6, 1.0, 0.0));\n        }\n        #endif\n    #elif defined(MAINUV1)\n        vec2 vOutlineWidthUV = vMainUV1;\n    #elif defined(MAINUV2)\n        vec2 vOutlineWidthUV = vMainUV2;\n    #else\n        vec2 vOutlineWidthUV = vec2(0., 0.);\n    #endif\n        outlineTex = texture2D(outlineWidthSampler, vOutlineWidthUV).r * vOutlineWidthInfos.y;\n#endif\n\n#if defined(MTOON_OUTLINE_WIDTH_WORLD) && defined(NORMAL)\n        // move slightly world normal\n        vec3 outlineOffset = 0.01 * outlineWidth * outlineTex * length(transposeMat3(inverseMat3(mat3(finalWorld))) * normalUpdated) * normalUpdated;\n        positionUpdated += outlineOffset;\n#endif\n    } // End isOutline == 1.0\n\n    vec4 worldPos = finalWorld * vec4(positionUpdated, 1.0);\n\n#ifdef NORMAL\n    mat3 normalWorld = mat3(finalWorld);\n\n    #if defined(INSTANCES) && defined(THIN_INSTANCES)\n        vNormalW = normalUpdated / vec3(dot(normalWorld[0], normalWorld[0]), dot(normalWorld[1], normalWorld[1]), dot(normalWorld[2], normalWorld[2]));\n        vNormalW = normalize(normalWorld * vNormalW);\n    #else\n        #ifdef NONUNIFORMSCALING\n            normalWorld = transposeMat3(inverseMat3(normalWorld));\n        #endif\n\n        vNormalW = normalize(normalWorld * normalUpdated);\n    #endif\n#endif\n\n#define CUSTOM_VERTEX_UPDATE_WORLDPOS\n\n#ifdef MULTIVIEW\n    if (gl_ViewID_OVR == 0u) {\n        gl_Position = viewProjection * worldPos;\n    } else {\n        gl_Position = viewProjectionR * worldPos;\n    }\n#else\n    gl_Position = viewProjection * worldPos;\n#endif\n\n    if (isOutline == 1.0) {\n#if defined(MTOON_OUTLINE_WIDTH_SCREEN) && defined(NORMAL)\n        vec3 viewNormal = transposeMat3(inverseMat3(mat3(view) * mat3(finalWorld))) * normalUpdated;\n        vec3 clipNormal = mat3(projection) * viewNormal;\n        vec2 projectedNormal = normalize(clipNormal.xy);\n        projectedNormal *= min(gl_Position.w, outlineScaledMaxDistance);\n        projectedNormal.x /= aspect; // aspect in original mtoon is y/x. aspect in babylon is x/y.\n        gl_Position.xy += 0.01 * outlineWidth * outlineTex * projectedNormal * clamp(1.0 - abs(normalize(viewNormal).z), 0.0, 1.0); // ignore offset when normal toward camera\n#endif\n\n        gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic from three-vrm\n    }\n\n    worldPos = finalWorld * vec4(positionUpdated, 1.0);\n    vPositionW = vec3(worldPos);\n\n#include<prePassVertex>\n\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n//     vDirectionW = normalize(vec3(finalWorld * vec4(positionUpdated, 0.0)));\n// # endif\n\n    #include<samplerVertexImplementation>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse,_MATRIXNAME_,diffuse,_INFONAME_,DiffuseInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,DETAIL,_VARYINGNAME_,Detail,_MATRIXNAME_,detail,_INFONAME_,DetailInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,AMBIENT,_VARYINGNAME_,Ambient,_MATRIXNAME_,ambient,_INFONAME_,AmbientInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,OPACITY,_VARYINGNAME_,Opacity,_MATRIXNAME_,opacity,_INFONAME_,OpacityInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive,_MATRIXNAME_,emissive,_INFONAME_,EmissiveInfos.x)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,LIGHTMAP,_VARYINGNAME_,Lightmap,_MATRIXNAME_,lightmap,_INFONAME_,LightmapInfos.x)\n    // # if defined(SPECULARTERM)\n    // # include<samplerVertexImplementation>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular,_MATRIXNAME_,specular,_INFONAME_,SpecularInfos.x)\n    // # endif\n    #include<samplerVertexImplementation>(_DEFINENAME_,BUMP,_VARYINGNAME_,Bump,_MATRIXNAME_,bump,_INFONAME_,BumpInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade,_MATRIXNAME_,shade,_INFONAME_,ShadeInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow,_MATRIXNAME_,receiveShadow,_INFONAME_,ReceiveShadowInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade,_MATRIXNAME_,shadingGrade,_INFONAME_,ShadingGradeInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim,_MATRIXNAME_,rim,_INFONAME_,RimInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap,_MATRIXNAME_,matCap,_INFONAME_,MatCapInfos.x)\n    #include<samplerVertexImplementation>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask,_MATRIXNAME_,uvAnimationMask,_INFONAME_,uvAnimationMaskInfos.x)\n\n#include<bumpVertex>\n#include<clipPlaneVertex>\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\n    vColor = color;\n#elif defined(INSTANCESCOLOR) && INSTANCESCOLOR\n    vColor = instanceColor;\n#endif\n\n#include<pointCloudVertex>\n#include<logDepthVertex>\n\n#define CUSTOM_VERTEX_MAIN_END\n\n}\n",m.Effect.ShadersStore.mtoonFragmentShader="#include<__decl__mtoonFragment>\n\n#extension GL_OES_standard_derivatives : enable\n\n#include<prePassDeclaration>[SCENE_MRT_COUNT]\n#include<oitDeclaration>\n\n#define CUSTOM_FRAGMENT_BEGIN\n\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n\n// Constants\n#define RECIPROCAL_PI2 0.15915494\n#define PI_2 6.28318530718\n#define EPS_COL 0.00001\n\n// Input\nvarying vec3 vPositionW;\n\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR)\nvarying vec4 vColor;\n#endif\n\n#include<mainUVVaryingDeclaration>[1..7]\n\n// Helper functions\n#include<helperFunctions>\n\n// Lights\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n// Samplers\n#include<samplerFragmentDeclaration>(_DEFINENAME_,DIFFUSE,_VARYINGNAME_,Diffuse,_SAMPLERNAME_,diffuse)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,EMISSIVE,_VARYINGNAME_,Emissive,_SAMPLERNAME_,emissive)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,SHADE,_VARYINGNAME_,Shade,_SAMPLERNAME_,shade)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,RECEIVE_SHADOW,_VARYINGNAME_,ReceiveShadow,_SAMPLERNAME_,receiveShadow)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,SHADING_GRADE,_VARYINGNAME_,ShadingGrade,_SAMPLERNAME_,shadingGrade)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,RIM,_VARYINGNAME_,Rim,_SAMPLERNAME_,rim)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,MATCAP,_VARYINGNAME_,MatCap,_SAMPLERNAME_,matCap)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,OUTLINE_WIDTH,_VARYINGNAME_,OutlineWidth,_SAMPLERNAME_,outlineWidth)\n#include<samplerFragmentDeclaration>(_DEFINENAME_,UV_ANIMATION_MASK,_VARYINGNAME_,UvAnimationMask,_SAMPLERNAME_,uvAnimationMask)\n\n#include<mtoonFragmentFunctions>\n\n// # ifdef REFRACTION\n\n// # ifdef REFRACTIONMAP_3D\n// uniform samplerCube refractionCubeSampler;\n// # else\n// uniform sampler2D refraction2DSampler;\n// # endif\n\n// # endif\n\n// # if defined(SPECULARTERM)\n//     # include<samplerFragmentDeclaration>(_DEFINENAME_,SPECULAR,_VARYINGNAME_,Specular,_SAMPLERNAME_,specular)\n// # endif\n\n// // Fresnel\n// # include<fresnelFunction>\n\n// // Reflection\n// # ifdef REFLECTION\n// # ifdef REFLECTIONMAP_3D\n// uniform samplerCube reflectionCubeSampler;\n// # else\n// uniform sampler2D reflection2DSampler;\n// # endif\n\n// # ifdef REFLECTIONMAP_SKYBOX\n// varying vec3 vPositionUVW;\n// # else\n// # if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\n// varying vec3 vDirectionW;\n// # endif\n\n// # endif\n\n// # include<reflectionFunction>\n\n// # endif\n\n#include<imageProcessingDeclaration>\n\n#include<imageProcessingFunctions>\n\n#include<bumpFragmentMainFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n\n#define CUSTOM_FRAGMENT_DEFINITIONS\n\nvoid main(void) {\n#ifdef MTOON_CLIP_IF_OUTLINE_IS_NONE\n    #ifdef MTOON_OUTLINE_WIDTH_WORLD\n    #elif defined(MTOON_OUTLINE_WIDTH_SCREEN)\n    #else\n        discard;\n    #endif\n#endif\n\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n\n#include<oitFragment>\n\n#include<clipPlaneFragment>\n\n    vec3 viewDirectionW = normalize(vEyePosition.xyz - vPositionW);\n\n    // Base color\n    vec4 baseColor = vec4(1., 1., 1., 1.);\n    vec3 diffuseColor = vec3(1., 1., 1.);\n\n    // Alpha\n    float alpha = 1.0;\n\n    // Bump\n#ifdef NORMAL\n    vec3 normalW = normalize(vNormalW);\n#else\n    vec3 normalW = normalize(-cross(dFdx(vPositionW), dFdy(vPositionW)));\n#endif\n\n#include<depthPrePass>\n\n    // Ambient color\n    vec3 baseAmbientColor = vec3(1., 1., 1.);\n    float glossiness = 0.;\n\n    // Lighting\n    vec3 diffuseBase = vec3(0., 0., 0.);\n    lightingInfo info;\n    float shadow = 1.;\n    vec3 lightDirection = vec3(0.0, 1.0, 0.0);\n    vec4 mtoonDiffuse = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // MToon UV\n    // All textures will use diffuse(_MainTex) UV\n    vec2 mainUv = vec2(0.0);\n#ifdef DIFFUSE\n    mainUv += vDiffuseUV;\n#elif defined(MAINUV1)\n    mainUv += vMainUV1;\n#elif defined(MAINUV2)\n    mainUv += vMainUV2;\n#endif\n\n    // uv anim\n    float uvAnim = time.y;\n#ifdef UV_ANIMATION_MASK\n    uvAnim *= texture2D(uvAnimationMaskSampler, mainUv).r;\n#endif\n    // translate uv in bottom-left origin coordinates.\n    // uv is reversed\n    mainUv += vec2(-uvAnimationScrollX, -uvAnimationScrollY) * uvAnim;\n    // rotate uv counter-clockwise around (0.5, 0.5) in bottom-left origin coordinates.\n    float rotateRad = uvAnimationRotation * PI_2 * uvAnim;\n    vec2 rotatePivot = vec2(0.5, 0.5);\n    mainUv = mat2(cos(rotateRad), -sin(rotateRad), sin(rotateRad), cos(rotateRad)) * (mainUv - rotatePivot) + rotatePivot;\n\n#ifdef FLIP_U\n    mainUv.x = 1.0 - mainUv.x;\n#endif\n#ifdef FLIP_V\n    mainUv.y = 1.0 - mainUv.y;\n#endif\n\n#include<mtoonBumpFragment>\n\n#ifdef TWOSIDEDLIGHTING\n    normalW = gl_FrontFacing ? normalW : -normalW;\n#endif\n\n// include customized lightFragment\n#include<mtoonLightFragment>[0..maxSimultaneousLights]\n\n    vec3 finalDiffuse = clamp(diffuseBase, 0.0, 1.0) * baseColor.rgb;\n\n    // Composition\n    vec4 color = vec4(finalDiffuse, clamp(alpha, 0.0, 1.0));\n\n    color.rgb = max(color.rgb, 0.);\n#include<logDepthFragment>\n#include<fogFragment>\n\n// Apply image processing if relevant. As this applies in linear space,\n// We first move from gamma to linear.\n#ifdef IMAGEPROCESSINGPOSTPROCESS\n    color.rgb = toLinearSpace(color.rgb);\n#else\n    #ifdef IMAGEPROCESSING\n        // FIXME: support image processing\n        // color.rgb = toLinearSpace(color.rgb);\n        // color = applyImageProcessing(color);\n    #endif\n#endif\n\n    color.a *= visibility;\n\n#ifdef PREMULTIPLYALPHA\n    // Convert to associative (premultiplied) format if needed.\n    color.rgb *= color.a;\n#endif\n\n#ifdef PREPASS\n    float writeGeometryInfo = color.a > 0.4 ? 1.0 : 0.0;\n\n    gl_FragData[0] = color; // We can't split irradiance on std material\n\n    #ifdef PREPASS_POSITION\n    gl_FragData[PREPASS_POSITION_INDEX] = vec4(vPositionW, writeGeometryInfo);\n    #endif\n\n    #ifdef PREPASS_VELOCITY\n    vec2 a = (vCurrentPosition.xy / vCurrentPosition.w) * 0.5 + 0.5;\n    vec2 b = (vPreviousPosition.xy / vPreviousPosition.w) * 0.5 + 0.5;\n\n    vec2 velocity = abs(a - b);\n    velocity = vec2(pow(velocity.x, 1.0 / 3.0), pow(velocity.y, 1.0 / 3.0)) * sign(a - b) * 0.5 + 0.5;\n\n    gl_FragData[PREPASS_VELOCITY_INDEX] = vec4(velocity, 0.0, writeGeometryInfo);\n    #endif\n\n    #ifdef PREPASS_IRRADIANCE\n        gl_FragData[PREPASS_IRRADIANCE_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo); //  We can't split irradiance on std material\n    #endif\n\n    #ifdef PREPASS_DEPTH\n        gl_FragData[PREPASS_DEPTH_INDEX] = vec4(vViewPos.z, 0.0, 0.0, writeGeometryInfo); // Linear depth\n    #endif\n\n    #ifdef PREPASS_NORMAL\n        gl_FragData[PREPASS_NORMAL_INDEX] = vec4((view * vec4(normalW, 0.0)).rgb, writeGeometryInfo); // Normal\n    #endif\n\n    #ifdef PREPASS_ALBEDO_SQRT\n        gl_FragData[PREPASS_ALBEDO_SQRT_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo); // We can't split albedo on std material\n    #endif\n    #ifdef PREPASS_REFLECTIVITY\n        #if defined(SPECULAR)\n            gl_FragData[PREPASS_REFLECTIVITY_INDEX] = vec4(specularMapColor.rgb, specularMapColor.a * writeGeometryInfo);\n        #else\n            gl_FragData[PREPASS_REFLECTIVITY_INDEX] = vec4(0.0, 0.0, 0.0, writeGeometryInfo);\n        #endif\n    #endif\n#endif\n\n#if !defined(PREPASS) || defined(WEBGL2)\n    gl_FragColor = color;\n#endif\n\n#if ORDER_INDEPENDENT_TRANSPARENCY\n    if (fragDepth == nearestDepth) {\n        frontColor.rgb += color.rgb * color.a * alphaMultiplier;\n        frontColor.a = 1.0 - alphaMultiplier * (1.0 - color.a);\n    } else {\n        backColor += color;\n    }\n#endif\n\n#define CUSTOM_FRAGMENT_MAIN_END\n\n}\n"),this.inspectableCustomProperties=this.inspectableCustomProperties||[],this.inspectableCustomProperties.push({label:"DiffuseColor",propertyName:"diffuseColor",type:g.InspectableType.Color3},{label:"AmbientColor",propertyName:"ambientColor",type:g.InspectableType.Color3},{label:"EmissiveColor",propertyName:"emissiveColor",type:g.InspectableType.Color3},{label:"ShadeColor",propertyName:"shadeColor",type:g.InspectableType.Color3},{label:"RimColor",propertyName:"rimColor",type:g.InspectableType.Color3},{label:"OutlineColor",propertyName:"outlineColor",type:g.InspectableType.Color3},{label:"ReceiveShadowRate",propertyName:"receiveShadowRate",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"ShadingGradeRate",propertyName:"shadingGradeRate",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"ShadeShift",propertyName:"shadeShift",type:g.InspectableType.Slider,min:-1,max:1,step:.01},{label:"ShadeToony",propertyName:"shadeToony",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"LightColorAttenuation",propertyName:"lightColorAttenuation",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"IndirectLightIntensity",propertyName:"indirectLightIntensity",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"RimLightingMix",propertyName:"rimLightingMix",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"RimFresnelPower",propertyName:"rimFresnelPower",type:g.InspectableType.Slider,min:.01,max:100,step:4},{label:"RimLift",propertyName:"rimLift",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"OutlineWidth",propertyName:"outlineWidth",type:g.InspectableType.Slider,min:.01,max:1,step:.01},{label:"OutlineScaledMaxDistance",propertyName:"outlineScaledMaxDistance",type:g.InspectableType.Slider,min:1,max:10,step:.01},{label:"OutlineLightingMix",propertyName:"outlineLightingMix",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"DebugMode",propertyName:"debugMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineWidthMode",propertyName:"outlineWidthMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineColorMode",propertyName:"outlineColorMode",type:g.InspectableType.Slider,min:0,max:1,step:1},{label:"CullMode",propertyName:"cullMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"OutlineCullMode",propertyName:"outlineCullMode",type:g.InspectableType.Slider,min:0,max:2,step:1},{label:"AlphaCutOff",propertyName:"alphaCutOff",type:g.InspectableType.Slider,min:0,max:1,step:.01},{label:"UV Animation Scroll X",propertyName:"uvAnimationScrollX",type:g.InspectableType.Slider,min:-1,max:1,step:.1},{label:"UV Animation Scroll Y",propertyName:"uvAnimationScrollY",type:g.InspectableType.Slider,min:-1,max:1,step:.1},{label:"UV Animation Rotation",propertyName:"uvAnimationRotation",type:g.InspectableType.Slider,min:-.5,max:.5,step:.01})}get appendedTextures(){return[this._diffuseTexture,this._emissiveTexture,this._bumpTexture,this._shadeTexture,this._receiveShadowTexture,this._shadingGradeTexture,this._rimTexture,this._matCapTexture,this._outlineWidthTexture,this._uvAnimationMaskTexture]}get appendedActiveTextures(){return this.appendedTextures.filter((e=>null!==e))}get imageProcessingConfiguration(){return this._imageProcessingConfiguration}set imageProcessingConfiguration(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsTexturesDirty()}_attachImageProcessingConfiguration(e){e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=e||this.getScene().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add((()=>{this._markAllSubMeshesAsImageProcessingDirty()}))))}get isPrePassCapable(){return!1}get cameraColorCurvesEnabled(){return this.imageProcessingConfiguration.colorCurvesEnabled}set cameraColorCurvesEnabled(e){this.imageProcessingConfiguration.colorCurvesEnabled=e}get cameraColorGradingEnabled(){return this.imageProcessingConfiguration.colorGradingEnabled}set cameraColorGradingEnabled(e){this.imageProcessingConfiguration.colorGradingEnabled=e}get cameraToneMappingEnabled(){return this._imageProcessingConfiguration.toneMappingEnabled}set cameraToneMappingEnabled(e){this._imageProcessingConfiguration.toneMappingEnabled=e}get cameraExposure(){return this._imageProcessingConfiguration.exposure}set cameraExposure(e){this._imageProcessingConfiguration.exposure=e}get cameraContrast(){return this._imageProcessingConfiguration.contrast}set cameraContrast(e){this._imageProcessingConfiguration.contrast=e}get cameraColorGradingTexture(){return this._imageProcessingConfiguration.colorGradingTexture}set cameraColorGradingTexture(e){this._imageProcessingConfiguration.colorGradingTexture=e}get cameraColorCurves(){return this._imageProcessingConfiguration.colorCurves}set cameraColorCurves(e){this._imageProcessingConfiguration.colorCurves=e}get canRenderToMRT(){return!0}get bumpScale(){return this._bumpScale}set bumpScale(e){this._bumpScale=e}get receiveShadowRate(){return this._receiveShadowRate}set receiveShadowRate(e){this._receiveShadowRate=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadingGradeRate(){return this._shadingGradeRate}set shadingGradeRate(e){this._shadingGradeRate=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadeShift(){return this._shadeShift}set shadeShift(e){this._shadeShift=Math.max(-1,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get shadeToony(){return this._shadeToony}set shadeToony(e){this._shadeToony=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get lightColorAttenuation(){return this._lightColorAttenuation}set lightColorAttenuation(e){this._lightColorAttenuation=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get indirectLightIntensity(){return this._indirectLightIntensity}set indirectLightIntensity(e){this._indirectLightIntensity=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get rimLightingMix(){return this._rimLightingMix}set rimLightingMix(e){this._rimLightingMix=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get rimFresnelPower(){return this._rimFresnelPower}set rimFresnelPower(e){this._rimFresnelPower=Math.max(0,Math.min(100,e)),this._markAllSubMeshesAsLightsDirty()}get rimLift(){return this._rimLift}set rimLift(e){this._rimLift=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsLightsDirty()}get outlineWidth(){return this._outlineWidth}set outlineWidth(e){this._outlineWidth=Math.max(.01,Math.min(1,e)),this._markAllSubMeshesAsAttributesDirty()}get outlineScaledMaxDistance(){return this._outlineScaledMaxDistance}set outlineScaledMaxDistance(e){this._outlineScaledMaxDistance=Math.max(1,Math.min(10,e)),this._markAllSubMeshesAsAttributesDirty()}get outlineLightingMix(){return this._outlineLightingMix}set outlineLightingMix(e){this._outlineLightingMix=Math.max(0,Math.min(1,e)),this._markAllSubMeshesAsAttributesDirty()}get uvAnimationScrollX(){return this._uvAnimationScrollX}set uvAnimationScrollX(e){this._uvAnimationScrollX=e,this._markAllSubMeshesAsMiscDirty()}get uvAnimationScrollY(){return this._uvAnimationScrollY}set uvAnimationScrollY(e){this._uvAnimationScrollY=e,this._markAllSubMeshesAsMiscDirty()}get uvAnimationRotation(){return this._uvAnimationRotation}set uvAnimationRotation(e){this._uvAnimationRotation=e,this._markAllSubMeshesAsMiscDirty()}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest=e,e?this.alphaBlend?this._transparencyMode=l.Material.MATERIAL_ALPHATESTANDBLEND:this._transparencyMode=l.Material.MATERIAL_ALPHATEST:this.alphaBlend?this._transparencyMode=l.Material.MATERIAL_ALPHABLEND:this._transparencyMode=l.Material.MATERIAL_OPAQUE,this._markAllSubMeshesAsMiscDirty()}get alphaBlend(){return this._alphaBlend}set alphaBlend(e){this._alphaBlend=e,e?(this.backFaceCulling=!0,this.alphaTest?this._transparencyMode=l.Material.MATERIAL_ALPHATESTANDBLEND:this._transparencyMode=l.Material.MATERIAL_ALPHABLEND):this.alphaTest?this._transparencyMode=l.Material.MATERIAL_ALPHATEST:this._transparencyMode=l.Material.MATERIAL_OPAQUE,this._markAllSubMeshesAsMiscDirty()}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,e===D.None||this.outlineRenderer||(this.outlineRenderer=new A(this.getScene(),this)),this._markAllSubMeshesAsMiscDirty()}enableOutlineRender(){this.isOutline=1}disaableOutlineRender(){this.isOutline=0}get cullMode(){return this._cullMode}set cullMode(e){switch(this._cullMode=e,this._cullMode){case L.Off:this.backFaceCulling=!1,this.sideOrientation=l.Material.ClockWiseSideOrientation,this.twoSidedLighting=!1;break;case L.Front:this.backFaceCulling=!0,this.sideOrientation=l.Material.CounterClockWiseSideOrientation,this.twoSidedLighting=!0;break;case L.Back:this.backFaceCulling=!0,this.sideOrientation=l.Material.ClockWiseSideOrientation,this.twoSidedLighting=!1}this._markAllSubMeshesAsMiscDirty()}applyOutlineCullMode(){this.storedCullMode=this.cullMode,this.cullMode=this._outlineCullMode}restoreOutlineCullMode(){this.cullMode=this.storedCullMode}getOutlineRendererName(){return this.outlineRenderer?this.outlineRenderer.name:""}get hasRenderTargetTextures(){return!1}getClassName(){return"MToonMaterial"}get useLogarithmicDepth(){return this._useLogarithmicDepth}set useLogarithmicDepth(e){const i=e&&this.getScene().getEngine().getCaps().fragmentDepthSupported;this._useLogarithmicDepth!==i&&(this._useLogarithmicDepth=i,this._markAllSubMeshesAsMiscDirty())}needAlphaBlending(){return!this._disableAlphaBlending&&(this.alpha<1||this._shouldUseAlphaFromDiffuseTexture())}needAlphaTesting(){return!!this._forceAlphaTest||!!this._alphaTest||this._hasAlphaChannel()&&(null==this._transparencyMode||this._transparencyMode===l.Material.MATERIAL_ALPHATEST)}_shouldUseAlphaFromDiffuseTexture(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha&&this._useAlphaFromDiffuseTexture&&this._transparencyMode!==l.Material.MATERIAL_OPAQUE}_hasAlphaChannel(){return null!==this._diffuseTexture&&this._diffuseTexture.hasAlpha}getAlphaTestTexture(){return this._diffuseTexture}isReadyForSubMesh(e,i,n=!1){if(this._uniformBufferLayoutBuilt||this.buildUniformLayout(),i.effect&&this.isFrozen&&i.effect._wasPreviouslyReady&&i.effect._wasPreviouslyUsingInstances===n)return!0;i.materialDefines||(this._callbackPluginEventGeneric(p.MaterialPluginEvent.GetDefineNames,this._eventInfo),i.materialDefines=new E);const t=this.getScene(),o=i.materialDefines;if(this._isReadyForSubMesh(i))return!0;const a=t.getEngine();o._needNormals=h.MaterialHelper.PrepareDefinesForLights(t,e,o,this.specularSupported,this._maxSimultaneousLights,this._disableLighting),this.outlineWidthMode!==D.None&&(o._needNormals=!0),this.applyDefines(o),h.MaterialHelper.PrepareDefinesForMultiview(t,o);const l=this.needAlphaBlendingForMesh(e)&&t.useOrderIndependentTransparency;if(h.MaterialHelper.PrepareDefinesForOIT(t,o,l),o._areTexturesDirty){this._eventInfo.hasRenderTargetTextures=!1,this._callbackPluginEventHasRenderTargetTextures(this._eventInfo),this._cacheHasRenderTargetTextures=this._eventInfo.hasRenderTargetTextures,o._needUVs=!1;for(let e=1;e<=f.Constants.MAX_SUPPORTED_UV_SETS;++e)o["MAINUV"+e]=!1;if(t.texturesEnabled){if(!(this.isReadyForTexture(this._diffuseTexture,o,"DIFFUSE")&&this.isReadyForTexture(this._emissiveTexture,o,"EMISSIVE")&&this.isReadyForTexture(this._shadeTexture,o,"SHADE")&&this.isReadyForTexture(this._receiveShadowTexture,o,"RECEIVE_SHADOW")&&this.isReadyForTexture(this._shadingGradeTexture,o,"SHADING_GRADE")&&this.isReadyForTexture(this._rimTexture,o,"RIM")&&this.isReadyForTexture(this._matCapTexture,o,"MATCAP")&&this.isReadyForTexture(this._outlineWidthTexture,o,"OUTLINE_WIDTH")&&this.isReadyForTexture(this._uvAnimationMaskTexture,o,"UV_ANIMATION_MASK")))return!1;if(t.getEngine().getCaps().standardDerivatives&&this._bumpTexture){if(!this._bumpTexture.isReady())return!1;h.MaterialHelper.PrepareDefinesForMergedUV(this._bumpTexture,o,"BUMP"),o.PARALLAX=this.useParallax,o.PARALLAXOCCLUSION=this.useParallaxOcclusion,o.OBJECTSPACE_NORMALMAP=this.useObjectSpaceNormalMap}else o.BUMP=!1,o.PARALLAX=!1,o.PARALLAXOCCLUSION=!1;o.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else o.DIFFUSE=!1,o.EMISSIVE=!1,o.SHADE=!1,o.RECEIVE_SHADOW=!1,o.SHADING_GRADE=!1,o.RIM=!1,o.MATCAP=!1,o.OUTLINE_WIDTH=!1,o.BUMP=!1,o.UV_ANIMATION_MASK=!1;o.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture(),o.PREMULTIPLYALPHA=this.alphaMode===f.Constants.ALPHA_PREMULTIPLIED||this.alphaMode===f.Constants.ALPHA_PREMULTIPLIED_PORTERDUFF,o.ALPHATEST_AFTERALLALPHACOMPUTATIONS=null!==this.transparencyMode,o.ALPHABLEND=null===this.transparencyMode||this.needAlphaBlendingForMesh(e)}if(this._eventInfo.isReadyForSubMesh=!0,this._eventInfo.defines=o,this._callbackPluginEventIsReadyForSubMesh(this._eventInfo),!this._eventInfo.isReadyForSubMesh)return!1;if(o._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(o)}if(this.flipU!==o.FLIP_U&&(o.FLIP_U=this.flipU,o.markAsUnprocessed()),this.flipV!==o.FLIP_V&&(o.FLIP_V=this.flipV,o.markAsUnprocessed()),h.MaterialHelper.PrepareDefinesForMisc(e,t,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e)||this._forceAlphaTest,o),h.MaterialHelper.PrepareDefinesForFrameBoundValues(t,a,o,n,null,i.getRenderingMesh().hasThinInstances),this._eventInfo.defines=o,this._eventInfo.mesh=e,this._callbackPluginEventPrepareDefinesBeforeAttributes(this._eventInfo),h.MaterialHelper.PrepareDefinesForAttributes(e,o,this.useVertexColor,this.useBones,this.useMorphTargets,this.useVertexAlpha,this.useBakedVertexAnimation),this._callbackPluginEventPrepareDefines(this._eventInfo),o.isDirty){const n=o._areLightsDisposed;o.markAsProcessed();const l=new u.EffectFallbacks;o.BUMP&&l.addFallback(0,"BUMP"),o.PARALLAX&&l.addFallback(1,"PARALLAX"),o.PARALLAXOCCLUSION&&l.addFallback(0,"PARALLAXOCCLUSION"),o.FOG&&l.addFallback(1,"FOG"),o.POINTSIZE&&l.addFallback(0,"POINTSIZE"),o.LOGARITHMICDEPTH&&l.addFallback(0,"LOGARITHMICDEPTH"),h.MaterialHelper.HandleFallbacksForShadows(o,l,this._maxSimultaneousLights),o.MULTIVIEW&&l.addFallback(0,"MULTIVIEW");const d=[r.VertexBuffer.PositionKind];o.NORMAL&&d.push(r.VertexBuffer.NormalKind),o.TANGENT&&d.push(r.VertexBuffer.TangentKind);for(let e=1;e<=f.Constants.MAX_SUPPORTED_UV_SETS;++e)o["UV"+e]&&d.push(`uv${1===e?"":e}`);o.INSTANCESCOLOR&&d.push(r.VertexBuffer.ColorInstanceKind),h.MaterialHelper.PrepareAttributesForBones(d,e,o,l),h.MaterialHelper.PrepareAttributesForInstances(d,o),h.MaterialHelper.PrepareAttributesForMorphTargets(d,e,o),h.MaterialHelper.PrepareAttributesForBakedVertexAnimation(d,e,o);const m="mtoon",c=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","visibility","vFogInfos","vFogColor","pointSize","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","logarithmicDepthConstant","vTangentSpaceParams","alphaCutOff","boneTextureWidth","morphTargetTextureInfo","morphTargetTextureIndices","vDiffuseColor","vDiffuseInfos","diffuseMatrix","vEmissiveColor","vEmissiveInfos","emissiveMatrix","vBumpInfos","bumpMatrix","vShadeColor","vShadeInfos","shadeMatrix","vReceiveShadowInfos","receiveShadowMatrix","vShadingGradeInfos","shadingGradeMatrix","vRimColor","vRimInfos","RimMatrix","vMatCapInfos","MatCapMatrix","vOutlineColor","vOutlineWidthInfos","outlineWidthMatrix","aspect","isOutline","shadingGradeRate","receiveShadowRate","shadeShift","shadeToony","rimLightingMix","rimFresnelPower","rimLift","lightColorAttenuation","indirectLightIntensity","outlineWidth","outlineScaledMaxDistance","outlineLightingMix","uvAnimationScrollX","uvAnimationScrollY","uvAnimationRotation","vEyeUp","time","projection"],g=["diffuseSampler","ambientSampler","emissiveSampler","bumpSampler","boneSampler","morphTargets","oitDepthSampler","oitFrontColorSampler","shadeSampler","receiveShadowSampler","shadingGradeSampler","rimSampler","matCapSampler","outlineWidthSampler","uvAnimationMaskSampler"],_=["Material","Scene","Mesh"];this._eventInfo.fallbacks=l,this._eventInfo.fallbackRank=0,this._eventInfo.defines=o,this._eventInfo.uniforms=c,this._eventInfo.attributes=d,this._eventInfo.samplers=g,this._eventInfo.uniformBuffersNames=_,this._eventInfo.customCode=void 0,this._eventInfo.mesh=e,this._callbackPluginEventGeneric(p.MaterialPluginEvent.PrepareEffect,this._eventInfo),s.ImageProcessingConfiguration&&(s.ImageProcessingConfiguration.PrepareUniforms(c,o),s.ImageProcessingConfiguration.PrepareSamplers(g,o)),h.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:c,uniformBuffersNames:_,samplers:g,defines:o,maxSimultaneousLights:this._maxSimultaneousLights});const A={},I=o.toString(),v=i.effect;let M=t.getEngine().createEffect(m,{attributes:d,uniformsNames:c,uniformBuffersNames:_,samplers:g,defines:I,fallbacks:l,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:o.NUM_MORPH_INFLUENCERS},processFinalCode:A.processFinalCode,processCodeAfterIncludes:this._eventInfo.customCode,multiTarget:o.PREPASS},a);if(M)if(this._onEffectCreatedObservable&&(S.effect=M,S.subMesh=i,this._onEffectCreatedObservable.notifyObservers(S)),this.allowShaderHotSwapping&&v&&!M.isReady()){if(M=v,o.markAsUnprocessed(),n)return o._areLightsDisposed=!0,!1}else t.resetCachedMaterial(),i.setEffect(M,o,this._materialContext)}return!(!i.effect||!i.effect.isReady()||(o._renderId=t.getRenderId(),i.effect._wasPreviouslyReady=!0,i.effect._wasPreviouslyUsingInstances=n,0))}buildUniformLayout(){const e=this._uniformBuffer;e.addUniform("vDiffuseColor",4),e.addUniform("vDiffuseInfos",2),e.addUniform("diffuseMatrix",16),e.addUniform("vEmissiveColor",3),e.addUniform("vEmissiveInfos",2),e.addUniform("emissiveMatrix",16),e.addUniform("vBumpInfos",3),e.addUniform("bumpMatrix",16),e.addUniform("vShadeColor",3),e.addUniform("vShadeInfos",2),e.addUniform("shadeMatrix",16),e.addUniform("vReceiveShadowInfos",2),e.addUniform("receiveShadowMatrix",16),e.addUniform("vShadingGradeInfos",2),e.addUniform("shadingGradeMatrix",16),e.addUniform("vRimColor",3),e.addUniform("vRimInfos",2),e.addUniform("rimMatrix",16),e.addUniform("vMatCapInfos",2),e.addUniform("matCapMatrix",16),e.addUniform("vOutlineColor",3),e.addUniform("vOutlineWidthInfos",2),e.addUniform("outlineWidthMatrix",16),e.addUniform("vUvAnimationMaskInfos",2),e.addUniform("uvAnimationMaskMatrix",16),e.addUniform("vTangentSpaceParams",2),e.addUniform("pointSize",1),e.addUniform("shadingGradeRate",1),e.addUniform("receiveShadowRate",1),e.addUniform("shadeShift",1),e.addUniform("shadeToony",1),e.addUniform("lightColorAttenuation",1),e.addUniform("indirectLightIntensity",1),e.addUniform("rimLightingMix",1),e.addUniform("rimFresnelPower",1),e.addUniform("rimLift",1),e.addUniform("outlineWidth",1),e.addUniform("outlineScaledMaxDistance",1),e.addUniform("outlineLightingMix",1),e.addUniform("uvAnimationScrollX",1),e.addUniform("uvAnimationScrollY",1),e.addUniform("uvAnimationRotation",1),e.addUniform("vEyeUp",3),e.addUniform("alphaCutOff",1),e.addUniform("vAmbientColor",3),e.addUniform("aspect",1),e.addUniform("isOutline",1),e.addUniform("time",4),e.addUniform("visibility",1),super.buildUniformLayout()}bindForSubMesh(e,i,n){var a;const r=this.getScene(),s=n.materialDefines,l=n.effect;if(!s||!l)return;this._activeEffect=l,i.getMeshUniformBuffer().bindToEffect(l,"Mesh"),i.transferToEffect(e),this._uniformBuffer.bindToEffect(l,"Material"),this._eventInfo.subMesh=n,this._callbackPluginEventHardBindForSubMesh(this._eventInfo),s.OBJECTSPACE_NORMALMAP&&(e.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));const d=this._mustRebind(r,l,i.visibility);h.MaterialHelper.BindBonesParameters(i,l);const f=this._uniformBuffer;if(d){this.bindViewProjection(l),f.useUbo&&this.isFrozen&&f.isSync||(r.texturesEnabled&&(this.bindTexture(this._diffuseTexture,f,l,"diffuse","vDiffuseInfos"),this.bindTexture(this._emissiveTexture,f,l,"emissive","vEmissiveInfos"),this._bumpTexture&&r.getEngine().getCaps().standardDerivatives&&(f.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this._bumpScale),h.MaterialHelper.BindTextureMatrix(this._bumpTexture,f,"bump"),l.setTexture("bumpSampler",this._bumpTexture),r._mirroredCameraPosition?f.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):f.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),this.bindTexture(this._shadeTexture,f,l,"shade","vShadeInfos"),this.bindTexture(this._receiveShadowTexture,f,l,"receiveShadow","vReceiveShadowInfos"),this.bindTexture(this._shadingGradeTexture,f,l,"shadingGrade","vShadingGradeInfos"),this.bindTexture(this._rimTexture,f,l,"rim","vRimInfos"),this.bindTexture(this._matCapTexture,f,l,"matCap","vMatCapInfos"),this.bindTexture(this._outlineWidthTexture,f,l,"outlineWidth","vOutlineWidthInfos"),this.bindTexture(this._uvAnimationMaskTexture,f,l,"uvAnimationMask","vUvAnimationMaskInfos"),this._hasAlphaChannel()&&f.updateFloat("alphaCutOff",this.alphaCutOff)),this.pointsCloud&&f.updateFloat("pointSize",this.pointSize),f.updateFloat("receiveShadowRate",this._receiveShadowRate),f.updateFloat("shadingGradeRate",this._shadingGradeRate),f.updateFloat("shadeShift",this._shadeShift),f.updateFloat("shadeToony",this._shadeToony),f.updateFloat("lightColorAttenuation",this._lightColorAttenuation),f.updateFloat("indirectLightIntensity",this._indirectLightIntensity),f.updateFloat("rimLightingMix",this._rimLightingMix),f.updateFloat("rimFresnelPower",this._rimFresnelPower),f.updateFloat("rimLift",this._rimLift),f.updateFloat("outlineWidth",this._outlineWidth),f.updateFloat("outlineScaledMaxDistance",this._outlineScaledMaxDistance),f.updateFloat("outlineLightingMix",this._outlineLightingMix),f.updateFloat("uvAnimationScrollX",this._uvAnimationScrollX),f.updateFloat("uvAnimationScrollY",this._uvAnimationScrollY),f.updateFloat("uvAnimationRotation",this._uvAnimationRotation),r.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor),f.updateColor3("vAmbientColor",this._globalAmbientColor),f.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha),f.updateColor3("vEmissiveColor",this.emissiveColor),f.updateColor3("vShadeColor",this.shadeColor),f.updateColor3("vRimColor",this.rimColor),f.updateColor4("vOutlineColor",this.outlineColor,1),f.updateVector3("vEyeUp",r.activeCamera.upVector));const e=r;e.useOrderIndependentTransparency&&this.needAlphaBlendingForMesh(i)&&e.depthPeelingRenderer&&e.depthPeelingRenderer.bind(l),this._eventInfo.subMesh=n,this._callbackPluginEventBindForSubMesh(this._eventInfo),h.MaterialHelper.BindClipPlane(l,r),this.bindEyePosition(l)}else r.getEngine()._features.needToAlwaysBindUniformBuffers&&(this._needToBindSceneUbo=!0);if(d||!this.isFrozen){r.lightsEnabled&&!this._disableLighting&&h.MaterialHelper.BindLights(r,i,l,s,this._maxSimultaneousLights),(r.fogEnabled&&i.applyFog&&r.fogMode!==t.Scene.FOGMODE_NONE||i.receiveShadows)&&this.bindView(l),h.MaterialHelper.BindFogParameters(r,i,l),s.NUM_MORPH_INFLUENCERS&&h.MaterialHelper.BindMorphTargetParameters(i,l),s.BAKED_VERTEX_ANIMATION_TEXTURE&&(null===(a=i.bakedVertexAnimationManager)||void 0===a||a.bind(l,s.INSTANCES)),this.useLogarithmicDepth&&h.MaterialHelper.BindLogDepth(s,l,r),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect),f.updateFloat("aspect",r.getEngine().getAspectRatio(r.activeCamera)),f.updateFloat("isOutline",this.isOutline);const e=window.performance.now()/1e3;f.updateVector4("time",new o.Vector4(e/20,e,2*e,3*e))}this._afterBind(i,this._activeEffect),f.update()}getAnimatables(){const e=super.getAnimatables();for(const i of this.appendedActiveTextures)i.animations&&i.animations.length>0&&e.push(i);return e}getActiveTextures(){return super.getActiveTextures().concat(this.appendedActiveTextures)}hasTexture(e){if(super.hasTexture(e))return!0;for(const i of this.appendedActiveTextures)if(i===e)return!0;return!1}dispose(e,i){if(delete this.outlineRenderer,i)for(const e of this.appendedActiveTextures)e.dispose();this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),super.dispose(e,i)}clone(e){const n=i.SerializationHelper.Clone((()=>new x(e,this.getScene())),this);return n.name=e,n.id=e,this.stencil.copyTo(n.stencil),n}static Parse(e,n,t){const o=i.SerializationHelper.Parse((()=>new x(e.name,n)),e,n,t);return e.stencil&&o.stencil.parse(e.stencil,n,t),o}bindTexture(e,i,n,t,o){e&&(this._uniformBuffer.updateFloat2(o,e.coordinatesIndex,e.level),h.MaterialHelper.BindTextureMatrix(e,i,t),n.setTexture(`${t}Sampler`,e))}isReadyForTexture(e,i,n){return e?!!e.isReadyOrNotBlocking()&&(h.MaterialHelper.PrepareDefinesForMergedUV(e,i,n),!0):(i[n]=!1,!0)}applyDefines(e){switch(this._debugMode){case T.Normal:!0!==e.MTOON_DEBUG_NORMAL&&(e.MTOON_DEBUG_NORMAL=!0,e.MTOON_DEBUG_LITSHADERATE=!1,e.markAsUnprocessed());break;case T.LitShadeRate:!0!==e.MTOON_DEBUG_LITSHADERATE&&(e.MTOON_DEBUG_NORMAL=!1,e.MTOON_DEBUG_LITSHADERATE=!0,e.markAsUnprocessed());break;case T.None:!0===e.MTOON_DEBUG_NORMAL&&(e.MTOON_DEBUG_NORMAL=!1,e.markAsUnprocessed()),!0===e.MTOON_DEBUG_LITSHADERATE&&(e.MTOON_DEBUG_LITSHADERATE=!1,e.markAsUnprocessed())}switch(this.outlineWidthMode){case D.WorldCorrdinates:!0!==e.MTOON_OUTLINE_WIDTH_WORLD&&(e.MTOON_OUTLINE_WIDTH_WORLD=!0,e.MTOON_OUTLINE_WIDTH_SCREEN=!1,e.markAsUnprocessed());break;case D.ScreenCoordinates:!0!==e.MTOON_OUTLINE_WIDTH_SCREEN&&(e.MTOON_OUTLINE_WIDTH_WORLD=!1,e.MTOON_OUTLINE_WIDTH_SCREEN=!0,e.markAsUnprocessed());break;case D.None:!1===e.MTOON_OUTLINE_WIDTH_SCREEN&&!1===e.MTOON_OUTLINE_WIDTH_WORLD||(e.MTOON_OUTLINE_WIDTH_SCREEN=!1,e.MTOON_OUTLINE_WIDTH_WORLD=!1,e.markAsUnprocessed())}switch(this.outlineColorMode){case N.FixedColor:!0!==e.MTOON_OUTLINE_COLOR_FIXED&&(e.MTOON_OUTLINE_COLOR_FIXED=!0,e.MTOON_OUTLINE_COLOR_MIXED=!1,e.markAsUnprocessed());break;case N.MixedLighting:!0!==e.MTOON_OUTLINE_COLOR_MIXED&&(e.MTOON_OUTLINE_COLOR_FIXED=!1,e.MTOON_OUTLINE_COLOR_MIXED=!0,e.markAsUnprocessed())}}}e([(0,i.serializeAsTexture)("diffuseTexture")],x.prototype,"_diffuseTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],x.prototype,"diffuseTexture",void 0),e([(0,i.serializeAsTexture)("emissiveTexture")],x.prototype,"_emissiveTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"emissiveTexture",void 0),e([(0,i.serializeAsTexture)("bumpTexture")],x.prototype,"_bumpTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"bumpTexture",void 0),e([(0,i.serializeAsTexture)("shadeTexture")],x.prototype,"_shadeTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"shadeTexture",void 0),e([(0,i.serializeAsTexture)("receiveShadowTexture")],x.prototype,"_receiveShadowTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"receiveShadowTexture",void 0),e([(0,i.serializeAsTexture)("shadingGradeTexture")],x.prototype,"_shadingGradeTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"shadingGradeTexture",void 0),e([(0,i.serializeAsTexture)("rimTexture")],x.prototype,"_rimTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"rimTexture",void 0),e([(0,i.serializeAsTexture)("matCapTexture")],x.prototype,"_matCapTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"matCapTexture",void 0),e([(0,i.serializeAsTexture)("outlineWidthTexture")],x.prototype,"_outlineWidthTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"outlineWidthTexture",void 0),e([(0,i.serializeAsTexture)("outlineWidthTexture")],x.prototype,"_uvAnimationMaskTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"uvAnimationMaskTexture",void 0),e([(0,i.serializeAsColor3)("diffuse")],x.prototype,"diffuseColor",void 0),e([(0,i.serialize)("ambient")],x.prototype,"ambientColor",void 0),e([(0,i.serialize)("emissive")],x.prototype,"emissiveColor",void 0),e([(0,i.serialize)("shade")],x.prototype,"shadeColor",void 0),e([(0,i.serialize)("rim")],x.prototype,"rimColor",void 0),e([(0,i.serialize)("outline")],x.prototype,"outlineColor",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"useEmissiveAsIllumination",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"linkEmissiveWithDiffuse",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"useReflectionOverAlpha",void 0),e([(0,i.serialize)("disableLighting")],x.prototype,"_disableLighting",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsLightsDirty")],x.prototype,"disableLighting",void 0),e([(0,i.serialize)()],x.prototype,"alphaCutOff",void 0),e([(0,i.serialize)("useAlphaFromDiffuseTexture")],x.prototype,"_useAlphaFromDiffuseTexture",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],x.prototype,"useAlphaFromDiffuseTexture",void 0),e([(0,i.serialize)("maxSimultaneousLights")],x.prototype,"_maxSimultaneousLights",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsLightsDirty")],x.prototype,"maxSimultaneousLights",void 0),e([(0,i.serialize)("invertNormalMapX")],x.prototype,"_invertNormalMapX",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"invertNormalMapX",void 0),e([(0,i.serialize)("invertNormalMapY")],x.prototype,"_invertNormalMapY",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"invertNormalMapY",void 0),e([(0,i.serialize)("twoSidedLighting")],x.prototype,"_twoSidedLighting",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],x.prototype,"twoSidedLighting",void 0),e([(0,i.serialize)()],x.prototype,"bumpScale",null),e([(0,i.serialize)()],x.prototype,"receiveShadowRate",null),e([(0,i.serialize)()],x.prototype,"shadingGradeRate",null),e([(0,i.serialize)()],x.prototype,"shadeShift",null),e([(0,i.serialize)()],x.prototype,"shadeToony",null),e([(0,i.serialize)()],x.prototype,"lightColorAttenuation",null),e([(0,i.serialize)()],x.prototype,"indirectLightIntensity",null),e([(0,i.serialize)()],x.prototype,"rimLightingMix",null),e([(0,i.serialize)()],x.prototype,"rimFresnelPower",null),e([(0,i.serialize)()],x.prototype,"rimLift",null),e([(0,i.serialize)()],x.prototype,"outlineWidth",null),e([(0,i.serialize)()],x.prototype,"outlineScaledMaxDistance",null),e([(0,i.serialize)()],x.prototype,"outlineLightingMix",null),e([(0,i.serialize)()],x.prototype,"uvAnimationScrollX",null),e([(0,i.serialize)()],x.prototype,"uvAnimationScrollY",null),e([(0,i.serialize)()],x.prototype,"uvAnimationRotation",null),e([(0,i.serialize)("alphaTest")],x.prototype,"_alphaTest",void 0),e([(0,i.serialize)()],x.prototype,"alphaTest",null),e([(0,i.serialize)()],x.prototype,"alphaBlend",null),e([(0,i.serialize)("debugMode")],x.prototype,"_debugMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"debugMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"outlineColorMode",void 0),e([(0,i.serialize)()],x.prototype,"cullMode",null),e([(0,i.serialize)()],x.prototype,"_outlineCullMode",void 0),e([(0,i.expandToProperty)("_markAllSubMeshesAsMiscDirty")],x.prototype,"outlineCullMode",void 0),e([(0,i.serialize)("flipU")],x.prototype,"flipU",void 0),e([(0,i.serialize)("flipV")],x.prototype,"flipV",void 0),e([(0,i.serialize)()],x.prototype,"useLogarithmicDepth",null)})(),M})()));

/***/ }),

/***/ "./src/helper.ts":
/*!***********************!*\
  !*** ./src/helper.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DHelper": () => (/* binding */ V3DHelper)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */

class V3DHelper {
    constructor(core) {
        this.core = core;
    }
    /**
     * Make a node cast shadow from a ShadowGenerator
     * @param shadowGenerator
     * @param nodeName
     */
    addNodeToShadowCasterByName(shadowGenerator, nodeName) {
        shadowGenerator?.addShadowCaster(this.core.scene.getNodeByName(nodeName));
    }
    /**
     * Make nodes cast shadow from a ShadowGenerator
     * @param shadowGenerator
     * @param nodeName
     */
    addNodeToShadowCasterContainsName(shadowGenerator, nodeName) {
        if (!shadowGenerator)
            return;
        for (const node of this.core.scene.getNodes()) {
            if (node && node.name.includes(nodeName)) {
                shadowGenerator.addShadowCaster(node);
            }
        }
    }
    /**
     * Make node receive shadow
     * @param nodeName
     */
    makeReceiveShadowByName(nodeName) {
        this.core.scene.getNodeByName(nodeName).receiveShadows = true;
    }
    /**
     * Make nodes receive shadow
     * @param nodeName
     */
    makeReceiveShadowContainsName(nodeName) {
        for (const node of this.core.scene.getNodes()) {
            if (node && node.name.includes(nodeName)) {
                try {
                    node.receiveShadows = true;
                }
                catch (e) {
                    console.log(e);
                }
            }
        }
    }
    showSkeletonDebug(skeleton, mesh) {
        const options = {
            pauseAnimations: true,
            returnToRest: false,
            computeBonesUsingShaders: true,
            useAllBones: true,
            displayMode: _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SkeletonViewer.DISPLAY_LINES, //A value that controls which display mode to use. (SkeletonViewer.DISPLAY_LINES = 0, SkeletonViewer.DISPLAY_SPHERES = 1, SkeletonViewer.DISPLAY_SPHERE_AND_SPURS = 2). Default = 0.
        };
        const skeletonViewer = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SkeletonViewer(skeleton, //Target Skeleton
        mesh, //That skeletons Attached Mesh or a Node with the same globalMatrix
        this.core.scene, //The Scene scope
        true, //autoUpdateBoneMatrices?
        mesh.renderingGroupId > 0 ? mesh.renderingGroupId + 1 : 1, // renderingGroupId
        options);
        return skeletonViewer;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/errors.ts":
/*!*******************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/errors.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BoneNotFoundError": () => (/* binding */ BoneNotFoundError)
/* harmony export */ });
/**
 * Throws when mandatory bone could not find
 */
class BoneNotFoundError extends Error {
    constructor(boneName) {
        super(`Bone:${boneName} NotFound`);
        this.boneName = boneName;
        this.name = 'BoneNotFoundError';
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/humanoid-bone.ts":
/*!**************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/humanoid-bone.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HumanoidBone": () => (/* binding */ HumanoidBone)
/* harmony export */ });
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ "./src/importer/babylon-vrm-loader/src/errors.ts");

/**
 * HumanoidBone を取得するメソッド群
 * @see https://docs.unity3d.com/ja/2018.3/ScriptReference/HumanBodyBones.html
 */
class HumanoidBone {
    //* TODO: Patched.
    // public constructor(private nodeMap: TransformNodeMap) {}
    constructor(nodeMap) {
        this.nodeMap = nodeMap;
    }
    dispose() {
        this.nodeMap = null;
    }
    /**
     * 尻
     */
    get hips() {
        return this.getMandatoryBone('hips');
    }
    /**
     * 左太もも
     */
    get leftUpperLeg() {
        return this.getMandatoryBone('leftUpperLeg');
    }
    /**
     * 右太もも
     */
    get rightUpperLeg() {
        return this.getMandatoryBone('rightUpperLeg');
    }
    /**
     * 左ひざ
     */
    get leftLowerLeg() {
        return this.getMandatoryBone('leftLowerLeg');
    }
    /**
     * 右ひざ
     */
    get rightLowerLeg() {
        return this.getMandatoryBone('rightLowerLeg');
    }
    /**
     * 左足首
     */
    get leftFoot() {
        return this.getMandatoryBone('leftFoot');
    }
    /**
     * 右足首
     */
    get rightFoot() {
        return this.getMandatoryBone('rightFoot');
    }
    /**
     * 脊椎の第一
     */
    get spine() {
        return this.getMandatoryBone('spine');
    }
    /**
     * 胸
     */
    get chest() {
        return this.getMandatoryBone('chest');
    }
    /**
     * 首
     */
    get neck() {
        return this.getMandatoryBone('neck');
    }
    /**
     * 頭
     */
    get head() {
        return this.getMandatoryBone('head');
    }
    /**
     * 左肩
     */
    get leftShoulder() {
        return this.getMandatoryBone('leftShoulder');
    }
    /**
     * 右肩
     */
    get rightShoulder() {
        return this.getMandatoryBone('rightShoulder');
    }
    /**
     * 左上腕
     */
    get leftUpperArm() {
        return this.getMandatoryBone('leftUpperArm');
    }
    /**
     * 右上腕
     */
    get rightUpperArm() {
        return this.getMandatoryBone('rightUpperArm');
    }
    /**
     * 左ひじ
     */
    get leftLowerArm() {
        return this.getMandatoryBone('leftLowerArm');
    }
    /**
     * 右ひじ
     */
    get rightLowerArm() {
        return this.getMandatoryBone('rightLowerArm');
    }
    /**
     * 左手首
     */
    get leftHand() {
        return this.getMandatoryBone('leftHand');
    }
    /**
     * 右手首
     */
    get rightHand() {
        return this.getMandatoryBone('rightHand');
    }
    /**
     * 左つま先(Optional)
     */
    get leftToes() {
        return this.getOptionalBone('leftToes');
    }
    /**
     * 右つま先(Optional)
     */
    get rightToes() {
        return this.getOptionalBone('rightToes');
    }
    /**
     * 左目(Optional)
     */
    get leftEye() {
        return this.getOptionalBone('leftEye');
    }
    /**
     * 右目(Optional)
     */
    get rightEye() {
        return this.getOptionalBone('rightEye');
    }
    /**
     * 顎(Optional)
     */
    get jaw() {
        return this.getOptionalBone('jaw');
    }
    /**
     * 左親指第一指骨(Optional)
     */
    get leftThumbProximal() {
        return this.getOptionalBone('leftThumbProximal');
    }
    /**
     * 左親指第二指骨(Optional)
     */
    get leftThumbIntermediate() {
        return this.getOptionalBone('leftThumbIntermediate');
    }
    /**
     * 左親指第三指骨(Optional)
     */
    get leftThumbDistal() {
        return this.getOptionalBone('leftThumbDistal');
    }
    /**
     * 左人差し指第一指骨(Optional)
     */
    get leftIndexProximal() {
        return this.getOptionalBone('leftIndexProximal');
    }
    /**
     * 左人差し指第二指骨(Optional)
     */
    get leftIndexIntermediate() {
        return this.getOptionalBone('leftIndexIntermediate');
    }
    /**
     * 左人差し指第三指骨(Optional)
     */
    get leftIndexDistal() {
        return this.getOptionalBone('leftIndexDistal');
    }
    /**
     * 左中指第一指骨(Optional)
     */
    get leftMiddleProximal() {
        return this.getOptionalBone('leftMiddleProximal');
    }
    /**
     * 左中指第二指骨(Optional)
     */
    get leftMiddleIntermediate() {
        return this.getOptionalBone('leftMiddleIntermediate');
    }
    /**
     * 左中指第三指骨(Optional)
     */
    get leftMiddleDistal() {
        return this.getOptionalBone('leftMiddleDistal');
    }
    /**
     * 左薬指第一指骨(Optional)
     */
    get leftRingProximal() {
        return this.getOptionalBone('leftRingProximal');
    }
    /**
     * 左薬指第二指骨(Optional)
     */
    get leftRingIntermediate() {
        return this.getOptionalBone('leftRingIntermediate');
    }
    /**
     * 左薬指第三指骨(Optional)
     */
    get leftRingDistal() {
        return this.getOptionalBone('leftRingDistal');
    }
    /**
     * 左小指第一指骨(Optional)
     */
    get leftLittleProximal() {
        return this.getOptionalBone('leftLittleProximal');
    }
    /**
     * 左小指第二指骨(Optional)
     */
    get leftLittleIntermediate() {
        return this.getOptionalBone('leftLittleIntermediate');
    }
    /**
     * 左小指第三指骨(Optional)
     */
    get leftLittleDistal() {
        return this.getOptionalBone('leftLittleDistal');
    }
    /**
     * 右親指第一指骨(Optional)
     */
    get rightThumbProximal() {
        return this.getOptionalBone('rightThumbProximal');
    }
    /**
     * 右親指第二指骨(Optional)
     */
    get rightThumbIntermediate() {
        return this.getOptionalBone('rightThumbIntermediate');
    }
    /**
     * 右親指第三指骨(Optional)
     */
    get rightThumbDistal() {
        return this.getOptionalBone('rightThumbDistal');
    }
    /**
     * 右人差し指第一指骨(Optional)
     */
    get rightIndexProximal() {
        return this.getOptionalBone('rightIndexProximal');
    }
    /**
     * 右人差し指第二指骨(Optional)
     */
    get rightIndexIntermediate() {
        return this.getOptionalBone('rightIndexIntermediate');
    }
    /**
     * 右人差し指第三指骨(Optional)
     */
    get rightIndexDistal() {
        return this.getOptionalBone('rightIndexDistal');
    }
    /**
     * 右中指第一指骨(Optional)
     */
    get rightMiddleProximal() {
        return this.getOptionalBone('rightMiddleProximal');
    }
    /**
     * 右中指第二指骨(Optional)
     */
    get rightMiddleIntermediate() {
        return this.getOptionalBone('rightMiddleIntermediate');
    }
    /**
     * 右中指第三指骨(Optional)
     */
    get rightMiddleDistal() {
        return this.getOptionalBone('rightMiddleDistal');
    }
    /**
     * 右薬指第一指骨(Optional)
     */
    get rightRingProximal() {
        return this.getOptionalBone('rightRingProximal');
    }
    /**
     * 右薬指第二指骨(Optional)
     */
    get rightRingIntermediate() {
        return this.getOptionalBone('rightRingIntermediate');
    }
    /**
     * 右薬指第三指骨(Optional)
     */
    get rightRingDistal() {
        return this.getOptionalBone('rightRingDistal');
    }
    /**
     * 右小指第一指骨(Optional)
     */
    get rightLittleProximal() {
        return this.getOptionalBone('rightLittleProximal');
    }
    /**
     * 右小指第二指骨(Optional)
     */
    get rightLittleIntermediate() {
        return this.getOptionalBone('rightLittleIntermediate');
    }
    /**
     * 右小指第三指骨(Optional)
     */
    get rightLittleDistal() {
        return this.getOptionalBone('rightLittleDistal');
    }
    /**
     * 上胸(Optional)
     */
    get upperChest() {
        return this.getOptionalBone('upperChest');
    }
    /**
     * 必須ボーンを取得する。取得出来ない場合は例外を発生する
     *
     * @throws BoneNotFoundError
     * @param name HumanoidBoneName
     */
    getMandatoryBone(name) {
        const node = this.nodeMap[name];
        if (!node) {
            throw new _errors__WEBPACK_IMPORTED_MODULE_0__.BoneNotFoundError(name);
        }
        return node;
    }
    /**
     * オプショナルボーンを取得する
     *
     * @param name HumanoidBoneName
     */
    getOptionalBone(name) {
        return (this.nodeMap && this.nodeMap[name]) || null;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts":
/*!******************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MaterialValueBindingMerger": () => (/* binding */ MaterialValueBindingMerger)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! babylon-mtoon-material */ "./node_modules/babylon-mtoon-material/dist/index.module.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__);



const PBRMaterialTextureMap = {
    _MainTex: 'albedoTexture',
};
const PBRMaterialColorMap = {
    _Color: 'albedoColor',
};
const MToonMaterialTextureMap = {
    _MainTex: 'diffuseTexture',
    _EmissionMap: 'emissiveTexture',
    _BumpMap: 'bumpTexture',
    _ShadeTexture: 'shadeTexture',
    _ReceiveShadowTexture: 'receiveShadowTexture',
    _ShadingGradeTexture: 'shadingGradeTexture',
    _RimTexture: 'rimTexture',
    _SphereAdd: 'matCapTexture',
    _OutlineWidthTexture: 'outlineWidthTexture',
    _UvAnimMaskTexture: 'uvAnimationMaskTexture',
};
const MToonMaterialColorMap = {
    _Color: 'diffuseColor',
    _ShadeColor: 'shadeColor',
    _RimColor: 'rimColor',
    _EmissionColor: 'emissiveColor',
    _OutlineColor: 'outlineColor',
};
/**
 * @see https://github.com/vrm-c/UniVRM/blob/4ffd97c2e9339683ce9bf21e73f510bd90c2a5b2/Assets/VRM/Runtime/BlendShape/MaterialValueBindingMerger.cs
 */
class MaterialValueBindingMerger {
    /**
     * @param materials VRMの全 Material
     * @param materialValues
     */
    constructor(materials, materialValues) {
        this.materialValues = materialValues;
        this.m_materialMap = {};
        this.m_materialSetterMap = {};
        this.m_materialValueMap = {};
        this.m_used = {};
        this.baseValueCache = {};
        this.materialValuesToApply = {};
        if (materials.length === 0 || materialValues.length === 0) {
            return;
        }
        // プロパティ名の変換に対応している MToonMaterial と PBRMaterial を保存する
        materials.forEach((material) => {
            if (material instanceof babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_2__.MToonMaterial || material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
                this.m_materialMap[material.name] = material;
            }
        });
        materialValues.forEach((materialValue) => {
            const bindingKey = this.makeBindingKey(materialValue);
            if (this.m_materialSetterMap[bindingKey]) {
                return;
            }
            const material = this.m_materialMap[materialValue.materialName];
            if (!material) {
                return;
            }
            const baseValue = this.getMaterialProperty(material, materialValue.propertyName);
            if (!baseValue || materialValue.targetValue.length !== 4) {
                return;
            }
            // モーフィング用に baseValue (初期値) と materialValue を保存する
            this.baseValueCache[bindingKey] = baseValue;
            this.materialValuesToApply[bindingKey] = materialValue;
            const targetValue = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4.FromArray(materialValue.targetValue);
            const valueName = materialValue.propertyName;
            // Unity と座標系が異なるため、テクスチャの vOffset を反転する
            if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
                if (Object.keys(PBRMaterialTextureMap).some((k) => valueName.startsWith(k))) {
                    targetValue.w *= -1;
                }
            }
            else if (Object.keys(MToonMaterialTextureMap).some((k) => valueName.startsWith(k))) {
                targetValue.w *= -1;
            }
            if (valueName.endsWith('_ST_S')) {
                // テクスチャの u方向 のみ更新する
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    const src = this.getMaterialProperty(material, valueName);
                    src.x = propValue.x;
                    src.z = propValue.z;
                    this.updateMaterialProperty(material, valueName, src);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
            else if (valueName.endsWith('_ST_T')) {
                // テクスチャの v方向 のみ更新する
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    const src = this.getMaterialProperty(material, valueName);
                    src.y = propValue.y;
                    src.w = propValue.w;
                    this.updateMaterialProperty(material, valueName, src);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
            else {
                const setter = (value, firstValue) => {
                    const propValue = firstValue
                        ? baseValue.add(targetValue.subtract(baseValue).scale(value))
                        : this.getMaterialProperty(material, valueName).add(targetValue.subtract(baseValue).scale(value));
                    this.updateMaterialProperty(material, valueName, propValue);
                };
                this.m_materialSetterMap[bindingKey] = setter;
            }
        });
    }
    /**
     * UniVRM では Dictionary のキー用のクラスを定義しているが、文字列で代用する
     * MaterialValueBinding.BaseValue は対応するプロパティの初期値なので無視できる
     */
    makeBindingKey(materialValue) {
        return `${materialValue.materialName}_${materialValue.propertyName}_${materialValue.targetValue.join('-')}`;
    }
    /**
     * UniVRM では Dictionary のキー用のクラスを定義しているが、文字列で代用する
     */
    makeTargetKey(materialValue) {
        return `${materialValue.materialName}_${materialValue.propertyName}`;
    }
    /**
     * モーフィングを行う
     * @param value 値(0〜1)
     */
    morphing(value) {
        this.accumulateValue(value);
        this.apply();
    }
    /**
     * materialValue ごとに重みを計算する
     */
    accumulateValue(value) {
        this.materialValues.forEach((materialValue) => {
            const bindingKey = this.makeBindingKey(materialValue);
            if (this.m_materialValueMap[bindingKey]) {
                this.m_materialValueMap[bindingKey] += value;
            }
            else {
                this.m_materialValueMap[bindingKey] = value;
            }
        });
    }
    /**
     * Material のプロパティを更新する
     */
    apply() {
        this.m_used = {};
        Object.entries(this.materialValuesToApply).forEach(([bindingKey, materialValue]) => {
            const targetKey = this.makeTargetKey(materialValue);
            if (!(targetKey in this.m_used)) {
                const material = this.m_materialMap[materialValue.materialName];
                const value = this.baseValueCache[bindingKey].clone();
                // 対象のプロパティを初期値に戻す
                const valueName = materialValue.propertyName;
                if (valueName.endsWith('_ST_S')) {
                    const v = this.getMaterialProperty(material, valueName);
                    value.y = v.y;
                    value.w = v.w;
                }
                else if (valueName.endsWith('_ST_T')) {
                    const v = this.getMaterialProperty(material, valueName);
                    value.x = v.x;
                    value.z = v.z;
                }
                this.updateMaterialProperty(material, valueName, value);
                this.m_used[targetKey] = true;
            }
            const setter = this.m_materialSetterMap[bindingKey];
            if (setter) {
                setter(this.m_materialValueMap[bindingKey], false);
            }
        });
        this.m_materialValueMap = {};
    }
    /**
     * マテリアルのテクスチャか色に対応する Vector4 を取得する
     */
    getMaterialProperty(material, propertyName) {
        const match = propertyName.match(/^(_[^_]+)/);
        if (!match || !match[1]) {
            return null;
        }
        const key = match[1];
        if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
            if (PBRMaterialTextureMap[key]) {
                return this.convertTextureIntoVector4WhenNotNull(material[PBRMaterialTextureMap[key]]);
            }
            if (PBRMaterialColorMap[key]) {
                return this.convertColorIntoVector4(material[PBRMaterialColorMap[key]], material.alpha);
            }
            return null;
        }
        // MToonMaterial
        if (MToonMaterialTextureMap[key]) {
            return this.convertTextureIntoVector4WhenNotNull(material[MToonMaterialTextureMap[key]]);
        }
        if (MToonMaterialColorMap[key]) {
            return this.convertColorIntoVector4(material[MToonMaterialColorMap[key]], material.alpha);
        }
        return null;
    }
    /**
     * Texture を Vector4 に変換する
     */
    convertTextureIntoVector4WhenNotNull(texture) {
        if (!texture) {
            return null;
        }
        const t = texture;
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4(t.uScale, t.vScale, t.uOffset, t.vOffset);
    }
    /**
     * Color3 に alpha を加えて Vector4 に変換する
     */
    convertColorIntoVector4(color, alpha) {
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector4(color.r, color.g, color.b, alpha);
    }
    /**
     * マテリアルのテクスチャか色を更新する
     */
    updateMaterialProperty(material, propertyName, value) {
        const match = propertyName.match(/^(_[^_]+)/);
        if (!match || !match[1]) {
            return;
        }
        const key = match[1];
        if (material instanceof _babylonjs_core__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial) {
            if (PBRMaterialTextureMap[key]) {
                this.updateTextureWhenNotNull(material[PBRMaterialTextureMap[key]], value);
                return;
            }
            if (PBRMaterialColorMap[key]) {
                if (key === '_Color') {
                    material.alpha = value.w;
                }
                this.updateColor(material[PBRMaterialColorMap[key]], value);
            }
            return;
        }
        // MToonMaterial
        if (MToonMaterialTextureMap[key]) {
            this.updateTextureWhenNotNull(material[MToonMaterialTextureMap[key]], value);
            return;
        }
        if (MToonMaterialColorMap[key]) {
            if (key === '_Color') {
                material.alpha = value.w;
            }
            this.updateColor(material[MToonMaterialColorMap[key]], value);
        }
    }
    /**
     * Texture を Vector4 で更新する
     */
    updateTextureWhenNotNull(texture, value) {
        if (texture) {
            const t = texture;
            t.uScale = value.x;
            t.vScale = value.y;
            t.uOffset = value.z;
            t.vOffset = value.w;
        }
    }
    /**
     * Color3 を Vector4 で更新する
     */
    updateColor(color, value) {
        color.r = value.x;
        color.g = value.y;
        color.b = value.z;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts":
/*!***********************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColliderGroup": () => (/* binding */ ColliderGroup)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Meshes_Builders_sphereBuilder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Meshes/Builders/sphereBuilder */ "./node_modules/@babylonjs/core/Meshes/Builders/sphereBuilder.js");
/* harmony import */ var _collider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collider */ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts");


/**
 * VRM SpringBone ColliderGroup
 */
class ColliderGroup {
    /**
     * @param transform The node of the collider group for setting up collision detections.
     */
    constructor(transform) {
        this.transform = transform;
        this.colliders = [];
    }
    /**
     * Add offsetted collider
     *
     * @param offset The local coordinate from the node of the collider group.
     * @param radius The radius of the collider.
     */
    addCollider(offset, radius) {
        const sphere = _babylonjs_core_Meshes_Builders_sphereBuilder__WEBPACK_IMPORTED_MODULE_0__.SphereBuilder.CreateSphere(`${this.transform.name}_ColliderSphere`, {
            segments: 6,
            diameter: radius * 2.0,
            updatable: true,
        }, this.transform.getScene());
        sphere.setParent(this.transform);
        sphere.setPositionWithLocalVector(offset);
        sphere.setEnabled(false);
        this.colliders.push(new _collider__WEBPACK_IMPORTED_MODULE_1__.Collider(offset, radius, sphere));
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts":
/*!*****************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/collider.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Collider": () => (/* binding */ Collider)
/* harmony export */ });
/**
 * Collider
 */
class Collider {
    /**
     * @param offset The local coordinate from the node of the collider group.
     * @param radius The radius of the collider.
     * @param sphere The spehere mesh for worldMatrix and gizmo.
     */
    constructor(offset, radius, sphere) {
        this.offset = offset;
        this.radius = radius;
        this.sphere = sphere;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts":
/*!*******************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpringBoneController": () => (/* binding */ SpringBoneController)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _collider_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collider-group */ "./src/importer/babylon-vrm-loader/src/secondary-animation/collider-group.ts");
/* harmony import */ var _vrm_spring_bone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vrm-spring-bone */ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts");



/**
 * VRM SpringBone Controller
 */
class SpringBoneController {
    /**
     * @param ext SecondaryAnimation Object
     * @param getBone
     */
    //* TODO: Patched.
    constructor(ext, getBone, options) {
        this.ext = ext;
        const colliderGroups = this.constructColliderGroups(getBone);
        //* TODO: Patched.
        // this.springs = this.constructSprings(getBone, colliderGroups);
        this.springs = this.constructSprings(getBone, colliderGroups, options);
    }
    dispose() {
        this.springs = [];
    }
    /**
     * Update all SpringBones
     *
     * @param deltaTime Elapsed sec from previous frame
     * @see https://docs.unity3d.com/ScriptReference/Time-deltaTime.html
     */
    async update(deltaTime) {
        // ポーズ後のあらぶり防止のため clamp
        deltaTime = Math.max(0.0, Math.min(16.666, deltaTime)) / 1000;
        const promises = this.springs.map((spring) => {
            return spring.update(deltaTime);
        });
        return Promise.all(promises).then(() => {
            /* Do nothing */
        });
    }
    constructColliderGroups(getBone) {
        if (!this.ext.colliderGroups || !this.ext.colliderGroups.length) {
            return [];
        }
        const colliderGroups = [];
        this.ext.colliderGroups.forEach((colliderGroup) => {
            const bone = getBone(colliderGroup.node);
            const g = new _collider_group__WEBPACK_IMPORTED_MODULE_1__.ColliderGroup(bone);
            colliderGroup.colliders.forEach((collider) => {
                g.addCollider(
                // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
                new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(-collider.offset.x, collider.offset.y, -collider.offset.z), collider.radius);
            });
            colliderGroups.push(g);
        });
        return colliderGroups;
    }
    constructSprings(getBone, colliderGroups, options) {
        if (!this.ext.boneGroups || !this.ext.boneGroups.length) {
            return [];
        }
        const springs = [];
        this.ext.boneGroups.forEach((spring) => {
            const rootBones = (spring.bones || []).map((bone) => {
                return getBone(bone);
            });
            const springColliders = (spring.colliderGroups || []).map((g) => {
                return colliderGroups[g];
            });
            springs.push(
            //* TODO: Patched.
            // new VRMSpringBone(
            //     spring.comment,
            //     spring.stiffiness,
            //     spring.gravityPower,
            //     new Vector3(
            //         // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
            //         -spring.gravityDir.x,
            //         spring.gravityDir.y,
            //         -spring.gravityDir.z
            //     ).normalize(),
            //     spring.dragForce,
            //     getBone(spring.center),
            //     spring.hitRadius,
            //     rootBones,
            //     springColliders
            // )
            new _vrm_spring_bone__WEBPACK_IMPORTED_MODULE_2__.VRMSpringBone(spring.comment, options?.stiffness ? options.stiffness : spring.stiffiness, options?.gravityPower ? options.gravityPower : spring.gravityPower, options?.gravityDir
                ? options.gravityDir
                : new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(
                // VRM 右手系Y_UP, -Z_Front から Babylon.js 左手系Y_UP, +Z_Front にする
                -spring.gravityDir.x, spring.gravityDir.y, -spring.gravityDir.z).normalize(), options?.dragForce ? options.dragForce : spring.dragForce, getBone(spring.center), options?.hitRadius ? options.hitRadius : spring.hitRadius, rootBones, springColliders));
        });
        return springs;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts":
/*!******************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBoneLogic": () => (/* binding */ VRMSpringBoneLogic)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");

// based on
// http://rocketjump.skr.jp/unity3d/109/
// https://github.com/dwango/UniVRM/blob/master/Scripts/SpringBone/VRMSpringBone.cs
// https://github.com/pixiv/three-vrm/blob/aad551e041fad553c19d2091e5f5eaff1eb8faa8/packages/three-vrm/src/springbone/VRMSpringBone.ts
const IDENTITY_MATRIX = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix.Identity();
const _v3A = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _v3B = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _v3C = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
const _quatA = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Quaternion();
const _matA = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix();
const _matB = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Matrix();
/**
 * Verlet Spring Bone
 */
class VRMSpringBoneLogic {
    /**
     * @param center Center reference of TransformNode
     * @param radius Collision Radius
     * @param transform Base TransformNode
     */
    constructor(center, radius, transform) {
        this.center = center;
        this.radius = radius;
        this.transform = transform;
        this.currentTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        this.prevTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        this.nextTail = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3();
        // Initialize rotationQuaternion when not initialized
        if (!transform.rotationQuaternion) {
            transform.rotationQuaternion = transform.rotation.toQuaternion();
        }
        const worldMatrix = transform.getWorldMatrix();
        this.centerSpacePosition = worldMatrix.getTranslation();
        this.initialLocalMatrix = transform._localMatrix.clone();
        this.initialLocalRotation = transform.rotationQuaternion.clone();
        const children = transform.getChildTransformNodes(true);
        if (children.length === 0) {
            this.initialLocalChildPosition = transform.position.clone().normalize().scaleInPlace(0.07);
        }
        else {
            this.initialLocalChildPosition = children[0].position.clone();
        }
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, worldMatrix, this.currentTail);
        this.prevTail.copyFrom(this.currentTail);
        this.nextTail.copyFrom(this.currentTail);
        this.boneAxis = this.initialLocalChildPosition.normalizeToNew();
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, worldMatrix, _v3A);
        this.centerSpaceBoneLength = _v3A.subtractInPlace(this.centerSpacePosition).length();
        if (center) {
            this.getMatrixWorldToCenter(_matA);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.currentTail, _matA, this.currentTail);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.prevTail, _matA, this.prevTail);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.nextTail, _matA, this.nextTail);
            worldMatrix.multiplyToRef(_matA, _matA);
            _matA.getTranslationToRef(this.centerSpacePosition);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.initialLocalChildPosition, _matA, _v3A);
            this.centerSpaceBoneLength = _v3A.subtractInPlace(this.centerSpacePosition).length();
        }
    }
    /**
     * Update Tail position
     *
     * @param stiffnessForce Current frame stiffness
     * @param dragForce Current frame drag force
     * @param external Current frame external force
     * @param colliderGroups Current frame colliderGroups
     */
    update(stiffnessForce, dragForce, external, colliderGroups) {
        if (Number.isNaN(this.transform.getAbsolutePosition().x)) {
            // Do not update when absolute position is invalid
            return;
        }
        // Get bone position in center space
        this.getMatrixWorldToCenter(_matA);
        this.transform.getWorldMatrix().multiplyToRef(_matA, _matA);
        _matA.getTranslationToRef(this.centerSpacePosition);
        // Get parent position in center space
        this.getMatrixWorldToCenter(_matB);
        this.getParentMatrixWorld().multiplyToRef(_matB, _matB);
        // verlet積分で次の位置を計算
        this.nextTail.copyFrom(this.currentTail);
        {
            // 減衰付きで前のフレームの移動を継続
            _v3A.copyFrom(this.currentTail)
                .subtractInPlace(this.prevTail)
                .scaleInPlace(1.0 - dragForce);
            this.nextTail.addInPlace(_v3A);
        }
        {
            // 親の回転による子ボーンの移動目標
            _v3A.copyFrom(this.boneAxis);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(_v3A, this.initialLocalMatrix, _v3A);
            _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(_v3A, _matB, _v3A);
            _v3A.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(stiffnessForce);
            this.nextTail.addInPlace(_v3A);
        }
        {
            // 外力による移動量
            this.nextTail.addInPlace(external);
        }
        {
            // 長さを boneLength に強制
            this.nextTail.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(this.centerSpaceBoneLength).addInPlace(this.centerSpacePosition);
        }
        {
            // Collision で移動
            this.collide(colliderGroups, this.nextTail);
        }
        this.prevTail.copyFrom(this.currentTail);
        this.currentTail.copyFrom(this.nextTail);
        this.initialLocalMatrix.multiplyToRef(_matB, _matA);
        const initialCenterSpaceMatrixInv = _matA.invert();
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinatesToRef(this.nextTail, initialCenterSpaceMatrixInv, _v3A);
        _v3A.normalizeToRef(_v3B);
        _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Quaternion.FromUnitVectorsToRef(this.boneAxis, _v3B, _quatA);
        const applyRotation = _quatA;
        this.initialLocalRotation.multiplyToRef(applyRotation, this.transform.rotationQuaternion);
        // update WorldMatrix
        this.transform.computeWorldMatrix(true);
    }
    /**
     * Create a matrix that converts world space into center space.
     * @param result Target matrix
     */
    getMatrixWorldToCenter(result) {
        if (this.center) {
            this.center.getWorldMatrix().invertToRef(result);
        }
        else {
            result.copyFrom(IDENTITY_MATRIX);
        }
        return result;
    }
    /**
     * Returns the world matrix of its parent object.
     */
    getParentMatrixWorld() {
        return this.transform.parent ? this.transform.parent.getWorldMatrix() : IDENTITY_MATRIX;
    }
    /**
     * 衝突判定を行う
     * @param colliderGroups
     * @param tail
     */
    collide(colliderGroups, tail) {
        colliderGroups.forEach((colliderGroup) => {
            colliderGroup.colliders.forEach((collider) => {
                this.getMatrixWorldToCenter(_matA);
                collider.sphere.computeWorldMatrix().multiplyToRef(_matA, _matA);
                _matA.getTranslationToRef(_v3A);
                const colliderCenterSpacePosition = _v3A;
                let maxAbsScale = 0;
                collider.sphere.absoluteScaling.asArray().forEach((s) => {
                    maxAbsScale = Math.max(maxAbsScale, Math.abs(s));
                });
                const colliderRadius = collider.radius * maxAbsScale;
                const r = this.radius + colliderRadius;
                tail.subtractToRef(colliderCenterSpacePosition, _v3B);
                if (_v3B.lengthSquared() <= r * r) {
                    const normal = _v3B.copyFrom(tail).subtractInPlace(colliderCenterSpacePosition).normalize();
                    const posFromCollider = _v3C.copyFrom(colliderCenterSpacePosition).addInPlace(normal.scaleInPlace(r));
                    tail.copyFrom(posFromCollider.subtractInPlace(this.centerSpacePosition).normalize().scaleInPlace(this.centerSpaceBoneLength).addInPlace(this.centerSpacePosition));
                }
            });
        });
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts":
/*!************************************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBone": () => (/* binding */ VRMSpringBone)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/standardMaterial */ "./node_modules/@babylonjs/core/Materials/standardMaterial.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _babylonjs_core_Meshes_meshBuilder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Meshes/meshBuilder */ "./node_modules/@babylonjs/core/Meshes/meshBuilder.js");
/* harmony import */ var _vrm_spring_bone_logic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vrm-spring-bone-logic */ "./src/importer/babylon-vrm-loader/src/secondary-animation/vrm-spring-bone-logic.ts");




/**
 * @see https://github.com/vrm-c/UniVRM/blob/master/Assets/VRM/UniVRM/Scripts/SpringBone/VRMSpringBone.cs
 */
class VRMSpringBone {
    /**
     * @see https://github.com/vrm-c/vrm-specification/tree/master/specification/0.0
     * @param comment Annotation comment
     * @param stiffness The resilience of the swaying object (the power of returning to the initial pose).
     * @param gravityPower The strength of gravity.
     * @param gravityDir The direction of gravity. Set (0, -1, 0) for simulating the gravity. Set (1, 0, 0) for simulating the wind.
     * @param dragForce The resistance (deceleration) of automatic animation.
     * @param center The reference point of a swaying object can be set at any location except the origin.
     *               When implementing UI moving with warp,
     *               the parent node to move with warp can be specified if you don't want to make the object swaying with warp movement.
     * @param hitRadius The radius of the sphere used for the collision detection with colliders.
     * @param bones Specify the node index of the root bone of the swaying object.
     * @param colliderGroups Specify the index of the collider group for collisions with swaying objects.
     */
    constructor(comment, 
    //* TODO: Patched.
    // public readonly stiffness: number,
    // public readonly gravityPower: number,
    // public readonly gravityDir: Vector3,
    // public readonly dragForce: number,
    stiffness, gravityPower, gravityDir, dragForce, center, 
    //* TODO: Patched.
    // public readonly hitRadius: number,
    hitRadius, bones, colliderGroups) {
        this.comment = comment;
        this.stiffness = stiffness;
        this.gravityPower = gravityPower;
        this.gravityDir = gravityDir;
        this.dragForce = dragForce;
        this.center = center;
        this.hitRadius = hitRadius;
        this.bones = bones;
        this.colliderGroups = colliderGroups;
        this.verlets = [];
        this.activeBones = [];
        /** @hidden */
        this.drawGizmo = false;
        this.activeBones = this.bones.filter((bone) => bone !== null);
        this.activeBones.forEach((bone) => {
            [bone].concat(bone.getChildTransformNodes()).forEach((b) => {
                this.verlets.push(new _vrm_spring_bone_logic__WEBPACK_IMPORTED_MODULE_3__.VRMSpringBoneLogic(this.center, this.hitRadius, b));
            });
        });
        if (this.drawGizmo) {
            this.setupGizmo();
        }
    }
    setupGizmo() {
        this.activeBones.forEach((bone) => {
            const scene = bone.getScene();
            [bone].concat(bone.getChildTransformNodes()).forEach((b) => {
                const boneGizmo = _babylonjs_core_Meshes_meshBuilder__WEBPACK_IMPORTED_MODULE_2__.MeshBuilder.CreateSphere(b.name + '_boneGizmo', {
                    segments: 6,
                    diameter: this.hitRadius * 2,
                    updatable: true,
                }, scene);
                const mat = new _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__.StandardMaterial(b.name + '_boneGizmomat', scene);
                mat.emissiveColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3.Red();
                mat.wireframe = true;
                boneGizmo.material = mat;
                boneGizmo.setParent(b);
                boneGizmo.position = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero();
            });
        });
        this.colliderGroups.forEach((group) => {
            const scene = group.transform.getScene();
            group.colliders.forEach((collider) => {
                const sphere = collider.sphere;
                if (!sphere.isEnabled(false)) {
                    sphere.setEnabled(true);
                    const mat = new _babylonjs_core_Materials_standardMaterial__WEBPACK_IMPORTED_MODULE_0__.StandardMaterial(group.transform.name + '_colliderGizmomat', scene);
                    mat.emissiveColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3.Yellow();
                    mat.wireframe = true;
                    sphere.material = mat;
                }
            });
        });
    }
    /**
     * Update bones
     *
     * @param deltaTime
     */
    //* TODO: Patched.
    // public async update(deltaTime: number): Promise<void> {
    async update(deltaTime, boneOptions) {
        //* TODO: Patched.
        const oldOptions = this.updateOptions(boneOptions);
        const stiffness = this.stiffness * deltaTime;
        const external = this.gravityDir.scale(this.gravityPower * deltaTime);
        const promises = this.verlets.map((verlet) => {
            return new Promise((resolve) => {
                verlet.update(stiffness, this.dragForce, external, this.colliderGroups);
                resolve();
            });
        });
        //* TODO: Patched.
        // Restore options
        this.updateOptions(oldOptions);
        return Promise.all(promises).then(() => {
            /* Do Nothing */
        });
    }
    //* TODO: Patched.
    updateOptions(boneOptions) {
        const backupOptions = {
            stiffness: this.stiffness,
            gravityPower: this.gravityPower,
            gravityDir: this.gravityDir.clone(),
            dragForce: this.dragForce,
            hitRadius: this.hitRadius,
        };
        this.stiffness = boneOptions?.stiffness || this.stiffness;
        this.gravityPower = boneOptions?.gravityPower || this.gravityPower;
        this.gravityDir = boneOptions?.gravityDir || this.gravityDir;
        this.dragForce = boneOptions?.dragForce || this.dragForce;
        this.hitRadius = boneOptions?.hitRadius || this.hitRadius;
        return backupOptions;
    }
}


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-extension.ts":
/*!**************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-extension.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMLoaderExtension": () => (/* binding */ VRMLoaderExtension)
/* harmony export */ });
/* harmony import */ var _vrm_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vrm-manager */ "./src/importer/babylon-vrm-loader/src/vrm-manager.ts");
/* harmony import */ var _vrm_material_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vrm-material-generator */ "./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts");


/**
 * `extensions` に入る拡張キー
 */
//* TODO: Patched.
// const NAME = 'VRM';
/**
 * VRM 拡張を処理する
 * [Specification](https://github.com/vrm-c/vrm-specification/tree/master/specification/0.0)
 */
class VRMLoaderExtension {
    /**
     * @inheritdoc
     */
    //* TODO: Patched.
    constructor(loader, v3DCore) {
        this.loader = loader;
        this.v3DCore = v3DCore;
        /**
         * @inheritdoc
         */
        this.name = VRMLoaderExtension.NAME;
        /**
         * @inheritdoc
         */
        this.enabled = true;
        /**
         * この Mesh index 以降が読み込み対象
         */
        this.meshesFrom = 0;
        /**
         * この TransformNode index 以降が読み込み対象
         */
        this.transformNodesFrom = 0;
        /**
         * この Material index 以降が読み込み対象
         */
        this.materialsFrom = 0;
        //* TODO: Patched.
        /**
         * Loader observers
         */
        this.loaderObservers = [];
        // GLTFLoader has already added rootMesh as __root__ before load extension
        // @see glTFLoader._loadData
        this.meshesFrom = this.loader.babylonScene.meshes.length - 1;
        this.transformNodesFrom = this.loader.babylonScene.transformNodes.length;
        this.materialsFrom = this.loader.babylonScene.materials.length;
        //* TODO: Patched.
        this.addLoaderObserver(this.v3DCore);
        this.onLoadedCallBack = () => {
            v3DCore.addVRMManager(this.manager);
        };
        v3DCore.addOnLoadCompleteCallbacks(this.onLoadedCallBack);
    }
    /**
     * @inheritdoc
     */
    dispose() {
        this.loader = null;
        //* TODO: Patched.
        this.loaderObservers = [];
        this.v3DCore.removeOnLoadCompleteCallback(this.onLoadedCallBack);
    }
    /**
     * @inheritdoc
     */
    onReady() {
        if (!this.loader.gltf.extensions || !this.loader.gltf.extensions[VRMLoaderExtension.NAME]) {
            return;
        }
        //* TODO: Patched.
        // const scene = this.loader.babylonScene;
        // const manager = new VRMManager(this.loader.gltf.extensions[VRMLoaderExtension.NAME], this.loader.babylonScene, this.meshesFrom, this.transformNodesFrom, this.materialsFrom);
        this.manager = new _vrm_manager__WEBPACK_IMPORTED_MODULE_0__.VRMManager(this.loader.gltf.extensions[VRMLoaderExtension.NAME], this.loader.babylonScene, this.meshesFrom, this.transformNodesFrom, this.materialsFrom);
        //* TODO: Patched.
        // scene.metadata = scene.metadata || {};
        // scene.metadata.vrmManagers = scene.metadata.vrmManagers || [];
        // scene.metadata.vrmManagers.push(manager);
        this.loader.babylonScene.onDisposeObservable.add(() => {
            // Scene dispose 時に Manager も破棄する
            //* TODO: Patched.
            // manager.dispose();
            this.manager.dispose();
            // this.loader.babylonScene.metadata.vrmManagers = [];
        });
        //* TODO: Patched.
        // Inform observers
        for (const observer of this.loaderObservers) {
            observer.onLoadReady();
        }
    }
    /**
     * @inheritdoc
     */
    _loadVertexDataAsync(context, primitive, babylonMesh) {
        if (!primitive.extras || !primitive.extras.targetNames) {
            return null;
        }
        // まだ MorphTarget が生成されていないので、メタ情報にモーフターゲット情報を入れておく
        babylonMesh.metadata = babylonMesh.metadata || {};
        babylonMesh.metadata.vrmTargetNames = primitive.extras.targetNames;
        return null;
    }
    /**
     * @inheritdoc
     */
    _loadMaterialAsync(context, material, mesh, babylonDrawMode, assign) {
        // ジェネレータでマテリアルを生成する
        return new _vrm_material_generator__WEBPACK_IMPORTED_MODULE_1__.VRMMaterialGenerator(this.loader).generate(context, material, mesh, babylonDrawMode, assign);
    }
    //* TODO: Patched.
    /**
     * Add observer
     */
    addLoaderObserver(observer) {
        this.loaderObservers.push(observer);
    }
}
//* TODO: Patched.
VRMLoaderExtension.NAME = 'VRM';
//* TODO: Patched.
// ローダーに登録する
// GLTFLoader.RegisterExtension(NAME, (loader) => new VRM(loader));


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts":
/*!****************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMFileLoader": () => (/* binding */ VRMFileLoader)
/* harmony export */ });
/* harmony import */ var _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/loaders/glTF/glTFFileLoader */ "./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js");

/**
 * VRM/VCI ファイルを読み込めるようにする
 * 拡張子を変更しただけ
 */
class VRMFileLoader extends _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_0__.GLTFFileLoader {
    constructor() {
        super(...arguments);
        this.name = 'vrm';
        this.extensions = {
            '.vrm': { isBinary: true },
            '.vci': { isBinary: true },
        };
        this.vrmManager = null;
    }
    createPlugin() {
        return new VRMFileLoader();
    }
    //* TODO: Patched.
    loadAsync(scene, data, rootUrl, onProgress, fileName) {
        this.uri = rootUrl;
        if (fileName)
            this.uri += fileName;
        return super.loadAsync(scene, data, rootUrl, onProgress, fileName);
    }
}
//* TODO: Patched.
// if (SceneLoader) {
//     SceneLoader.RegisterPlugin(new VRMFileLoader());
// }


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts":
/*!***************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IVRMMaterialPropertyShader": () => (/* binding */ IVRMMaterialPropertyShader)
/* harmony export */ });
var IVRMMaterialPropertyShader;
(function (IVRMMaterialPropertyShader) {
    IVRMMaterialPropertyShader["VRM_USE_GLTFSHADER"] = "VRM_USE_GLTFSHADER";
    IVRMMaterialPropertyShader["VRMMToon"] = "VRM/MToon";
    IVRMMaterialPropertyShader["VRMUnlitTransparentZWrite"] = "VRM/UnlitTransparentZWrite";
})(IVRMMaterialPropertyShader || (IVRMMaterialPropertyShader = {}));


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-manager.ts":
/*!************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-manager.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "morphingTargetProperty": () => (/* binding */ morphingTargetProperty),
/* harmony export */   "VRMManager": () => (/* binding */ VRMManager)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _secondary_animation_spring_bone_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./secondary-animation/spring-bone-controller */ "./src/importer/babylon-vrm-loader/src/secondary-animation/spring-bone-controller.ts");
/* harmony import */ var _humanoid_bone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./humanoid-bone */ "./src/importer/babylon-vrm-loader/src/humanoid-bone.ts");
/* harmony import */ var _material_value_binding_merger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./material-value-binding-merger */ "./src/importer/babylon-vrm-loader/src/material-value-binding-merger.ts");




//* TODO: Patched.
class morphingTargetProperty {
    constructor(label, value, manager) {
        this.label = label;
        this.manager = manager;
        this._value = value;
    }
    get value() {
        return this._value;
    }
    set value(value) {
        this._value = Math.max(0, Math.min(1, value));
        this.manager.morphing(this.label, value);
    }
}
/**
 * VRM キャラクターを動作させるためのマネージャ
 */
class VRMManager {
    /**
     *
     * @param ext glTF.extensions.VRM の中身 json
     * @param scene
     * @param meshesFrom この番号以降のメッシュがこの VRM に該当する
     * @param transformNodesFrom この番号以降の TransformNode がこの VRM に該当する
     * @param materialsNodesFrom この番号以降の Material がこの VRM に該当する
     */
    constructor(ext, scene, meshesFrom, transformNodesFrom, materialsNodesFrom) {
        this.ext = ext;
        this.scene = scene;
        this.meshesFrom = meshesFrom;
        this.transformNodesFrom = transformNodesFrom;
        this.materialsNodesFrom = materialsNodesFrom;
        this.isBinaryMorphMap = {};
        this.morphTargetMap = {};
        this.materialValueBindingMergerMap = {};
        this.presetMorphTargetMap = {};
        this.transformNodeMap = {};
        this.transformNodeCache = {};
        this.meshCache = {};
        this._cameras = [];
        this.meshCache = this.constructMeshCache();
        this.transformNodeCache = this.constructTransformNodeCache();
        this.springBoneController = new _secondary_animation_spring_bone_controller__WEBPACK_IMPORTED_MODULE_1__.SpringBoneController(this.ext.secondaryAnimation, this.findTransformNode.bind(this));
        if (this.ext.blendShapeMaster && this.ext.blendShapeMaster.blendShapeGroups) {
            this.constructIsBinaryMap();
            this.constructMorphTargetMap();
            this.constructMaterialValueBindingMergerMap();
        }
        this.constructTransformNodeMap();
        this._humanoidBone = new _humanoid_bone__WEBPACK_IMPORTED_MODULE_2__.HumanoidBone(this.transformNodeMap);
        //* TODO: Patched.
        this.removeDuplicateSkeletons();
        this._rootSkeleton = this.getRootSkeletonNode();
        // Rename __root__ node
        this.rootMesh.name = VRMManager.ROOT_MESH_PREFIX + this.scene.getNodes().filter((e) => e.name.includes(VRMManager.ROOT_MESH_PREFIX)).length;
    }
    get cameras() {
        return this._cameras;
    }
    appendCamera(camera) {
        this._cameras.push(camera);
    }
    resetCameras() {
        this._cameras = [];
    }
    //* TODO: Patched.
    /**
     * Remove duplicate skeletons when importing VRM.
     * Only tested on VRoidStudio output files.
     * @private
     */
    removeDuplicateSkeletons() {
        let skeleton = null;
        for (const nodeIndex of Object.keys(this.meshCache).map(Number)) {
            const meshes = this.meshCache[nodeIndex];
            if (meshes.length && meshes[0].skeleton) {
                if (!skeleton) {
                    skeleton = meshes[0].skeleton;
                    if (this._rootMesh) {
                        const rootBone = skeleton.bones[0];
                        // Usually it is called "Root", but there are exceptions
                        if (rootBone.name !== 'Root')
                            console.warn('The first bone has a different name than "Root"');
                    }
                }
                else {
                    // weak sanity check
                    if (skeleton.bones.length != meshes[0].skeleton.bones.length)
                        console.warn('Skeletons have different numbers of bones!');
                    meshes[0].skeleton.dispose();
                    for (const mesh of meshes) {
                        mesh.skeleton = skeleton;
                    }
                }
            }
        }
    }
    //* TODO: Patched.
    /**
     * Find the root node of skeleton.
     * @private
     */
    getRootSkeletonNode() {
        const rootMeshChildren = this._rootMesh.getChildren((node) => {
            return node.name === 'Root' || node.name === 'Armature';
        });
        if (rootMeshChildren.length > 0)
            return rootMeshChildren[0];
        else {
            // Try to find in scene directly
            const rootMeshChild = this.scene.getNodeByName('Root') ? this.scene.getNodeByName('Root') : this.scene.getNodeByName('Armature');
            if (rootMeshChild && !rootMeshChild.parent)
                return rootMeshChild;
            else
                throw Error('Cannot find root skeleton node!');
        }
    }
    /**
     * Secondary Animation を更新する
     *
     * @param deltaTime 前フレームからの経過秒数(sec)
     */
    async update(deltaTime) {
        await this.springBoneController.update(deltaTime);
    }
    /**
     * 破棄処理
     */
    dispose() {
        this.springBoneController.dispose();
        this._humanoidBone.dispose();
        this.morphTargetMap = null;
        this.materialValueBindingMergerMap = null;
        this.presetMorphTargetMap = null;
        this.transformNodeMap = null;
        this.transformNodeCache = null;
        this.meshCache = null;
        this._rootMesh = null;
    }
    /**
     * モーフィングを行う
     * @param label モーフ名
     * @param value 値(0〜1)
     */
    morphing(label, value) {
        const v = this.calcMorphValue(label, value);
        if (this.morphTargetMap[label]) {
            this.morphTargetMap[label].forEach((setting) => {
                setting.target.influence = v * (setting.weight / 100);
            });
        }
        if (this.materialValueBindingMergerMap[label]) {
            this.materialValueBindingMergerMap[label].morphing(v);
        }
    }
    /**
     * プリセットモーフのモーフィングを行う
     * @param label モーフ名
     * @param value 値(0〜1)
     */
    morphingPreset(label, value) {
        if (!this.presetMorphTargetMap[label]) {
            return;
        }
        const v = this.calcMorphValue(label, value);
        this.presetMorphTargetMap[label].forEach((setting) => {
            setting.target.influence = v * (setting.weight / 100);
        });
    }
    /**
     * モーフィング用の値を計算する
     * @param label モーフ名
     * @param value 値
     */
    calcMorphValue(label, value) {
        const v = Math.max(0.0, Math.min(1.0, value));
        if (this.isBinaryMorphMap[label]) {
            return v > 0.5 ? 1.0 : 0.0;
        }
        return v;
    }
    /**
     * list morphing name
     */
    getMorphingList() {
        return Object.keys(this.morphTargetMap);
    }
    /**
     * 一人称時のカメラ位置を絶対座標として取得する
     *
     * firstPersonBone が未設定の場合は null を返す
     *
     * @returns 一人称時のカメラの現在における絶対座標
     */
    getFirstPersonCameraPosition() {
        const firstPersonBone = this.getFirstPersonBone();
        if (!firstPersonBone) {
            return null;
        }
        const basePos = firstPersonBone.getAbsolutePosition();
        const offsetPos = this.ext.firstPerson.firstPersonBoneOffset;
        return new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(basePos.x + offsetPos.x, basePos.y + offsetPos.y, basePos.z + offsetPos.z);
    }
    /**
     * 一人称時に頭とみなす TransformNode を取得する
     */
    getFirstPersonBone() {
        return this.findTransformNode(this.ext.firstPerson.firstPersonBone);
    }
    /**
     * ボーン名からそのボーンに該当する TransformNode を取得する
     *
     * @param name HumanBoneName
     * @deprecated Use humanoidBone getter instead. This method will delete at v2.
     */
    getBone(name) {
        return this.transformNodeMap[name] || null;
    }
    /**
     * Get HumanoidBone Methods
     */
    get humanoidBone() {
        return this._humanoidBone;
    }
    /**
     * VRM Root mesh
     *
     * Useful for Model Transformation
     */
    get rootMesh() {
        return this._rootMesh;
    }
    /**
     * node 番号から該当する TransformNode を探す
     * 数が多くなるのでキャッシュに参照を持つ構造にする
     * gltf の node 番号は `metadata.gltf.pointers` に記録されている
     * @param nodeIndex
     */
    findTransformNode(nodeIndex) {
        return this.transformNodeCache[nodeIndex] || null;
    }
    /**
     * mesh 番号からメッシュを探す
     * gltf の mesh 番号は `metadata.gltf.pointers` に記録されている
     * @deprecated Use findMeshes instead. This method has broken.
     */
    findMesh(meshIndex) {
        return (this.meshCache[meshIndex] && this.meshCache[meshIndex][0]) || null;
    }
    /**
     * mesh 番号からメッシュを探す
     * gltf の mesh 番号は `metadata.gltf.pointers` に記録されている
     */
    findMeshes(meshIndex) {
        return this.meshCache[meshIndex] || null;
    }
    /**
     * 事前に MorphTarget と isBinary を紐付ける
     */
    constructIsBinaryMap() {
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            this.isBinaryMorphMap[g.name] = g.isBinary;
        });
    }
    /**
     * 事前に MorphTarget と BlendShape を紐付ける
     */
    constructMorphTargetMap() {
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            if (!g.binds) {
                return;
            }
            g.binds.forEach((b) => {
                const meshes = this.findMeshes(b.mesh);
                if (!meshes) {
                    console.log(`Undefined BlendShapeBind Mesh`, b);
                    return;
                }
                meshes.forEach((mesh) => {
                    const morphTargetManager = mesh.morphTargetManager;
                    if (!morphTargetManager) {
                        console.log(`Undefined morphTargetManager`, b);
                        return;
                    }
                    const target = morphTargetManager.getTarget(b.index);
                    this.morphTargetMap[g.name] = this.morphTargetMap[g.name] || [];
                    this.morphTargetMap[g.name].push({
                        target,
                        weight: b.weight,
                    });
                    if (g.presetName) {
                        this.presetMorphTargetMap[g.presetName] = this.presetMorphTargetMap[g.presetName] || [];
                        this.presetMorphTargetMap[g.presetName].push({
                            target,
                            weight: b.weight,
                        });
                    }
                });
            });
        });
    }
    /**
     * 事前に MaterialValueBindingMerger とモーフ名を紐付ける
     */
    constructMaterialValueBindingMergerMap() {
        const materials = this.scene.materials.slice(this.materialsNodesFrom);
        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {
            if (!g.materialValues) {
                return;
            }
            this.materialValueBindingMergerMap[g.name] = new _material_value_binding_merger__WEBPACK_IMPORTED_MODULE_3__.MaterialValueBindingMerger(materials, g.materialValues);
        });
    }
    /**
     * 事前に TransformNode と bone 名を紐づける
     */
    constructTransformNodeMap() {
        this.ext.humanoid.humanBones.forEach((b) => {
            const node = this.findTransformNode(b.node);
            if (!node) {
                return;
            }
            this.transformNodeMap[b.bone] = node;
        });
    }
    /**
     * node 番号と TransformNode を紐づける
     */
    constructTransformNodeCache() {
        const cache = {};
        for (let index = this.transformNodesFrom; index < this.scene.transformNodes.length; index++) {
            const node = this.scene.transformNodes[index];
            // ポインタが登録されていないものは省略
            if (!node || !node.metadata || !node.metadata.gltf || !node.metadata.gltf.pointers || node.metadata.gltf.pointers.length === 0) {
                continue;
            }
            for (const pointer of node.metadata.gltf.pointers) {
                if (pointer.startsWith('/nodes/')) {
                    const nodeIndex = parseInt(pointer.substr(7), 10);
                    cache[nodeIndex] = node;
                    break;
                }
            }
        }
        return cache;
    }
    /**
     * mesh 番号と Mesh を紐づける
     */
    constructMeshCache() {
        const cache = {};
        for (let index = this.meshesFrom; index < this.scene.meshes.length; index++) {
            const mesh = this.scene.meshes[index];
            if (mesh.id === '__root__') {
                this._rootMesh = mesh;
                continue;
            }
            // ポインタが登録されていないものは省略
            if (!mesh || !mesh.metadata || !mesh.metadata.gltf || !mesh.metadata.gltf.pointers || mesh.metadata.gltf.pointers.length === 0) {
                continue;
            }
            for (const pointer of mesh.metadata.gltf.pointers) {
                const match = pointer.match(/^\/meshes\/(\d+).+$/);
                if (match) {
                    const nodeIndex = parseInt(match[1], 10);
                    cache[nodeIndex] = cache[nodeIndex] || [];
                    cache[nodeIndex].push(mesh);
                    break;
                }
            }
        }
        return cache;
    }
}
//* TODO: Patched.
VRMManager.ROOT_MESH_PREFIX = 'vrm_root_';


/***/ }),

/***/ "./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts":
/*!***********************************************************************!*\
  !*** ./src/importer/babylon-vrm-loader/src/vrm-material-generator.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMMaterialGenerator": () => (/* binding */ VRMMaterialGenerator)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! babylon-mtoon-material */ "./node_modules/babylon-mtoon-material/dist/index.module.js");
/* harmony import */ var babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vrm-interfaces */ "./src/importer/babylon-vrm-loader/src/vrm-interfaces.ts");
/* harmony import */ var _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Engines/engine */ "./node_modules/@babylonjs/core/Engines/engine.js");




/**
 * VRM で指定される Material を生成する
 * [VRM が提供するシェーダ](https://vrm.dev/en/univrm/shaders/index.html) を特定し読み込む
 * - UnlitTexture: 不透明, VRM ファイル側で [KHR_materials_unlit](https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_unlit) が定義されているため、何もしない
 * - UnlitCutout: 透明度が閾値以下の部分を透明とする, 同上
 * - UnlitTransparent: アルファブレンド。ZWriteしない, 同上
 * - UnlitTransparentZWrite: アルファブレンド。ZWriteする, 同上に加え、プロパティで ZWrite を強制しています
 * - MToon: MToonMaterial を差し替えています。
 */
class VRMMaterialGenerator {
    /**
     * @inheritdoc
     */
    constructor(loader) {
        this.loader = loader;
    }
    /**
     * マテリアルを生成する Promise を返す
     * VRM 対象外の場合は null
     */
    generate(context, material, mesh, babylonDrawMode, assign) {
        const materialProp = this.findMaterialPropertyByName(material.name, this.getMaterialProperties());
        if (!materialProp) {
            return null;
        }
        mesh.alphaIndex = materialProp.renderQueue;
        const newMaterial = this.createMaterialByShader(context, material, babylonDrawMode, materialProp);
        if (!newMaterial) {
            return null;
        }
        assign(newMaterial);
        if (newMaterial instanceof babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__.MToonMaterial) {
            return this.loadMToonTexturesAsync(context, newMaterial, materialProp);
        }
        return Promise.resolve(newMaterial);
    }
    /**
     * VRM または VCI からマテリアルプロパティの配列を探す
     */
    getMaterialProperties() {
        if (!this.loader.gltf.extensions) {
            return [];
        }
        if (this.loader.gltf.extensions.VRM && this.loader.gltf.extensions.VRM.materialProperties) {
            return this.loader.gltf.extensions.VRM.materialProperties;
        }
        if (this.loader.gltf.extensions.VCAST_vci_material_unity && this.loader.gltf.extensions.VCAST_vci_material_unity.materials) {
            return this.loader.gltf.extensions.VCAST_vci_material_unity.materials;
        }
        return [];
    }
    /**
     * マテリアル名から MaterialProperty を探す
     * @param materialName マテリアル名
     * @param extension 拡張データ
     */
    findMaterialPropertyByName(materialName, materials) {
        if (!materialName || !materials) {
            return null;
        }
        const mats = materials.filter((v) => v.name === materialName);
        if (mats.length === 0) {
            return null;
        }
        else if (mats.length >= 2) {
            this.loader.log(`Duplicated vrm material name found: ${materialName}`);
        }
        return mats[mats.length - 1];
    }
    /**
     * テクスチャを読み込む
     * @param context 現在のコンテキスト
     * @param material 生成した MToonMaterial
     * @param prop 生成した MToonMaterial のマテリアルプロパティ
     */
    loadMToonTexturesAsync(context, material, prop) {
        const promises = [];
        // 全てのテクスチャの UV Offset & Scale はメインテクスチャのものを流用する
        const uvOffsetScale = prop.vectorProperties._MainTex;
        if (!uvOffsetScale) {
            return Promise.resolve(material);
        }
        const applyTexture = (index, callback) => {
            applyPropertyWhenDefined(index, (value) => {
                promises.push(this.loader.loadTextureInfoAsync(`${context}/textures/${index}`, { index: value }, (babylonTexture) => {
                    // 実際は Texture インスタンスが来るのでキャスト
                    const t = babylonTexture;
                    t.uOffset = uvOffsetScale[0];
                    t.vOffset = uvOffsetScale[1];
                    t.uScale = uvOffsetScale[2];
                    t.vScale = uvOffsetScale[3];
                    callback(babylonTexture);
                }));
            });
        };
        applyTexture(prop.textureProperties._MainTex, (texture) => {
            if (material.alphaBlend || material.alphaTest) {
                texture.hasAlpha = true;
            }
            material.diffuseTexture = texture;
        });
        applyTexture(prop.textureProperties._ShadeTexture, (texture) => (material.shadeTexture = texture));
        applyTexture(prop.textureProperties._BumpMap, (texture) => (material.bumpTexture = texture));
        applyTexture(prop.textureProperties._ReceiveShadowTexture, (texture) => (material.receiveShadowTexture = texture));
        applyTexture(prop.textureProperties._ShadingGradeTexture, (texture) => (material.shadingGradeTexture = texture));
        applyTexture(prop.textureProperties._RimTexture, (texture) => (material.rimTexture = texture));
        applyTexture(prop.textureProperties._SphereAdd, (texture) => (material.matCapTexture = texture));
        applyTexture(prop.textureProperties._EmissionMap, (texture) => (material.emissiveTexture = texture));
        applyTexture(prop.textureProperties._OutlineWidthTexture, (texture) => (material.outlineWidthTexture = texture));
        applyTexture(prop.textureProperties._UvAnimMaskTexture, (texture) => (material.uvAnimationMaskTexture = texture));
        return Promise.all(promises).then(() => material);
    }
    /**
     * シェーダ名からマテリアルを推測して生成する
     * @param context 現在のコンテキスト
     * @param material glTF マテリアル
     * @param babylonDrawMode 描画種類
     * @param prop 生成するマテリアルプロパティ
     */
    createMaterialByShader(context, material, babylonDrawMode, prop) {
        if (prop.shader === _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__.IVRMMaterialPropertyShader.VRMMToon) {
            const mtoonMaterial = new babylon_mtoon_material__WEBPACK_IMPORTED_MODULE_1__.MToonMaterial(material.name || `MToonMaterial${material.index}`, this.loader.babylonScene);
            this.setMToonMaterialProperties(mtoonMaterial, prop);
            return mtoonMaterial;
        }
        if (prop.shader === _vrm_interfaces__WEBPACK_IMPORTED_MODULE_3__.IVRMMaterialPropertyShader.VRMUnlitTransparentZWrite) {
            const mat = this.loader.createMaterial(context, material, babylonDrawMode);
            // 通常マテリアルに Depth Write を強制
            mat.disableDepthWrite = false;
            mat.forceDepthWrite = true;
            return mat;
        }
        return null;
    }
    /**
     * マテリアルに VRM プロパティを設定
     * VRM プロパティとマテリアルプロパティのマッピングを行っている
     * 初期値はマテリアル実装側に持っているため、値がある場合のみ上書きする
     */
    setMToonMaterialProperties(material, prop) {
        applyPropertyWhenDefined(prop.floatProperties._Cutoff, (value) => (material.alphaCutOff = value));
        applyPropertyWhenDefined(prop.vectorProperties._Color, (value) => {
            material.diffuseColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
            material.alpha = value[3];
        });
        applyPropertyWhenDefined(prop.vectorProperties._ShadeColor, (value) => {
            material.shadeColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._BumpScale, (value) => (material.bumpScale = value));
        applyPropertyWhenDefined(prop.floatProperties._ReceiveShadowRate, (value) => (material.receiveShadowRate = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadingGradeRate, (value) => (material.shadingGradeRate = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadeShift, (value) => (material.shadeShift = value));
        applyPropertyWhenDefined(prop.floatProperties._ShadeToony, (value) => (material.shadeToony = value));
        applyPropertyWhenDefined(prop.floatProperties._LightColorAttenuation, (value) => (material.lightColorAttenuation = value));
        applyPropertyWhenDefined(prop.floatProperties._IndirectLightIntensity, (value) => (material.indirectLightIntensity = value));
        applyPropertyWhenDefined(prop.vectorProperties._RimColor, (value) => {
            material.rimColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._RimLightingMix, (value) => (material.rimLightingMix = value));
        applyPropertyWhenDefined(prop.floatProperties._RimFresnelPower, (value) => (material.rimFresnelPower = value));
        applyPropertyWhenDefined(prop.floatProperties._RimLift, (value) => (material.rimLift = value));
        applyPropertyWhenDefined(prop.vectorProperties._EmissionColor, (value) => {
            material.emissiveColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineWidth, (value) => (material.outlineWidth = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineScaledMaxDistance, (value) => (material.outlineScaledMaxDistance = value));
        applyPropertyWhenDefined(prop.vectorProperties._OutlineColor, (value) => {
            material.outlineColor = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_0__.Color3(value[0], value[1], value[2]);
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineLightingMix, (value) => (material.outlineLightingMix = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimScrollX, (value) => (material.uvAnimationScrollX = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimScrollY, (value) => (material.uvAnimationScrollY = value));
        applyPropertyWhenDefined(prop.floatProperties._UvAnimRotation, (value) => (material.uvAnimationRotation = value));
        applyPropertyWhenDefined(prop.floatProperties._DebugMode, (value) => (material.debugMode = value));
        applyPropertyWhenDefined(prop.floatProperties._BlendMode, (value) => {
            switch (value) {
                case 0: // Opaque
                    material.alphaBlend = false;
                    material.alphaTest = false;
                    break;
                case 1: // TransparentCutout
                    material.alphaBlend = false;
                    material.alphaTest = true;
                    material.alphaMode = _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__.Engine.ALPHA_COMBINE;
                    break;
                case 2: // Transparent
                    material.alphaBlend = true;
                    material.alphaTest = false;
                    material.alphaMode = _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_2__.Engine.ALPHA_COMBINE;
                    break;
            }
        });
        applyPropertyWhenDefined(prop.floatProperties._OutlineWidthMode, (value) => (material.outlineWidthMode = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineColorMode, (value) => (material.outlineColorMode = value));
        applyPropertyWhenDefined(prop.floatProperties._CullMode, (value) => (material.cullMode = value));
        applyPropertyWhenDefined(prop.floatProperties._OutlineCullMode, (value) => (material.outlineCullMode = value));
        applyPropertyWhenDefined(prop.keywordMap._ALPHABLEND_ON, (value) => (material.alphaBlend = value));
        applyPropertyWhenDefined(prop.keywordMap._ALPHATEST_ON, (value) => (material.alphaTest = value));
        applyPropertyWhenDefined(prop.floatProperties._ZWrite, (value) => {
            material.forceDepthWrite = Math.round(value) === 1;
            if (material.forceDepthWrite) {
                material.disableDepthWrite = false;
            }
        });
    }
}
/**
 * プロパティが設定されていればコールバックを実行する
 */
function applyPropertyWhenDefined(prop, callback) {
    if (typeof prop === 'undefined') {
        return;
    }
    callback(prop);
}


/***/ }),

/***/ "./src/index-test.ts":
/*!***************************!*\
  !*** ./src/index-test.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babylonjs_core_Loading_loadingScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Loading/loadingScreen */ "./node_modules/@babylonjs/core/Loading/loadingScreen.js");
/* harmony import */ var _babylonjs_core_Loading_Plugins_babylonFileLoader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Loading/Plugins/babylonFileLoader */ "./node_modules/@babylonjs/core/Loading/Plugins/babylonFileLoader.js");
/* harmony import */ var _babylonjs_core_Materials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Materials */ "./node_modules/@babylonjs/core/Materials/index.js");
/* harmony import */ var _babylonjs_loaders_glTF_glTFFileLoader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/loaders/glTF/glTFFileLoader */ "./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js");
/* harmony import */ var _babylonjs_core_Debug__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Debug */ "./node_modules/@babylonjs/core/Debug/index.js");
/* harmony import */ var _babylonjs_gui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/gui */ "./node_modules/@babylonjs/gui/index.js");
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/inspector */ "./node_modules/@babylonjs/inspector/dist/babylon.inspector.bundle.max.js");
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js");
/* harmony import */ var _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/Engines/engine */ "./node_modules/@babylonjs/core/Engines/engine.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./index */ "./src/index.ts");

// Register plugins (side effect)



// Debug



const debug = false;
const shadow_debug = false;
const spheres = false;




// Init BabylonJS Engine
const canvas = document.getElementById('renderCanvas');
let engine;
if (_babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__.Engine.isSupported()) {
    engine = new _babylonjs_core_Engines_engine__WEBPACK_IMPORTED_MODULE_8__.Engine(canvas, true);
}
const fileInput = document.getElementById('select-file');
window.onload = async (e) => {
    console.log("Onload");
    const vrmFile = 'testfiles/7822444336497004526.vrm';
    // Create v3d core
    const v3DCore = new _index__WEBPACK_IMPORTED_MODULE_10__.V3DCore(engine, new _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_7__.Scene(engine));
    v3DCore.transparentBackground();
    await v3DCore.AppendAsync('', vrmFile);
    // Get managers
    const vrmManager = v3DCore.getVRMManagerByURI(vrmFile);
    console.log("Printing loaded VRM file metadata: ", vrmManager.ext.meta);
    // Camera
    v3DCore.attachCameraTo(vrmManager);
    // Lights
    v3DCore.addAmbientLight(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Color3(1, 1, 1));
    // Lock camera target
    v3DCore.scene.onBeforeRenderObservable.add(() => {
        vrmManager.cameras[0].setTarget(vrmManager.rootMesh.getAbsolutePosition());
    });
    // Render loop
    engine.runRenderLoop(() => {
        v3DCore.scene.render();
    });
    // Model Transformation
    vrmManager.rootMesh.translate(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(1, 0, 0), 1);
    vrmManager.rootMesh.rotation = new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0, 135, 0);
    // Work with HumanoidBone
    vrmManager.humanoidBone.leftUpperArm.addRotation(0, -0.5, 0);
    vrmManager.humanoidBone.head.addRotation(0.1, 0, 0);
    // Work with BlendShape(MorphTarget)
    vrmManager.morphing('Joy', 1.0);
};


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DCore": () => (/* reexport safe */ _v3d_core__WEBPACK_IMPORTED_MODULE_0__.V3DCore),
/* harmony export */   "V3DHelper": () => (/* reexport safe */ _helper__WEBPACK_IMPORTED_MODULE_1__.V3DHelper)
/* harmony export */ });
/* harmony import */ var _v3d_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v3d-core */ "./src/v3d-core.ts");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./src/helper.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */




/***/ }),

/***/ "./src/scene/optimizer.ts":
/*!********************************!*\
  !*** ./src/scene/optimizer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DSceneOptimizer": () => (/* binding */ V3DSceneOptimizer)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index */ "./src/index.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


class V3DSceneOptimizer {
    constructor(scene, options) {
        this.scene = scene;
        this._options = options || V3DSceneOptimizer.CustomOptimizerOptions();
        this._optimizer = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SceneOptimizer(scene, this._options);
        this._optimizer.targetFrameRate = _index__WEBPACK_IMPORTED_MODULE_1__.V3DCore.FRAMERATE;
        this._optimizer.trackerDuration = 2000;
        this._optimizer.start();
        this.setupFocusEvents(this._optimizer);
    }
    get options() {
        return this._options;
    }
    set options(value) {
        this._options = value;
    }
    get optimizer() {
        return this._optimizer;
    }
    static CustomOptimizerOptions() {
        const options = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.SceneOptimizerOptions();
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.LensFlaresOptimization(0));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.ParticlesOptimization(1));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.TextureOptimization(1, 512));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.RenderTargetsOptimization(2));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.PostProcessesOptimization(3));
        options.addOptimization(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.HardwareScalingOptimization(4, 2));
        return options;
    }
    setupFocusEvents(optimizer) {
        if (window) {
            console.log("setupFocusEvents");
            window.addEventListener('focusin', function (e) {
                console.log("Optimizer start");
                optimizer.start();
            }, true);
            window.addEventListener('focusout', function (e) {
                console.log("Optimizer stop");
                optimizer.stop();
                optimizer.reset();
            }, true);
        }
    }
}


/***/ }),

/***/ "./src/scene/skybox.ts":
/*!*****************************!*\
  !*** ./src/scene/skybox.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "v3DSkyBox": () => (/* binding */ v3DSkyBox)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _babylonjs_materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/materials */ "./node_modules/@babylonjs/materials/index.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


class v3DSkyBox {
    constructor(scene, textureName, boxSize, envTexture) {
        this.scene = scene;
        this.textureName = textureName;
        this.boxSize = boxSize;
        this.envTexture = envTexture;
        this._skybox = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.CreateBox("Skybox", boxSize, this.scene, undefined, _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.BACKSIDE);
        this._skyboxBase = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.CreateBox("SkyboxBase", boxSize + 1, this.scene, undefined, _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Mesh.BACKSIDE);
        this.createMaterial(textureName);
        this._skybox.material = this.skyboxMaterial;
        this._skyboxBase.material = this.skyboxBaseMaterial;
        this._skybox.renderingGroupId = 0;
        this._skyboxBase.renderingGroupId = 0;
        this._skybox.material.transparencyMode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Material.MATERIAL_ALPHATESTANDBLEND;
        this._skybox.material.alpha = 0.5;
        this.setupImageProcessing();
    }
    get skybox() {
        return this._skybox;
    }
    /**
     * Setup the skybox material and the skybox reflection texture
     * @param textureName name (URI) to the texture files
     * @private
     */
    createMaterial(textureName) {
        this.skyboxBaseMaterial = new _babylonjs_materials__WEBPACK_IMPORTED_MODULE_1__.SkyMaterial("SkyboxBaseMaterial", this.scene);
        this.skyboxMaterial = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.BackgroundMaterial("SkyboxMaterial", this.scene);
        this.skyboxMaterial.backFaceCulling = false;
        this.skyboxMaterial.useRGBColor = false;
        this.skyboxMaterial.primaryColor = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Color3(1, 1, 1);
        this.skyboxMaterial.enableNoise = true;
        this.skyboxReflectionTexture = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.CubeTexture(textureName, this.scene);
        this.skyboxReflectionTexture.coordinatesMode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Texture.SKYBOX_MODE;
        this.skyboxReflectionTexture.gammaSpace = false;
        this.skyboxMaterial.reflectionTexture = this.skyboxReflectionTexture;
    }
    /**
     * Setup the image processing according to the specified options.
     */
    setupImageProcessing() {
        this.scene.imageProcessingConfiguration.contrast = 1.2;
        this.scene.imageProcessingConfiguration.exposure = 0.8;
        this.scene.imageProcessingConfiguration.toneMappingEnabled = true;
        this.scene.environmentTexture = this.envTexture ? this.envTexture
            : _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.CubeTexture.CreateFromPrefilteredData(v3DSkyBox._environmentTextureCDNUrl, this.scene);
    }
}
v3DSkyBox._environmentTextureCDNUrl = "https://assets.babylonjs.com/environments/environmentSpecular.env";


/***/ }),

/***/ "./src/utilities/types.ts":
/*!********************************!*\
  !*** ./src/utilities/types.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isIShadowLight": () => (/* binding */ isIShadowLight),
/* harmony export */   "getAnimationDataType": () => (/* binding */ getAnimationDataType)
/* harmony export */ });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */


function isIShadowLight(light) {
    return light.setShadowProjectionMatrix !== undefined;
}
function getAnimationDataType(value) {
    let dataType = undefined;
    if (!isNaN(parseFloat(value)) && isFinite(value)) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Quaternion) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_QUATERNION;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR3;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Vector2) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR2;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color3) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Color4) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR4;
    }
    else if (value instanceof _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_1__.Size) {
        dataType = _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_SIZE;
    }
    if (dataType == undefined) {
        return null;
    }
    else {
        return dataType;
    }
}


/***/ }),

/***/ "./src/v3d-core.ts":
/*!*************************!*\
  !*** ./src/v3d-core.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V3DCore": () => (/* binding */ V3DCore),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Cameras/arcRotateCamera */ "./node_modules/@babylonjs/core/Cameras/arcRotateCamera.js");
/* harmony import */ var _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/scene */ "./node_modules/@babylonjs/core/scene.js");
/* harmony import */ var _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Loading/sceneLoader */ "./node_modules/@babylonjs/core/Loading/sceneLoader.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "./node_modules/@babylonjs/core/Maths/math.js");
/* harmony import */ var _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./importer/babylon-vrm-loader/src */ "./src/importer/babylon-vrm-loader/src/vrm-file-loader.ts");
/* harmony import */ var _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./importer/babylon-vrm-loader/src */ "./src/importer/babylon-vrm-loader/src/vrm-extension.ts");
/* harmony import */ var _babylonjs_loaders_glTF_2_0__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/loaders/glTF/2.0 */ "./node_modules/@babylonjs/loaders/glTF/2.0/index.js");
/* harmony import */ var _babylonjs_core_Lights_hemisphericLight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Lights/hemisphericLight */ "./node_modules/@babylonjs/core/Lights/hemisphericLight.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/core */ "./node_modules/@babylonjs/core/index.js");
/* harmony import */ var _utilities_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/types */ "./src/utilities/types.ts");
/* harmony import */ var _scene_optimizer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./scene/optimizer */ "./src/scene/optimizer.ts");
/* harmony import */ var _scene_skybox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./scene/skybox */ "./src/scene/skybox.ts");
/** Copyright (c) 2021 The v3d Authors. All rights reserved.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/.
 */











class V3DCore {
    constructor(engine, scene, camera) {
        this.engine = engine;
        this.scene = scene;
        /**
         * GLTFFileLoader plugin factory
         * @private
         */
        this._vrmFileLoader = new _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_10__.VRMFileLoader();
        // Whether starts spring bones animation automatically
        this._springBonesAutoUpdate = true;
        /**
         * Shadow generators
         */
        this._shadowGenerators = new Map();
        /**
         * Callbacks when loading is done
         */
        this._onLoadCompleteCallbacks = [];
        this._beforeRenderFunc = () => { };
        this._afterRenderFunc = () => {
            for (const manager of this.loadedVRMManagers) {
                if (this._springBonesAutoUpdate)
                    manager.update(this.engine.getDeltaTime());
            }
        };
        this._cameraOnBeforeRenderFunc = [];
        this.skyBox = null;
        /**
         * Loaded VRM Managers
         * @private
         */
        this.loadedVRMManagers = [];
        // Register
        this.registerVrmPlugin();
        this.registerVrmExtension();
        if (!this.scene)
            this.scene = new _babylonjs_core_scene__WEBPACK_IMPORTED_MODULE_1__.Scene(this.engine);
        else
            this.engine = this.scene.getEngine();
        this.setupObservable();
        this.enableResize();
        if (camera) {
            this._mainCamera = camera;
            this.scene.switchActiveCamera(camera);
        }
        else
            this.addCamera();
        this._renderingPipeline = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.DefaultRenderingPipeline("defaultPipeline", // The name of the pipeline
        true, // Do you want the pipeline to use HDR texture?
        this.scene, // The scene instance
        [this._mainCamera] // The list of cameras to be attached to
        );
        this.setupRenderingPipeline();
    }
    get springBonesAutoUpdate() {
        return this._springBonesAutoUpdate;
    }
    set springBonesAutoUpdate(value) {
        this._springBonesAutoUpdate = value;
    }
    get renderingPipeline() {
        return this._renderingPipeline;
    }
    addOnLoadCompleteCallbacks(callback) {
        this._onLoadCompleteCallbacks.push(callback);
    }
    removeOnLoadCompleteCallback(callback) {
        const idx = this._onLoadCompleteCallbacks.indexOf(callback);
        if (idx !== -1) {
            this._onLoadCompleteCallbacks.splice(idx, 1);
        }
    }
    resetOnLoadCompleteCallbacks() {
        this._onLoadCompleteCallbacks = [];
    }
    updateBeforeRenderFunction(func) {
        this._beforeRenderFunc = func;
    }
    updateAfterRenderFunction(func) {
        this._afterRenderFunc = func;
    }
    get mainCamera() {
        return this._mainCamera;
    }
    set mainCamera(value) {
        this._mainCamera = value;
    }
    addVRMManager(manager) {
        if (manager)
            this.loadedVRMManagers.push(manager);
    }
    /**
     * Get VRM Manager by index
     * @param idx
     */
    getVRMManagerByIndex(idx) {
        return (idx >= 0 && idx < this.loadedVRMManagers.length)
            ? this.loadedVRMManagers[idx]
            : null;
    }
    /**
     * Get VRM Manager by URI
     * VRM doesn't have any UID in metadata. Title can be unfilled too.
     * Filename is the only reasonable ID.
     * @param uri
     */
    // VRM doesn't have any UID in metadata. Title can be unfilled too.
    // Filename is the only reasonable ID.
    getVRMManagerByURI(uri) {
        for (const manager of this.loadedVRMManagers) {
            if (manager.uri === uri)
                return manager;
        }
        return null;
    }
    /**
     * Make background transparent.
     */
    transparentBackground() {
        this.scene.clearColor.a = 0;
    }
    /**
     * Make background solid.
     */
    solidBackground() {
        this.scene.clearColor.a = 1;
    }
    /**
     * Change background color.
     * @param color
     */
    setBackgroundColor(color) {
        this.scene.clearColor = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Color4.FromColor3(color, this.scene.clearColor.a).toLinearSpace();
    }
    /**
     * Set background color from hex string.
     * @param hex Hex color string
     */
    setBackgroundColorHex(hex) {
        this.setBackgroundColor(_babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Color3.FromHexString(hex));
    }
    /**
     * Add an ambient light.
     * @param color color of the light
     */
    addAmbientLight(color) {
        const light = new _babylonjs_core_Lights_hemisphericLight__WEBPACK_IMPORTED_MODULE_5__.HemisphericLight("V3DHemiLight", new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1, 1), this.scene);
        if (color)
            light.diffuse = color;
        light.setEnabled(true);
    }
    /**
     * Add a basic arc rotate camera to scene.
     * TODO: there seems to be a bug when meshes are near the edge of camera cone
     * Probably has something to do with culling
     * @param radius rotation radius
     */
    addCamera(radius = 3) {
        const camera = new _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__.ArcRotateCamera('V3DMainCamera', 0, 0, radius, new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 0, 0), this.scene, true);
        camera.lowerRadiusLimit = 0.1;
        camera.upperRadiusLimit = 20;
        camera.wheelDeltaPercentage = 0.05;
        camera.minZ = 0;
        camera.setPosition(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1.5, -5));
        camera.attachControl(this.engine.getRenderingCanvas());
        this._mainCamera = camera;
        this.scene.switchActiveCamera(this._mainCamera, true);
    }
    /**
     * Attach a arc rotate following camera to VRM model.
     * Probably has something to do with culling
     * @param manager VRM Manager to attach the camera to
     * @param radius rotation radius
     */
    attachCameraTo(manager, radius = 3) {
        const camera = new _babylonjs_core_Cameras_arcRotateCamera__WEBPACK_IMPORTED_MODULE_0__.ArcRotateCamera('V3DArcCamera' + manager.cameras.length, 0, 0, radius, manager.rootMesh.position, this.scene, true);
        camera.lowerRadiusLimit = 0.1;
        camera.upperRadiusLimit = 20;
        camera.wheelDeltaPercentage = 0.05;
        camera.minZ = 0;
        camera.setPosition(new _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1.5, -5));
        camera.setTarget(manager.rootMesh.getAbsolutePosition());
        camera.attachControl(this.engine.getRenderingCanvas());
        manager.appendCamera(camera);
        this._cameraOnBeforeRenderFunc.push(() => {
            camera.setTarget(manager.rootMesh.getAbsolutePosition());
        });
    }
    /**
     *
     * Create a skybox for the scene.
     * @param size size of the skybox
     * @param textureName path to skybox texture
     */
    createSkyBox(size, textureName) {
        if (!this.skyBox) {
            this.skyBox = new _scene_skybox__WEBPACK_IMPORTED_MODULE_9__.v3DSkyBox(this.scene, textureName ? textureName : "texture/skybox", size);
        }
    }
    /**
     * Enable shadow caster for light.
     * @param light Light to enable shadows.
     */
    enableShabows(light) {
        if (light) {
            if (!this._shadowGenerators.has(light)) {
                const shadowGenerator = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator(1024, light);
                this.setupShadowGenerator(shadowGenerator);
                this._shadowGenerators.set(light, shadowGenerator);
            }
            else {
                console.warn("Light " + light.name + " already has a shadow generator!");
            }
        }
        else {
            for (const l of this.scene.lights) {
                if ((0,_utilities_types__WEBPACK_IMPORTED_MODULE_7__.isIShadowLight)(l)) {
                    const shadowGenerator = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator(1024, l);
                    this.setupShadowGenerator(shadowGenerator);
                    this._shadowGenerators.set(l, shadowGenerator);
                }
            }
        }
    }
    /**
     * Get corresponding shadow generator for light.
     * @param light Light to get shadow generator
     */
    getShadownGenerator(light) {
        return this._shadowGenerators.get(light);
    }
    /**
     * Convenience function for starting animation
     * @param target
     * @param name
     * @param property
     * @param duration
     * @param from
     * @param to
     * @param loopMode
     * @param easingFunction
     * @param easingMode
     */
    startQuickAnimation(target, name, property, duration, from, to, loopMode, easingFunction, easingMode) {
        const anim = this.createAnimation(target, name, property, [{ frame: 0, value: from }, { frame: duration, value: to }], loopMode, easingFunction, easingMode);
        return this.scene.beginDirectAnimation(anim[0], [anim[1]], 0, duration, false);
    }
    /**
     * Convenience function for creating animation
     * @param target
     * @param name
     * @param property
     * @param keyFrames
     * @param loopMode
     * @param easingFunction
     * @param easingMode
     */
    createAnimation(target, name, property, keyFrames, loopMode, easingFunction, easingMode) {
        // Make sure keyFrames is not empty
        if (keyFrames.length < 1)
            throw Error("Key Frames empty");
        // Get data type
        const dataType = (0,_utilities_types__WEBPACK_IMPORTED_MODULE_7__.getAnimationDataType)(keyFrames[0].value);
        if (dataType === null)
            throw Error("Cannot determine data type from keyframes!");
        const animation = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.Animation(name, property, V3DCore.FRAMERATE, dataType, loopMode);
        animation.setKeys(keyFrames);
        if (easingFunction) {
            if (easingMode)
                easingFunction.setEasingMode(easingMode);
            animation.setEasingFunction(easingFunction);
        }
        return [target, animation];
    }
    enableOptimizer(options) {
        this._sceneOptimizer = new _scene_optimizer__WEBPACK_IMPORTED_MODULE_8__.V3DSceneOptimizer(this.scene, options);
    }
    // Don't make wrappers static, so plugins will always be registered
    /**
     * Wrapper for SceneLoader.AppendAsync.
     * @param rootUrl a string that defines the root url for the scene and resources or the concatenation of rootURL and filename
     * @param sceneFilename a string that defines the name of the scene file or starts with "data:" following by the stringified version of the scene or a File object (default: empty string)
     */
    AppendAsync(rootUrl, sceneFilename) {
        return _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.AppendAsync(rootUrl, sceneFilename, this.scene);
    }
    /**
     * Wrapper for SceneLoader.LoadAsync
     * @param rootUrl a string that defines the root url for the scene and resources or the concatenation of rootURL and filename
     * @param sceneFilename a string that defines the name of the scene file or starts with "data:" following by the stringified version of the scene or a File object (default: empty string)
     */
    LoadAsync(rootUrl, sceneFilename) {
        return _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.LoadAsync(rootUrl, sceneFilename, this.engine);
    }
    // GLTFLoaderExtensionObserver
    onLoadReady() {
        for (const f of this._onLoadCompleteCallbacks) {
            f();
        }
    }
    /**
     * Set up for time update.
     * @private
     */
    setupObservable() {
        this.scene.onBeforeRenderObservable.add((eventData, eventState) => {
            this._beforeRenderFunc(eventData, eventState);
        });
        // Camera
        this.scene.onBeforeRenderObservable.add(() => {
            for (const f of this._cameraOnBeforeRenderFunc)
                f();
        });
        // Update secondary animation
        this.scene.onAfterRenderObservable.add((eventData, eventState) => {
            this._afterRenderFunc(eventData, eventState);
        });
    }
    enableResize() {
        this.engine.getRenderingCanvas().onresize = () => {
            this.engine.resize();
        };
    }
    setupShadowGenerator(shadowGenerator) {
        shadowGenerator.usePercentageCloserFiltering = true;
        shadowGenerator.filteringQuality = _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.ShadowGenerator.QUALITY_HIGH;
    }
    // TODO Unregister
    registerVrmExtension() {
        // ローダーに登録する
        _babylonjs_loaders_glTF_2_0__WEBPACK_IMPORTED_MODULE_4__.GLTFLoader.RegisterExtension(_importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__.VRMLoaderExtension.NAME, (loader) => {
            return new _importer_babylon_vrm_loader_src__WEBPACK_IMPORTED_MODULE_11__.VRMLoaderExtension(loader, this);
        });
    }
    registerVrmPlugin() {
        if (_babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader && _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.GetPluginForExtension('.vrm').name === 'babylon.js') {
            _babylonjs_core_Loading_sceneLoader__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.RegisterPlugin(this._vrmFileLoader);
        }
    }
    ;
    setupRenderingPipeline() {
        this._renderingPipeline.samples = 4;
        this._renderingPipeline.depthOfFieldEnabled = true;
        this._renderingPipeline.depthOfFieldBlurLevel = _babylonjs_core__WEBPACK_IMPORTED_MODULE_6__.DepthOfFieldEffectBlurLevel.Medium;
        this._renderingPipeline.depthOfField.focusDistance = 2000; // distance of the current focus point from the camera in millimeters considering 1 scene unit is 1 meter
        this._renderingPipeline.depthOfField.focalLength = 10; // focal length of the camera in millimeters
        this._renderingPipeline.depthOfField.fStop = 1.4; // aka F number of the camera defined in stops as it would be on a physical device
    }
}
V3DCore.FRAMERATE = 60;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (V3DCore);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkv3d_core"] = self["webpackChunkv3d_core"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["babylonjs"], () => (__webpack_require__("./src/index-test.ts")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxnQkFBZ0Isd0dBQXdHLGdEQUFnRCxFQUFFLDBDQUEwQyxHQUFHLGtEQUFrRCxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSx1REFBdUQsdUNBQXVDLHVDQUF1QyxFQUFFLHNDQUFzQyxFQUFFLGdFQUFnRSxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLDJGQUEyRixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHNEQUFzRCxFQUFFLHNDQUFzQyxFQUFFLDJEQUEyRCxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLHNGQUFzRixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLDBEQUEwRCxFQUFFLHNDQUFzQyxFQUFFLHVFQUF1RSxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLGtHQUFrRyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHNEQUFzRCxFQUFFLDRDQUE0QyxFQUFFLHFFQUFxRSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLGdEQUFnRCxFQUFFLHFFQUFxRSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsdUJBQXVCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHVGQUF1RixFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsdUJBQXVCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHVEQUF1RCxFQUFFLDRDQUE0QyxFQUFFLHVFQUF1RSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLHNCQUFzQixFQUFFLHNCQUFzQixFQUFFLHNCQUFzQixFQUFFLGdCQUFnQixnREFBZ0QsRUFBRSx1RUFBdUUsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxnQkFBZ0IseUZBQXlGLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLHdFQUF3RSxFQUFFLG9EQUFvRCxFQUFFLCtCQUErQixFQUFFLFFBQVEsRUFBRSxzQkFBc0IsRUFBRSxjQUFjLCtFQUErRSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLGdNQUFnTSxzQ0FBc0MsaURBQWlELDJKQUEySixFQUFFLG1FQUFtRSxFQUFFLGFBQWEsc0NBQXNDLEVBQUUsMkVBQTJFLEVBQUUsMEJBQTBCLHVDQUF1QyxFQUFFLHNCQUFzQixFQUFFLGdFQUFnRSxFQUFFLGFBQWEsNElBQTRJLEVBQUUsNkJBQTZCLDhDQUE4QyxpREFBaUQsc0lBQXNJLGdFQUFnRSw4QkFBOEIsbUJBQW1CLCtCQUErQixvSUFBb0ksc0ZBQXNGLG1CQUFtQixrRkFBa0YsRUFBRSx5REFBeUQsOEVBQThFLEVBQUUsaUZBQWlGLHVIQUF1SCxFQUFFLHVGQUF1RixtSEFBbUgsRUFBRSwyREFBMkQsK0ZBQStGLEVBQUUsNERBQTRELEdBQUcsMEVBQTBFLDhHQUE4RyxpSEFBaUgscUdBQXFHLDBLQUEwSyx5SEFBeUgsb0VBQW9FLDZDQUE2QyxxRkFBcUYsdUZBQXVGLHlEQUF5RCxvR0FBb0csMEVBQTBFLDZGQUE2RiwrR0FBK0csaUhBQWlILCtFQUErRSw4RUFBOEUsNklBQTZJLHlHQUF5RyxzRkFBc0YsNkdBQTZHLHVEQUF1RCxxRkFBcUYsOERBQThELDRJQUE0SSwrRUFBK0UsNERBQTRELG9JQUFvSSxvR0FBb0cscUdBQXFHLHNGQUFzRiwrTUFBK00sbUhBQW1ILG9HQUFvRyxnREFBZ0Qsb0RBQW9ELDRHQUE0Ryx3RkFBd0YsK0VBQStFLHlFQUF5RSwrVEFBK1QsdUNBQXVDLGlEQUFpRCx3Q0FBd0MsMkZBQTJGLCtsREFBK2xELCtDQUErQyx1Q0FBdUMscUZBQXFGLDhXQUE4VywwSkFBMEoscUdBQXFHLGdGQUFnRixpREFBaUQsNERBQTRELDhDQUE4Qyx1TEFBdUwsc1ZBQXNWLG1HQUFtRyxnSkFBZ0osbURBQW1ELDhFQUE4RSw2QkFBNkIsOEdBQThHLHFGQUFxRixXQUFXLDZFQUE2RSwrRUFBK0UsV0FBVyw2RkFBNkYsK0VBQStFLFdBQVcsNkZBQTZGLCtFQUErRSxXQUFXLDZGQUE2RiwrRUFBK0UsV0FBVyw2RkFBNkYsK0VBQStFLFdBQVcsc0ZBQXNGLHNFQUFzRSx5REFBeUQsNEdBQTRHLG1RQUFtUSwyQ0FBMkMsZ0JBQWdCLHVGQUF1RiwyREFBMkQsa05BQWtOLHVEQUF1RCxpSEFBaUgsOEVBQThFLGlIQUFpSCxrREFBa0QsUUFBUSxNQUFNLG1EQUFtRCxPQUFPLHFEQUFxRCx1Q0FBdUMsa0tBQWtLLDBEQUEwRCwwREFBMEQsMEVBQTBFLHVDQUF1QyxtTUFBbU0scUdBQXFHLDRDQUE0QywyREFBMkQsa0NBQWtDLDJOQUEyTiwrbkVBQStuRSw4RUFBOEUsdUdBQXVHLHFjQUFxYyx5Q0FBeUMscUZBQXFGLG8zQ0FBbzNDLHNEQUFzRCxpV0FBaVcsc0RBQXNELDhFQUE4RSx1SkFBdUosdVlBQXVZLHdKQUF3Six5TEFBeUwsaUVBQWlFLDJDQUEyQyx3Q0FBd0MsdUVBQXVFLGtGQUFrRix5R0FBeUcsNEJBQTRCLDZEQUE2RCx3QkFBd0Isd0JBQXdCLGdEQUFnRCxtREFBbUQsb0dBQW9HLDJDQUEyQyxpREFBaUQsaURBQWlELHNEQUFzRCxzRkFBc0YsK0pBQStKLHFKQUFxSix3Q0FBd0MsNEhBQTRILGlEQUFpRCx1REFBdUQsc0hBQXNILGdMQUFnTCxvRkFBb0YsdUNBQXVDLG9QQUFvUCxpSUFBaUksaURBQWlELGtEQUFrRCx1SEFBdUgsb0ZBQW9GLGdDQUFnQywySkFBMkosaUhBQWlILHdFQUF3RSxtQ0FBbUMsd0dBQXdHLHFGQUFxRix1SUFBdUksaUxBQWlMLGdLQUFnSyxrSkFBa0osK09BQStPLDhHQUE4RywyR0FBMkcsb0ZBQW9GLGtFQUFrRSxpRUFBaUUsUUFBUSxNQUFNLDZCQUE2QixPQUFPLGlEQUFpRCxrSEFBa0gsK0VBQStFLEVBQUUsK0VBQStFLEVBQUUsaUZBQWlGLEVBQUUsMkVBQTJFLEVBQUUsdUVBQXVFLEVBQUUsK0VBQStFLEVBQUUsOEdBQThHLEVBQUUsNEdBQTRHLEVBQUUsaUdBQWlHLEVBQUUsZ0dBQWdHLEVBQUUsc0hBQXNILEVBQUUsd0hBQXdILEVBQUUsd0dBQXdHLEVBQUUsNEdBQTRHLEVBQUUsMEZBQTBGLEVBQUUsc0dBQXNHLEVBQUUsNkhBQTZILEVBQUUsZ0hBQWdILEVBQUUsNEZBQTRGLEVBQUUsMEdBQTBHLEVBQUUsMEdBQTBHLEVBQUUsMEZBQTBGLEVBQUUsd0dBQXdHLEVBQUUsa0dBQWtHLEVBQUUsbUhBQW1ILEVBQUUsbUhBQW1ILEVBQUUsdUhBQXVILEVBQUUsdUJBQXVCLHlPQUF5Tyw2QkFBNkIsbURBQW1ELG1DQUFtQywwQ0FBMEMsb0NBQW9DLG9GQUFvRix1Q0FBdUMsOFpBQThaLCtDQUErQyxLQUFLLHVCQUF1QixTQUFTLCtCQUErQiw0REFBNEQsZ0NBQWdDLHVEQUF1RCxnQ0FBZ0MsNkRBQTZELGlDQUFpQyx3REFBd0QsK0JBQStCLDZEQUE2RCxnQ0FBZ0Msd0RBQXdELHFCQUFxQixtREFBbUQsc0JBQXNCLDhDQUE4QyxxQkFBcUIsbURBQW1ELHNCQUFzQiw4Q0FBOEMsZ0NBQWdDLDhEQUE4RCxpQ0FBaUMseURBQXlELHdCQUF3QixzREFBc0QseUJBQXlCLGlEQUFpRCxxQkFBcUIsU0FBUyxnQkFBZ0IsdUJBQXVCLGlCQUFpQixrQkFBa0Isd0JBQXdCLCtCQUErQix5QkFBeUIsd0ZBQXdGLHVCQUF1Qiw4QkFBOEIsd0JBQXdCLHVGQUF1RixpQkFBaUIsd0JBQXdCLGtCQUFrQixrRkFBa0YsaUJBQWlCLHdCQUF3QixrQkFBa0IsaUZBQWlGLDRCQUE0QixtQ0FBbUMsNkJBQTZCLDRGQUE0Riw2QkFBNkIsb0NBQW9DLDhCQUE4Qiw2RkFBNkYscUJBQXFCLDRCQUE0QixzQkFBc0IscUZBQXFGLHNCQUFzQiw2QkFBNkIsdUJBQXVCLHdGQUF3RixjQUFjLHFCQUFxQixlQUFlLDhFQUE4RSxtQkFBbUIsMEJBQTBCLG9CQUFvQix5RkFBeUYsK0JBQStCLHNDQUFzQyxnQ0FBZ0Msb0dBQW9HLHlCQUF5QixnQ0FBZ0MsMEJBQTBCLDZGQUE2Rix5QkFBeUIsZ0NBQWdDLDBCQUEwQiwrREFBK0QseUJBQXlCLGdDQUFnQywwQkFBMEIsK0RBQStELDBCQUEwQixpQ0FBaUMsMkJBQTJCLGdFQUFnRSxnQkFBZ0IsdUJBQXVCLGlCQUFpQixrVEFBa1QsaUJBQWlCLHdCQUF3QixrQkFBa0IsMlVBQTJVLHVCQUF1Qiw4QkFBOEIsd0JBQXdCLGtKQUFrSixzQkFBc0IsaUJBQWlCLHdCQUF3QixpQkFBaUIsZUFBZSxzQkFBc0IsZ0JBQWdCLHdDQUF3QyxxSEFBcUgsTUFBTSw4SEFBOEgsTUFBTSxzSEFBc0gsb0NBQW9DLHVCQUF1QixzRUFBc0UseUJBQXlCLGtDQUFrQyx5QkFBeUIseURBQXlELDhCQUE4QixTQUFTLGVBQWUsc0JBQXNCLDBCQUEwQixpQ0FBaUMsMkJBQTJCLHdFQUF3RSxpR0FBaUcsb0JBQW9CLDRGQUE0RixtQkFBbUIsaUtBQWlLLG9DQUFvQyx3SkFBd0osbUJBQW1CLGtFQUFrRSxzQkFBc0IsNEJBQTRCLDRCQUE0Qix1S0FBdUssb0lBQW9JLDRDQUE0Qyx1Q0FBdUMsc0JBQXNCLGtRQUFrUSw0RUFBNEUscUVBQXFFLHNNQUFzTSxZQUFZLHFDQUFxQyxxQkFBcUIsc0JBQXNCLGlrQkFBaWtCLG1FQUFtRSx5Q0FBeUMsc01BQXNNLG9EQUFvRCxrRUFBa0UsMkpBQTJKLDRVQUE0VSwwS0FBMEssbUVBQW1FLDBEQUEwRCxxREFBcUQsc3VCQUFzdUIsNkJBQTZCLG9CQUFvQiw4QkFBOEIsd1hBQXdYLHNDQUFzQywwRkFBMEYsWUFBWSxxQ0FBcUMsMkJBQTJCLFdBQVcsR0FBRyw2UkFBNlIsZzNDQUFnM0Msd2hCQUF3aEIsNkdBQTZHLEVBQUUsVUFBVSwyQkFBMkIsb0NBQW9DLHFKQUFxSixzR0FBc0csK0dBQStHLElBQUksbUtBQW1LLGlFQUFpRSxvRUFBb0UsaUpBQWlKLHFCQUFxQiw0QkFBNEIsOG1EQUE4bUQsc0JBQXNCLE1BQU0sdURBQXVELGlCQUFpQiwrVUFBK1UsMkNBQTJDLDBDQUEwQyw0QkFBNEIsTUFBTSxvbkZBQW9uRixVQUFVLDJRQUEyUSwyRkFBMkYsc0JBQXNCLG92QkFBb3ZCLHFDQUFxQyxzREFBc0QsaURBQWlELGlCQUFpQiwrQkFBK0IsMEZBQTBGLFNBQVMsb0JBQW9CLHFFQUFxRSxjQUFjLGdDQUFnQyw2REFBNkQsU0FBUyxhQUFhLHdGQUF3RixrTEFBa0wsU0FBUyx5RUFBeUUsd0RBQXdELG9CQUFvQixpRUFBaUUsbURBQW1ELHVCQUF1Qiw2SEFBNkgsRUFBRSxhQUFhLHlCQUF5Qix5R0FBeUcsZ0JBQWdCLHdCQUF3Qix1SEFBdUgsTUFBTSxtSUFBbUksTUFBTSw4S0FBOEssOEJBQThCLGlKQUFpSixNQUFNLG1KQUFtSixNQUFNLHdLQUF3Syw4QkFBOEIsMElBQTBJLE1BQU0sK0lBQStJLDI3S0FBMjdLLE1BQU07Ozs7Ozs7Ozs7Ozs7Ozs7QUNBN3MvRjs7OztHQUlHO0FBRXFIO0FBR2pILE1BQU0sU0FBUztJQUVsQixZQUNxQixJQUFhO1FBQWIsU0FBSSxHQUFKLElBQUksQ0FBUztJQUVsQyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLDJCQUEyQixDQUM5QixlQUEwQyxFQUMxQyxRQUFnQjtRQUVoQixlQUFlLEVBQUUsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQVMsQ0FBQyxDQUFDO0lBQ3RGLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksaUNBQWlDLENBQ3BDLGVBQTBDLEVBQzFDLFFBQWdCO1FBRWhCLElBQUksQ0FBQyxlQUFlO1lBQUUsT0FBTztRQUM3QixLQUFLLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUFFO1lBQzNDLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO2dCQUN0QyxlQUFlLENBQUMsZUFBZSxDQUFDLElBQVksQ0FBQyxDQUFDO2FBQ2pEO1NBQ0o7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksdUJBQXVCLENBQUMsUUFBZ0I7UUFDMUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBVSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7SUFDNUUsQ0FBQztJQUVEOzs7T0FHRztJQUNJLDZCQUE2QixDQUFDLFFBQWdCO1FBQ2pELEtBQUssTUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDM0MsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQ3RDLElBQUk7b0JBQ0MsSUFBYSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7aUJBQ3hDO2dCQUFDLE9BQU8sQ0FBQyxFQUFFO29CQUNSLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ2xCO2FBQ0o7U0FDSjtJQUNMLENBQUM7SUFFTSxpQkFBaUIsQ0FDcEIsUUFBa0IsRUFDbEIsSUFBa0I7UUFFbEIsTUFBTSxPQUFPLEdBQUc7WUFDWixlQUFlLEVBQUcsSUFBSTtZQUN0QixZQUFZLEVBQUcsS0FBSztZQUNwQix3QkFBd0IsRUFBRyxJQUFJO1lBQy9CLFdBQVcsRUFBRyxJQUFJO1lBQ2xCLFdBQVcsRUFBRyx5RUFBNEIsRUFBRSxvTEFBb0w7U0FDbk8sQ0FBQztRQUNGLE1BQU0sY0FBYyxHQUFHLElBQUksMkRBQWMsQ0FDckMsUUFBUSxFQUFFLGlCQUFpQjtRQUMzQixJQUFJLEVBQUUsbUVBQW1FO1FBQ3pFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLGlCQUFpQjtRQUNsQyxJQUFJLEVBQUUseUJBQXlCO1FBQy9CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxtQkFBbUI7UUFDOUUsT0FBTyxDQUNWLENBQUM7UUFFRixPQUFPLGNBQWMsQ0FBQztJQUMxQixDQUFDO0NBQ0o7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzRkQ7O0dBRUc7QUFDSSxNQUFNLGlCQUFrQixTQUFRLEtBQUs7SUFHeEMsWUFBbUMsUUFBZ0I7UUFDL0MsS0FBSyxDQUFDLFFBQVEsUUFBUSxXQUFXLENBQUMsQ0FBQztRQURKLGFBQVEsR0FBUixRQUFRLENBQVE7UUFGbkMsU0FBSSxHQUFHLG1CQUFtQixDQUFDO0lBSTNDLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQNEM7QUFNN0M7OztHQUdHO0FBQ0ksTUFBTSxZQUFZO0lBQ3JCLGtCQUFrQjtJQUNsQiwyREFBMkQ7SUFDM0QsWUFBMEIsT0FBeUI7UUFBekIsWUFBTyxHQUFQLE9BQU8sQ0FBa0I7SUFBRyxDQUFDO0lBRWhELE9BQU87UUFDVCxJQUFJLENBQUMsT0FBZSxHQUFHLElBQUksQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxJQUFXLElBQUk7UUFDWCxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLFlBQVk7UUFDbkIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxhQUFhO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsWUFBWTtRQUNuQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGFBQWE7UUFDcEIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxRQUFRO1FBQ2YsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxTQUFTO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsS0FBSztRQUNaLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsS0FBSztRQUNaLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsSUFBSTtRQUNYLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsSUFBSTtRQUNYLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsWUFBWTtRQUNuQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGFBQWE7UUFDcEIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxZQUFZO1FBQ25CLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsYUFBYTtRQUNwQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLFlBQVk7UUFDbkIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxhQUFhO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsUUFBUTtRQUNmLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsU0FBUztRQUNoQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLFFBQVE7UUFDZixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxTQUFTO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLE9BQU87UUFDZCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxRQUFRO1FBQ2YsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsR0FBRztRQUNWLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGlCQUFpQjtRQUN4QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLHFCQUFxQjtRQUM1QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGVBQWU7UUFDdEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxpQkFBaUI7UUFDeEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDckQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxxQkFBcUI7UUFDNUIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLHVCQUF1QixDQUFDLENBQUM7SUFDekQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxlQUFlO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsa0JBQWtCO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsc0JBQXNCO1FBQzdCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsZ0JBQWdCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsZ0JBQWdCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsb0JBQW9CO1FBQzNCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFDRDs7T0FFRztJQUNILElBQVcsY0FBYztRQUNyQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGtCQUFrQjtRQUN6QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLHNCQUFzQjtRQUM3QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGdCQUFnQjtRQUN2QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGtCQUFrQjtRQUN6QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLHNCQUFzQjtRQUM3QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGdCQUFnQjtRQUN2QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGtCQUFrQjtRQUN6QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLHNCQUFzQjtRQUM3QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGdCQUFnQjtRQUN2QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLG1CQUFtQjtRQUMxQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMscUJBQXFCLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLHVCQUF1QjtRQUM5QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMseUJBQXlCLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGlCQUFpQjtRQUN4QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGlCQUFpQjtRQUN4QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLHFCQUFxQjtRQUM1QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxJQUFXLGVBQWU7UUFDdEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxtQkFBbUI7UUFDMUIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyx1QkFBdUI7UUFDOUIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLHlCQUF5QixDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxpQkFBaUI7UUFDeEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDckQsQ0FBQztJQUNEOztPQUVHO0lBQ0gsSUFBVyxVQUFVO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSyxnQkFBZ0IsQ0FBQyxJQUFZO1FBQ2pDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNQLE1BQU0sSUFBSSxzREFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNyQztRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ssZUFBZSxDQUFDLElBQVk7UUFDaEMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQztJQUN4RCxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDclhvRDtBQUVQO0FBRVM7QUFTdkQsTUFBTSxxQkFBcUIsR0FBa0Q7SUFDekUsUUFBUSxFQUFFLGVBQWU7Q0FDNUIsQ0FBQztBQUVGLE1BQU0sbUJBQW1CLEdBQWtEO0lBQ3ZFLE1BQU0sRUFBRSxhQUFhO0NBQ3hCLENBQUM7QUFFRixNQUFNLHVCQUF1QixHQUFvRDtJQUM3RSxRQUFRLEVBQUUsZ0JBQWdCO0lBQzFCLFlBQVksRUFBRSxpQkFBaUI7SUFDL0IsUUFBUSxFQUFFLGFBQWE7SUFDdkIsYUFBYSxFQUFFLGNBQWM7SUFDN0IscUJBQXFCLEVBQUUsc0JBQXNCO0lBQzdDLG9CQUFvQixFQUFFLHFCQUFxQjtJQUMzQyxXQUFXLEVBQUUsWUFBWTtJQUN6QixVQUFVLEVBQUUsZUFBZTtJQUMzQixvQkFBb0IsRUFBRSxxQkFBcUI7SUFDM0Msa0JBQWtCLEVBQUUsd0JBQXdCO0NBQy9DLENBQUM7QUFFRixNQUFNLHFCQUFxQixHQUFvRDtJQUMzRSxNQUFNLEVBQUUsY0FBYztJQUN0QixXQUFXLEVBQUUsWUFBWTtJQUN6QixTQUFTLEVBQUUsVUFBVTtJQUNyQixjQUFjLEVBQUUsZUFBZTtJQUMvQixhQUFhLEVBQUUsY0FBYztDQUNoQyxDQUFDO0FBRUY7O0dBRUc7QUFDSSxNQUFNLDBCQUEwQjtJQVNuQzs7O09BR0c7SUFDSCxZQUFtQixTQUFxQixFQUFtQixjQUE0QztRQUE1QyxtQkFBYyxHQUFkLGNBQWMsQ0FBOEI7UUFadEYsa0JBQWEsR0FBa0QsRUFBRSxDQUFDO1FBQ2xFLHdCQUFtQixHQUFxQyxFQUFFLENBQUM7UUFDcEUsdUJBQWtCLEdBQXFDLEVBQUUsQ0FBQztRQUMxRCxXQUFNLEdBQWlDLEVBQUUsQ0FBQztRQUVqQyxtQkFBYyxHQUFzQyxFQUFFLENBQUM7UUFDaEUsMEJBQXFCLEdBQXlELEVBQUUsQ0FBQztRQU9yRixJQUFJLFNBQVMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ3ZELE9BQU87U0FDVjtRQUNELHFEQUFxRDtRQUNyRCxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDM0IsSUFBSSxRQUFRLFlBQVksaUVBQWEsSUFBSSxRQUFRLFlBQVksd0RBQVcsRUFBRTtnQkFDdEUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDO2FBQ2hEO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsYUFBYSxFQUFFLEVBQUU7WUFDckMsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN0RCxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsRUFBRTtnQkFDdEMsT0FBTzthQUNWO1lBQ0QsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDaEUsSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDWCxPQUFPO2FBQ1Y7WUFDRCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxFQUFFLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNqRixJQUFJLENBQUMsU0FBUyxJQUFJLGFBQWEsQ0FBQyxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtnQkFDdEQsT0FBTzthQUNWO1lBQ0QsaURBQWlEO1lBQ2pELElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLEdBQUcsU0FBUyxDQUFDO1lBQzVDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsR0FBRyxhQUFhLENBQUM7WUFFdkQsTUFBTSxXQUFXLEdBQUcseUVBQWlCLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ2pFLE1BQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxZQUFZLENBQUM7WUFDN0Msd0NBQXdDO1lBQ3hDLElBQUksUUFBUSxZQUFZLHdEQUFXLEVBQUU7Z0JBQ2pDLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO29CQUN6RSxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2lCQUN2QjthQUNKO2lCQUFNLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNsRixXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQ3ZCO1lBQ0QsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUM3QixvQkFBb0I7Z0JBQ3BCLE1BQU0sTUFBTSxHQUFXLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxFQUFFO29CQUN6QyxNQUFNLFNBQVMsR0FBRyxVQUFVO3dCQUN4QixDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDN0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFFLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7b0JBQ3ZHLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFFLENBQUM7b0JBQzNELEdBQUcsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDcEIsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDO29CQUNwQixJQUFJLENBQUMsc0JBQXNCLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztnQkFDMUQsQ0FBQyxDQUFDO2dCQUNGLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsR0FBRyxNQUFNLENBQUM7YUFDakQ7aUJBQU0sSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNwQyxvQkFBb0I7Z0JBQ3BCLE1BQU0sTUFBTSxHQUFXLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxFQUFFO29CQUN6QyxNQUFNLFNBQVMsR0FBRyxVQUFVO3dCQUN4QixDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDN0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFFLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7b0JBQ3ZHLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFFLENBQUM7b0JBQzNELEdBQUcsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDcEIsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDO29CQUNwQixJQUFJLENBQUMsc0JBQXNCLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztnQkFDMUQsQ0FBQyxDQUFDO2dCQUNGLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsR0FBRyxNQUFNLENBQUM7YUFDakQ7aUJBQU07Z0JBQ0gsTUFBTSxNQUFNLEdBQVcsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLEVBQUU7b0JBQ3pDLE1BQU0sU0FBUyxHQUFHLFVBQVU7d0JBQ3hCLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO3dCQUM3RCxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUUsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDdkcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7Z0JBQ2hFLENBQUMsQ0FBQztnQkFDRixJQUFJLENBQUMsbUJBQW1CLENBQUMsVUFBVSxDQUFDLEdBQUcsTUFBTSxDQUFDO2FBQ2pEO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssY0FBYyxDQUFDLGFBQXlDO1FBQzVELE9BQU8sR0FBRyxhQUFhLENBQUMsWUFBWSxJQUFJLGFBQWEsQ0FBQyxZQUFZLElBQUksYUFBYSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztJQUNoSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxhQUFhLENBQUMsYUFBeUM7UUFDM0QsT0FBTyxHQUFHLGFBQWEsQ0FBQyxZQUFZLElBQUksYUFBYSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3pFLENBQUM7SUFFRDs7O09BR0c7SUFDSSxRQUFRLENBQUMsS0FBYTtRQUN6QixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRUQ7O09BRUc7SUFDSyxlQUFlLENBQUMsS0FBYTtRQUNqQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFO1lBQzFDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDdEQsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLEVBQUU7Z0JBQ3JDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsSUFBSSxLQUFLLENBQUM7YUFDaEQ7aUJBQU07Z0JBQ0gsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxHQUFHLEtBQUssQ0FBQzthQUMvQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSztRQUNULElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBRWpCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEVBQUUsRUFBRTtZQUMvRSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3BELElBQUksQ0FBQyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQzdCLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUNoRSxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUV0RCxrQkFBa0I7Z0JBQ2xCLE1BQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxZQUFZLENBQUM7Z0JBQzdDLElBQUksU0FBUyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtvQkFDN0IsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUUsQ0FBQztvQkFDekQsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNkLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDakI7cUJBQU0sSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFO29CQUNwQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBRSxDQUFDO29CQUN6RCxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2QsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNqQjtnQkFFRCxJQUFJLENBQUMsc0JBQXNCLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7YUFDakM7WUFFRCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDcEQsSUFBSSxNQUFNLEVBQUU7Z0JBQ1IsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQzthQUN0RDtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7SUFDSyxtQkFBbUIsQ0FBQyxRQUEyQixFQUFFLFlBQW9CO1FBQ3pFLE1BQU0sS0FBSyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNyQixPQUFPLElBQUksQ0FBQztTQUNmO1FBQ0QsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLElBQUksUUFBUSxZQUFZLHdEQUFXLEVBQUU7WUFDakMsSUFBSSxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDNUIsT0FBTyxJQUFJLENBQUMsb0NBQW9DLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMxRjtZQUNELElBQUksbUJBQW1CLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzFCLE9BQU8sSUFBSSxDQUFDLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUMzRjtZQUNELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxnQkFBZ0I7UUFDaEIsSUFBSSx1QkFBdUIsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM5QixPQUFPLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzVGO1FBQ0QsSUFBSSxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM1QixPQUFPLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDN0Y7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7O09BRUc7SUFDSyxvQ0FBb0MsQ0FBQyxPQUE4QjtRQUN2RSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ1YsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELE1BQU0sQ0FBQyxHQUFHLE9BQWtCLENBQUM7UUFDN0IsT0FBTyxJQUFJLCtEQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFRDs7T0FFRztJQUNLLHVCQUF1QixDQUFDLEtBQWEsRUFBRSxLQUFhO1FBQ3hELE9BQU8sSUFBSSwrREFBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFFRDs7T0FFRztJQUNLLHNCQUFzQixDQUFDLFFBQTJCLEVBQUUsWUFBb0IsRUFBRSxLQUFjO1FBQzVGLE1BQU0sS0FBSyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNyQixPQUFPO1NBQ1Y7UUFDRCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckIsSUFBSSxRQUFRLFlBQVksd0RBQVcsRUFBRTtZQUNqQyxJQUFJLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUM1QixJQUFJLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQzNFLE9BQU87YUFDVjtZQUNELElBQUksbUJBQW1CLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzFCLElBQUksR0FBRyxLQUFLLFFBQVEsRUFBRTtvQkFDbEIsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO2lCQUM1QjtnQkFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO2FBQy9EO1lBQ0QsT0FBTztTQUNWO1FBQ0QsZ0JBQWdCO1FBQ2hCLElBQUksdUJBQXVCLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDOUIsSUFBSSxDQUFDLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQzdFLE9BQU87U0FDVjtRQUNELElBQUkscUJBQXFCLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDNUIsSUFBSSxHQUFHLEtBQUssUUFBUSxFQUFFO2dCQUNsQixRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7YUFDNUI7WUFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ2pFO0lBQ0wsQ0FBQztJQUVEOztPQUVHO0lBQ0ssd0JBQXdCLENBQUMsT0FBOEIsRUFBRSxLQUFjO1FBQzNFLElBQUksT0FBTyxFQUFFO1lBQ1QsTUFBTSxDQUFDLEdBQUcsT0FBa0IsQ0FBQztZQUM3QixDQUFDLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDbkIsQ0FBQyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ25CLENBQUMsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNwQixDQUFDLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7U0FDdkI7SUFDTCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxXQUFXLENBQUMsS0FBYSxFQUFFLEtBQWM7UUFDN0MsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNsQixLQUFLLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDdEIsQ0FBQztDQUNKOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuVDZFO0FBQ3hDO0FBRXRDOztHQUVHO0FBQ0ksTUFBTSxhQUFhO0lBR3RCOztPQUVHO0lBQ0gsWUFBbUMsU0FBd0I7UUFBeEIsY0FBUyxHQUFULFNBQVMsQ0FBZTtRQUwzQyxjQUFTLEdBQWUsRUFBRSxDQUFDO0lBS21CLENBQUM7SUFFL0Q7Ozs7O09BS0c7SUFDSSxXQUFXLENBQUMsTUFBZSxFQUFFLE1BQWM7UUFDOUMsTUFBTSxNQUFNLEdBQUcscUdBQTBCLENBQ3JDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLGlCQUFpQixFQUN2QztZQUNJLFFBQVEsRUFBRSxDQUFDO1lBQ1gsUUFBUSxFQUFFLE1BQU0sR0FBRyxHQUFHO1lBQ3RCLFNBQVMsRUFBRSxJQUFJO1NBQ2xCLEVBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FDNUIsQ0FBQztRQUNGLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxQyxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRXpCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksK0NBQVEsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDOUQsQ0FBQztDQUNKOzs7Ozs7Ozs7Ozs7Ozs7O0FDbkNEOztHQUVHO0FBQ0ksTUFBTSxRQUFRO0lBQ2pCOzs7O09BSUc7SUFDSCxZQUFtQyxNQUFlLEVBQWtCLE1BQWMsRUFBa0IsTUFBWTtRQUE3RSxXQUFNLEdBQU4sTUFBTSxDQUFTO1FBQWtCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFBa0IsV0FBTSxHQUFOLE1BQU0sQ0FBTTtJQUFHLENBQUM7Q0FDdkg7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNib0Q7QUFJSjtBQUNDO0FBa0NsRDs7R0FFRztBQUNJLE1BQU0sb0JBQW9CO0lBTTdCOzs7T0FHRztJQUNILGtCQUFrQjtJQUNsQixZQUFtQyxHQUEyQixFQUFFLE9BQWdCLEVBQUUsT0FBaUM7UUFBaEYsUUFBRyxHQUFILEdBQUcsQ0FBd0I7UUFDMUQsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzdELGtCQUFrQjtRQUNsQixpRUFBaUU7UUFDakUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLGNBQWMsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzRSxDQUFDO0lBRU0sT0FBTztRQUNWLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBaUI7UUFDakMsdUJBQXVCO1FBQ3ZCLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUM5RCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBZ0IsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUN4RCxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDcEMsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNuQyxnQkFBZ0I7UUFDcEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU8sdUJBQXVCLENBQUMsT0FBZ0I7UUFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFO1lBQzdELE9BQU8sRUFBRSxDQUFDO1NBQ2I7UUFDRCxNQUFNLGNBQWMsR0FBb0IsRUFBRSxDQUFDO1FBQzNDLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFO1lBQzlDLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFrQixDQUFDO1lBQzFELE1BQU0sQ0FBQyxHQUFHLElBQUksMERBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxhQUFhLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO2dCQUN6QyxDQUFDLENBQUMsV0FBVztnQkFDVCw0REFBNEQ7Z0JBQzVELElBQUksK0RBQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFDdEUsUUFBUSxDQUFDLE1BQU0sQ0FDbEIsQ0FBQztZQUNOLENBQUMsQ0FBQyxDQUFDO1lBQ0gsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQixDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFFTyxnQkFBZ0IsQ0FBQyxPQUFnQixFQUFFLGNBQStCLEVBQUUsT0FBaUM7UUFDekcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO1lBQ3JELE9BQU8sRUFBRSxDQUFDO1NBQ2I7UUFDRCxNQUFNLE9BQU8sR0FBb0IsRUFBRSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ25DLE1BQU0sU0FBUyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDaEQsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFrQixDQUFDO1lBQzFDLENBQUMsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxlQUFlLEdBQUcsQ0FBQyxNQUFNLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBZ0IsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDM0UsT0FBTyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0IsQ0FBQyxDQUFDLENBQUM7WUFDSCxPQUFPLENBQUMsSUFBSTtZQUNSLGtCQUFrQjtZQUNsQixxQkFBcUI7WUFDckIsc0JBQXNCO1lBQ3RCLHlCQUF5QjtZQUN6QiwyQkFBMkI7WUFDM0IsbUJBQW1CO1lBQ25CLHVFQUF1RTtZQUN2RSxnQ0FBZ0M7WUFDaEMsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQixxQkFBcUI7WUFDckIsd0JBQXdCO1lBQ3hCLDhCQUE4QjtZQUM5Qix3QkFBd0I7WUFDeEIsaUJBQWlCO1lBQ2pCLHNCQUFzQjtZQUN0QixJQUFJO1lBQ0osSUFBSSwyREFBYSxDQUNiLE1BQU0sQ0FBQyxPQUFPLEVBQ2QsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFDMUQsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksRUFDbEUsT0FBTyxFQUFFLFVBQVU7Z0JBQ2YsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVO2dCQUNwQixDQUFDLENBQUMsSUFBSSwrREFBTztnQkFDUCw0REFBNEQ7Z0JBQzVELENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQ3BCLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUNuQixDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUN2QixDQUFDLFNBQVMsRUFBRSxFQUNuQixPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUN6RCxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUN0QixPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUN6RCxTQUFTLEVBQ1QsZUFBZSxDQUNsQixDQUNKLENBQUM7UUFDTixDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sT0FBTyxDQUFDO0lBQ25CLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6SndFO0FBSXpFLFdBQVc7QUFDWCx3Q0FBd0M7QUFDeEMsbUZBQW1GO0FBQ25GLHNJQUFzSTtBQUV0SSxNQUFNLGVBQWUsR0FBRyx1RUFBZSxFQUFFLENBQUM7QUFFMUMsTUFBTSxJQUFJLEdBQUcsSUFBSSwrREFBTyxFQUFFLENBQUM7QUFDM0IsTUFBTSxJQUFJLEdBQUcsSUFBSSwrREFBTyxFQUFFLENBQUM7QUFDM0IsTUFBTSxJQUFJLEdBQUcsSUFBSSwrREFBTyxFQUFFLENBQUM7QUFDM0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxrRUFBVSxFQUFFLENBQUM7QUFDaEMsTUFBTSxLQUFLLEdBQUcsSUFBSSw4REFBTSxFQUFFLENBQUM7QUFDM0IsTUFBTSxLQUFLLEdBQUcsSUFBSSw4REFBTSxFQUFFLENBQUM7QUFFM0I7O0dBRUc7QUFDSSxNQUFNLGtCQUFrQjtJQStCM0I7Ozs7T0FJRztJQUNILFlBQW1DLE1BQStCLEVBQWtCLE1BQWMsRUFBa0IsU0FBd0I7UUFBekcsV0FBTSxHQUFOLE1BQU0sQ0FBeUI7UUFBa0IsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFrQixjQUFTLEdBQVQsU0FBUyxDQUFlO1FBVHBJLGdCQUFXLEdBQVksSUFBSSwrREFBTyxFQUFFLENBQUM7UUFDckMsYUFBUSxHQUFZLElBQUksK0RBQU8sRUFBRSxDQUFDO1FBQ2xDLGFBQVEsR0FBWSxJQUFJLCtEQUFPLEVBQUUsQ0FBQztRQVF0QyxxREFBcUQ7UUFDckQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsRUFBRTtZQUMvQixTQUFTLENBQUMsa0JBQWtCLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUNwRTtRQUVELE1BQU0sV0FBVyxHQUFHLFNBQVMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUMvQyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsV0FBVyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBRXhELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxTQUFTLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3pELElBQUksQ0FBQyxvQkFBb0IsR0FBRyxTQUFTLENBQUMsa0JBQWtCLENBQUMsS0FBSyxFQUFFLENBQUM7UUFFakUsTUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3hELElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxDQUFDLHlCQUF5QixHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlGO2FBQU07WUFDSCxJQUFJLENBQUMseUJBQXlCLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNqRTtRQUVELHlGQUFpQyxDQUFDLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pHLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFekMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMseUJBQXlCLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDaEUseUZBQWlDLENBQUMsSUFBSSxDQUFDLHlCQUF5QixFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyRixJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUVyRixJQUFJLE1BQU0sRUFBRTtZQUNSLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVuQyx5RkFBaUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDN0UseUZBQWlDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZFLHlGQUFpQyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUV2RSxXQUFXLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztZQUV4QyxLQUFLLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFFcEQseUZBQWlDLENBQUMsSUFBSSxDQUFDLHlCQUF5QixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMvRSxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUN4RjtJQUNMLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0ksTUFBTSxDQUFDLGNBQXNCLEVBQUUsU0FBaUIsRUFBRSxRQUFpQixFQUFFLGNBQStCO1FBQ3ZHLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDdEQsa0RBQWtEO1lBQ2xELE9BQU87U0FDVjtRQUVELG9DQUFvQztRQUNwQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzVELEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUVwRCxzQ0FBc0M7UUFDdEMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEQsbUJBQW1CO1FBQ25CLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6QztZQUNJLG9CQUFvQjtZQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7aUJBQzFCLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO2lCQUM5QixZQUFZLENBQUMsR0FBRyxHQUFHLFNBQVMsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2xDO1FBQ0Q7WUFDSSxtQkFBbUI7WUFDbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0IseUZBQWlDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN2RSx5RkFBaUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3JELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3hGLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2xDO1FBQ0Q7WUFDSSxXQUFXO1lBQ1gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDdEM7UUFDRDtZQUNJLHFCQUFxQjtZQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQ3JKO1FBQ0Q7WUFDSSxnQkFBZ0I7WUFDaEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQy9DO1FBRUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUV6QyxJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNwRCxNQUFNLDJCQUEyQixHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNuRCx5RkFBaUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLDJCQUEyQixFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3BGLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsdUZBQStCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDN0QsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDO1FBQzdCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsa0JBQW1CLENBQUMsQ0FBQztRQUUzRixxQkFBcUI7UUFDckIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssc0JBQXNCLENBQUMsTUFBYztRQUN6QyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDYixJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNwRDthQUFNO1lBQ0gsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUNwQztRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFRDs7T0FFRztJQUNLLG9CQUFvQjtRQUN4QixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQXdCLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQztJQUMvRyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNLLE9BQU8sQ0FBQyxjQUErQixFQUFFLElBQWE7UUFDMUQsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFO1lBQ3JDLGFBQWEsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7Z0JBQ3pDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbkMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ2pFLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEMsTUFBTSwyQkFBMkIsR0FBRyxJQUFJLENBQUM7Z0JBRXpDLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztnQkFDcEIsUUFBUSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ3BELFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JELENBQUMsQ0FBQyxDQUFDO2dCQUNILE1BQU0sY0FBYyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDO2dCQUNyRCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLGNBQWMsQ0FBQztnQkFFdkMsSUFBSSxDQUFDLGFBQWEsQ0FBQywyQkFBMkIsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDdEQsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtvQkFDL0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxlQUFlLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztvQkFDNUYsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBRXRHLElBQUksQ0FBQyxRQUFRLENBQ1QsZUFBZSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUN0SixDQUFDO2lCQUNMO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1TjZFO0FBQ2pCO0FBQ0k7QUFJSjtBQUk3RDs7R0FFRztBQUNJLE1BQU0sYUFBYTtJQU90Qjs7Ozs7Ozs7Ozs7OztPQWFHO0lBQ0gsWUFDb0IsT0FBZTtJQUMvQixrQkFBa0I7SUFDbEIscUNBQXFDO0lBQ3JDLHdDQUF3QztJQUN4Qyx1Q0FBdUM7SUFDdkMscUNBQXFDO0lBQzlCLFNBQWlCLEVBQ2pCLFlBQW9CLEVBQ3BCLFVBQW1CLEVBQ25CLFNBQWlCLEVBQ1IsTUFBK0I7SUFDL0Msa0JBQWtCO0lBQ2xCLHFDQUFxQztJQUM5QixTQUFpQixFQUNSLEtBQXFDLEVBQ3JDLGNBQStCO1FBZi9CLFlBQU8sR0FBUCxPQUFPLENBQVE7UUFNeEIsY0FBUyxHQUFULFNBQVMsQ0FBUTtRQUNqQixpQkFBWSxHQUFaLFlBQVksQ0FBUTtRQUNwQixlQUFVLEdBQVYsVUFBVSxDQUFTO1FBQ25CLGNBQVMsR0FBVCxTQUFTLENBQVE7UUFDUixXQUFNLEdBQU4sTUFBTSxDQUF5QjtRQUd4QyxjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQ1IsVUFBSyxHQUFMLEtBQUssQ0FBZ0M7UUFDckMsbUJBQWMsR0FBZCxjQUFjLENBQWlCO1FBcEM1QyxZQUFPLEdBQXlCLEVBQUUsQ0FBQztRQUNsQyxnQkFBVyxHQUFvQixFQUFFLENBQUM7UUFFMUMsY0FBYztRQUNOLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFrQ3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksS0FBSyxJQUFJLENBQW9CLENBQUM7UUFDakYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUM5QixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO2dCQUN2RCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLHNFQUFrQixDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlFLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDaEIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQ3JCO0lBQ0wsQ0FBQztJQUVPLFVBQVU7UUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQzlCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUM5QixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO2dCQUN2RCxNQUFNLFNBQVMsR0FBRyx3RkFBd0IsQ0FDdEMsQ0FBQyxDQUFDLElBQUksR0FBRyxZQUFZLEVBQ3JCO29CQUNJLFFBQVEsRUFBRSxDQUFDO29CQUNYLFFBQVEsRUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUM7b0JBQzVCLFNBQVMsRUFBRSxJQUFJO2lCQUNsQixFQUNELEtBQUssQ0FDUixDQUFDO2dCQUNGLE1BQU0sR0FBRyxHQUFHLElBQUksd0ZBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxlQUFlLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ2xFLEdBQUcsQ0FBQyxhQUFhLEdBQUcsa0VBQVUsRUFBRSxDQUFDO2dCQUNqQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztnQkFDckIsU0FBUyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7Z0JBQ3pCLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZCLFNBQVMsQ0FBQyxRQUFRLEdBQUcsb0VBQVksRUFBRSxDQUFDO1lBQ3hDLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2xDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDekMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtnQkFDakMsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztnQkFDL0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQzFCLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3hCLE1BQU0sR0FBRyxHQUFHLElBQUksd0ZBQWdCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsbUJBQW1CLEVBQUUsS0FBSyxDQUFDLENBQUM7b0JBQ3BGLEdBQUcsQ0FBQyxhQUFhLEdBQUcscUVBQWEsRUFBRSxDQUFDO29CQUNwQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztvQkFDckIsTUFBTSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7aUJBQ3pCO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsa0JBQWtCO0lBQ2xCLDBEQUEwRDtJQUNuRCxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQWlCLEVBQUUsV0FBcUM7UUFDeEUsa0JBQWtCO1FBQ2xCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFbkQsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDN0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxTQUFTLENBQUMsQ0FBQztRQUV0RSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBZ0IsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUN4RCxPQUFPLElBQUksT0FBTyxDQUFPLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFDeEUsT0FBTyxFQUFFLENBQUM7WUFDZCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO1FBRUgsa0JBQWtCO1FBQ2xCLGtCQUFrQjtRQUNsQixJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRS9CLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ25DLGdCQUFnQjtRQUNwQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxrQkFBa0I7SUFDVixhQUFhLENBQUMsV0FBcUM7UUFDdkQsTUFBTSxhQUFhLEdBQTRCO1lBQzNDLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztZQUN6QixZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVk7WUFDL0IsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFO1lBQ25DLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztZQUN6QixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7U0FDNUIsQ0FBQztRQUNGLElBQUksQ0FBQyxTQUFTLEdBQUcsV0FBVyxFQUFFLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQzFELElBQUksQ0FBQyxZQUFZLEdBQUcsV0FBVyxFQUFFLFlBQVksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ25FLElBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxFQUFFLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQzdELElBQUksQ0FBQyxTQUFTLEdBQUcsV0FBVyxFQUFFLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQzFELElBQUksQ0FBQyxTQUFTLEdBQUcsV0FBVyxFQUFFLFNBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDO1FBRTFELE9BQU8sYUFBYSxDQUFDO0lBQ3pCLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0kwQztBQUNxQjtBQU1oRTs7R0FFRztBQUNILGtCQUFrQjtBQUNsQixzQkFBc0I7QUFFdEI7OztHQUdHO0FBQ0ksTUFBTSxrQkFBa0I7SUFrQzNCOztPQUVHO0lBQ0gsa0JBQWtCO0lBQ2xCLFlBQTJCLE1BQWtCLEVBQVUsT0FBZ0I7UUFBNUMsV0FBTSxHQUFOLE1BQU0sQ0FBWTtRQUFVLFlBQU8sR0FBUCxPQUFPLENBQVM7UUFuQ3ZFOztXQUVHO1FBQ2EsU0FBSSxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQztRQUMvQzs7V0FFRztRQUNJLFlBQU8sR0FBRyxJQUFJLENBQUM7UUFDdEI7O1dBRUc7UUFDSyxlQUFVLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCOztXQUVHO1FBQ0ssdUJBQWtCLEdBQUcsQ0FBQyxDQUFDO1FBQy9COztXQUVHO1FBQ0ssa0JBQWEsR0FBRyxDQUFDLENBQUM7UUFDMUIsa0JBQWtCO1FBQ2xCOztXQUVHO1FBQ0ssb0JBQWUsR0FBa0MsRUFBRSxDQUFDO1FBWXhELDBFQUEwRTtRQUMxRSw0QkFBNEI7UUFDNUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQztRQUN6RSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7UUFFL0Qsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEdBQUcsRUFBRTtZQUN6QixPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxDQUFDLENBQUM7UUFDRixPQUFPLENBQUMsMEJBQTBCLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDOUQsQ0FBQztJQUVEOztPQUVHO0lBQ0ksT0FBTztRQUNULElBQUksQ0FBQyxNQUFjLEdBQUcsSUFBSSxDQUFDO1FBRTVCLGtCQUFrQjtRQUNsQixJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7SUFFRDs7T0FFRztJQUNJLE9BQU87UUFDVixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3ZGLE9BQU87U0FDVjtRQUNELGtCQUFrQjtRQUNsQiwwQ0FBMEM7UUFDMUMsZ0xBQWdMO1FBQ2hMLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxvREFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDNUssa0JBQWtCO1FBQ2xCLHlDQUF5QztRQUN6QyxpRUFBaUU7UUFDakUsNENBQTRDO1FBQzVDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUU7WUFDbEQsaUNBQWlDO1lBQ2pDLGtCQUFrQjtZQUNsQixxQkFBcUI7WUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN2QixzREFBc0Q7UUFDMUQsQ0FBQyxDQUFDLENBQUM7UUFFSCxrQkFBa0I7UUFDbEIsbUJBQW1CO1FBQ25CLEtBQUssTUFBTSxRQUFRLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN6QyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDMUI7SUFDTCxDQUFDO0lBRUQ7O09BRUc7SUFDSSxvQkFBb0IsQ0FBQyxPQUFlLEVBQUUsU0FBeUIsRUFBRSxXQUFpQjtRQUNyRixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFO1lBQ3BELE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxtREFBbUQ7UUFDbkQsV0FBVyxDQUFDLFFBQVEsR0FBRyxXQUFXLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQztRQUNsRCxXQUFXLENBQUMsUUFBUSxDQUFDLGNBQWMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQztRQUNuRSxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxrQkFBa0IsQ0FBQyxPQUFlLEVBQUUsUUFBbUIsRUFBRSxJQUFVLEVBQUUsZUFBdUIsRUFBRSxNQUEyQztRQUM1SSxvQkFBb0I7UUFDcEIsT0FBTyxJQUFJLHlFQUFvQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzVHLENBQUM7SUFFRCxrQkFBa0I7SUFDbEI7O09BRUc7SUFDSSxpQkFBaUIsQ0FBQyxRQUFxQztRQUMxRCxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN4QyxDQUFDOztBQXhIRCxrQkFBa0I7QUFDSyx1QkFBSSxHQUFHLEtBQUssQ0FBQztBQTBIeEMsa0JBQWtCO0FBQ2xCLFlBQVk7QUFDWixtRUFBbUU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkpLO0FBT3hFOzs7R0FHRztBQUNJLE1BQU0sYUFBYyxTQUFRLGtGQUFjO0lBQWpEOztRQUNXLFNBQUksR0FBRyxLQUFLLENBQUM7UUFDYixlQUFVLEdBQUc7WUFDaEIsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtZQUMxQixNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO1NBQzdCLENBQUM7UUFHSyxlQUFVLEdBQXlCLElBQUksQ0FBQztJQVluRCxDQUFDO0lBVlUsWUFBWTtRQUNmLE9BQU8sSUFBSSxhQUFhLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQsa0JBQWtCO0lBQ1gsU0FBUyxDQUFDLEtBQVksRUFBRSxJQUFTLEVBQUUsT0FBZSxFQUFFLFVBQXVELEVBQUUsUUFBaUI7UUFDakksSUFBSSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUM7UUFDbkIsSUFBSSxRQUFRO1lBQUUsSUFBSSxDQUFDLEdBQUcsSUFBSSxRQUFRLENBQUM7UUFDbkMsT0FBTyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN2RSxDQUFDO0NBQ0o7QUFFRCxrQkFBa0I7QUFDbEIscUJBQXFCO0FBQ3JCLHVEQUF1RDtBQUN2RCxJQUFJOzs7Ozs7Ozs7Ozs7Ozs7O0FDc0dKLElBQVksMEJBSVg7QUFKRCxXQUFZLDBCQUEwQjtJQUNsQyx1RUFBeUM7SUFDekMsb0RBQXNCO0lBQ3RCLHNGQUF3RDtBQUM1RCxDQUFDLEVBSlcsMEJBQTBCLEtBQTFCLDBCQUEwQixRQUlyQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0lvRDtBQU0rQjtBQUNyQztBQUU4QjtBQWlDN0Usa0JBQWtCO0FBQ1gsTUFBTSxzQkFBc0I7SUFXL0IsWUFBbUIsS0FBYSxFQUFFLEtBQWEsRUFBVSxPQUFtQjtRQUF6RCxVQUFLLEdBQUwsS0FBSyxDQUFRO1FBQXlCLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDeEUsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDeEIsQ0FBQztJQVhELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsSUFBSSxLQUFLLENBQUMsS0FBYTtRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM3QyxDQUFDO0NBS0o7QUF3RUQ7O0dBRUc7QUFDSSxNQUFNLFVBQVU7SUErQm5COzs7Ozs7O09BT0c7SUFDSCxZQUNvQixHQUFTLEVBQ1QsS0FBWSxFQUNYLFVBQWtCLEVBQ2xCLGtCQUEwQixFQUMxQixrQkFBMEI7UUFKM0IsUUFBRyxHQUFILEdBQUcsQ0FBTTtRQUNULFVBQUssR0FBTCxLQUFLLENBQU87UUFDWCxlQUFVLEdBQVYsVUFBVSxDQUFRO1FBQ2xCLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBUTtRQUMxQix1QkFBa0IsR0FBbEIsa0JBQWtCLENBQVE7UUEzQ3ZDLHFCQUFnQixHQUFnQixFQUFFLENBQUM7UUFDbkMsbUJBQWMsR0FBbUIsRUFBRSxDQUFDO1FBQ3BDLGtDQUE2QixHQUFrQyxFQUFFLENBQUM7UUFDbEUseUJBQW9CLEdBQW1CLEVBQUUsQ0FBQztRQUMxQyxxQkFBZ0IsR0FBcUIsRUFBRSxDQUFDO1FBQ3hDLHVCQUFrQixHQUF1QixFQUFFLENBQUM7UUFDNUMsY0FBUyxHQUFjLEVBQUUsQ0FBQztRQU0xQixhQUFRLEdBQW1CLEVBQUUsQ0FBQztRQWlDbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUMzQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixFQUFFLENBQUM7UUFDN0QsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksNkZBQW9CLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFckgsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLEVBQUU7WUFDekUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUFDNUIsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7WUFDL0IsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLENBQUM7U0FDakQ7UUFDRCxJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztRQUVqQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksd0RBQVksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUU3RCxrQkFBa0I7UUFDbEIsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDaEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUVoRCx1QkFBdUI7UUFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNoSixDQUFDO0lBbkRELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRU0sWUFBWSxDQUFDLE1BQW9CO1FBQ3BDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFTSxZQUFZO1FBQ2YsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQTJDRCxrQkFBa0I7SUFDbEI7Ozs7T0FJRztJQUNLLHdCQUF3QjtRQUM1QixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDcEIsS0FBSyxNQUFNLFNBQVMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDN0QsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN6QyxJQUFJLE1BQU0sQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRTtnQkFDckMsSUFBSSxDQUFDLFFBQVEsRUFBRTtvQkFDWCxRQUFRLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztvQkFDOUIsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO3dCQUNoQixNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUNuQyx3REFBd0Q7d0JBQ3hELElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxNQUFNOzRCQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsaURBQWlELENBQUMsQ0FBQztxQkFDakc7aUJBQ0o7cUJBQU07b0JBQ0gsb0JBQW9CO29CQUNwQixJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU07d0JBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO29CQUV6SCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO29CQUM3QixLQUFLLE1BQU0sSUFBSSxJQUFJLE1BQU0sRUFBRTt3QkFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7cUJBQzVCO2lCQUNKO2FBQ0o7U0FDSjtJQUNMLENBQUM7SUFFRCxrQkFBa0I7SUFDbEI7OztPQUdHO0lBQ0ssbUJBQW1CO1FBQ3ZCLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFVLEVBQUUsRUFBRTtZQUMvRCxPQUFPLElBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQztZQUFFLE9BQU8sZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDdkQ7WUFDRCxnQ0FBZ0M7WUFDaEMsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNqSSxJQUFJLGFBQWEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNO2dCQUFFLE9BQU8sYUFBYSxDQUFDOztnQkFDNUQsTUFBTSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztTQUN2RDtJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFpQjtRQUNqQyxNQUFNLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVEOztPQUVHO0lBQ0ksT0FBTztRQUNWLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNwQyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRTVCLElBQUksQ0FBQyxjQUFzQixHQUFHLElBQUksQ0FBQztRQUNuQyxJQUFJLENBQUMsNkJBQXFDLEdBQUcsSUFBSSxDQUFDO1FBQ2xELElBQUksQ0FBQyxvQkFBNEIsR0FBRyxJQUFJLENBQUM7UUFDekMsSUFBSSxDQUFDLGdCQUF3QixHQUFHLElBQUksQ0FBQztRQUNyQyxJQUFJLENBQUMsa0JBQTBCLEdBQUcsSUFBSSxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxTQUFpQixHQUFHLElBQUksQ0FBQztRQUM5QixJQUFJLENBQUMsU0FBaUIsR0FBRyxJQUFJLENBQUM7SUFDbkMsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxRQUFRLENBQUMsS0FBYSxFQUFFLEtBQWE7UUFDeEMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDNUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzVCLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQzNDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFDMUQsQ0FBQyxDQUFDLENBQUM7U0FDTjtRQUNELElBQUksSUFBSSxDQUFDLDZCQUE2QixDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzNDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDekQ7SUFDTCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLGNBQWMsQ0FBQyxLQUFhLEVBQUUsS0FBYTtRQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ25DLE9BQU87U0FDVjtRQUNELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUNqRCxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQzFELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVEOzs7O09BSUc7SUFDSyxjQUFjLENBQUMsS0FBYSxFQUFFLEtBQWE7UUFDL0MsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUM5QyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUM5QixPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1NBQzlCO1FBQ0QsT0FBTyxDQUFDLENBQUM7SUFDYixDQUFDO0lBRUQ7O09BRUc7SUFDSSxlQUFlO1FBQ2xCLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNJLDRCQUE0QjtRQUMvQixNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUNsRCxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ2xCLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFFRCxNQUFNLE9BQU8sR0FBRyxlQUFlLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUN0RCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQztRQUM3RCxPQUFPLElBQUksK0RBQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xHLENBQUM7SUFFRDs7T0FFRztJQUNJLGtCQUFrQjtRQUNyQixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxPQUFPLENBQUMsSUFBbUI7UUFDOUIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDO0lBQy9DLENBQUM7SUFFRDs7T0FFRztJQUNILElBQVcsWUFBWTtRQUNuQixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDOUIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxJQUFXLFFBQVE7UUFDZixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksaUJBQWlCLENBQUMsU0FBaUI7UUFDdEMsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDO0lBQ3RELENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksUUFBUSxDQUFDLFNBQWlCO1FBQzdCLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7SUFDL0UsQ0FBQztJQUVEOzs7T0FHRztJQUNJLFVBQVUsQ0FBQyxTQUFpQjtRQUMvQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDO0lBQzdDLENBQUM7SUFFRDs7T0FFRztJQUNLLG9CQUFvQjtRQUN4QixJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3JELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQztRQUMvQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRDs7T0FFRztJQUNLLHVCQUF1QjtRQUMzQixJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3JELElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO2dCQUNWLE9BQU87YUFDVjtZQUNELENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2xCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN2QyxJQUFJLENBQUMsTUFBTSxFQUFFO29CQUNULE9BQU8sQ0FBQyxHQUFHLENBQUMsK0JBQStCLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ2hELE9BQU87aUJBQ1Y7Z0JBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO29CQUNwQixNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztvQkFDbkQsSUFBSSxDQUFDLGtCQUFrQixFQUFFO3dCQUNyQixPQUFPLENBQUMsR0FBRyxDQUFDLDhCQUE4QixFQUFFLENBQUMsQ0FBQyxDQUFDO3dCQUMvQyxPQUFPO3FCQUNWO29CQUNELE1BQU0sTUFBTSxHQUFHLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ3JELElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztvQkFDaEUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUM3QixNQUFNO3dCQUNOLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTTtxQkFDbkIsQ0FBQyxDQUFDO29CQUNILElBQUksQ0FBQyxDQUFDLFVBQVUsRUFBRTt3QkFDZCxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO3dCQUN4RixJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQzs0QkFDekMsTUFBTTs0QkFDTixNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU07eUJBQ25CLENBQUMsQ0FBQztxQkFDTjtnQkFDTCxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxzQ0FBc0M7UUFDMUMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDckQsSUFBSSxDQUFDLENBQUMsQ0FBQyxjQUFjLEVBQUU7Z0JBQ25CLE9BQU87YUFDVjtZQUNELElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxzRkFBMEIsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzdHLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVEOztPQUVHO0lBQ0sseUJBQXlCO1FBQzdCLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN2QyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVDLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQ1AsT0FBTzthQUNWO1lBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7O09BRUc7SUFDSywyQkFBMkI7UUFDL0IsTUFBTSxLQUFLLEdBQXVCLEVBQUUsQ0FBQztRQUNyQyxLQUFLLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFO1lBQ3pGLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzlDLHFCQUFxQjtZQUNyQixJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO2dCQUM1SCxTQUFTO2FBQ1o7WUFDRCxLQUFLLE1BQU0sT0FBTyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDL0MsSUFBSSxPQUFPLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFO29CQUMvQixNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUUsT0FBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQzlELEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7b0JBQ3hCLE1BQU07aUJBQ1Q7YUFDSjtTQUNKO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVEOztPQUVHO0lBQ0ssa0JBQWtCO1FBQ3RCLE1BQU0sS0FBSyxHQUFjLEVBQUUsQ0FBQztRQUM1QixLQUFLLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUN6RSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN0QyxJQUFJLElBQUksQ0FBQyxFQUFFLEtBQUssVUFBVSxFQUFFO2dCQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQVksQ0FBQztnQkFDOUIsU0FBUzthQUNaO1lBQ0QscUJBQXFCO1lBQ3JCLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7Z0JBQzVILFNBQVM7YUFDWjtZQUNELEtBQUssTUFBTSxPQUFPLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUMvQyxNQUFNLEtBQUssR0FBSSxPQUFrQixDQUFDLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2dCQUMvRCxJQUFJLEtBQUssRUFBRTtvQkFDUCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUN6QyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztvQkFDMUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFZLENBQUMsQ0FBQztvQkFDcEMsTUFBTTtpQkFDVDthQUNKO1NBQ0o7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDOztBQTlYRCxrQkFBa0I7QUFDSiwyQkFBZ0IsR0FBRyxXQUFXLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVJRztBQUlHO0FBRU87QUFDTjtBQUV4RDs7Ozs7Ozs7R0FRRztBQUNJLE1BQU0sb0JBQW9CO0lBQzdCOztPQUVHO0lBQ0gsWUFBb0MsTUFBa0I7UUFBbEIsV0FBTSxHQUFOLE1BQU0sQ0FBWTtJQUFHLENBQUM7SUFFMUQ7OztPQUdHO0lBQ0ksUUFBUSxDQUFDLE9BQWUsRUFBRSxRQUFtQixFQUFFLElBQVUsRUFBRSxlQUF1QixFQUFFLE1BQTJDO1FBQ2xJLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLENBQUM7UUFDbEcsSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNmLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQUM7UUFDM0MsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ2xHLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDZCxPQUFPLElBQUksQ0FBQztTQUNmO1FBQ0QsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3BCLElBQUksV0FBVyxZQUFZLGlFQUFhLEVBQUU7WUFDdEMsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZLENBQUMsQ0FBQztTQUMxRTtRQUNELE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQ7O09BRUc7SUFDSyxxQkFBcUI7UUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUM5QixPQUFPLEVBQUUsQ0FBQztTQUNiO1FBQ0QsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUU7WUFDdkYsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDO1NBQzdEO1FBQ0QsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsd0JBQXdCLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLHdCQUF3QixDQUFDLFNBQVMsRUFBRTtZQUN4SCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxTQUFTLENBQUM7U0FDekU7UUFDRCxPQUFPLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ssMEJBQTBCLENBQUMsWUFBZ0MsRUFBRSxTQUFpQztRQUNsRyxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQzdCLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLFlBQVksQ0FBQyxDQUFDO1FBQzlELElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDbkIsT0FBTyxJQUFJLENBQUM7U0FDZjthQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsdUNBQXVDLFlBQVksRUFBRSxDQUFDLENBQUM7U0FDMUU7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNLLHNCQUFzQixDQUFDLE9BQWUsRUFBRSxRQUF1QixFQUFFLElBQTBCO1FBQy9GLE1BQU0sUUFBUSxHQUFnQyxFQUFFLENBQUM7UUFDakQsZ0RBQWdEO1FBQ2hELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUM7UUFDckQsSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUNoQixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDcEM7UUFDRCxNQUFNLFlBQVksR0FBRyxDQUFDLEtBQXlCLEVBQUUsUUFBd0MsRUFBRSxFQUFFO1lBQ3pGLHdCQUF3QixDQUFTLEtBQUssRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUM5QyxRQUFRLENBQUMsSUFBSSxDQUNULElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsR0FBRyxPQUFPLGFBQWEsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxjQUEyQixFQUFFLEVBQUU7b0JBQy9HLDhCQUE4QjtvQkFDOUIsTUFBTSxDQUFDLEdBQUcsY0FBeUIsQ0FBQztvQkFDcEMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzdCLENBQUMsQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUM3QixDQUFDLENBQUMsTUFBTSxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDNUIsQ0FBQyxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzVCLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFDN0IsQ0FBQyxDQUFDLENBQ0wsQ0FBQztZQUNOLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDO1FBRUYsWUFBWSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUN0RCxJQUFJLFFBQVEsQ0FBQyxVQUFVLElBQUksUUFBUSxDQUFDLFNBQVMsRUFBRTtnQkFDM0MsT0FBTyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7YUFDM0I7WUFDRCxRQUFRLENBQUMsY0FBYyxHQUFHLE9BQU8sQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztRQUNILFlBQVksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNuRyxZQUFZLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDN0YsWUFBWSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsb0JBQW9CLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNuSCxZQUFZLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLG9CQUFvQixFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ2pILFlBQVksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUMvRixZQUFZLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDakcsWUFBWSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ3JHLFlBQVksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLG1CQUFtQixHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDakgsWUFBWSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsc0JBQXNCLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUVsSCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSyxzQkFBc0IsQ0FBQyxPQUFlLEVBQUUsUUFBbUIsRUFBRSxlQUF1QixFQUFFLElBQTBCO1FBQ3BILElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxnRkFBbUMsRUFBRTtZQUNyRCxNQUFNLGFBQWEsR0FBRyxJQUFJLGlFQUFhLENBQUMsUUFBUSxDQUFDLElBQUksSUFBSSxnQkFBZ0IsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDckgsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNyRCxPQUFPLGFBQWEsQ0FBQztTQUN4QjtRQUNELElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxpR0FBb0QsRUFBRTtZQUN0RSxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLGVBQWUsQ0FBQyxDQUFDO1lBQzNFLDJCQUEyQjtZQUMzQixHQUFHLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO1lBQzlCLEdBQUcsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1lBQzNCLE9BQU8sR0FBRyxDQUFDO1NBQ2Q7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNLLDBCQUEwQixDQUFDLFFBQXVCLEVBQUUsSUFBMEI7UUFDbEYsd0JBQXdCLENBQVMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzFHLHdCQUF3QixDQUE2QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDekYsUUFBUSxDQUFDLFlBQVksR0FBRyxJQUFJLDhEQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRSxRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QixDQUFDLENBQUMsQ0FBQztRQUNILHdCQUF3QixDQUE2QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDOUYsUUFBUSxDQUFDLFVBQVUsR0FBRyxJQUFJLDhEQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRSxDQUFDLENBQUMsQ0FBQztRQUNILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMzRyx3QkFBd0IsQ0FBUyxJQUFJLENBQUMsZUFBZSxDQUFDLGtCQUFrQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzNILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekgsd0JBQXdCLENBQVMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzdHLHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUM3Ryx3QkFBd0IsQ0FBUyxJQUFJLENBQUMsZUFBZSxDQUFDLHNCQUFzQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25JLHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsdUJBQXVCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLHNCQUFzQixHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDckksd0JBQXdCLENBQTZCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUM1RixRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksOERBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDO1FBQ0gsd0JBQXdCLENBQVMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3JILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3ZILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN2Ryx3QkFBd0IsQ0FBNkIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2pHLFFBQVEsQ0FBQyxhQUFhLEdBQUcsSUFBSSw4REFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEUsQ0FBQyxDQUFDLENBQUM7UUFDSCx3QkFBd0IsQ0FBUyxJQUFJLENBQUMsZUFBZSxDQUFDLGFBQWEsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDakgsd0JBQXdCLENBQVMsSUFBSSxDQUFDLGVBQWUsQ0FBQyx5QkFBeUIsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsd0JBQXdCLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN6SSx3QkFBd0IsQ0FBNkIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2hHLFFBQVEsQ0FBQyxZQUFZLEdBQUcsSUFBSSw4REFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7UUFDSCx3QkFBd0IsQ0FBUyxJQUFJLENBQUMsZUFBZSxDQUFDLG1CQUFtQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzdILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsY0FBYyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3hILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsY0FBYyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3hILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBRTFILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMzRyx3QkFBd0IsQ0FBUyxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ3hFLFFBQVEsS0FBSyxFQUFFO2dCQUNYLEtBQUssQ0FBQyxFQUFFLFNBQVM7b0JBQ2IsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7b0JBQzVCLFFBQVEsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO29CQUMzQixNQUFNO2dCQUNWLEtBQUssQ0FBQyxFQUFFLG9CQUFvQjtvQkFDeEIsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7b0JBQzVCLFFBQVEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO29CQUMxQixRQUFRLENBQUMsU0FBUyxHQUFHLGdGQUFvQixDQUFDO29CQUMxQyxNQUFNO2dCQUNWLEtBQUssQ0FBQyxFQUFFLGNBQWM7b0JBQ2xCLFFBQVEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO29CQUMzQixRQUFRLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztvQkFDM0IsUUFBUSxDQUFDLFNBQVMsR0FBRyxnRkFBb0IsQ0FBQztvQkFDMUMsTUFBTTthQUNiO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCx3QkFBd0IsQ0FBUyxJQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pILHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekgsd0JBQXdCLENBQVMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pHLHdCQUF3QixDQUFTLElBQUksQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3ZILHdCQUF3QixDQUFVLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUM1Ryx3QkFBd0IsQ0FBVSxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDMUcsd0JBQXdCLENBQVMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUNyRSxRQUFRLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25ELElBQUksUUFBUSxDQUFDLGVBQWUsRUFBRTtnQkFDMUIsUUFBUSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQzthQUN0QztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLHdCQUF3QixDQUFJLElBQW1CLEVBQUUsUUFBNEI7SUFDbEYsSUFBSSxPQUFPLElBQUksS0FBSyxXQUFXLEVBQUU7UUFDN0IsT0FBTztLQUNWO0lBQ0QsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ25CLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzTzhDO0FBRS9DLGlDQUFpQztBQUMwQjtBQUN4QjtBQUNhO0FBRWhELFFBQVE7QUFDdUI7QUFDUDtBQUNNO0FBQzlCLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNwQixNQUFNLFlBQVksR0FBRyxLQUFLLENBQUM7QUFDM0IsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDO0FBRXNCO0FBQ1U7QUFDSztBQWEzQjtBQUVoQyx3QkFBd0I7QUFDeEIsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQXNCLENBQUM7QUFDNUUsSUFBSSxNQUFjLENBQUM7QUFDbkIsSUFBSSw4RUFBa0IsRUFBRSxFQUFFO0lBQ3RCLE1BQU0sR0FBRyxJQUFJLGtFQUFNLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0NBQ3JDO0FBRUQsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQXFCLENBQUM7QUFFN0UsTUFBTSxDQUFDLE1BQU0sR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN0QixNQUFNLE9BQU8sR0FBRyxtQ0FBbUMsQ0FBQztJQUVwRCxrQkFBa0I7SUFDbEIsTUFBTSxPQUFPLEdBQUcsSUFBSSw0Q0FBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLHdEQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN2RCxPQUFPLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUNoQyxNQUFNLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRXZDLGVBQWU7SUFDZixNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQ0FBcUMsRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRXhFLFNBQVM7SUFDVCxPQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBRW5DLFNBQVM7SUFDVCxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksOERBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFN0MscUJBQXFCO0lBQ3JCLE9BQU8sQ0FBQyxLQUFLLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRTtRQUM1QyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQztJQUMvRSxDQUFDLENBQUMsQ0FBQztJQUVILGNBQWM7SUFDZCxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRTtRQUN0QixPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQzNCLENBQUMsQ0FBQyxDQUFDO0lBRVAsdUJBQXVCO0lBQ25CLFVBQVUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksK0RBQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELFVBQVUsQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksK0RBQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRTFELHlCQUF5QjtJQUNyQixVQUFVLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdELFVBQVUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRXhELG9DQUFvQztJQUNoQyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoRkY7Ozs7R0FJRztBQUV1QjtBQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNQeEI7Ozs7R0FJRztBQU91SDtBQUN6RjtBQUUxQixNQUFNLGlCQUFpQjtJQXVCMUIsWUFDcUIsS0FBWSxFQUM3QixPQUF5QztRQUR4QixVQUFLLEdBQUwsS0FBSyxDQUFPO1FBRzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxJQUFJLGlCQUFpQixDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDdEUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLDJEQUFjLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsR0FBRyxxREFBaUIsQ0FBQztRQUNwRCxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7UUFFdkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUEzQkQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3pCLENBQUM7SUFDRCxJQUFJLE9BQU8sQ0FBQyxLQUE0QjtRQUNwQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztJQUMxQixDQUFDO0lBT0QsSUFBSSxTQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQzNCLENBQUM7SUFlTyxNQUFNLENBQUMsc0JBQXNCO1FBQ2pDLE1BQU0sT0FBTyxHQUFHLElBQUksa0VBQXFCLEVBQUUsQ0FBQztRQUM1QyxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksbUVBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RCxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksa0VBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RCxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksZ0VBQW1CLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekQsT0FBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLHNFQUF5QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUQsT0FBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLHNFQUF5QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUQsT0FBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLHdFQUEyQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRS9ELE9BQU8sT0FBTyxDQUFDO0lBQ25CLENBQUM7SUFFTyxnQkFBZ0IsQ0FBQyxTQUF5QjtRQUM5QyxJQUFJLE1BQU0sRUFBRTtZQUNSLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUNoQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFDLFVBQVMsQ0FBQztnQkFDeEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2dCQUMvQixTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdEIsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ1QsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBQyxVQUFTLENBQUM7Z0JBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFDOUIsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNqQixTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdEIsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ1o7SUFDTCxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVFRDs7OztHQUlHO0FBRWtIO0FBQ3BFO0FBRzFDLE1BQU0sU0FBUztJQWNsQixZQUNxQixLQUFZLEVBQ1osV0FBbUIsRUFDcEIsT0FBZSxFQUNmLFVBQXdCO1FBSHZCLFVBQUssR0FBTCxLQUFLLENBQU87UUFDWixnQkFBVyxHQUFYLFdBQVcsQ0FBUTtRQUNwQixZQUFPLEdBQVAsT0FBTyxDQUFRO1FBQ2YsZUFBVSxHQUFWLFVBQVUsQ0FBYztRQUV4QyxJQUFJLENBQUMsT0FBTyxHQUFHLDJEQUFjLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSwwREFBYSxDQUFDLENBQUM7UUFDdkYsSUFBSSxDQUFDLFdBQVcsR0FBRywyREFBYyxDQUFDLFlBQVksRUFBRSxPQUFPLEdBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLDBEQUFhLENBQUMsQ0FBQztRQUNqRyxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDNUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDO1FBQ3BELElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLGdGQUFtQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7UUFDbEMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7SUFDaEMsQ0FBQztJQXhCRCxJQUFJLE1BQU07UUFDTixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQXdCRDs7OztPQUlHO0lBQ0ssY0FBYyxDQUFDLFdBQW1CO1FBQ3RDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLDZEQUFXLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVFLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSwrREFBa0IsQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO1FBQzVDLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN4QyxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksR0FBRyxJQUFJLG1EQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDdkMsSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksd0RBQVcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxlQUFlLEdBQUcsZ0VBQW1CLENBQUM7UUFDbkUsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDaEQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUM7SUFDekUsQ0FBQztJQUVEOztPQUVHO0lBQ0ssb0JBQW9CO1FBQ3hCLElBQUksQ0FBQyxLQUFLLENBQUMsNEJBQTRCLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztRQUN2RCxJQUFJLENBQUMsS0FBSyxDQUFDLDRCQUE0QixDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7UUFDdkQsSUFBSSxDQUFDLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7UUFDbEUsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVTtZQUM3RCxDQUFDLENBQUMsa0ZBQXFDLENBQUMsU0FBUyxDQUFDLHlCQUF5QixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNqRyxDQUFDOztBQXpEYyxtQ0FBeUIsR0FBRyxtRUFBbUUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1puSDs7OztHQUlHO0FBR21DO0FBQ3lEO0FBRXhGLFNBQVMsY0FBYyxDQUFDLEtBQVk7SUFDdkMsT0FBUSxLQUFzQixDQUFDLHlCQUF5QixLQUFLLFNBQVMsQ0FBQztBQUMzRSxDQUFDO0FBRU0sU0FBUyxvQkFBb0IsQ0FBQyxLQUFVO0lBQzNDLElBQUksUUFBUSxHQUFHLFNBQVMsQ0FBQztJQUV6QixJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUM5QyxRQUFRLEdBQUcsMEVBQTZCLENBQUM7S0FDNUM7U0FBTSxJQUFJLEtBQUssWUFBWSxrRUFBVSxFQUFFO1FBQ3BDLFFBQVEsR0FBRywrRUFBa0MsQ0FBQztLQUNqRDtTQUFNLElBQUksS0FBSyxZQUFZLCtEQUFPLEVBQUU7UUFDakMsUUFBUSxHQUFHLDRFQUErQixDQUFDO0tBQzlDO1NBQU0sSUFBSSxLQUFLLFlBQVksK0RBQU8sRUFBRTtRQUNqQyxRQUFRLEdBQUcsNEVBQStCLENBQUM7S0FDOUM7U0FBTSxJQUFJLEtBQUssWUFBWSw4REFBTSxFQUFFO1FBQ2hDLFFBQVEsR0FBRywyRUFBOEIsQ0FBQztLQUM3QztTQUFNLElBQUksS0FBSyxZQUFZLDhEQUFNLEVBQUU7UUFDaEMsUUFBUSxHQUFHLDJFQUE4QixDQUFDO0tBQzdDO1NBQU0sSUFBSSxLQUFLLFlBQVksNERBQUksRUFBRTtRQUM5QixRQUFRLEdBQUcseUVBQTRCLENBQUM7S0FDM0M7SUFFRCxJQUFJLFFBQVEsSUFBSSxTQUFTLEVBQUU7UUFDdkIsT0FBTyxJQUFJLENBQUM7S0FDZjtTQUFNO1FBQ0gsT0FBTyxRQUFRLENBQUM7S0FDbkI7QUFDTCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RDRDs7OztHQUlHO0FBRXFFO0FBQzVCO0FBRW9CO0FBQ0c7QUFPeEI7QUFDYztBQUNrQjtBQUNzSjtBQUMxSjtBQUNuQjtBQUNYO0FBR2xDLE1BQU0sT0FBTztJQTZIaEIsWUFDYSxNQUFjLEVBQ2hCLEtBQWEsRUFDcEIsTUFBZTtRQUZOLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDaEIsVUFBSyxHQUFMLEtBQUssQ0FBUTtRQTNIeEI7OztXQUdHO1FBQ0ssbUJBQWMsR0FBRyxJQUFJLDRFQUFhLEVBQUUsQ0FBQztRQUU3QyxzREFBc0Q7UUFDOUMsMkJBQXNCLEdBQUcsSUFBSSxDQUFDO1FBUXRDOztXQUVHO1FBQ0ssc0JBQWlCLEdBRXJCLElBQUksR0FBRyxFQUFpQyxDQUFDO1FBZTdDOztXQUVHO1FBQ0ssNkJBQXdCLEdBQWUsRUFBRSxDQUFDO1FBZ0IxQyxzQkFBaUIsR0FDZ0MsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUFDO1FBQzFELHFCQUFnQixHQUNpQyxHQUFHLEVBQUU7WUFDMUQsS0FBSyxNQUFNLE9BQU8sSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7Z0JBQzFDLElBQUksSUFBSSxDQUFDLHNCQUFzQjtvQkFDM0IsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7YUFDbEQ7UUFDTCxDQUFDLENBQUM7UUFZTSw4QkFBeUIsR0FBZSxFQUFFLENBQUM7UUFTNUMsV0FBTSxHQUFjLElBQUksQ0FBQztRQUVoQzs7O1dBR0c7UUFDSSxzQkFBaUIsR0FBaUIsRUFBRSxDQUFDO1FBcUN4QyxXQUFXO1FBQ1gsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDekIsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFFNUIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLO1lBQ1gsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLHdEQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztZQUVwQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7UUFFekMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUVwQixJQUFJLE1BQU0sRUFBRTtZQUNSLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1lBQzFCLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDekM7O1lBQ0csSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLHFFQUF3QixDQUNsRCxpQkFBaUIsRUFBRSwyQkFBMkI7UUFDOUMsSUFBSSxFQUFFLCtDQUErQztRQUNyRCxJQUFJLENBQUMsS0FBSyxFQUFFLHFCQUFxQjtRQUNqQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyx3Q0FBd0M7U0FDOUQsQ0FBQztRQUNGLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUE5SUQsSUFBSSxxQkFBcUI7UUFDckIsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUM7SUFDdkMsQ0FBQztJQUNELElBQUkscUJBQXFCLENBQUMsS0FBYztRQUNwQyxJQUFJLENBQUMsc0JBQXNCLEdBQUcsS0FBSyxDQUFDO0lBQ3hDLENBQUM7SUFrQkQsSUFBSSxpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDbkMsQ0FBQztJQU1NLDBCQUEwQixDQUFDLFFBQWtCO1FBQ2hELElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVNLDRCQUE0QixDQUFDLFFBQWtCO1FBQ2xELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUQsSUFBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDWCxJQUFJLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNoRDtJQUNMLENBQUM7SUFFTSw0QkFBNEI7UUFDL0IsSUFBSSxDQUFDLHdCQUF3QixHQUFHLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBWU0sMEJBQTBCLENBQzdCLElBQXdEO1FBQ3hELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7SUFDbEMsQ0FBQztJQUVNLHlCQUF5QixDQUM1QixJQUF3RDtRQUN4RCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0lBQ2pDLENBQUM7SUFJRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUNELElBQUksVUFBVSxDQUFDLEtBQWE7UUFDeEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDN0IsQ0FBQztJQVNNLGFBQWEsQ0FBQyxPQUFtQjtRQUNwQyxJQUFJLE9BQU87WUFDUCxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRDs7O09BR0c7SUFDSSxvQkFBb0IsQ0FBQyxHQUFXO1FBQ25DLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDO1lBQ3BELENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDO1lBQzdCLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDZixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxtRUFBbUU7SUFDbkUsc0NBQXNDO0lBQy9CLGtCQUFrQixDQUFDLEdBQVc7UUFDakMsS0FBSyxNQUFNLE9BQU8sSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUMsSUFBSSxPQUFPLENBQUMsR0FBRyxLQUFLLEdBQUc7Z0JBQ25CLE9BQU8sT0FBTyxDQUFDO1NBQ3RCO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQWlDRDs7T0FFRztJQUNJLHFCQUFxQjtRQUN4QixJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7T0FFRztJQUNJLGVBQWU7UUFDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksa0JBQWtCLENBQUMsS0FBYTtRQUNuQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyx5RUFBaUIsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDOUYsQ0FBQztJQUVEOzs7T0FHRztJQUNJLHFCQUFxQixDQUFDLEdBQVc7UUFDcEMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLDRFQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVEOzs7T0FHRztJQUNJLGVBQWUsQ0FBQyxLQUFjO1FBQ2pDLE1BQU0sS0FBSyxHQUFHLElBQUkscUZBQWdCLENBQzlCLGNBQWMsRUFDZCxJQUFJLCtEQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEMsSUFBSSxLQUFLO1lBQ0wsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFDMUIsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSyxTQUFTLENBQ2IsU0FBaUIsQ0FBQztRQUVsQixNQUFNLE1BQU0sR0FBRyxJQUFJLG9GQUFlLENBQzlCLGVBQWUsRUFDZixDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFDWixJQUFJLCtEQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDcEIsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN0QixNQUFNLENBQUMsZ0JBQWdCLEdBQUcsR0FBRyxDQUFDO1FBQzlCLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7UUFDN0IsTUFBTSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztRQUNuQyxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztRQUNoQixNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksK0RBQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO1FBRXZELElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1FBQzFCLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxjQUFjLENBQ2pCLE9BQW1CLEVBQ25CLFNBQWlCLENBQUM7UUFFbEIsTUFBTSxNQUFNLEdBQUcsSUFBSSxvRkFBZSxDQUM5QixjQUFjLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQ3ZDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUN2QyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3RCLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxHQUFHLENBQUM7UUFDOUIsTUFBTSxDQUFDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQztRQUM3QixNQUFNLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSwrREFBTyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUM7UUFDekQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQztRQUV2RCxPQUFPLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTdCLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ3JDLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxZQUFZLENBQ2YsSUFBWSxFQUNaLFdBQW9CO1FBRXBCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2QsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLG9EQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssRUFDbEMsV0FBVyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxDQUFDO1NBQzNEO0lBQ0wsQ0FBQztJQUVEOzs7T0FHRztJQUNJLGFBQWEsQ0FBQyxLQUFvQjtRQUNyQyxJQUFJLEtBQUssRUFBRTtZQUNQLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNwQyxNQUFNLGVBQWUsR0FBRyxJQUFJLDREQUFlLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUN6RCxJQUFJLENBQUMsb0JBQW9CLENBQUMsZUFBZSxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLGVBQWUsQ0FBQyxDQUFDO2FBQ3REO2lCQUFNO2dCQUNILE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsa0NBQWtDLENBQUMsQ0FBQzthQUM1RTtTQUNKO2FBQU07WUFDSCxLQUFLLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO2dCQUMvQixJQUFJLGdFQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQ25CLE1BQU0sZUFBZSxHQUFHLElBQUksNERBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ3JELElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztvQkFDM0MsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUM7aUJBQ2xEO2FBQ0o7U0FDSjtJQUNMLENBQUM7SUFFRDs7O09BR0c7SUFDSSxtQkFBbUIsQ0FBQyxLQUFtQjtRQUMxQyxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVEOzs7Ozs7Ozs7OztPQVdHO0lBQ0ksbUJBQW1CLENBQ3RCLE1BQVcsRUFDWCxJQUFZLEVBQ1osUUFBZ0IsRUFDaEIsUUFBZ0IsRUFDaEIsSUFBUyxFQUNULEVBQU8sRUFDUCxRQUE2QixFQUM3QixjQUErQixFQUMvQixVQUFtQjtRQUVuQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUM3QixNQUFNLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFDdEIsQ0FBQyxFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDLENBQUMsRUFDdkQsUUFBUSxFQUFFLGNBQWMsRUFBRSxVQUFVLENBQ3ZDLENBQUM7UUFDRixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFDbEUsS0FBSyxDQUFDLENBQUM7SUFDZixDQUFDO0lBRUQ7Ozs7Ozs7OztPQVNHO0lBQ0ksZUFBZSxDQUNsQixNQUFXLEVBQ1gsSUFBWSxFQUNaLFFBQWdCLEVBQ2hCLFNBQStCLEVBQy9CLFFBQTZCLEVBQzdCLGNBQStCLEVBQy9CLFVBQW1CO1FBRW5CLG1DQUFtQztRQUNuQyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQztZQUNwQixNQUFNLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBRXBDLGdCQUFnQjtRQUNoQixNQUFNLFFBQVEsR0FBRyxzRUFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUQsSUFBSSxRQUFRLEtBQUssSUFBSTtZQUNqQixNQUFNLEtBQUssQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO1FBRTlELE1BQU0sU0FBUyxHQUFHLElBQUksc0RBQVMsQ0FDM0IsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsU0FBUyxFQUNqQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDeEIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUU3QixJQUFJLGNBQWMsRUFBRTtZQUNoQixJQUFJLFVBQVU7Z0JBQ1YsY0FBYyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM3QyxTQUFTLENBQUMsaUJBQWlCLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDL0M7UUFFRCxPQUFPLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFTSxlQUFlLENBQUMsT0FBK0I7UUFDbEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLCtEQUFpQixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVELG1FQUFtRTtJQUNuRTs7OztPQUlHO0lBQ0ksV0FBVyxDQUNkLE9BQWUsRUFDZixhQUE2QjtRQUU3QixPQUFPLHdGQUF1QixDQUFDLE9BQU8sRUFBRSxhQUFhLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksU0FBUyxDQUNaLE9BQWUsRUFDZixhQUE2QjtRQUU3QixPQUFPLHNGQUFxQixDQUFDLE9BQU8sRUFBRSxhQUFhLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFRCw4QkFBOEI7SUFDdkIsV0FBVztRQUNkLEtBQUssTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLHdCQUF3QixFQUFFO1lBQzNDLENBQUMsRUFBRSxDQUFDO1NBQ1A7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssZUFBZTtRQUNuQixJQUFJLENBQUMsS0FBSyxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FDbkMsQ0FBQyxTQUFnQixFQUFFLFVBQXNCLEVBQUUsRUFBRTtZQUN6QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ2xELENBQUMsQ0FDSixDQUFDO1FBQ0YsU0FBUztRQUNULElBQUksQ0FBQyxLQUFLLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUNuQyxHQUFHLEVBQUU7WUFDRCxLQUFLLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyx5QkFBeUI7Z0JBQzFDLENBQUMsRUFBRSxDQUFDO1FBQ1osQ0FBQyxDQUNKO1FBQ0QsNkJBQTZCO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsR0FBRyxDQUNsQyxDQUFDLFNBQWdCLEVBQUUsVUFBc0IsRUFBRSxFQUFFO1lBQ3pDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUNKLENBQUM7SUFDTixDQUFDO0lBRU8sWUFBWTtRQUNoQixJQUFJLENBQUMsTUFBTSxDQUFDLGtCQUFrQixFQUFFLENBQUMsUUFBUSxHQUFHLEdBQUcsRUFBRTtZQUM3QyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3pCLENBQUM7SUFDTCxDQUFDO0lBRU8sb0JBQW9CLENBQUMsZUFBb0I7UUFDN0MsZUFBZSxDQUFDLDRCQUE0QixHQUFHLElBQUksQ0FBQztRQUNwRCxlQUFlLENBQUMsZ0JBQWdCLEdBQUcseUVBQTRCLENBQUM7SUFDcEUsQ0FBQztJQUVELGtCQUFrQjtJQUNWLG9CQUFvQjtRQUN4QixZQUFZO1FBQ1oscUZBQTRCLENBQUMsc0ZBQXVCLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUM3RCxPQUFPLElBQUksaUZBQWtCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVPLGlCQUFpQjtRQUNyQixJQUFJLDRFQUFXLElBQUksa0dBQWlDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxLQUFLLFlBQVksRUFBRTtZQUNoRiwyRkFBMEIsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDbkQ7SUFDTCxDQUFDO0lBQUEsQ0FBQztJQUVNLHNCQUFzQjtRQUMxQixJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO1FBQ25ELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxxQkFBcUIsR0FBRywrRUFBa0MsQ0FBQztRQUNuRixJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxDQUFDLGFBQWEsR0FBSSxJQUFJLENBQUMsQ0FBQyx5R0FBeUc7UUFDckssSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxXQUFXLEdBQUksRUFBRSxDQUFDLENBQUMsNENBQTRDO1FBQ3BHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsS0FBSyxHQUFJLEdBQUcsQ0FBQyxDQUFDLGtGQUFrRjtJQUN6SSxDQUFDOztBQWxkYSxpQkFBUyxHQUFHLEVBQUUsQ0FBQztBQXFkakMsaUVBQWUsT0FBTyxFQUFDOzs7Ozs7O1VDamZ2QjtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOztVQUVBO1VBQ0E7Ozs7O1dDekJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsK0JBQStCLHdDQUF3QztXQUN2RTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGlCQUFpQixxQkFBcUI7V0FDdEM7V0FDQTtXQUNBLGtCQUFrQixxQkFBcUI7V0FDdkM7V0FDQTtXQUNBLEtBQUs7V0FDTDtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7Ozs7O1dDM0JBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxpQ0FBaUMsV0FBVztXQUM1QztXQUNBOzs7OztXQ1BBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EseUNBQXlDLHdDQUF3QztXQUNqRjtXQUNBO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSxHQUFHO1dBQ0g7V0FDQTtXQUNBLENBQUM7Ozs7O1dDUEQ7Ozs7O1dDQUE7V0FDQTtXQUNBO1dBQ0EsdURBQXVELGlCQUFpQjtXQUN4RTtXQUNBLGdEQUFnRCxhQUFhO1dBQzdEOzs7OztXQ05BOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxNQUFNLHFCQUFxQjtXQUMzQjtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQTs7Ozs7VUVoREE7VUFDQTtVQUNBO1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly92M2QtY29yZS8uL25vZGVfbW9kdWxlcy9iYWJ5bG9uLW10b29uLW1hdGVyaWFsL2Rpc3QvaW5kZXgubW9kdWxlLmpzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2hlbHBlci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL2Vycm9ycy50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL2h1bWFub2lkLWJvbmUudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9tYXRlcmlhbC12YWx1ZS1iaW5kaW5nLW1lcmdlci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3NlY29uZGFyeS1hbmltYXRpb24vY29sbGlkZXItZ3JvdXAudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9zZWNvbmRhcnktYW5pbWF0aW9uL2NvbGxpZGVyLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvc2Vjb25kYXJ5LWFuaW1hdGlvbi9zcHJpbmctYm9uZS1jb250cm9sbGVyLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvc2Vjb25kYXJ5LWFuaW1hdGlvbi92cm0tc3ByaW5nLWJvbmUtbG9naWMudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy9zZWNvbmRhcnktYW5pbWF0aW9uL3ZybS1zcHJpbmctYm9uZS50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3ZybS1leHRlbnNpb24udHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy92cm0tZmlsZS1sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvaW1wb3J0ZXIvYmFieWxvbi12cm0tbG9hZGVyL3NyYy92cm0taW50ZXJmYWNlcy50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjL3ZybS1tYW5hZ2VyLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmMvdnJtLW1hdGVyaWFsLWdlbmVyYXRvci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9pbmRleC10ZXN0LnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL3NjZW5lL29wdGltaXplci50cyIsIndlYnBhY2s6Ly92M2QtY29yZS8uL3NyYy9zY2VuZS9za3lib3gudHMiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvLi9zcmMvdXRpbGl0aWVzL3R5cGVzLnRzIiwid2VicGFjazovL3YzZC1jb3JlLy4vc3JjL3YzZC1jb3JlLnRzIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly92M2QtY29yZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vdjNkLWNvcmUvd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL3YzZC1jb3JlL3dlYnBhY2svYWZ0ZXItc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ2M2QtY29yZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ2M2QtY29yZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiFmdW5jdGlvbihlLGkpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWkocmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2RlY29yYXRvcnNcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NaXNjL3NtYXJ0QXJyYXlcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgudmVjdG9yXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC5jb2xvclwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL0J1ZmZlcnMvYnVmZmVyXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb25cIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvcHVzaE1hdGVyaWFsXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsSGVscGVyXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9jb25zdGFudHNcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0RmFsbGJhY2tzXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbC5kZXRhaWxNYXBDb25maWd1cmF0aW9uXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsUGx1Z2luRXZlbnRcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2lJbnNwZWN0YWJsZVwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lQ29tcG9uZW50XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsRGVmaW5lc1wiKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9kZWNvcmF0b3JzXCIsXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9zbWFydEFycmF5XCIsXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLnZlY3RvclwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGguY29sb3JcIixcIkBiYWJ5bG9uanMvY29yZS9CdWZmZXJzL2J1ZmZlclwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL3B1c2hNYXRlcmlhbFwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbEhlbHBlclwiLFwiQGJhYnlsb25qcy9jb3JlL0VuZ2luZXMvY29uc3RhbnRzXCIsXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdEZhbGxiYWNrc1wiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RcIixcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwuZGV0YWlsTWFwQ29uZmlndXJhdGlvblwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFBsdWdpbkV2ZW50XCIsXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9pSW5zcGVjdGFibGVcIixcIkBiYWJ5bG9uanMvY29yZS9zY2VuZUNvbXBvbmVudFwiLFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbERlZmluZXNcIl0saSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0c1tcImJhYnlsb24tbXRvb24tbWF0ZXJpYWxcIl09aShyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01pc2MvZGVjb3JhdG9yc1wiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01pc2Mvc21hcnRBcnJheVwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL3NjZW5lXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3JcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvQnVmZmVycy9idWZmZXJcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvblwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9wdXNoTWF0ZXJpYWxcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxIZWxwZXJcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2NvbnN0YW50c1wiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RGYWxsYmFja3NcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvZWZmZWN0XCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsLmRldGFpbE1hcENvbmZpZ3VyYXRpb25cIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxQbHVnaW5FdmVudFwiKSxyZXF1aXJlKFwiQGJhYnlsb25qcy9jb3JlL01pc2MvaUluc3BlY3RhYmxlXCIpLHJlcXVpcmUoXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVDb21wb25lbnRcIikscmVxdWlyZShcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxEZWZpbmVzXCIpKTplW1wiYmFieWxvbi1tdG9vbi1tYXRlcmlhbFwiXT1pKGVbXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9kZWNvcmF0b3JzXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9zbWFydEFycmF5XCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvc2NlbmVcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLnZlY3RvclwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGguY29sb3JcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9CdWZmZXJzL2J1ZmZlclwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL3B1c2hNYXRlcmlhbFwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbEhlbHBlclwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL0VuZ2luZXMvY29uc3RhbnRzXCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdEZhbGxiYWNrc1wiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3RcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwuZGV0YWlsTWFwQ29uZmlndXJhdGlvblwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbFBsdWdpbkV2ZW50XCJdLGVbXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9pSW5zcGVjdGFibGVcIl0sZVtcIkBiYWJ5bG9uanMvY29yZS9zY2VuZUNvbXBvbmVudFwiXSxlW1wiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbERlZmluZXNcIl0pfShzZWxmLCgoZSxpLG4sdCxvLGEscixzLGwsZCxoLGYsdSxtLGMscCxnLF8pPT4oKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgQT17OTA4OmU9PntlLmV4cG9ydHM9YX0sNTU2OmU9PntlLmV4cG9ydHM9aH0sMjcyOmU9PntlLmV4cG9ydHM9dX0sNTU6ZT0+e2UuZXhwb3J0cz1mfSw2Nzc6ZT0+e2UuZXhwb3J0cz1yfSw2NjplPT57ZS5leHBvcnRzPXN9LDgyNDplPT57ZS5leHBvcnRzPW19LDcxMzplPT57ZS5leHBvcnRzPV99LDIyMTplPT57ZS5leHBvcnRzPWR9LDYyODplPT57ZS5leHBvcnRzPWN9LDcyMTplPT57ZS5leHBvcnRzPWx9LDU0ODplPT57ZS5leHBvcnRzPW99LDY5NDplPT57ZS5leHBvcnRzPXR9LDM4ODppPT57aS5leHBvcnRzPWV9LDgxMjplPT57ZS5leHBvcnRzPXB9LDQ3NDplPT57ZS5leHBvcnRzPWl9LDUzODplPT57ZS5leHBvcnRzPW59LDY2NzplPT57ZS5leHBvcnRzPWd9fSxJPXt9O2Z1bmN0aW9uIHYoZSl7dmFyIGk9SVtlXTtpZih2b2lkIDAhPT1pKXJldHVybiBpLmV4cG9ydHM7dmFyIG49SVtlXT17ZXhwb3J0czp7fX07cmV0dXJuIEFbZV0obixuLmV4cG9ydHMsdiksbi5leHBvcnRzfXYuZD0oZSxpKT0+e2Zvcih2YXIgbiBpbiBpKXYubyhpLG4pJiYhdi5vKGUsbikmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2VudW1lcmFibGU6ITAsZ2V0Omlbbl19KX0sdi5vPShlLGkpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSx2LnI9ZT0+e1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9O3ZhciBNPXt9O3JldHVybigoKT0+e2Z1bmN0aW9uIGUoZSxpLG4sdCl7dmFyIG8sYT1hcmd1bWVudHMubGVuZ3RoLHI9YTwzP2k6bnVsbD09PXQ/dD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksbik6dDtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlyPVJlZmxlY3QuZGVjb3JhdGUoZSxpLG4sdCk7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTtzPj0wO3MtLSkobz1lW3NdKSYmKHI9KGE8Mz9vKHIpOmE+Mz9vKGksbixyKTpvKGksbikpfHxyKTtyZXR1cm4gYT4zJiZyJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxuLHIpLHJ9di5yKE0pLHYuZChNLHtDdWxsTW9kZTooKT0+TCxEZWJ1Z01vZGU6KCk9PlQsTVRvb25NYXRlcmlhbDooKT0+eCxPdXRsaW5lQ29sb3JNb2RlOigpPT5OLE91dGxpbmVXaWR0aE1vZGU6KCk9PkR9KSxPYmplY3QuY3JlYXRlLE9iamVjdC5jcmVhdGU7dmFyIGk9digzODgpLG49dig0NzQpLHQ9dig1MzgpLG89dig2OTQpLGE9dig1NDgpLHI9dig5MDgpLHM9dig2NzcpLGw9dig2NiksZD12KDcyMSksaD12KDIyMSksZj12KDU1NiksdT12KDU1KSxtPXYoMjcyKSxjPXYoODI0KSxwPXYoNjI4KSxnPXYoODEyKSxfPXYoNjY3KTtjbGFzcyBBe2NvbnN0cnVjdG9yKGUsaSl7dGhpcy5zY2VuZT1lLHRoaXMubWF0ZXJpYWw9aSx0aGlzLm5hbWU9YE1Ub29uT3V0bGluZV8ke2kubmFtZX1fJHtBLnJlbmRlcmVySWQrK31gLHRoaXMuc2NlbmUuX2FkZENvbXBvbmVudCh0aGlzKSx0aGlzLl9lbmdpbmU9dGhpcy5zY2VuZS5nZXRFbmdpbmUoKSx0aGlzLl9wYXNzSWRGb3JEcmF3V3JhcHBlcj1bXTtmb3IobGV0IGU9MDtlPDE7KytlKXRoaXMuX3Bhc3NJZEZvckRyYXdXcmFwcGVyW2VdPXRoaXMuX2VuZ2luZS5jcmVhdGVSZW5kZXJQYXNzSWQoYE91dGxpbmUgUmVuZGVyZXIgKCR7ZX0pYCl9cmVnaXN0ZXIoKXt0aGlzLnNjZW5lLl9hZnRlclJlbmRlcmluZ01lc2hTdGFnZS5yZWdpc3RlclN0ZXAoXy5TY2VuZUNvbXBvbmVudENvbnN0YW50cy5TVEVQX0FGVEVSUkVOREVSSU5HTUVTSF9PVVRMSU5FLHRoaXMsdGhpcy5fYWZ0ZXJSZW5kZXJpbmdNZXNoKX1yZWJ1aWxkKCl7fWRpc3Bvc2UoKXtmb3IobGV0IGU9MDtlPHRoaXMuX3Bhc3NJZEZvckRyYXdXcmFwcGVyLmxlbmd0aDsrK2UpdGhpcy5fZW5naW5lLnJlbGVhc2VSZW5kZXJQYXNzSWQodGhpcy5fcGFzc0lkRm9yRHJhd1dyYXBwZXJbZV0pfXJlbmRlcihlLGksbil7bj1udWxsIT1uP246dGhpcy5fcGFzc0lkRm9yRHJhd1dyYXBwZXJbMF07Y29uc3QgdD10aGlzLnNjZW5lLG89ZS5lZmZlY3Q7aWYoIW98fCFvLmlzUmVhZHkoKXx8IXRoaXMuc2NlbmUuYWN0aXZlQ2FtZXJhKXJldHVybjtjb25zdCBhPWUuX2dldERyYXdXcmFwcGVyKG4sITApO2lmKCFhKXJldHVybjtpZihhLnNldEVmZmVjdChvKSwhYS5lZmZlY3R8fCFhLmVmZmVjdC5pc1JlYWR5KCkpcmV0dXJuO2NvbnN0IHI9ZS5nZXRNZXNoKCkscz1yLl9pbnRlcm5hbEFic3RyYWN0TWVzaERhdGFJbmZvLl9hY3RBc1JlZ3VsYXJNZXNoP3I6bnVsbCxsPWUuZ2V0UmVuZGVyaW5nTWVzaCgpLGQ9c3x8bDt0LmFjdGl2ZUNhbWVyYSYmKHRoaXMubWF0ZXJpYWwuYXBwbHlPdXRsaW5lQ3VsbE1vZGUoKSx0aGlzLm1hdGVyaWFsLmVuYWJsZU91dGxpbmVSZW5kZXIoKSx0aGlzLl9lbmdpbmUuZW5hYmxlRWZmZWN0KGEpLHRoaXMuaXNIYXJkd2FyZUluc3RhbmNlZFJlbmRlcmluZyhlLGkpfHxsLl9iaW5kKGUsbyx0aGlzLm1hdGVyaWFsLmZpbGxNb2RlKSx0aGlzLm1hdGVyaWFsLl9wcmVCaW5kKG8pLGwuX3Byb2Nlc3NSZW5kZXJpbmcoZCxlLG8sdGhpcy5tYXRlcmlhbC5maWxsTW9kZSxpLHRoaXMuaXNIYXJkd2FyZUluc3RhbmNlZFJlbmRlcmluZyhlLGkpLCgoaSxuLHQpPT57dCYmdC5iaW5kRm9yU3ViTWVzaChuLGQsZSl9KSx0aGlzLm1hdGVyaWFsKSx0aGlzLm1hdGVyaWFsLnJlc3RvcmVPdXRsaW5lQ3VsbE1vZGUoKSx0aGlzLm1hdGVyaWFsLmRpc2FhYmxlT3V0bGluZVJlbmRlcigpKX1fYWZ0ZXJSZW5kZXJpbmdNZXNoKGUsaSxuKXtpZighdGhpcy53aWxsUmVuZGVyKGkpKXJldHVybjtjb25zdCB0PXRoaXMuX2VuZ2luZS5jdWxsQmFja0ZhY2VzO3RoaXMuX2VuZ2luZS5jdWxsQmFja0ZhY2VzPSExLHRoaXMucmVuZGVyKGksbix0aGlzLl9wYXNzSWRGb3JEcmF3V3JhcHBlclswXSksdGhpcy5fZW5naW5lLmN1bGxCYWNrRmFjZXM9dH1pc0hhcmR3YXJlSW5zdGFuY2VkUmVuZGVyaW5nKGUsaSl7cmV0dXJuISF0aGlzLl9lbmdpbmUuZ2V0Q2FwcygpLmluc3RhbmNlZEFycmF5cyYmbnVsbCE9PWkudmlzaWJsZUluc3RhbmNlc1tlLl9pZF0mJnZvaWQgMCE9PWkudmlzaWJsZUluc3RhbmNlc1tlLl9pZF0mJmUuZ2V0UmVuZGVyaW5nTWVzaCgpLmhhc1RoaW5JbnN0YW5jZXN9d2lsbFJlbmRlcihlKXtjb25zdCBpPWUuZ2V0TWF0ZXJpYWwoKTtyZXR1cm4hKCFpfHxcIk1Ub29uTWF0ZXJpYWxcIiE9PWkuZ2V0Q2xhc3NOYW1lKCl8fGkuZ2V0T3V0bGluZVJlbmRlcmVyTmFtZSgpIT09dGhpcy5uYW1lKX19QS5yZW5kZXJlcklkPTA7dmFyIEk9dig3MTMpO2NsYXNzIEUgZXh0ZW5kcyBJLk1hdGVyaWFsRGVmaW5lc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLkNVU1RPTVVTRVJMSUdIVElORz0hMCx0aGlzLk1UT09OX09VVExJTkVfV0lEVEhfV09STEQ9ITEsdGhpcy5NVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTj0hMSx0aGlzLk1UT09OX09VVExJTkVfQ09MT1JfRklYRUQ9ITEsdGhpcy5NVE9PTl9PVVRMSU5FX0NPTE9SX01JWEVEPSExLHRoaXMuTVRPT05fREVCVUdfTk9STUFMPSExLHRoaXMuTVRPT05fREVCVUdfTElUU0hBREVSUkFURT0hMSx0aGlzLlNIQURFPSExLHRoaXMuU0hBREVESVJFQ1RVVj0wLHRoaXMuUkVDRUlWRV9TSEFET1c9ITEsdGhpcy5SRUNFSVZFX1NIQURPV0RJUkVDVFVWPTAsdGhpcy5TSEFESU5HX0dSQURFPSExLHRoaXMuU0hBRElOR19HUkFERURJUkVDVFVWPTAsdGhpcy5SSU09ITEsdGhpcy5SSU1ESVJFQ1RVVj0wLHRoaXMuTUFUQ0FQPSExLHRoaXMuTUFUQ0FQRElSRUNUVVY9MCx0aGlzLk9VVExJTkVfV0lEVEg9ITEsdGhpcy5PVVRMSU5FX1dJRFRIRElSRUNUVVY9MCx0aGlzLlVWX0FOSU1BVElPTl9NQVNLPSExLHRoaXMuVVZfQU5JTUFUSU9OX01BU0tESVJFQ1RVVj0wLHRoaXMuTUFJTlVWMT0hMSx0aGlzLk1BSU5VVjI9ITEsdGhpcy5NQUlOVVYzPSExLHRoaXMuTUFJTlVWND0hMSx0aGlzLk1BSU5VVjU9ITEsdGhpcy5NQUlOVVY2PSExLHRoaXMuRElGRlVTRT0hMSx0aGlzLkRJRkZVU0VESVJFQ1RVVj0wLHRoaXMuQkFLRURfVkVSVEVYX0FOSU1BVElPTl9URVhUVVJFPSExLHRoaXMuRU1JU1NJVkU9ITEsdGhpcy5FTUlTU0lWRURJUkVDVFVWPTAsdGhpcy5CVU1QPSExLHRoaXMuQlVNUERJUkVDVFVWPTAsdGhpcy5QQVJBTExBWD0hMSx0aGlzLlBBUkFMTEFYT0NDTFVTSU9OPSExLHRoaXMuQ0xJUFBMQU5FPSExLHRoaXMuQ0xJUFBMQU5FMj0hMSx0aGlzLkNMSVBQTEFORTM9ITEsdGhpcy5DTElQUExBTkU0PSExLHRoaXMuQ0xJUFBMQU5FNT0hMSx0aGlzLkNMSVBQTEFORTY9ITEsdGhpcy5BTFBIQVRFU1Q9ITEsdGhpcy5ERVBUSFBSRVBBU1M9ITEsdGhpcy5BTFBIQUZST01ESUZGVVNFPSExLHRoaXMuUE9JTlRTSVpFPSExLHRoaXMuRk9HPSExLHRoaXMuTk9STUFMPSExLHRoaXMuVVYxPSExLHRoaXMuVVYyPSExLHRoaXMuVVYzPSExLHRoaXMuVVY0PSExLHRoaXMuVVY1PSExLHRoaXMuVVY2PSExLHRoaXMuVkVSVEVYQ09MT1I9ITEsdGhpcy5WRVJURVhBTFBIQT0hMSx0aGlzLk5VTV9CT05FX0lORkxVRU5DRVJTPTAsdGhpcy5Cb25lc1Blck1lc2g9MCx0aGlzLkJPTkVURVhUVVJFPSExLHRoaXMuQk9ORVNfVkVMT0NJVFlfRU5BQkxFRD0hMSx0aGlzLklOU1RBTkNFUz0hMSx0aGlzLlRISU5fSU5TVEFOQ0VTPSExLHRoaXMuT0JKRUNUU1BBQ0VfTk9STUFMTUFQPSExLHRoaXMuTE9HQVJJVEhNSUNERVBUSD0hMSx0aGlzLlRXT1NJREVETElHSFRJTkc9ITEsdGhpcy5TSEFET1dGTE9BVD0hMSx0aGlzLk1PUlBIVEFSR0VUUz0hMSx0aGlzLk1PUlBIVEFSR0VUU19OT1JNQUw9ITEsdGhpcy5NT1JQSFRBUkdFVFNfVEFOR0VOVD0hMSx0aGlzLk1PUlBIVEFSR0VUU19VVj0hMSx0aGlzLk5VTV9NT1JQSF9JTkZMVUVOQ0VSUz0wLHRoaXMuTU9SUEhUQVJHRVRTX1RFWFRVUkU9ITEsdGhpcy5OT05VTklGT1JNU0NBTElORz0hMSx0aGlzLlBSRU1VTFRJUExZQUxQSEE9ITEsdGhpcy5BTFBIQVRFU1RfQUZURVJBTExBTFBIQUNPTVBVVEFUSU9OUz0hMSx0aGlzLkFMUEhBQkxFTkQ9ITAsdGhpcy5QUkVQQVNTPSExLHRoaXMuUFJFUEFTU19JUlJBRElBTkNFPSExLHRoaXMuUFJFUEFTU19JUlJBRElBTkNFX0lOREVYPS0xLHRoaXMuUFJFUEFTU19BTEJFRE9fU1FSVD0hMSx0aGlzLlBSRVBBU1NfQUxCRURPX1NRUlRfSU5ERVg9LTEsdGhpcy5QUkVQQVNTX0RFUFRIPSExLHRoaXMuUFJFUEFTU19ERVBUSF9JTkRFWD0tMSx0aGlzLlBSRVBBU1NfTk9STUFMPSExLHRoaXMuUFJFUEFTU19OT1JNQUxfSU5ERVg9LTEsdGhpcy5QUkVQQVNTX1BPU0lUSU9OPSExLHRoaXMuUFJFUEFTU19QT1NJVElPTl9JTkRFWD0tMSx0aGlzLlBSRVBBU1NfVkVMT0NJVFk9ITEsdGhpcy5QUkVQQVNTX1ZFTE9DSVRZX0lOREVYPS0xLHRoaXMuUFJFUEFTU19SRUZMRUNUSVZJVFk9ITEsdGhpcy5QUkVQQVNTX1JFRkxFQ1RJVklUWV9JTkRFWD0tMSx0aGlzLlNDRU5FX01SVF9DT1VOVD0wLHRoaXMuSU1BR0VQUk9DRVNTSU5HPSExLHRoaXMuVklHTkVUVEU9ITEsdGhpcy5WSUdORVRURUJMRU5ETU9ERU1VTFRJUExZPSExLHRoaXMuVklHTkVUVEVCTEVORE1PREVPUEFRVUU9ITEsdGhpcy5UT05FTUFQUElORz0hMSx0aGlzLlRPTkVNQVBQSU5HX0FDRVM9ITEsdGhpcy5DT05UUkFTVD0hMSx0aGlzLkNPTE9SQ1VSVkVTPSExLHRoaXMuQ09MT1JHUkFESU5HPSExLHRoaXMuQ09MT1JHUkFESU5HM0Q9ITEsdGhpcy5TQU1QTEVSM0RHUkVFTkRFUFRIPSExLHRoaXMuU0FNUExFUjNEQkdSTUFQPSExLHRoaXMuSU1BR0VQUk9DRVNTSU5HUE9TVFBST0NFU1M9ITEsdGhpcy5TS0lQRklOQUxDT0xPUkNMQU1QPSExLHRoaXMuTVVMVElWSUVXPSExLHRoaXMuT1JERVJfSU5ERVBFTkRFTlRfVFJBTlNQQVJFTkNZPSExLHRoaXMuT1JERVJfSU5ERVBFTkRFTlRfVFJBTlNQQVJFTkNZXzE2QklUUz0hMSx0aGlzLklTX1JFRkxFQ1RJT05fTElORUFSPSExLHRoaXMuSVNfUkVGUkFDVElPTl9MSU5FQVI9ITEsdGhpcy5FWFBPU1VSRT0hMSx0aGlzLkZMSVBfVT0hMSx0aGlzLkZMSVBfVj0hMSx0aGlzLnJlYnVpbGQoKX1zZXRSZWZsZWN0aW9uTW9kZShlKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1hdGVyaWFsIGNhbm5vdCB1c2UgYHNldFJlZmxlY3Rpb25Nb2RlYFwiKX19Y29uc3QgUz17ZWZmZWN0Om51bGwsc3ViTWVzaDpudWxsfTt2YXIgVCxOLEQsTDshZnVuY3Rpb24oZSl7ZVtlLk5vbmU9MF09XCJOb25lXCIsZVtlLk5vcm1hbD0xXT1cIk5vcm1hbFwiLGVbZS5MaXRTaGFkZVJhdGU9Ml09XCJMaXRTaGFkZVJhdGVcIn0oVHx8KFQ9e30pKSxmdW5jdGlvbihlKXtlW2UuRml4ZWRDb2xvcj0wXT1cIkZpeGVkQ29sb3JcIixlW2UuTWl4ZWRMaWdodGluZz0xXT1cIk1peGVkTGlnaHRpbmdcIn0oTnx8KE49e30pKSxmdW5jdGlvbihlKXtlW2UuTm9uZT0wXT1cIk5vbmVcIixlW2UuV29ybGRDb3JyZGluYXRlcz0xXT1cIldvcmxkQ29ycmRpbmF0ZXNcIixlW2UuU2NyZWVuQ29vcmRpbmF0ZXM9Ml09XCJTY3JlZW5Db29yZGluYXRlc1wifShEfHwoRD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5PZmY9MF09XCJPZmZcIixlW2UuRnJvbnQ9MV09XCJGcm9udFwiLGVbZS5CYWNrPTJdPVwiQmFja1wifShMfHwoTD17fSkpO2NsYXNzIHggZXh0ZW5kcyBkLlB1c2hNYXRlcmlhbHtjb25zdHJ1Y3RvcihlLGkpe3N1cGVyKGUsaSksdGhpcy5fZGlmZnVzZVRleHR1cmU9bnVsbCx0aGlzLmRpZmZ1c2VUZXh0dXJlPW51bGwsdGhpcy5fZW1pc3NpdmVUZXh0dXJlPW51bGwsdGhpcy5lbWlzc2l2ZVRleHR1cmU9bnVsbCx0aGlzLl9idW1wVGV4dHVyZT1udWxsLHRoaXMuYnVtcFRleHR1cmU9bnVsbCx0aGlzLl9zaGFkZVRleHR1cmU9bnVsbCx0aGlzLnNoYWRlVGV4dHVyZT1udWxsLHRoaXMuX3JlY2VpdmVTaGFkb3dUZXh0dXJlPW51bGwsdGhpcy5yZWNlaXZlU2hhZG93VGV4dHVyZT1udWxsLHRoaXMuX3NoYWRpbmdHcmFkZVRleHR1cmU9bnVsbCx0aGlzLnNoYWRpbmdHcmFkZVRleHR1cmU9bnVsbCx0aGlzLl9yaW1UZXh0dXJlPW51bGwsdGhpcy5yaW1UZXh0dXJlPW51bGwsdGhpcy5fbWF0Q2FwVGV4dHVyZT1udWxsLHRoaXMubWF0Q2FwVGV4dHVyZT1udWxsLHRoaXMuX291dGxpbmVXaWR0aFRleHR1cmU9bnVsbCx0aGlzLm91dGxpbmVXaWR0aFRleHR1cmU9bnVsbCx0aGlzLl91dkFuaW1hdGlvbk1hc2tUZXh0dXJlPW51bGwsdGhpcy51dkFuaW1hdGlvbk1hc2tUZXh0dXJlPW51bGwsdGhpcy5kaWZmdXNlQ29sb3I9bmV3IGEuQ29sb3IzKDEsMSwxKSx0aGlzLmFtYmllbnRDb2xvcj1uZXcgYS5Db2xvcjMoMCwwLDApLHRoaXMuZW1pc3NpdmVDb2xvcj1uZXcgYS5Db2xvcjMoMCwwLDApLHRoaXMuc2hhZGVDb2xvcj1uZXcgYS5Db2xvcjMoLjk3LC44MSwuODYpLHRoaXMucmltQ29sb3I9bmV3IGEuQ29sb3IzKDAsMCwwKSx0aGlzLm91dGxpbmVDb2xvcj1uZXcgYS5Db2xvcjMoMCwwLDApLHRoaXMudXNlRW1pc3NpdmVBc0lsbHVtaW5hdGlvbj0hMSx0aGlzLmxpbmtFbWlzc2l2ZVdpdGhEaWZmdXNlPSExLHRoaXMudXNlUmVmbGVjdGlvbk92ZXJBbHBoYT0hMSx0aGlzLl9kaXNhYmxlTGlnaHRpbmc9ITEsdGhpcy51c2VPYmplY3RTcGFjZU5vcm1hbE1hcD0hMSx0aGlzLnVzZVBhcmFsbGF4PSExLHRoaXMudXNlUGFyYWxsYXhPY2NsdXNpb249ITEsdGhpcy5zcGVjdWxhclN1cHBvcnRlZD0hMSx0aGlzLnVzZUxpZ2h0bWFwQXNTaGFkb3dtYXA9ITEsdGhpcy51c2VWZXJ0ZXhDb2xvcj0hMSx0aGlzLnVzZUJvbmVzPSEwLHRoaXMudXNlTW9ycGhUYXJnZXRzPSEwLHRoaXMudXNlVmVydGV4QWxwaGE9ITEsdGhpcy51c2VCYWtlZFZlcnRleEFuaW1hdGlvbj0hMSx0aGlzLmFscGhhQ3V0T2ZmPS40LHRoaXMuX3VzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlPSEwLHRoaXMuX21heFNpbXVsdGFuZW91c0xpZ2h0cz00LHRoaXMuX2ludmVydE5vcm1hbE1hcFg9ITAsdGhpcy5faW52ZXJ0Tm9ybWFsTWFwWT0hMCx0aGlzLl90d29TaWRlZExpZ2h0aW5nPSExLHRoaXMuX3JlbmRlclRhcmdldHM9bmV3IG4uU21hcnRBcnJheSgxNiksdGhpcy5fd29ybGRWaWV3UHJvamVjdGlvbk1hdHJpeD1vLk1hdHJpeC5aZXJvKCksdGhpcy5fZ2xvYmFsQW1iaWVudENvbG9yPW5ldyBhLkNvbG9yMygwLDAsMCksdGhpcy5fY2FjaGVIYXNSZW5kZXJUYXJnZXRUZXh0dXJlcz0hMSx0aGlzLl9idW1wU2NhbGU9MSx0aGlzLl9yZWNlaXZlU2hhZG93UmF0ZT0xLHRoaXMuX3NoYWRpbmdHcmFkZVJhdGU9MSx0aGlzLl9zaGFkZVNoaWZ0PTAsdGhpcy5fc2hhZGVUb29ueT0uOSx0aGlzLl9saWdodENvbG9yQXR0ZW51YXRpb249MCx0aGlzLl9pbmRpcmVjdExpZ2h0SW50ZW5zaXR5PS4xLHRoaXMuX3JpbUxpZ2h0aW5nTWl4PTAsdGhpcy5fcmltRnJlc25lbFBvd2VyPTEsdGhpcy5fcmltTGlmdD0wLHRoaXMuX291dGxpbmVXaWR0aD0uNSx0aGlzLl9vdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U9MSx0aGlzLl9vdXRsaW5lTGlnaHRpbmdNaXg9MSx0aGlzLl91dkFuaW1hdGlvblNjcm9sbFg9MCx0aGlzLl91dkFuaW1hdGlvblNjcm9sbFk9MCx0aGlzLl91dkFuaW1hdGlvblJvdGF0aW9uPTAsdGhpcy5fYWxwaGFUZXN0PSExLHRoaXMuX2FscGhhQmxlbmQ9ITEsdGhpcy5fZGVidWdNb2RlPVQuTm9uZSx0aGlzLmRlYnVnTW9kZT1ULk5vbmUsdGhpcy5fb3V0bGluZVdpZHRoTW9kZT1ELk5vbmUsdGhpcy5pc091dGxpbmU9MCx0aGlzLm91dGxpbmVDb2xvck1vZGU9Ti5NaXhlZExpZ2h0aW5nLHRoaXMuX2N1bGxNb2RlPUwuQmFjayx0aGlzLl9vdXRsaW5lQ3VsbE1vZGU9TC5Gcm9udCx0aGlzLm91dGxpbmVDdWxsTW9kZT1MLkZyb250LHRoaXMuc3RvcmVkQ3VsbE1vZGU9TC5CYWNrLHRoaXMuZmxpcFU9ITEsdGhpcy5mbGlwVj0hMSx0aGlzLmRldGFpbE1hcD1uZXcgYy5EZXRhaWxNYXBDb25maWd1cmF0aW9uKHRoaXMpLHRoaXMuX2F0dGFjaEltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24obnVsbCksdGhpcy5nZXRSZW5kZXJUYXJnZXRUZXh0dXJlcz0oKT0+KHRoaXMuX3JlbmRlclRhcmdldHMucmVzZXQoKSx0aGlzLl9ldmVudEluZm8ucmVuZGVyVGFyZ2V0cz10aGlzLl9yZW5kZXJUYXJnZXRzLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRGaWxsUmVuZGVyVGFyZ2V0VGV4dHVyZXModGhpcy5fZXZlbnRJbmZvKSx0aGlzLl9yZW5kZXJUYXJnZXRzKSxtLkVmZmVjdC5JbmNsdWRlc1NoYWRlcnNTdG9yZS5tdG9vblVib0RlY2xhcmF0aW9ufHwobS5FZmZlY3QuSW5jbHVkZXNTaGFkZXJzU3RvcmUubXRvb25VYm9EZWNsYXJhdGlvbj1cIi8vIGl0IHdpbGwgYmUgcmVwbGFjZWQgdG8gVWJvRGVjbGFyYXRpb24oV2ViR0wyKSBvciBWZXJ0ZXhEZWNsYXJhdGlvbihXZWJHTDEpLlxcblxcbmxheW91dChzdGQxNDAsIGNvbHVtbl9tYWpvcikgdW5pZm9ybTtcXG5cXG51bmlmb3JtIE1hdGVyaWFsXFxue1xcbiAgICAvLyBDb2xvciAmIFRleHR1cmVcXG4gICAgdmVjNCB2RGlmZnVzZUNvbG9yO1xcbiAgICB2ZWMyIHZEaWZmdXNlSW5mb3M7XFxuICAgIG1hdDQgZGlmZnVzZU1hdHJpeDtcXG4gICAgdmVjNCB2RW1pc3NpdmVDb2xvcjtcXG4gICAgdmVjMiB2RW1pc3NpdmVJbmZvcztcXG4gICAgbWF0NCBlbWlzc2l2ZU1hdHJpeDtcXG4gICAgdmVjMyB2QnVtcEluZm9zO1xcbiAgICBtYXQ0IGJ1bXBNYXRyaXg7XFxuICAgIHZlYzMgdlNoYWRlQ29sb3I7XFxuICAgIHZlYzIgdlNoYWRlSW5mb3M7XFxuICAgIG1hdDQgc2hhZGVNYXRyaXg7XFxuICAgIHZlYzIgdlJlY2VpdmVTaGFkb3dJbmZvcztcXG4gICAgbWF0NCByZWNlaXZlU2hhZG93TWF0cml4O1xcbiAgICB2ZWMyIHZTaGFkaW5nR3JhZGVJbmZvcztcXG4gICAgbWF0NCBzaGFkaW5nR3JhZGVNYXRyaXg7XFxuICAgIHZlYzMgdlJpbUNvbG9yO1xcbiAgICB2ZWMyIHZSaW1JbmZvcztcXG4gICAgbWF0NCByaW1NYXRyaXg7XFxuICAgIHZlYzIgdk1hdENhcEluZm9zO1xcbiAgICBtYXQ0IG1hdENhcE1hdHJpeDtcXG4gICAgdmVjNCB2T3V0bGluZUNvbG9yO1xcbiAgICB2ZWMyIHZPdXRsaW5lV2lkdGhJbmZvcztcXG4gICAgbWF0NCBvdXRsaW5lV2lkdGhNYXRyaXg7XFxuICAgIHZlYzIgdlV2QW5pbWF0aW9uTWFza0luZm9zO1xcbiAgICBtYXQ0IHV2QW5pbWF0aW9uTWFza01hdHJpeDtcXG5cXG4gICAgLy8gYmFieWxvbiBzcGVjaWZpY1xcbiAgICB2ZWMyIHZUYW5nZW50U3BhY2VQYXJhbXM7XFxuICAgIGZsb2F0IHBvaW50U2l6ZTtcXG5cXG4gICAgLy8gTVRvb24gcGFyYW1zXFxuICAgIGZsb2F0IHNoYWRpbmdHcmFkZVJhdGU7XFxuICAgIGZsb2F0IHJlY2VpdmVTaGFkb3dSYXRlO1xcbiAgICBmbG9hdCBzaGFkZVNoaWZ0O1xcbiAgICBmbG9hdCBzaGFkZVRvb255O1xcbiAgICBmbG9hdCBsaWdodENvbG9yQXR0ZW51YXRpb247XFxuICAgIGZsb2F0IGluZGlyZWN0TGlnaHRJbnRlbnNpdHk7XFxuICAgIGZsb2F0IHJpbUxpZ2h0aW5nTWl4O1xcbiAgICBmbG9hdCByaW1GcmVzbmVsUG93ZXI7XFxuICAgIGZsb2F0IHJpbUxpZnQ7XFxuICAgIGZsb2F0IG91dGxpbmVXaWR0aDtcXG4gICAgZmxvYXQgb3V0bGluZVNjYWxlZE1heERpc3RhbmNlO1xcbiAgICBmbG9hdCBvdXRsaW5lTGlnaHRpbmdNaXg7XFxuICAgIGZsb2F0IHV2QW5pbWF0aW9uU2Nyb2xsWDtcXG4gICAgZmxvYXQgdXZBbmltYXRpb25TY3JvbGxZO1xcbiAgICBmbG9hdCB1dkFuaW1hdGlvblJvdGF0aW9uO1xcblxcbiAgICB2ZWMzIHZFeWVVcDtcXG4gICAgZmxvYXQgYWxwaGFDdXRPZmY7XFxuICAgIHZlYzMgdkFtYmllbnRDb2xvcjtcXG4gICAgZmxvYXQgYXNwZWN0O1xcbiAgICBmbG9hdCBpc091dGxpbmU7XFxuICAgIHZlYzQgdGltZTtcXG59O1xcblxcbi8vIGJhYnlsb24gc3BlY2lmaWNcXG4jaW5jbHVkZTxzY2VuZVVib0RlY2xhcmF0aW9uPlxcbiNpbmNsdWRlPG1lc2hVYm9EZWNsYXJhdGlvbj5cXG5cIixtLkVmZmVjdC5JbmNsdWRlc1NoYWRlcnNTdG9yZS5tdG9vblZlcnRleERlY2xhcmF0aW9uPVwiLy8gVW5pZm9ybXNcXG51bmlmb3JtIG1hdDQgdmlld1Byb2plY3Rpb247XFxudW5pZm9ybSBtYXQ0IHZpZXc7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxudW5pZm9ybSBmbG9hdCBvdXRsaW5lV2lkdGg7XFxudW5pZm9ybSBmbG9hdCBvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U7XFxudW5pZm9ybSBmbG9hdCBvdXRsaW5lTGlnaHRpbmdNaXg7XFxudW5pZm9ybSBmbG9hdCBpc091dGxpbmU7XFxudW5pZm9ybSBmbG9hdCBhc3BlY3Q7XFxuXFxuI2lmZGVmIERJRkZVU0VcXG51bmlmb3JtIG1hdDQgZGlmZnVzZU1hdHJpeDtcXG51bmlmb3JtIHZlYzIgdkRpZmZ1c2VJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgRU1JU1NJVkVcXG51bmlmb3JtIHZlYzIgdkVtaXNzaXZlSW5mb3M7XFxudW5pZm9ybSBtYXQ0IGVtaXNzaXZlTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBCVU1QXFxudW5pZm9ybSB2ZWMzIHZCdW1wSW5mb3M7XFxudW5pZm9ybSBtYXQ0IGJ1bXBNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFNIQURFXFxudW5pZm9ybSB2ZWMyIHZTaGFkZUluZm9zO1xcbnVuaWZvcm0gbWF0NCBzaGFkZU1hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgUkVDRUlWRV9TSEFET1dcXG51bmlmb3JtIHZlYzIgdlJlY2VpdmVTaGFkb3dJbmZvcztcXG51bmlmb3JtIG1hdDQgcmVjZWl2ZVNoYWRvd01hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgU0hBRElOR19HUkFERVxcbnVuaWZvcm0gdmVjMiB2U2hhZGluZ0dyYWRlSW5mb3M7XFxudW5pZm9ybSBtYXQ0IHNoYWRpbmdHcmFkZU1hdHJpeDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgUklNXFxudW5pZm9ybSB2ZWMyIHZSaW1JbmZvcztcXG51bmlmb3JtIG1hdDQgcmltTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBNQVRDQVBcXG51bmlmb3JtIHZlYzIgdk1hdENhcEluZm9zO1xcbnVuaWZvcm0gbWF0NCBtYXRDYXBNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIE9VVExJTkVfV0lEVEhcXG51bmlmb3JtIHZlYzIgdk91dGxpbmVXaWR0aEluZm9zO1xcbnVuaWZvcm0gbWF0NCBvdXRsaW5lV2lkdGhNYXRyaXg7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFVWX0FOSU1BVElPTl9NQVNLXFxudW5pZm9ybSB2ZWMyIHZVdkFuaW1hdGlvbk1hc2tJbmZvcztcXG51bmlmb3JtIG1hdDQgdXZBbmltYXRpb25NYXNrTWF0cml4O1xcbiNlbmRpZlxcblxcbiNpZmRlZiBQT0lOVFNJWkVcXG51bmlmb3JtIGZsb2F0IHBvaW50U2l6ZTtcXG4jZW5kaWZcXG5cIixtLkVmZmVjdC5JbmNsdWRlc1NoYWRlcnNTdG9yZS5tdG9vbkZyYWdtZW50RGVjbGFyYXRpb249XCJ1bmlmb3JtIHZlYzQgdkV5ZVBvc2l0aW9uO1xcblxcbi8vIENvbG9yc1xcbnVuaWZvcm0gdmVjNCB2RGlmZnVzZUNvbG9yO1xcbnVuaWZvcm0gdmVjMyB2RW1pc3NpdmVDb2xvcjtcXG51bmlmb3JtIHZlYzMgdlNoYWRlQ29sb3I7XFxudW5pZm9ybSB2ZWMzIHZSaW1Db2xvcjtcXG51bmlmb3JtIHZlYzQgdk91dGxpbmVDb2xvcjtcXG51bmlmb3JtIHZlYzMgdkFtYmllbnRDb2xvcjtcXG5cXG51bmlmb3JtIHZlYzMgdkV5ZVVwO1xcbnVuaWZvcm0gZmxvYXQgYXNwZWN0O1xcbnVuaWZvcm0gZmxvYXQgYWxwaGFDdXRPZmY7XFxudW5pZm9ybSBmbG9hdCB2aXNpYmlsaXR5O1xcbnVuaWZvcm0gZmxvYXQgaXNPdXRsaW5lO1xcbnVuaWZvcm0gdmVjNCB0aW1lO1xcblxcbi8vIFNhbXBsZXJzXFxuI2lmZGVmIERJRkZVU0VcXG51bmlmb3JtIHZlYzIgdkRpZmZ1c2VJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgRU1JU1NJVkVcXG51bmlmb3JtIHZlYzIgdkVtaXNzaXZlSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIEJVTVBcXG51bmlmb3JtIHZlYzMgdkJ1bXBJbmZvcztcXG51bmlmb3JtIHZlYzIgdlRhbmdlbnRTcGFjZVBhcmFtcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgU0hBREVcXG51bmlmb3JtIHZlYzIgdlNoYWRlSW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFJFQ0VJVkVfU0hBRE9XXFxudW5pZm9ybSB2ZWMyIHZSZWNlaXZlU2hhZG93SW5mb3M7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFNIQURJTkdfR1JBREVcXG51bmlmb3JtIHZlYzIgdlNoYWRpbmdHcmFkZUluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBSSU1cXG51bmlmb3JtIHZlYzIgdlJpbUluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBNQVRDQVBcXG51bmlmb3JtIHZlYzIgdk1hdENhcEluZm9zO1xcbiNlbmRpZlxcblxcbiNpZmRlZiBPVVRMSU5FX1dJRFRIXFxudW5pZm9ybSB2ZWMyIHZPdXRsaW5lV2lkdGhJbmZvcztcXG4jZW5kaWZcXG5cXG4jaWZkZWYgVVZfQU5JTUFUSU9OX01BU0tcXG51bmlmb3JtIHZlYzIgdlV2QW5pbWF0aW9uTWFza0luZm9zO1xcbiNlbmRpZlxcblxcbi8vIE1Ub29uIHBhcmFtc1xcbnVuaWZvcm0gZmxvYXQgc2hhZGluZ0dyYWRlUmF0ZTtcXG51bmlmb3JtIGZsb2F0IHJlY2VpdmVTaGFkb3dSYXRlO1xcbnVuaWZvcm0gZmxvYXQgc2hhZGVTaGlmdDtcXG51bmlmb3JtIGZsb2F0IHNoYWRlVG9vbnk7XFxudW5pZm9ybSBmbG9hdCBsaWdodENvbG9yQXR0ZW51YXRpb247XFxudW5pZm9ybSBmbG9hdCBpbmRpcmVjdExpZ2h0SW50ZW5zaXR5O1xcbnVuaWZvcm0gZmxvYXQgcmltTGlnaHRpbmdNaXg7XFxudW5pZm9ybSBmbG9hdCByaW1GcmVzbmVsUG93ZXI7XFxudW5pZm9ybSBmbG9hdCByaW1MaWZ0O1xcbnVuaWZvcm0gZmxvYXQgb3V0bGluZVdpZHRoO1xcbnVuaWZvcm0gZmxvYXQgb3V0bGluZVNjYWxlZE1heERpc3RhbmNlO1xcbnVuaWZvcm0gZmxvYXQgb3V0bGluZUxpZ2h0aW5nTWl4O1xcbnVuaWZvcm0gZmxvYXQgdXZBbmltYXRpb25TY3JvbGxYO1xcbnVuaWZvcm0gZmxvYXQgdXZBbmltYXRpb25TY3JvbGxZO1xcbnVuaWZvcm0gZmxvYXQgdXZBbmltYXRpb25Sb3RhdGlvbjtcXG5cIixtLkVmZmVjdC5JbmNsdWRlc1NoYWRlcnNTdG9yZS5tdG9vbkZyYWdtZW50RnVuY3Rpb25zPVwiXFxuLyoqXFxuKiBDb21wdXRlIERpcmVjdGlvbmFsIG9yIFBvaW50IGxpZ2h0IGRpcmVjdGlvblxcbiovXFxudmVjMyBjb21wdXRlTGlnaHREaXJlY3Rpb24odmVjNCBsaWdodERhdGEpIHtcXG4gICAgcmV0dXJuIG5vcm1hbGl6ZShtaXgobGlnaHREYXRhLnh5eiAtIHZQb3NpdGlvblcsIC1saWdodERhdGEueHl6LCBsaWdodERhdGEudykpO1xcbn1cXG5cXG4vKipcXG4qIENvbXB1dGUgU3BvdCBMaWdodCBkaXJlY3Rpb25cXG4qL1xcbnZlYzMgY29tcHV0ZVNwb3RMaWdodERpcmVjdGlvbih2ZWM0IGxpZ2h0RGF0YSkge1xcbiAgICByZXR1cm4gbm9ybWFsaXplKGxpZ2h0RGF0YS54eXogLSB2UG9zaXRpb25XKTtcXG59XFxuXFxuLyoqXFxuKiBDb21wdXRlIEhlbWlzcGhlcmljIGxpZ2h0IGRpcmVjdGlvblxcbiovXFxudmVjMyBjb21wdXRlSGVtaXNwaGVyaWNMaWdodERpcmVjdGlvbih2ZWM0IGxpZ2h0RGF0YSwgdmVjMyB2Tm9ybWFsKSB7XFxuICAgIHJldHVybiBub3JtYWxpemUobGlnaHREYXRhLnh5eik7XFxufVxcblxcbi8qKlxcbiogQ29tcHV0ZSBNVG9vbiBkaWZmdXNlIGxpZ2h0aW5nXFxuKi9cXG52ZWM0IGNvbXB1dGVNVG9vbkRpZmZ1c2VMaWdodGluZyh2ZWMzIHdvcmxkVmlldywgdmVjMyB3b3JsZE5vcm1hbCwgdmVjMiBtYWluVXYsIHZlYzMgbGlnaHREaXJlY3Rpb24sIHZlYzQgbGlnaHREaWZmdXNlLCBmbG9hdCBzaGFkb3dBdHRlbnVhdGlvbikge1xcbiAgICBmbG9hdCBfcmVjZWl2ZVNoYWRvdyA9IHJlY2VpdmVTaGFkb3dSYXRlO1xcbiNpZmRlZiBSRUNFSVZFX1NIQURPV1xcbiAgICBfcmVjZWl2ZVNoYWRvdyA9IF9yZWNlaXZlU2hhZG93ICogdGV4dHVyZTJEKHJlY2VpdmVTaGFkb3dTYW1wbGVyLCBtYWluVXYpLnIgKiB2UmVjZWl2ZVNoYWRvd0luZm9zLnk7XFxuI2VuZGlmXFxuXFxuICAgIGZsb2F0IF9zaGFkaW5nR3JhZGUgPSAwLjA7XFxuI2lmZGVmIFNIQURJTkdfR1JBREVcXG4gICAgX3NoYWRpbmdHcmFkZSA9IDEuMCAtIHRleHR1cmUyRChzaGFkaW5nR3JhZGVTYW1wbGVyLCBtYWluVXYpLnIgKiB2U2hhZGluZ0dyYWRlSW5mb3MueTtcXG4jZW5kaWZcXG4gICAgX3NoYWRpbmdHcmFkZSA9IDEuMCAtIHNoYWRpbmdHcmFkZVJhdGUgKiBfc2hhZGluZ0dyYWRlO1xcblxcbiAgICAvLyBMaWdodGluZ1xcbiAgICB2ZWMzIF9saWdodENvbG9yID0gbGlnaHREaWZmdXNlLnJnYiAqIHN0ZXAoMC41LCBsZW5ndGgobGlnaHREaXJlY3Rpb24pKTsgLy8gbGVuZ3RoKGxpZ2h0RGlyKSBpcyB6ZXJvIGlmIGRpcmVjdGlvbmFsIGxpZ2h0IGlzIGRpc2FibGVkLlxcbiAgICBmbG9hdCBfZG90TkwgPSBkb3QobGlnaHREaXJlY3Rpb24sIHdvcmxkTm9ybWFsKTtcXG4jaWZkZWYgTVRPT05fRk9SV0FSRF9BRERcXG4gICAgZmxvYXQgX2xpZ2h0QXR0ZW51YXRpb24gPSAxLjA7XFxuI2Vsc2VcXG4gICAgZmxvYXQgX2xpZ2h0QXR0ZW51YXRpb24gPSBzaGFkb3dBdHRlbnVhdGlvbiAqIG1peCgxLjAsIHNoYWRvd0F0dGVudWF0aW9uLCBfcmVjZWl2ZVNoYWRvdyk7XFxuI2VuZGlmXFxuXFxuICAgIC8vIGxpZ2h0aW5nIGludGVuc2l0eVxcbiAgICBmbG9hdCBfbGlnaHRJbnRlbnNpdHkgPSBfZG90Tkw7XFxuICAgIF9saWdodEludGVuc2l0eSA9IF9saWdodEludGVuc2l0eSAqIDAuNSArIDAuNTsgLy8gZnJvbSBbLTEsICsxXSB0byBbMCwgMV1cXG4gICAgX2xpZ2h0SW50ZW5zaXR5ID0gX2xpZ2h0SW50ZW5zaXR5ICogX2xpZ2h0QXR0ZW51YXRpb247IC8vIHJlY2VpdmUgc2hhZG93XFxuICAgIF9saWdodEludGVuc2l0eSA9IF9saWdodEludGVuc2l0eSAqIF9zaGFkaW5nR3JhZGU7IC8vIGRhcmtlclxcbiAgICBfbGlnaHRJbnRlbnNpdHkgPSBfbGlnaHRJbnRlbnNpdHkgKiAyLjAgLSAxLjA7IC8vIGZyb20gWzAsIDFdIHRvIFstMSwgKzFdXFxuICAgIC8vIHRvb25lZC4gbWFwcGluZyBmcm9tIFttaW5JbnRlbnNpdHlUaHJlc2hvbGQsIG1heEludGVuc2l0eVRocmVzaG9sZF0gdG8gWzAsIDFdXFxuICAgIGZsb2F0IF9tYXhJbnRlbnNpdHlUaHJlc2hvbGQgPSBtaXgoMS4wLCBzaGFkZVNoaWZ0LCBzaGFkZVRvb255KTtcXG4gICAgZmxvYXQgX21pbkludGVuc2l0eVRocmVzaG9sZCA9IHNoYWRlU2hpZnQ7XFxuICAgIF9saWdodEludGVuc2l0eSA9IGNsYW1wKChfbGlnaHRJbnRlbnNpdHkgLSBfbWluSW50ZW5zaXR5VGhyZXNob2xkKSAvIG1heChFUFNfQ09MLCAoX21heEludGVuc2l0eVRocmVzaG9sZCAtIF9taW5JbnRlbnNpdHlUaHJlc2hvbGQpKSwgMC4wLCAxLjApO1xcblxcbiAgICAvLyBBbGJlZG8gY29sb3JcXG4gICAgdmVjMyBfc2hhZGUgPSB2U2hhZGVDb2xvcjtcXG4jaWZkZWYgU0hBREVcXG4gICAgX3NoYWRlID0gX3NoYWRlICogdGV4dHVyZTJEKHNoYWRlU2FtcGxlciwgbWFpblV2KS5yZ2IgKiB2U2hhZGVJbmZvcy55O1xcbiNlbmRpZlxcblxcbiAgICB2ZWM0IF9saXQgPSB2RGlmZnVzZUNvbG9yO1xcbiNpZmRlZiBESUZGVVNFXFxuICAgIF9saXQgPSBfbGl0ICogdGV4dHVyZTJEKGRpZmZ1c2VTYW1wbGVyLCBtYWluVXYpICogdkRpZmZ1c2VJbmZvcy55O1xcbiNlbmRpZlxcbiAgICB2ZWMzIF9jb2wgPSBtaXgoX3NoYWRlLnJnYiwgX2xpdC5yZ2IsIF9saWdodEludGVuc2l0eSk7XFxuXFxuICAgIC8vIERpcmVjdCBMaWdodFxcbiAgICB2ZWMzIF9saWdodGluZyA9IF9saWdodENvbG9yO1xcbiAgICBfbGlnaHRpbmcgPSBtaXgoX2xpZ2h0aW5nLCB2ZWMzKG1heChFUFNfQ09MLCBtYXgoX2xpZ2h0aW5nLngsIG1heChfbGlnaHRpbmcueSwgX2xpZ2h0aW5nLnopKSkpLCBsaWdodENvbG9yQXR0ZW51YXRpb24pOyAvLyBjb2xvciBhdHRlblxcbiNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiAgICBfbGlnaHRpbmcgKj0gMC41OyAvLyBkYXJrZW4gaWYgYWRkaXRpb25hbCBsaWdodFxcbiAgICBfbGlnaHRpbmcgKj0gbWluKDAsIGRvdE5MKSArIDEuMDsgLy8gZGFya2VuIGRvdE5MIDwgMCBhcmVhIGJ5IHVzaW5nIGhhbGYgbGFtYmVydFxcbiAgICBfbGlnaHRpbmcgKj0gc2hhZG93QXR0ZW51YXRpb247IC8vIGRhcmtlbiBpZiByZWNlaXZpbmcgc2hhZG93XFxuI2Vsc2VcXG4gICAgLy8gYmFzZSBsaWdodCBkb2VzIG5vdCBkYXJrZW4uXFxuI2VuZGlmXFxuICAgIF9jb2wgKj0gX2xpZ2h0aW5nO1xcblxcbiAgICAvLyBJbmRpcmVjdCBMaWdodFxcbiNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiNlbHNlXFxuICAgIHZlYzMgX3Rvb25lZEdJID0gdkFtYmllbnRDb2xvci5yZ2I7IC8vIFRPRE86IEdJXFxuICAgIHZlYzMgX2luZGlyZWN0TGlnaHRpbmcgPSBtaXgoX3Rvb25lZEdJLCB2QW1iaWVudENvbG9yLnJnYiwgaW5kaXJlY3RMaWdodEludGVuc2l0eSk7XFxuICAgIF9pbmRpcmVjdExpZ2h0aW5nID0gbWl4KF9pbmRpcmVjdExpZ2h0aW5nLCB2ZWMzKG1heChFUFNfQ09MLCBtYXgoX2luZGlyZWN0TGlnaHRpbmcueCwgbWF4KF9pbmRpcmVjdExpZ2h0aW5nLnksIF9pbmRpcmVjdExpZ2h0aW5nLnopKSkpLCBsaWdodENvbG9yQXR0ZW51YXRpb24pOyAvLyBjb2xvciBhdHRlblxcbiAgICBfY29sICs9IF9pbmRpcmVjdExpZ2h0aW5nICogX2xpdC5yZ2I7XFxuXFxuICAgIF9jb2wgPSBtaW4oX2NvbC5yZ2IsIF9saXQucmdiKTsgLy8gY29tbWVudCBvdXQgaWYgeW91IHdhbnQgdG8gUEJSIGFic29sdXRlbHkuXFxuI2VuZGlmXFxuXFxuICAgIC8vIHBhcmFtZXRyaWMgcmltIGxpZ2h0aW5nXFxuI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuICAgIHZlYzMgX3N0YXRpY1JpbUxpZ2h0aW5nID0gdmVjMygwLjApO1xcbiAgICB2ZWMzIF9taXhlZFJpbUxpZ2h0aW5nID0gX2xpZ2h0aW5nO1xcbiNlbHNlXFxuICAgIHZlYzMgX3N0YXRpY1JpbUxpZ2h0aW5nID0gdmVjMygxLjApO1xcbiAgICB2ZWMzIF9taXhlZFJpbUxpZ2h0aW5nID0gX2xpZ2h0aW5nICsgX2luZGlyZWN0TGlnaHRpbmc7XFxuI2VuZGlmXFxuICAgIHZlYzMgX3JpbUxpZ2h0aW5nID0gbWl4KF9zdGF0aWNSaW1MaWdodGluZywgX21peGVkUmltTGlnaHRpbmcsIHJpbUxpZ2h0aW5nTWl4KTtcXG4gICAgdmVjMyBfcmltQ29sb3IgPSB2UmltQ29sb3IucmdiO1xcbiNpZmRlZiBSSU1cXG4gICAgX3JpbUNvbG9yID0gX3JpbUNvbG9yICogdGV4dHVyZTJEKHJpbVNhbXBsZXIsIHZSaW1VViArIG1haW5VdikucmdiICogdlJpbUluZm9zLnk7XFxuI2VuZGlmXFxuICAgIHZlYzMgX3JpbSA9IHBvdyhjbGFtcCgxLjAgLSBkb3Qod29ybGROb3JtYWwsIHdvcmxkVmlldykgKyByaW1MaWZ0LCAwLjAsIDEuMCksIHJpbUZyZXNuZWxQb3dlcikgKiBfcmltQ29sb3IucmdiO1xcbiAgICBfY29sICs9IG1peChfcmltICogX3JpbUxpZ2h0aW5nLCB2ZWMzKDAuMCksIGlzT3V0bGluZSk7XFxuXFxuICAgIC8vIGFkZGl0aXZlIG1hdGNhcFxcbiNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiNlbHNlXFxuI2lmZGVmIE1BVENBUFxcbiAgICB2ZWMzIF93b3JsZFZpZXdVcCA9IG5vcm1hbGl6ZSh2RXllVXAgLSB3b3JsZFZpZXcgKiBkb3Qod29ybGRWaWV3LCB2RXllVXApKTtcXG4gICAgdmVjMyBfd29ybGRWaWV3UmlnaHQgPSBub3JtYWxpemUoY3Jvc3Mod29ybGRWaWV3LCBfd29ybGRWaWV3VXApKTtcXG4gICAgdmVjMiBfbWF0Q2FwVXYgPSB2ZWMyKGRvdChfd29ybGRWaWV3UmlnaHQsIHdvcmxkTm9ybWFsKSwgZG90KF93b3JsZFZpZXdVcCwgd29ybGROb3JtYWwpKSAqIDAuNSArIDAuNTtcXG4gICAgLy8gdXYueSBpcyByZXZlcnNlZFxcbiAgICBfbWF0Q2FwVXYueSA9ICgxLjAgLSBfbWF0Q2FwVXYueSk7XFxuICAgIHZlYzMgX21hdENhcExpZ2h0aW5nID0gdGV4dHVyZTJEKG1hdENhcFNhbXBsZXIsIF9tYXRDYXBVdikucmdiICogdk1hdENhcEluZm9zLnk7XFxuICAgIF9jb2wgKz0gbWl4KF9tYXRDYXBMaWdodGluZywgdmVjMygwLjApLCBpc091dGxpbmUpO1xcbiNlbmRpZlxcbiNlbmRpZlxcblxcbiAgICAvLyBFbWlzc2lvblxcbiNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiNlbHNlXFxuICAgIHZlYzMgX2VtaXNzaW9uID0gdkVtaXNzaXZlQ29sb3IucmdiO1xcbiNpZmRlZiBFTUlTU0lWRVxcbiAgICBfZW1pc3Npb24gKj0gdGV4dHVyZTJEKGVtaXNzaXZlU2FtcGxlciwgbWFpblV2KS5yZ2IgKiB2RW1pc3NpdmVJbmZvcy55O1xcbiNlbmRpZlxcbiAgICBfY29sICs9IG1peChfZW1pc3Npb24sIHZlYzMoMC4wKSwgaXNPdXRsaW5lKTtcXG4jZW5kaWZcXG5cXG4gICAgZmxvYXQgX2FscGhhID0gMS4wO1xcblxcbiNpZiBkZWZpbmVkKEFMUEhBQkxFTkQpIHx8IGRlZmluZWQoQUxQSEFURVNUKVxcbiAgICBfYWxwaGEgPSBtaXgoX2xpdC5hLCBfbGl0LmEgKiB2T3V0bGluZUNvbG9yLmEsIGlzT3V0bGluZSk7XFxuI2VuZGlmXFxuXFxuICAgIC8vIG91dGxpbmVcXG4jaWZkZWYgTVRPT05fT1VUTElORV9DT0xPUl9GSVhFRFxcbiAgICBfY29sID0gbWl4KF9jb2wsIHZPdXRsaW5lQ29sb3IucmdiLCBpc091dGxpbmUpO1xcbiNlbGlmIGRlZmluZWQoTVRPT05fT1VUTElORV9DT0xPUl9NSVhFRClcXG4gICAgX2NvbCA9IG1peChfY29sLCB2T3V0bGluZUNvbG9yLnJnYiAqIG1peCh2ZWMzKDEuMCksIF9jb2wsIG91dGxpbmVMaWdodGluZ01peCksIGlzT3V0bGluZSk7XFxuI2Vsc2VcXG4jZW5kaWZcXG5cXG4gICAgLy8gZGVidWdcXG4jaWZkZWYgTVRPT05fREVCVUdfTk9STUFMXFxuICAgICNpZmRlZiBNVE9PTl9GT1JXQVJEX0FERFxcbiAgICAgICAgcmV0dXJuIHZlYzQoMC4wKTtcXG4gICAgI2Vsc2VcXG4gICAgICAgIHJldHVybiB2ZWM0KHdvcmxkTm9ybWFsICogMC41ICsgMC41LCBfbGl0LmEpO1xcbiAgICAjZW5kaWZcXG4jZWxpZiBkZWZpbmVkKE1UT09OX0RFQlVHX0xJVFNIQURFUkFURSlcXG4gICAgI2lmZGVmIE1UT09OX0ZPUldBUkRfQUREXFxuICAgICAgICByZXR1cm4gdmVjNCgwLjApO1xcbiAgICAjZWxzZVxcbiAgICAgICAgcmV0dXJuIHZlYzQoX2xpZ2h0SW50ZW5zaXR5LCBfbGl0LmEpO1xcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cXG4gICAgcmV0dXJuIHZlYzQoX2NvbCwgX2FscGhhKTtcXG59XFxuXCIsbS5FZmZlY3QuSW5jbHVkZXNTaGFkZXJzU3RvcmUubXRvb25MaWdodEZyYWdtZW50PVwiI2lmZGVmIExJR0hUe1h9XFxuICAgICNpZiBkZWZpbmVkKFNIQURPV09OTFkpIHx8IGRlZmluZWQoTElHSFRNQVApICYmIGRlZmluZWQoTElHSFRNQVBFWENMVURFRHtYfSkgJiYgZGVmaW5lZChMSUdIVE1BUE5PU1BFQ1VMQVJ7WH0pXFxuICAgICAgICAvL05vIGxpZ2h0IGNhbGN1bGF0aW9uXFxuICAgICNlbHNlXFxuICAgICAgICAjaWZkZWYgUEJSXFxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBQcmUgTGlnaHRpbmcgaW5mb3NcXG4gICAgICAgICAgICAjaWZkZWYgU1BPVExJR0hUe1h9XFxuICAgICAgICAgICAgICAgIHByZUluZm8gPSBjb21wdXRlUG9pbnRBbmRTcG90UHJlTGlnaHRpbmdJbmZvKGxpZ2h0e1h9LnZMaWdodERhdGEsIHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXKTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFBPSU5UTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgIHByZUluZm8gPSBjb21wdXRlUG9pbnRBbmRTcG90UHJlTGlnaHRpbmdJbmZvKGxpZ2h0e1h9LnZMaWdodERhdGEsIHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXKTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKEhFTUlMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgcHJlSW5mbyA9IGNvbXB1dGVIZW1pc3BoZXJpY1ByZUxpZ2h0aW5nSW5mbyhsaWdodHtYfS52TGlnaHREYXRhLCB2aWV3RGlyZWN0aW9uVywgbm9ybWFsVyk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChESVJMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgcHJlSW5mbyA9IGNvbXB1dGVEaXJlY3Rpb25hbFByZUxpZ2h0aW5nSW5mbyhsaWdodHtYfS52TGlnaHREYXRhLCB2aWV3RGlyZWN0aW9uVywgbm9ybWFsVyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgcHJlSW5mby5OZG90ViA9IE5kb3RWO1xcblxcbiAgICAgICAgICAgIC8vIENvbXB1dGUgQXR0ZW51YXRpb24gaW5mb3NcXG4gICAgICAgICAgICAjaWZkZWYgU1BPVExJR0hUe1h9XFxuICAgICAgICAgICAgICAgICNpZmRlZiBMSUdIVF9GQUxMT0ZGX0dMVEZ7WH1cXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSBjb21wdXRlRGlzdGFuY2VMaWdodEZhbGxvZmZfR0xURihwcmVJbmZvLmxpZ2h0RGlzdGFuY2VTcXVhcmVkLCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLnkpO1xcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiAqPSBjb21wdXRlRGlyZWN0aW9uYWxMaWdodEZhbGxvZmZfR0xURihsaWdodHtYfS52TGlnaHREaXJlY3Rpb24ueHl6LCBwcmVJbmZvLkwsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueiwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi53KTtcXG4gICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChMSUdIVF9GQUxMT0ZGX1BIWVNJQ0FMe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZl9QaHlzaWNhbChwcmVJbmZvLmxpZ2h0RGlzdGFuY2VTcXVhcmVkKTtcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gKj0gY29tcHV0ZURpcmVjdGlvbmFsTGlnaHRGYWxsb2ZmX1BoeXNpY2FsKGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbi54eXosIHByZUluZm8uTCwgbGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLncpO1xcbiAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKExJR0hUX0ZBTExPRkZfU1RBTkRBUkR7WH0pXFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmX1N0YW5kYXJkKHByZUluZm8ubGlnaHRPZmZzZXQsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueCk7XFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uICo9IGNvbXB1dGVEaXJlY3Rpb25hbExpZ2h0RmFsbG9mZl9TdGFuZGFyZChsaWdodHtYfS52TGlnaHREaXJlY3Rpb24ueHl6LCBwcmVJbmZvLkwsIGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbi53LCBsaWdodHtYfS52TGlnaHREYXRhLncpO1xcbiAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZihwcmVJbmZvLmxpZ2h0T2Zmc2V0LCBwcmVJbmZvLmxpZ2h0RGlzdGFuY2VTcXVhcmVkLCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLngsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueSk7XFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uICo9IGNvbXB1dGVEaXJlY3Rpb25hbExpZ2h0RmFsbG9mZihsaWdodHtYfS52TGlnaHREaXJlY3Rpb24ueHl6LCBwcmVJbmZvLkwsIGxpZ2h0e1h9LnZMaWdodERpcmVjdGlvbi53LCBsaWdodHtYfS52TGlnaHREYXRhLncsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueiwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi53KTtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChQT0lOVExJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICAjaWZkZWYgTElHSFRfRkFMTE9GRl9HTFRGe1h9XFxuICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLmF0dGVudWF0aW9uID0gY29tcHV0ZURpc3RhbmNlTGlnaHRGYWxsb2ZmX0dMVEYocHJlSW5mby5saWdodERpc3RhbmNlU3F1YXJlZCwgbGlnaHR7WH0udkxpZ2h0RmFsbG9mZi55KTtcXG4gICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChMSUdIVF9GQUxMT0ZGX1BIWVNJQ0FMe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZl9QaHlzaWNhbChwcmVJbmZvLmxpZ2h0RGlzdGFuY2VTcXVhcmVkKTtcXG4gICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChMSUdIVF9GQUxMT0ZGX1NUQU5EQVJEe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZl9TdGFuZGFyZChwcmVJbmZvLmxpZ2h0T2Zmc2V0LCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLngpO1xcbiAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5hdHRlbnVhdGlvbiA9IGNvbXB1dGVEaXN0YW5jZUxpZ2h0RmFsbG9mZihwcmVJbmZvLmxpZ2h0T2Zmc2V0LCBwcmVJbmZvLmxpZ2h0RGlzdGFuY2VTcXVhcmVkLCBsaWdodHtYfS52TGlnaHRGYWxsb2ZmLngsIGxpZ2h0e1h9LnZMaWdodEZhbGxvZmYueSk7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHByZUluZm8uYXR0ZW51YXRpb24gPSAxLjA7XFxuICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgLy8gU2ltdWxhdGVzIExpZ2h0IHJhZGl1cyBmb3IgZGlmZnVzZSBhbmQgc3BlYyB0ZXJtXFxuICAgICAgICAgICAgLy8gY2xlYXIgY29hdCBpcyB1c2luZyBhIGRlZGljYXRlZCByb3VnaG5lc3NcXG4gICAgICAgICAgICAjaWZkZWYgSEVNSUxJR0hUe1h9XFxuICAgICAgICAgICAgICAgIHByZUluZm8ucm91Z2huZXNzID0gcm91Z2huZXNzO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHByZUluZm8ucm91Z2huZXNzID0gYWRqdXN0Um91Z2huZXNzRnJvbUxpZ2h0UHJvcGVydGllcyhyb3VnaG5lc3MsIGxpZ2h0e1h9LnZMaWdodFNwZWN1bGFyLmEsIHByZUluZm8ubGlnaHREaXN0YW5jZSk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgLy8gRGlmZnVzZSBjb250cmlidXRpb25cXG4gICAgICAgICAgICAjaWZkZWYgSEVNSUxJR0hUe1h9XFxuICAgICAgICAgICAgICAgIGluZm8uZGlmZnVzZSA9IGNvbXB1dGVIZW1pc3BoZXJpY0RpZmZ1c2VMaWdodGluZyhwcmVJbmZvLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYiwgbGlnaHR7WH0udkxpZ2h0R3JvdW5kKTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNTX1RSQU5TTFVDRU5DWSlcXG4gICAgICAgICAgICAgICAgaW5mby5kaWZmdXNlID0gY29tcHV0ZURpZmZ1c2VBbmRUcmFuc21pdHRlZExpZ2h0aW5nKHByZUluZm8sIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiLCBzdWJTdXJmYWNlT3V0LnRyYW5zbWl0dGFuY2UpO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIGluZm8uZGlmZnVzZSA9IGNvbXB1dGVEaWZmdXNlTGlnaHRpbmcocHJlSW5mbywgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IpO1xcbiAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgIC8vIFNwZWN1bGFyIGNvbnRyaWJ1dGlvblxcbiAgICAgICAgICAgICNpZmRlZiBTUEVDVUxBUlRFUk1cXG4gICAgICAgICAgICAgICAgI2lmZGVmIEFOSVNPVFJPUElDXFxuICAgICAgICAgICAgICAgICAgICBpbmZvLnNwZWN1bGFyID0gY29tcHV0ZUFuaXNvdHJvcGljU3BlY3VsYXJMaWdodGluZyhwcmVJbmZvLCB2aWV3RGlyZWN0aW9uVywgbm9ybWFsVywgYW5pc290cm9waWNPdXQuYW5pc290cm9waWNUYW5nZW50LCBhbmlzb3Ryb3BpY091dC5hbmlzb3Ryb3BpY0JpdGFuZ2VudCwgYW5pc290cm9waWNPdXQuYW5pc290cm9weSwgY2xlYXJjb2F0T3V0LnNwZWN1bGFyRW52aXJvbm1lbnRSMCwgc3BlY3VsYXJFbnZpcm9ubWVudFI5MCwgQUFSb3VnaG5lc3NGYWN0b3JzLngsIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiKTtcXG4gICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgIGluZm8uc3BlY3VsYXIgPSBjb21wdXRlU3BlY3VsYXJMaWdodGluZyhwcmVJbmZvLCBub3JtYWxXLCBjbGVhcmNvYXRPdXQuc3BlY3VsYXJFbnZpcm9ubWVudFIwLCBzcGVjdWxhckVudmlyb25tZW50UjkwLCBBQVJvdWdobmVzc0ZhY3RvcnMueCwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IpO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAvLyBTaGVlbiBjb250cmlidXRpb25cXG4gICAgICAgICAgICAjaWZkZWYgU0hFRU5cXG4gICAgICAgICAgICAgICAgI2lmZGVmIFNIRUVOX0xJTktXSVRIQUxCRURPXFxuICAgICAgICAgICAgICAgICAgICAvLyBCRSBDYXJlZnVsbDogU2hlZW4gaW50ZW5zaXR5IGlzIHJlcGxhY2luZyB0aGUgcm91Z2huZXNzIHZhbHVlLlxcbiAgICAgICAgICAgICAgICAgICAgcHJlSW5mby5yb3VnaG5lc3MgPSBzaGVlbk91dC5zaGVlbkludGVuc2l0eTtcXG4gICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgICNpZmRlZiBIRU1JTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLnJvdWdobmVzcyA9IHNoZWVuT3V0LnNoZWVuUm91Z2huZXNzO1xcbiAgICAgICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVJbmZvLnJvdWdobmVzcyA9IGFkanVzdFJvdWdobmVzc0Zyb21MaWdodFByb3BlcnRpZXMoc2hlZW5PdXQuc2hlZW5Sb3VnaG5lc3MsIGxpZ2h0e1h9LnZMaWdodFNwZWN1bGFyLmEsIHByZUluZm8ubGlnaHREaXN0YW5jZSk7XFxuICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgIGluZm8uc2hlZW4gPSBjb21wdXRlU2hlZW5MaWdodGluZyhwcmVJbmZvLCBub3JtYWxXLCBzaGVlbk91dC5zaGVlbkNvbG9yLCBzcGVjdWxhckVudmlyb25tZW50UjkwLCBBQVJvdWdobmVzc0ZhY3RvcnMueCwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IpO1xcbiAgICAgICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgICAgIC8vIENsZWFyIENvYXQgY29udHJpYnV0aW9uXFxuICAgICAgICAgICAgI2lmZGVmIENMRUFSQ09BVFxcbiAgICAgICAgICAgICAgICAvLyBTaW11bGF0ZXMgTGlnaHQgcmFkaXVzXFxuICAgICAgICAgICAgICAgICNpZmRlZiBIRU1JTElHSFR7WH1cXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8ucm91Z2huZXNzID0gY2xlYXJjb2F0T3V0LmNsZWFyQ29hdFJvdWdobmVzcztcXG4gICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgIHByZUluZm8ucm91Z2huZXNzID0gYWRqdXN0Um91Z2huZXNzRnJvbUxpZ2h0UHJvcGVydGllcyhjbGVhcmNvYXRPdXQuY2xlYXJDb2F0Um91Z2huZXNzLCBsaWdodHtYfS52TGlnaHRTcGVjdWxhci5hLCBwcmVJbmZvLmxpZ2h0RGlzdGFuY2UpO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAgICAgaW5mby5jbGVhckNvYXQgPSBjb21wdXRlQ2xlYXJDb2F0TGlnaHRpbmcocHJlSW5mbywgY2xlYXJjb2F0T3V0LmNsZWFyQ29hdE5vcm1hbFcsIGNsZWFyY29hdE91dC5jbGVhckNvYXRBQVJvdWdobmVzc0ZhY3RvcnMueCwgY2xlYXJjb2F0T3V0LmNsZWFyQ29hdEludGVuc2l0eSwgbGlnaHR7WH0udkxpZ2h0RGlmZnVzZS5yZ2IpO1xcblxcbiAgICAgICAgICAgICAgICAjaWZkZWYgQ0xFQVJDT0FUX1RJTlRcXG4gICAgICAgICAgICAgICAgICAgIC8vIEFic29ycHRpb25cXG4gICAgICAgICAgICAgICAgICAgIGFic29ycHRpb24gPSBjb21wdXRlQ2xlYXJDb2F0TGlnaHRpbmdBYnNvcnB0aW9uKGNsZWFyY29hdE91dC5jbGVhckNvYXROZG90VlJlZnJhY3QsIHByZUluZm8uTCwgY2xlYXJjb2F0T3V0LmNsZWFyQ29hdE5vcm1hbFcsIGNsZWFyY29hdE91dC5jbGVhckNvYXRDb2xvciwgY2xlYXJjb2F0T3V0LmNsZWFyQ29hdFRoaWNrbmVzcywgY2xlYXJjb2F0T3V0LmNsZWFyQ29hdEludGVuc2l0eSk7XFxuICAgICAgICAgICAgICAgICAgICBpbmZvLmRpZmZ1c2UgKj0gYWJzb3JwdGlvbjtcXG4gICAgICAgICAgICAgICAgICAgICNpZmRlZiBTUEVDVUxBUlRFUk1cXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLnNwZWN1bGFyICo9IGFic29ycHRpb247XFxuICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IGVuZXJneSBjb25zZXJ2YXRpb24gb24gZGlmZnVzZSBhbmQgc3BlY3VsYXIgdGVybS5cXG4gICAgICAgICAgICAgICAgaW5mby5kaWZmdXNlICo9IGluZm8uY2xlYXJDb2F0Lnc7XFxuICAgICAgICAgICAgICAgICNpZmRlZiBTUEVDVUxBUlRFUk1cXG4gICAgICAgICAgICAgICAgICAgIGluZm8uc3BlY3VsYXIgKj0gaW5mby5jbGVhckNvYXQudztcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICNpZmRlZiBTSEVFTlxcbiAgICAgICAgICAgICAgICAgICAgaW5mby5zaGVlbiAqPSBpbmZvLmNsZWFyQ29hdC53O1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICNlbHNlXFxuICAgICAgICAgICAgI2lmZGVmIFNQT1RMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICBpbmZvID0gY29tcHV0ZVNwb3RMaWdodGluZyh2aWV3RGlyZWN0aW9uVywgbm9ybWFsVywgbGlnaHR7WH0udkxpZ2h0RGF0YSwgbGlnaHR7WH0udkxpZ2h0RGlyZWN0aW9uLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYiwgbGlnaHR7WH0udkxpZ2h0U3BlY3VsYXIucmdiLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLmEsIGdsb3NzaW5lc3MpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoSEVNSUxJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICBpbmZvID0gY29tcHV0ZUhlbWlzcGhlcmljTGlnaHRpbmcodmlld0RpcmVjdGlvblcsIG5vcm1hbFcsIGxpZ2h0e1h9LnZMaWdodERhdGEsIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiLCBsaWdodHtYfS52TGlnaHRTcGVjdWxhci5yZ2IsIGxpZ2h0e1h9LnZMaWdodEdyb3VuZCwgZ2xvc3NpbmVzcyk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChQT0lOVExJR0hUe1h9KSB8fCBkZWZpbmVkKERJUkxJR0hUe1h9KVxcbiAgICAgICAgICAgICAgICBpbmZvID0gY29tcHV0ZUxpZ2h0aW5nKHZpZXdEaXJlY3Rpb25XLCBub3JtYWxXLCBsaWdodHtYfS52TGlnaHREYXRhLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLnJnYiwgbGlnaHR7WH0udkxpZ2h0U3BlY3VsYXIucmdiLCBsaWdodHtYfS52TGlnaHREaWZmdXNlLmEsIGdsb3NzaW5lc3MpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAjaWZkZWYgUFJPSkVDVEVETElHSFRURVhUVVJFe1h9XFxuICAgICAgICAgICAgaW5mby5kaWZmdXNlICo9IGNvbXB1dGVQcm9qZWN0aW9uVGV4dHVyZURpZmZ1c2VMaWdodGluZyhwcm9qZWN0aW9uTGlnaHRTYW1wbGVye1h9LCB0ZXh0dXJlUHJvamVjdGlvbk1hdHJpeHtYfSk7XFxuICAgICAgICAjZW5kaWZcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZmRlZiBTSEFET1d7WH1cXG4gICAgICAgICNpZmRlZiBTSEFET1dDU017WH1cXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFNIQURPV0NTTU5VTV9DQVNDQURFU3tYfTsgaSsrKVxcbiAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgI2lmZGVmIFNIQURPV0NTTV9SSUdIVEhBTkRFRHtYfVxcbiAgICAgICAgICAgICAgICAgICAgZGlmZntYfSA9IHZpZXdGcnVzdHVtWntYfVtpXSArIHZQb3NpdGlvbkZyb21DYW1lcmF7WH0uejtcXG4gICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgIGRpZmZ7WH0gPSB2aWV3RnJ1c3R1bVp7WH1baV0gLSB2UG9zaXRpb25Gcm9tQ2FtZXJhe1h9Lno7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICBpZiAoZGlmZntYfSA+PSAwLikge1xcbiAgICAgICAgICAgICAgICAgICAgaW5kZXh7WH0gPSBpO1xcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgI2lmZGVmIFNIQURPV0NTTVVTRVNIQURPV01BWFp7WH1cXG4gICAgICAgICAgICBpZiAoaW5kZXh7WH0gPj0gMClcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICB7XFxuICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV1BDRntYfSlcXG4gICAgICAgICAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0xPV1FVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ0YxKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV01FRElVTVFVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ0YzKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueXosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDRjUoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55eiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dQQ1NTe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XTE9XUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDU1MxNihmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udywgbGlnaHRTaXplVVZDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgZGVwdGhDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgcGVudW1icmFEYXJrbmVzc3tYfSk7XFxuICAgICAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV01FRElVTVFVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ1NTMzIoZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncsIGxpZ2h0U2l6ZVVWQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIGRlcHRoQ29ycmVjdGlvbntYfVtpbmRleHtYfV0sIHBlbnVtYnJhRGFya25lc3N7WH0pO1xcbiAgICAgICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDU1M2NChmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udywgbGlnaHRTaXplVVZDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgZGVwdGhDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgcGVudW1icmFEYXJrbmVzc3tYfSk7XFxuICAgICAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dDU00oZmxvYXQoaW5kZXh7WH0pLCB2UG9zaXRpb25Gcm9tTGlnaHR7WH1baW5kZXh7WH1dLCB2RGVwdGhNZXRyaWN7WH1baW5kZXh7WH1dLCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgICAgICNpZmRlZiBTSEFET1dDU01ERUJVR3tYfVxcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93RGVidWd7WH0gPSB2ZWMzKHNoYWRvdykgKiB2Q2FzY2FkZUNvbG9yc011bHRpcGxpZXJ7WH1baW5kZXh7WH1dO1xcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICAgICAgI2lmbmRlZiBTSEFET1dDU01OT0JMRU5Ee1h9XFxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBmcnVzdHVtTGVuZ3RoID0gZnJ1c3R1bUxlbmd0aHN7WH1baW5kZXh7WH1dO1xcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZGlmZlJhdGlvID0gY2xhbXAoZGlmZntYfSAvIGZydXN0dW1MZW5ndGgsIDAuLCAxLikgKiBjYXNjYWRlQmxlbmRGYWN0b3J7WH07XFxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXh7WH0gPCAoU0hBRE9XQ1NNTlVNX0NBU0NBREVTe1h9IC0gMSkgJiYgZGlmZlJhdGlvIDwgMS4pXFxuICAgICAgICAgICAgICAgICAgICB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXh7WH0gKz0gMTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCBuZXh0U2hhZG93ID0gMC47XFxuICAgICAgICAgICAgICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XUENGe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dMT1dRVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENGMShmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV01FRElVTVFVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDU01QQ0YzKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueXosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENGNShmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnl6LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dQQ1NTe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dMT1dRVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENTUzE2KGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53LCBsaWdodFNpemVVVkNvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBkZXB0aENvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBwZW51bWJyYURhcmtuZXNze1h9KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dNRURJVU1RVUFMSVRZe1h9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ1NNUENTUzMyKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgZGVwdGhTYW1wbGVye1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53LCBsaWdodFNpemVVVkNvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBkZXB0aENvcnJlY3Rpb257WH1baW5kZXh7WH1dLCBwZW51bWJyYURhcmtuZXNze1h9KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aENTTVBDU1M2NChmbG9hdChpbmRleHtYfSksIHZQb3NpdGlvbkZyb21MaWdodHtYfVtpbmRleHtYfV0sIHZEZXB0aE1ldHJpY3tYfVtpbmRleHtYfV0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udywgbGlnaHRTaXplVVZDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgZGVwdGhDb3JyZWN0aW9ue1h9W2luZGV4e1h9XSwgcGVudW1icmFEYXJrbmVzc3tYfSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTaGFkb3cgPSBjb21wdXRlU2hhZG93Q1NNKGZsb2F0KGluZGV4e1h9KSwgdlBvc2l0aW9uRnJvbUxpZ2h0e1h9W2luZGV4e1h9XSwgdkRlcHRoTWV0cmlje1h9W2luZGV4e1h9XSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93ID0gbWl4KG5leHRTaGFkb3csIHNoYWRvdywgZGlmZlJhdGlvKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAjaWZkZWYgU0hBRE9XQ1NNREVCVUd7WH1cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93RGVidWd7WH0gPSBtaXgodmVjMyhuZXh0U2hhZG93KSAqIHZDYXNjYWRlQ29sb3JzTXVsdGlwbGllcntYfVtpbmRleHtYfV0sIHNoYWRvd0RlYnVne1h9LCBkaWZmUmF0aW8pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICB9XFxuICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV0NMT1NFRVNNe1h9KVxcbiAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0NVQkV7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoQ2xvc2VFU01DdWJlKGxpZ2h0e1h9LnZMaWdodERhdGEueHl6LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby56LCBsaWdodHtYfS5kZXB0aFZhbHVlcyk7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhDbG9zZUVTTSh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV0VTTXtYfSlcXG4gICAgICAgICAgICAjaWYgZGVmaW5lZChTSEFET1dDVUJFe1h9KVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aEVTTUN1YmUobGlnaHR7WH0udkxpZ2h0RGF0YS54eXosIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LmRlcHRoVmFsdWVzKTtcXG4gICAgICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICAgICBzaGFkb3cgPSBjb21wdXRlU2hhZG93V2l0aEVTTSh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV1BPSVNTT057WH0pXFxuICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XQ1VCRXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQb2lzc29uU2FtcGxpbmdDdWJlKGxpZ2h0e1h9LnZMaWdodERhdGEueHl6LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby55LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5kZXB0aFZhbHVlcyk7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQb2lzc29uU2FtcGxpbmcodlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dQQ0Z7WH0pXFxuICAgICAgICAgICAgI2lmIGRlZmluZWQoU0hBRE9XTE9XUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQQ0YxKHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5zaGFkb3dzSW5mby53KTtcXG4gICAgICAgICAgICAjZWxpZiBkZWZpbmVkKFNIQURPV01FRElVTVFVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUENGMyh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueXosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUENGNSh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueXosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VsaWYgZGVmaW5lZChTSEFET1dQQ1NTe1h9KVxcbiAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0xPV1FVQUxJVFl7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dXaXRoUENTUzE2KHZQb3NpdGlvbkZyb21MaWdodHtYfSwgdkRlcHRoTWV0cmlje1h9LCBkZXB0aFNhbXBsZXJ7WH0sIHNoYWRvd1NhbXBsZXJ7WH0sIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnksIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLnosIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLngsIGxpZ2h0e1h9LnNoYWRvd3NJbmZvLncpO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoU0hBRE9XTUVESVVNUVVBTElUWXtYfSlcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQQ1NTMzIodlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvd1dpdGhQQ1NTNjQodlBvc2l0aW9uRnJvbUxpZ2h0e1h9LCB2RGVwdGhNZXRyaWN7WH0sIGRlcHRoU2FtcGxlcntYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueiwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxzZVxcbiAgICAgICAgICAgICNpZiBkZWZpbmVkKFNIQURPV0NVQkV7WH0pXFxuICAgICAgICAgICAgICAgIHNoYWRvdyA9IGNvbXB1dGVTaGFkb3dDdWJlKGxpZ2h0e1h9LnZMaWdodERhdGEueHl6LCBzaGFkb3dTYW1wbGVye1h9LCBsaWdodHtYfS5zaGFkb3dzSW5mby54LCBsaWdodHtYfS5kZXB0aFZhbHVlcyk7XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gY29tcHV0ZVNoYWRvdyh2UG9zaXRpb25Gcm9tTGlnaHR7WH0sIHZEZXB0aE1ldHJpY3tYfSwgc2hhZG93U2FtcGxlcntYfSwgbGlnaHR7WH0uc2hhZG93c0luZm8ueCwgbGlnaHR7WH0uc2hhZG93c0luZm8udyk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICNpZmRlZiBTSEFET1dPTkxZXFxuICAgICAgICAgICAgI2lmbmRlZiBTSEFET1dJTlVTRVxcbiAgICAgICAgICAgICAgICAjZGVmaW5lIFNIQURPV0lOVVNFXFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgZ2xvYmFsU2hhZG93ICs9IHNoYWRvdztcXG4gICAgICAgICAgICBzaGFkb3dMaWdodENvdW50ICs9IDEuMDtcXG4gICAgICAgICNlbmRpZlxcbiAgICAjZWxzZVxcbiAgICAgICAgc2hhZG93ID0gMS47XFxuICAgICNlbmRpZlxcblxcbiAgICAjaWZuZGVmIFNIQURPV09OTFlcXG4gICAgICAgICNpZmRlZiBDVVNUT01VU0VSTElHSFRJTkdcXG4gICAgICAgICAgICAvLyBDb21wdXRlIGFuZCByZWZsZWN0IE1Ub29uIGxpZ2h0aW5nXFxuICAgICAgICAgICAgI2lmZGVmIFNQT1RMSUdIVHtYfVxcbiAgICAgICAgICAgICAgICBsaWdodERpcmVjdGlvbiA9IGNvbXB1dGVTcG90TGlnaHREaXJlY3Rpb24obGlnaHR7WH0udkxpZ2h0RGF0YSk7XFxuICAgICAgICAgICAgI2VsaWYgZGVmaW5lZChIRU1JTElHSFR7WH0pXFxuICAgICAgICAgICAgICAgIGxpZ2h0RGlyZWN0aW9uID0gY29tcHV0ZUhlbWlzcGhlcmljTGlnaHREaXJlY3Rpb24obGlnaHR7WH0udkxpZ2h0RGF0YSwgbm9ybWFsVy54eXopO1xcbiAgICAgICAgICAgICNlbGlmIGRlZmluZWQoUE9JTlRMSUdIVHtYfSkgfHwgZGVmaW5lZChESVJMSUdIVHtYfSlcXG4gICAgICAgICAgICAgICAgbGlnaHREaXJlY3Rpb24gPSBjb21wdXRlTGlnaHREaXJlY3Rpb24obGlnaHR7WH0udkxpZ2h0RGF0YSk7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgbXRvb25EaWZmdXNlID0gY29tcHV0ZU1Ub29uRGlmZnVzZUxpZ2h0aW5nKHZpZXdEaXJlY3Rpb25XLnh5eiwgbm9ybWFsVy54eXosIG1haW5VdiwgbGlnaHREaXJlY3Rpb24sIGxpZ2h0e1h9LnZMaWdodERpZmZ1c2UucmdiYSwgc2hhZG93KTtcXG4gICAgICAgICAgICBkaWZmdXNlQmFzZSArPSBtdG9vbkRpZmZ1c2UucmdiO1xcbiAgICAgICAgICAgIGFscGhhID0gbWluKGFscGhhLCBtdG9vbkRpZmZ1c2UuYSk7XFxuICAgICAgICAgICAgI2lmIGRlZmluZWQoQUxQSEFURVNUKSAmJiBBTFBIQVRFU1RcXG4gICAgICAgICAgICAgICAgYWxwaGEgPSAoYWxwaGEgLSBhbHBoYUN1dE9mZikgLyBtYXgoZndpZHRoKGFscGhhKSwgRVBTX0NPTCkgKyAwLjU7IC8vIEFscGhhIHRvIENvdmVyYWdlXFxuICAgICAgICAgICAgICAgIGlmIChhbHBoYSA8IGFscGhhQ3V0T2ZmKSB7XFxuICAgICAgICAgICAgICAgICAgICBkaXNjYXJkO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIGFscGhhID0gMS4wOyAvLyBEaXNjYXJkZWQsIG90aGVyd2lzZSBpdCBzaG91bGQgYmUgYXNzdW1lZCB0byBoYXZlIGZ1bGwgb3BhY2l0eVxcbiAgICAgICAgICAgICNlbHNlXFxuICAgICAgICAgICAgICAgIGlmIChhbHBoYSAtIDAuMDAwMSA8IDAuMDAwKSB7IC8vIFNsaWdodGx5IGltcHJvdmVzIHJlbmRlcmluZyB3aXRoIGxheWVyZWQgdHJhbnNwYXJlbmN5XFxuICAgICAgICAgICAgICAgICAgICBkaXNjYXJkO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAjZWxpZiBkZWZpbmVkKExJR0hUTUFQKSAmJiBkZWZpbmVkKExJR0hUTUFQRVhDTFVERUR7WH0pXFxuICAgICAgICAgICAgZGlmZnVzZUJhc2UgKz0gbGlnaHRtYXBDb2xvci5yZ2IgKiBzaGFkb3c7XFxuICAgICAgICAgICAgI2lmZGVmIFNQRUNVTEFSVEVSTVxcbiAgICAgICAgICAgICAgICAjaWZuZGVmIExJR0hUTUFQTk9TUEVDVUxBUntYfVxcbiAgICAgICAgICAgICAgICAgICAgc3BlY3VsYXJCYXNlICs9IGluZm8uc3BlY3VsYXIgKiBzaGFkb3cgKiBsaWdodG1hcENvbG9yLnJnYjtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2lmZGVmIENMRUFSQ09BVFxcbiAgICAgICAgICAgICAgICAjaWZuZGVmIExJR0hUTUFQTk9TUEVDVUxBUntYfVxcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb2F0QmFzZSArPSBpbmZvLmNsZWFyQ29hdC5yZ2IgKiBzaGFkb3cgKiBsaWdodG1hcENvbG9yLnJnYjtcXG4gICAgICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2lmZGVmIFNIRUVOXFxuICAgICAgICAgICAgICAgICNpZm5kZWYgTElHSFRNQVBOT1NQRUNVTEFSe1h9XFxuICAgICAgICAgICAgICAgICAgICBzaGVlbkJhc2UgKz0gaW5mby5zaGVlbi5yZ2IgKiBzaGFkb3c7XFxuICAgICAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAjaWZkZWYgU0hBRE9XQ1NNREVCVUd7WH1cXG4gICAgICAgICAgICAgICAgZGlmZnVzZUJhc2UgKz0gaW5mby5kaWZmdXNlICogc2hhZG93RGVidWd7WH07XFxuICAgICAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICAgICAgZGlmZnVzZUJhc2UgKz0gaW5mby5kaWZmdXNlICogc2hhZG93O1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgICAgICNpZmRlZiBTUEVDVUxBUlRFUk1cXG4gICAgICAgICAgICAgICAgc3BlY3VsYXJCYXNlICs9IGluZm8uc3BlY3VsYXIgKiBzaGFkb3c7XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgI2lmZGVmIENMRUFSQ09BVFxcbiAgICAgICAgICAgICAgICBjbGVhckNvYXRCYXNlICs9IGluZm8uY2xlYXJDb2F0LnJnYiAqIHNoYWRvdztcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICAjaWZkZWYgU0hFRU5cXG4gICAgICAgICAgICAgICAgc2hlZW5CYXNlICs9IGluZm8uc2hlZW4ucmdiICogc2hhZG93O1xcbiAgICAgICAgICAgICNlbmRpZlxcbiAgICAgICAgI2VuZGlmXFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblwiLG0uRWZmZWN0LkluY2x1ZGVzU2hhZGVyc1N0b3JlLm10b29uQnVtcEZyYWdtZW50PVwiLy8gcmVwbGFjZSB2QnVtcFVWIHRvIG1haW5VdlxcbnZlYzIgdXZPZmZzZXQgPSB2ZWMyKDAuMCwgMC4wKTtcXG5cXG4jaWYgZGVmaW5lZChCVU1QKSB8fCBkZWZpbmVkKFBBUkFMTEFYKSB8fCBkZWZpbmVkKERFVEFJTClcXG4gICAgI2lmZGVmIE5PUk1BTFhZU0NBTEVcXG4gICAgICAgIGZsb2F0IG5vcm1hbFNjYWxlID0gMS4wO1xcbiAgICAjZWxpZiBkZWZpbmVkKEJVTVApXFxuICAgICAgICBmbG9hdCBub3JtYWxTY2FsZSA9IHZCdW1wSW5mb3MueTtcXG4gICAgI2Vsc2VcXG4gICAgICAgIGZsb2F0IG5vcm1hbFNjYWxlID0gMS4wO1xcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmIGRlZmluZWQoVEFOR0VOVCkgJiYgZGVmaW5lZChOT1JNQUwpXFxuICAgICAgICBtYXQzIFRCTiA9IHZUQk47XFxuICAgICNlbGlmIGRlZmluZWQoQlVNUClcXG4gICAgICAgIC8vIHZlYzIgVEJOVVYgPSBnbF9Gcm9udEZhY2luZyA/IHZCdW1wVVYgOiAtdkJ1bXBVVjtcXG4gICAgICAgIHZlYzIgVEJOVVYgPSBnbF9Gcm9udEZhY2luZyA/IG1haW5VdiA6IC1tYWluVXY7XFxuICAgICAgICBtYXQzIFRCTiA9IGNvdGFuZ2VudF9mcmFtZShub3JtYWxXICogbm9ybWFsU2NhbGUsIHZQb3NpdGlvblcsIFRCTlVWLCB2VGFuZ2VudFNwYWNlUGFyYW1zKTtcXG4gICAgI2Vsc2VcXG4gICAgICAgIHZlYzIgVEJOVVYgPSBnbF9Gcm9udEZhY2luZyA/IHZEZXRhaWxVViA6IC12RGV0YWlsVVY7XFxuICAgICAgICBtYXQzIFRCTiA9IGNvdGFuZ2VudF9mcmFtZShub3JtYWxXICogbm9ybWFsU2NhbGUsIHZQb3NpdGlvblcsIFRCTlVWLCB2ZWMyKDEuLCAxLikpO1xcbiAgICAjZW5kaWZcXG4jZWxpZiBkZWZpbmVkKEFOSVNPVFJPUElDKVxcbiAgICAjaWYgZGVmaW5lZChUQU5HRU5UKSAmJiBkZWZpbmVkKE5PUk1BTClcXG4gICAgICAgIG1hdDMgVEJOID0gdlRCTjtcXG4gICAgI2Vsc2VcXG4gICAgICAgIC8vIGZsaXAgdGhlIHV2IGZvciB0aGUgYmFja2ZhY2VcXG4gICAgICAgIHZlYzIgVEJOVVYgPSBnbF9Gcm9udEZhY2luZyA/IHZNYWluVVYxIDogLXZNYWluVVYxO1xcbiAgICAgICAgbWF0MyBUQk4gPSBjb3RhbmdlbnRfZnJhbWUobm9ybWFsVywgdlBvc2l0aW9uVywgVEJOVVYsIHZlYzIoMS4sIDEuKSk7XFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblxcbiNpZmRlZiBQQVJBTExBWFxcbiAgICBtYXQzIGludlRCTiA9IHRyYW5zcG9zZU1hdDMoVEJOKTtcXG5cXG4gICAgI2lmZGVmIFBBUkFMTEFYT0NDTFVTSU9OXFxuICAgICAgICAvLyB1dk9mZnNldCA9IHBhcmFsbGF4T2NjbHVzaW9uKGludlRCTiAqIC12aWV3RGlyZWN0aW9uVywgaW52VEJOICogbm9ybWFsVywgdkJ1bXBVViwgdkJ1bXBJbmZvcy56KTtcXG4gICAgICAgIHV2T2Zmc2V0ID0gcGFyYWxsYXhPY2NsdXNpb24oaW52VEJOICogLXZpZXdEaXJlY3Rpb25XLCBpbnZUQk4gKiBub3JtYWxXLCBtYWluVXYsIHZCdW1wSW5mb3Mueik7XFxuICAgICNlbHNlXFxuICAgICAgICB1dk9mZnNldCA9IHBhcmFsbGF4T2Zmc2V0KGludlRCTiAqIHZpZXdEaXJlY3Rpb25XLCB2QnVtcEluZm9zLnopO1xcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cXG4jaWZkZWYgREVUQUlMXFxuICAgIHZlYzQgZGV0YWlsQ29sb3IgPSB0ZXh0dXJlMkQoZGV0YWlsU2FtcGxlciwgdkRldGFpbFVWICsgdXZPZmZzZXQpO1xcbiAgICB2ZWMyIGRldGFpbE5vcm1hbFJHID0gZGV0YWlsQ29sb3Iud3kgKiAyLjAgLSAxLjA7XFxuICAgIGZsb2F0IGRldGFpbE5vcm1hbEIgPSBzcXJ0KDEuIC0gc2F0dXJhdGUoZG90KGRldGFpbE5vcm1hbFJHLCBkZXRhaWxOb3JtYWxSRykpKTtcXG4gICAgdmVjMyBkZXRhaWxOb3JtYWwgPSB2ZWMzKGRldGFpbE5vcm1hbFJHLCBkZXRhaWxOb3JtYWxCKTtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgQlVNUFxcbiAgICAjaWZkZWYgT0JKRUNUU1BBQ0VfTk9STUFMTUFQXFxuICAgICAgICAvLyBub3JtYWxXID0gbm9ybWFsaXplKHRleHR1cmUyRChidW1wU2FtcGxlciwgdkJ1bXBVVikueHl6ICAqIDIuMCAtIDEuMCk7XFxuICAgICAgICBub3JtYWxXID0gbm9ybWFsaXplKHRleHR1cmUyRChidW1wU2FtcGxlciwgbWFpblV2KS54eXogICogMi4wIC0gMS4wKTtcXG4gICAgICAgIG5vcm1hbFcgPSBub3JtYWxpemUobWF0Myhub3JtYWxNYXRyaXgpICogbm9ybWFsVyk7XFxuICAgICNlbGlmICFkZWZpbmVkKERFVEFJTClcXG4gICAgICAgIC8vIG5vcm1hbFcgPSBwZXJ0dXJiTm9ybWFsKFRCTiwgdGV4dHVyZTJEKGJ1bXBTYW1wbGVyLCB2QnVtcFVWICsgdXZPZmZzZXQpLnh5eiwgdkJ1bXBJbmZvcy55KTtcXG4gICAgICAgIG5vcm1hbFcgPSBwZXJ0dXJiTm9ybWFsKFRCTiwgdGV4dHVyZTJEKGJ1bXBTYW1wbGVyLCBtYWluVXYgKyB1dk9mZnNldCkueHl6LCB2QnVtcEluZm9zLnkpO1xcbiAgICAjZWxzZVxcbiAgICAgICAgLy8gdmVjMyBidW1wTm9ybWFsID0gdGV4dHVyZTJEKGJ1bXBTYW1wbGVyLCB2QnVtcFVWICsgdXZPZmZzZXQpLnh5eiAqIDIuMCAtIDEuMDtcXG4gICAgICAgIHZlYzMgYnVtcE5vcm1hbCA9IHRleHR1cmUyRChidW1wU2FtcGxlciwgbWFpblV2ICsgdXZPZmZzZXQpLnh5eiAqIDIuMCAtIDEuMDtcXG4gICAgICAgIC8vIFJlZmVyZW5jZSBmb3Igbm9ybWFsIGJsZW5kaW5nOiBodHRwczovL2Jsb2cuc2VsZnNoYWRvdy5jb20vcHVibGljYXRpb25zL2JsZW5kaW5nLWluLWRldGFpbC9cXG4gICAgICAgICNpZiBERVRBSUxfTk9STUFMQkxFTkRNRVRIT0QgPT0gMCAvLyB3aGl0ZW91dFxcbiAgICAgICAgICAgIGRldGFpbE5vcm1hbC54eSAqPSB2RGV0YWlsSW5mb3MuejtcXG4gICAgICAgICAgICB2ZWMzIGJsZW5kZWROb3JtYWwgPSBub3JtYWxpemUodmVjMyhidW1wTm9ybWFsLnh5ICsgZGV0YWlsTm9ybWFsLnh5LCBidW1wTm9ybWFsLnogKiBkZXRhaWxOb3JtYWwueikpO1xcbiAgICAgICAgI2VsaWYgREVUQUlMX05PUk1BTEJMRU5ETUVUSE9EID09IDEgLy8gUk5NXFxuICAgICAgICAgICAgZGV0YWlsTm9ybWFsLnh5ICo9IHZEZXRhaWxJbmZvcy56O1xcbiAgICAgICAgICAgIGJ1bXBOb3JtYWwgKz0gdmVjMygwLjAsIDAuMCwgMS4wKTtcXG4gICAgICAgICAgICBkZXRhaWxOb3JtYWwgKj0gdmVjMygtMS4wLCAtMS4wLCAxLjApO1xcbiAgICAgICAgICAgIHZlYzMgYmxlbmRlZE5vcm1hbCA9IGJ1bXBOb3JtYWwgKiBkb3QoYnVtcE5vcm1hbCwgZGV0YWlsTm9ybWFsKSAvIGJ1bXBOb3JtYWwueiAtIGRldGFpbE5vcm1hbDtcXG4gICAgICAgICNlbmRpZlxcbiAgICAgICAgbm9ybWFsVyA9IHBlcnR1cmJOb3JtYWxCYXNlKFRCTiwgYmxlbmRlZE5vcm1hbCwgdkJ1bXBJbmZvcy55KTtcXG4gICAgI2VuZGlmXFxuI2VsaWYgZGVmaW5lZChERVRBSUwpXFxuICAgICAgICBkZXRhaWxOb3JtYWwueHkgKj0gdkRldGFpbEluZm9zLno7XFxuICAgICAgICBub3JtYWxXID0gcGVydHVyYk5vcm1hbEJhc2UoVEJOLCBkZXRhaWxOb3JtYWwsIHZEZXRhaWxJbmZvcy56KTtcXG4jZW5kaWZcXG5cIixtLkVmZmVjdC5TaGFkZXJzU3RvcmUubXRvb25WZXJ0ZXhTaGFkZXI9XCIvLyBpdCBpcyBiYXNlZCBvbiBkZWZhdWx0LnZlcnRleC5meFxcbi8vIFRoaXMgaW5jbHVkZSBpcyBzcGVjaWFsLCBpdCB3aWxsIGJlIHJlcGxhY2VkIHRvIFVib0RlY2xhcmF0aW9uKFdlYkdMMikgb3IgVmVydGV4RGVjbGFyYXRpb24oV2ViR0wxKS5cXG4vLyBAc2VlIGVmZmVjdC50c1xcbiNpbmNsdWRlPF9fZGVjbF9fbXRvb25WZXJ0ZXg+XFxuXFxuLy8gQXR0cmlidXRlc1xcblxcbiNkZWZpbmUgQ1VTVE9NX1ZFUlRFWF9CRUdJTlxcblxcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uO1xcbiNpZmRlZiBOT1JNQUxcXG5hdHRyaWJ1dGUgdmVjMyBub3JtYWw7XFxuI2VuZGlmXFxuI2lmZGVmIFRBTkdFTlRcXG5hdHRyaWJ1dGUgdmVjNCB0YW5nZW50O1xcbiNlbmRpZlxcbiNpZmRlZiBVVjFcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG4jZW5kaWZcXG4jaW5jbHVkZTx1dkF0dHJpYnV0ZURlY2xhcmF0aW9uPlsyLi43XVxcbiNpZmRlZiBWRVJURVhDT0xPUlxcbmF0dHJpYnV0ZSB2ZWM0IGNvbG9yO1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPGhlbHBlckZ1bmN0aW9ucz5cXG5cXG4jaW5jbHVkZTxib25lc0RlY2xhcmF0aW9uPlxcbiNpbmNsdWRlPGJha2VkVmVydGV4QW5pbWF0aW9uRGVjbGFyYXRpb24+XFxuXFxuLy8gVW5pZm9ybXNcXG4jaW5jbHVkZTxpbnN0YW5jZXNEZWNsYXJhdGlvbj5cXG4jaW5jbHVkZTxwcmVQYXNzVmVydGV4RGVjbGFyYXRpb24+XFxuXFxuI2luY2x1ZGU8bWFpblVWVmFyeWluZ0RlY2xhcmF0aW9uPlsxLi43XVxcblxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLERJRkZVU0UsX1ZBUllJTkdOQU1FXyxEaWZmdXNlKVxcbi8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxERVRBSUwsX1ZBUllJTkdOQU1FXyxEZXRhaWwpXFxuLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLEFNQklFTlQsX1ZBUllJTkdOQU1FXyxBbWJpZW50KVxcbi8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxPUEFDSVRZLF9WQVJZSU5HTkFNRV8sT3BhY2l0eSlcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxFTUlTU0lWRSxfVkFSWUlOR05BTUVfLEVtaXNzaXZlKVxcbi8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxMSUdIVE1BUCxfVkFSWUlOR05BTUVfLExpZ2h0bWFwKVxcbi8vICMgaWYgZGVmaW5lZChTUEVDVUxBUlRFUk0pXFxuLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFNQRUNVTEFSLF9WQVJZSU5HTkFNRV8sU3BlY3VsYXIpXFxuLy8gIyBlbmRpZlxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLEJVTVAsX1ZBUllJTkdOQU1FXyxCdW1wKVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFNIQURFLF9WQVJZSU5HTkFNRV8sU2hhZGUpXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sUkVDRUlWRV9TSEFET1csX1ZBUllJTkdOQU1FXyxSZWNlaXZlU2hhZG93KVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFNIQURJTkdfR1JBREUsX1ZBUllJTkdOQU1FXyxTaGFkaW5nR3JhZGUpXFxuI2luY2x1ZGU8c2FtcGxlclZlcnRleERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sUklNLF9WQVJZSU5HTkFNRV8sUmltKVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLE1BVENBUCxfVkFSWUlOR05BTUVfLE1hdENhcClcXG4jaW5jbHVkZTxzYW1wbGVyVmVydGV4RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxPVVRMSU5FX1dJRFRILF9WQVJZSU5HTkFNRV8sT3V0bGluZVdpZHRoKVxcbiNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhEZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFVWX0FOSU1BVElPTl9NQVNLLF9WQVJZSU5HTkFNRV8sVXZBbmltYXRpb25NYXNrKVxcblxcbi8vIEFkZGl0aW9uYWwgVW5pZm9ybXNcXG4jaWZkZWYgT1VUTElORV9XSURUSFxcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCBvdXRsaW5lV2lkdGhTYW1wbGVyO1xcbiNlbmRpZlxcblxcbi8vIE91dHB1dFxcbnZhcnlpbmcgdmVjMyB2UG9zaXRpb25XO1xcbiNpZmRlZiBOT1JNQUxcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbFc7XFxuI2VuZGlmXFxuXFxuI2lmIGRlZmluZWQoVkVSVEVYQ09MT1IpIHx8IGRlZmluZWQoSU5TVEFOQ0VTQ09MT1IpXFxudmFyeWluZyB2ZWM0IHZDb2xvcjtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxidW1wVmVydGV4RGVjbGFyYXRpb24+XFxuXFxuI2luY2x1ZGU8Y2xpcFBsYW5lVmVydGV4RGVjbGFyYXRpb24+XFxuXFxuI2luY2x1ZGU8Zm9nVmVydGV4RGVjbGFyYXRpb24+XFxuI2luY2x1ZGU8X19kZWNsX19saWdodFZ4RnJhZ21lbnQ+WzAuLm1heFNpbXVsdGFuZW91c0xpZ2h0c11cXG5cXG4jaW5jbHVkZTxtb3JwaFRhcmdldHNWZXJ0ZXhHbG9iYWxEZWNsYXJhdGlvbj5cXG4jaW5jbHVkZTxtb3JwaFRhcmdldHNWZXJ0ZXhEZWNsYXJhdGlvbj5bMC4ubWF4U2ltdWx0YW5lb3VzTW9ycGhUYXJnZXRzXVxcblxcbi8vICMgaWZkZWYgUkVGTEVDVElPTk1BUF9TS1lCT1hcXG4vLyB2YXJ5aW5nIHZlYzMgdlBvc2l0aW9uVVZXO1xcbi8vICMgZW5kaWZcXG5cXG4vLyAjIGlmIGRlZmluZWQoUkVGTEVDVElPTk1BUF9FUVVJUkVDVEFOR1VMQVJfRklYRUQpIHx8IGRlZmluZWQoUkVGTEVDVElPTk1BUF9NSVJST1JFREVRVUlSRUNUQU5HVUxBUl9GSVhFRClcXG4vLyB2YXJ5aW5nIHZlYzMgdkRpcmVjdGlvblc7XFxuLy8gIyBlbmRpZlxcblxcbiNpbmNsdWRlPGxvZ0RlcHRoRGVjbGFyYXRpb24+XFxuI2RlZmluZSBDVVNUT01fVkVSVEVYX0RFRklOSVRJT05TXFxuXFxudm9pZCBtYWluKHZvaWQpIHtcXG5cXG4gICAgI2RlZmluZSBDVVNUT01fVkVSVEVYX01BSU5fQkVHSU5cXG5cXG4gICAgdmVjMyBwb3NpdGlvblVwZGF0ZWQgPSBwb3NpdGlvbjtcXG4jaWZkZWYgTk9STUFMXFxuICAgIHZlYzMgbm9ybWFsVXBkYXRlZCA9IG5vcm1hbDtcXG4jZW5kaWZcXG4jaWZkZWYgVEFOR0VOVFxcbiAgICB2ZWM0IHRhbmdlbnRVcGRhdGVkID0gdGFuZ2VudDtcXG4jZW5kaWZcXG4jaWZkZWYgVVYxXFxuICAgIHZlYzIgdXZVcGRhdGVkID0gdXY7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8bW9ycGhUYXJnZXRzVmVydGV4R2xvYmFsPlxcbiNpbmNsdWRlPG1vcnBoVGFyZ2V0c1ZlcnRleD5bMC4ubWF4U2ltdWx0YW5lb3VzTW9ycGhUYXJnZXRzXVxcblxcbi8vICMgaWZkZWYgUkVGTEVDVElPTk1BUF9TS1lCT1hcXG4vLyAgICAgdlBvc2l0aW9uVVZXID0gcG9zaXRpb25VcGRhdGVkO1xcbi8vICMgZW5kaWZcXG5cXG4jZGVmaW5lIENVU1RPTV9WRVJURVhfVVBEQVRFX1BPU0lUSU9OXFxuXFxuI2RlZmluZSBDVVNUT01fVkVSVEVYX1VQREFURV9OT1JNQUxcXG5cXG4jaW5jbHVkZTxpbnN0YW5jZXNWZXJ0ZXg+XFxuXFxuI2lmIGRlZmluZWQoUFJFUEFTUykgJiYgZGVmaW5lZChQUkVQQVNTX1ZFTE9DSVRZKSAmJiAhZGVmaW5lZChCT05FU19WRUxPQ0lUWV9FTkFCTEVEKVxcbiAgICAvLyBDb21wdXRlIHZlbG9jaXR5IGJlZm9yZSBib25lcyBjb21wdXRhdGlvblxcbiAgICB2Q3VycmVudFBvc2l0aW9uID0gdmlld1Byb2plY3Rpb24gKiBmaW5hbFdvcmxkICogdmVjNChwb3NpdGlvblVwZGF0ZWQsIDEuMCk7XFxuICAgIHZQcmV2aW91c1Bvc2l0aW9uID0gcHJldmlvdXNWaWV3UHJvamVjdGlvbiAqIGZpbmFsUHJldmlvdXNXb3JsZCAqIHZlYzQocG9zaXRpb25VcGRhdGVkLCAxLjApO1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPGJvbmVzVmVydGV4PlxcbiNpbmNsdWRlPGJha2VkVmVydGV4QW5pbWF0aW9uPlxcblxcbiAgICAvLyBUZXh0dXJlIGNvb3JkaW5hdGVzXFxuI2lmbmRlZiBVVjFcXG4gICAgdmVjMiB1dlVwZGF0ZWQgPSB2ZWMyKDAuLCAwLik7XFxuI2VuZGlmXFxuI2lmZGVmIE1BSU5VVjFcXG4gICAgdk1haW5VVjEgPSB1dlVwZGF0ZWQ7XFxuI2VuZGlmXFxuI2luY2x1ZGU8dXZWYXJpYWJsZURlY2xhcmF0aW9uPlsyLi43XVxcblxcbiAgICBmbG9hdCBvdXRsaW5lVGV4ID0gMS4wO1xcbiAgICBpZiAoaXNPdXRsaW5lID09IDEuMCkge1xcbiNpZmRlZiBPVVRMSU5FX1dJRFRIXFxuICAgICNpZiBPVVRMSU5FX1dJRFRIRElSRUNUVVYgPT0gMFxcbiAgICAgICAgaWYgKHZPdXRsaW5lV2lkdGhJbmZvcy54ID09IDAuKVxcbiAgICAgICAge1xcbiAgICAgICAgICAgIHZPdXRsaW5lV2lkdGhVViA9IHZlYzIob3V0bGluZVdpZHRoTWF0cml4ICogdmVjNCh1dlVwZGF0ZWQsIDEuMCwgMC4wKSk7XFxuICAgICAgICB9XFxuICAgICAgICAjaWZkZWYgVVYyXFxuICAgICAgICBlbHNlIGlmICh2T3V0bGluZVdpZHRoSW5mb3MueCA9PSAxLilcXG4gICAgICAgIHtcXG4gICAgICAgICAgICB2T3V0bGluZVdpZHRoVVYgPSB2ZWMyKG91dGxpbmVXaWR0aE1hdHJpeCAqIHZlYzQodXYyLCAxLjAsIDAuMCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgI2VuZGlmXFxuICAgICAgICAjaWZkZWYgVVYzXFxuICAgICAgICBlbHNlIGlmICh2T3V0bGluZVdpZHRoSW5mb3MueCA9PSAyLilcXG4gICAgICAgIHtcXG4gICAgICAgICAgICB2T3V0bGluZVdpZHRoVVYgPSB2ZWMyKG91dGxpbmVXaWR0aE1hdHJpeCAqIHZlYzQodXYzLCAxLjAsIDAuMCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgI2VuZGlmXFxuICAgICAgICAjaWZkZWYgVVY0XFxuICAgICAgICBlbHNlIGlmICh2T3V0bGluZVdpZHRoSW5mb3MueCA9PSAzLilcXG4gICAgICAgIHtcXG4gICAgICAgICAgICB2T3V0bGluZVdpZHRoVVYgPSB2ZWMyKG91dGxpbmVXaWR0aE1hdHJpeCAqIHZlYzQodXY0LCAxLjAsIDAuMCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgI2VuZGlmXFxuICAgICAgICAjaWZkZWYgVVY1XFxuICAgICAgICBlbHNlIGlmICh2T3V0bGluZVdpZHRoSW5mb3MueCA9PSA0LilcXG4gICAgICAgIHtcXG4gICAgICAgICAgICB2T3V0bGluZVdpZHRoVVYgPSB2ZWMyKG91dGxpbmVXaWR0aE1hdHJpeCAqIHZlYzQodXY1LCAxLjAsIDAuMCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgI2VuZGlmXFxuICAgICAgICAjaWZkZWYgVVY2XFxuICAgICAgICBlbHNlIGlmICh2T3V0bGluZVdpZHRoSW5mb3MueCA9PSA1LilcXG4gICAgICAgIHtcXG4gICAgICAgICAgICB2T3V0bGluZVdpZHRoVVYgPSB2ZWMyKG91dGxpbmVXaWR0aE1hdHJpeCAqIHZlYzQodXY2LCAxLjAsIDAuMCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgI2VuZGlmXFxuICAgICNlbGlmIGRlZmluZWQoTUFJTlVWMSlcXG4gICAgICAgIHZlYzIgdk91dGxpbmVXaWR0aFVWID0gdk1haW5VVjE7XFxuICAgICNlbGlmIGRlZmluZWQoTUFJTlVWMilcXG4gICAgICAgIHZlYzIgdk91dGxpbmVXaWR0aFVWID0gdk1haW5VVjI7XFxuICAgICNlbHNlXFxuICAgICAgICB2ZWMyIHZPdXRsaW5lV2lkdGhVViA9IHZlYzIoMC4sIDAuKTtcXG4gICAgI2VuZGlmXFxuICAgICAgICBvdXRsaW5lVGV4ID0gdGV4dHVyZTJEKG91dGxpbmVXaWR0aFNhbXBsZXIsIHZPdXRsaW5lV2lkdGhVVikuciAqIHZPdXRsaW5lV2lkdGhJbmZvcy55O1xcbiNlbmRpZlxcblxcbiNpZiBkZWZpbmVkKE1UT09OX09VVExJTkVfV0lEVEhfV09STEQpICYmIGRlZmluZWQoTk9STUFMKVxcbiAgICAgICAgLy8gbW92ZSBzbGlnaHRseSB3b3JsZCBub3JtYWxcXG4gICAgICAgIHZlYzMgb3V0bGluZU9mZnNldCA9IDAuMDEgKiBvdXRsaW5lV2lkdGggKiBvdXRsaW5lVGV4ICogbGVuZ3RoKHRyYW5zcG9zZU1hdDMoaW52ZXJzZU1hdDMobWF0MyhmaW5hbFdvcmxkKSkpICogbm9ybWFsVXBkYXRlZCkgKiBub3JtYWxVcGRhdGVkO1xcbiAgICAgICAgcG9zaXRpb25VcGRhdGVkICs9IG91dGxpbmVPZmZzZXQ7XFxuI2VuZGlmXFxuICAgIH0gLy8gRW5kIGlzT3V0bGluZSA9PSAxLjBcXG5cXG4gICAgdmVjNCB3b3JsZFBvcyA9IGZpbmFsV29ybGQgKiB2ZWM0KHBvc2l0aW9uVXBkYXRlZCwgMS4wKTtcXG5cXG4jaWZkZWYgTk9STUFMXFxuICAgIG1hdDMgbm9ybWFsV29ybGQgPSBtYXQzKGZpbmFsV29ybGQpO1xcblxcbiAgICAjaWYgZGVmaW5lZChJTlNUQU5DRVMpICYmIGRlZmluZWQoVEhJTl9JTlNUQU5DRVMpXFxuICAgICAgICB2Tm9ybWFsVyA9IG5vcm1hbFVwZGF0ZWQgLyB2ZWMzKGRvdChub3JtYWxXb3JsZFswXSwgbm9ybWFsV29ybGRbMF0pLCBkb3Qobm9ybWFsV29ybGRbMV0sIG5vcm1hbFdvcmxkWzFdKSwgZG90KG5vcm1hbFdvcmxkWzJdLCBub3JtYWxXb3JsZFsyXSkpO1xcbiAgICAgICAgdk5vcm1hbFcgPSBub3JtYWxpemUobm9ybWFsV29ybGQgKiB2Tm9ybWFsVyk7XFxuICAgICNlbHNlXFxuICAgICAgICAjaWZkZWYgTk9OVU5JRk9STVNDQUxJTkdcXG4gICAgICAgICAgICBub3JtYWxXb3JsZCA9IHRyYW5zcG9zZU1hdDMoaW52ZXJzZU1hdDMobm9ybWFsV29ybGQpKTtcXG4gICAgICAgICNlbmRpZlxcblxcbiAgICAgICAgdk5vcm1hbFcgPSBub3JtYWxpemUobm9ybWFsV29ybGQgKiBub3JtYWxVcGRhdGVkKTtcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXFxuI2RlZmluZSBDVVNUT01fVkVSVEVYX1VQREFURV9XT1JMRFBPU1xcblxcbiNpZmRlZiBNVUxUSVZJRVdcXG4gICAgaWYgKGdsX1ZpZXdJRF9PVlIgPT0gMHUpIHtcXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdmlld1Byb2plY3Rpb24gKiB3b3JsZFBvcztcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdmlld1Byb2plY3Rpb25SICogd29ybGRQb3M7XFxuICAgIH1cXG4jZWxzZVxcbiAgICBnbF9Qb3NpdGlvbiA9IHZpZXdQcm9qZWN0aW9uICogd29ybGRQb3M7XFxuI2VuZGlmXFxuXFxuICAgIGlmIChpc091dGxpbmUgPT0gMS4wKSB7XFxuI2lmIGRlZmluZWQoTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU4pICYmIGRlZmluZWQoTk9STUFMKVxcbiAgICAgICAgdmVjMyB2aWV3Tm9ybWFsID0gdHJhbnNwb3NlTWF0MyhpbnZlcnNlTWF0MyhtYXQzKHZpZXcpICogbWF0MyhmaW5hbFdvcmxkKSkpICogbm9ybWFsVXBkYXRlZDtcXG4gICAgICAgIHZlYzMgY2xpcE5vcm1hbCA9IG1hdDMocHJvamVjdGlvbikgKiB2aWV3Tm9ybWFsO1xcbiAgICAgICAgdmVjMiBwcm9qZWN0ZWROb3JtYWwgPSBub3JtYWxpemUoY2xpcE5vcm1hbC54eSk7XFxuICAgICAgICBwcm9qZWN0ZWROb3JtYWwgKj0gbWluKGdsX1Bvc2l0aW9uLncsIG91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZSk7XFxuICAgICAgICBwcm9qZWN0ZWROb3JtYWwueCAvPSBhc3BlY3Q7IC8vIGFzcGVjdCBpbiBvcmlnaW5hbCBtdG9vbiBpcyB5L3guIGFzcGVjdCBpbiBiYWJ5bG9uIGlzIHgveS5cXG4gICAgICAgIGdsX1Bvc2l0aW9uLnh5ICs9IDAuMDEgKiBvdXRsaW5lV2lkdGggKiBvdXRsaW5lVGV4ICogcHJvamVjdGVkTm9ybWFsICogY2xhbXAoMS4wIC0gYWJzKG5vcm1hbGl6ZSh2aWV3Tm9ybWFsKS56KSwgMC4wLCAxLjApOyAvLyBpZ25vcmUgb2Zmc2V0IHdoZW4gbm9ybWFsIHRvd2FyZCBjYW1lcmFcXG4jZW5kaWZcXG5cXG4gICAgICAgIGdsX1Bvc2l0aW9uLnogKz0gMUUtNiAqIGdsX1Bvc2l0aW9uLnc7IC8vIGFudGktYXJ0aWZhY3QgbWFnaWMgZnJvbSB0aHJlZS12cm1cXG4gICAgfVxcblxcbiAgICB3b3JsZFBvcyA9IGZpbmFsV29ybGQgKiB2ZWM0KHBvc2l0aW9uVXBkYXRlZCwgMS4wKTtcXG4gICAgdlBvc2l0aW9uVyA9IHZlYzMod29ybGRQb3MpO1xcblxcbiNpbmNsdWRlPHByZVBhc3NWZXJ0ZXg+XFxuXFxuLy8gIyBpZiBkZWZpbmVkKFJFRkxFQ1RJT05NQVBfRVFVSVJFQ1RBTkdVTEFSX0ZJWEVEKSB8fCBkZWZpbmVkKFJFRkxFQ1RJT05NQVBfTUlSUk9SRURFUVVJUkVDVEFOR1VMQVJfRklYRUQpXFxuLy8gICAgIHZEaXJlY3Rpb25XID0gbm9ybWFsaXplKHZlYzMoZmluYWxXb3JsZCAqIHZlYzQocG9zaXRpb25VcGRhdGVkLCAwLjApKSk7XFxuLy8gIyBlbmRpZlxcblxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxESUZGVVNFLF9WQVJZSU5HTkFNRV8sRGlmZnVzZSxfTUFUUklYTkFNRV8sZGlmZnVzZSxfSU5GT05BTUVfLERpZmZ1c2VJbmZvcy54KVxcbiAgICAvLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sREVUQUlMLF9WQVJZSU5HTkFNRV8sRGV0YWlsLF9NQVRSSVhOQU1FXyxkZXRhaWwsX0lORk9OQU1FXyxEZXRhaWxJbmZvcy54KVxcbiAgICAvLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sQU1CSUVOVCxfVkFSWUlOR05BTUVfLEFtYmllbnQsX01BVFJJWE5BTUVfLGFtYmllbnQsX0lORk9OQU1FXyxBbWJpZW50SW5mb3MueClcXG4gICAgLy8gIyBpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLE9QQUNJVFksX1ZBUllJTkdOQU1FXyxPcGFjaXR5LF9NQVRSSVhOQU1FXyxvcGFjaXR5LF9JTkZPTkFNRV8sT3BhY2l0eUluZm9zLngpXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLEVNSVNTSVZFLF9WQVJZSU5HTkFNRV8sRW1pc3NpdmUsX01BVFJJWE5BTUVfLGVtaXNzaXZlLF9JTkZPTkFNRV8sRW1pc3NpdmVJbmZvcy54KVxcbiAgICAvLyAjIGluY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sTElHSFRNQVAsX1ZBUllJTkdOQU1FXyxMaWdodG1hcCxfTUFUUklYTkFNRV8sbGlnaHRtYXAsX0lORk9OQU1FXyxMaWdodG1hcEluZm9zLngpXFxuICAgIC8vICMgaWYgZGVmaW5lZChTUEVDVUxBUlRFUk0pXFxuICAgIC8vICMgaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxTUEVDVUxBUixfVkFSWUlOR05BTUVfLFNwZWN1bGFyLF9NQVRSSVhOQU1FXyxzcGVjdWxhcixfSU5GT05BTUVfLFNwZWN1bGFySW5mb3MueClcXG4gICAgLy8gIyBlbmRpZlxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxCVU1QLF9WQVJZSU5HTkFNRV8sQnVtcCxfTUFUUklYTkFNRV8sYnVtcCxfSU5GT05BTUVfLEJ1bXBJbmZvcy54KVxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxTSEFERSxfVkFSWUlOR05BTUVfLFNoYWRlLF9NQVRSSVhOQU1FXyxzaGFkZSxfSU5GT05BTUVfLFNoYWRlSW5mb3MueClcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sUkVDRUlWRV9TSEFET1csX1ZBUllJTkdOQU1FXyxSZWNlaXZlU2hhZG93LF9NQVRSSVhOQU1FXyxyZWNlaXZlU2hhZG93LF9JTkZPTkFNRV8sUmVjZWl2ZVNoYWRvd0luZm9zLngpXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLFNIQURJTkdfR1JBREUsX1ZBUllJTkdOQU1FXyxTaGFkaW5nR3JhZGUsX01BVFJJWE5BTUVfLHNoYWRpbmdHcmFkZSxfSU5GT05BTUVfLFNoYWRpbmdHcmFkZUluZm9zLngpXFxuICAgICNpbmNsdWRlPHNhbXBsZXJWZXJ0ZXhJbXBsZW1lbnRhdGlvbj4oX0RFRklORU5BTUVfLFJJTSxfVkFSWUlOR05BTUVfLFJpbSxfTUFUUklYTkFNRV8scmltLF9JTkZPTkFNRV8sUmltSW5mb3MueClcXG4gICAgI2luY2x1ZGU8c2FtcGxlclZlcnRleEltcGxlbWVudGF0aW9uPihfREVGSU5FTkFNRV8sTUFUQ0FQLF9WQVJZSU5HTkFNRV8sTWF0Q2FwLF9NQVRSSVhOQU1FXyxtYXRDYXAsX0lORk9OQU1FXyxNYXRDYXBJbmZvcy54KVxcbiAgICAjaW5jbHVkZTxzYW1wbGVyVmVydGV4SW1wbGVtZW50YXRpb24+KF9ERUZJTkVOQU1FXyxVVl9BTklNQVRJT05fTUFTSyxfVkFSWUlOR05BTUVfLFV2QW5pbWF0aW9uTWFzayxfTUFUUklYTkFNRV8sdXZBbmltYXRpb25NYXNrLF9JTkZPTkFNRV8sdXZBbmltYXRpb25NYXNrSW5mb3MueClcXG5cXG4jaW5jbHVkZTxidW1wVmVydGV4PlxcbiNpbmNsdWRlPGNsaXBQbGFuZVZlcnRleD5cXG4jaW5jbHVkZTxmb2dWZXJ0ZXg+XFxuI2luY2x1ZGU8c2hhZG93c1ZlcnRleD5bMC4ubWF4U2ltdWx0YW5lb3VzTGlnaHRzXVxcblxcbiNpZmRlZiBWRVJURVhDT0xPUlxcbiAgICB2Q29sb3IgPSBjb2xvcjtcXG4jZWxpZiBkZWZpbmVkKElOU1RBTkNFU0NPTE9SKSAmJiBJTlNUQU5DRVNDT0xPUlxcbiAgICB2Q29sb3IgPSBpbnN0YW5jZUNvbG9yO1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPHBvaW50Q2xvdWRWZXJ0ZXg+XFxuI2luY2x1ZGU8bG9nRGVwdGhWZXJ0ZXg+XFxuXFxuI2RlZmluZSBDVVNUT01fVkVSVEVYX01BSU5fRU5EXFxuXFxufVxcblwiLG0uRWZmZWN0LlNoYWRlcnNTdG9yZS5tdG9vbkZyYWdtZW50U2hhZGVyPVwiI2luY2x1ZGU8X19kZWNsX19tdG9vbkZyYWdtZW50PlxcblxcbiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXFxuXFxuI2luY2x1ZGU8cHJlUGFzc0RlY2xhcmF0aW9uPltTQ0VORV9NUlRfQ09VTlRdXFxuI2luY2x1ZGU8b2l0RGVjbGFyYXRpb24+XFxuXFxuI2RlZmluZSBDVVNUT01fRlJBR01FTlRfQkVHSU5cXG5cXG4jaWZkZWYgTE9HQVJJVEhNSUNERVBUSFxcbiNleHRlbnNpb24gR0xfRVhUX2ZyYWdfZGVwdGggOiBlbmFibGVcXG4jZW5kaWZcXG5cXG4vLyBDb25zdGFudHNcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkyIDAuMTU5MTU0OTRcXG4jZGVmaW5lIFBJXzIgNi4yODMxODUzMDcxOFxcbiNkZWZpbmUgRVBTX0NPTCAwLjAwMDAxXFxuXFxuLy8gSW5wdXRcXG52YXJ5aW5nIHZlYzMgdlBvc2l0aW9uVztcXG5cXG4jaWZkZWYgTk9STUFMXFxudmFyeWluZyB2ZWMzIHZOb3JtYWxXO1xcbiNlbmRpZlxcblxcbiNpZiBkZWZpbmVkKFZFUlRFWENPTE9SKSB8fCBkZWZpbmVkKElOU1RBTkNFU0NPTE9SKVxcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XFxuI2VuZGlmXFxuXFxuI2luY2x1ZGU8bWFpblVWVmFyeWluZ0RlY2xhcmF0aW9uPlsxLi43XVxcblxcbi8vIEhlbHBlciBmdW5jdGlvbnNcXG4jaW5jbHVkZTxoZWxwZXJGdW5jdGlvbnM+XFxuXFxuLy8gTGlnaHRzXFxuI2luY2x1ZGU8X19kZWNsX19saWdodEZyYWdtZW50PlswLi5tYXhTaW11bHRhbmVvdXNMaWdodHNdXFxuXFxuI2luY2x1ZGU8bGlnaHRzRnJhZ21lbnRGdW5jdGlvbnM+XFxuI2luY2x1ZGU8c2hhZG93c0ZyYWdtZW50RnVuY3Rpb25zPlxcblxcbi8vIFNhbXBsZXJzXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxESUZGVVNFLF9WQVJZSU5HTkFNRV8sRGlmZnVzZSxfU0FNUExFUk5BTUVfLGRpZmZ1c2UpXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxFTUlTU0lWRSxfVkFSWUlOR05BTUVfLEVtaXNzaXZlLF9TQU1QTEVSTkFNRV8sZW1pc3NpdmUpXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxTSEFERSxfVkFSWUlOR05BTUVfLFNoYWRlLF9TQU1QTEVSTkFNRV8sc2hhZGUpXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxSRUNFSVZFX1NIQURPVyxfVkFSWUlOR05BTUVfLFJlY2VpdmVTaGFkb3csX1NBTVBMRVJOQU1FXyxyZWNlaXZlU2hhZG93KVxcbiNpbmNsdWRlPHNhbXBsZXJGcmFnbWVudERlY2xhcmF0aW9uPihfREVGSU5FTkFNRV8sU0hBRElOR19HUkFERSxfVkFSWUlOR05BTUVfLFNoYWRpbmdHcmFkZSxfU0FNUExFUk5BTUVfLHNoYWRpbmdHcmFkZSlcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLFJJTSxfVkFSWUlOR05BTUVfLFJpbSxfU0FNUExFUk5BTUVfLHJpbSlcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLE1BVENBUCxfVkFSWUlOR05BTUVfLE1hdENhcCxfU0FNUExFUk5BTUVfLG1hdENhcClcXG4jaW5jbHVkZTxzYW1wbGVyRnJhZ21lbnREZWNsYXJhdGlvbj4oX0RFRklORU5BTUVfLE9VVExJTkVfV0lEVEgsX1ZBUllJTkdOQU1FXyxPdXRsaW5lV2lkdGgsX1NBTVBMRVJOQU1FXyxvdXRsaW5lV2lkdGgpXFxuI2luY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxVVl9BTklNQVRJT05fTUFTSyxfVkFSWUlOR05BTUVfLFV2QW5pbWF0aW9uTWFzayxfU0FNUExFUk5BTUVfLHV2QW5pbWF0aW9uTWFzaylcXG5cXG4jaW5jbHVkZTxtdG9vbkZyYWdtZW50RnVuY3Rpb25zPlxcblxcbi8vICMgaWZkZWYgUkVGUkFDVElPTlxcblxcbi8vICMgaWZkZWYgUkVGUkFDVElPTk1BUF8zRFxcbi8vIHVuaWZvcm0gc2FtcGxlckN1YmUgcmVmcmFjdGlvbkN1YmVTYW1wbGVyO1xcbi8vICMgZWxzZVxcbi8vIHVuaWZvcm0gc2FtcGxlcjJEIHJlZnJhY3Rpb24yRFNhbXBsZXI7XFxuLy8gIyBlbmRpZlxcblxcbi8vICMgZW5kaWZcXG5cXG4vLyAjIGlmIGRlZmluZWQoU1BFQ1VMQVJURVJNKVxcbi8vICAgICAjIGluY2x1ZGU8c2FtcGxlckZyYWdtZW50RGVjbGFyYXRpb24+KF9ERUZJTkVOQU1FXyxTUEVDVUxBUixfVkFSWUlOR05BTUVfLFNwZWN1bGFyLF9TQU1QTEVSTkFNRV8sc3BlY3VsYXIpXFxuLy8gIyBlbmRpZlxcblxcbi8vIC8vIEZyZXNuZWxcXG4vLyAjIGluY2x1ZGU8ZnJlc25lbEZ1bmN0aW9uPlxcblxcbi8vIC8vIFJlZmxlY3Rpb25cXG4vLyAjIGlmZGVmIFJFRkxFQ1RJT05cXG4vLyAjIGlmZGVmIFJFRkxFQ1RJT05NQVBfM0RcXG4vLyB1bmlmb3JtIHNhbXBsZXJDdWJlIHJlZmxlY3Rpb25DdWJlU2FtcGxlcjtcXG4vLyAjIGVsc2VcXG4vLyB1bmlmb3JtIHNhbXBsZXIyRCByZWZsZWN0aW9uMkRTYW1wbGVyO1xcbi8vICMgZW5kaWZcXG5cXG4vLyAjIGlmZGVmIFJFRkxFQ1RJT05NQVBfU0tZQk9YXFxuLy8gdmFyeWluZyB2ZWMzIHZQb3NpdGlvblVWVztcXG4vLyAjIGVsc2VcXG4vLyAjIGlmIGRlZmluZWQoUkVGTEVDVElPTk1BUF9FUVVJUkVDVEFOR1VMQVJfRklYRUQpIHx8IGRlZmluZWQoUkVGTEVDVElPTk1BUF9NSVJST1JFREVRVUlSRUNUQU5HVUxBUl9GSVhFRClcXG4vLyB2YXJ5aW5nIHZlYzMgdkRpcmVjdGlvblc7XFxuLy8gIyBlbmRpZlxcblxcbi8vICMgZW5kaWZcXG5cXG4vLyAjIGluY2x1ZGU8cmVmbGVjdGlvbkZ1bmN0aW9uPlxcblxcbi8vICMgZW5kaWZcXG5cXG4jaW5jbHVkZTxpbWFnZVByb2Nlc3NpbmdEZWNsYXJhdGlvbj5cXG5cXG4jaW5jbHVkZTxpbWFnZVByb2Nlc3NpbmdGdW5jdGlvbnM+XFxuXFxuI2luY2x1ZGU8YnVtcEZyYWdtZW50TWFpbkZ1bmN0aW9ucz5cXG4jaW5jbHVkZTxidW1wRnJhZ21lbnRGdW5jdGlvbnM+XFxuI2luY2x1ZGU8Y2xpcFBsYW5lRnJhZ21lbnREZWNsYXJhdGlvbj5cXG4jaW5jbHVkZTxsb2dEZXB0aERlY2xhcmF0aW9uPlxcbiNpbmNsdWRlPGZvZ0ZyYWdtZW50RGVjbGFyYXRpb24+XFxuXFxuI2RlZmluZSBDVVNUT01fRlJBR01FTlRfREVGSU5JVElPTlNcXG5cXG52b2lkIG1haW4odm9pZCkge1xcbiNpZmRlZiBNVE9PTl9DTElQX0lGX09VVExJTkVfSVNfTk9ORVxcbiAgICAjaWZkZWYgTVRPT05fT1VUTElORV9XSURUSF9XT1JMRFxcbiAgICAjZWxpZiBkZWZpbmVkKE1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOKVxcbiAgICAjZWxzZVxcbiAgICAgICAgZGlzY2FyZDtcXG4gICAgI2VuZGlmXFxuI2VuZGlmXFxuXFxuI2RlZmluZSBDVVNUT01fRlJBR01FTlRfTUFJTl9CRUdJTlxcblxcbiNpbmNsdWRlPG9pdEZyYWdtZW50PlxcblxcbiNpbmNsdWRlPGNsaXBQbGFuZUZyYWdtZW50PlxcblxcbiAgICB2ZWMzIHZpZXdEaXJlY3Rpb25XID0gbm9ybWFsaXplKHZFeWVQb3NpdGlvbi54eXogLSB2UG9zaXRpb25XKTtcXG5cXG4gICAgLy8gQmFzZSBjb2xvclxcbiAgICB2ZWM0IGJhc2VDb2xvciA9IHZlYzQoMS4sIDEuLCAxLiwgMS4pO1xcbiAgICB2ZWMzIGRpZmZ1c2VDb2xvciA9IHZlYzMoMS4sIDEuLCAxLik7XFxuXFxuICAgIC8vIEFscGhhXFxuICAgIGZsb2F0IGFscGhhID0gMS4wO1xcblxcbiAgICAvLyBCdW1wXFxuI2lmZGVmIE5PUk1BTFxcbiAgICB2ZWMzIG5vcm1hbFcgPSBub3JtYWxpemUodk5vcm1hbFcpO1xcbiNlbHNlXFxuICAgIHZlYzMgbm9ybWFsVyA9IG5vcm1hbGl6ZSgtY3Jvc3MoZEZkeCh2UG9zaXRpb25XKSwgZEZkeSh2UG9zaXRpb25XKSkpO1xcbiNlbmRpZlxcblxcbiNpbmNsdWRlPGRlcHRoUHJlUGFzcz5cXG5cXG4gICAgLy8gQW1iaWVudCBjb2xvclxcbiAgICB2ZWMzIGJhc2VBbWJpZW50Q29sb3IgPSB2ZWMzKDEuLCAxLiwgMS4pO1xcbiAgICBmbG9hdCBnbG9zc2luZXNzID0gMC47XFxuXFxuICAgIC8vIExpZ2h0aW5nXFxuICAgIHZlYzMgZGlmZnVzZUJhc2UgPSB2ZWMzKDAuLCAwLiwgMC4pO1xcbiAgICBsaWdodGluZ0luZm8gaW5mbztcXG4gICAgZmxvYXQgc2hhZG93ID0gMS47XFxuICAgIHZlYzMgbGlnaHREaXJlY3Rpb24gPSB2ZWMzKDAuMCwgMS4wLCAwLjApO1xcbiAgICB2ZWM0IG10b29uRGlmZnVzZSA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcXG5cXG4gICAgLy8gTVRvb24gVVZcXG4gICAgLy8gQWxsIHRleHR1cmVzIHdpbGwgdXNlIGRpZmZ1c2UoX01haW5UZXgpIFVWXFxuICAgIHZlYzIgbWFpblV2ID0gdmVjMigwLjApO1xcbiNpZmRlZiBESUZGVVNFXFxuICAgIG1haW5VdiArPSB2RGlmZnVzZVVWO1xcbiNlbGlmIGRlZmluZWQoTUFJTlVWMSlcXG4gICAgbWFpblV2ICs9IHZNYWluVVYxO1xcbiNlbGlmIGRlZmluZWQoTUFJTlVWMilcXG4gICAgbWFpblV2ICs9IHZNYWluVVYyO1xcbiNlbmRpZlxcblxcbiAgICAvLyB1diBhbmltXFxuICAgIGZsb2F0IHV2QW5pbSA9IHRpbWUueTtcXG4jaWZkZWYgVVZfQU5JTUFUSU9OX01BU0tcXG4gICAgdXZBbmltICo9IHRleHR1cmUyRCh1dkFuaW1hdGlvbk1hc2tTYW1wbGVyLCBtYWluVXYpLnI7XFxuI2VuZGlmXFxuICAgIC8vIHRyYW5zbGF0ZSB1diBpbiBib3R0b20tbGVmdCBvcmlnaW4gY29vcmRpbmF0ZXMuXFxuICAgIC8vIHV2IGlzIHJldmVyc2VkXFxuICAgIG1haW5VdiArPSB2ZWMyKC11dkFuaW1hdGlvblNjcm9sbFgsIC11dkFuaW1hdGlvblNjcm9sbFkpICogdXZBbmltO1xcbiAgICAvLyByb3RhdGUgdXYgY291bnRlci1jbG9ja3dpc2UgYXJvdW5kICgwLjUsIDAuNSkgaW4gYm90dG9tLWxlZnQgb3JpZ2luIGNvb3JkaW5hdGVzLlxcbiAgICBmbG9hdCByb3RhdGVSYWQgPSB1dkFuaW1hdGlvblJvdGF0aW9uICogUElfMiAqIHV2QW5pbTtcXG4gICAgdmVjMiByb3RhdGVQaXZvdCA9IHZlYzIoMC41LCAwLjUpO1xcbiAgICBtYWluVXYgPSBtYXQyKGNvcyhyb3RhdGVSYWQpLCAtc2luKHJvdGF0ZVJhZCksIHNpbihyb3RhdGVSYWQpLCBjb3Mocm90YXRlUmFkKSkgKiAobWFpblV2IC0gcm90YXRlUGl2b3QpICsgcm90YXRlUGl2b3Q7XFxuXFxuI2lmZGVmIEZMSVBfVVxcbiAgICBtYWluVXYueCA9IDEuMCAtIG1haW5Vdi54O1xcbiNlbmRpZlxcbiNpZmRlZiBGTElQX1ZcXG4gICAgbWFpblV2LnkgPSAxLjAgLSBtYWluVXYueTtcXG4jZW5kaWZcXG5cXG4jaW5jbHVkZTxtdG9vbkJ1bXBGcmFnbWVudD5cXG5cXG4jaWZkZWYgVFdPU0lERURMSUdIVElOR1xcbiAgICBub3JtYWxXID0gZ2xfRnJvbnRGYWNpbmcgPyBub3JtYWxXIDogLW5vcm1hbFc7XFxuI2VuZGlmXFxuXFxuLy8gaW5jbHVkZSBjdXN0b21pemVkIGxpZ2h0RnJhZ21lbnRcXG4jaW5jbHVkZTxtdG9vbkxpZ2h0RnJhZ21lbnQ+WzAuLm1heFNpbXVsdGFuZW91c0xpZ2h0c11cXG5cXG4gICAgdmVjMyBmaW5hbERpZmZ1c2UgPSBjbGFtcChkaWZmdXNlQmFzZSwgMC4wLCAxLjApICogYmFzZUNvbG9yLnJnYjtcXG5cXG4gICAgLy8gQ29tcG9zaXRpb25cXG4gICAgdmVjNCBjb2xvciA9IHZlYzQoZmluYWxEaWZmdXNlLCBjbGFtcChhbHBoYSwgMC4wLCAxLjApKTtcXG5cXG4gICAgY29sb3IucmdiID0gbWF4KGNvbG9yLnJnYiwgMC4pO1xcbiNpbmNsdWRlPGxvZ0RlcHRoRnJhZ21lbnQ+XFxuI2luY2x1ZGU8Zm9nRnJhZ21lbnQ+XFxuXFxuLy8gQXBwbHkgaW1hZ2UgcHJvY2Vzc2luZyBpZiByZWxldmFudC4gQXMgdGhpcyBhcHBsaWVzIGluIGxpbmVhciBzcGFjZSxcXG4vLyBXZSBmaXJzdCBtb3ZlIGZyb20gZ2FtbWEgdG8gbGluZWFyLlxcbiNpZmRlZiBJTUFHRVBST0NFU1NJTkdQT1NUUFJPQ0VTU1xcbiAgICBjb2xvci5yZ2IgPSB0b0xpbmVhclNwYWNlKGNvbG9yLnJnYik7XFxuI2Vsc2VcXG4gICAgI2lmZGVmIElNQUdFUFJPQ0VTU0lOR1xcbiAgICAgICAgLy8gRklYTUU6IHN1cHBvcnQgaW1hZ2UgcHJvY2Vzc2luZ1xcbiAgICAgICAgLy8gY29sb3IucmdiID0gdG9MaW5lYXJTcGFjZShjb2xvci5yZ2IpO1xcbiAgICAgICAgLy8gY29sb3IgPSBhcHBseUltYWdlUHJvY2Vzc2luZyhjb2xvcik7XFxuICAgICNlbmRpZlxcbiNlbmRpZlxcblxcbiAgICBjb2xvci5hICo9IHZpc2liaWxpdHk7XFxuXFxuI2lmZGVmIFBSRU1VTFRJUExZQUxQSEFcXG4gICAgLy8gQ29udmVydCB0byBhc3NvY2lhdGl2ZSAocHJlbXVsdGlwbGllZCkgZm9ybWF0IGlmIG5lZWRlZC5cXG4gICAgY29sb3IucmdiICo9IGNvbG9yLmE7XFxuI2VuZGlmXFxuXFxuI2lmZGVmIFBSRVBBU1NcXG4gICAgZmxvYXQgd3JpdGVHZW9tZXRyeUluZm8gPSBjb2xvci5hID4gMC40ID8gMS4wIDogMC4wO1xcblxcbiAgICBnbF9GcmFnRGF0YVswXSA9IGNvbG9yOyAvLyBXZSBjYW4ndCBzcGxpdCBpcnJhZGlhbmNlIG9uIHN0ZCBtYXRlcmlhbFxcblxcbiAgICAjaWZkZWYgUFJFUEFTU19QT1NJVElPTlxcbiAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX1BPU0lUSU9OX0lOREVYXSA9IHZlYzQodlBvc2l0aW9uVywgd3JpdGVHZW9tZXRyeUluZm8pO1xcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmZGVmIFBSRVBBU1NfVkVMT0NJVFlcXG4gICAgdmVjMiBhID0gKHZDdXJyZW50UG9zaXRpb24ueHkgLyB2Q3VycmVudFBvc2l0aW9uLncpICogMC41ICsgMC41O1xcbiAgICB2ZWMyIGIgPSAodlByZXZpb3VzUG9zaXRpb24ueHkgLyB2UHJldmlvdXNQb3NpdGlvbi53KSAqIDAuNSArIDAuNTtcXG5cXG4gICAgdmVjMiB2ZWxvY2l0eSA9IGFicyhhIC0gYik7XFxuICAgIHZlbG9jaXR5ID0gdmVjMihwb3codmVsb2NpdHkueCwgMS4wIC8gMy4wKSwgcG93KHZlbG9jaXR5LnksIDEuMCAvIDMuMCkpICogc2lnbihhIC0gYikgKiAwLjUgKyAwLjU7XFxuXFxuICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfVkVMT0NJVFlfSU5ERVhdID0gdmVjNCh2ZWxvY2l0eSwgMC4wLCB3cml0ZUdlb21ldHJ5SW5mbyk7XFxuICAgICNlbmRpZlxcblxcbiAgICAjaWZkZWYgUFJFUEFTU19JUlJBRElBTkNFXFxuICAgICAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX0lSUkFESUFOQ0VfSU5ERVhdID0gdmVjNCgwLjAsIDAuMCwgMC4wLCB3cml0ZUdlb21ldHJ5SW5mbyk7IC8vICBXZSBjYW4ndCBzcGxpdCBpcnJhZGlhbmNlIG9uIHN0ZCBtYXRlcmlhbFxcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmZGVmIFBSRVBBU1NfREVQVEhcXG4gICAgICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfREVQVEhfSU5ERVhdID0gdmVjNCh2Vmlld1Bvcy56LCAwLjAsIDAuMCwgd3JpdGVHZW9tZXRyeUluZm8pOyAvLyBMaW5lYXIgZGVwdGhcXG4gICAgI2VuZGlmXFxuXFxuICAgICNpZmRlZiBQUkVQQVNTX05PUk1BTFxcbiAgICAgICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19OT1JNQUxfSU5ERVhdID0gdmVjNCgodmlldyAqIHZlYzQobm9ybWFsVywgMC4wKSkucmdiLCB3cml0ZUdlb21ldHJ5SW5mbyk7IC8vIE5vcm1hbFxcbiAgICAjZW5kaWZcXG5cXG4gICAgI2lmZGVmIFBSRVBBU1NfQUxCRURPX1NRUlRcXG4gICAgICAgIGdsX0ZyYWdEYXRhW1BSRVBBU1NfQUxCRURPX1NRUlRfSU5ERVhdID0gdmVjNCgwLjAsIDAuMCwgMC4wLCB3cml0ZUdlb21ldHJ5SW5mbyk7IC8vIFdlIGNhbid0IHNwbGl0IGFsYmVkbyBvbiBzdGQgbWF0ZXJpYWxcXG4gICAgI2VuZGlmXFxuICAgICNpZmRlZiBQUkVQQVNTX1JFRkxFQ1RJVklUWVxcbiAgICAgICAgI2lmIGRlZmluZWQoU1BFQ1VMQVIpXFxuICAgICAgICAgICAgZ2xfRnJhZ0RhdGFbUFJFUEFTU19SRUZMRUNUSVZJVFlfSU5ERVhdID0gdmVjNChzcGVjdWxhck1hcENvbG9yLnJnYiwgc3BlY3VsYXJNYXBDb2xvci5hICogd3JpdGVHZW9tZXRyeUluZm8pO1xcbiAgICAgICAgI2Vsc2VcXG4gICAgICAgICAgICBnbF9GcmFnRGF0YVtQUkVQQVNTX1JFRkxFQ1RJVklUWV9JTkRFWF0gPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIHdyaXRlR2VvbWV0cnlJbmZvKTtcXG4gICAgICAgICNlbmRpZlxcbiAgICAjZW5kaWZcXG4jZW5kaWZcXG5cXG4jaWYgIWRlZmluZWQoUFJFUEFTUykgfHwgZGVmaW5lZChXRUJHTDIpXFxuICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbiNlbmRpZlxcblxcbiNpZiBPUkRFUl9JTkRFUEVOREVOVF9UUkFOU1BBUkVOQ1lcXG4gICAgaWYgKGZyYWdEZXB0aCA9PSBuZWFyZXN0RGVwdGgpIHtcXG4gICAgICAgIGZyb250Q29sb3IucmdiICs9IGNvbG9yLnJnYiAqIGNvbG9yLmEgKiBhbHBoYU11bHRpcGxpZXI7XFxuICAgICAgICBmcm9udENvbG9yLmEgPSAxLjAgLSBhbHBoYU11bHRpcGxpZXIgKiAoMS4wIC0gY29sb3IuYSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBiYWNrQ29sb3IgKz0gY29sb3I7XFxuICAgIH1cXG4jZW5kaWZcXG5cXG4jZGVmaW5lIENVU1RPTV9GUkFHTUVOVF9NQUlOX0VORFxcblxcbn1cXG5cIiksdGhpcy5pbnNwZWN0YWJsZUN1c3RvbVByb3BlcnRpZXM9dGhpcy5pbnNwZWN0YWJsZUN1c3RvbVByb3BlcnRpZXN8fFtdLHRoaXMuaW5zcGVjdGFibGVDdXN0b21Qcm9wZXJ0aWVzLnB1c2goe2xhYmVsOlwiRGlmZnVzZUNvbG9yXCIscHJvcGVydHlOYW1lOlwiZGlmZnVzZUNvbG9yXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5Db2xvcjN9LHtsYWJlbDpcIkFtYmllbnRDb2xvclwiLHByb3BlcnR5TmFtZTpcImFtYmllbnRDb2xvclwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuQ29sb3IzfSx7bGFiZWw6XCJFbWlzc2l2ZUNvbG9yXCIscHJvcGVydHlOYW1lOlwiZW1pc3NpdmVDb2xvclwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuQ29sb3IzfSx7bGFiZWw6XCJTaGFkZUNvbG9yXCIscHJvcGVydHlOYW1lOlwic2hhZGVDb2xvclwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuQ29sb3IzfSx7bGFiZWw6XCJSaW1Db2xvclwiLHByb3BlcnR5TmFtZTpcInJpbUNvbG9yXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5Db2xvcjN9LHtsYWJlbDpcIk91dGxpbmVDb2xvclwiLHByb3BlcnR5TmFtZTpcIm91dGxpbmVDb2xvclwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuQ29sb3IzfSx7bGFiZWw6XCJSZWNlaXZlU2hhZG93UmF0ZVwiLHByb3BlcnR5TmFtZTpcInJlY2VpdmVTaGFkb3dSYXRlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIlNoYWRpbmdHcmFkZVJhdGVcIixwcm9wZXJ0eU5hbWU6XCJzaGFkaW5nR3JhZGVSYXRlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIlNoYWRlU2hpZnRcIixwcm9wZXJ0eU5hbWU6XCJzaGFkZVNoaWZ0XCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOi0xLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJTaGFkZVRvb255XCIscHJvcGVydHlOYW1lOlwic2hhZGVUb29ueVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJMaWdodENvbG9yQXR0ZW51YXRpb25cIixwcm9wZXJ0eU5hbWU6XCJsaWdodENvbG9yQXR0ZW51YXRpb25cIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiSW5kaXJlY3RMaWdodEludGVuc2l0eVwiLHByb3BlcnR5TmFtZTpcImluZGlyZWN0TGlnaHRJbnRlbnNpdHlcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MSxzdGVwOi4wMX0se2xhYmVsOlwiUmltTGlnaHRpbmdNaXhcIixwcm9wZXJ0eU5hbWU6XCJyaW1MaWdodGluZ01peFwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJSaW1GcmVzbmVsUG93ZXJcIixwcm9wZXJ0eU5hbWU6XCJyaW1GcmVzbmVsUG93ZXJcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46LjAxLG1heDoxMDAsc3RlcDo0fSx7bGFiZWw6XCJSaW1MaWZ0XCIscHJvcGVydHlOYW1lOlwicmltTGlmdFwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJPdXRsaW5lV2lkdGhcIixwcm9wZXJ0eU5hbWU6XCJvdXRsaW5lV2lkdGhcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46LjAxLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJPdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2VcIixwcm9wZXJ0eU5hbWU6XCJvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2VcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MSxtYXg6MTAsc3RlcDouMDF9LHtsYWJlbDpcIk91dGxpbmVMaWdodGluZ01peFwiLHByb3BlcnR5TmFtZTpcIm91dGxpbmVMaWdodGluZ01peFwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6LjAxfSx7bGFiZWw6XCJEZWJ1Z01vZGVcIixwcm9wZXJ0eU5hbWU6XCJkZWJ1Z01vZGVcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46MCxtYXg6MixzdGVwOjF9LHtsYWJlbDpcIk91dGxpbmVXaWR0aE1vZGVcIixwcm9wZXJ0eU5hbWU6XCJvdXRsaW5lV2lkdGhNb2RlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjIsc3RlcDoxfSx7bGFiZWw6XCJPdXRsaW5lQ29sb3JNb2RlXCIscHJvcGVydHlOYW1lOlwib3V0bGluZUNvbG9yTW9kZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoxLHN0ZXA6MX0se2xhYmVsOlwiQ3VsbE1vZGVcIixwcm9wZXJ0eU5hbWU6XCJjdWxsTW9kZVwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjowLG1heDoyLHN0ZXA6MX0se2xhYmVsOlwiT3V0bGluZUN1bGxNb2RlXCIscHJvcGVydHlOYW1lOlwib3V0bGluZUN1bGxNb2RlXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjIsc3RlcDoxfSx7bGFiZWw6XCJBbHBoYUN1dE9mZlwiLHByb3BlcnR5TmFtZTpcImFscGhhQ3V0T2ZmXCIsdHlwZTpnLkluc3BlY3RhYmxlVHlwZS5TbGlkZXIsbWluOjAsbWF4OjEsc3RlcDouMDF9LHtsYWJlbDpcIlVWIEFuaW1hdGlvbiBTY3JvbGwgWFwiLHByb3BlcnR5TmFtZTpcInV2QW5pbWF0aW9uU2Nyb2xsWFwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjotMSxtYXg6MSxzdGVwOi4xfSx7bGFiZWw6XCJVViBBbmltYXRpb24gU2Nyb2xsIFlcIixwcm9wZXJ0eU5hbWU6XCJ1dkFuaW1hdGlvblNjcm9sbFlcIix0eXBlOmcuSW5zcGVjdGFibGVUeXBlLlNsaWRlcixtaW46LTEsbWF4OjEsc3RlcDouMX0se2xhYmVsOlwiVVYgQW5pbWF0aW9uIFJvdGF0aW9uXCIscHJvcGVydHlOYW1lOlwidXZBbmltYXRpb25Sb3RhdGlvblwiLHR5cGU6Zy5JbnNwZWN0YWJsZVR5cGUuU2xpZGVyLG1pbjotLjUsbWF4Oi41LHN0ZXA6LjAxfSl9Z2V0IGFwcGVuZGVkVGV4dHVyZXMoKXtyZXR1cm5bdGhpcy5fZGlmZnVzZVRleHR1cmUsdGhpcy5fZW1pc3NpdmVUZXh0dXJlLHRoaXMuX2J1bXBUZXh0dXJlLHRoaXMuX3NoYWRlVGV4dHVyZSx0aGlzLl9yZWNlaXZlU2hhZG93VGV4dHVyZSx0aGlzLl9zaGFkaW5nR3JhZGVUZXh0dXJlLHRoaXMuX3JpbVRleHR1cmUsdGhpcy5fbWF0Q2FwVGV4dHVyZSx0aGlzLl9vdXRsaW5lV2lkdGhUZXh0dXJlLHRoaXMuX3V2QW5pbWF0aW9uTWFza1RleHR1cmVdfWdldCBhcHBlbmRlZEFjdGl2ZVRleHR1cmVzKCl7cmV0dXJuIHRoaXMuYXBwZW5kZWRUZXh0dXJlcy5maWx0ZXIoKGU9Pm51bGwhPT1lKSl9Z2V0IGltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24oKXtyZXR1cm4gdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbn1zZXQgaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbihlKXt0aGlzLl9hdHRhY2hJbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uKGUpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHkoKX1fYXR0YWNoSW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbihlKXtlIT09dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbiYmKHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24mJnRoaXMuX2ltYWdlUHJvY2Vzc2luZ09ic2VydmVyJiZ0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLm9uVXBkYXRlUGFyYW1ldGVycy5yZW1vdmUodGhpcy5faW1hZ2VQcm9jZXNzaW5nT2JzZXJ2ZXIpLHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb249ZXx8dGhpcy5nZXRTY2VuZSgpLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24sdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbiYmKHRoaXMuX2ltYWdlUHJvY2Vzc2luZ09ic2VydmVyPXRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24ub25VcGRhdGVQYXJhbWV0ZXJzLmFkZCgoKCk9Pnt0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNJbWFnZVByb2Nlc3NpbmdEaXJ0eSgpfSkpKSl9Z2V0IGlzUHJlUGFzc0NhcGFibGUoKXtyZXR1cm4hMX1nZXQgY2FtZXJhQ29sb3JDdXJ2ZXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckN1cnZlc0VuYWJsZWR9c2V0IGNhbWVyYUNvbG9yQ3VydmVzRW5hYmxlZChlKXt0aGlzLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JDdXJ2ZXNFbmFibGVkPWV9Z2V0IGNhbWVyYUNvbG9yR3JhZGluZ0VuYWJsZWQoKXtyZXR1cm4gdGhpcy5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yR3JhZGluZ0VuYWJsZWR9c2V0IGNhbWVyYUNvbG9yR3JhZGluZ0VuYWJsZWQoZSl7dGhpcy5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yR3JhZGluZ0VuYWJsZWQ9ZX1nZXQgY2FtZXJhVG9uZU1hcHBpbmdFbmFibGVkKCl7cmV0dXJuIHRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24udG9uZU1hcHBpbmdFbmFibGVkfXNldCBjYW1lcmFUb25lTWFwcGluZ0VuYWJsZWQoZSl7dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi50b25lTWFwcGluZ0VuYWJsZWQ9ZX1nZXQgY2FtZXJhRXhwb3N1cmUoKXtyZXR1cm4gdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5leHBvc3VyZX1zZXQgY2FtZXJhRXhwb3N1cmUoZSl7dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5leHBvc3VyZT1lfWdldCBjYW1lcmFDb250cmFzdCgpe3JldHVybiB0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbnRyYXN0fXNldCBjYW1lcmFDb250cmFzdChlKXt0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbnRyYXN0PWV9Z2V0IGNhbWVyYUNvbG9yR3JhZGluZ1RleHR1cmUoKXtyZXR1cm4gdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5jb2xvckdyYWRpbmdUZXh0dXJlfXNldCBjYW1lcmFDb2xvckdyYWRpbmdUZXh0dXJlKGUpe3RoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uY29sb3JHcmFkaW5nVGV4dHVyZT1lfWdldCBjYW1lcmFDb2xvckN1cnZlcygpe3JldHVybiB0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yQ3VydmVzfXNldCBjYW1lcmFDb2xvckN1cnZlcyhlKXt0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbG9yQ3VydmVzPWV9Z2V0IGNhblJlbmRlclRvTVJUKCl7cmV0dXJuITB9Z2V0IGJ1bXBTY2FsZSgpe3JldHVybiB0aGlzLl9idW1wU2NhbGV9c2V0IGJ1bXBTY2FsZShlKXt0aGlzLl9idW1wU2NhbGU9ZX1nZXQgcmVjZWl2ZVNoYWRvd1JhdGUoKXtyZXR1cm4gdGhpcy5fcmVjZWl2ZVNoYWRvd1JhdGV9c2V0IHJlY2VpdmVTaGFkb3dSYXRlKGUpe3RoaXMuX3JlY2VpdmVTaGFkb3dSYXRlPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgc2hhZGluZ0dyYWRlUmF0ZSgpe3JldHVybiB0aGlzLl9zaGFkaW5nR3JhZGVSYXRlfXNldCBzaGFkaW5nR3JhZGVSYXRlKGUpe3RoaXMuX3NoYWRpbmdHcmFkZVJhdGU9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCBzaGFkZVNoaWZ0KCl7cmV0dXJuIHRoaXMuX3NoYWRlU2hpZnR9c2V0IHNoYWRlU2hpZnQoZSl7dGhpcy5fc2hhZGVTaGlmdD1NYXRoLm1heCgtMSxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCBzaGFkZVRvb255KCl7cmV0dXJuIHRoaXMuX3NoYWRlVG9vbnl9c2V0IHNoYWRlVG9vbnkoZSl7dGhpcy5fc2hhZGVUb29ueT1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IGxpZ2h0Q29sb3JBdHRlbnVhdGlvbigpe3JldHVybiB0aGlzLl9saWdodENvbG9yQXR0ZW51YXRpb259c2V0IGxpZ2h0Q29sb3JBdHRlbnVhdGlvbihlKXt0aGlzLl9saWdodENvbG9yQXR0ZW51YXRpb249TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNMaWdodHNEaXJ0eSgpfWdldCBpbmRpcmVjdExpZ2h0SW50ZW5zaXR5KCl7cmV0dXJuIHRoaXMuX2luZGlyZWN0TGlnaHRJbnRlbnNpdHl9c2V0IGluZGlyZWN0TGlnaHRJbnRlbnNpdHkoZSl7dGhpcy5faW5kaXJlY3RMaWdodEludGVuc2l0eT1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IHJpbUxpZ2h0aW5nTWl4KCl7cmV0dXJuIHRoaXMuX3JpbUxpZ2h0aW5nTWl4fXNldCByaW1MaWdodGluZ01peChlKXt0aGlzLl9yaW1MaWdodGluZ01peD1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IHJpbUZyZXNuZWxQb3dlcigpe3JldHVybiB0aGlzLl9yaW1GcmVzbmVsUG93ZXJ9c2V0IHJpbUZyZXNuZWxQb3dlcihlKXt0aGlzLl9yaW1GcmVzbmVsUG93ZXI9TWF0aC5tYXgoMCxNYXRoLm1pbigxMDAsZSkpLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5KCl9Z2V0IHJpbUxpZnQoKXtyZXR1cm4gdGhpcy5fcmltTGlmdH1zZXQgcmltTGlmdChlKXt0aGlzLl9yaW1MaWZ0PU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHkoKX1nZXQgb3V0bGluZVdpZHRoKCl7cmV0dXJuIHRoaXMuX291dGxpbmVXaWR0aH1zZXQgb3V0bGluZVdpZHRoKGUpe3RoaXMuX291dGxpbmVXaWR0aD1NYXRoLm1heCguMDEsTWF0aC5taW4oMSxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzQXR0cmlidXRlc0RpcnR5KCl9Z2V0IG91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZSgpe3JldHVybiB0aGlzLl9vdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2V9c2V0IG91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZShlKXt0aGlzLl9vdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U9TWF0aC5tYXgoMSxNYXRoLm1pbigxMCxlKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzQXR0cmlidXRlc0RpcnR5KCl9Z2V0IG91dGxpbmVMaWdodGluZ01peCgpe3JldHVybiB0aGlzLl9vdXRsaW5lTGlnaHRpbmdNaXh9c2V0IG91dGxpbmVMaWdodGluZ01peChlKXt0aGlzLl9vdXRsaW5lTGlnaHRpbmdNaXg9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNBdHRyaWJ1dGVzRGlydHkoKX1nZXQgdXZBbmltYXRpb25TY3JvbGxYKCl7cmV0dXJuIHRoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWH1zZXQgdXZBbmltYXRpb25TY3JvbGxYKGUpe3RoaXMuX3V2QW5pbWF0aW9uU2Nyb2xsWD1lLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpfWdldCB1dkFuaW1hdGlvblNjcm9sbFkoKXtyZXR1cm4gdGhpcy5fdXZBbmltYXRpb25TY3JvbGxZfXNldCB1dkFuaW1hdGlvblNjcm9sbFkoZSl7dGhpcy5fdXZBbmltYXRpb25TY3JvbGxZPWUsdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCl9Z2V0IHV2QW5pbWF0aW9uUm90YXRpb24oKXtyZXR1cm4gdGhpcy5fdXZBbmltYXRpb25Sb3RhdGlvbn1zZXQgdXZBbmltYXRpb25Sb3RhdGlvbihlKXt0aGlzLl91dkFuaW1hdGlvblJvdGF0aW9uPWUsdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCl9Z2V0IGFscGhhVGVzdCgpe3JldHVybiB0aGlzLl9hbHBoYVRlc3R9c2V0IGFscGhhVGVzdChlKXt0aGlzLl9hbHBoYVRlc3Q9ZSxlP3RoaXMuYWxwaGFCbGVuZD90aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFURVNUQU5EQkxFTkQ6dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBVEVTVDp0aGlzLmFscGhhQmxlbmQ/dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBQkxFTkQ6dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX09QQVFVRSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKX1nZXQgYWxwaGFCbGVuZCgpe3JldHVybiB0aGlzLl9hbHBoYUJsZW5kfXNldCBhbHBoYUJsZW5kKGUpe3RoaXMuX2FscGhhQmxlbmQ9ZSxlPyh0aGlzLmJhY2tGYWNlQ3VsbGluZz0hMCx0aGlzLmFscGhhVGVzdD90aGlzLl90cmFuc3BhcmVuY3lNb2RlPWwuTWF0ZXJpYWwuTUFURVJJQUxfQUxQSEFURVNUQU5EQkxFTkQ6dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBQkxFTkQpOnRoaXMuYWxwaGFUZXN0P3RoaXMuX3RyYW5zcGFyZW5jeU1vZGU9bC5NYXRlcmlhbC5NQVRFUklBTF9BTFBIQVRFU1Q6dGhpcy5fdHJhbnNwYXJlbmN5TW9kZT1sLk1hdGVyaWFsLk1BVEVSSUFMX09QQVFVRSx0aGlzLl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHkoKX1nZXQgb3V0bGluZVdpZHRoTW9kZSgpe3JldHVybiB0aGlzLl9vdXRsaW5lV2lkdGhNb2RlfXNldCBvdXRsaW5lV2lkdGhNb2RlKGUpe3RoaXMuX291dGxpbmVXaWR0aE1vZGU9ZSxlPT09RC5Ob25lfHx0aGlzLm91dGxpbmVSZW5kZXJlcnx8KHRoaXMub3V0bGluZVJlbmRlcmVyPW5ldyBBKHRoaXMuZ2V0U2NlbmUoKSx0aGlzKSksdGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCl9ZW5hYmxlT3V0bGluZVJlbmRlcigpe3RoaXMuaXNPdXRsaW5lPTF9ZGlzYWFibGVPdXRsaW5lUmVuZGVyKCl7dGhpcy5pc091dGxpbmU9MH1nZXQgY3VsbE1vZGUoKXtyZXR1cm4gdGhpcy5fY3VsbE1vZGV9c2V0IGN1bGxNb2RlKGUpe3N3aXRjaCh0aGlzLl9jdWxsTW9kZT1lLHRoaXMuX2N1bGxNb2RlKXtjYXNlIEwuT2ZmOnRoaXMuYmFja0ZhY2VDdWxsaW5nPSExLHRoaXMuc2lkZU9yaWVudGF0aW9uPWwuTWF0ZXJpYWwuQ2xvY2tXaXNlU2lkZU9yaWVudGF0aW9uLHRoaXMudHdvU2lkZWRMaWdodGluZz0hMTticmVhaztjYXNlIEwuRnJvbnQ6dGhpcy5iYWNrRmFjZUN1bGxpbmc9ITAsdGhpcy5zaWRlT3JpZW50YXRpb249bC5NYXRlcmlhbC5Db3VudGVyQ2xvY2tXaXNlU2lkZU9yaWVudGF0aW9uLHRoaXMudHdvU2lkZWRMaWdodGluZz0hMDticmVhaztjYXNlIEwuQmFjazp0aGlzLmJhY2tGYWNlQ3VsbGluZz0hMCx0aGlzLnNpZGVPcmllbnRhdGlvbj1sLk1hdGVyaWFsLkNsb2NrV2lzZVNpZGVPcmllbnRhdGlvbix0aGlzLnR3b1NpZGVkTGlnaHRpbmc9ITF9dGhpcy5fbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5KCl9YXBwbHlPdXRsaW5lQ3VsbE1vZGUoKXt0aGlzLnN0b3JlZEN1bGxNb2RlPXRoaXMuY3VsbE1vZGUsdGhpcy5jdWxsTW9kZT10aGlzLl9vdXRsaW5lQ3VsbE1vZGV9cmVzdG9yZU91dGxpbmVDdWxsTW9kZSgpe3RoaXMuY3VsbE1vZGU9dGhpcy5zdG9yZWRDdWxsTW9kZX1nZXRPdXRsaW5lUmVuZGVyZXJOYW1lKCl7cmV0dXJuIHRoaXMub3V0bGluZVJlbmRlcmVyP3RoaXMub3V0bGluZVJlbmRlcmVyLm5hbWU6XCJcIn1nZXQgaGFzUmVuZGVyVGFyZ2V0VGV4dHVyZXMoKXtyZXR1cm4hMX1nZXRDbGFzc05hbWUoKXtyZXR1cm5cIk1Ub29uTWF0ZXJpYWxcIn1nZXQgdXNlTG9nYXJpdGhtaWNEZXB0aCgpe3JldHVybiB0aGlzLl91c2VMb2dhcml0aG1pY0RlcHRofXNldCB1c2VMb2dhcml0aG1pY0RlcHRoKGUpe2NvbnN0IGk9ZSYmdGhpcy5nZXRTY2VuZSgpLmdldEVuZ2luZSgpLmdldENhcHMoKS5mcmFnbWVudERlcHRoU3VwcG9ydGVkO3RoaXMuX3VzZUxvZ2FyaXRobWljRGVwdGghPT1pJiYodGhpcy5fdXNlTG9nYXJpdGhtaWNEZXB0aD1pLHRoaXMuX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eSgpKX1uZWVkQWxwaGFCbGVuZGluZygpe3JldHVybiF0aGlzLl9kaXNhYmxlQWxwaGFCbGVuZGluZyYmKHRoaXMuYWxwaGE8MXx8dGhpcy5fc2hvdWxkVXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmUoKSl9bmVlZEFscGhhVGVzdGluZygpe3JldHVybiEhdGhpcy5fZm9yY2VBbHBoYVRlc3R8fCEhdGhpcy5fYWxwaGFUZXN0fHx0aGlzLl9oYXNBbHBoYUNoYW5uZWwoKSYmKG51bGw9PXRoaXMuX3RyYW5zcGFyZW5jeU1vZGV8fHRoaXMuX3RyYW5zcGFyZW5jeU1vZGU9PT1sLk1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBVEVTVCl9X3Nob3VsZFVzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlKCl7cmV0dXJuIG51bGwhPXRoaXMuX2RpZmZ1c2VUZXh0dXJlJiZ0aGlzLl9kaWZmdXNlVGV4dHVyZS5oYXNBbHBoYSYmdGhpcy5fdXNlQWxwaGFGcm9tRGlmZnVzZVRleHR1cmUmJnRoaXMuX3RyYW5zcGFyZW5jeU1vZGUhPT1sLk1hdGVyaWFsLk1BVEVSSUFMX09QQVFVRX1faGFzQWxwaGFDaGFubmVsKCl7cmV0dXJuIG51bGwhPT10aGlzLl9kaWZmdXNlVGV4dHVyZSYmdGhpcy5fZGlmZnVzZVRleHR1cmUuaGFzQWxwaGF9Z2V0QWxwaGFUZXN0VGV4dHVyZSgpe3JldHVybiB0aGlzLl9kaWZmdXNlVGV4dHVyZX1pc1JlYWR5Rm9yU3ViTWVzaChlLGksbj0hMSl7aWYodGhpcy5fdW5pZm9ybUJ1ZmZlckxheW91dEJ1aWx0fHx0aGlzLmJ1aWxkVW5pZm9ybUxheW91dCgpLGkuZWZmZWN0JiZ0aGlzLmlzRnJvemVuJiZpLmVmZmVjdC5fd2FzUHJldmlvdXNseVJlYWR5JiZpLmVmZmVjdC5fd2FzUHJldmlvdXNseVVzaW5nSW5zdGFuY2VzPT09bilyZXR1cm4hMDtpLm1hdGVyaWFsRGVmaW5lc3x8KHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRHZW5lcmljKHAuTWF0ZXJpYWxQbHVnaW5FdmVudC5HZXREZWZpbmVOYW1lcyx0aGlzLl9ldmVudEluZm8pLGkubWF0ZXJpYWxEZWZpbmVzPW5ldyBFKTtjb25zdCB0PXRoaXMuZ2V0U2NlbmUoKSxvPWkubWF0ZXJpYWxEZWZpbmVzO2lmKHRoaXMuX2lzUmVhZHlGb3JTdWJNZXNoKGkpKXJldHVybiEwO2NvbnN0IGE9dC5nZXRFbmdpbmUoKTtvLl9uZWVkTm9ybWFscz1oLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yTGlnaHRzKHQsZSxvLHRoaXMuc3BlY3VsYXJTdXBwb3J0ZWQsdGhpcy5fbWF4U2ltdWx0YW5lb3VzTGlnaHRzLHRoaXMuX2Rpc2FibGVMaWdodGluZyksdGhpcy5vdXRsaW5lV2lkdGhNb2RlIT09RC5Ob25lJiYoby5fbmVlZE5vcm1hbHM9ITApLHRoaXMuYXBwbHlEZWZpbmVzKG8pLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JNdWx0aXZpZXcodCxvKTtjb25zdCBsPXRoaXMubmVlZEFscGhhQmxlbmRpbmdGb3JNZXNoKGUpJiZ0LnVzZU9yZGVySW5kZXBlbmRlbnRUcmFuc3BhcmVuY3k7aWYoaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0Zvck9JVCh0LG8sbCksby5fYXJlVGV4dHVyZXNEaXJ0eSl7dGhpcy5fZXZlbnRJbmZvLmhhc1JlbmRlclRhcmdldFRleHR1cmVzPSExLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRIYXNSZW5kZXJUYXJnZXRUZXh0dXJlcyh0aGlzLl9ldmVudEluZm8pLHRoaXMuX2NhY2hlSGFzUmVuZGVyVGFyZ2V0VGV4dHVyZXM9dGhpcy5fZXZlbnRJbmZvLmhhc1JlbmRlclRhcmdldFRleHR1cmVzLG8uX25lZWRVVnM9ITE7Zm9yKGxldCBlPTE7ZTw9Zi5Db25zdGFudHMuTUFYX1NVUFBPUlRFRF9VVl9TRVRTOysrZSlvW1wiTUFJTlVWXCIrZV09ITE7aWYodC50ZXh0dXJlc0VuYWJsZWQpe2lmKCEodGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9kaWZmdXNlVGV4dHVyZSxvLFwiRElGRlVTRVwiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9lbWlzc2l2ZVRleHR1cmUsbyxcIkVNSVNTSVZFXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX3NoYWRlVGV4dHVyZSxvLFwiU0hBREVcIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fcmVjZWl2ZVNoYWRvd1RleHR1cmUsbyxcIlJFQ0VJVkVfU0hBRE9XXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX3NoYWRpbmdHcmFkZVRleHR1cmUsbyxcIlNIQURJTkdfR1JBREVcIikmJnRoaXMuaXNSZWFkeUZvclRleHR1cmUodGhpcy5fcmltVGV4dHVyZSxvLFwiUklNXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX21hdENhcFRleHR1cmUsbyxcIk1BVENBUFwiKSYmdGhpcy5pc1JlYWR5Rm9yVGV4dHVyZSh0aGlzLl9vdXRsaW5lV2lkdGhUZXh0dXJlLG8sXCJPVVRMSU5FX1dJRFRIXCIpJiZ0aGlzLmlzUmVhZHlGb3JUZXh0dXJlKHRoaXMuX3V2QW5pbWF0aW9uTWFza1RleHR1cmUsbyxcIlVWX0FOSU1BVElPTl9NQVNLXCIpKSlyZXR1cm4hMTtpZih0LmdldEVuZ2luZSgpLmdldENhcHMoKS5zdGFuZGFyZERlcml2YXRpdmVzJiZ0aGlzLl9idW1wVGV4dHVyZSl7aWYoIXRoaXMuX2J1bXBUZXh0dXJlLmlzUmVhZHkoKSlyZXR1cm4hMTtoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yTWVyZ2VkVVYodGhpcy5fYnVtcFRleHR1cmUsbyxcIkJVTVBcIiksby5QQVJBTExBWD10aGlzLnVzZVBhcmFsbGF4LG8uUEFSQUxMQVhPQ0NMVVNJT049dGhpcy51c2VQYXJhbGxheE9jY2x1c2lvbixvLk9CSkVDVFNQQUNFX05PUk1BTE1BUD10aGlzLnVzZU9iamVjdFNwYWNlTm9ybWFsTWFwfWVsc2Ugby5CVU1QPSExLG8uUEFSQUxMQVg9ITEsby5QQVJBTExBWE9DQ0xVU0lPTj0hMTtvLlRXT1NJREVETElHSFRJTkc9IXRoaXMuX2JhY2tGYWNlQ3VsbGluZyYmdGhpcy5fdHdvU2lkZWRMaWdodGluZ31lbHNlIG8uRElGRlVTRT0hMSxvLkVNSVNTSVZFPSExLG8uU0hBREU9ITEsby5SRUNFSVZFX1NIQURPVz0hMSxvLlNIQURJTkdfR1JBREU9ITEsby5SSU09ITEsby5NQVRDQVA9ITEsby5PVVRMSU5FX1dJRFRIPSExLG8uQlVNUD0hMSxvLlVWX0FOSU1BVElPTl9NQVNLPSExO28uQUxQSEFGUk9NRElGRlVTRT10aGlzLl9zaG91bGRVc2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZSgpLG8uUFJFTVVMVElQTFlBTFBIQT10aGlzLmFscGhhTW9kZT09PWYuQ29uc3RhbnRzLkFMUEhBX1BSRU1VTFRJUExJRUR8fHRoaXMuYWxwaGFNb2RlPT09Zi5Db25zdGFudHMuQUxQSEFfUFJFTVVMVElQTElFRF9QT1JURVJEVUZGLG8uQUxQSEFURVNUX0FGVEVSQUxMQUxQSEFDT01QVVRBVElPTlM9bnVsbCE9PXRoaXMudHJhbnNwYXJlbmN5TW9kZSxvLkFMUEhBQkxFTkQ9bnVsbD09PXRoaXMudHJhbnNwYXJlbmN5TW9kZXx8dGhpcy5uZWVkQWxwaGFCbGVuZGluZ0Zvck1lc2goZSl9aWYodGhpcy5fZXZlbnRJbmZvLmlzUmVhZHlGb3JTdWJNZXNoPSEwLHRoaXMuX2V2ZW50SW5mby5kZWZpbmVzPW8sdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudElzUmVhZHlGb3JTdWJNZXNoKHRoaXMuX2V2ZW50SW5mbyksIXRoaXMuX2V2ZW50SW5mby5pc1JlYWR5Rm9yU3ViTWVzaClyZXR1cm4hMTtpZihvLl9hcmVJbWFnZVByb2Nlc3NpbmdEaXJ0eSYmdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbil7aWYoIXRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uaXNSZWFkeSgpKXJldHVybiExO3RoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24ucHJlcGFyZURlZmluZXMobyl9aWYodGhpcy5mbGlwVSE9PW8uRkxJUF9VJiYoby5GTElQX1U9dGhpcy5mbGlwVSxvLm1hcmtBc1VucHJvY2Vzc2VkKCkpLHRoaXMuZmxpcFYhPT1vLkZMSVBfViYmKG8uRkxJUF9WPXRoaXMuZmxpcFYsby5tYXJrQXNVbnByb2Nlc3NlZCgpKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVEZWZpbmVzRm9yTWlzYyhlLHQsdGhpcy5fdXNlTG9nYXJpdGhtaWNEZXB0aCx0aGlzLnBvaW50c0Nsb3VkLHRoaXMuZm9nRW5hYmxlZCx0aGlzLl9zaG91bGRUdXJuQWxwaGFUZXN0T24oZSl8fHRoaXMuX2ZvcmNlQWxwaGFUZXN0LG8pLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JGcmFtZUJvdW5kVmFsdWVzKHQsYSxvLG4sbnVsbCxpLmdldFJlbmRlcmluZ01lc2goKS5oYXNUaGluSW5zdGFuY2VzKSx0aGlzLl9ldmVudEluZm8uZGVmaW5lcz1vLHRoaXMuX2V2ZW50SW5mby5tZXNoPWUsdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudFByZXBhcmVEZWZpbmVzQmVmb3JlQXR0cmlidXRlcyh0aGlzLl9ldmVudEluZm8pLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZURlZmluZXNGb3JBdHRyaWJ1dGVzKGUsbyx0aGlzLnVzZVZlcnRleENvbG9yLHRoaXMudXNlQm9uZXMsdGhpcy51c2VNb3JwaFRhcmdldHMsdGhpcy51c2VWZXJ0ZXhBbHBoYSx0aGlzLnVzZUJha2VkVmVydGV4QW5pbWF0aW9uKSx0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50UHJlcGFyZURlZmluZXModGhpcy5fZXZlbnRJbmZvKSxvLmlzRGlydHkpe2NvbnN0IG49by5fYXJlTGlnaHRzRGlzcG9zZWQ7by5tYXJrQXNQcm9jZXNzZWQoKTtjb25zdCBsPW5ldyB1LkVmZmVjdEZhbGxiYWNrcztvLkJVTVAmJmwuYWRkRmFsbGJhY2soMCxcIkJVTVBcIiksby5QQVJBTExBWCYmbC5hZGRGYWxsYmFjaygxLFwiUEFSQUxMQVhcIiksby5QQVJBTExBWE9DQ0xVU0lPTiYmbC5hZGRGYWxsYmFjaygwLFwiUEFSQUxMQVhPQ0NMVVNJT05cIiksby5GT0cmJmwuYWRkRmFsbGJhY2soMSxcIkZPR1wiKSxvLlBPSU5UU0laRSYmbC5hZGRGYWxsYmFjaygwLFwiUE9JTlRTSVpFXCIpLG8uTE9HQVJJVEhNSUNERVBUSCYmbC5hZGRGYWxsYmFjaygwLFwiTE9HQVJJVEhNSUNERVBUSFwiKSxoLk1hdGVyaWFsSGVscGVyLkhhbmRsZUZhbGxiYWNrc0ZvclNoYWRvd3MobyxsLHRoaXMuX21heFNpbXVsdGFuZW91c0xpZ2h0cyksby5NVUxUSVZJRVcmJmwuYWRkRmFsbGJhY2soMCxcIk1VTFRJVklFV1wiKTtjb25zdCBkPVtyLlZlcnRleEJ1ZmZlci5Qb3NpdGlvbktpbmRdO28uTk9STUFMJiZkLnB1c2goci5WZXJ0ZXhCdWZmZXIuTm9ybWFsS2luZCksby5UQU5HRU5UJiZkLnB1c2goci5WZXJ0ZXhCdWZmZXIuVGFuZ2VudEtpbmQpO2ZvcihsZXQgZT0xO2U8PWYuQ29uc3RhbnRzLk1BWF9TVVBQT1JURURfVVZfU0VUUzsrK2Upb1tcIlVWXCIrZV0mJmQucHVzaChgdXYkezE9PT1lP1wiXCI6ZX1gKTtvLklOU1RBTkNFU0NPTE9SJiZkLnB1c2goci5WZXJ0ZXhCdWZmZXIuQ29sb3JJbnN0YW5jZUtpbmQpLGguTWF0ZXJpYWxIZWxwZXIuUHJlcGFyZUF0dHJpYnV0ZXNGb3JCb25lcyhkLGUsbyxsKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVBdHRyaWJ1dGVzRm9ySW5zdGFuY2VzKGQsbyksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlQXR0cmlidXRlc0Zvck1vcnBoVGFyZ2V0cyhkLGUsbyksaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlQXR0cmlidXRlc0ZvckJha2VkVmVydGV4QW5pbWF0aW9uKGQsZSxvKTtjb25zdCBtPVwibXRvb25cIixjPVtcIndvcmxkXCIsXCJ2aWV3XCIsXCJ2aWV3UHJvamVjdGlvblwiLFwidkV5ZVBvc2l0aW9uXCIsXCJ2TGlnaHRzVHlwZVwiLFwidkFtYmllbnRDb2xvclwiLFwidmlzaWJpbGl0eVwiLFwidkZvZ0luZm9zXCIsXCJ2Rm9nQ29sb3JcIixcInBvaW50U2l6ZVwiLFwibUJvbmVzXCIsXCJ2Q2xpcFBsYW5lXCIsXCJ2Q2xpcFBsYW5lMlwiLFwidkNsaXBQbGFuZTNcIixcInZDbGlwUGxhbmU0XCIsXCJ2Q2xpcFBsYW5lNVwiLFwidkNsaXBQbGFuZTZcIixcImxvZ2FyaXRobWljRGVwdGhDb25zdGFudFwiLFwidlRhbmdlbnRTcGFjZVBhcmFtc1wiLFwiYWxwaGFDdXRPZmZcIixcImJvbmVUZXh0dXJlV2lkdGhcIixcIm1vcnBoVGFyZ2V0VGV4dHVyZUluZm9cIixcIm1vcnBoVGFyZ2V0VGV4dHVyZUluZGljZXNcIixcInZEaWZmdXNlQ29sb3JcIixcInZEaWZmdXNlSW5mb3NcIixcImRpZmZ1c2VNYXRyaXhcIixcInZFbWlzc2l2ZUNvbG9yXCIsXCJ2RW1pc3NpdmVJbmZvc1wiLFwiZW1pc3NpdmVNYXRyaXhcIixcInZCdW1wSW5mb3NcIixcImJ1bXBNYXRyaXhcIixcInZTaGFkZUNvbG9yXCIsXCJ2U2hhZGVJbmZvc1wiLFwic2hhZGVNYXRyaXhcIixcInZSZWNlaXZlU2hhZG93SW5mb3NcIixcInJlY2VpdmVTaGFkb3dNYXRyaXhcIixcInZTaGFkaW5nR3JhZGVJbmZvc1wiLFwic2hhZGluZ0dyYWRlTWF0cml4XCIsXCJ2UmltQ29sb3JcIixcInZSaW1JbmZvc1wiLFwiUmltTWF0cml4XCIsXCJ2TWF0Q2FwSW5mb3NcIixcIk1hdENhcE1hdHJpeFwiLFwidk91dGxpbmVDb2xvclwiLFwidk91dGxpbmVXaWR0aEluZm9zXCIsXCJvdXRsaW5lV2lkdGhNYXRyaXhcIixcImFzcGVjdFwiLFwiaXNPdXRsaW5lXCIsXCJzaGFkaW5nR3JhZGVSYXRlXCIsXCJyZWNlaXZlU2hhZG93UmF0ZVwiLFwic2hhZGVTaGlmdFwiLFwic2hhZGVUb29ueVwiLFwicmltTGlnaHRpbmdNaXhcIixcInJpbUZyZXNuZWxQb3dlclwiLFwicmltTGlmdFwiLFwibGlnaHRDb2xvckF0dGVudWF0aW9uXCIsXCJpbmRpcmVjdExpZ2h0SW50ZW5zaXR5XCIsXCJvdXRsaW5lV2lkdGhcIixcIm91dGxpbmVTY2FsZWRNYXhEaXN0YW5jZVwiLFwib3V0bGluZUxpZ2h0aW5nTWl4XCIsXCJ1dkFuaW1hdGlvblNjcm9sbFhcIixcInV2QW5pbWF0aW9uU2Nyb2xsWVwiLFwidXZBbmltYXRpb25Sb3RhdGlvblwiLFwidkV5ZVVwXCIsXCJ0aW1lXCIsXCJwcm9qZWN0aW9uXCJdLGc9W1wiZGlmZnVzZVNhbXBsZXJcIixcImFtYmllbnRTYW1wbGVyXCIsXCJlbWlzc2l2ZVNhbXBsZXJcIixcImJ1bXBTYW1wbGVyXCIsXCJib25lU2FtcGxlclwiLFwibW9ycGhUYXJnZXRzXCIsXCJvaXREZXB0aFNhbXBsZXJcIixcIm9pdEZyb250Q29sb3JTYW1wbGVyXCIsXCJzaGFkZVNhbXBsZXJcIixcInJlY2VpdmVTaGFkb3dTYW1wbGVyXCIsXCJzaGFkaW5nR3JhZGVTYW1wbGVyXCIsXCJyaW1TYW1wbGVyXCIsXCJtYXRDYXBTYW1wbGVyXCIsXCJvdXRsaW5lV2lkdGhTYW1wbGVyXCIsXCJ1dkFuaW1hdGlvbk1hc2tTYW1wbGVyXCJdLF89W1wiTWF0ZXJpYWxcIixcIlNjZW5lXCIsXCJNZXNoXCJdO3RoaXMuX2V2ZW50SW5mby5mYWxsYmFja3M9bCx0aGlzLl9ldmVudEluZm8uZmFsbGJhY2tSYW5rPTAsdGhpcy5fZXZlbnRJbmZvLmRlZmluZXM9byx0aGlzLl9ldmVudEluZm8udW5pZm9ybXM9Yyx0aGlzLl9ldmVudEluZm8uYXR0cmlidXRlcz1kLHRoaXMuX2V2ZW50SW5mby5zYW1wbGVycz1nLHRoaXMuX2V2ZW50SW5mby51bmlmb3JtQnVmZmVyc05hbWVzPV8sdGhpcy5fZXZlbnRJbmZvLmN1c3RvbUNvZGU9dm9pZCAwLHRoaXMuX2V2ZW50SW5mby5tZXNoPWUsdGhpcy5fY2FsbGJhY2tQbHVnaW5FdmVudEdlbmVyaWMocC5NYXRlcmlhbFBsdWdpbkV2ZW50LlByZXBhcmVFZmZlY3QsdGhpcy5fZXZlbnRJbmZvKSxzLkltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24mJihzLkltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uUHJlcGFyZVVuaWZvcm1zKGMsbykscy5JbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLlByZXBhcmVTYW1wbGVycyhnLG8pKSxoLk1hdGVyaWFsSGVscGVyLlByZXBhcmVVbmlmb3Jtc0FuZFNhbXBsZXJzTGlzdCh7dW5pZm9ybXNOYW1lczpjLHVuaWZvcm1CdWZmZXJzTmFtZXM6XyxzYW1wbGVyczpnLGRlZmluZXM6byxtYXhTaW11bHRhbmVvdXNMaWdodHM6dGhpcy5fbWF4U2ltdWx0YW5lb3VzTGlnaHRzfSk7Y29uc3QgQT17fSxJPW8udG9TdHJpbmcoKSx2PWkuZWZmZWN0O2xldCBNPXQuZ2V0RW5naW5lKCkuY3JlYXRlRWZmZWN0KG0se2F0dHJpYnV0ZXM6ZCx1bmlmb3Jtc05hbWVzOmMsdW5pZm9ybUJ1ZmZlcnNOYW1lczpfLHNhbXBsZXJzOmcsZGVmaW5lczpJLGZhbGxiYWNrczpsLG9uQ29tcGlsZWQ6dGhpcy5vbkNvbXBpbGVkLG9uRXJyb3I6dGhpcy5vbkVycm9yLGluZGV4UGFyYW1ldGVyczp7bWF4U2ltdWx0YW5lb3VzTGlnaHRzOnRoaXMuX21heFNpbXVsdGFuZW91c0xpZ2h0cyxtYXhTaW11bHRhbmVvdXNNb3JwaFRhcmdldHM6by5OVU1fTU9SUEhfSU5GTFVFTkNFUlN9LHByb2Nlc3NGaW5hbENvZGU6QS5wcm9jZXNzRmluYWxDb2RlLHByb2Nlc3NDb2RlQWZ0ZXJJbmNsdWRlczp0aGlzLl9ldmVudEluZm8uY3VzdG9tQ29kZSxtdWx0aVRhcmdldDpvLlBSRVBBU1N9LGEpO2lmKE0paWYodGhpcy5fb25FZmZlY3RDcmVhdGVkT2JzZXJ2YWJsZSYmKFMuZWZmZWN0PU0sUy5zdWJNZXNoPWksdGhpcy5fb25FZmZlY3RDcmVhdGVkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMoUykpLHRoaXMuYWxsb3dTaGFkZXJIb3RTd2FwcGluZyYmdiYmIU0uaXNSZWFkeSgpKXtpZihNPXYsby5tYXJrQXNVbnByb2Nlc3NlZCgpLG4pcmV0dXJuIG8uX2FyZUxpZ2h0c0Rpc3Bvc2VkPSEwLCExfWVsc2UgdC5yZXNldENhY2hlZE1hdGVyaWFsKCksaS5zZXRFZmZlY3QoTSxvLHRoaXMuX21hdGVyaWFsQ29udGV4dCl9cmV0dXJuISghaS5lZmZlY3R8fCFpLmVmZmVjdC5pc1JlYWR5KCl8fChvLl9yZW5kZXJJZD10LmdldFJlbmRlcklkKCksaS5lZmZlY3QuX3dhc1ByZXZpb3VzbHlSZWFkeT0hMCxpLmVmZmVjdC5fd2FzUHJldmlvdXNseVVzaW5nSW5zdGFuY2VzPW4sMCkpfWJ1aWxkVW5pZm9ybUxheW91dCgpe2NvbnN0IGU9dGhpcy5fdW5pZm9ybUJ1ZmZlcjtlLmFkZFVuaWZvcm0oXCJ2RGlmZnVzZUNvbG9yXCIsNCksZS5hZGRVbmlmb3JtKFwidkRpZmZ1c2VJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcImRpZmZ1c2VNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidkVtaXNzaXZlQ29sb3JcIiwzKSxlLmFkZFVuaWZvcm0oXCJ2RW1pc3NpdmVJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcImVtaXNzaXZlTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZCdW1wSW5mb3NcIiwzKSxlLmFkZFVuaWZvcm0oXCJidW1wTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZTaGFkZUNvbG9yXCIsMyksZS5hZGRVbmlmb3JtKFwidlNoYWRlSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJzaGFkZU1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2UmVjZWl2ZVNoYWRvd0luZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwicmVjZWl2ZVNoYWRvd01hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2U2hhZGluZ0dyYWRlSW5mb3NcIiwyKSxlLmFkZFVuaWZvcm0oXCJzaGFkaW5nR3JhZGVNYXRyaXhcIiwxNiksZS5hZGRVbmlmb3JtKFwidlJpbUNvbG9yXCIsMyksZS5hZGRVbmlmb3JtKFwidlJpbUluZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwicmltTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZNYXRDYXBJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcIm1hdENhcE1hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2T3V0bGluZUNvbG9yXCIsMyksZS5hZGRVbmlmb3JtKFwidk91dGxpbmVXaWR0aEluZm9zXCIsMiksZS5hZGRVbmlmb3JtKFwib3V0bGluZVdpZHRoTWF0cml4XCIsMTYpLGUuYWRkVW5pZm9ybShcInZVdkFuaW1hdGlvbk1hc2tJbmZvc1wiLDIpLGUuYWRkVW5pZm9ybShcInV2QW5pbWF0aW9uTWFza01hdHJpeFwiLDE2KSxlLmFkZFVuaWZvcm0oXCJ2VGFuZ2VudFNwYWNlUGFyYW1zXCIsMiksZS5hZGRVbmlmb3JtKFwicG9pbnRTaXplXCIsMSksZS5hZGRVbmlmb3JtKFwic2hhZGluZ0dyYWRlUmF0ZVwiLDEpLGUuYWRkVW5pZm9ybShcInJlY2VpdmVTaGFkb3dSYXRlXCIsMSksZS5hZGRVbmlmb3JtKFwic2hhZGVTaGlmdFwiLDEpLGUuYWRkVW5pZm9ybShcInNoYWRlVG9vbnlcIiwxKSxlLmFkZFVuaWZvcm0oXCJsaWdodENvbG9yQXR0ZW51YXRpb25cIiwxKSxlLmFkZFVuaWZvcm0oXCJpbmRpcmVjdExpZ2h0SW50ZW5zaXR5XCIsMSksZS5hZGRVbmlmb3JtKFwicmltTGlnaHRpbmdNaXhcIiwxKSxlLmFkZFVuaWZvcm0oXCJyaW1GcmVzbmVsUG93ZXJcIiwxKSxlLmFkZFVuaWZvcm0oXCJyaW1MaWZ0XCIsMSksZS5hZGRVbmlmb3JtKFwib3V0bGluZVdpZHRoXCIsMSksZS5hZGRVbmlmb3JtKFwib3V0bGluZVNjYWxlZE1heERpc3RhbmNlXCIsMSksZS5hZGRVbmlmb3JtKFwib3V0bGluZUxpZ2h0aW5nTWl4XCIsMSksZS5hZGRVbmlmb3JtKFwidXZBbmltYXRpb25TY3JvbGxYXCIsMSksZS5hZGRVbmlmb3JtKFwidXZBbmltYXRpb25TY3JvbGxZXCIsMSksZS5hZGRVbmlmb3JtKFwidXZBbmltYXRpb25Sb3RhdGlvblwiLDEpLGUuYWRkVW5pZm9ybShcInZFeWVVcFwiLDMpLGUuYWRkVW5pZm9ybShcImFscGhhQ3V0T2ZmXCIsMSksZS5hZGRVbmlmb3JtKFwidkFtYmllbnRDb2xvclwiLDMpLGUuYWRkVW5pZm9ybShcImFzcGVjdFwiLDEpLGUuYWRkVW5pZm9ybShcImlzT3V0bGluZVwiLDEpLGUuYWRkVW5pZm9ybShcInRpbWVcIiw0KSxlLmFkZFVuaWZvcm0oXCJ2aXNpYmlsaXR5XCIsMSksc3VwZXIuYnVpbGRVbmlmb3JtTGF5b3V0KCl9YmluZEZvclN1Yk1lc2goZSxpLG4pe3ZhciBhO2NvbnN0IHI9dGhpcy5nZXRTY2VuZSgpLHM9bi5tYXRlcmlhbERlZmluZXMsbD1uLmVmZmVjdDtpZighc3x8IWwpcmV0dXJuO3RoaXMuX2FjdGl2ZUVmZmVjdD1sLGkuZ2V0TWVzaFVuaWZvcm1CdWZmZXIoKS5iaW5kVG9FZmZlY3QobCxcIk1lc2hcIiksaS50cmFuc2ZlclRvRWZmZWN0KGUpLHRoaXMuX3VuaWZvcm1CdWZmZXIuYmluZFRvRWZmZWN0KGwsXCJNYXRlcmlhbFwiKSx0aGlzLl9ldmVudEluZm8uc3ViTWVzaD1uLHRoaXMuX2NhbGxiYWNrUGx1Z2luRXZlbnRIYXJkQmluZEZvclN1Yk1lc2godGhpcy5fZXZlbnRJbmZvKSxzLk9CSkVDVFNQQUNFX05PUk1BTE1BUCYmKGUudG9Ob3JtYWxNYXRyaXgodGhpcy5fbm9ybWFsTWF0cml4KSx0aGlzLmJpbmRPbmx5Tm9ybWFsTWF0cml4KHRoaXMuX25vcm1hbE1hdHJpeCkpO2NvbnN0IGQ9dGhpcy5fbXVzdFJlYmluZChyLGwsaS52aXNpYmlsaXR5KTtoLk1hdGVyaWFsSGVscGVyLkJpbmRCb25lc1BhcmFtZXRlcnMoaSxsKTtjb25zdCBmPXRoaXMuX3VuaWZvcm1CdWZmZXI7aWYoZCl7dGhpcy5iaW5kVmlld1Byb2plY3Rpb24obCksZi51c2VVYm8mJnRoaXMuaXNGcm96ZW4mJmYuaXNTeW5jfHwoci50ZXh0dXJlc0VuYWJsZWQmJih0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX2RpZmZ1c2VUZXh0dXJlLGYsbCxcImRpZmZ1c2VcIixcInZEaWZmdXNlSW5mb3NcIiksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9lbWlzc2l2ZVRleHR1cmUsZixsLFwiZW1pc3NpdmVcIixcInZFbWlzc2l2ZUluZm9zXCIpLHRoaXMuX2J1bXBUZXh0dXJlJiZyLmdldEVuZ2luZSgpLmdldENhcHMoKS5zdGFuZGFyZERlcml2YXRpdmVzJiYoZi51cGRhdGVGbG9hdDMoXCJ2QnVtcEluZm9zXCIsdGhpcy5fYnVtcFRleHR1cmUuY29vcmRpbmF0ZXNJbmRleCwxL3RoaXMuX2J1bXBUZXh0dXJlLmxldmVsLHRoaXMuX2J1bXBTY2FsZSksaC5NYXRlcmlhbEhlbHBlci5CaW5kVGV4dHVyZU1hdHJpeCh0aGlzLl9idW1wVGV4dHVyZSxmLFwiYnVtcFwiKSxsLnNldFRleHR1cmUoXCJidW1wU2FtcGxlclwiLHRoaXMuX2J1bXBUZXh0dXJlKSxyLl9taXJyb3JlZENhbWVyYVBvc2l0aW9uP2YudXBkYXRlRmxvYXQyKFwidlRhbmdlbnRTcGFjZVBhcmFtc1wiLHRoaXMuX2ludmVydE5vcm1hbE1hcFg/MTotMSx0aGlzLl9pbnZlcnROb3JtYWxNYXBZPzE6LTEpOmYudXBkYXRlRmxvYXQyKFwidlRhbmdlbnRTcGFjZVBhcmFtc1wiLHRoaXMuX2ludmVydE5vcm1hbE1hcFg/LTE6MSx0aGlzLl9pbnZlcnROb3JtYWxNYXBZPy0xOjEpKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX3NoYWRlVGV4dHVyZSxmLGwsXCJzaGFkZVwiLFwidlNoYWRlSW5mb3NcIiksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9yZWNlaXZlU2hhZG93VGV4dHVyZSxmLGwsXCJyZWNlaXZlU2hhZG93XCIsXCJ2UmVjZWl2ZVNoYWRvd0luZm9zXCIpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fc2hhZGluZ0dyYWRlVGV4dHVyZSxmLGwsXCJzaGFkaW5nR3JhZGVcIixcInZTaGFkaW5nR3JhZGVJbmZvc1wiKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX3JpbVRleHR1cmUsZixsLFwicmltXCIsXCJ2UmltSW5mb3NcIiksdGhpcy5iaW5kVGV4dHVyZSh0aGlzLl9tYXRDYXBUZXh0dXJlLGYsbCxcIm1hdENhcFwiLFwidk1hdENhcEluZm9zXCIpLHRoaXMuYmluZFRleHR1cmUodGhpcy5fb3V0bGluZVdpZHRoVGV4dHVyZSxmLGwsXCJvdXRsaW5lV2lkdGhcIixcInZPdXRsaW5lV2lkdGhJbmZvc1wiKSx0aGlzLmJpbmRUZXh0dXJlKHRoaXMuX3V2QW5pbWF0aW9uTWFza1RleHR1cmUsZixsLFwidXZBbmltYXRpb25NYXNrXCIsXCJ2VXZBbmltYXRpb25NYXNrSW5mb3NcIiksdGhpcy5faGFzQWxwaGFDaGFubmVsKCkmJmYudXBkYXRlRmxvYXQoXCJhbHBoYUN1dE9mZlwiLHRoaXMuYWxwaGFDdXRPZmYpKSx0aGlzLnBvaW50c0Nsb3VkJiZmLnVwZGF0ZUZsb2F0KFwicG9pbnRTaXplXCIsdGhpcy5wb2ludFNpemUpLGYudXBkYXRlRmxvYXQoXCJyZWNlaXZlU2hhZG93UmF0ZVwiLHRoaXMuX3JlY2VpdmVTaGFkb3dSYXRlKSxmLnVwZGF0ZUZsb2F0KFwic2hhZGluZ0dyYWRlUmF0ZVwiLHRoaXMuX3NoYWRpbmdHcmFkZVJhdGUpLGYudXBkYXRlRmxvYXQoXCJzaGFkZVNoaWZ0XCIsdGhpcy5fc2hhZGVTaGlmdCksZi51cGRhdGVGbG9hdChcInNoYWRlVG9vbnlcIix0aGlzLl9zaGFkZVRvb255KSxmLnVwZGF0ZUZsb2F0KFwibGlnaHRDb2xvckF0dGVudWF0aW9uXCIsdGhpcy5fbGlnaHRDb2xvckF0dGVudWF0aW9uKSxmLnVwZGF0ZUZsb2F0KFwiaW5kaXJlY3RMaWdodEludGVuc2l0eVwiLHRoaXMuX2luZGlyZWN0TGlnaHRJbnRlbnNpdHkpLGYudXBkYXRlRmxvYXQoXCJyaW1MaWdodGluZ01peFwiLHRoaXMuX3JpbUxpZ2h0aW5nTWl4KSxmLnVwZGF0ZUZsb2F0KFwicmltRnJlc25lbFBvd2VyXCIsdGhpcy5fcmltRnJlc25lbFBvd2VyKSxmLnVwZGF0ZUZsb2F0KFwicmltTGlmdFwiLHRoaXMuX3JpbUxpZnQpLGYudXBkYXRlRmxvYXQoXCJvdXRsaW5lV2lkdGhcIix0aGlzLl9vdXRsaW5lV2lkdGgpLGYudXBkYXRlRmxvYXQoXCJvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2VcIix0aGlzLl9vdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2UpLGYudXBkYXRlRmxvYXQoXCJvdXRsaW5lTGlnaHRpbmdNaXhcIix0aGlzLl9vdXRsaW5lTGlnaHRpbmdNaXgpLGYudXBkYXRlRmxvYXQoXCJ1dkFuaW1hdGlvblNjcm9sbFhcIix0aGlzLl91dkFuaW1hdGlvblNjcm9sbFgpLGYudXBkYXRlRmxvYXQoXCJ1dkFuaW1hdGlvblNjcm9sbFlcIix0aGlzLl91dkFuaW1hdGlvblNjcm9sbFkpLGYudXBkYXRlRmxvYXQoXCJ1dkFuaW1hdGlvblJvdGF0aW9uXCIsdGhpcy5fdXZBbmltYXRpb25Sb3RhdGlvbiksci5hbWJpZW50Q29sb3IubXVsdGlwbHlUb1JlZih0aGlzLmFtYmllbnRDb2xvcix0aGlzLl9nbG9iYWxBbWJpZW50Q29sb3IpLGYudXBkYXRlQ29sb3IzKFwidkFtYmllbnRDb2xvclwiLHRoaXMuX2dsb2JhbEFtYmllbnRDb2xvciksZi51cGRhdGVDb2xvcjQoXCJ2RGlmZnVzZUNvbG9yXCIsdGhpcy5kaWZmdXNlQ29sb3IsdGhpcy5hbHBoYSksZi51cGRhdGVDb2xvcjMoXCJ2RW1pc3NpdmVDb2xvclwiLHRoaXMuZW1pc3NpdmVDb2xvciksZi51cGRhdGVDb2xvcjMoXCJ2U2hhZGVDb2xvclwiLHRoaXMuc2hhZGVDb2xvciksZi51cGRhdGVDb2xvcjMoXCJ2UmltQ29sb3JcIix0aGlzLnJpbUNvbG9yKSxmLnVwZGF0ZUNvbG9yNChcInZPdXRsaW5lQ29sb3JcIix0aGlzLm91dGxpbmVDb2xvciwxKSxmLnVwZGF0ZVZlY3RvcjMoXCJ2RXllVXBcIixyLmFjdGl2ZUNhbWVyYS51cFZlY3RvcikpO2NvbnN0IGU9cjtlLnVzZU9yZGVySW5kZXBlbmRlbnRUcmFuc3BhcmVuY3kmJnRoaXMubmVlZEFscGhhQmxlbmRpbmdGb3JNZXNoKGkpJiZlLmRlcHRoUGVlbGluZ1JlbmRlcmVyJiZlLmRlcHRoUGVlbGluZ1JlbmRlcmVyLmJpbmQobCksdGhpcy5fZXZlbnRJbmZvLnN1Yk1lc2g9bix0aGlzLl9jYWxsYmFja1BsdWdpbkV2ZW50QmluZEZvclN1Yk1lc2godGhpcy5fZXZlbnRJbmZvKSxoLk1hdGVyaWFsSGVscGVyLkJpbmRDbGlwUGxhbmUobCxyKSx0aGlzLmJpbmRFeWVQb3NpdGlvbihsKX1lbHNlIHIuZ2V0RW5naW5lKCkuX2ZlYXR1cmVzLm5lZWRUb0Fsd2F5c0JpbmRVbmlmb3JtQnVmZmVycyYmKHRoaXMuX25lZWRUb0JpbmRTY2VuZVVibz0hMCk7aWYoZHx8IXRoaXMuaXNGcm96ZW4pe3IubGlnaHRzRW5hYmxlZCYmIXRoaXMuX2Rpc2FibGVMaWdodGluZyYmaC5NYXRlcmlhbEhlbHBlci5CaW5kTGlnaHRzKHIsaSxsLHMsdGhpcy5fbWF4U2ltdWx0YW5lb3VzTGlnaHRzKSwoci5mb2dFbmFibGVkJiZpLmFwcGx5Rm9nJiZyLmZvZ01vZGUhPT10LlNjZW5lLkZPR01PREVfTk9ORXx8aS5yZWNlaXZlU2hhZG93cykmJnRoaXMuYmluZFZpZXcobCksaC5NYXRlcmlhbEhlbHBlci5CaW5kRm9nUGFyYW1ldGVycyhyLGksbCkscy5OVU1fTU9SUEhfSU5GTFVFTkNFUlMmJmguTWF0ZXJpYWxIZWxwZXIuQmluZE1vcnBoVGFyZ2V0UGFyYW1ldGVycyhpLGwpLHMuQkFLRURfVkVSVEVYX0FOSU1BVElPTl9URVhUVVJFJiYobnVsbD09PShhPWkuYmFrZWRWZXJ0ZXhBbmltYXRpb25NYW5hZ2VyKXx8dm9pZCAwPT09YXx8YS5iaW5kKGwscy5JTlNUQU5DRVMpKSx0aGlzLnVzZUxvZ2FyaXRobWljRGVwdGgmJmguTWF0ZXJpYWxIZWxwZXIuQmluZExvZ0RlcHRoKHMsbCxyKSx0aGlzLl9pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uJiYhdGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi5hcHBseUJ5UG9zdFByb2Nlc3MmJnRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uYmluZCh0aGlzLl9hY3RpdmVFZmZlY3QpLGYudXBkYXRlRmxvYXQoXCJhc3BlY3RcIixyLmdldEVuZ2luZSgpLmdldEFzcGVjdFJhdGlvKHIuYWN0aXZlQ2FtZXJhKSksZi51cGRhdGVGbG9hdChcImlzT3V0bGluZVwiLHRoaXMuaXNPdXRsaW5lKTtjb25zdCBlPXdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKS8xZTM7Zi51cGRhdGVWZWN0b3I0KFwidGltZVwiLG5ldyBvLlZlY3RvcjQoZS8yMCxlLDIqZSwzKmUpKX10aGlzLl9hZnRlckJpbmQoaSx0aGlzLl9hY3RpdmVFZmZlY3QpLGYudXBkYXRlKCl9Z2V0QW5pbWF0YWJsZXMoKXtjb25zdCBlPXN1cGVyLmdldEFuaW1hdGFibGVzKCk7Zm9yKGNvbnN0IGkgb2YgdGhpcy5hcHBlbmRlZEFjdGl2ZVRleHR1cmVzKWkuYW5pbWF0aW9ucyYmaS5hbmltYXRpb25zLmxlbmd0aD4wJiZlLnB1c2goaSk7cmV0dXJuIGV9Z2V0QWN0aXZlVGV4dHVyZXMoKXtyZXR1cm4gc3VwZXIuZ2V0QWN0aXZlVGV4dHVyZXMoKS5jb25jYXQodGhpcy5hcHBlbmRlZEFjdGl2ZVRleHR1cmVzKX1oYXNUZXh0dXJlKGUpe2lmKHN1cGVyLmhhc1RleHR1cmUoZSkpcmV0dXJuITA7Zm9yKGNvbnN0IGkgb2YgdGhpcy5hcHBlbmRlZEFjdGl2ZVRleHR1cmVzKWlmKGk9PT1lKXJldHVybiEwO3JldHVybiExfWRpc3Bvc2UoZSxpKXtpZihkZWxldGUgdGhpcy5vdXRsaW5lUmVuZGVyZXIsaSlmb3IoY29uc3QgZSBvZiB0aGlzLmFwcGVuZGVkQWN0aXZlVGV4dHVyZXMpZS5kaXNwb3NlKCk7dGhpcy5faW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbiYmdGhpcy5faW1hZ2VQcm9jZXNzaW5nT2JzZXJ2ZXImJnRoaXMuX2ltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24ub25VcGRhdGVQYXJhbWV0ZXJzLnJlbW92ZSh0aGlzLl9pbWFnZVByb2Nlc3NpbmdPYnNlcnZlciksc3VwZXIuZGlzcG9zZShlLGkpfWNsb25lKGUpe2NvbnN0IG49aS5TZXJpYWxpemF0aW9uSGVscGVyLkNsb25lKCgoKT0+bmV3IHgoZSx0aGlzLmdldFNjZW5lKCkpKSx0aGlzKTtyZXR1cm4gbi5uYW1lPWUsbi5pZD1lLHRoaXMuc3RlbmNpbC5jb3B5VG8obi5zdGVuY2lsKSxufXN0YXRpYyBQYXJzZShlLG4sdCl7Y29uc3Qgbz1pLlNlcmlhbGl6YXRpb25IZWxwZXIuUGFyc2UoKCgpPT5uZXcgeChlLm5hbWUsbikpLGUsbix0KTtyZXR1cm4gZS5zdGVuY2lsJiZvLnN0ZW5jaWwucGFyc2UoZS5zdGVuY2lsLG4sdCksb31iaW5kVGV4dHVyZShlLGksbix0LG8pe2UmJih0aGlzLl91bmlmb3JtQnVmZmVyLnVwZGF0ZUZsb2F0MihvLGUuY29vcmRpbmF0ZXNJbmRleCxlLmxldmVsKSxoLk1hdGVyaWFsSGVscGVyLkJpbmRUZXh0dXJlTWF0cml4KGUsaSx0KSxuLnNldFRleHR1cmUoYCR7dH1TYW1wbGVyYCxlKSl9aXNSZWFkeUZvclRleHR1cmUoZSxpLG4pe3JldHVybiBlPyEhZS5pc1JlYWR5T3JOb3RCbG9ja2luZygpJiYoaC5NYXRlcmlhbEhlbHBlci5QcmVwYXJlRGVmaW5lc0Zvck1lcmdlZFVWKGUsaSxuKSwhMCk6KGlbbl09ITEsITApfWFwcGx5RGVmaW5lcyhlKXtzd2l0Y2godGhpcy5fZGVidWdNb2RlKXtjYXNlIFQuTm9ybWFsOiEwIT09ZS5NVE9PTl9ERUJVR19OT1JNQUwmJihlLk1UT09OX0RFQlVHX05PUk1BTD0hMCxlLk1UT09OX0RFQlVHX0xJVFNIQURFUkFURT0hMSxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpO2JyZWFrO2Nhc2UgVC5MaXRTaGFkZVJhdGU6ITAhPT1lLk1UT09OX0RFQlVHX0xJVFNIQURFUkFURSYmKGUuTVRPT05fREVCVUdfTk9STUFMPSExLGUuTVRPT05fREVCVUdfTElUU0hBREVSQVRFPSEwLGUubWFya0FzVW5wcm9jZXNzZWQoKSk7YnJlYWs7Y2FzZSBULk5vbmU6ITA9PT1lLk1UT09OX0RFQlVHX05PUk1BTCYmKGUuTVRPT05fREVCVUdfTk9STUFMPSExLGUubWFya0FzVW5wcm9jZXNzZWQoKSksITA9PT1lLk1UT09OX0RFQlVHX0xJVFNIQURFUkFURSYmKGUuTVRPT05fREVCVUdfTElUU0hBREVSQVRFPSExLGUubWFya0FzVW5wcm9jZXNzZWQoKSl9c3dpdGNoKHRoaXMub3V0bGluZVdpZHRoTW9kZSl7Y2FzZSBELldvcmxkQ29ycmRpbmF0ZXM6ITAhPT1lLk1UT09OX09VVExJTkVfV0lEVEhfV09STEQmJihlLk1UT09OX09VVExJTkVfV0lEVEhfV09STEQ9ITAsZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTj0hMSxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpO2JyZWFrO2Nhc2UgRC5TY3JlZW5Db29yZGluYXRlczohMCE9PWUuTVRPT05fT1VUTElORV9XSURUSF9TQ1JFRU4mJihlLk1UT09OX09VVExJTkVfV0lEVEhfV09STEQ9ITEsZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTj0hMCxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpO2JyZWFrO2Nhc2UgRC5Ob25lOiExPT09ZS5NVE9PTl9PVVRMSU5FX1dJRFRIX1NDUkVFTiYmITE9PT1lLk1UT09OX09VVExJTkVfV0lEVEhfV09STER8fChlLk1UT09OX09VVExJTkVfV0lEVEhfU0NSRUVOPSExLGUuTVRPT05fT1VUTElORV9XSURUSF9XT1JMRD0hMSxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpfXN3aXRjaCh0aGlzLm91dGxpbmVDb2xvck1vZGUpe2Nhc2UgTi5GaXhlZENvbG9yOiEwIT09ZS5NVE9PTl9PVVRMSU5FX0NPTE9SX0ZJWEVEJiYoZS5NVE9PTl9PVVRMSU5FX0NPTE9SX0ZJWEVEPSEwLGUuTVRPT05fT1VUTElORV9DT0xPUl9NSVhFRD0hMSxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpO2JyZWFrO2Nhc2UgTi5NaXhlZExpZ2h0aW5nOiEwIT09ZS5NVE9PTl9PVVRMSU5FX0NPTE9SX01JWEVEJiYoZS5NVE9PTl9PVVRMSU5FX0NPTE9SX0ZJWEVEPSExLGUuTVRPT05fT1VUTElORV9DT0xPUl9NSVhFRD0hMCxlLm1hcmtBc1VucHJvY2Vzc2VkKCkpfX19ZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwiZGlmZnVzZVRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX2RpZmZ1c2VUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzQW5kTWlzY0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImRpZmZ1c2VUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJlbWlzc2l2ZVRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX2VtaXNzaXZlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImVtaXNzaXZlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwiYnVtcFRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX2J1bXBUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwiYnVtcFRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcInNoYWRlVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfc2hhZGVUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwic2hhZGVUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJyZWNlaXZlU2hhZG93VGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfcmVjZWl2ZVNoYWRvd1RleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJyZWNlaXZlU2hhZG93VGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwic2hhZGluZ0dyYWRlVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfc2hhZGluZ0dyYWRlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInNoYWRpbmdHcmFkZVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcInJpbVRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX3JpbVRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJyaW1UZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJtYXRDYXBUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl9tYXRDYXBUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwibWF0Q2FwVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemVBc1RleHR1cmUpKFwib3V0bGluZVdpZHRoVGV4dHVyZVwiKV0seC5wcm90b3R5cGUsXCJfb3V0bGluZVdpZHRoVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcIm91dGxpbmVXaWR0aFRleHR1cmVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplQXNUZXh0dXJlKShcIm91dGxpbmVXaWR0aFRleHR1cmVcIildLHgucHJvdG90eXBlLFwiX3V2QW5pbWF0aW9uTWFza1RleHR1cmVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJ1dkFuaW1hdGlvbk1hc2tUZXh0dXJlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZUFzQ29sb3IzKShcImRpZmZ1c2VcIildLHgucHJvdG90eXBlLFwiZGlmZnVzZUNvbG9yXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJhbWJpZW50XCIpXSx4LnByb3RvdHlwZSxcImFtYmllbnRDb2xvclwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwiZW1pc3NpdmVcIildLHgucHJvdG90eXBlLFwiZW1pc3NpdmVDb2xvclwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwic2hhZGVcIildLHgucHJvdG90eXBlLFwic2hhZGVDb2xvclwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwicmltXCIpXSx4LnByb3RvdHlwZSxcInJpbUNvbG9yXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJvdXRsaW5lXCIpXSx4LnByb3RvdHlwZSxcIm91dGxpbmVDb2xvclwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInVzZUVtaXNzaXZlQXNJbGx1bWluYXRpb25cIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJsaW5rRW1pc3NpdmVXaXRoRGlmZnVzZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcInVzZVJlZmxlY3Rpb25PdmVyQWxwaGFcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcImRpc2FibGVMaWdodGluZ1wiKV0seC5wcm90b3R5cGUsXCJfZGlzYWJsZUxpZ2h0aW5nXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc0xpZ2h0c0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImRpc2FibGVMaWdodGluZ1wiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwiYWxwaGFDdXRPZmZcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcInVzZUFscGhhRnJvbURpZmZ1c2VUZXh0dXJlXCIpXSx4LnByb3RvdHlwZSxcIl91c2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0FuZE1pc2NEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJ1c2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwibWF4U2ltdWx0YW5lb3VzTGlnaHRzXCIpXSx4LnByb3RvdHlwZSxcIl9tYXhTaW11bHRhbmVvdXNMaWdodHNcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzTGlnaHRzRGlydHlcIildLHgucHJvdG90eXBlLFwibWF4U2ltdWx0YW5lb3VzTGlnaHRzXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJpbnZlcnROb3JtYWxNYXBYXCIpXSx4LnByb3RvdHlwZSxcIl9pbnZlcnROb3JtYWxNYXBYXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLHgucHJvdG90eXBlLFwiaW52ZXJ0Tm9ybWFsTWFwWFwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwiaW52ZXJ0Tm9ybWFsTWFwWVwiKV0seC5wcm90b3R5cGUsXCJfaW52ZXJ0Tm9ybWFsTWFwWVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcImludmVydE5vcm1hbE1hcFlcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcInR3b1NpZGVkTGlnaHRpbmdcIildLHgucHJvdG90eXBlLFwiX3R3b1NpZGVkTGlnaHRpbmdcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJ0d29TaWRlZExpZ2h0aW5nXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJidW1wU2NhbGVcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJyZWNlaXZlU2hhZG93UmF0ZVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInNoYWRpbmdHcmFkZVJhdGVcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJzaGFkZVNoaWZ0XCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKCldLHgucHJvdG90eXBlLFwic2hhZGVUb29ueVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcImxpZ2h0Q29sb3JBdHRlbnVhdGlvblwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcImluZGlyZWN0TGlnaHRJbnRlbnNpdHlcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJyaW1MaWdodGluZ01peFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInJpbUZyZXNuZWxQb3dlclwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcInJpbUxpZnRcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJvdXRsaW5lV2lkdGhcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJvdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2VcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJvdXRsaW5lTGlnaHRpbmdNaXhcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJ1dkFuaW1hdGlvblNjcm9sbFhcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJ1dkFuaW1hdGlvblNjcm9sbFlcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJ1dkFuaW1hdGlvblJvdGF0aW9uXCIsbnVsbCksZShbKDAsaS5zZXJpYWxpemUpKFwiYWxwaGFUZXN0XCIpXSx4LnByb3RvdHlwZSxcIl9hbHBoYVRlc3RcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcImFscGhhVGVzdFwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcImFscGhhQmxlbmRcIixudWxsKSxlKFsoMCxpLnNlcmlhbGl6ZSkoXCJkZWJ1Z01vZGVcIildLHgucHJvdG90eXBlLFwiX2RlYnVnTW9kZVwiLHZvaWQgMCksZShbKDAsaS5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNNaXNjRGlydHlcIildLHgucHJvdG90eXBlLFwiZGVidWdNb2RlXCIsdm9pZCAwKSxlKFsoMCxpLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc01pc2NEaXJ0eVwiKV0seC5wcm90b3R5cGUsXCJvdXRsaW5lQ29sb3JNb2RlXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJjdWxsTW9kZVwiLG51bGwpLGUoWygwLGkuc2VyaWFsaXplKSgpXSx4LnByb3RvdHlwZSxcIl9vdXRsaW5lQ3VsbE1vZGVcIix2b2lkIDApLGUoWygwLGkuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzTWlzY0RpcnR5XCIpXSx4LnByb3RvdHlwZSxcIm91dGxpbmVDdWxsTW9kZVwiLHZvaWQgMCksZShbKDAsaS5zZXJpYWxpemUpKFwiZmxpcFVcIildLHgucHJvdG90eXBlLFwiZmxpcFVcIix2b2lkIDApLGUoWygwLGkuc2VyaWFsaXplKShcImZsaXBWXCIpXSx4LnByb3RvdHlwZSxcImZsaXBWXCIsdm9pZCAwKSxlKFsoMCxpLnNlcmlhbGl6ZSkoKV0seC5wcm90b3R5cGUsXCJ1c2VMb2dhcml0aG1pY0RlcHRoXCIsbnVsbCl9KSgpLE19KSgpKSk7IiwiLyoqIENvcHlyaWdodCAoYykgMjAyMSBUaGUgdjNkIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsXG4gKiBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5cbmltcG9ydCB7QWJzdHJhY3RNZXNoLCBNZXNoLCBOdWxsYWJsZSwgU2hhZG93R2VuZXJhdG9yLCBTa2VsZXRvbiwgU2tlbGV0b25WaWV3ZXIsIFRyYW5zZm9ybU5vZGUgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlXCI7XG5pbXBvcnQgVjNEQ29yZSBmcm9tIFwiLi92M2QtY29yZVwiO1xuXG5leHBvcnQgY2xhc3MgVjNESGVscGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGNvcmU6IFYzRENvcmVcbiAgICApIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgbm9kZSBjYXN0IHNoYWRvdyBmcm9tIGEgU2hhZG93R2VuZXJhdG9yXG4gICAgICogQHBhcmFtIHNoYWRvd0dlbmVyYXRvclxuICAgICAqIEBwYXJhbSBub2RlTmFtZVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGROb2RlVG9TaGFkb3dDYXN0ZXJCeU5hbWUoXG4gICAgICAgIHNoYWRvd0dlbmVyYXRvcjogTnVsbGFibGU8U2hhZG93R2VuZXJhdG9yPixcbiAgICAgICAgbm9kZU5hbWU6IHN0cmluZ1xuICAgICkge1xuICAgICAgICBzaGFkb3dHZW5lcmF0b3I/LmFkZFNoYWRvd0Nhc3Rlcih0aGlzLmNvcmUuc2NlbmUuZ2V0Tm9kZUJ5TmFtZShub2RlTmFtZSkgYXMgTWVzaCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBub2RlcyBjYXN0IHNoYWRvdyBmcm9tIGEgU2hhZG93R2VuZXJhdG9yXG4gICAgICogQHBhcmFtIHNoYWRvd0dlbmVyYXRvclxuICAgICAqIEBwYXJhbSBub2RlTmFtZVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGROb2RlVG9TaGFkb3dDYXN0ZXJDb250YWluc05hbWUoXG4gICAgICAgIHNoYWRvd0dlbmVyYXRvcjogTnVsbGFibGU8U2hhZG93R2VuZXJhdG9yPixcbiAgICAgICAgbm9kZU5hbWU6IHN0cmluZ1xuICAgICkge1xuICAgICAgICBpZiAoIXNoYWRvd0dlbmVyYXRvcikgcmV0dXJuO1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcy5jb3JlLnNjZW5lLmdldE5vZGVzKCkpIHtcbiAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUubmFtZS5pbmNsdWRlcyhub2RlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBzaGFkb3dHZW5lcmF0b3IuYWRkU2hhZG93Q2FzdGVyKG5vZGUgYXMgTWVzaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIG5vZGUgcmVjZWl2ZSBzaGFkb3dcbiAgICAgKiBAcGFyYW0gbm9kZU5hbWVcbiAgICAgKi9cbiAgICBwdWJsaWMgbWFrZVJlY2VpdmVTaGFkb3dCeU5hbWUobm9kZU5hbWU6IHN0cmluZykge1xuICAgICAgICAodGhpcy5jb3JlLnNjZW5lLmdldE5vZGVCeU5hbWUobm9kZU5hbWUpIGFzIE1lc2gpLnJlY2VpdmVTaGFkb3dzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIG5vZGVzIHJlY2VpdmUgc2hhZG93XG4gICAgICogQHBhcmFtIG5vZGVOYW1lXG4gICAgICovXG4gICAgcHVibGljIG1ha2VSZWNlaXZlU2hhZG93Q29udGFpbnNOYW1lKG5vZGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMuY29yZS5zY2VuZS5nZXROb2RlcygpKSB7XG4gICAgICAgICAgICBpZiAobm9kZSAmJiBub2RlLm5hbWUuaW5jbHVkZXMobm9kZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgKG5vZGUgYXMgTWVzaCkucmVjZWl2ZVNoYWRvd3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHNob3dTa2VsZXRvbkRlYnVnKFxuICAgICAgICBza2VsZXRvbjogU2tlbGV0b24sXG4gICAgICAgIG1lc2g6IEFic3RyYWN0TWVzaFxuICAgICkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgcGF1c2VBbmltYXRpb25zIDogdHJ1ZSwgLy9UcnVlIG9yIEZhbHNlIGZsYWcgdG8gcGF1c2UgdGhlIGFuaW1hdGlvbnMgd2hpbGUgdHJ5aW5nIHRvIGNvbnN0cnVjdCB0aGUgZGVidWdNZXNoLiBEZWZhdWx0OiBUcnVlXG4gICAgICAgICAgICByZXR1cm5Ub1Jlc3QgOiBmYWxzZSwgLy9GbGFnIHRvIGZvcmNlIHRoZSBza2VsZXRvbiBiYWNrIGludG8gaXRzIHJlc3RQb3NlIGJlZm9yZSBjb25zdHJ1Y3RpbmcgdGhlIGRlYnVnTWVzaC4gRGVmYXVsdDogRmFsc2VcbiAgICAgICAgICAgIGNvbXB1dGVCb25lc1VzaW5nU2hhZGVycyA6IHRydWUsIC8vVGVsbCB0aGUgZGVidWdNZXNoIHRvIHVzZSBvciBub3QgdXNlIHRoZSBHUFUgZm9yIGl0cyBjYWxjdWxhdGlvbnMsIGlmIHlvdSBldmVyIHdhbnQgdG8gZG8gcGlja2luZyBvbiB0aGUgbWVzaCB0aGlzIHdpbGwgbmVlZCB0byBiZSBGYWxzZS4gRGVmYXVsdDogVHJ1ZVxuICAgICAgICAgICAgdXNlQWxsQm9uZXMgOiB0cnVlLCAvL1Zpc3VhbGl6ZSBhbGwgYm9uZXMgb3Igc2tpcCB0aGUgb25lcyB3aXRoIG5vIGluZmx1ZW5jZS5cbiAgICAgICAgICAgIGRpc3BsYXlNb2RlIDogU2tlbGV0b25WaWV3ZXIuRElTUExBWV9MSU5FUywgLy9BIHZhbHVlIHRoYXQgY29udHJvbHMgd2hpY2ggZGlzcGxheSBtb2RlIHRvIHVzZS4gKFNrZWxldG9uVmlld2VyLkRJU1BMQVlfTElORVMgPSAwLCBTa2VsZXRvblZpZXdlci5ESVNQTEFZX1NQSEVSRVMgPSAxLCBTa2VsZXRvblZpZXdlci5ESVNQTEFZX1NQSEVSRV9BTkRfU1BVUlMgPSAyKS4gRGVmYXVsdCA9IDAuXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNrZWxldG9uVmlld2VyID0gbmV3IFNrZWxldG9uVmlld2VyKFxuICAgICAgICAgICAgc2tlbGV0b24sIC8vVGFyZ2V0IFNrZWxldG9uXG4gICAgICAgICAgICBtZXNoLCAvL1RoYXQgc2tlbGV0b25zIEF0dGFjaGVkIE1lc2ggb3IgYSBOb2RlIHdpdGggdGhlIHNhbWUgZ2xvYmFsTWF0cml4XG4gICAgICAgICAgICB0aGlzLmNvcmUuc2NlbmUsIC8vVGhlIFNjZW5lIHNjb3BlXG4gICAgICAgICAgICB0cnVlLCAvL2F1dG9VcGRhdGVCb25lTWF0cmljZXM/XG4gICAgICAgICAgICBtZXNoLnJlbmRlcmluZ0dyb3VwSWQgPiAwID8gbWVzaC5yZW5kZXJpbmdHcm91cElkICsgMSA6IDEsIC8vIHJlbmRlcmluZ0dyb3VwSWRcbiAgICAgICAgICAgIG9wdGlvbnMsIC8vQ29uZmlndXJhdGlvbiBPcHRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHNrZWxldG9uVmlld2VyO1xuICAgIH1cbn1cbiIsIi8qKlxyXG4gKiBUaHJvd3Mgd2hlbiBtYW5kYXRvcnkgYm9uZSBjb3VsZCBub3QgZmluZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJvbmVOb3RGb3VuZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWUgPSAnQm9uZU5vdEZvdW5kRXJyb3InO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgYm9uZU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKGBCb25lOiR7Ym9uZU5hbWV9IE5vdEZvdW5kYCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IEJvbmVOb3RGb3VuZEVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xyXG5cclxuaW50ZXJmYWNlIFRyYW5zZm9ybU5vZGVNYXAge1xyXG4gICAgW25hbWU6IHN0cmluZ106IFRyYW5zZm9ybU5vZGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIdW1hbm9pZEJvbmUg44KS5Y+W5b6X44GZ44KL44Oh44K944OD44OJ576kXHJcbiAqIEBzZWUgaHR0cHM6Ly9kb2NzLnVuaXR5M2QuY29tL2phLzIwMTguMy9TY3JpcHRSZWZlcmVuY2UvSHVtYW5Cb2R5Qm9uZXMuaHRtbFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEh1bWFub2lkQm9uZSB7XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIG5vZGVNYXA6IFRyYW5zZm9ybU5vZGVNYXApIHt9XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIG5vZGVNYXA6IFRyYW5zZm9ybU5vZGVNYXApIHt9XHJcblxyXG4gICAgcHVibGljIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgKHRoaXMubm9kZU1hcCBhcyBhbnkpID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwu1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGhpcHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnaGlwcycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6blpKrjgoLjgoJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0VXBwZXJMZWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbGVmdFVwcGVyTGVnJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+WkquOCguOCglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0VXBwZXJMZWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgncmlnaHRVcHBlckxlZycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bjgbLjgZZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TG93ZXJMZWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbGVmdExvd2VyTGVnJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+OBsuOBllxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TG93ZXJMZWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgncmlnaHRMb3dlckxlZycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6botrPpppZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0Rm9vdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYW5kYXRvcnlCb25lKCdsZWZ0Rm9vdCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PotrPpppZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodEZvb3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgncmlnaHRGb290Jyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiEiuakjuOBruesrOS4gFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHNwaW5lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3NwaW5lJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiDuFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNoZXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2NoZXN0Jyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmmllxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG5lY2soKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbmVjaycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpoK1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBoZWFkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2hlYWQnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6IKpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFNob3VsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2xlZnRTaG91bGRlcicpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PogqlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFNob3VsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3JpZ2h0U2hvdWxkZXInKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5LiK6IWVXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFVwcGVyQXJtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2xlZnRVcHBlckFybScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PkuIrohZVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodFVwcGVyQXJtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3JpZ2h0VXBwZXJBcm0nKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem44Gy44GYXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdExvd2VyQXJtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ2xlZnRMb3dlckFybScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PjgbLjgZhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodExvd2VyQXJtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3JpZ2h0TG93ZXJBcm0nKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5omL6aaWXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdEhhbmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFuZGF0b3J5Qm9uZSgnbGVmdEhhbmQnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5omL6aaWXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRIYW5kKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hbmRhdG9yeUJvbmUoJ3JpZ2h0SGFuZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bjgaTjgb7lhYgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFRvZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0VG9lcycpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PjgaTjgb7lhYgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRUb2VzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRUb2VzJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puebrihPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0RXllKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdEV5ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7Pnm64oT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRFeWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodEV5ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpoY4oT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgamF3KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnamF3Jyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puimquaMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0VGh1bWJQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRUaHVtYlByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puimquaMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0VGh1bWJJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0VGh1bWJJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem6Kaq5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRUaHVtYkRpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRUaHVtYkRpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bkurrlt67jgZfmjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdEluZGV4UHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0SW5kZXhQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bkurrlt67jgZfmjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdEluZGV4SW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdEluZGV4SW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puS6uuW3ruOBl+aMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0SW5kZXhEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0SW5kZXhEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5Lit5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRNaWRkbGVQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRNaWRkbGVQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bkuK3mjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdE1pZGRsZUludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRNaWRkbGVJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bem5Lit5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxlZnRNaWRkbGVEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0TWlkZGxlRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puiWrOaMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0UmluZ1Byb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdFJpbmdQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bolqzmjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFJpbmdJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0UmluZ0ludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6bolqzmjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdFJpbmdEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdsZWZ0UmluZ0Rpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6blsI/mjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdExpdHRsZVByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdExpdHRsZVByb3hpbWFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW3puWwj+aMh+esrOS6jOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgnbGVmdExpdHRsZUludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlt6blsI/mjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbGVmdExpdHRsZURpc3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ2xlZnRMaXR0bGVEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6Kaq5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0VGh1bWJQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0VGh1bWJQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PopqrmjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRUaHVtYkludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0VGh1bWJJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6Kaq5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0VGh1bWJEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodFRodW1iRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+S6uuW3ruOBl+aMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodEluZGV4UHJveGltYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodEluZGV4UHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5Lq65beu44GX5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0SW5kZXhJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodEluZGV4SW50ZXJtZWRpYXRlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+S6uuW3ruOBl+aMh+esrOS4ieaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodEluZGV4RGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRJbmRleERpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PkuK3mjIfnrKzkuIDmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRNaWRkbGVQcm94aW1hbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0TWlkZGxlUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5Lit5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TWlkZGxlSW50ZXJtZWRpYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRNaWRkbGVJbnRlcm1lZGlhdGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z5Lit5oyH56ys5LiJ5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0TWlkZGxlRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRNaWRkbGVEaXN0YWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6Jas5oyH56ys5LiA5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0UmluZ1Byb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRSaW5nUHJveGltYWwnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+z6Jas5oyH56ys5LqM5oyH6aqoKE9wdGlvbmFsKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0UmluZ0ludGVybWVkaWF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3JpZ2h0UmluZ0ludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PolqzmjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRSaW5nRGlzdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRSaW5nRGlzdGFsJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPs+Wwj+aMh+esrOS4gOaMh+mqqChPcHRpb25hbClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByaWdodExpdHRsZVByb3hpbWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbmFsQm9uZSgncmlnaHRMaXR0bGVQcm94aW1hbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PlsI/mjIfnrKzkuozmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRMaXR0bGVJbnRlcm1lZGlhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodExpdHRsZUludGVybWVkaWF0ZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PlsI/mjIfnrKzkuInmjIfpqqgoT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmlnaHRMaXR0bGVEaXN0YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uYWxCb25lKCdyaWdodExpdHRsZURpc3RhbCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDkuIrog7goT3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgdXBwZXJDaGVzdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb25hbEJvbmUoJ3VwcGVyQ2hlc3QnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOW/hemgiOODnOODvOODs+OCkuWPluW+l+OBmeOCi+OAguWPluW+l+WHuuadpeOBquOBhOWgtOWQiOOBr+S+i+WkluOCkueZuueUn+OBmeOCi1xyXG4gICAgICpcclxuICAgICAqIEB0aHJvd3MgQm9uZU5vdEZvdW5kRXJyb3JcclxuICAgICAqIEBwYXJhbSBuYW1lIEh1bWFub2lkQm9uZU5hbWVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRNYW5kYXRvcnlCb25lKG5hbWU6IHN0cmluZyk6IFRyYW5zZm9ybU5vZGUge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGVNYXBbbmFtZV07XHJcbiAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBCb25lTm90Rm91bmRFcnJvcihuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjgqrjg5fjgrfjg6fjg4rjg6vjg5zjg7zjg7PjgpLlj5blvpfjgZnjgotcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBIdW1hbm9pZEJvbmVOYW1lXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0T3B0aW9uYWxCb25lKG5hbWU6IHN0cmluZyk6IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+IHtcclxuICAgICAgICByZXR1cm4gKHRoaXMubm9kZU1hcCAmJiB0aGlzLm5vZGVNYXBbbmFtZV0pIHx8IG51bGw7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBDb2xvcjMgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aCc7XHJcbmltcG9ydCB7IFZlY3RvcjQgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aCc7XHJcbmltcG9ydCB0eXBlIHsgTWF0ZXJpYWwsIEJhc2VUZXh0dXJlLCBUZXh0dXJlLCBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZSc7XHJcbmltcG9ydCB7IFBCUk1hdGVyaWFsIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlJztcclxuaW1wb3J0IHR5cGUgeyBJVlJNQmxlbmRTaGFwZU1hdGVyaWFsQmluZCB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBNVG9vbk1hdGVyaWFsIH0gZnJvbSAnYmFieWxvbi1tdG9vbi1tYXRlcmlhbCc7XHJcblxyXG50eXBlIFN1cHBvcnRlZE1hdGVyaWFsID0gTVRvb25NYXRlcmlhbCB8IFBCUk1hdGVyaWFsO1xyXG5cclxuLyoqXHJcbiAqIGZpcnN0VmFsdWUg44GvIGZhbHNlIOWbuuWumuOBoOOBjOOAgSBVbmlWUk0g44Gr5YCj44Gj44Gm5a6a576p44GX44Gm44GE44KLXHJcbiAqL1xyXG50eXBlIFNldHRlciA9ICh2YWx1ZTogbnVtYmVyLCBmaXJzdFZhbHVlOiBib29sZWFuKSA9PiB2b2lkO1xyXG5cclxuY29uc3QgUEJSTWF0ZXJpYWxUZXh0dXJlTWFwOiB7IFtwcm9wZXJ0eU5hbWU6IHN0cmluZ106IGtleW9mIFBCUk1hdGVyaWFsIH0gPSB7XHJcbiAgICBfTWFpblRleDogJ2FsYmVkb1RleHR1cmUnLFxyXG59O1xyXG5cclxuY29uc3QgUEJSTWF0ZXJpYWxDb2xvck1hcDogeyBbcHJvcGVydHlOYW1lOiBzdHJpbmddOiBrZXlvZiBQQlJNYXRlcmlhbCB9ID0ge1xyXG4gICAgX0NvbG9yOiAnYWxiZWRvQ29sb3InLFxyXG59O1xyXG5cclxuY29uc3QgTVRvb25NYXRlcmlhbFRleHR1cmVNYXA6IHsgW3Byb3BlcnR5TmFtZTogc3RyaW5nXToga2V5b2YgTVRvb25NYXRlcmlhbCB9ID0ge1xyXG4gICAgX01haW5UZXg6ICdkaWZmdXNlVGV4dHVyZScsXHJcbiAgICBfRW1pc3Npb25NYXA6ICdlbWlzc2l2ZVRleHR1cmUnLFxyXG4gICAgX0J1bXBNYXA6ICdidW1wVGV4dHVyZScsXHJcbiAgICBfU2hhZGVUZXh0dXJlOiAnc2hhZGVUZXh0dXJlJyxcclxuICAgIF9SZWNlaXZlU2hhZG93VGV4dHVyZTogJ3JlY2VpdmVTaGFkb3dUZXh0dXJlJyxcclxuICAgIF9TaGFkaW5nR3JhZGVUZXh0dXJlOiAnc2hhZGluZ0dyYWRlVGV4dHVyZScsXHJcbiAgICBfUmltVGV4dHVyZTogJ3JpbVRleHR1cmUnLFxyXG4gICAgX1NwaGVyZUFkZDogJ21hdENhcFRleHR1cmUnLFxyXG4gICAgX091dGxpbmVXaWR0aFRleHR1cmU6ICdvdXRsaW5lV2lkdGhUZXh0dXJlJyxcclxuICAgIF9VdkFuaW1NYXNrVGV4dHVyZTogJ3V2QW5pbWF0aW9uTWFza1RleHR1cmUnLFxyXG59O1xyXG5cclxuY29uc3QgTVRvb25NYXRlcmlhbENvbG9yTWFwOiB7IFtwcm9wZXJ0eU5hbWU6IHN0cmluZ106IGtleW9mIE1Ub29uTWF0ZXJpYWwgfSA9IHtcclxuICAgIF9Db2xvcjogJ2RpZmZ1c2VDb2xvcicsXHJcbiAgICBfU2hhZGVDb2xvcjogJ3NoYWRlQ29sb3InLFxyXG4gICAgX1JpbUNvbG9yOiAncmltQ29sb3InLFxyXG4gICAgX0VtaXNzaW9uQ29sb3I6ICdlbWlzc2l2ZUNvbG9yJyxcclxuICAgIF9PdXRsaW5lQ29sb3I6ICdvdXRsaW5lQ29sb3InLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZybS1jL1VuaVZSTS9ibG9iLzRmZmQ5N2MyZTkzMzk2ODNjZTliZjIxZTczZjUxMGJkOTBjMmE1YjIvQXNzZXRzL1ZSTS9SdW50aW1lL0JsZW5kU2hhcGUvTWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXIuY3NcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlciB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1fbWF0ZXJpYWxNYXA6IHsgW21hdGVyaWFsTmFtZTogc3RyaW5nXTogU3VwcG9ydGVkTWF0ZXJpYWwgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBtX21hdGVyaWFsU2V0dGVyTWFwOiB7IFtiaW5kaW5nS2V5OiBzdHJpbmddOiBTZXR0ZXIgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtX21hdGVyaWFsVmFsdWVNYXA6IHsgW2JpbmRpbmdLZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbiAgICBwcml2YXRlIG1fdXNlZDogeyBbdGFyZ2V0S2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgYmFzZVZhbHVlQ2FjaGU6IHsgW2JpbmRpbmdLZXk6IHN0cmluZ106IFZlY3RvcjQgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtYXRlcmlhbFZhbHVlc1RvQXBwbHk6IHsgW2JpbmRpbmdLZXk6IHN0cmluZ106IElWUk1CbGVuZFNoYXBlTWF0ZXJpYWxCaW5kIH0gPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbHMgVlJN44Gu5YWoIE1hdGVyaWFsXHJcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWxWYWx1ZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKG1hdGVyaWFsczogTWF0ZXJpYWxbXSwgcHJpdmF0ZSByZWFkb25seSBtYXRlcmlhbFZhbHVlczogSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmRbXSkge1xyXG4gICAgICAgIGlmIChtYXRlcmlhbHMubGVuZ3RoID09PSAwIHx8IG1hdGVyaWFsVmFsdWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOODl+ODreODkeODhuOCo+WQjeOBruWkieaPm+OBq+WvvuW/nOOBl+OBpuOBhOOCiyBNVG9vbk1hdGVyaWFsIOOBqCBQQlJNYXRlcmlhbCDjgpLkv53lrZjjgZnjgotcclxuICAgICAgICBtYXRlcmlhbHMuZm9yRWFjaCgobWF0ZXJpYWwpID0+IHtcclxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsIGluc3RhbmNlb2YgTVRvb25NYXRlcmlhbCB8fCBtYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fbWF0ZXJpYWxNYXBbbWF0ZXJpYWwubmFtZV0gPSBtYXRlcmlhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1hdGVyaWFsVmFsdWVzLmZvckVhY2goKG1hdGVyaWFsVmFsdWUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYmluZGluZ0tleSA9IHRoaXMubWFrZUJpbmRpbmdLZXkobWF0ZXJpYWxWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1fbWF0ZXJpYWxTZXR0ZXJNYXBbYmluZGluZ0tleV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubV9tYXRlcmlhbE1hcFttYXRlcmlhbFZhbHVlLm1hdGVyaWFsTmFtZV07XHJcbiAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBiYXNlVmFsdWUgPSB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIG1hdGVyaWFsVmFsdWUucHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgaWYgKCFiYXNlVmFsdWUgfHwgbWF0ZXJpYWxWYWx1ZS50YXJnZXRWYWx1ZS5sZW5ndGggIT09IDQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDjg6Ljg7zjg5XjgqPjg7PjgrDnlKjjgasgYmFzZVZhbHVlICjliJ3mnJ/lgKQpIOOBqCBtYXRlcmlhbFZhbHVlIOOCkuS/neWtmOOBmeOCi1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VWYWx1ZUNhY2hlW2JpbmRpbmdLZXldID0gYmFzZVZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsVmFsdWVzVG9BcHBseVtiaW5kaW5nS2V5XSA9IG1hdGVyaWFsVmFsdWU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IFZlY3RvcjQuRnJvbUFycmF5KG1hdGVyaWFsVmFsdWUudGFyZ2V0VmFsdWUpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZU5hbWUgPSBtYXRlcmlhbFZhbHVlLnByb3BlcnR5TmFtZTtcclxuICAgICAgICAgICAgLy8gVW5pdHkg44Go5bqn5qiZ57O744GM55Ww44Gq44KL44Gf44KB44CB44OG44Kv44K544OB44Oj44GuIHZPZmZzZXQg44KS5Y+N6Lui44GZ44KLXHJcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoUEJSTWF0ZXJpYWxUZXh0dXJlTWFwKS5zb21lKChrKSA9PiB2YWx1ZU5hbWUuc3RhcnRzV2l0aChrKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRWYWx1ZS53ICo9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5rZXlzKE1Ub29uTWF0ZXJpYWxUZXh0dXJlTWFwKS5zb21lKChrKSA9PiB2YWx1ZU5hbWUuc3RhcnRzV2l0aChrKSkpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFZhbHVlLncgKj0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlTmFtZS5lbmRzV2l0aCgnX1NUX1MnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8g44OG44Kv44K544OB44Oj44GuIHXmlrnlkJEg44Gu44G/5pu05paw44GZ44KLXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0ZXI6IFNldHRlciA9ICh2YWx1ZSwgZmlyc3RWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BWYWx1ZSA9IGZpcnN0VmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBiYXNlVmFsdWUuYWRkKHRhcmdldFZhbHVlLnN1YnRyYWN0KGJhc2VWYWx1ZSkuc2NhbGUodmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lKSEuYWRkKHRhcmdldFZhbHVlLnN1YnRyYWN0KGJhc2VWYWx1ZSkuc2NhbGUodmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmMgPSB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSkhO1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYy54ID0gcHJvcFZhbHVlLng7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjLnogPSBwcm9wVmFsdWUuejtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSwgc3JjKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fbWF0ZXJpYWxTZXR0ZXJNYXBbYmluZGluZ0tleV0gPSBzZXR0ZXI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVOYW1lLmVuZHNXaXRoKCdfU1RfVCcpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6Pjga4gduaWueWQkSDjga7jgb/mm7TmlrDjgZnjgotcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRlcjogU2V0dGVyID0gKHZhbHVlLCBmaXJzdFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcFZhbHVlID0gZmlyc3RWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VWYWx1ZS5hZGQodGFyZ2V0VmFsdWUuc3VidHJhY3QoYmFzZVZhbHVlKS5zY2FsZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUpIS5hZGQodGFyZ2V0VmFsdWUuc3VidHJhY3QoYmFzZVZhbHVlKS5zY2FsZSh2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyYyA9IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lKSE7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjLnkgPSBwcm9wVmFsdWUueTtcclxuICAgICAgICAgICAgICAgICAgICBzcmMudyA9IHByb3BWYWx1ZS53O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lLCBzcmMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9tYXRlcmlhbFNldHRlck1hcFtiaW5kaW5nS2V5XSA9IHNldHRlcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRlcjogU2V0dGVyID0gKHZhbHVlLCBmaXJzdFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcFZhbHVlID0gZmlyc3RWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGJhc2VWYWx1ZS5hZGQodGFyZ2V0VmFsdWUuc3VidHJhY3QoYmFzZVZhbHVlKS5zY2FsZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5nZXRNYXRlcmlhbFByb3BlcnR5KG1hdGVyaWFsLCB2YWx1ZU5hbWUpIS5hZGQodGFyZ2V0VmFsdWUuc3VidHJhY3QoYmFzZVZhbHVlKS5zY2FsZSh2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lLCBwcm9wVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9tYXRlcmlhbFNldHRlck1hcFtiaW5kaW5nS2V5XSA9IHNldHRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5pVlJNIOOBp+OBryBEaWN0aW9uYXJ5IOOBruOCreODvOeUqOOBruOCr+ODqeOCueOCkuWumue+qeOBl+OBpuOBhOOCi+OBjOOAgeaWh+Wtl+WIl+OBp+S7o+eUqOOBmeOCi1xyXG4gICAgICogTWF0ZXJpYWxWYWx1ZUJpbmRpbmcuQmFzZVZhbHVlIOOBr+WvvuW/nOOBmeOCi+ODl+ODreODkeODhuOCo+OBruWIneacn+WApOOBquOBruOBp+eEoeimluOBp+OBjeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1ha2VCaW5kaW5nS2V5KG1hdGVyaWFsVmFsdWU6IElWUk1CbGVuZFNoYXBlTWF0ZXJpYWxCaW5kKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYCR7bWF0ZXJpYWxWYWx1ZS5tYXRlcmlhbE5hbWV9XyR7bWF0ZXJpYWxWYWx1ZS5wcm9wZXJ0eU5hbWV9XyR7bWF0ZXJpYWxWYWx1ZS50YXJnZXRWYWx1ZS5qb2luKCctJyl9YDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVuaVZSTSDjgafjga8gRGljdGlvbmFyeSDjga7jgq3jg7znlKjjga7jgq/jg6njgrnjgpLlrprnvqnjgZfjgabjgYTjgovjgYzjgIHmloflrZfliJfjgafku6PnlKjjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBtYWtlVGFyZ2V0S2V5KG1hdGVyaWFsVmFsdWU6IElWUk1CbGVuZFNoYXBlTWF0ZXJpYWxCaW5kKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYCR7bWF0ZXJpYWxWYWx1ZS5tYXRlcmlhbE5hbWV9XyR7bWF0ZXJpYWxWYWx1ZS5wcm9wZXJ0eU5hbWV9YDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODouODvOODleOCo+ODs+OCsOOCkuihjOOBhlxyXG4gICAgICogQHBhcmFtIHZhbHVlIOWApCgw44CcMSlcclxuICAgICAqL1xyXG4gICAgcHVibGljIG1vcnBoaW5nKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmFjY3VtdWxhdGVWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5hcHBseSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbWF0ZXJpYWxWYWx1ZSDjgZTjgajjgavph43jgb/jgpLoqIjnrpfjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhY2N1bXVsYXRlVmFsdWUodmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxWYWx1ZXMuZm9yRWFjaCgobWF0ZXJpYWxWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nS2V5ID0gdGhpcy5tYWtlQmluZGluZ0tleShtYXRlcmlhbFZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubV9tYXRlcmlhbFZhbHVlTWFwW2JpbmRpbmdLZXldKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fbWF0ZXJpYWxWYWx1ZU1hcFtiaW5kaW5nS2V5XSArPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9tYXRlcmlhbFZhbHVlTWFwW2JpbmRpbmdLZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGVyaWFsIOOBruODl+ODreODkeODhuOCo+OCkuabtOaWsOOBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFwcGx5KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubV91c2VkID0ge307XHJcblxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMubWF0ZXJpYWxWYWx1ZXNUb0FwcGx5KS5mb3JFYWNoKChbYmluZGluZ0tleSwgbWF0ZXJpYWxWYWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gdGhpcy5tYWtlVGFyZ2V0S2V5KG1hdGVyaWFsVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoISh0YXJnZXRLZXkgaW4gdGhpcy5tX3VzZWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubV9tYXRlcmlhbE1hcFttYXRlcmlhbFZhbHVlLm1hdGVyaWFsTmFtZV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuYmFzZVZhbHVlQ2FjaGVbYmluZGluZ0tleV0uY2xvbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDlr77osaHjga7jg5fjg63jg5Hjg4bjgqPjgpLliJ3mnJ/lgKTjgavmiLvjgZlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlTmFtZSA9IG1hdGVyaWFsVmFsdWUucHJvcGVydHlOYW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlTmFtZS5lbmRzV2l0aCgnX1NUX1MnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmdldE1hdGVyaWFsUHJvcGVydHkobWF0ZXJpYWwsIHZhbHVlTmFtZSkhO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnkgPSB2Lnk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUudyA9IHYudztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVOYW1lLmVuZHNXaXRoKCdfU1RfVCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lKSE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUueCA9IHYueDtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS56ID0gdi56O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbCwgdmFsdWVOYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fdXNlZFt0YXJnZXRLZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2V0dGVyID0gdGhpcy5tX21hdGVyaWFsU2V0dGVyTWFwW2JpbmRpbmdLZXldO1xyXG4gICAgICAgICAgICBpZiAoc2V0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICBzZXR0ZXIodGhpcy5tX21hdGVyaWFsVmFsdWVNYXBbYmluZGluZ0tleV0sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLm1fbWF0ZXJpYWxWYWx1ZU1hcCA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oe44OG44Oq44Ki44Or44Gu44OG44Kv44K544OB44Oj44GL6Imy44Gr5a++5b+c44GZ44KLIFZlY3RvcjQg44KS5Y+W5b6X44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0TWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbDogU3VwcG9ydGVkTWF0ZXJpYWwsIHByb3BlcnR5TmFtZTogc3RyaW5nKTogTnVsbGFibGU8VmVjdG9yND4ge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcHJvcGVydHlOYW1lLm1hdGNoKC9eKF9bXl9dKykvKTtcclxuICAgICAgICBpZiAoIW1hdGNoIHx8ICFtYXRjaFsxXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5ID0gbWF0Y2hbMV07XHJcbiAgICAgICAgaWYgKG1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgaWYgKFBCUk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGV4dHVyZUludG9WZWN0b3I0V2hlbk5vdE51bGwobWF0ZXJpYWxbUEJSTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV1dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoUEJSTWF0ZXJpYWxDb2xvck1hcFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Q29sb3JJbnRvVmVjdG9yNChtYXRlcmlhbFtQQlJNYXRlcmlhbENvbG9yTWFwW2tleV1dLCBtYXRlcmlhbC5hbHBoYSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1Ub29uTWF0ZXJpYWxcclxuICAgICAgICBpZiAoTVRvb25NYXRlcmlhbFRleHR1cmVNYXBba2V5XSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGV4dHVyZUludG9WZWN0b3I0V2hlbk5vdE51bGwobWF0ZXJpYWxbTVRvb25NYXRlcmlhbFRleHR1cmVNYXBba2V5XV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTVRvb25NYXRlcmlhbENvbG9yTWFwW2tleV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydENvbG9ySW50b1ZlY3RvcjQobWF0ZXJpYWxbTVRvb25NYXRlcmlhbENvbG9yTWFwW2tleV1dLCBtYXRlcmlhbC5hbHBoYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGV4dHVyZSDjgpIgVmVjdG9yNCDjgavlpInmj5vjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb252ZXJ0VGV4dHVyZUludG9WZWN0b3I0V2hlbk5vdE51bGwodGV4dHVyZTogTnVsbGFibGU8QmFzZVRleHR1cmU+KTogTnVsbGFibGU8VmVjdG9yND4ge1xyXG4gICAgICAgIGlmICghdGV4dHVyZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdCA9IHRleHR1cmUgYXMgVGV4dHVyZTtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjQodC51U2NhbGUsIHQudlNjYWxlLCB0LnVPZmZzZXQsIHQudk9mZnNldCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb2xvcjMg44GrIGFscGhhIOOCkuWKoOOBiOOBpiBWZWN0b3I0IOOBq+WkieaPm+OBmeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnZlcnRDb2xvckludG9WZWN0b3I0KGNvbG9yOiBDb2xvcjMsIGFscGhhOiBudW1iZXIpOiBWZWN0b3I0IHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjQoY29sb3IuciwgY29sb3IuZywgY29sb3IuYiwgYWxwaGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oe44OG44Oq44Ki44Or44Gu44OG44Kv44K544OB44Oj44GL6Imy44KS5pu05paw44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlTWF0ZXJpYWxQcm9wZXJ0eShtYXRlcmlhbDogU3VwcG9ydGVkTWF0ZXJpYWwsIHByb3BlcnR5TmFtZTogc3RyaW5nLCB2YWx1ZTogVmVjdG9yNCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcHJvcGVydHlOYW1lLm1hdGNoKC9eKF9bXl9dKykvKTtcclxuICAgICAgICBpZiAoIW1hdGNoIHx8ICFtYXRjaFsxXSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdO1xyXG4gICAgICAgIGlmIChtYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgIGlmIChQQlJNYXRlcmlhbFRleHR1cmVNYXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0dXJlV2hlbk5vdE51bGwobWF0ZXJpYWxbUEJSTWF0ZXJpYWxUZXh0dXJlTWFwW2tleV1dLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFBCUk1hdGVyaWFsQ29sb3JNYXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ19Db2xvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYSA9IHZhbHVlLnc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbG9yKG1hdGVyaWFsW1BCUk1hdGVyaWFsQ29sb3JNYXBba2V5XV0sIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1Ub29uTWF0ZXJpYWxcclxuICAgICAgICBpZiAoTVRvb25NYXRlcmlhbFRleHR1cmVNYXBba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmVXaGVuTm90TnVsbChtYXRlcmlhbFtNVG9vbk1hdGVyaWFsVGV4dHVyZU1hcFtrZXldXSwgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChNVG9vbk1hdGVyaWFsQ29sb3JNYXBba2V5XSkge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnX0NvbG9yJykge1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGEgPSB2YWx1ZS53O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sb3IobWF0ZXJpYWxbTVRvb25NYXRlcmlhbENvbG9yTWFwW2tleV1dLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGV4dHVyZSDjgpIgVmVjdG9yNCDjgafmm7TmlrDjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVUZXh0dXJlV2hlbk5vdE51bGwodGV4dHVyZTogTnVsbGFibGU8QmFzZVRleHR1cmU+LCB2YWx1ZTogVmVjdG9yNCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0ZXh0dXJlIGFzIFRleHR1cmU7XHJcbiAgICAgICAgICAgIHQudVNjYWxlID0gdmFsdWUueDtcclxuICAgICAgICAgICAgdC52U2NhbGUgPSB2YWx1ZS55O1xyXG4gICAgICAgICAgICB0LnVPZmZzZXQgPSB2YWx1ZS56O1xyXG4gICAgICAgICAgICB0LnZPZmZzZXQgPSB2YWx1ZS53O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbG9yMyDjgpIgVmVjdG9yNCDjgafmm7TmlrDjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVDb2xvcihjb2xvcjogQ29sb3IzLCB2YWx1ZTogVmVjdG9yNCk6IHZvaWQge1xyXG4gICAgICAgIGNvbG9yLnIgPSB2YWx1ZS54O1xyXG4gICAgICAgIGNvbG9yLmcgPSB2YWx1ZS55O1xyXG4gICAgICAgIGNvbG9yLmIgPSB2YWx1ZS56O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHsgU3BoZXJlQnVpbGRlciB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NZXNoZXMvQnVpbGRlcnMvc3BoZXJlQnVpbGRlcic7XHJcbmltcG9ydCB7IENvbGxpZGVyIH0gZnJvbSAnLi9jb2xsaWRlcic7XHJcblxyXG4vKipcclxuICogVlJNIFNwcmluZ0JvbmUgQ29sbGlkZXJHcm91cFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbGxpZGVyR3JvdXAge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNvbGxpZGVyczogQ29sbGlkZXJbXSA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHRyYW5zZm9ybSBUaGUgbm9kZSBvZiB0aGUgY29sbGlkZXIgZ3JvdXAgZm9yIHNldHRpbmcgdXAgY29sbGlzaW9uIGRldGVjdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgdHJhbnNmb3JtOiBUcmFuc2Zvcm1Ob2RlKSB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIG9mZnNldHRlZCBjb2xsaWRlclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIGxvY2FsIGNvb3JkaW5hdGUgZnJvbSB0aGUgbm9kZSBvZiB0aGUgY29sbGlkZXIgZ3JvdXAuXHJcbiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIGNvbGxpZGVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkQ29sbGlkZXIob2Zmc2V0OiBWZWN0b3IzLCByYWRpdXM6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHNwaGVyZSA9IFNwaGVyZUJ1aWxkZXIuQ3JlYXRlU3BoZXJlKFxyXG4gICAgICAgICAgICBgJHt0aGlzLnRyYW5zZm9ybS5uYW1lfV9Db2xsaWRlclNwaGVyZWAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzOiA2LFxyXG4gICAgICAgICAgICAgICAgZGlhbWV0ZXI6IHJhZGl1cyAqIDIuMCxcclxuICAgICAgICAgICAgICAgIHVwZGF0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uZ2V0U2NlbmUoKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgc3BoZXJlLnNldFBhcmVudCh0aGlzLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgc3BoZXJlLnNldFBvc2l0aW9uV2l0aExvY2FsVmVjdG9yKG9mZnNldCk7XHJcbiAgICAgICAgc3BoZXJlLnNldEVuYWJsZWQoZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbGxpZGVycy5wdXNoKG5ldyBDb2xsaWRlcihvZmZzZXQsIHJhZGl1cywgc3BoZXJlKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlJztcclxuaW1wb3J0IHR5cGUgeyBWZWN0b3IzIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5cclxuLyoqXHJcbiAqIENvbGxpZGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29sbGlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBsb2NhbCBjb29yZGluYXRlIGZyb20gdGhlIG5vZGUgb2YgdGhlIGNvbGxpZGVyIGdyb3VwLlxyXG4gICAgICogQHBhcmFtIHJhZGl1cyBUaGUgcmFkaXVzIG9mIHRoZSBjb2xsaWRlci5cclxuICAgICAqIEBwYXJhbSBzcGhlcmUgVGhlIHNwZWhlcmUgbWVzaCBmb3Igd29ybGRNYXRyaXggYW5kIGdpem1vLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IG9mZnNldDogVmVjdG9yMywgcHVibGljIHJlYWRvbmx5IHJhZGl1czogbnVtYmVyLCBwdWJsaWMgcmVhZG9ubHkgc3BoZXJlOiBNZXNoKSB7fVxyXG59XHJcbiIsImltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aCc7XHJcbmltcG9ydCB0eXBlIHsgVHJhbnNmb3JtTm9kZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NZXNoZXMvdHJhbnNmb3JtTm9kZSc7XHJcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSB7IElWUk1TZWNvbmRhcnlBbmltYXRpb24gfSBmcm9tICcuLi92cm0taW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IENvbGxpZGVyR3JvdXAgfSBmcm9tICcuL2NvbGxpZGVyLWdyb3VwJztcclxuaW1wb3J0IHsgVlJNU3ByaW5nQm9uZSB9IGZyb20gJy4vdnJtLXNwcmluZy1ib25lJztcclxuXHJcbi8qKlxyXG4gKiBmdW5jdGlvbiB0byBnZXQgYm9uZSBmcm9tIG5vZGVJbmRleFxyXG4gKi9cclxudHlwZSBnZXRCb25lID0gKG5vZGVJbmRleDogbnVtYmVyKSA9PiBOdWxsYWJsZTxUcmFuc2Zvcm1Ob2RlPjtcclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG4vKipcclxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgc3ByaW5nc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25zdHJ1Y3RTcHJpbmdzT3B0aW9ucyB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSByZXNpbGllbmNlIG9mIHRoZSBzd2F5aW5nIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBzdGlmZm5lc3M/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdHJlbmd0aCBvZiBncmF2aXR5XHJcbiAgICAgKi9cclxuICAgIGdyYXZpdHlQb3dlcj86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRpcmVjdGlvbiBvZiBncmF2aXR5LiBTZXQgKDAsIC0xLCAwKSBmb3Igc2ltdWxhdGluZyB0aGUgZ3Jhdml0eS4gU2V0ICgxLCAwLCAwKSBmb3Igc2ltdWxhdGluZyB0aGUgd2luZC5cclxuICAgICAqL1xyXG4gICAgZ3Jhdml0eURpcj86IFZlY3RvcjM7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSByZXNpc3RhbmNlIChkZWNlbGVyYXRpb24pIG9mIGF1dG9tYXRpYyBhbmltYXRpb25cclxuICAgICAqL1xyXG4gICAgZHJhZ0ZvcmNlPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUgdXNlZCBmb3IgdGhlIGNvbGxpc2lvbiBkZXRlY3Rpb24gd2l0aCBjb2xsaWRlcnNcclxuICAgICAqL1xyXG4gICAgaGl0UmFkaXVzPzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogVlJNIFNwcmluZ0JvbmUgQ29udHJvbGxlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNwcmluZ0JvbmVDb250cm9sbGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogU3ByaW5nIEJvbmUgTGlzdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNwcmluZ3M6IFZSTVNwcmluZ0JvbmVbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleHQgU2Vjb25kYXJ5QW5pbWF0aW9uIE9iamVjdFxyXG4gICAgICogQHBhcmFtIGdldEJvbmVcclxuICAgICAqL1xyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IGV4dDogSVZSTVNlY29uZGFyeUFuaW1hdGlvbiwgZ2V0Qm9uZTogZ2V0Qm9uZSwgb3B0aW9ucz86IENvbnN0cnVjdFNwcmluZ3NPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgY29sbGlkZXJHcm91cHMgPSB0aGlzLmNvbnN0cnVjdENvbGxpZGVyR3JvdXBzKGdldEJvbmUpO1xyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIC8vIHRoaXMuc3ByaW5ncyA9IHRoaXMuY29uc3RydWN0U3ByaW5ncyhnZXRCb25lLCBjb2xsaWRlckdyb3Vwcyk7XHJcbiAgICAgICAgdGhpcy5zcHJpbmdzID0gdGhpcy5jb25zdHJ1Y3RTcHJpbmdzKGdldEJvbmUsIGNvbGxpZGVyR3JvdXBzLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNwcmluZ3MgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBhbGwgU3ByaW5nQm9uZXNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVsdGFUaW1lIEVsYXBzZWQgc2VjIGZyb20gcHJldmlvdXMgZnJhbWVcclxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb2NzLnVuaXR5M2QuY29tL1NjcmlwdFJlZmVyZW5jZS9UaW1lLWRlbHRhVGltZS5odG1sXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyDjg53jg7zjgrrlvozjga7jgYLjgonjgbbjgorpmLLmraLjga7jgZ/jgoEgY2xhbXBcclxuICAgICAgICBkZWx0YVRpbWUgPSBNYXRoLm1heCgwLjAsIE1hdGgubWluKDE2LjY2NiwgZGVsdGFUaW1lKSkgLyAxMDAwO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gdGhpcy5zcHJpbmdzLm1hcDxQcm9taXNlPHZvaWQ+Pigoc3ByaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzcHJpbmcudXBkYXRlKGRlbHRhVGltZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgLyogRG8gbm90aGluZyAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0Q29sbGlkZXJHcm91cHMoZ2V0Qm9uZTogZ2V0Qm9uZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5leHQuY29sbGlkZXJHcm91cHMgfHwgIXRoaXMuZXh0LmNvbGxpZGVyR3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVyR3JvdXBzOiBDb2xsaWRlckdyb3VwW10gPSBbXTtcclxuICAgICAgICB0aGlzLmV4dC5jb2xsaWRlckdyb3Vwcy5mb3JFYWNoKChjb2xsaWRlckdyb3VwKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvbmUgPSBnZXRCb25lKGNvbGxpZGVyR3JvdXAubm9kZSkgYXMgVHJhbnNmb3JtTm9kZTtcclxuICAgICAgICAgICAgY29uc3QgZyA9IG5ldyBDb2xsaWRlckdyb3VwKGJvbmUpO1xyXG4gICAgICAgICAgICBjb2xsaWRlckdyb3VwLmNvbGxpZGVycy5mb3JFYWNoKChjb2xsaWRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZy5hZGRDb2xsaWRlcihcclxuICAgICAgICAgICAgICAgICAgICAvLyBWUk0g5Y+z5omL57O7WV9VUCwgLVpfRnJvbnQg44GL44KJIEJhYnlsb24uanMg5bem5omL57O7WV9VUCwgK1pfRnJvbnQg44Gr44GZ44KLXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjMoLWNvbGxpZGVyLm9mZnNldC54LCBjb2xsaWRlci5vZmZzZXQueSwgLWNvbGxpZGVyLm9mZnNldC56KSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xsaWRlci5yYWRpdXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb2xsaWRlckdyb3Vwcy5wdXNoKGcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjb2xsaWRlckdyb3VwcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdFNwcmluZ3MoZ2V0Qm9uZTogZ2V0Qm9uZSwgY29sbGlkZXJHcm91cHM6IENvbGxpZGVyR3JvdXBbXSwgb3B0aW9ucz86IENvbnN0cnVjdFNwcmluZ3NPcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV4dC5ib25lR3JvdXBzIHx8ICF0aGlzLmV4dC5ib25lR3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNwcmluZ3M6IFZSTVNwcmluZ0JvbmVbXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZXh0LmJvbmVHcm91cHMuZm9yRWFjaCgoc3ByaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RCb25lcyA9IChzcHJpbmcuYm9uZXMgfHwgW10pLm1hcCgoYm9uZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJvbmUoYm9uZSkgYXMgVHJhbnNmb3JtTm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwcmluZ0NvbGxpZGVycyA9IChzcHJpbmcuY29sbGlkZXJHcm91cHMgfHwgW10pLm1hcDxDb2xsaWRlckdyb3VwPigoZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxpZGVyR3JvdXBzW2ddO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3ByaW5ncy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgVlJNU3ByaW5nQm9uZShcclxuICAgICAgICAgICAgICAgIC8vICAgICBzcHJpbmcuY29tbWVudCxcclxuICAgICAgICAgICAgICAgIC8vICAgICBzcHJpbmcuc3RpZmZpbmVzcyxcclxuICAgICAgICAgICAgICAgIC8vICAgICBzcHJpbmcuZ3Jhdml0eVBvd2VyLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIG5ldyBWZWN0b3IzKFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyBWUk0g5Y+z5omL57O7WV9VUCwgLVpfRnJvbnQg44GL44KJIEJhYnlsb24uanMg5bem5omL57O7WV9VUCwgK1pfRnJvbnQg44Gr44GZ44KLXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC1zcHJpbmcuZ3Jhdml0eURpci54LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBzcHJpbmcuZ3Jhdml0eURpci55LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAtc3ByaW5nLmdyYXZpdHlEaXIuelxyXG4gICAgICAgICAgICAgICAgLy8gICAgICkubm9ybWFsaXplKCksXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc3ByaW5nLmRyYWdGb3JjZSxcclxuICAgICAgICAgICAgICAgIC8vICAgICBnZXRCb25lKHNwcmluZy5jZW50ZXIpLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHNwcmluZy5oaXRSYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgcm9vdEJvbmVzLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHNwcmluZ0NvbGxpZGVyc1xyXG4gICAgICAgICAgICAgICAgLy8gKVxyXG4gICAgICAgICAgICAgICAgbmV3IFZSTVNwcmluZ0JvbmUoXHJcbiAgICAgICAgICAgICAgICAgICAgc3ByaW5nLmNvbW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz8uc3RpZmZuZXNzID8gb3B0aW9ucy5zdGlmZm5lc3MgOiBzcHJpbmcuc3RpZmZpbmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zPy5ncmF2aXR5UG93ZXIgPyBvcHRpb25zLmdyYXZpdHlQb3dlciA6IHNwcmluZy5ncmF2aXR5UG93ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz8uZ3Jhdml0eURpclxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuZ3Jhdml0eURpclxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBWZWN0b3IzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWUk0g5Y+z5omL57O7WV9VUCwgLVpfRnJvbnQg44GL44KJIEJhYnlsb24uanMg5bem5omL57O7WV9VUCwgK1pfRnJvbnQg44Gr44GZ44KLXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1zcHJpbmcuZ3Jhdml0eURpci54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbmcuZ3Jhdml0eURpci55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtc3ByaW5nLmdyYXZpdHlEaXIuelxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICkubm9ybWFsaXplKCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz8uZHJhZ0ZvcmNlID8gb3B0aW9ucy5kcmFnRm9yY2UgOiBzcHJpbmcuZHJhZ0ZvcmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEJvbmUoc3ByaW5nLmNlbnRlciksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz8uaGl0UmFkaXVzID8gb3B0aW9ucy5oaXRSYWRpdXMgOiBzcHJpbmcuaGl0UmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RCb25lcyxcclxuICAgICAgICAgICAgICAgICAgICBzcHJpbmdDb2xsaWRlcnNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3ByaW5ncztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBNYXRyaXgsIFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aCc7XHJcbmltcG9ydCB0eXBlIHsgVHJhbnNmb3JtTm9kZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NZXNoZXMvdHJhbnNmb3JtTm9kZSc7XHJcbmltcG9ydCB0eXBlIHsgTnVsbGFibGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSB7IENvbGxpZGVyR3JvdXAgfSBmcm9tICcuL2NvbGxpZGVyLWdyb3VwJztcclxuLy8gYmFzZWQgb25cclxuLy8gaHR0cDovL3JvY2tldGp1bXAuc2tyLmpwL3VuaXR5M2QvMTA5L1xyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZHdhbmdvL1VuaVZSTS9ibG9iL21hc3Rlci9TY3JpcHRzL1NwcmluZ0JvbmUvVlJNU3ByaW5nQm9uZS5jc1xyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcGl4aXYvdGhyZWUtdnJtL2Jsb2IvYWFkNTUxZTA0MWZhZDU1M2MxOWQyMDkxZTVmNWVhZmYxZWI4ZmFhOC9wYWNrYWdlcy90aHJlZS12cm0vc3JjL3NwcmluZ2JvbmUvVlJNU3ByaW5nQm9uZS50c1xyXG5cclxuY29uc3QgSURFTlRJVFlfTUFUUklYID0gTWF0cml4LklkZW50aXR5KCk7XHJcblxyXG5jb25zdCBfdjNBID0gbmV3IFZlY3RvcjMoKTtcclxuY29uc3QgX3YzQiA9IG5ldyBWZWN0b3IzKCk7XHJcbmNvbnN0IF92M0MgPSBuZXcgVmVjdG9yMygpO1xyXG5jb25zdCBfcXVhdEEgPSBuZXcgUXVhdGVybmlvbigpO1xyXG5jb25zdCBfbWF0QSA9IG5ldyBNYXRyaXgoKTtcclxuY29uc3QgX21hdEIgPSBuZXcgTWF0cml4KCk7XHJcblxyXG4vKipcclxuICogVmVybGV0IFNwcmluZyBCb25lXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVlJNU3ByaW5nQm9uZUxvZ2ljIHtcclxuICAgIC8qKlxyXG4gICAgICogaW5pdGlhbCBsb2NhbCB0cmFuc2Zvcm0gTWFyaXhcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpbml0aWFsTG9jYWxNYXRyaXg6IE1hdHJpeDtcclxuICAgIC8qKlxyXG4gICAgICogQ2xvbmVkIGluaXRpYWwgbG9jYWwgcm90YXRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpbml0aWFsTG9jYWxSb3RhdGlvbjogUXVhdGVybmlvbjtcclxuICAgIC8qKlxyXG4gICAgICogQ2xvbmVkIGluaXRpYWwgbG9jYWwgY2hpbGQgcG9zaXRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpbml0aWFsTG9jYWxDaGlsZFBvc2l0aW9uOiBWZWN0b3IzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGVuZ3RoIG9mIHRoZSBib25lIGluIHJlbGF0aXZlIHNwYWNlIHVuaXQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2VudGVyU3BhY2VCb25lTGVuZ3RoOiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFBvc2l0aW9uIG9mIHRoZSBib25lIGluIHJlbGF0aXZlIHNwYWNlIHVuaXQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2VudGVyU3BhY2VQb3NpdGlvbjogVmVjdG9yMztcclxuICAgIC8qKlxyXG4gICAgICogUmVmZXJlbmNlIG9mIHBhcmVudCByb3RhdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGJvbmVBeGlzOiBWZWN0b3IzO1xyXG5cclxuICAgIHByaXZhdGUgY3VycmVudFRhaWw6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgcHJpdmF0ZSBwcmV2VGFpbDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBwcml2YXRlIG5leHRUYWlsOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBjZW50ZXIgQ2VudGVyIHJlZmVyZW5jZSBvZiBUcmFuc2Zvcm1Ob2RlXHJcbiAgICAgKiBAcGFyYW0gcmFkaXVzIENvbGxpc2lvbiBSYWRpdXNcclxuICAgICAqIEBwYXJhbSB0cmFuc2Zvcm0gQmFzZSBUcmFuc2Zvcm1Ob2RlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgY2VudGVyOiBOdWxsYWJsZTxUcmFuc2Zvcm1Ob2RlPiwgcHVibGljIHJlYWRvbmx5IHJhZGl1czogbnVtYmVyLCBwdWJsaWMgcmVhZG9ubHkgdHJhbnNmb3JtOiBUcmFuc2Zvcm1Ob2RlKSB7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSByb3RhdGlvblF1YXRlcm5pb24gd2hlbiBub3QgaW5pdGlhbGl6ZWRcclxuICAgICAgICBpZiAoIXRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24pIHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtLnJvdGF0aW9uUXVhdGVybmlvbiA9IHRyYW5zZm9ybS5yb3RhdGlvbi50b1F1YXRlcm5pb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmxkTWF0cml4ID0gdHJhbnNmb3JtLmdldFdvcmxkTWF0cml4KCk7XHJcbiAgICAgICAgdGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uID0gd29ybGRNYXRyaXguZ2V0VHJhbnNsYXRpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsTG9jYWxNYXRyaXggPSB0cmFuc2Zvcm0uX2xvY2FsTWF0cml4LmNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsTG9jYWxSb3RhdGlvbiA9IHRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24uY2xvbmUoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSB0cmFuc2Zvcm0uZ2V0Q2hpbGRUcmFuc2Zvcm1Ob2Rlcyh0cnVlKTtcclxuICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbExvY2FsQ2hpbGRQb3NpdGlvbiA9IHRyYW5zZm9ybS5wb3NpdGlvbi5jbG9uZSgpLm5vcm1hbGl6ZSgpLnNjYWxlSW5QbGFjZSgwLjA3KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxMb2NhbENoaWxkUG9zaXRpb24gPSBjaGlsZHJlblswXS5wb3NpdGlvbi5jbG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKHRoaXMuaW5pdGlhbExvY2FsQ2hpbGRQb3NpdGlvbiwgd29ybGRNYXRyaXgsIHRoaXMuY3VycmVudFRhaWwpO1xyXG4gICAgICAgIHRoaXMucHJldlRhaWwuY29weUZyb20odGhpcy5jdXJyZW50VGFpbCk7XHJcbiAgICAgICAgdGhpcy5uZXh0VGFpbC5jb3B5RnJvbSh0aGlzLmN1cnJlbnRUYWlsKTtcclxuXHJcbiAgICAgICAgdGhpcy5ib25lQXhpcyA9IHRoaXMuaW5pdGlhbExvY2FsQ2hpbGRQb3NpdGlvbi5ub3JtYWxpemVUb05ldygpO1xyXG4gICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZih0aGlzLmluaXRpYWxMb2NhbENoaWxkUG9zaXRpb24sIHdvcmxkTWF0cml4LCBfdjNBKTtcclxuICAgICAgICB0aGlzLmNlbnRlclNwYWNlQm9uZUxlbmd0aCA9IF92M0Euc3VidHJhY3RJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbikubGVuZ3RoKCk7XHJcblxyXG4gICAgICAgIGlmIChjZW50ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRNYXRyaXhXb3JsZFRvQ2VudGVyKF9tYXRBKTtcclxuXHJcbiAgICAgICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZih0aGlzLmN1cnJlbnRUYWlsLCBfbWF0QSwgdGhpcy5jdXJyZW50VGFpbCk7XHJcbiAgICAgICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZih0aGlzLnByZXZUYWlsLCBfbWF0QSwgdGhpcy5wcmV2VGFpbCk7XHJcbiAgICAgICAgICAgIFZlY3RvcjMuVHJhbnNmb3JtQ29vcmRpbmF0ZXNUb1JlZih0aGlzLm5leHRUYWlsLCBfbWF0QSwgdGhpcy5uZXh0VGFpbCk7XHJcblxyXG4gICAgICAgICAgICB3b3JsZE1hdHJpeC5tdWx0aXBseVRvUmVmKF9tYXRBLCBfbWF0QSk7XHJcblxyXG4gICAgICAgICAgICBfbWF0QS5nZXRUcmFuc2xhdGlvblRvUmVmKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBWZWN0b3IzLlRyYW5zZm9ybUNvb3JkaW5hdGVzVG9SZWYodGhpcy5pbml0aWFsTG9jYWxDaGlsZFBvc2l0aW9uLCBfbWF0QSwgX3YzQSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2VudGVyU3BhY2VCb25lTGVuZ3RoID0gX3YzQS5zdWJ0cmFjdEluUGxhY2UodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKS5sZW5ndGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgVGFpbCBwb3NpdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzdGlmZm5lc3NGb3JjZSBDdXJyZW50IGZyYW1lIHN0aWZmbmVzc1xyXG4gICAgICogQHBhcmFtIGRyYWdGb3JjZSBDdXJyZW50IGZyYW1lIGRyYWcgZm9yY2VcclxuICAgICAqIEBwYXJhbSBleHRlcm5hbCBDdXJyZW50IGZyYW1lIGV4dGVybmFsIGZvcmNlXHJcbiAgICAgKiBAcGFyYW0gY29sbGlkZXJHcm91cHMgQ3VycmVudCBmcmFtZSBjb2xsaWRlckdyb3Vwc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlKHN0aWZmbmVzc0ZvcmNlOiBudW1iZXIsIGRyYWdGb3JjZTogbnVtYmVyLCBleHRlcm5hbDogVmVjdG9yMywgY29sbGlkZXJHcm91cHM6IENvbGxpZGVyR3JvdXBbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmIChOdW1iZXIuaXNOYU4odGhpcy50cmFuc2Zvcm0uZ2V0QWJzb2x1dGVQb3NpdGlvbigpLngpKSB7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCB1cGRhdGUgd2hlbiBhYnNvbHV0ZSBwb3NpdGlvbiBpcyBpbnZhbGlkXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBib25lIHBvc2l0aW9uIGluIGNlbnRlciBzcGFjZVxyXG4gICAgICAgIHRoaXMuZ2V0TWF0cml4V29ybGRUb0NlbnRlcihfbWF0QSk7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uZ2V0V29ybGRNYXRyaXgoKS5tdWx0aXBseVRvUmVmKF9tYXRBLCBfbWF0QSk7XHJcbiAgICAgICAgX21hdEEuZ2V0VHJhbnNsYXRpb25Ub1JlZih0aGlzLmNlbnRlclNwYWNlUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAvLyBHZXQgcGFyZW50IHBvc2l0aW9uIGluIGNlbnRlciBzcGFjZVxyXG4gICAgICAgIHRoaXMuZ2V0TWF0cml4V29ybGRUb0NlbnRlcihfbWF0Qik7XHJcbiAgICAgICAgdGhpcy5nZXRQYXJlbnRNYXRyaXhXb3JsZCgpLm11bHRpcGx5VG9SZWYoX21hdEIsIF9tYXRCKTtcclxuXHJcbiAgICAgICAgLy8gdmVybGV056mN5YiG44Gn5qyh44Gu5L2N572u44KS6KiI566XXHJcbiAgICAgICAgdGhpcy5uZXh0VGFpbC5jb3B5RnJvbSh0aGlzLmN1cnJlbnRUYWlsKTtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIOa4m+ihsOS7mOOBjeOBp+WJjeOBruODleODrOODvOODoOOBruenu+WLleOCkue2mee2mlxyXG4gICAgICAgICAgICBfdjNBLmNvcHlGcm9tKHRoaXMuY3VycmVudFRhaWwpXHJcbiAgICAgICAgICAgICAgICAuc3VidHJhY3RJblBsYWNlKHRoaXMucHJldlRhaWwpXHJcbiAgICAgICAgICAgICAgICAuc2NhbGVJblBsYWNlKDEuMCAtIGRyYWdGb3JjZSk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRhaWwuYWRkSW5QbGFjZShfdjNBKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyDopqrjga7lm57ou6LjgavjgojjgovlrZDjg5zjg7zjg7Pjga7np7vli5Xnm67mqJlcclxuICAgICAgICAgICAgX3YzQS5jb3B5RnJvbSh0aGlzLmJvbmVBeGlzKTtcclxuICAgICAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKF92M0EsIHRoaXMuaW5pdGlhbExvY2FsTWF0cml4LCBfdjNBKTtcclxuICAgICAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKF92M0EsIF9tYXRCLCBfdjNBKTtcclxuICAgICAgICAgICAgX3YzQS5zdWJ0cmFjdEluUGxhY2UodGhpcy5jZW50ZXJTcGFjZVBvc2l0aW9uKS5ub3JtYWxpemUoKS5zY2FsZUluUGxhY2Uoc3RpZmZuZXNzRm9yY2UpO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRUYWlsLmFkZEluUGxhY2UoX3YzQSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8g5aSW5Yqb44Gr44KI44KL56e75YuV6YePXHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRhaWwuYWRkSW5QbGFjZShleHRlcm5hbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8g6ZW344GV44KSIGJvbmVMZW5ndGgg44Gr5by35Yi2XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRhaWwuc3VidHJhY3RJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbikubm9ybWFsaXplKCkuc2NhbGVJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VCb25lTGVuZ3RoKS5hZGRJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gQ29sbGlzaW9uIOOBp+enu+WLlVxyXG4gICAgICAgICAgICB0aGlzLmNvbGxpZGUoY29sbGlkZXJHcm91cHMsIHRoaXMubmV4dFRhaWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcmV2VGFpbC5jb3B5RnJvbSh0aGlzLmN1cnJlbnRUYWlsKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUYWlsLmNvcHlGcm9tKHRoaXMubmV4dFRhaWwpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxMb2NhbE1hdHJpeC5tdWx0aXBseVRvUmVmKF9tYXRCLCBfbWF0QSk7XHJcbiAgICAgICAgY29uc3QgaW5pdGlhbENlbnRlclNwYWNlTWF0cml4SW52ID0gX21hdEEuaW52ZXJ0KCk7XHJcbiAgICAgICAgVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlc1RvUmVmKHRoaXMubmV4dFRhaWwsIGluaXRpYWxDZW50ZXJTcGFjZU1hdHJpeEludiwgX3YzQSk7XHJcbiAgICAgICAgX3YzQS5ub3JtYWxpemVUb1JlZihfdjNCKTtcclxuICAgICAgICBRdWF0ZXJuaW9uLkZyb21Vbml0VmVjdG9yc1RvUmVmKHRoaXMuYm9uZUF4aXMsIF92M0IsIF9xdWF0QSk7XHJcbiAgICAgICAgY29uc3QgYXBwbHlSb3RhdGlvbiA9IF9xdWF0QTtcclxuICAgICAgICB0aGlzLmluaXRpYWxMb2NhbFJvdGF0aW9uLm11bHRpcGx5VG9SZWYoYXBwbHlSb3RhdGlvbiwgdGhpcy50cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uISk7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBXb3JsZE1hdHJpeFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLmNvbXB1dGVXb3JsZE1hdHJpeCh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG1hdHJpeCB0aGF0IGNvbnZlcnRzIHdvcmxkIHNwYWNlIGludG8gY2VudGVyIHNwYWNlLlxyXG4gICAgICogQHBhcmFtIHJlc3VsdCBUYXJnZXQgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0TWF0cml4V29ybGRUb0NlbnRlcihyZXN1bHQ6IE1hdHJpeCk6IE1hdHJpeCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2VudGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLmdldFdvcmxkTWF0cml4KCkuaW52ZXJ0VG9SZWYocmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQuY29weUZyb20oSURFTlRJVFlfTUFUUklYKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHdvcmxkIG1hdHJpeCBvZiBpdHMgcGFyZW50IG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRQYXJlbnRNYXRyaXhXb3JsZCgpOiBNYXRyaXgge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5wYXJlbnQgPyAodGhpcy50cmFuc2Zvcm0ucGFyZW50IGFzIFRyYW5zZm9ybU5vZGUpLmdldFdvcmxkTWF0cml4KCkgOiBJREVOVElUWV9NQVRSSVg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDooZ3nqoHliKTlrprjgpLooYzjgYZcclxuICAgICAqIEBwYXJhbSBjb2xsaWRlckdyb3Vwc1xyXG4gICAgICogQHBhcmFtIHRhaWxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb2xsaWRlKGNvbGxpZGVyR3JvdXBzOiBDb2xsaWRlckdyb3VwW10sIHRhaWw6IFZlY3RvcjMpIHtcclxuICAgICAgICBjb2xsaWRlckdyb3Vwcy5mb3JFYWNoKChjb2xsaWRlckdyb3VwKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyR3JvdXAuY29sbGlkZXJzLmZvckVhY2goKGNvbGxpZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1hdHJpeFdvcmxkVG9DZW50ZXIoX21hdEEpO1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZXIuc3BoZXJlLmNvbXB1dGVXb3JsZE1hdHJpeCgpLm11bHRpcGx5VG9SZWYoX21hdEEsIF9tYXRBKTtcclxuICAgICAgICAgICAgICAgIF9tYXRBLmdldFRyYW5zbGF0aW9uVG9SZWYoX3YzQSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xsaWRlckNlbnRlclNwYWNlUG9zaXRpb24gPSBfdjNBO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBtYXhBYnNTY2FsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBjb2xsaWRlci5zcGhlcmUuYWJzb2x1dGVTY2FsaW5nLmFzQXJyYXkoKS5mb3JFYWNoKChzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4QWJzU2NhbGUgPSBNYXRoLm1heChtYXhBYnNTY2FsZSwgTWF0aC5hYnMocykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xsaWRlclJhZGl1cyA9IGNvbGxpZGVyLnJhZGl1cyAqIG1heEFic1NjYWxlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMucmFkaXVzICsgY29sbGlkZXJSYWRpdXM7XHJcblxyXG4gICAgICAgICAgICAgICAgdGFpbC5zdWJ0cmFjdFRvUmVmKGNvbGxpZGVyQ2VudGVyU3BhY2VQb3NpdGlvbiwgX3YzQik7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3YzQi5sZW5ndGhTcXVhcmVkKCkgPD0gciAqIHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3JtYWwgPSBfdjNCLmNvcHlGcm9tKHRhaWwpLnN1YnRyYWN0SW5QbGFjZShjb2xsaWRlckNlbnRlclNwYWNlUG9zaXRpb24pLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvc0Zyb21Db2xsaWRlciA9IF92M0MuY29weUZyb20oY29sbGlkZXJDZW50ZXJTcGFjZVBvc2l0aW9uKS5hZGRJblBsYWNlKG5vcm1hbC5zY2FsZUluUGxhY2UocikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0YWlsLmNvcHlGcm9tKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NGcm9tQ29sbGlkZXIuc3VidHJhY3RJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbikubm9ybWFsaXplKCkuc2NhbGVJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VCb25lTGVuZ3RoKS5hZGRJblBsYWNlKHRoaXMuY2VudGVyU3BhY2VQb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTdGFuZGFyZE1hdGVyaWFsIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9zdGFuZGFyZE1hdGVyaWFsJztcclxuaW1wb3J0IHsgQ29sb3IzLCBWZWN0b3IzIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgnO1xyXG5pbXBvcnQgeyBNZXNoQnVpbGRlciB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NZXNoZXMvbWVzaEJ1aWxkZXInO1xyXG5pbXBvcnQgdHlwZSB7IFRyYW5zZm9ybU5vZGUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3RyYW5zZm9ybU5vZGUnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBDb2xsaWRlckdyb3VwIH0gZnJvbSAnLi9jb2xsaWRlci1ncm91cCc7XHJcbmltcG9ydCB7IFZSTVNwcmluZ0JvbmVMb2dpYyB9IGZyb20gJy4vdnJtLXNwcmluZy1ib25lLWxvZ2ljJztcclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbmltcG9ydCB0eXBlIHsgQ29uc3RydWN0U3ByaW5nc09wdGlvbnMgfSBmcm9tICcuL3NwcmluZy1ib25lLWNvbnRyb2xsZXInO1xyXG5cclxuLyoqXHJcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZybS1jL1VuaVZSTS9ibG9iL21hc3Rlci9Bc3NldHMvVlJNL1VuaVZSTS9TY3JpcHRzL1NwcmluZ0JvbmUvVlJNU3ByaW5nQm9uZS5jc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZSTVNwcmluZ0JvbmUge1xyXG4gICAgcHVibGljIHZlcmxldHM6IFZSTVNwcmluZ0JvbmVMb2dpY1tdID0gW107XHJcbiAgICBwcml2YXRlIGFjdGl2ZUJvbmVzOiBUcmFuc2Zvcm1Ob2RlW10gPSBbXTtcclxuXHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgcHJpdmF0ZSBkcmF3R2l6bW8gPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZybS1jL3ZybS1zcGVjaWZpY2F0aW9uL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMC4wXHJcbiAgICAgKiBAcGFyYW0gY29tbWVudCBBbm5vdGF0aW9uIGNvbW1lbnRcclxuICAgICAqIEBwYXJhbSBzdGlmZm5lc3MgVGhlIHJlc2lsaWVuY2Ugb2YgdGhlIHN3YXlpbmcgb2JqZWN0ICh0aGUgcG93ZXIgb2YgcmV0dXJuaW5nIHRvIHRoZSBpbml0aWFsIHBvc2UpLlxyXG4gICAgICogQHBhcmFtIGdyYXZpdHlQb3dlciBUaGUgc3RyZW5ndGggb2YgZ3Jhdml0eS5cclxuICAgICAqIEBwYXJhbSBncmF2aXR5RGlyIFRoZSBkaXJlY3Rpb24gb2YgZ3Jhdml0eS4gU2V0ICgwLCAtMSwgMCkgZm9yIHNpbXVsYXRpbmcgdGhlIGdyYXZpdHkuIFNldCAoMSwgMCwgMCkgZm9yIHNpbXVsYXRpbmcgdGhlIHdpbmQuXHJcbiAgICAgKiBAcGFyYW0gZHJhZ0ZvcmNlIFRoZSByZXNpc3RhbmNlIChkZWNlbGVyYXRpb24pIG9mIGF1dG9tYXRpYyBhbmltYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gY2VudGVyIFRoZSByZWZlcmVuY2UgcG9pbnQgb2YgYSBzd2F5aW5nIG9iamVjdCBjYW4gYmUgc2V0IGF0IGFueSBsb2NhdGlvbiBleGNlcHQgdGhlIG9yaWdpbi5cclxuICAgICAqICAgICAgICAgICAgICAgV2hlbiBpbXBsZW1lbnRpbmcgVUkgbW92aW5nIHdpdGggd2FycCxcclxuICAgICAqICAgICAgICAgICAgICAgdGhlIHBhcmVudCBub2RlIHRvIG1vdmUgd2l0aCB3YXJwIGNhbiBiZSBzcGVjaWZpZWQgaWYgeW91IGRvbid0IHdhbnQgdG8gbWFrZSB0aGUgb2JqZWN0IHN3YXlpbmcgd2l0aCB3YXJwIG1vdmVtZW50LlxyXG4gICAgICogQHBhcmFtIGhpdFJhZGl1cyBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUgdXNlZCBmb3IgdGhlIGNvbGxpc2lvbiBkZXRlY3Rpb24gd2l0aCBjb2xsaWRlcnMuXHJcbiAgICAgKiBAcGFyYW0gYm9uZXMgU3BlY2lmeSB0aGUgbm9kZSBpbmRleCBvZiB0aGUgcm9vdCBib25lIG9mIHRoZSBzd2F5aW5nIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBjb2xsaWRlckdyb3VwcyBTcGVjaWZ5IHRoZSBpbmRleCBvZiB0aGUgY29sbGlkZXIgZ3JvdXAgZm9yIGNvbGxpc2lvbnMgd2l0aCBzd2F5aW5nIG9iamVjdHMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgY29tbWVudDogc3RyaW5nLFxyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIC8vIHB1YmxpYyByZWFkb25seSBzdGlmZm5lc3M6IG51bWJlcixcclxuICAgICAgICAvLyBwdWJsaWMgcmVhZG9ubHkgZ3Jhdml0eVBvd2VyOiBudW1iZXIsXHJcbiAgICAgICAgLy8gcHVibGljIHJlYWRvbmx5IGdyYXZpdHlEaXI6IFZlY3RvcjMsXHJcbiAgICAgICAgLy8gcHVibGljIHJlYWRvbmx5IGRyYWdGb3JjZTogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyBzdGlmZm5lc3M6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgZ3Jhdml0eVBvd2VyOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIGdyYXZpdHlEaXI6IFZlY3RvcjMsXHJcbiAgICAgICAgcHVibGljIGRyYWdGb3JjZTogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBjZW50ZXI6IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+LFxyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIC8vIHB1YmxpYyByZWFkb25seSBoaXRSYWRpdXM6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgaGl0UmFkaXVzOiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGJvbmVzOiBBcnJheTxOdWxsYWJsZTxUcmFuc2Zvcm1Ob2RlPj4sXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNvbGxpZGVyR3JvdXBzOiBDb2xsaWRlckdyb3VwW11cclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQm9uZXMgPSB0aGlzLmJvbmVzLmZpbHRlcigoYm9uZSkgPT4gYm9uZSAhPT0gbnVsbCkgYXMgVHJhbnNmb3JtTm9kZVtdO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQm9uZXMuZm9yRWFjaCgoYm9uZSkgPT4ge1xyXG4gICAgICAgICAgICBbYm9uZV0uY29uY2F0KGJvbmUuZ2V0Q2hpbGRUcmFuc2Zvcm1Ob2RlcygpKS5mb3JFYWNoKChiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlcmxldHMucHVzaChuZXcgVlJNU3ByaW5nQm9uZUxvZ2ljKHRoaXMuY2VudGVyLCB0aGlzLmhpdFJhZGl1cywgYikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZHJhd0dpem1vKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBHaXptbygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwR2l6bW8oKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVCb25lcy5mb3JFYWNoKChib25lKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gYm9uZS5nZXRTY2VuZSgpO1xyXG4gICAgICAgICAgICBbYm9uZV0uY29uY2F0KGJvbmUuZ2V0Q2hpbGRUcmFuc2Zvcm1Ob2RlcygpKS5mb3JFYWNoKChiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib25lR2l6bW8gPSBNZXNoQnVpbGRlci5DcmVhdGVTcGhlcmUoXHJcbiAgICAgICAgICAgICAgICAgICAgYi5uYW1lICsgJ19ib25lR2l6bW8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudHM6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiB0aGlzLmhpdFJhZGl1cyAqIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0ID0gbmV3IFN0YW5kYXJkTWF0ZXJpYWwoYi5uYW1lICsgJ19ib25lR2l6bW9tYXQnLCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBtYXQuZW1pc3NpdmVDb2xvciA9IENvbG9yMy5SZWQoKTtcclxuICAgICAgICAgICAgICAgIG1hdC53aXJlZnJhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYm9uZUdpem1vLm1hdGVyaWFsID0gbWF0O1xyXG4gICAgICAgICAgICAgICAgYm9uZUdpem1vLnNldFBhcmVudChiKTtcclxuICAgICAgICAgICAgICAgIGJvbmVHaXptby5wb3NpdGlvbiA9IFZlY3RvcjMuWmVybygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb2xsaWRlckdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IGdyb3VwLnRyYW5zZm9ybS5nZXRTY2VuZSgpO1xyXG4gICAgICAgICAgICBncm91cC5jb2xsaWRlcnMuZm9yRWFjaCgoY29sbGlkZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwaGVyZSA9IGNvbGxpZGVyLnNwaGVyZTtcclxuICAgICAgICAgICAgICAgIGlmICghc3BoZXJlLmlzRW5hYmxlZChmYWxzZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGhlcmUuc2V0RW5hYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXQgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbChncm91cC50cmFuc2Zvcm0ubmFtZSArICdfY29sbGlkZXJHaXptb21hdCcsIHNjZW5lKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXQuZW1pc3NpdmVDb2xvciA9IENvbG9yMy5ZZWxsb3coKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXQud2lyZWZyYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzcGhlcmUubWF0ZXJpYWwgPSBtYXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGJvbmVzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlbHRhVGltZVxyXG4gICAgICovXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIC8vIHB1YmxpYyBhc3luYyB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIsIGJvbmVPcHRpb25zPzogQ29uc3RydWN0U3ByaW5nc09wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICBjb25zdCBvbGRPcHRpb25zID0gdGhpcy51cGRhdGVPcHRpb25zKGJvbmVPcHRpb25zKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RpZmZuZXNzID0gdGhpcy5zdGlmZm5lc3MgKiBkZWx0YVRpbWU7XHJcbiAgICAgICAgY29uc3QgZXh0ZXJuYWwgPSB0aGlzLmdyYXZpdHlEaXIuc2NhbGUodGhpcy5ncmF2aXR5UG93ZXIgKiBkZWx0YVRpbWUpO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMudmVybGV0cy5tYXA8UHJvbWlzZTx2b2lkPj4oKHZlcmxldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgICAgIHZlcmxldC51cGRhdGUoc3RpZmZuZXNzLCB0aGlzLmRyYWdGb3JjZSwgZXh0ZXJuYWwsIHRoaXMuY29sbGlkZXJHcm91cHMpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gUmVzdG9yZSBvcHRpb25zXHJcbiAgICAgICAgdGhpcy51cGRhdGVPcHRpb25zKG9sZE9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvKiBEbyBOb3RoaW5nICovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU9wdGlvbnMoYm9uZU9wdGlvbnM/OiBDb25zdHJ1Y3RTcHJpbmdzT3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGJhY2t1cE9wdGlvbnM6IENvbnN0cnVjdFNwcmluZ3NPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBzdGlmZm5lc3M6IHRoaXMuc3RpZmZuZXNzLFxyXG4gICAgICAgICAgICBncmF2aXR5UG93ZXI6IHRoaXMuZ3Jhdml0eVBvd2VyLFxyXG4gICAgICAgICAgICBncmF2aXR5RGlyOiB0aGlzLmdyYXZpdHlEaXIuY2xvbmUoKSxcclxuICAgICAgICAgICAgZHJhZ0ZvcmNlOiB0aGlzLmRyYWdGb3JjZSxcclxuICAgICAgICAgICAgaGl0UmFkaXVzOiB0aGlzLmhpdFJhZGl1cyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3RpZmZuZXNzID0gYm9uZU9wdGlvbnM/LnN0aWZmbmVzcyB8fCB0aGlzLnN0aWZmbmVzcztcclxuICAgICAgICB0aGlzLmdyYXZpdHlQb3dlciA9IGJvbmVPcHRpb25zPy5ncmF2aXR5UG93ZXIgfHwgdGhpcy5ncmF2aXR5UG93ZXI7XHJcbiAgICAgICAgdGhpcy5ncmF2aXR5RGlyID0gYm9uZU9wdGlvbnM/LmdyYXZpdHlEaXIgfHwgdGhpcy5ncmF2aXR5RGlyO1xyXG4gICAgICAgIHRoaXMuZHJhZ0ZvcmNlID0gYm9uZU9wdGlvbnM/LmRyYWdGb3JjZSB8fCB0aGlzLmRyYWdGb3JjZTtcclxuICAgICAgICB0aGlzLmhpdFJhZGl1cyA9IGJvbmVPcHRpb25zPy5oaXRSYWRpdXMgfHwgdGhpcy5oaXRSYWRpdXM7XHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrdXBPcHRpb25zO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgTWF0ZXJpYWwgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsJztcclxuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgSUdMVEZMb2FkZXJFeHRlbnNpb24sIElNYXRlcmlhbCwgSU1lc2hQcmltaXRpdmUgfSBmcm9tICdAYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAnO1xyXG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSAnQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wJztcclxuaW1wb3J0IHsgVlJNTWFuYWdlciB9IGZyb20gJy4vdnJtLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBWUk1NYXRlcmlhbEdlbmVyYXRvciB9IGZyb20gJy4vdnJtLW1hdGVyaWFsLWdlbmVyYXRvcic7XHJcblxyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuaW1wb3J0IHsgR0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyIH0gZnJvbSAnLi4vLi4vbG9hZGVyLW9ic2VydmVyJztcclxuaW1wb3J0IHsgVjNEQ29yZSB9IGZyb20gJy4uLy4uLy4uL2luZGV4JztcclxuXHJcbi8qKlxyXG4gKiBgZXh0ZW5zaW9uc2Ag44Gr5YWl44KL5ouh5by144Kt44O8XHJcbiAqL1xyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuLy8gY29uc3QgTkFNRSA9ICdWUk0nO1xyXG5cclxuLyoqXHJcbiAqIFZSTSDmi6HlvLXjgpLlh6bnkIbjgZnjgotcclxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS92cm0tYy92cm0tc3BlY2lmaWNhdGlvbi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzAuMClcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWUk1Mb2FkZXJFeHRlbnNpb24gaW1wbGVtZW50cyBJR0xURkxvYWRlckV4dGVuc2lvbiB7XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTkFNRSA9ICdWUk0nO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9IFZSTUxvYWRlckV4dGVuc2lvbi5OQU1FO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZW5hYmxlZCA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIOOBk+OBriBNZXNoIGluZGV4IOS7pemZjeOBjOiqreOBv+i+vOOBv+WvvuixoVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1lc2hlc0Zyb20gPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiDjgZPjga4gVHJhbnNmb3JtTm9kZSBpbmRleCDku6XpmY3jgYzoqq3jgb/ovrzjgb/lr77osaFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Ob2Rlc0Zyb20gPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiDjgZPjga4gTWF0ZXJpYWwgaW5kZXgg5Lul6ZmN44GM6Kqt44G/6L6844G/5a++6LGhXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWF0ZXJpYWxzRnJvbSA9IDA7XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZGVyIG9ic2VydmVyc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvYWRlck9ic2VydmVyczogR0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyW10gPSBbXTtcclxuICAgIHByaXZhdGUgb25Mb2FkZWRDYWxsQmFjazogRnVuY3Rpb247XHJcbiAgICAvKipcclxuICAgICAqIFZSTSBNYW5hZ2VyIGZyb20gdGhpcyBsb2FkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1hbmFnZXI6IFZSTU1hbmFnZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIGxvYWRlcjogR0xURkxvYWRlciwgcHJpdmF0ZSB2M0RDb3JlOiBWM0RDb3JlKSB7XHJcbiAgICAgICAgLy8gR0xURkxvYWRlciBoYXMgYWxyZWFkeSBhZGRlZCByb290TWVzaCBhcyBfX3Jvb3RfXyBiZWZvcmUgbG9hZCBleHRlbnNpb25cclxuICAgICAgICAvLyBAc2VlIGdsVEZMb2FkZXIuX2xvYWREYXRhXHJcbiAgICAgICAgdGhpcy5tZXNoZXNGcm9tID0gdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLm1lc2hlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtTm9kZXNGcm9tID0gdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLnRyYW5zZm9ybU5vZGVzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsc0Zyb20gPSB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUubWF0ZXJpYWxzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgdGhpcy5hZGRMb2FkZXJPYnNlcnZlcih0aGlzLnYzRENvcmUpO1xyXG4gICAgICAgIHRoaXMub25Mb2FkZWRDYWxsQmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgdjNEQ29yZS5hZGRWUk1NYW5hZ2VyKHRoaXMubWFuYWdlcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2M0RDb3JlLmFkZE9uTG9hZENvbXBsZXRlQ2FsbGJhY2tzKHRoaXMub25Mb2FkZWRDYWxsQmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICAodGhpcy5sb2FkZXIgYXMgYW55KSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgICAgIHRoaXMubG9hZGVyT2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy52M0RDb3JlLnJlbW92ZU9uTG9hZENvbXBsZXRlQ2FsbGJhY2sodGhpcy5vbkxvYWRlZENhbGxCYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblJlYWR5KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zIHx8ICF0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnNbVlJNTG9hZGVyRXh0ZW5zaW9uLk5BTUVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gY29uc3Qgc2NlbmUgPSB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmU7XHJcbiAgICAgICAgLy8gY29uc3QgbWFuYWdlciA9IG5ldyBWUk1NYW5hZ2VyKHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9uc1tWUk1Mb2FkZXJFeHRlbnNpb24uTkFNRV0sIHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZSwgdGhpcy5tZXNoZXNGcm9tLCB0aGlzLnRyYW5zZm9ybU5vZGVzRnJvbSwgdGhpcy5tYXRlcmlhbHNGcm9tKTtcclxuICAgICAgICB0aGlzLm1hbmFnZXIgPSBuZXcgVlJNTWFuYWdlcih0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnNbVlJNTG9hZGVyRXh0ZW5zaW9uLk5BTUVdLCB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUsIHRoaXMubWVzaGVzRnJvbSwgdGhpcy50cmFuc2Zvcm1Ob2Rlc0Zyb20sIHRoaXMubWF0ZXJpYWxzRnJvbSk7XHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gc2NlbmUubWV0YWRhdGEgPSBzY2VuZS5tZXRhZGF0YSB8fCB7fTtcclxuICAgICAgICAvLyBzY2VuZS5tZXRhZGF0YS52cm1NYW5hZ2VycyA9IHNjZW5lLm1ldGFkYXRhLnZybU1hbmFnZXJzIHx8IFtdO1xyXG4gICAgICAgIC8vIHNjZW5lLm1ldGFkYXRhLnZybU1hbmFnZXJzLnB1c2gobWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIuYmFieWxvblNjZW5lLm9uRGlzcG9zZU9ic2VydmFibGUuYWRkKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gU2NlbmUgZGlzcG9zZSDmmYLjgasgTWFuYWdlciDjgoLnoLTmo4TjgZnjgotcclxuICAgICAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgICAgIC8vIG1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmxvYWRlci5iYWJ5bG9uU2NlbmUubWV0YWRhdGEudnJtTWFuYWdlcnMgPSBbXTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAgICAgLy8gSW5mb3JtIG9ic2VydmVyc1xyXG4gICAgICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgdGhpcy5sb2FkZXJPYnNlcnZlcnMpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIub25Mb2FkUmVhZHkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW5oZXJpdGRvY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgX2xvYWRWZXJ0ZXhEYXRhQXN5bmMoY29udGV4dDogc3RyaW5nLCBwcmltaXRpdmU6IElNZXNoUHJpbWl0aXZlLCBiYWJ5bG9uTWVzaDogTWVzaCkge1xyXG4gICAgICAgIGlmICghcHJpbWl0aXZlLmV4dHJhcyB8fCAhcHJpbWl0aXZlLmV4dHJhcy50YXJnZXROYW1lcykge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g44G+44GgIE1vcnBoVGFyZ2V0IOOBjOeUn+aIkOOBleOCjOOBpuOBhOOBquOBhOOBruOBp+OAgeODoeOCv+aDheWgseOBq+ODouODvOODleOCv+ODvOOCsuODg+ODiOaDheWgseOCkuWFpeOCjOOBpuOBiuOBj1xyXG4gICAgICAgIGJhYnlsb25NZXNoLm1ldGFkYXRhID0gYmFieWxvbk1lc2gubWV0YWRhdGEgfHwge307XHJcbiAgICAgICAgYmFieWxvbk1lc2gubWV0YWRhdGEudnJtVGFyZ2V0TmFtZXMgPSBwcmltaXRpdmUuZXh0cmFzLnRhcmdldE5hbWVzO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGluaGVyaXRkb2NcclxuICAgICAqL1xyXG4gICAgcHVibGljIF9sb2FkTWF0ZXJpYWxBc3luYyhjb250ZXh0OiBzdHJpbmcsIG1hdGVyaWFsOiBJTWF0ZXJpYWwsIG1lc2g6IE1lc2gsIGJhYnlsb25EcmF3TW9kZTogbnVtYmVyLCBhc3NpZ246IChiYWJ5bG9uTWF0ZXJpYWw6IE1hdGVyaWFsKSA9PiB2b2lkKTogTnVsbGFibGU8UHJvbWlzZTxNYXRlcmlhbD4+IHtcclxuICAgICAgICAvLyDjgrjjgqfjg43jg6zjg7zjgr/jgafjg57jg4bjg6rjgqLjg6vjgpLnlJ/miJDjgZnjgotcclxuICAgICAgICByZXR1cm4gbmV3IFZSTU1hdGVyaWFsR2VuZXJhdG9yKHRoaXMubG9hZGVyKS5nZW5lcmF0ZShjb250ZXh0LCBtYXRlcmlhbCwgbWVzaCwgYmFieWxvbkRyYXdNb2RlLCBhc3NpZ24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgb2JzZXJ2ZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZExvYWRlck9ic2VydmVyKG9ic2VydmVyOiBHTFRGTG9hZGVyRXh0ZW5zaW9uT2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLmxvYWRlck9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbi8vIOODreODvOODgOODvOOBq+eZu+mMsuOBmeOCi1xyXG4vLyBHTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBWUk0obG9hZGVyKSk7XHJcbiIsImltcG9ydCB7IFNjZW5lTG9hZGVyIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL0xvYWRpbmcvc2NlbmVMb2FkZXInO1xyXG5pbXBvcnQgeyBHTFRGRmlsZUxvYWRlciB9IGZyb20gJ0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGL2dsVEZGaWxlTG9hZGVyJztcclxuLy8qIFRPRE86IFBhdGNoZWQuXHJcbmltcG9ydCB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgVlJNTWFuYWdlciB9IGZyb20gJy4vdnJtLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9zY2VuZSc7XHJcbmltcG9ydCB7IElTY2VuZUxvYWRlclByb2dyZXNzRXZlbnQgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9zY2VuZUxvYWRlcic7XHJcblxyXG4vKipcclxuICogVlJNL1ZDSSDjg5XjgqHjgqTjg6vjgpLoqq3jgb/ovrzjgoHjgovjgojjgYbjgavjgZnjgotcclxuICog5ouh5by15a2Q44KS5aSJ5pu044GX44Gf44Gg44GRXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVlJNRmlsZUxvYWRlciBleHRlbmRzIEdMVEZGaWxlTG9hZGVyIHtcclxuICAgIHB1YmxpYyBuYW1lID0gJ3ZybSc7XHJcbiAgICBwdWJsaWMgZXh0ZW5zaW9ucyA9IHtcclxuICAgICAgICAnLnZybSc6IHsgaXNCaW5hcnk6IHRydWUgfSxcclxuICAgICAgICAnLnZjaSc6IHsgaXNCaW5hcnk6IHRydWUgfSxcclxuICAgIH07XHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyB1cmk6IHN0cmluZztcclxuICAgIHB1YmxpYyB2cm1NYW5hZ2VyOiBOdWxsYWJsZTxWUk1NYW5hZ2VyPiA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVBsdWdpbigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZSTUZpbGVMb2FkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgIHB1YmxpYyBsb2FkQXN5bmMoc2NlbmU6IFNjZW5lLCBkYXRhOiBhbnksIHJvb3RVcmw6IHN0cmluZywgb25Qcm9ncmVzcz86IChldmVudDogSVNjZW5lTG9hZGVyUHJvZ3Jlc3NFdmVudCkgPT4gdm9pZCwgZmlsZU5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnVyaSA9IHJvb3RVcmw7XHJcbiAgICAgICAgaWYgKGZpbGVOYW1lKSB0aGlzLnVyaSArPSBmaWxlTmFtZTtcclxuICAgICAgICByZXR1cm4gc3VwZXIubG9hZEFzeW5jKHNjZW5lLCBkYXRhLCByb290VXJsLCBvblByb2dyZXNzLCBmaWxlTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG4vLyBpZiAoU2NlbmVMb2FkZXIpIHtcclxuLy8gICAgIFNjZW5lTG9hZGVyLlJlZ2lzdGVyUGx1Z2luKG5ldyBWUk1GaWxlTG9hZGVyKCkpO1xyXG4vLyB9XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgSVZSTVZlY3RvcjMge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgejogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk1cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTSB7XHJcbiAgICBleHBvcnRlclZlcnNpb246IHN0cmluZztcclxuICAgIHNwZWNWZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBtZXRhOiBJVlJNTWV0YTtcclxuICAgIGh1bWFub2lkOiBJVlJNSHVtYW5vaWQ7XHJcbiAgICBmaXJzdFBlcnNvbjogSVZSTUZpcnN0UGVyc29uO1xyXG4gICAgYmxlbmRTaGFwZU1hc3RlcjogSVZSTUJsZW5kU2hhcGVNYXN0ZXI7XHJcbiAgICBzZWNvbmRhcnlBbmltYXRpb246IElWUk1TZWNvbmRhcnlBbmltYXRpb247XHJcbiAgICBtYXRlcmlhbFByb3BlcnRpZXM6IElWUk1NYXRlcmlhbFByb3BlcnR5W107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBleHRlbnNpb25zLlZSTS5tZXRhXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NZXRhIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBhdXRob3I6IHN0cmluZztcclxuICAgIGNvbnRhY3RJbmZvcm1hdGlvbj86IHN0cmluZztcclxuICAgIHJlZmVyZW5jZT86IHN0cmluZztcclxuICAgIHRleHR1cmU/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBleHRlbnNpb25zLlZSTS5odW1hbm9pZFxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNSHVtYW5vaWQge1xyXG4gICAgaHVtYW5Cb25lczogSVZSTUh1bWFub2lkQm9uZVtdO1xyXG4gICAgYXJtU3RyZXRjaD86IG51bWJlcjtcclxuICAgIGxlZ1N0cmV0Y2g/OiBudW1iZXI7XHJcbiAgICB1cHBlckFybVR3aXN0PzogbnVtYmVyO1xyXG4gICAgbG93ZXJBcm1Ud2lzdD86IG51bWJlcjtcclxuICAgIHVwcGVyTGVnVHdpc3Q/OiBudW1iZXI7XHJcbiAgICBsb3dlckxlZ1R3aXN0PzogbnVtYmVyO1xyXG4gICAgZmVldFNwYWNpbmc/OiBudW1iZXI7XHJcbiAgICBoYXNUcmFuc2xhdGlvbkRvRj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUh1bWFub2lkQm9uZSB7XHJcbiAgICBib25lOiBzdHJpbmc7XHJcbiAgICBub2RlOiBudW1iZXI7XHJcbiAgICB1c2VEZWZhdWx0VmFsdWVzOiBib29sZWFuO1xyXG4gICAgbWluPzogSVZSTVZlY3RvcjM7XHJcbiAgICBtYXg/OiBJVlJNVmVjdG9yMztcclxuICAgIGNlbnRlcj86IElWUk1WZWN0b3IzO1xyXG4gICAgYXhpc0xlbmd0aD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNRmlyc3RQZXJzb25NZXNoQW5ub3RhdGlvbiB7XHJcbiAgICBtZXNoOiBudW1iZXI7XHJcbiAgICBmaXJzdFBlcnNvbkZsYWc6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNRmlyc3RQZXJzb25EZWdyZWVNYXAge1xyXG4gICAgY3VydmU6IG51bWJlcltdO1xyXG4gICAgeFJhbmdlOiBudW1iZXI7XHJcbiAgICB5UmFuZ2U6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIGV4dGVuc2lvbnMuVlJNLmZpcnN0UGVyc29uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1GaXJzdFBlcnNvbiB7XHJcbiAgICBmaXJzdFBlcnNvbkJvbmU6IG51bWJlcjtcclxuICAgIGZpcnN0UGVyc29uQm9uZU9mZnNldDogSVZSTVZlY3RvcjM7XHJcbiAgICBtZXNoQW5ub3RhdGlvbnM6IElWUk1GaXJzdFBlcnNvbk1lc2hBbm5vdGF0aW9uW107XHJcbiAgICBsb29rQXRUeXBlTmFtZTogJ0JvbmUnIHwgJ0JsZW5kU2hhcGUnO1xyXG4gICAgbG9va0F0SG9yaXpvbnRhbElubmVyOiBJVlJNRmlyc3RQZXJzb25EZWdyZWVNYXA7XHJcbiAgICBsb29rQXRIb3Jpem9udGFsT3V0ZXI6IElWUk1GaXJzdFBlcnNvbkRlZ3JlZU1hcDtcclxuICAgIGxvb2tBdFZlcnRpY2FsRG93bjogSVZSTUZpcnN0UGVyc29uRGVncmVlTWFwO1xyXG4gICAgbG9va0F0VmVydGljYWxVcDogSVZSTUZpcnN0UGVyc29uRGVncmVlTWFwO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk0uYmxlbmRTaGFwZU1hc3RlclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNQmxlbmRTaGFwZU1hc3RlciB7XHJcbiAgICBibGVuZFNoYXBlR3JvdXBzOiBJVlJNQmxlbmRTaGFwZUdyb3VwW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUJsZW5kU2hhcGVHcm91cCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwcmVzZXROYW1lOiBzdHJpbmc7XHJcbiAgICBiaW5kczogSVZSTUJsZW5kU2hhcGVCaW5kW107XHJcbiAgICBtYXRlcmlhbFZhbHVlczogSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmRbXTtcclxuICAgIGlzQmluYXJ5OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1CbGVuZFNoYXBlQmluZCB7XHJcbiAgICBtZXNoOiBudW1iZXI7XHJcbiAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgd2VpZ2h0OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTUJsZW5kU2hhcGVNYXRlcmlhbEJpbmQge1xyXG4gICAgbWF0ZXJpYWxOYW1lOiBzdHJpbmc7XHJcbiAgICBwcm9wZXJ0eU5hbWU6IHN0cmluZztcclxuICAgIHRhcmdldFZhbHVlOiBudW1iZXJbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uU3ByaW5nIHtcclxuICAgIGNvbW1lbnQ6IHN0cmluZztcclxuICAgIHN0aWZmaW5lc3M6IG51bWJlcjtcclxuICAgIGdyYXZpdHlQb3dlcjogbnVtYmVyO1xyXG4gICAgZ3Jhdml0eURpcjogSVZSTVZlY3RvcjM7XHJcbiAgICBkcmFnRm9yY2U6IG51bWJlcjtcclxuICAgIGNlbnRlcjogbnVtYmVyO1xyXG4gICAgaGl0UmFkaXVzOiBudW1iZXI7XHJcbiAgICBib25lczogbnVtYmVyW107XHJcbiAgICBjb2xsaWRlckdyb3VwczogbnVtYmVyW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTVNlY29uZGFyeUFuaW1hdGlvbkNvbGxpZGVyIHtcclxuICAgIG9mZnNldDogSVZSTVZlY3RvcjM7XHJcbiAgICByYWRpdXM6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNU2Vjb25kYXJ5QW5pbWF0aW9uQ29sbGlkZXJHcm91cCB7XHJcbiAgICBub2RlOiBudW1iZXI7XHJcbiAgICBjb2xsaWRlcnM6IElWUk1TZWNvbmRhcnlBbmltYXRpb25Db2xsaWRlcltdO1xyXG59XHJcblxyXG4vKipcclxuICogZXh0ZW5zaW9ucy5WUk0uc2Vjb25kYXJ5QW5pbWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1TZWNvbmRhcnlBbmltYXRpb24ge1xyXG4gICAgYm9uZUdyb3VwczogSVZSTVNlY29uZGFyeUFuaW1hdGlvblNwcmluZ1tdO1xyXG4gICAgY29sbGlkZXJHcm91cHM6IElWUk1TZWNvbmRhcnlBbmltYXRpb25Db2xsaWRlckdyb3VwW107XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyIHtcclxuICAgIFZSTV9VU0VfR0xURlNIQURFUiA9ICdWUk1fVVNFX0dMVEZTSEFERVInLFxyXG4gICAgVlJNTVRvb24gPSAnVlJNL01Ub29uJyxcclxuICAgIFZSTVVubGl0VHJhbnNwYXJlbnRaV3JpdGUgPSAnVlJNL1VubGl0VHJhbnNwYXJlbnRaV3JpdGUnLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NYXRlcmlhbFByb3BlcnR5RmxvYXRQcm9wZXJ0aWVzIHtcclxuICAgIF9DdXRvZmY/OiBudW1iZXI7XHJcbiAgICBfQnVtcFNjYWxlPzogbnVtYmVyO1xyXG4gICAgX1JlY2VpdmVTaGFkb3dSYXRlPzogbnVtYmVyO1xyXG4gICAgX1NoYWRpbmdHcmFkZVJhdGU/OiBudW1iZXI7XHJcbiAgICBfU2hhZGVTaGlmdD86IG51bWJlcjtcclxuICAgIF9TaGFkZVRvb255PzogbnVtYmVyO1xyXG4gICAgX0xpZ2h0Q29sb3JBdHRlbnVhdGlvbj86IG51bWJlcjtcclxuICAgIF9JbmRpcmVjdExpZ2h0SW50ZW5zaXR5PzogbnVtYmVyO1xyXG4gICAgX1JpbUxpZ2h0aW5nTWl4PzogbnVtYmVyO1xyXG4gICAgX1JpbUZyZXNuZWxQb3dlcj86IG51bWJlcjtcclxuICAgIF9SaW1MaWZ0PzogbnVtYmVyO1xyXG4gICAgX091dGxpbmVXaWR0aD86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2U/OiBudW1iZXI7XHJcbiAgICBfT3V0bGluZUxpZ2h0aW5nTWl4PzogbnVtYmVyO1xyXG4gICAgX1V2QW5pbVNjcm9sbFg/OiBudW1iZXI7XHJcbiAgICBfVXZBbmltU2Nyb2xsWT86IG51bWJlcjtcclxuICAgIF9VdkFuaW1Sb3RhdGlvbj86IG51bWJlcjtcclxuICAgIF9EZWJ1Z01vZGU/OiBudW1iZXI7XHJcbiAgICBfQmxlbmRNb2RlPzogbnVtYmVyO1xyXG4gICAgX091dGxpbmVXaWR0aE1vZGU/OiBudW1iZXI7XHJcbiAgICBfT3V0bGluZUNvbG9yTW9kZT86IG51bWJlcjtcclxuICAgIF9DdWxsTW9kZT86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lQ3VsbE1vZGU/OiBudW1iZXI7XHJcbiAgICBfU3JjQmxlbmQ/OiBudW1iZXI7XHJcbiAgICBfRHN0QmxlbmQ/OiBudW1iZXI7XHJcbiAgICBfWldyaXRlPzogbnVtYmVyO1xyXG4gICAgW3Byb3A6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHkgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZSTU1hdGVyaWFsUHJvcGVydHlWZWN0b3JQcm9wZXJ0aWVzIHtcclxuICAgIF9Db2xvcj86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1NoYWRlQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9NYWluVGV4PzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfU2hhZGVUZXh0dXJlPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfQnVtcE1hcD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1JlY2VpdmVTaGFkb3dUZXh0dXJlPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfU2hhZGluZ0dyYWRlVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1JpbUNvbG9yPzogSVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk7XHJcbiAgICBfUmltVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX1NwaGVyZUFkZD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX0VtaXNzaW9uQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9FbWlzc2lvbk1hcD86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgX091dGxpbmVXaWR0aFRleHR1cmU/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9PdXRsaW5lQ29sb3I/OiBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eTtcclxuICAgIF9VdkFuaW1NYXNrVGV4dHVyZT86IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5O1xyXG4gICAgW3Byb3A6IHN0cmluZ106IElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5IHwgdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWUk1NYXRlcmlhbFByb3BlcnR5VGV4dHVyZVByb3BlcnRpZXMge1xyXG4gICAgX01haW5UZXg/OiBudW1iZXI7XHJcbiAgICBfU2hhZGVUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX0J1bXBNYXA/OiBudW1iZXI7XHJcbiAgICBfUmVjZWl2ZVNoYWRvd1RleHR1cmU/OiBudW1iZXI7XHJcbiAgICBfU2hhZGluZ0dyYWRlVGV4dHVyZT86IG51bWJlcjtcclxuICAgIF9SaW1UZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX1NwaGVyZUFkZD86IG51bWJlcjtcclxuICAgIF9FbWlzc2lvbk1hcD86IG51bWJlcjtcclxuICAgIF9PdXRsaW5lV2lkdGhUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgX1V2QW5pbU1hc2tUZXh0dXJlPzogbnVtYmVyO1xyXG4gICAgW3Byb3A6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eUtleXdvcmRNYXAge1xyXG4gICAgX05PUk1BTE1BUD86IGJvb2xlYW47XHJcbiAgICBfQUxQSEFURVNUX09OPzogYm9vbGVhbjtcclxuICAgIF9BTFBIQUJMRU5EX09OPzogYm9vbGVhbjtcclxuICAgIF9BTFBIQVBSRU1VTFRJUExZX09OPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVRhZ01hcCB7XHJcbiAgICBSZW5kZXJUeXBlPzogJ09wYXF1ZScgfCAnVHJhbnNwYXJlbnRDdXRvdXQnIHwgJ1RyYW5zcGFyZW50JztcclxufVxyXG5cclxuLyoqXHJcbiAqIGV4dGVuc2lvbnMuVlJNLm1hdGVyaWFsUHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJVlJNTWF0ZXJpYWxQcm9wZXJ0eSB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBzaGFkZXI6IElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyO1xyXG4gICAgcmVuZGVyUXVldWU6IG51bWJlcjtcclxuICAgIGZsb2F0UHJvcGVydGllczogSVZSTU1hdGVyaWFsUHJvcGVydHlGbG9hdFByb3BlcnRpZXM7XHJcbiAgICB2ZWN0b3JQcm9wZXJ0aWVzOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVZlY3RvclByb3BlcnRpZXM7XHJcbiAgICB0ZXh0dXJlUHJvcGVydGllczogSVZSTU1hdGVyaWFsUHJvcGVydHlUZXh0dXJlUHJvcGVydGllcztcclxuICAgIGtleXdvcmRNYXA6IElWUk1NYXRlcmlhbFByb3BlcnR5S2V5d29yZE1hcDtcclxuICAgIHRhZ01hcDogSVZSTU1hdGVyaWFsUHJvcGVydHlUYWdNYXA7XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoJztcclxuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1Ob2RlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy90cmFuc2Zvcm1Ob2RlJztcclxuaW1wb3J0IHR5cGUgeyBNb3JwaFRhcmdldCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9Nb3JwaC9tb3JwaFRhcmdldCc7XHJcbmltcG9ydCB0eXBlIHsgU2NlbmUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvc2NlbmUnO1xyXG5pbXBvcnQgdHlwZSB7IE51bGxhYmxlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgU3ByaW5nQm9uZUNvbnRyb2xsZXIgfSBmcm9tICcuL3NlY29uZGFyeS1hbmltYXRpb24vc3ByaW5nLWJvbmUtY29udHJvbGxlcic7XHJcbmltcG9ydCB7IEh1bWFub2lkQm9uZSB9IGZyb20gJy4vaHVtYW5vaWQtYm9uZSc7XHJcbmltcG9ydCB0eXBlIHsgSVZSTSB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlciB9IGZyb20gJy4vbWF0ZXJpYWwtdmFsdWUtYmluZGluZy1tZXJnZXInO1xyXG4vLyogVE9ETzogUGF0Y2hlZC5cclxuaW1wb3J0IHR5cGUgeyBOb2RlLCBUYXJnZXRDYW1lcmEgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUnO1xyXG5cclxuaW50ZXJmYWNlIElzQmluYXJ5TWFwIHtcclxuICAgIFttb3JwaE5hbWU6IHN0cmluZ106IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBNb3JwaFRhcmdldFNldHRpbmcge1xyXG4gICAgdGFyZ2V0OiBNb3JwaFRhcmdldDtcclxuICAgIHdlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTW9ycGhUYXJnZXRNYXAge1xyXG4gICAgW21vcnBoTmFtZTogc3RyaW5nXTogTW9ycGhUYXJnZXRTZXR0aW5nW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcCB7XHJcbiAgICBbbW9ycGhOYW1lOiBzdHJpbmddOiBNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFRyYW5zZm9ybU5vZGVNYXAge1xyXG4gICAgW2h1bWFuQm9uZU5hbWU6IHN0cmluZ106IFRyYW5zZm9ybU5vZGU7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUcmFuc2Zvcm1Ob2RlQ2FjaGUge1xyXG4gICAgW25vZGVJbmRleDogbnVtYmVyXTogVHJhbnNmb3JtTm9kZTtcclxufVxyXG5cclxuaW50ZXJmYWNlIE1lc2hDYWNoZSB7XHJcbiAgICBbbWVzaEluZGV4OiBudW1iZXJdOiBNZXNoW107XHJcbn1cclxuXHJcbi8vKiBUT0RPOiBQYXRjaGVkLlxyXG5leHBvcnQgY2xhc3MgbW9ycGhpbmdUYXJnZXRQcm9wZXJ0eSB7XHJcbiAgICBwcml2YXRlIF92YWx1ZTogbnVtYmVyO1xyXG4gICAgZ2V0IHZhbHVlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB2YWx1ZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2YWx1ZSkpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlci5tb3JwaGluZyh0aGlzLmxhYmVsLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIHByaXZhdGUgbWFuYWdlcjogVlJNTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuaW50ZXJmYWNlIE1vcnBoVGFyZ2V0UHJvcGVydHlNYXAge1xyXG4gICAgW21vcnBoTmFtZTogc3RyaW5nXTogbW9ycGhpbmdUYXJnZXRQcm9wZXJ0eTtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zZm9ybU5vZGVUcmVlTm9kZSB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGFyZW50OiBudW1iZXI7XHJcbiAgICBjaGlsZHJlbj86IFRyYW5zZm9ybU5vZGVUcmVlTm9kZVtdO1xyXG59XHJcblxyXG4vKipcclxuICogVW5pdHkgSHVtYW5vaWQgQm9uZSDlkI1cclxuICovXHJcbmV4cG9ydCB0eXBlIEh1bWFuQm9uZU5hbWUgPVxyXG4gICAgfCAnaGlwcydcclxuICAgIHwgJ2xlZnRVcHBlckxlZydcclxuICAgIHwgJ3JpZ2h0VXBwZXJMZWcnXHJcbiAgICB8ICdsZWZ0TG93ZXJMZWcnXHJcbiAgICB8ICdyaWdodExvd2VyTGVnJ1xyXG4gICAgfCAnbGVmdEZvb3QnXHJcbiAgICB8ICdyaWdodEZvb3QnXHJcbiAgICB8ICdzcGluZSdcclxuICAgIHwgJ2NoZXN0J1xyXG4gICAgfCAnbmVjaydcclxuICAgIHwgJ2hlYWQnXHJcbiAgICB8ICdsZWZ0U2hvdWxkZXInXHJcbiAgICB8ICdyaWdodFNob3VsZGVyJ1xyXG4gICAgfCAnbGVmdFVwcGVyQXJtJ1xyXG4gICAgfCAncmlnaHRVcHBlckFybSdcclxuICAgIHwgJ2xlZnRMb3dlckFybSdcclxuICAgIHwgJ3JpZ2h0TG93ZXJBcm0nXHJcbiAgICB8ICdsZWZ0SGFuZCdcclxuICAgIHwgJ3JpZ2h0SGFuZCdcclxuICAgIHwgJ2xlZnRUb2VzJ1xyXG4gICAgfCAncmlnaHRUb2VzJ1xyXG4gICAgfCAnbGVmdEV5ZSdcclxuICAgIHwgJ3JpZ2h0RXllJ1xyXG4gICAgfCAnamF3J1xyXG4gICAgfCAnbGVmdFRodW1iUHJveGltYWwnXHJcbiAgICB8ICdsZWZ0VGh1bWJJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdsZWZ0VGh1bWJEaXN0YWwnXHJcbiAgICB8ICdsZWZ0SW5kZXhQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRJbmRleEludGVybWVkaWF0ZSdcclxuICAgIHwgJ2xlZnRJbmRleERpc3RhbCdcclxuICAgIHwgJ2xlZnRNaWRkbGVQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRNaWRkbGVJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdsZWZ0TWlkZGxlRGlzdGFsJ1xyXG4gICAgfCAnbGVmdFJpbmdQcm94aW1hbCdcclxuICAgIHwgJ2xlZnRSaW5nSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAnbGVmdFJpbmdEaXN0YWwnXHJcbiAgICB8ICdsZWZ0TGl0dGxlUHJveGltYWwnXHJcbiAgICB8ICdsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAnbGVmdExpdHRsZURpc3RhbCdcclxuICAgIHwgJ3JpZ2h0VGh1bWJQcm94aW1hbCdcclxuICAgIHwgJ3JpZ2h0VGh1bWJJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdyaWdodFRodW1iRGlzdGFsJ1xyXG4gICAgfCAncmlnaHRJbmRleFByb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRJbmRleEludGVybWVkaWF0ZSdcclxuICAgIHwgJ3JpZ2h0SW5kZXhEaXN0YWwnXHJcbiAgICB8ICdyaWdodE1pZGRsZVByb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRNaWRkbGVJbnRlcm1lZGlhdGUnXHJcbiAgICB8ICdyaWdodE1pZGRsZURpc3RhbCdcclxuICAgIHwgJ3JpZ2h0UmluZ1Byb3hpbWFsJ1xyXG4gICAgfCAncmlnaHRSaW5nSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAncmlnaHRSaW5nRGlzdGFsJ1xyXG4gICAgfCAncmlnaHRMaXR0bGVQcm94aW1hbCdcclxuICAgIHwgJ3JpZ2h0TGl0dGxlSW50ZXJtZWRpYXRlJ1xyXG4gICAgfCAncmlnaHRMaXR0bGVEaXN0YWwnXHJcbiAgICB8ICd1cHBlckNoZXN0J1xyXG4gICAgfCBzdHJpbmc7XHJcblxyXG4vKipcclxuICogVlJNIOOCreODo+ODqeOCr+OCv+ODvOOCkuWLleS9nOOBleOBm+OCi+OBn+OCgeOBruODnuODjeODvOOCuOODo1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZSTU1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBpc0JpbmFyeU1vcnBoTWFwOiBJc0JpbmFyeU1hcCA9IHt9O1xyXG4gICAgcHJpdmF0ZSBtb3JwaFRhcmdldE1hcDogTW9ycGhUYXJnZXRNYXAgPSB7fTtcclxuICAgIHByaXZhdGUgbWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXJNYXA6IE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwID0ge307XHJcbiAgICBwcml2YXRlIHByZXNldE1vcnBoVGFyZ2V0TWFwOiBNb3JwaFRhcmdldE1hcCA9IHt9O1xyXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Ob2RlTWFwOiBUcmFuc2Zvcm1Ob2RlTWFwID0ge307XHJcbiAgICBwcml2YXRlIHRyYW5zZm9ybU5vZGVDYWNoZTogVHJhbnNmb3JtTm9kZUNhY2hlID0ge307XHJcbiAgICBwcml2YXRlIG1lc2hDYWNoZTogTWVzaENhY2hlID0ge307XHJcbiAgICBwcml2YXRlIF9odW1hbm9pZEJvbmU6IEh1bWFub2lkQm9uZTtcclxuICAgIHByaXZhdGUgX3Jvb3RNZXNoOiBNZXNoO1xyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICBwdWJsaWMgc3RhdGljIFJPT1RfTUVTSF9QUkVGSVggPSAndnJtX3Jvb3RfJztcclxuICAgIHByaXZhdGUgX3Jvb3RTa2VsZXRvbjogTm9kZTtcclxuICAgIHByaXZhdGUgX2NhbWVyYXM6IFRhcmdldENhbWVyYVtdID0gW107XHJcbiAgICBnZXQgY2FtZXJhcygpOiBUYXJnZXRDYW1lcmFbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZENhbWVyYShjYW1lcmE6IFRhcmdldENhbWVyYSkge1xyXG4gICAgICAgIHRoaXMuX2NhbWVyYXMucHVzaChjYW1lcmEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldENhbWVyYXMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FtZXJhcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2Vjb25kYXJ5IEFuaW1hdGlvbiDjgajjgZfjgablrprnvqnjgZXjgozjgabjgYTjgosgVlJNIFNwcmluZyBCb25lIOOBruOCs+ODs+ODiOODreODvOODqVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3ByaW5nQm9uZUNvbnRyb2xsZXI6IFNwcmluZ0JvbmVDb250cm9sbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBleHQgZ2xURi5leHRlbnNpb25zLlZSTSDjga7kuK3ouqsganNvblxyXG4gICAgICogQHBhcmFtIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0gbWVzaGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga7jg6Hjg4Pjgrfjg6XjgYzjgZPjga4gVlJNIOOBq+ipsuW9k+OBmeOCi1xyXG4gICAgICogQHBhcmFtIHRyYW5zZm9ybU5vZGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga4gVHJhbnNmb3JtTm9kZSDjgYzjgZPjga4gVlJNIOOBq+ipsuW9k+OBmeOCi1xyXG4gICAgICogQHBhcmFtIG1hdGVyaWFsc05vZGVzRnJvbSDjgZPjga7nlarlj7fku6XpmY3jga4gTWF0ZXJpYWwg44GM44GT44GuIFZSTSDjgavoqbLlvZPjgZnjgotcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBleHQ6IElWUk0sXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHNjZW5lOiBTY2VuZSxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG1lc2hlc0Zyb206IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHRyYW5zZm9ybU5vZGVzRnJvbTogbnVtYmVyLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgbWF0ZXJpYWxzTm9kZXNGcm9tOiBudW1iZXJcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubWVzaENhY2hlID0gdGhpcy5jb25zdHJ1Y3RNZXNoQ2FjaGUoKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybU5vZGVDYWNoZSA9IHRoaXMuY29uc3RydWN0VHJhbnNmb3JtTm9kZUNhY2hlKCk7XHJcbiAgICAgICAgdGhpcy5zcHJpbmdCb25lQ29udHJvbGxlciA9IG5ldyBTcHJpbmdCb25lQ29udHJvbGxlcih0aGlzLmV4dC5zZWNvbmRhcnlBbmltYXRpb24sIHRoaXMuZmluZFRyYW5zZm9ybU5vZGUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmV4dC5ibGVuZFNoYXBlTWFzdGVyICYmIHRoaXMuZXh0LmJsZW5kU2hhcGVNYXN0ZXIuYmxlbmRTaGFwZUdyb3Vwcykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdElzQmluYXJ5TWFwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0TW9ycGhUYXJnZXRNYXAoKTtcclxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RNYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnN0cnVjdFRyYW5zZm9ybU5vZGVNYXAoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faHVtYW5vaWRCb25lID0gbmV3IEh1bWFub2lkQm9uZSh0aGlzLnRyYW5zZm9ybU5vZGVNYXApO1xyXG5cclxuICAgICAgICAvLyogVE9ETzogUGF0Y2hlZC5cclxuICAgICAgICB0aGlzLnJlbW92ZUR1cGxpY2F0ZVNrZWxldG9ucygpO1xyXG4gICAgICAgIHRoaXMuX3Jvb3RTa2VsZXRvbiA9IHRoaXMuZ2V0Um9vdFNrZWxldG9uTm9kZSgpO1xyXG5cclxuICAgICAgICAvLyBSZW5hbWUgX19yb290X18gbm9kZVxyXG4gICAgICAgIHRoaXMucm9vdE1lc2gubmFtZSA9IFZSTU1hbmFnZXIuUk9PVF9NRVNIX1BSRUZJWCArIHRoaXMuc2NlbmUuZ2V0Tm9kZXMoKS5maWx0ZXIoKGUpID0+IGUubmFtZS5pbmNsdWRlcyhWUk1NYW5hZ2VyLlJPT1RfTUVTSF9QUkVGSVgpKS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8qIFRPRE86IFBhdGNoZWQuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBkdXBsaWNhdGUgc2tlbGV0b25zIHdoZW4gaW1wb3J0aW5nIFZSTS5cclxuICAgICAqIE9ubHkgdGVzdGVkIG9uIFZSb2lkU3R1ZGlvIG91dHB1dCBmaWxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVtb3ZlRHVwbGljYXRlU2tlbGV0b25zKCkge1xyXG4gICAgICAgIGxldCBza2VsZXRvbiA9IG51bGw7XHJcbiAgICAgICAgZm9yIChjb25zdCBub2RlSW5kZXggb2YgT2JqZWN0LmtleXModGhpcy5tZXNoQ2FjaGUpLm1hcChOdW1iZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2hlcyA9IHRoaXMubWVzaENhY2hlW25vZGVJbmRleF07XHJcbiAgICAgICAgICAgIGlmIChtZXNoZXMubGVuZ3RoICYmIG1lc2hlc1swXS5za2VsZXRvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFza2VsZXRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNrZWxldG9uID0gbWVzaGVzWzBdLnNrZWxldG9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yb290TWVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb290Qm9uZSA9IHNrZWxldG9uLmJvbmVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc3VhbGx5IGl0IGlzIGNhbGxlZCBcIlJvb3RcIiwgYnV0IHRoZXJlIGFyZSBleGNlcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb290Qm9uZS5uYW1lICE9PSAnUm9vdCcpIGNvbnNvbGUud2FybignVGhlIGZpcnN0IGJvbmUgaGFzIGEgZGlmZmVyZW50IG5hbWUgdGhhbiBcIlJvb3RcIicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2VhayBzYW5pdHkgY2hlY2tcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2tlbGV0b24uYm9uZXMubGVuZ3RoICE9IG1lc2hlc1swXS5za2VsZXRvbi5ib25lcy5sZW5ndGgpIGNvbnNvbGUud2FybignU2tlbGV0b25zIGhhdmUgZGlmZmVyZW50IG51bWJlcnMgb2YgYm9uZXMhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1lc2hlc1swXS5za2VsZXRvbi5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtZXNoIG9mIG1lc2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoLnNrZWxldG9uID0gc2tlbGV0b247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vKiBUT0RPOiBQYXRjaGVkLlxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kIHRoZSByb290IG5vZGUgb2Ygc2tlbGV0b24uXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFJvb3RTa2VsZXRvbk5vZGUoKTogTm9kZSB7XHJcbiAgICAgICAgY29uc3Qgcm9vdE1lc2hDaGlsZHJlbiA9IHRoaXMuX3Jvb3RNZXNoLmdldENoaWxkcmVuKChub2RlOiBOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlLm5hbWUgPT09ICdSb290JyB8fCBub2RlLm5hbWUgPT09ICdBcm1hdHVyZSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJvb3RNZXNoQ2hpbGRyZW4ubGVuZ3RoID4gMCkgcmV0dXJuIHJvb3RNZXNoQ2hpbGRyZW5bMF07XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBmaW5kIGluIHNjZW5lIGRpcmVjdGx5XHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RNZXNoQ2hpbGQgPSB0aGlzLnNjZW5lLmdldE5vZGVCeU5hbWUoJ1Jvb3QnKSA/IHRoaXMuc2NlbmUuZ2V0Tm9kZUJ5TmFtZSgnUm9vdCcpIDogdGhpcy5zY2VuZS5nZXROb2RlQnlOYW1lKCdBcm1hdHVyZScpO1xyXG4gICAgICAgICAgICBpZiAocm9vdE1lc2hDaGlsZCAmJiAhcm9vdE1lc2hDaGlsZC5wYXJlbnQpIHJldHVybiByb290TWVzaENoaWxkO1xyXG4gICAgICAgICAgICBlbHNlIHRocm93IEVycm9yKCdDYW5ub3QgZmluZCByb290IHNrZWxldG9uIG5vZGUhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2Vjb25kYXJ5IEFuaW1hdGlvbiDjgpLmm7TmlrDjgZnjgotcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVsdGFUaW1lIOWJjeODleODrOODvOODoOOBi+OCieOBrue1jOmBjuenkuaVsChzZWMpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNwcmluZ0JvbmVDb250cm9sbGVyLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog56C05qOE5Yem55CGXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3ByaW5nQm9uZUNvbnRyb2xsZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2h1bWFub2lkQm9uZS5kaXNwb3NlKCk7XHJcblxyXG4gICAgICAgICh0aGlzLm1vcnBoVGFyZ2V0TWFwIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLm1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLnByZXNldE1vcnBoVGFyZ2V0TWFwIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLnRyYW5zZm9ybU5vZGVNYXAgYXMgYW55KSA9IG51bGw7XHJcbiAgICAgICAgKHRoaXMudHJhbnNmb3JtTm9kZUNhY2hlIGFzIGFueSkgPSBudWxsO1xyXG4gICAgICAgICh0aGlzLm1lc2hDYWNoZSBhcyBhbnkpID0gbnVsbDtcclxuICAgICAgICAodGhpcy5fcm9vdE1lc2ggYXMgYW55KSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg6Ljg7zjg5XjgqPjg7PjgrDjgpLooYzjgYZcclxuICAgICAqIEBwYXJhbSBsYWJlbCDjg6Ljg7zjg5XlkI1cclxuICAgICAqIEBwYXJhbSB2YWx1ZSDlgKQoMOOAnDEpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtb3JwaGluZyhsYWJlbDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMuY2FsY01vcnBoVmFsdWUobGFiZWwsIHZhbHVlKTtcclxuICAgICAgICBpZiAodGhpcy5tb3JwaFRhcmdldE1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3JwaFRhcmdldE1hcFtsYWJlbF0uZm9yRWFjaCgoc2V0dGluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZy50YXJnZXQuaW5mbHVlbmNlID0gdiAqIChzZXR0aW5nLndlaWdodCAvIDEwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFZhbHVlQmluZGluZ01lcmdlck1hcFtsYWJlbF0ubW9ycGhpbmcodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44OX44Oq44K744OD44OI44Oi44O844OV44Gu44Oi44O844OV44Kj44Oz44Kw44KS6KGM44GGXHJcbiAgICAgKiBAcGFyYW0gbGFiZWwg44Oi44O844OV5ZCNXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUg5YCkKDDjgJwxKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbW9ycGhpbmdQcmVzZXQobGFiZWw6IHN0cmluZywgdmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVzZXRNb3JwaFRhcmdldE1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB2ID0gdGhpcy5jYWxjTW9ycGhWYWx1ZShsYWJlbCwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMucHJlc2V0TW9ycGhUYXJnZXRNYXBbbGFiZWxdLmZvckVhY2goKHNldHRpbmcpID0+IHtcclxuICAgICAgICAgICAgc2V0dGluZy50YXJnZXQuaW5mbHVlbmNlID0gdiAqIChzZXR0aW5nLndlaWdodCAvIDEwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg6Ljg7zjg5XjgqPjg7PjgrDnlKjjga7lgKTjgpLoqIjnrpfjgZnjgotcclxuICAgICAqIEBwYXJhbSBsYWJlbCDjg6Ljg7zjg5XlkI1cclxuICAgICAqIEBwYXJhbSB2YWx1ZSDlgKRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxjTW9ycGhWYWx1ZShsYWJlbDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCB2ID0gTWF0aC5tYXgoMC4wLCBNYXRoLm1pbigxLjAsIHZhbHVlKSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCaW5hcnlNb3JwaE1hcFtsYWJlbF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYgPiAwLjUgPyAxLjAgOiAwLjA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbGlzdCBtb3JwaGluZyBuYW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNb3JwaGluZ0xpc3QoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm1vcnBoVGFyZ2V0TWFwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS4gOS6uuensOaZguOBruOCq+ODoeODqeS9jee9ruOCkue1tuWvvuW6p+aomeOBqOOBl+OBpuWPluW+l+OBmeOCi1xyXG4gICAgICpcclxuICAgICAqIGZpcnN0UGVyc29uQm9uZSDjgYzmnKroqK3lrprjga7loLTlkIjjga8gbnVsbCDjgpLov5TjgZlcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyDkuIDkurrnp7DmmYLjga7jgqvjg6Hjg6njga7nj77lnKjjgavjgYrjgZHjgovntbblr77luqfmqJlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZpcnN0UGVyc29uQ2FtZXJhUG9zaXRpb24oKTogTnVsbGFibGU8VmVjdG9yMz4ge1xyXG4gICAgICAgIGNvbnN0IGZpcnN0UGVyc29uQm9uZSA9IHRoaXMuZ2V0Rmlyc3RQZXJzb25Cb25lKCk7XHJcbiAgICAgICAgaWYgKCFmaXJzdFBlcnNvbkJvbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBiYXNlUG9zID0gZmlyc3RQZXJzb25Cb25lLmdldEFic29sdXRlUG9zaXRpb24oKTtcclxuICAgICAgICBjb25zdCBvZmZzZXRQb3MgPSB0aGlzLmV4dC5maXJzdFBlcnNvbi5maXJzdFBlcnNvbkJvbmVPZmZzZXQ7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKGJhc2VQb3MueCArIG9mZnNldFBvcy54LCBiYXNlUG9zLnkgKyBvZmZzZXRQb3MueSwgYmFzZVBvcy56ICsgb2Zmc2V0UG9zLnopO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiA5Lq656ew5pmC44Gr6aCt44Go44G/44Gq44GZIFRyYW5zZm9ybU5vZGUg44KS5Y+W5b6X44GZ44KLXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRGaXJzdFBlcnNvbkJvbmUoKTogTnVsbGFibGU8VHJhbnNmb3JtTm9kZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRUcmFuc2Zvcm1Ob2RlKHRoaXMuZXh0LmZpcnN0UGVyc29uLmZpcnN0UGVyc29uQm9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg5zjg7zjg7PlkI3jgYvjgonjgZ3jga7jg5zjg7zjg7PjgavoqbLlvZPjgZnjgosgVHJhbnNmb3JtTm9kZSDjgpLlj5blvpfjgZnjgotcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBIdW1hbkJvbmVOYW1lXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgaHVtYW5vaWRCb25lIGdldHRlciBpbnN0ZWFkLiBUaGlzIG1ldGhvZCB3aWxsIGRlbGV0ZSBhdCB2Mi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEJvbmUobmFtZTogSHVtYW5Cb25lTmFtZSk6IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Ob2RlTWFwW25hbWVdIHx8IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgSHVtYW5vaWRCb25lIE1ldGhvZHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBodW1hbm9pZEJvbmUoKTogSHVtYW5vaWRCb25lIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faHVtYW5vaWRCb25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVlJNIFJvb3QgbWVzaFxyXG4gICAgICpcclxuICAgICAqIFVzZWZ1bCBmb3IgTW9kZWwgVHJhbnNmb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByb290TWVzaCgpOiBNZXNoIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcm9vdE1lc2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBub2RlIOeVquWPt+OBi+OCieipsuW9k+OBmeOCiyBUcmFuc2Zvcm1Ob2RlIOOCkuaOouOBmVxyXG4gICAgICog5pWw44GM5aSa44GP44Gq44KL44Gu44Gn44Kt44Oj44OD44K344Ol44Gr5Y+C54Wn44KS5oyB44Gk5qeL6YCg44Gr44GZ44KLXHJcbiAgICAgKiBnbHRmIOOBriBub2RlIOeVquWPt+OBryBgbWV0YWRhdGEuZ2x0Zi5wb2ludGVyc2Ag44Gr6KiY6Yyy44GV44KM44Gm44GE44KLXHJcbiAgICAgKiBAcGFyYW0gbm9kZUluZGV4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5kVHJhbnNmb3JtTm9kZShub2RlSW5kZXg6IG51bWJlcik6IE51bGxhYmxlPFRyYW5zZm9ybU5vZGU+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Ob2RlQ2FjaGVbbm9kZUluZGV4XSB8fCBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbWVzaCDnlarlj7fjgYvjgonjg6Hjg4Pjgrfjg6XjgpLmjqLjgZlcclxuICAgICAqIGdsdGYg44GuIG1lc2gg55Wq5Y+344GvIGBtZXRhZGF0YS5nbHRmLnBvaW50ZXJzYCDjgavoqJjpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBmaW5kTWVzaGVzIGluc3RlYWQuIFRoaXMgbWV0aG9kIGhhcyBicm9rZW4uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5kTWVzaChtZXNoSW5kZXg6IG51bWJlcik6IE51bGxhYmxlPE1lc2g+IHtcclxuICAgICAgICByZXR1cm4gKHRoaXMubWVzaENhY2hlW21lc2hJbmRleF0gJiYgdGhpcy5tZXNoQ2FjaGVbbWVzaEluZGV4XVswXSkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG1lc2gg55Wq5Y+344GL44KJ44Oh44OD44K344Ol44KS5o6i44GZXHJcbiAgICAgKiBnbHRmIOOBriBtZXNoIOeVquWPt+OBryBgbWV0YWRhdGEuZ2x0Zi5wb2ludGVyc2Ag44Gr6KiY6Yyy44GV44KM44Gm44GE44KLXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5kTWVzaGVzKG1lc2hJbmRleDogbnVtYmVyKTogTnVsbGFibGU8TWVzaFtdPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzaENhY2hlW21lc2hJbmRleF0gfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6i+WJjeOBqyBNb3JwaFRhcmdldCDjgaggaXNCaW5hcnkg44KS57SQ5LuY44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0SXNCaW5hcnlNYXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5leHQuYmxlbmRTaGFwZU1hc3Rlci5ibGVuZFNoYXBlR3JvdXBzLmZvckVhY2goKGcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc0JpbmFyeU1vcnBoTWFwW2cubmFtZV0gPSBnLmlzQmluYXJ5O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LqL5YmN44GrIE1vcnBoVGFyZ2V0IOOBqCBCbGVuZFNoYXBlIOOCkue0kOS7mOOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdE1vcnBoVGFyZ2V0TWFwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXh0LmJsZW5kU2hhcGVNYXN0ZXIuYmxlbmRTaGFwZUdyb3Vwcy5mb3JFYWNoKChnKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZy5iaW5kcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGcuYmluZHMuZm9yRWFjaCgoYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaGVzID0gdGhpcy5maW5kTWVzaGVzKGIubWVzaCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1lc2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVbmRlZmluZWQgQmxlbmRTaGFwZUJpbmQgTWVzaGAsIGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1lc2hlcy5mb3JFYWNoKChtZXNoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9ycGhUYXJnZXRNYW5hZ2VyID0gbWVzaC5tb3JwaFRhcmdldE1hbmFnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb3JwaFRhcmdldE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFVuZGVmaW5lZCBtb3JwaFRhcmdldE1hbmFnZXJgLCBiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBtb3JwaFRhcmdldE1hbmFnZXIuZ2V0VGFyZ2V0KGIuaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9ycGhUYXJnZXRNYXBbZy5uYW1lXSA9IHRoaXMubW9ycGhUYXJnZXRNYXBbZy5uYW1lXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vcnBoVGFyZ2V0TWFwW2cubmFtZV0ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBiLndlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZy5wcmVzZXROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlc2V0TW9ycGhUYXJnZXRNYXBbZy5wcmVzZXROYW1lXSA9IHRoaXMucHJlc2V0TW9ycGhUYXJnZXRNYXBbZy5wcmVzZXROYW1lXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVzZXRNb3JwaFRhcmdldE1hcFtnLnByZXNldE5hbWVdLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBiLndlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LqL5YmN44GrIE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyIOOBqOODouODvOODleWQjeOCkue0kOS7mOOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdE1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwKCkge1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFscyA9IHRoaXMuc2NlbmUubWF0ZXJpYWxzLnNsaWNlKHRoaXMubWF0ZXJpYWxzTm9kZXNGcm9tKTtcclxuICAgICAgICB0aGlzLmV4dC5ibGVuZFNoYXBlTWFzdGVyLmJsZW5kU2hhcGVHcm91cHMuZm9yRWFjaCgoZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWcubWF0ZXJpYWxWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsVmFsdWVCaW5kaW5nTWVyZ2VyTWFwW2cubmFtZV0gPSBuZXcgTWF0ZXJpYWxWYWx1ZUJpbmRpbmdNZXJnZXIobWF0ZXJpYWxzLCBnLm1hdGVyaWFsVmFsdWVzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6i+WJjeOBqyBUcmFuc2Zvcm1Ob2RlIOOBqCBib25lIOWQjeOCkue0kOOBpeOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdFRyYW5zZm9ybU5vZGVNYXAoKSB7XHJcbiAgICAgICAgdGhpcy5leHQuaHVtYW5vaWQuaHVtYW5Cb25lcy5mb3JFYWNoKChiKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmRUcmFuc2Zvcm1Ob2RlKGIubm9kZSk7XHJcbiAgICAgICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtTm9kZU1hcFtiLmJvbmVdID0gbm9kZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG5vZGUg55Wq5Y+344GoIFRyYW5zZm9ybU5vZGUg44KS57SQ44Gl44GR44KLXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0VHJhbnNmb3JtTm9kZUNhY2hlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhY2hlOiBUcmFuc2Zvcm1Ob2RlQ2FjaGUgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMudHJhbnNmb3JtTm9kZXNGcm9tOyBpbmRleCA8IHRoaXMuc2NlbmUudHJhbnNmb3JtTm9kZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnNjZW5lLnRyYW5zZm9ybU5vZGVzW2luZGV4XTtcclxuICAgICAgICAgICAgLy8g44Od44Kk44Oz44K/44GM55m76Yyy44GV44KM44Gm44GE44Gq44GE44KC44Gu44Gv55yB55WlXHJcbiAgICAgICAgICAgIGlmICghbm9kZSB8fCAhbm9kZS5tZXRhZGF0YSB8fCAhbm9kZS5tZXRhZGF0YS5nbHRmIHx8ICFub2RlLm1ldGFkYXRhLmdsdGYucG9pbnRlcnMgfHwgbm9kZS5tZXRhZGF0YS5nbHRmLnBvaW50ZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChjb25zdCBwb2ludGVyIG9mIG5vZGUubWV0YWRhdGEuZ2x0Zi5wb2ludGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50ZXIuc3RhcnRzV2l0aCgnL25vZGVzLycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZUluZGV4ID0gcGFyc2VJbnQoKHBvaW50ZXIgYXMgc3RyaW5nKS5zdWJzdHIoNyksIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZVtub2RlSW5kZXhdID0gbm9kZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FjaGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtZXNoIOeVquWPt+OBqCBNZXNoIOOCkue0kOOBpeOBkeOCi1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdE1lc2hDYWNoZSgpIHtcclxuICAgICAgICBjb25zdCBjYWNoZTogTWVzaENhY2hlID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSB0aGlzLm1lc2hlc0Zyb207IGluZGV4IDwgdGhpcy5zY2VuZS5tZXNoZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLnNjZW5lLm1lc2hlc1tpbmRleF07XHJcbiAgICAgICAgICAgIGlmIChtZXNoLmlkID09PSAnX19yb290X18nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yb290TWVzaCA9IG1lc2ggYXMgTWVzaDtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOODneOCpOODs+OCv+OBjOeZu+mMsuOBleOCjOOBpuOBhOOBquOBhOOCguOBruOBr+ecgeeVpVxyXG4gICAgICAgICAgICBpZiAoIW1lc2ggfHwgIW1lc2gubWV0YWRhdGEgfHwgIW1lc2gubWV0YWRhdGEuZ2x0ZiB8fCAhbWVzaC5tZXRhZGF0YS5nbHRmLnBvaW50ZXJzIHx8IG1lc2gubWV0YWRhdGEuZ2x0Zi5wb2ludGVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcG9pbnRlciBvZiBtZXNoLm1ldGFkYXRhLmdsdGYucG9pbnRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gKHBvaW50ZXIgYXMgc3RyaW5nKS5tYXRjaCgvXlxcL21lc2hlc1xcLyhcXGQrKS4rJC8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZUluZGV4ID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZVtub2RlSW5kZXhdID0gY2FjaGVbbm9kZUluZGV4XSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZVtub2RlSW5kZXhdLnB1c2gobWVzaCBhcyBNZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FjaGU7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBNYXRlcmlhbCB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgdHlwZSB7IEJhc2VUZXh0dXJlIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9UZXh0dXJlcy9iYXNlVGV4dHVyZSc7XHJcbmltcG9ydCB0eXBlIHsgVGV4dHVyZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvdGV4dHVyZSc7XHJcbmltcG9ydCB7IENvbG9yMyB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoJztcclxuaW1wb3J0IHR5cGUgeyBNZXNoIH0gZnJvbSAnQGJhYnlsb25qcy9jb3JlL01lc2hlcy9tZXNoJztcclxuaW1wb3J0IHR5cGUgeyBOdWxsYWJsZSB9IGZyb20gJ0BiYWJ5bG9uanMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHsgR0xURkxvYWRlciwgSU1hdGVyaWFsIH0gZnJvbSAnQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wJztcclxuaW1wb3J0IHsgTVRvb25NYXRlcmlhbCB9IGZyb20gJ2JhYnlsb24tbXRvb24tbWF0ZXJpYWwnO1xyXG5pbXBvcnQgdHlwZSB7IElWUk1NYXRlcmlhbFByb3BlcnR5LCBJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eSB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVNoYWRlciB9IGZyb20gJy4vdnJtLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICdAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9lbmdpbmUnO1xyXG5cclxuLyoqXHJcbiAqIFZSTSDjgafmjIflrprjgZXjgozjgosgTWF0ZXJpYWwg44KS55Sf5oiQ44GZ44KLXHJcbiAqIFtWUk0g44GM5o+Q5L6b44GZ44KL44K344Kn44O844OAXShodHRwczovL3ZybS5kZXYvZW4vdW5pdnJtL3NoYWRlcnMvaW5kZXguaHRtbCkg44KS54m55a6a44GX6Kqt44G/6L6844KAXHJcbiAqIC0gVW5saXRUZXh0dXJlOiDkuI3pgI/mmI4sIFZSTSDjg5XjgqHjgqTjg6vlgbTjgacgW0tIUl9tYXRlcmlhbHNfdW5saXRdKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21haW4vZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3VubGl0KSDjgYzlrprnvqnjgZXjgozjgabjgYTjgovjgZ/jgoHjgIHkvZXjgoLjgZfjgarjgYRcclxuICogLSBVbmxpdEN1dG91dDog6YCP5piO5bqm44GM6Za+5YCk5Lul5LiL44Gu6YOo5YiG44KS6YCP5piO44Go44GZ44KLLCDlkIzkuIpcclxuICogLSBVbmxpdFRyYW5zcGFyZW50OiDjgqLjg6vjg5XjgqHjg5bjg6zjg7Pjg4njgIJaV3JpdGXjgZfjgarjgYQsIOWQjOS4ilxyXG4gKiAtIFVubGl0VHJhbnNwYXJlbnRaV3JpdGU6IOOCouODq+ODleOCoeODluODrOODs+ODieOAglpXcml0ZeOBmeOCiywg5ZCM5LiK44Gr5Yqg44GI44CB44OX44Ot44OR44OG44Kj44GnIFpXcml0ZSDjgpLlvLfliLbjgZfjgabjgYTjgb7jgZlcclxuICogLSBNVG9vbjogTVRvb25NYXRlcmlhbCDjgpLlt67jgZfmm7/jgYjjgabjgYTjgb7jgZnjgIJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWUk1NYXRlcmlhbEdlbmVyYXRvciB7XHJcbiAgICAvKipcclxuICAgICAqIEBpbmhlcml0ZG9jXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGxvYWRlcjogR0xURkxvYWRlcikge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODnuODhuODquOCouODq+OCkueUn+aIkOOBmeOCiyBQcm9taXNlIOOCkui/lOOBmVxyXG4gICAgICogVlJNIOWvvuixoeWkluOBruWgtOWQiOOBryBudWxsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZW5lcmF0ZShjb250ZXh0OiBzdHJpbmcsIG1hdGVyaWFsOiBJTWF0ZXJpYWwsIG1lc2g6IE1lc2gsIGJhYnlsb25EcmF3TW9kZTogbnVtYmVyLCBhc3NpZ246IChiYWJ5bG9uTWF0ZXJpYWw6IE1hdGVyaWFsKSA9PiB2b2lkKTogTnVsbGFibGU8UHJvbWlzZTxNYXRlcmlhbD4+IHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbFByb3AgPSB0aGlzLmZpbmRNYXRlcmlhbFByb3BlcnR5QnlOYW1lKG1hdGVyaWFsLm5hbWUsIHRoaXMuZ2V0TWF0ZXJpYWxQcm9wZXJ0aWVzKCkpO1xyXG4gICAgICAgIGlmICghbWF0ZXJpYWxQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNoLmFscGhhSW5kZXggPSBtYXRlcmlhbFByb3AucmVuZGVyUXVldWU7XHJcbiAgICAgICAgY29uc3QgbmV3TWF0ZXJpYWwgPSB0aGlzLmNyZWF0ZU1hdGVyaWFsQnlTaGFkZXIoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25EcmF3TW9kZSwgbWF0ZXJpYWxQcm9wKTtcclxuICAgICAgICBpZiAoIW5ld01hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhc3NpZ24obmV3TWF0ZXJpYWwpO1xyXG4gICAgICAgIGlmIChuZXdNYXRlcmlhbCBpbnN0YW5jZW9mIE1Ub29uTWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZE1Ub29uVGV4dHVyZXNBc3luYyhjb250ZXh0LCBuZXdNYXRlcmlhbCwgbWF0ZXJpYWxQcm9wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXdNYXRlcmlhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWUk0g44G+44Gf44GvIFZDSSDjgYvjgonjg57jg4bjg6rjgqLjg6vjg5fjg63jg5Hjg4bjgqPjga7phY3liJfjgpLmjqLjgZlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRNYXRlcmlhbFByb3BlcnRpZXMoKTogSVZSTU1hdGVyaWFsUHJvcGVydHlbXSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zLlZSTSAmJiB0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVlJNLm1hdGVyaWFsUHJvcGVydGllcykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkZXIuZ2x0Zi5leHRlbnNpb25zLlZSTS5tYXRlcmlhbFByb3BlcnRpZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVkNBU1RfdmNpX21hdGVyaWFsX3VuaXR5ICYmIHRoaXMubG9hZGVyLmdsdGYuZXh0ZW5zaW9ucy5WQ0FTVF92Y2lfbWF0ZXJpYWxfdW5pdHkubWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRlci5nbHRmLmV4dGVuc2lvbnMuVkNBU1RfdmNpX21hdGVyaWFsX3VuaXR5Lm1hdGVyaWFscztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oe44OG44Oq44Ki44Or5ZCN44GL44KJIE1hdGVyaWFsUHJvcGVydHkg44KS5o6i44GZXHJcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWxOYW1lIOODnuODhuODquOCouODq+WQjVxyXG4gICAgICogQHBhcmFtIGV4dGVuc2lvbiDmi6HlvLXjg4fjg7zjgr9cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmaW5kTWF0ZXJpYWxQcm9wZXJ0eUJ5TmFtZShtYXRlcmlhbE5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWF0ZXJpYWxzOiBJVlJNTWF0ZXJpYWxQcm9wZXJ0eVtdKTogTnVsbGFibGU8SVZSTU1hdGVyaWFsUHJvcGVydHk+IHtcclxuICAgICAgICBpZiAoIW1hdGVyaWFsTmFtZSB8fCAhbWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtYXRzID0gbWF0ZXJpYWxzLmZpbHRlcigodikgPT4gdi5uYW1lID09PSBtYXRlcmlhbE5hbWUpO1xyXG4gICAgICAgIGlmIChtYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hdHMubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZXIubG9nKGBEdXBsaWNhdGVkIHZybSBtYXRlcmlhbCBuYW1lIGZvdW5kOiAke21hdGVyaWFsTmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hdHNbbWF0cy5sZW5ndGggLSAxXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODhuOCr+OCueODgeODo+OCkuiqreOBv+i+vOOCgFxyXG4gICAgICogQHBhcmFtIGNvbnRleHQg54++5Zyo44Gu44Kz44Oz44OG44Kt44K544OIXHJcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWwg55Sf5oiQ44GX44GfIE1Ub29uTWF0ZXJpYWxcclxuICAgICAqIEBwYXJhbSBwcm9wIOeUn+aIkOOBl+OBnyBNVG9vbk1hdGVyaWFsIOOBruODnuODhuODquOCouODq+ODl+ODreODkeODhuOCo1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvYWRNVG9vblRleHR1cmVzQXN5bmMoY29udGV4dDogc3RyaW5nLCBtYXRlcmlhbDogTVRvb25NYXRlcmlhbCwgcHJvcDogSVZSTU1hdGVyaWFsUHJvcGVydHkpOiBQcm9taXNlPE1hdGVyaWFsPiB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXM6IEFycmF5PFByb21pc2U8QmFzZVRleHR1cmU+PiA9IFtdO1xyXG4gICAgICAgIC8vIOWFqOOBpuOBruODhuOCr+OCueODgeODo+OBriBVViBPZmZzZXQgJiBTY2FsZSDjga/jg6HjgqTjg7Pjg4bjgq/jgrnjg4Hjg6Pjga7jgoLjga7jgpLmtYHnlKjjgZnjgotcclxuICAgICAgICBjb25zdCB1dk9mZnNldFNjYWxlID0gcHJvcC52ZWN0b3JQcm9wZXJ0aWVzLl9NYWluVGV4O1xyXG4gICAgICAgIGlmICghdXZPZmZzZXRTY2FsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hdGVyaWFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYXBwbHlUZXh0dXJlID0gKGluZGV4OiBudW1iZXIgfCB1bmRlZmluZWQsIGNhbGxiYWNrOiAodGV4dHVyZTogQmFzZVRleHR1cmUpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4oaW5kZXgsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS90ZXh0dXJlcy8ke2luZGV4fWAsIHsgaW5kZXg6IHZhbHVlIH0sIChiYWJ5bG9uVGV4dHVyZTogQmFzZVRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a6f6Zqb44GvIFRleHR1cmUg44Kk44Oz44K544K/44Oz44K544GM5p2l44KL44Gu44Gn44Kt44Oj44K544OIXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBiYWJ5bG9uVGV4dHVyZSBhcyBUZXh0dXJlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnVPZmZzZXQgPSB1dk9mZnNldFNjYWxlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnZPZmZzZXQgPSB1dk9mZnNldFNjYWxlWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnVTY2FsZSA9IHV2T2Zmc2V0U2NhbGVbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQudlNjYWxlID0gdXZPZmZzZXRTY2FsZVszXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYmFieWxvblRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fTWFpblRleCwgKHRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmFscGhhQmxlbmQgfHwgbWF0ZXJpYWwuYWxwaGFUZXN0KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmhhc0FscGhhID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXRlcmlhbC5kaWZmdXNlVGV4dHVyZSA9IHRleHR1cmU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1NoYWRlVGV4dHVyZSwgKHRleHR1cmUpID0+IChtYXRlcmlhbC5zaGFkZVRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX0J1bXBNYXAsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwuYnVtcFRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1JlY2VpdmVTaGFkb3dUZXh0dXJlLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLnJlY2VpdmVTaGFkb3dUZXh0dXJlID0gdGV4dHVyZSkpO1xyXG4gICAgICAgIGFwcGx5VGV4dHVyZShwcm9wLnRleHR1cmVQcm9wZXJ0aWVzLl9TaGFkaW5nR3JhZGVUZXh0dXJlLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLnNoYWRpbmdHcmFkZVRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX1JpbVRleHR1cmUsICh0ZXh0dXJlKSA9PiAobWF0ZXJpYWwucmltVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fU3BoZXJlQWRkLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLm1hdENhcFRleHR1cmUgPSB0ZXh0dXJlKSk7XHJcbiAgICAgICAgYXBwbHlUZXh0dXJlKHByb3AudGV4dHVyZVByb3BlcnRpZXMuX0VtaXNzaW9uTWFwLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsLmVtaXNzaXZlVGV4dHVyZSA9IHRleHR1cmUpKTtcclxuICAgICAgICBhcHBseVRleHR1cmUocHJvcC50ZXh0dXJlUHJvcGVydGllcy5fT3V0bGluZVdpZHRoVGV4dHVyZSwgKHRleHR1cmUpID0+IChtYXRlcmlhbC5vdXRsaW5lV2lkdGhUZXh0dXJlID0gdGV4dHVyZSkpO1xyXG4gICAgICAgIGFwcGx5VGV4dHVyZShwcm9wLnRleHR1cmVQcm9wZXJ0aWVzLl9VdkFuaW1NYXNrVGV4dHVyZSwgKHRleHR1cmUpID0+IChtYXRlcmlhbC51dkFuaW1hdGlvbk1hc2tUZXh0dXJlID0gdGV4dHVyZSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4gbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44K344Kn44O844OA5ZCN44GL44KJ44Oe44OG44Oq44Ki44Or44KS5o6o5ris44GX44Gm55Sf5oiQ44GZ44KLXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCDnj77lnKjjga7jgrPjg7Pjg4bjgq3jgrnjg4hcclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBnbFRGIOODnuODhuODquOCouODq1xyXG4gICAgICogQHBhcmFtIGJhYnlsb25EcmF3TW9kZSDmj4/nlLvnqK7poZ5cclxuICAgICAqIEBwYXJhbSBwcm9wIOeUn+aIkOOBmeOCi+ODnuODhuODquOCouODq+ODl+ODreODkeODhuOCo1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZU1hdGVyaWFsQnlTaGFkZXIoY29udGV4dDogc3RyaW5nLCBtYXRlcmlhbDogSU1hdGVyaWFsLCBiYWJ5bG9uRHJhd01vZGU6IG51bWJlciwgcHJvcDogSVZSTU1hdGVyaWFsUHJvcGVydHkpOiBOdWxsYWJsZTxNYXRlcmlhbD4ge1xyXG4gICAgICAgIGlmIChwcm9wLnNoYWRlciA9PT0gSVZSTU1hdGVyaWFsUHJvcGVydHlTaGFkZXIuVlJNTVRvb24pIHtcclxuICAgICAgICAgICAgY29uc3QgbXRvb25NYXRlcmlhbCA9IG5ldyBNVG9vbk1hdGVyaWFsKG1hdGVyaWFsLm5hbWUgfHwgYE1Ub29uTWF0ZXJpYWwke21hdGVyaWFsLmluZGV4fWAsIHRoaXMubG9hZGVyLmJhYnlsb25TY2VuZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TVRvb25NYXRlcmlhbFByb3BlcnRpZXMobXRvb25NYXRlcmlhbCwgcHJvcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtdG9vbk1hdGVyaWFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvcC5zaGFkZXIgPT09IElWUk1NYXRlcmlhbFByb3BlcnR5U2hhZGVyLlZSTVVubGl0VHJhbnNwYXJlbnRaV3JpdGUpIHtcclxuICAgICAgICAgICAgY29uc3QgbWF0ID0gdGhpcy5sb2FkZXIuY3JlYXRlTWF0ZXJpYWwoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25EcmF3TW9kZSk7XHJcbiAgICAgICAgICAgIC8vIOmAmuW4uOODnuODhuODquOCouODq+OBqyBEZXB0aCBXcml0ZSDjgpLlvLfliLZcclxuICAgICAgICAgICAgbWF0LmRpc2FibGVEZXB0aFdyaXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1hdC5mb3JjZURlcHRoV3JpdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODnuODhuODquOCouODq+OBqyBWUk0g44OX44Ot44OR44OG44Kj44KS6Kit5a6aXHJcbiAgICAgKiBWUk0g44OX44Ot44OR44OG44Kj44Go44Oe44OG44Oq44Ki44Or44OX44Ot44OR44OG44Kj44Gu44Oe44OD44OU44Oz44Kw44KS6KGM44Gj44Gm44GE44KLXHJcbiAgICAgKiDliJ3mnJ/lgKTjga/jg57jg4bjg6rjgqLjg6vlrp/oo4XlgbTjgavmjIHjgaPjgabjgYTjgovjgZ/jgoHjgIHlgKTjgYzjgYLjgovloLTlkIjjga7jgb/kuIrmm7jjgY3jgZnjgotcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRNVG9vbk1hdGVyaWFsUHJvcGVydGllcyhtYXRlcmlhbDogTVRvb25NYXRlcmlhbCwgcHJvcDogSVZSTU1hdGVyaWFsUHJvcGVydHkpIHtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fQ3V0b2ZmLCAodmFsdWUpID0+IChtYXRlcmlhbC5hbHBoYUN1dE9mZiA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5Pihwcm9wLnZlY3RvclByb3BlcnRpZXMuX0NvbG9yLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gbmV3IENvbG9yMyh2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdKTtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGEgPSB2YWx1ZVszXTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8SVZSTVZlY3Rvck1hdGVyaWFsUHJvcGVydHk+KHByb3AudmVjdG9yUHJvcGVydGllcy5fU2hhZGVDb2xvciwgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnNoYWRlQ29sb3IgPSBuZXcgQ29sb3IzKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9CdW1wU2NhbGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLmJ1bXBTY2FsZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1JlY2VpdmVTaGFkb3dSYXRlLCAodmFsdWUpID0+IChtYXRlcmlhbC5yZWNlaXZlU2hhZG93UmF0ZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1NoYWRpbmdHcmFkZVJhdGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnNoYWRpbmdHcmFkZVJhdGUgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9TaGFkZVNoaWZ0LCAodmFsdWUpID0+IChtYXRlcmlhbC5zaGFkZVNoaWZ0ID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fU2hhZGVUb29ueSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuc2hhZGVUb29ueSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX0xpZ2h0Q29sb3JBdHRlbnVhdGlvbiwgKHZhbHVlKSA9PiAobWF0ZXJpYWwubGlnaHRDb2xvckF0dGVudWF0aW9uID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fSW5kaXJlY3RMaWdodEludGVuc2l0eSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuaW5kaXJlY3RMaWdodEludGVuc2l0eSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPElWUk1WZWN0b3JNYXRlcmlhbFByb3BlcnR5Pihwcm9wLnZlY3RvclByb3BlcnRpZXMuX1JpbUNvbG9yLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwucmltQ29sb3IgPSBuZXcgQ29sb3IzKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9SaW1MaWdodGluZ01peCwgKHZhbHVlKSA9PiAobWF0ZXJpYWwucmltTGlnaHRpbmdNaXggPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9SaW1GcmVzbmVsUG93ZXIsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnJpbUZyZXNuZWxQb3dlciA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1JpbUxpZnQsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnJpbUxpZnQgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eT4ocHJvcC52ZWN0b3JQcm9wZXJ0aWVzLl9FbWlzc2lvbkNvbG9yLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmVDb2xvciA9IG5ldyBDb2xvcjModmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX091dGxpbmVXaWR0aCwgKHZhbHVlKSA9PiAobWF0ZXJpYWwub3V0bGluZVdpZHRoID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fT3V0bGluZVNjYWxlZE1heERpc3RhbmNlLCAodmFsdWUpID0+IChtYXRlcmlhbC5vdXRsaW5lU2NhbGVkTWF4RGlzdGFuY2UgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxJVlJNVmVjdG9yTWF0ZXJpYWxQcm9wZXJ0eT4ocHJvcC52ZWN0b3JQcm9wZXJ0aWVzLl9PdXRsaW5lQ29sb3IsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5vdXRsaW5lQ29sb3IgPSBuZXcgQ29sb3IzKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9PdXRsaW5lTGlnaHRpbmdNaXgsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVMaWdodGluZ01peCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1V2QW5pbVNjcm9sbFgsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnV2QW5pbWF0aW9uU2Nyb2xsWCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1V2QW5pbVNjcm9sbFksICh2YWx1ZSkgPT4gKG1hdGVyaWFsLnV2QW5pbWF0aW9uU2Nyb2xsWSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX1V2QW5pbVJvdGF0aW9uLCAodmFsdWUpID0+IChtYXRlcmlhbC51dkFuaW1hdGlvblJvdGF0aW9uID0gdmFsdWUpKTtcclxuXHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX0RlYnVnTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuZGVidWdNb2RlID0gdmFsdWUpKTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fQmxlbmRNb2RlLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiAvLyBPcGFxdWVcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYUJsZW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFUZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6IC8vIFRyYW5zcGFyZW50Q3V0b3V0XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFCbGVuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFscGhhVGVzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFNb2RlID0gRW5naW5lLkFMUEhBX0NPTUJJTkU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6IC8vIFRyYW5zcGFyZW50XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFCbGVuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFUZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFNb2RlID0gRW5naW5lLkFMUEhBX0NPTUJJTkU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8bnVtYmVyPihwcm9wLmZsb2F0UHJvcGVydGllcy5fT3V0bGluZVdpZHRoTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwub3V0bGluZVdpZHRoTW9kZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPG51bWJlcj4ocHJvcC5mbG9hdFByb3BlcnRpZXMuX091dGxpbmVDb2xvck1vZGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVDb2xvck1vZGUgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9DdWxsTW9kZSwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuY3VsbE1vZGUgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9PdXRsaW5lQ3VsbE1vZGUsICh2YWx1ZSkgPT4gKG1hdGVyaWFsLm91dGxpbmVDdWxsTW9kZSA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPGJvb2xlYW4+KHByb3Aua2V5d29yZE1hcC5fQUxQSEFCTEVORF9PTiwgKHZhbHVlKSA9PiAobWF0ZXJpYWwuYWxwaGFCbGVuZCA9IHZhbHVlKSk7XHJcbiAgICAgICAgYXBwbHlQcm9wZXJ0eVdoZW5EZWZpbmVkPGJvb2xlYW4+KHByb3Aua2V5d29yZE1hcC5fQUxQSEFURVNUX09OLCAodmFsdWUpID0+IChtYXRlcmlhbC5hbHBoYVRlc3QgPSB2YWx1ZSkpO1xyXG4gICAgICAgIGFwcGx5UHJvcGVydHlXaGVuRGVmaW5lZDxudW1iZXI+KHByb3AuZmxvYXRQcm9wZXJ0aWVzLl9aV3JpdGUsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBtYXRlcmlhbC5mb3JjZURlcHRoV3JpdGUgPSBNYXRoLnJvdW5kKHZhbHVlKSA9PT0gMTtcclxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmZvcmNlRGVwdGhXcml0ZSkge1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGlzYWJsZURlcHRoV3JpdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog44OX44Ot44OR44OG44Kj44GM6Kit5a6a44GV44KM44Gm44GE44KM44Gw44Kz44O844Or44OQ44OD44Kv44KS5a6f6KGM44GZ44KLXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBseVByb3BlcnR5V2hlbkRlZmluZWQ8VD4ocHJvcDogVCB8IHVuZGVmaW5lZCwgY2FsbGJhY2s6ICh2YWx1ZTogVCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9wID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrKHByb3ApO1xyXG59XHJcbiIsImltcG9ydCBcIkBiYWJ5bG9uanMvY29yZS9Mb2FkaW5nL2xvYWRpbmdTY3JlZW5cIjtcblxuLy8gUmVnaXN0ZXIgcGx1Z2lucyAoc2lkZSBlZmZlY3QpXG5pbXBvcnQgXCJAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9QbHVnaW5zL2JhYnlsb25GaWxlTG9hZGVyXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2xvYWRlcnMvZ2xURi9nbFRGRmlsZUxvYWRlclwiO1xuXG4vLyBEZWJ1Z1xuaW1wb3J0IFwiQGJhYnlsb25qcy9jb3JlL0RlYnVnXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2d1aVwiO1xuaW1wb3J0IFwiQGJhYnlsb25qcy9pbnNwZWN0b3JcIjtcbmNvbnN0IGRlYnVnID0gZmFsc2U7XG5jb25zdCBzaGFkb3dfZGVidWcgPSBmYWxzZTtcbmNvbnN0IHNwaGVyZXMgPSBmYWxzZTtcblxuaW1wb3J0IHtTY2VuZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiO1xuaW1wb3J0IHtFbmdpbmV9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9lbmdpbmVcIjtcbmltcG9ydCB7Q29sb3IzLCBWZWN0b3IzfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGhcIjtcbmltcG9ydCB7U2hhZG93R2VuZXJhdG9yfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9TaGFkb3dzL3NoYWRvd0dlbmVyYXRvclwiO1xuXG5pbXBvcnQge0RpcmVjdGlvbmFsTGlnaHR9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL2RpcmVjdGlvbmFsTGlnaHRcIjtcbmltcG9ydCB7SGVtaXNwaGVyaWNMaWdodH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvaGVtaXNwaGVyaWNMaWdodFwiO1xuaW1wb3J0IHtQb2ludExpZ2h0fSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9wb2ludExpZ2h0XCI7XG5pbXBvcnQge1NwaGVyZUJ1aWxkZXJ9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL0J1aWxkZXJzL3NwaGVyZUJ1aWxkZXJcIjtcbmltcG9ydCB7VG9ydXNLbm90QnVpbGRlcn0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NZXNoZXMvQnVpbGRlcnMvdG9ydXNLbm90QnVpbGRlclwiO1xuLy8gaW1wb3J0IHtNVG9vbk1hdGVyaWFsfSBmcm9tIFwiLi9zaGFkZXIvYmFieWxvbi1tdG9vbi1tYXRlcmlhbC9zcmNcIjtcbmltcG9ydCB7VGV4dHVyZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvdGV4dHVyZVwiO1xuaW1wb3J0IHtNYXRlcmlhbH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7VmVydGV4QnVmZmVyfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0J1ZmZlcnMvYnVmZmVyXCI7XG5pbXBvcnQge1ZSTU1hbmFnZXJ9IGZyb20gXCIuL2ltcG9ydGVyL2JhYnlsb24tdnJtLWxvYWRlci9zcmNcIjtcbmltcG9ydCB7VjNEQ29yZX0gZnJvbSBcIi4vaW5kZXhcIjtcblxuLy8gSW5pdCBCYWJ5bG9uSlMgRW5naW5lXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuZGVyQ2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5sZXQgZW5naW5lOiBFbmdpbmU7XG5pZiAoRW5naW5lLmlzU3VwcG9ydGVkKCkpIHtcbiAgICBlbmdpbmUgPSBuZXcgRW5naW5lKGNhbnZhcywgdHJ1ZSk7XG59XG5cbmNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3QtZmlsZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbndpbmRvdy5vbmxvYWQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiT25sb2FkXCIpO1xuICAgIGNvbnN0IHZybUZpbGUgPSAndGVzdGZpbGVzLzc4MjI0NDQzMzY0OTcwMDQ1MjYudnJtJztcblxuICAgIC8vIENyZWF0ZSB2M2QgY29yZVxuICAgIGNvbnN0IHYzRENvcmUgPSBuZXcgVjNEQ29yZShlbmdpbmUsIG5ldyBTY2VuZShlbmdpbmUpKTtcbiAgICB2M0RDb3JlLnRyYW5zcGFyZW50QmFja2dyb3VuZCgpO1xuICAgIGF3YWl0IHYzRENvcmUuQXBwZW5kQXN5bmMoJycsIHZybUZpbGUpO1xuXG4gICAgLy8gR2V0IG1hbmFnZXJzXG4gICAgY29uc3QgdnJtTWFuYWdlciA9IHYzRENvcmUuZ2V0VlJNTWFuYWdlckJ5VVJJKHZybUZpbGUpO1xuICAgIGNvbnNvbGUubG9nKFwiUHJpbnRpbmcgbG9hZGVkIFZSTSBmaWxlIG1ldGFkYXRhOiBcIiwgdnJtTWFuYWdlci5leHQubWV0YSk7XG5cbiAgICAvLyBDYW1lcmFcbiAgICB2M0RDb3JlLmF0dGFjaENhbWVyYVRvKHZybU1hbmFnZXIpO1xuXG4gICAgLy8gTGlnaHRzXG4gICAgdjNEQ29yZS5hZGRBbWJpZW50TGlnaHQobmV3IENvbG9yMygxLCAxLCAxKSk7XG5cbiAgICAvLyBMb2NrIGNhbWVyYSB0YXJnZXRcbiAgICB2M0RDb3JlLnNjZW5lLm9uQmVmb3JlUmVuZGVyT2JzZXJ2YWJsZS5hZGQoKCkgPT4ge1xuICAgICAgICB2cm1NYW5hZ2VyLmNhbWVyYXNbMF0uc2V0VGFyZ2V0KHZybU1hbmFnZXIucm9vdE1lc2guZ2V0QWJzb2x1dGVQb3NpdGlvbigpKTtcbiAgICB9KTtcblxuICAgIC8vIFJlbmRlciBsb29wXG4gICAgZW5naW5lLnJ1blJlbmRlckxvb3AoKCkgPT4ge1xuICAgICAgICB2M0RDb3JlLnNjZW5lLnJlbmRlcigpO1xuICAgIH0pO1xuXG4vLyBNb2RlbCBUcmFuc2Zvcm1hdGlvblxuICAgIHZybU1hbmFnZXIucm9vdE1lc2gudHJhbnNsYXRlKG5ldyBWZWN0b3IzKDEsIDAsIDApLCAxKTtcbiAgICB2cm1NYW5hZ2VyLnJvb3RNZXNoLnJvdGF0aW9uID0gbmV3IFZlY3RvcjMoMCwgMTM1LCAwKTtcblxuLy8gV29yayB3aXRoIEh1bWFub2lkQm9uZVxuICAgIHZybU1hbmFnZXIuaHVtYW5vaWRCb25lLmxlZnRVcHBlckFybS5hZGRSb3RhdGlvbigwLCAtMC41LCAwKTtcbiAgICB2cm1NYW5hZ2VyLmh1bWFub2lkQm9uZS5oZWFkLmFkZFJvdGF0aW9uKDAuMSwgMCwgMCk7XG5cbi8vIFdvcmsgd2l0aCBCbGVuZFNoYXBlKE1vcnBoVGFyZ2V0KVxuICAgIHZybU1hbmFnZXIubW9ycGhpbmcoJ0pveScsIDEuMCk7XG59O1xuXG5leHBvcnQge307XG4iLCIvKiogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB2M2QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSxcbiAqIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cblxuZXhwb3J0ICogZnJvbSBcIi4vdjNkLWNvcmVcIlxuZXhwb3J0ICogZnJvbSBcIi4vaGVscGVyXCJcbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge0hhcmR3YXJlU2NhbGluZ09wdGltaXphdGlvbixcbiAgICBMZW5zRmxhcmVzT3B0aW1pemF0aW9uLFxuICAgIE51bGxhYmxlLFxuICAgIFBhcnRpY2xlc09wdGltaXphdGlvbixcbiAgICBQb3N0UHJvY2Vzc2VzT3B0aW1pemF0aW9uLFxuICAgIFJlbmRlclRhcmdldHNPcHRpbWl6YXRpb24sIFNjZW5lLCBTY2VuZU9wdGltaXplciwgU2NlbmVPcHRpbWl6ZXJPcHRpb25zLCBUZXh0dXJlT3B0aW1pemF0aW9uIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZVwiO1xuaW1wb3J0IHtWM0RDb3JlfSBmcm9tIFwiLi4vaW5kZXhcIjtcblxuZXhwb3J0IGNsYXNzIFYzRFNjZW5lT3B0aW1pemVyIHtcblxuICAgIC8qKlxuICAgICAqIEN1c3RvbWl6ZWQgc2NlbmUgb3B0aW1pemVyIG9wdGlvbnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9vcHRpb25zOiBTY2VuZU9wdGltaXplck9wdGlvbnM7XG4gICAgZ2V0IG9wdGlvbnMoKTogU2NlbmVPcHRpbWl6ZXJPcHRpb25ze1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG4gICAgc2V0IG9wdGlvbnModmFsdWU6IFNjZW5lT3B0aW1pemVyT3B0aW9ucykge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NlbmVPcHRpbWl6ZXJcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX29wdGltaXplcjogU2NlbmVPcHRpbWl6ZXI7XG4gICAgZ2V0IG9wdGltaXplcigpOiBTY2VuZU9wdGltaXplciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpbWl6ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHNjZW5lOiBTY2VuZSxcbiAgICAgICAgb3B0aW9ucz86IE51bGxhYmxlPFNjZW5lT3B0aW1pemVyT3B0aW9ucz4sXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IFYzRFNjZW5lT3B0aW1pemVyLkN1c3RvbU9wdGltaXplck9wdGlvbnMoKTtcbiAgICAgICAgdGhpcy5fb3B0aW1pemVyID0gbmV3IFNjZW5lT3B0aW1pemVyKHNjZW5lLCB0aGlzLl9vcHRpb25zKTtcbiAgICAgICAgdGhpcy5fb3B0aW1pemVyLnRhcmdldEZyYW1lUmF0ZSA9IFYzRENvcmUuRlJBTUVSQVRFO1xuICAgICAgICB0aGlzLl9vcHRpbWl6ZXIudHJhY2tlckR1cmF0aW9uID0gMjAwMDtcblxuICAgICAgICB0aGlzLl9vcHRpbWl6ZXIuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5zZXR1cEZvY3VzRXZlbnRzKHRoaXMuX29wdGltaXplcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgQ3VzdG9tT3B0aW1pemVyT3B0aW9ucygpOiBTY2VuZU9wdGltaXplck9wdGlvbnMge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gbmV3IFNjZW5lT3B0aW1pemVyT3B0aW9ucygpO1xuICAgICAgICBvcHRpb25zLmFkZE9wdGltaXphdGlvbihuZXcgTGVuc0ZsYXJlc09wdGltaXphdGlvbigwKSk7XG4gICAgICAgIG9wdGlvbnMuYWRkT3B0aW1pemF0aW9uKG5ldyBQYXJ0aWNsZXNPcHRpbWl6YXRpb24oMSkpO1xuICAgICAgICBvcHRpb25zLmFkZE9wdGltaXphdGlvbihuZXcgVGV4dHVyZU9wdGltaXphdGlvbigxLCA1MTIpKTtcbiAgICAgICAgb3B0aW9ucy5hZGRPcHRpbWl6YXRpb24obmV3IFJlbmRlclRhcmdldHNPcHRpbWl6YXRpb24oMikpO1xuICAgICAgICBvcHRpb25zLmFkZE9wdGltaXphdGlvbihuZXcgUG9zdFByb2Nlc3Nlc09wdGltaXphdGlvbigzKSk7XG4gICAgICAgIG9wdGlvbnMuYWRkT3B0aW1pemF0aW9uKG5ldyBIYXJkd2FyZVNjYWxpbmdPcHRpbWl6YXRpb24oNCwgMikpO1xuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBGb2N1c0V2ZW50cyhvcHRpbWl6ZXI6IFNjZW5lT3B0aW1pemVyKSB7XG4gICAgICAgIGlmICh3aW5kb3cpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2V0dXBGb2N1c0V2ZW50c1wiKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJyxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9wdGltaXplciBzdGFydFwiKTtcbiAgICAgICAgICAgICAgICBvcHRpbWl6ZXIuc3RhcnQoKTtcbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JyxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9wdGltaXplciBzdG9wXCIpO1xuICAgICAgICAgICAgICAgIG9wdGltaXplci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgb3B0aW1pemVyLnJlc2V0KCk7XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge01hdGVyaWFsLCBCYWNrZ3JvdW5kTWF0ZXJpYWwsIEJhc2VUZXh0dXJlLCBDb2xvcjMsIEN1YmVUZXh0dXJlLCBNZXNoLCBTY2VuZSwgVGV4dHVyZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZVwiO1xuaW1wb3J0IHtTa3lNYXRlcmlhbH0gZnJvbSBcIkBiYWJ5bG9uanMvbWF0ZXJpYWxzXCI7XG5cblxuZXhwb3J0IGNsYXNzIHYzRFNreUJveCB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBfZW52aXJvbm1lbnRUZXh0dXJlQ0ROVXJsID0gXCJodHRwczovL2Fzc2V0cy5iYWJ5bG9uanMuY29tL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudFNwZWN1bGFyLmVudlwiO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2t5Ym94OiBNZXNoO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NreWJveEJhc2U6IE1lc2g7XG4gICAgZ2V0IHNreWJveCgpOiBNZXNoIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NreWJveDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2t5Ym94TWF0ZXJpYWw6IEJhY2tncm91bmRNYXRlcmlhbDtcbiAgICBwdWJsaWMgc2t5Ym94QmFzZU1hdGVyaWFsOiBTa3lNYXRlcmlhbDtcbiAgICBwdWJsaWMgc2t5Ym94UmVmbGVjdGlvblRleHR1cmU6IEN1YmVUZXh0dXJlO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHNjZW5lOiBTY2VuZSxcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB0ZXh0dXJlTmFtZTogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYm94U2l6ZTogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZW52VGV4dHVyZT86IEJhc2VUZXh0dXJlLFxuICAgICkge1xuICAgICAgICB0aGlzLl9za3lib3ggPSBNZXNoLkNyZWF0ZUJveChcIlNreWJveFwiLCBib3hTaXplLCB0aGlzLnNjZW5lLCB1bmRlZmluZWQsIE1lc2guQkFDS1NJREUpO1xuICAgICAgICB0aGlzLl9za3lib3hCYXNlID0gTWVzaC5DcmVhdGVCb3goXCJTa3lib3hCYXNlXCIsIGJveFNpemUrMSwgdGhpcy5zY2VuZSwgdW5kZWZpbmVkLCBNZXNoLkJBQ0tTSURFKTtcbiAgICAgICAgdGhpcy5jcmVhdGVNYXRlcmlhbCh0ZXh0dXJlTmFtZSk7XG4gICAgICAgIHRoaXMuX3NreWJveC5tYXRlcmlhbCA9IHRoaXMuc2t5Ym94TWF0ZXJpYWw7XG4gICAgICAgIHRoaXMuX3NreWJveEJhc2UubWF0ZXJpYWwgPSB0aGlzLnNreWJveEJhc2VNYXRlcmlhbDtcbiAgICAgICAgdGhpcy5fc2t5Ym94LnJlbmRlcmluZ0dyb3VwSWQgPSAwO1xuICAgICAgICB0aGlzLl9za3lib3hCYXNlLnJlbmRlcmluZ0dyb3VwSWQgPSAwO1xuICAgICAgICB0aGlzLl9za3lib3gubWF0ZXJpYWwudHJhbnNwYXJlbmN5TW9kZSA9IE1hdGVyaWFsLk1BVEVSSUFMX0FMUEhBVEVTVEFOREJMRU5EO1xuICAgICAgICB0aGlzLl9za3lib3gubWF0ZXJpYWwuYWxwaGEgPSAwLjU7XG4gICAgICAgIHRoaXMuc2V0dXBJbWFnZVByb2Nlc3NpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB0aGUgc2t5Ym94IG1hdGVyaWFsIGFuZCB0aGUgc2t5Ym94IHJlZmxlY3Rpb24gdGV4dHVyZVxuICAgICAqIEBwYXJhbSB0ZXh0dXJlTmFtZSBuYW1lIChVUkkpIHRvIHRoZSB0ZXh0dXJlIGZpbGVzXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZU1hdGVyaWFsKHRleHR1cmVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5za3lib3hCYXNlTWF0ZXJpYWwgPSBuZXcgU2t5TWF0ZXJpYWwoXCJTa3lib3hCYXNlTWF0ZXJpYWxcIiwgdGhpcy5zY2VuZSk7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwgPSBuZXcgQmFja2dyb3VuZE1hdGVyaWFsKFwiU2t5Ym94TWF0ZXJpYWxcIiwgdGhpcy5zY2VuZSk7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwuYmFja0ZhY2VDdWxsaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwudXNlUkdCQ29sb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5za3lib3hNYXRlcmlhbC5wcmltYXJ5Q29sb3IgPSBuZXcgQ29sb3IzKDEsIDEsIDEpO1xuICAgICAgICB0aGlzLnNreWJveE1hdGVyaWFsLmVuYWJsZU5vaXNlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5za3lib3hSZWZsZWN0aW9uVGV4dHVyZSA9IG5ldyBDdWJlVGV4dHVyZSh0ZXh0dXJlTmFtZSwgdGhpcy5zY2VuZSk7XG4gICAgICAgIHRoaXMuc2t5Ym94UmVmbGVjdGlvblRleHR1cmUuY29vcmRpbmF0ZXNNb2RlID0gVGV4dHVyZS5TS1lCT1hfTU9ERTtcbiAgICAgICAgdGhpcy5za3lib3hSZWZsZWN0aW9uVGV4dHVyZS5nYW1tYVNwYWNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2t5Ym94TWF0ZXJpYWwucmVmbGVjdGlvblRleHR1cmUgPSB0aGlzLnNreWJveFJlZmxlY3Rpb25UZXh0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIHRoZSBpbWFnZSBwcm9jZXNzaW5nIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIG9wdGlvbnMuXG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXR1cEltYWdlUHJvY2Vzc2luZygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2VuZS5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLmNvbnRyYXN0ID0gMS4yO1xuICAgICAgICB0aGlzLnNjZW5lLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uZXhwb3N1cmUgPSAwLjg7XG4gICAgICAgIHRoaXMuc2NlbmUuaW1hZ2VQcm9jZXNzaW5nQ29uZmlndXJhdGlvbi50b25lTWFwcGluZ0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjZW5lLmVudmlyb25tZW50VGV4dHVyZSA9IHRoaXMuZW52VGV4dHVyZSA/IHRoaXMuZW52VGV4dHVyZVxuICAgICAgICAgICAgOiBDdWJlVGV4dHVyZS5DcmVhdGVGcm9tUHJlZmlsdGVyZWREYXRhKHYzRFNreUJveC5fZW52aXJvbm1lbnRUZXh0dXJlQ0ROVXJsLCB0aGlzLnNjZW5lKTtcbiAgICB9XG59XG4iLCIvKiogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB2M2QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSxcbiAqIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cblxuaW1wb3J0IHtJU2hhZG93TGlnaHQsIExpZ2h0LFxuICAgIEFuaW1hdGlvbn0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZVwiO1xuaW1wb3J0IHtDb2xvcjMsIENvbG9yNCwgUXVhdGVybmlvbiwgU2l6ZSwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNJU2hhZG93TGlnaHQobGlnaHQ6IExpZ2h0KSA6IGxpZ2h0IGlzIElTaGFkb3dMaWdodCB7XG4gICAgcmV0dXJuIChsaWdodCBhcyBJU2hhZG93TGlnaHQpLnNldFNoYWRvd1Byb2plY3Rpb25NYXRyaXggIT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1hdGlvbkRhdGFUeXBlKHZhbHVlOiBhbnkpIHtcbiAgICBsZXQgZGF0YVR5cGUgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIWlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSAmJiBpc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVDtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgUXVhdGVybmlvbikge1xuICAgICAgICBkYXRhVHlwZSA9IEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX1FVQVRFUk5JT047XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlY3RvcjMpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9WRUNUT1IzO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBWZWN0b3IyKSB7XG4gICAgICAgIGRhdGFUeXBlID0gQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfVkVDVE9SMjtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQ29sb3IzKSB7XG4gICAgICAgIGRhdGFUeXBlID0gQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfQ09MT1IzO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBDb2xvcjQpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9DT0xPUjQ7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFNpemUpIHtcbiAgICAgICAgZGF0YVR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9TSVpFO1xuICAgIH1cblxuICAgIGlmIChkYXRhVHlwZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRhdGFUeXBlO1xuICAgIH1cbn1cbiIsIi8qKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHYzZCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLFxuICogWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuXG5pbXBvcnQge0FyY1JvdGF0ZUNhbWVyYX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9DYW1lcmFzL2FyY1JvdGF0ZUNhbWVyYVwiO1xuaW1wb3J0IHtTY2VuZX0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9zY2VuZVwiO1xuaW1wb3J0IHtFbmdpbmV9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRW5naW5lcy9lbmdpbmVcIjtcbmltcG9ydCB7U2NlbmVMb2FkZXJ9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9zY2VuZUxvYWRlclwiO1xuaW1wb3J0IHtDb2xvcjMsIENvbG9yNCwgVmVjdG9yM30gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoXCI7XG5cbmltcG9ydCB7R0xURkxvYWRlckV4dGVuc2lvbk9ic2VydmVyfSBmcm9tIFwiLi9pbXBvcnRlci9sb2FkZXItb2JzZXJ2ZXJcIjtcbmltcG9ydCB7XG4gICAgVlJNRmlsZUxvYWRlcixcbiAgICBWUk1Mb2FkZXJFeHRlbnNpb24sXG4gICAgVlJNTWFuYWdlclxufSBmcm9tIFwiLi9pbXBvcnRlci9iYWJ5bG9uLXZybS1sb2FkZXIvc3JjXCI7XG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSBcIkBiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMFwiO1xuaW1wb3J0IHsgSGVtaXNwaGVyaWNMaWdodCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL2hlbWlzcGhlcmljTGlnaHRcIjtcbmltcG9ydCB7QW5pbWF0aW9uLCBBbmltYXRhYmxlLCBDYW1lcmEsIERlZmF1bHRSZW5kZXJpbmdQaXBlbGluZSwgRXZlbnRTdGF0ZSwgSVNoYWRvd0xpZ2h0LCBTaGFkb3dHZW5lcmF0b3IsIERlcHRoT2ZGaWVsZEVmZmVjdEJsdXJMZXZlbCwgSUFuaW1hdGlvbktleSwgRWFzaW5nRnVuY3Rpb24sIE51bGxhYmxlLCBTY2VuZU9wdGltaXplck9wdGlvbnMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlXCI7XG5pbXBvcnQge2dldEFuaW1hdGlvbkRhdGFUeXBlLCBpc0lTaGFkb3dMaWdodH0gZnJvbSBcIi4vdXRpbGl0aWVzL3R5cGVzXCI7XG5pbXBvcnQge1YzRFNjZW5lT3B0aW1pemVyfSBmcm9tIFwiLi9zY2VuZS9vcHRpbWl6ZXJcIjtcbmltcG9ydCB7djNEU2t5Qm94fSBmcm9tIFwiLi9zY2VuZS9za3lib3hcIjtcblxuXG5leHBvcnQgY2xhc3MgVjNEQ29yZSBpbXBsZW1lbnRzIEdMVEZMb2FkZXJFeHRlbnNpb25PYnNlcnZlciB7XG5cbiAgICBwdWJsaWMgc3RhdGljIEZSQU1FUkFURSA9IDYwO1xuXG4gICAgLyoqXG4gICAgICogR0xURkZpbGVMb2FkZXIgcGx1Z2luIGZhY3RvcnlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX3ZybUZpbGVMb2FkZXIgPSBuZXcgVlJNRmlsZUxvYWRlcigpO1xuXG4gICAgLy8gV2hldGhlciBzdGFydHMgc3ByaW5nIGJvbmVzIGFuaW1hdGlvbiBhdXRvbWF0aWNhbGx5XG4gICAgcHJpdmF0ZSBfc3ByaW5nQm9uZXNBdXRvVXBkYXRlID0gdHJ1ZTtcbiAgICBnZXQgc3ByaW5nQm9uZXNBdXRvVXBkYXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3ByaW5nQm9uZXNBdXRvVXBkYXRlO1xuICAgIH1cbiAgICBzZXQgc3ByaW5nQm9uZXNBdXRvVXBkYXRlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3NwcmluZ0JvbmVzQXV0b1VwZGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNoYWRvdyBnZW5lcmF0b3JzXG4gICAgICovXG4gICAgcHJpdmF0ZSBfc2hhZG93R2VuZXJhdG9yczpcbiAgICAgICAgTWFwPElTaGFkb3dMaWdodCwgU2hhZG93R2VuZXJhdG9yPiA9XG4gICAgICAgIG5ldyBNYXA8SVNoYWRvd0xpZ2h0LCBTaGFkb3dHZW5lcmF0b3I+KCk7XG5cbiAgICAvKipcbiAgICAgKiBTY2VuZSBvcHRpbWl6ZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIF9zY2VuZU9wdGltaXplcjogVjNEU2NlbmVPcHRpbWl6ZXI7XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJpbmcgcGlwZWxpbmVcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZW5kZXJpbmdQaXBlbGluZTogRGVmYXVsdFJlbmRlcmluZ1BpcGVsaW5lO1xuICAgIGdldCByZW5kZXJpbmdQaXBlbGluZSgpOiBEZWZhdWx0UmVuZGVyaW5nUGlwZWxpbmUge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2tzIHdoZW4gbG9hZGluZyBpcyBkb25lXG4gICAgICovXG4gICAgcHJpdmF0ZSBfb25Mb2FkQ29tcGxldGVDYWxsYmFja3M6IEZ1bmN0aW9uW10gPSBbXTtcbiAgICBwdWJsaWMgYWRkT25Mb2FkQ29tcGxldGVDYWxsYmFja3MoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX29uTG9hZENvbXBsZXRlQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVPbkxvYWRDb21wbGV0ZUNhbGxiYWNrKGNhbGxiYWNrOiBGdW5jdGlvbikge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9vbkxvYWRDb21wbGV0ZUNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgaWYoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fb25Mb2FkQ29tcGxldGVDYWxsYmFja3Muc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXRPbkxvYWRDb21wbGV0ZUNhbGxiYWNrcygpIHtcbiAgICAgICAgdGhpcy5fb25Mb2FkQ29tcGxldGVDYWxsYmFja3MgPSBbXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9iZWZvcmVSZW5kZXJGdW5jOlxuICAgICAgICAoZXZlbnREYXRhOiBTY2VuZSwgZXZlbnRTdGF0ZTogRXZlbnRTdGF0ZSkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAgIHByaXZhdGUgX2FmdGVyUmVuZGVyRnVuYzpcbiAgICAgICAgKGV2ZW50RGF0YTogU2NlbmUsIGV2ZW50U3RhdGU6IEV2ZW50U3RhdGUpID0+IHZvaWQgPSAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgbWFuYWdlciBvZiB0aGlzLmxvYWRlZFZSTU1hbmFnZXJzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fc3ByaW5nQm9uZXNBdXRvVXBkYXRlKVxuICAgICAgICAgICAgICAgIG1hbmFnZXIudXBkYXRlKHRoaXMuZW5naW5lLmdldERlbHRhVGltZSgpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwdWJsaWMgdXBkYXRlQmVmb3JlUmVuZGVyRnVuY3Rpb24oXG4gICAgICAgIGZ1bmM6IChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX2JlZm9yZVJlbmRlckZ1bmMgPSBmdW5jO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVBZnRlclJlbmRlckZ1bmN0aW9uKFxuICAgICAgICBmdW5jOiAoZXZlbnREYXRhOiBTY2VuZSwgZXZlbnRTdGF0ZTogRXZlbnRTdGF0ZSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9hZnRlclJlbmRlckZ1bmMgPSBmdW5jO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NhbWVyYU9uQmVmb3JlUmVuZGVyRnVuYzogRnVuY3Rpb25bXSA9IFtdO1xuICAgIHByaXZhdGUgX21haW5DYW1lcmE6IENhbWVyYTtcbiAgICBnZXQgbWFpbkNhbWVyYSgpOiBDYW1lcmEge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFpbkNhbWVyYTtcbiAgICB9XG4gICAgc2V0IG1haW5DYW1lcmEodmFsdWU6IENhbWVyYSkge1xuICAgICAgICB0aGlzLl9tYWluQ2FtZXJhID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHNreUJveDogdjNEU2t5Qm94ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIExvYWRlZCBWUk0gTWFuYWdlcnNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBsb2FkZWRWUk1NYW5hZ2VyczogVlJNTWFuYWdlcltdID0gW107XG4gICAgcHVibGljIGFkZFZSTU1hbmFnZXIobWFuYWdlcjogVlJNTWFuYWdlcikge1xuICAgICAgICBpZiAobWFuYWdlcilcbiAgICAgICAgICAgIHRoaXMubG9hZGVkVlJNTWFuYWdlcnMucHVzaChtYW5hZ2VyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgVlJNIE1hbmFnZXIgYnkgaW5kZXhcbiAgICAgKiBAcGFyYW0gaWR4XG4gICAgICovXG4gICAgcHVibGljIGdldFZSTU1hbmFnZXJCeUluZGV4KGlkeDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiAoaWR4ID49IDAgJiYgaWR4IDwgdGhpcy5sb2FkZWRWUk1NYW5hZ2Vycy5sZW5ndGgpXG4gICAgICAgICAgICA/IHRoaXMubG9hZGVkVlJNTWFuYWdlcnNbaWR4XVxuICAgICAgICAgICAgOiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBWUk0gTWFuYWdlciBieSBVUklcbiAgICAgKiBWUk0gZG9lc24ndCBoYXZlIGFueSBVSUQgaW4gbWV0YWRhdGEuIFRpdGxlIGNhbiBiZSB1bmZpbGxlZCB0b28uXG4gICAgICogRmlsZW5hbWUgaXMgdGhlIG9ubHkgcmVhc29uYWJsZSBJRC5cbiAgICAgKiBAcGFyYW0gdXJpXG4gICAgICovXG4gICAgLy8gVlJNIGRvZXNuJ3QgaGF2ZSBhbnkgVUlEIGluIG1ldGFkYXRhLiBUaXRsZSBjYW4gYmUgdW5maWxsZWQgdG9vLlxuICAgIC8vIEZpbGVuYW1lIGlzIHRoZSBvbmx5IHJlYXNvbmFibGUgSUQuXG4gICAgcHVibGljIGdldFZSTU1hbmFnZXJCeVVSSSh1cmk6IFN0cmluZykge1xuICAgICAgICBmb3IgKGNvbnN0IG1hbmFnZXIgb2YgdGhpcy5sb2FkZWRWUk1NYW5hZ2Vycykge1xuICAgICAgICAgICAgaWYgKG1hbmFnZXIudXJpID09PSB1cmkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSBlbmdpbmU6IEVuZ2luZSxcbiAgICAgICAgcHVibGljIHNjZW5lPzogU2NlbmUsXG4gICAgICAgIGNhbWVyYT86IENhbWVyYSxcbiAgICApIHtcbiAgICAgICAgLy8gUmVnaXN0ZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlclZybVBsdWdpbigpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVnJtRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnNjZW5lKVxuICAgICAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBTY2VuZSh0aGlzLmVuZ2luZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuZW5naW5lID0gdGhpcy5zY2VuZS5nZXRFbmdpbmUoKTtcblxuICAgICAgICB0aGlzLnNldHVwT2JzZXJ2YWJsZSgpO1xuICAgICAgICB0aGlzLmVuYWJsZVJlc2l6ZSgpO1xuXG4gICAgICAgIGlmIChjYW1lcmEpIHtcbiAgICAgICAgICAgIHRoaXMuX21haW5DYW1lcmEgPSBjYW1lcmE7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN3aXRjaEFjdGl2ZUNhbWVyYShjYW1lcmEpO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIHRoaXMuYWRkQ2FtZXJhKCk7XG4gICAgICAgIHRoaXMuX3JlbmRlcmluZ1BpcGVsaW5lID0gbmV3IERlZmF1bHRSZW5kZXJpbmdQaXBlbGluZShcbiAgICAgICAgICAgIFwiZGVmYXVsdFBpcGVsaW5lXCIsIC8vIFRoZSBuYW1lIG9mIHRoZSBwaXBlbGluZVxuICAgICAgICAgICAgdHJ1ZSwgLy8gRG8geW91IHdhbnQgdGhlIHBpcGVsaW5lIHRvIHVzZSBIRFIgdGV4dHVyZT9cbiAgICAgICAgICAgIHRoaXMuc2NlbmUsIC8vIFRoZSBzY2VuZSBpbnN0YW5jZVxuICAgICAgICAgICAgW3RoaXMuX21haW5DYW1lcmFdIC8vIFRoZSBsaXN0IG9mIGNhbWVyYXMgdG8gYmUgYXR0YWNoZWQgdG9cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zZXR1cFJlbmRlcmluZ1BpcGVsaW5lKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBiYWNrZ3JvdW5kIHRyYW5zcGFyZW50LlxuICAgICAqL1xuICAgIHB1YmxpYyB0cmFuc3BhcmVudEJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMuc2NlbmUuY2xlYXJDb2xvci5hID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGJhY2tncm91bmQgc29saWQuXG4gICAgICovXG4gICAgcHVibGljIHNvbGlkQmFja2dyb3VuZCgpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5jbGVhckNvbG9yLmEgPSAxO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZSBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgICAqIEBwYXJhbSBjb2xvclxuICAgICAqL1xuICAgIHB1YmxpYyBzZXRCYWNrZ3JvdW5kQ29sb3IoY29sb3I6IENvbG9yMykge1xuICAgICAgICB0aGlzLnNjZW5lLmNsZWFyQ29sb3IgPSBDb2xvcjQuRnJvbUNvbG9yMyhjb2xvciwgdGhpcy5zY2VuZS5jbGVhckNvbG9yLmEpLnRvTGluZWFyU3BhY2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYmFja2dyb3VuZCBjb2xvciBmcm9tIGhleCBzdHJpbmcuXG4gICAgICogQHBhcmFtIGhleCBIZXggY29sb3Igc3RyaW5nXG4gICAgICovXG4gICAgcHVibGljIHNldEJhY2tncm91bmRDb2xvckhleChoZXg6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNldEJhY2tncm91bmRDb2xvcihDb2xvcjMuRnJvbUhleFN0cmluZyhoZXgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYW1iaWVudCBsaWdodC5cbiAgICAgKiBAcGFyYW0gY29sb3IgY29sb3Igb2YgdGhlIGxpZ2h0XG4gICAgICovXG4gICAgcHVibGljIGFkZEFtYmllbnRMaWdodChjb2xvcj86IENvbG9yMykge1xuICAgICAgICBjb25zdCBsaWdodCA9IG5ldyBIZW1pc3BoZXJpY0xpZ2h0KFxuICAgICAgICAgICAgXCJWM0RIZW1pTGlnaHRcIixcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKDAsIDEsIDEpLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgaWYgKGNvbG9yKVxuICAgICAgICAgICAgbGlnaHQuZGlmZnVzZSA9IGNvbG9yO1xuICAgICAgICBsaWdodC5zZXRFbmFibGVkKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGJhc2ljIGFyYyByb3RhdGUgY2FtZXJhIHRvIHNjZW5lLlxuICAgICAqIFRPRE86IHRoZXJlIHNlZW1zIHRvIGJlIGEgYnVnIHdoZW4gbWVzaGVzIGFyZSBuZWFyIHRoZSBlZGdlIG9mIGNhbWVyYSBjb25lXG4gICAgICogUHJvYmFibHkgaGFzIHNvbWV0aGluZyB0byBkbyB3aXRoIGN1bGxpbmdcbiAgICAgKiBAcGFyYW0gcmFkaXVzIHJvdGF0aW9uIHJhZGl1c1xuICAgICAqL1xuICAgIHByaXZhdGUgYWRkQ2FtZXJhKFxuICAgICAgICByYWRpdXM6IG51bWJlciA9IDMsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBBcmNSb3RhdGVDYW1lcmEoXG4gICAgICAgICAgICAnVjNETWFpbkNhbWVyYScsXG4gICAgICAgICAgICAwLCAwLCByYWRpdXMsXG4gICAgICAgICAgICBuZXcgVmVjdG9yMygwLCAwLCAwKSxcbiAgICAgICAgICAgIHRoaXMuc2NlbmUsIHRydWUpO1xuICAgICAgICBjYW1lcmEubG93ZXJSYWRpdXNMaW1pdCA9IDAuMTtcbiAgICAgICAgY2FtZXJhLnVwcGVyUmFkaXVzTGltaXQgPSAyMDtcbiAgICAgICAgY2FtZXJhLndoZWVsRGVsdGFQZXJjZW50YWdlID0gMC4wNTtcbiAgICAgICAgY2FtZXJhLm1pblogPSAwO1xuICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3IFZlY3RvcjMoMCwgMS41LCAtNSkpO1xuICAgICAgICBjYW1lcmEuYXR0YWNoQ29udHJvbCh0aGlzLmVuZ2luZS5nZXRSZW5kZXJpbmdDYW52YXMoKSk7XG5cbiAgICAgICAgdGhpcy5fbWFpbkNhbWVyYSA9IGNhbWVyYTtcbiAgICAgICAgdGhpcy5zY2VuZS5zd2l0Y2hBY3RpdmVDYW1lcmEodGhpcy5fbWFpbkNhbWVyYSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXR0YWNoIGEgYXJjIHJvdGF0ZSBmb2xsb3dpbmcgY2FtZXJhIHRvIFZSTSBtb2RlbC5cbiAgICAgKiBQcm9iYWJseSBoYXMgc29tZXRoaW5nIHRvIGRvIHdpdGggY3VsbGluZ1xuICAgICAqIEBwYXJhbSBtYW5hZ2VyIFZSTSBNYW5hZ2VyIHRvIGF0dGFjaCB0aGUgY2FtZXJhIHRvXG4gICAgICogQHBhcmFtIHJhZGl1cyByb3RhdGlvbiByYWRpdXNcbiAgICAgKi9cbiAgICBwdWJsaWMgYXR0YWNoQ2FtZXJhVG8oXG4gICAgICAgIG1hbmFnZXI6IFZSTU1hbmFnZXIsXG4gICAgICAgIHJhZGl1czogbnVtYmVyID0gMyxcbiAgICApIHtcbiAgICAgICAgY29uc3QgY2FtZXJhID0gbmV3IEFyY1JvdGF0ZUNhbWVyYShcbiAgICAgICAgICAgICdWM0RBcmNDYW1lcmEnICsgbWFuYWdlci5jYW1lcmFzLmxlbmd0aCxcbiAgICAgICAgICAgIDAsIDAsIHJhZGl1cywgbWFuYWdlci5yb290TWVzaC5wb3NpdGlvbixcbiAgICAgICAgICAgIHRoaXMuc2NlbmUsIHRydWUpO1xuICAgICAgICBjYW1lcmEubG93ZXJSYWRpdXNMaW1pdCA9IDAuMTtcbiAgICAgICAgY2FtZXJhLnVwcGVyUmFkaXVzTGltaXQgPSAyMDtcbiAgICAgICAgY2FtZXJhLndoZWVsRGVsdGFQZXJjZW50YWdlID0gMC4wNTtcbiAgICAgICAgY2FtZXJhLm1pblogPSAwO1xuICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24obmV3IFZlY3RvcjMoMCwgMS41LCAtNSkpO1xuICAgICAgICBjYW1lcmEuc2V0VGFyZ2V0KG1hbmFnZXIucm9vdE1lc2guZ2V0QWJzb2x1dGVQb3NpdGlvbigpKTtcbiAgICAgICAgY2FtZXJhLmF0dGFjaENvbnRyb2wodGhpcy5lbmdpbmUuZ2V0UmVuZGVyaW5nQ2FudmFzKCkpO1xuXG4gICAgICAgIG1hbmFnZXIuYXBwZW5kQ2FtZXJhKGNhbWVyYSk7XG5cbiAgICAgICAgdGhpcy5fY2FtZXJhT25CZWZvcmVSZW5kZXJGdW5jLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgY2FtZXJhLnNldFRhcmdldChtYW5hZ2VyLnJvb3RNZXNoLmdldEFic29sdXRlUG9zaXRpb24oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ3JlYXRlIGEgc2t5Ym94IGZvciB0aGUgc2NlbmUuXG4gICAgICogQHBhcmFtIHNpemUgc2l6ZSBvZiB0aGUgc2t5Ym94XG4gICAgICogQHBhcmFtIHRleHR1cmVOYW1lIHBhdGggdG8gc2t5Ym94IHRleHR1cmVcbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlU2t5Qm94KFxuICAgICAgICBzaXplOiBudW1iZXIsXG4gICAgICAgIHRleHR1cmVOYW1lPzogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBpZiAoIXRoaXMuc2t5Qm94KSB7XG4gICAgICAgICAgICB0aGlzLnNreUJveCA9IG5ldyB2M0RTa3lCb3godGhpcy5zY2VuZSxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlTmFtZSA/IHRleHR1cmVOYW1lIDogXCJ0ZXh0dXJlL3NreWJveFwiLCBzaXplKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBzaGFkb3cgY2FzdGVyIGZvciBsaWdodC5cbiAgICAgKiBAcGFyYW0gbGlnaHQgTGlnaHQgdG8gZW5hYmxlIHNoYWRvd3MuXG4gICAgICovXG4gICAgcHVibGljIGVuYWJsZVNoYWJvd3MobGlnaHQ/OiBJU2hhZG93TGlnaHQpIHtcbiAgICAgICAgaWYgKGxpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3NoYWRvd0dlbmVyYXRvcnMuaGFzKGxpZ2h0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoYWRvd0dlbmVyYXRvciA9IG5ldyBTaGFkb3dHZW5lcmF0b3IoMTAyNCwgbGlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBTaGFkb3dHZW5lcmF0b3Ioc2hhZG93R2VuZXJhdG9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaGFkb3dHZW5lcmF0b3JzLnNldChsaWdodCwgc2hhZG93R2VuZXJhdG9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTGlnaHQgXCIgKyBsaWdodC5uYW1lICsgXCIgYWxyZWFkeSBoYXMgYSBzaGFkb3cgZ2VuZXJhdG9yIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLnNjZW5lLmxpZ2h0cykge1xuICAgICAgICAgICAgICAgIGlmIChpc0lTaGFkb3dMaWdodChsKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGFkb3dHZW5lcmF0b3IgPSBuZXcgU2hhZG93R2VuZXJhdG9yKDEwMjQsIGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHVwU2hhZG93R2VuZXJhdG9yKHNoYWRvd0dlbmVyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NoYWRvd0dlbmVyYXRvcnMuc2V0KGwsIHNoYWRvd0dlbmVyYXRvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvcnJlc3BvbmRpbmcgc2hhZG93IGdlbmVyYXRvciBmb3IgbGlnaHQuXG4gICAgICogQHBhcmFtIGxpZ2h0IExpZ2h0IHRvIGdldCBzaGFkb3cgZ2VuZXJhdG9yXG4gICAgICovXG4gICAgcHVibGljIGdldFNoYWRvd25HZW5lcmF0b3IobGlnaHQ6IElTaGFkb3dMaWdodCk6IE51bGxhYmxlPFNoYWRvd0dlbmVyYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hhZG93R2VuZXJhdG9ycy5nZXQobGlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBzdGFydGluZyBhbmltYXRpb25cbiAgICAgKiBAcGFyYW0gdGFyZ2V0XG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gZHVyYXRpb25cbiAgICAgKiBAcGFyYW0gZnJvbVxuICAgICAqIEBwYXJhbSB0b1xuICAgICAqIEBwYXJhbSBsb29wTW9kZVxuICAgICAqIEBwYXJhbSBlYXNpbmdGdW5jdGlvblxuICAgICAqIEBwYXJhbSBlYXNpbmdNb2RlXG4gICAgICovXG4gICAgcHVibGljIHN0YXJ0UXVpY2tBbmltYXRpb24oXG4gICAgICAgIHRhcmdldDogYW55LFxuICAgICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICAgIHByb3BlcnR5OiBzdHJpbmcsXG4gICAgICAgIGR1cmF0aW9uOiBudW1iZXIsXG4gICAgICAgIGZyb206IGFueSxcbiAgICAgICAgdG86IGFueSxcbiAgICAgICAgbG9vcE1vZGU/OiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgICAgIGVhc2luZ0Z1bmN0aW9uPzogRWFzaW5nRnVuY3Rpb24sXG4gICAgICAgIGVhc2luZ01vZGU/OiBudW1iZXJcbiAgICApOiBBbmltYXRhYmxlIHtcbiAgICAgICAgY29uc3QgYW5pbSA9IHRoaXMuY3JlYXRlQW5pbWF0aW9uKFxuICAgICAgICAgICAgdGFyZ2V0LCBuYW1lLCBwcm9wZXJ0eSxcbiAgICAgICAgICAgIFt7ZnJhbWU6IDAsIHZhbHVlOiBmcm9tfSwge2ZyYW1lOiBkdXJhdGlvbiwgdmFsdWU6IHRvfV0sXG4gICAgICAgICAgICBsb29wTW9kZSwgZWFzaW5nRnVuY3Rpb24sIGVhc2luZ01vZGVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuYmVnaW5EaXJlY3RBbmltYXRpb24oYW5pbVswXSwgW2FuaW1bMV1dLCAwLCBkdXJhdGlvbixcbiAgICAgICAgICAgIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtIHRhcmdldFxuICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICogQHBhcmFtIHByb3BlcnR5XG4gICAgICogQHBhcmFtIGtleUZyYW1lc1xuICAgICAqIEBwYXJhbSBsb29wTW9kZVxuICAgICAqIEBwYXJhbSBlYXNpbmdGdW5jdGlvblxuICAgICAqIEBwYXJhbSBlYXNpbmdNb2RlXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZUFuaW1hdGlvbihcbiAgICAgICAgdGFyZ2V0OiBhbnksXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgcHJvcGVydHk6IHN0cmluZyxcbiAgICAgICAga2V5RnJhbWVzOiBBcnJheTxJQW5pbWF0aW9uS2V5PixcbiAgICAgICAgbG9vcE1vZGU/OiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgICAgIGVhc2luZ0Z1bmN0aW9uPzogRWFzaW5nRnVuY3Rpb24sXG4gICAgICAgIGVhc2luZ01vZGU/OiBudW1iZXIsXG4gICAgKTogW2FueSwgQW5pbWF0aW9uXSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBrZXlGcmFtZXMgaXMgbm90IGVtcHR5XG4gICAgICAgIGlmIChrZXlGcmFtZXMubGVuZ3RoIDwgMSlcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiS2V5IEZyYW1lcyBlbXB0eVwiKTtcblxuICAgICAgICAvLyBHZXQgZGF0YSB0eXBlXG4gICAgICAgIGNvbnN0IGRhdGFUeXBlID0gZ2V0QW5pbWF0aW9uRGF0YVR5cGUoa2V5RnJhbWVzWzBdLnZhbHVlKTtcbiAgICAgICAgaWYgKGRhdGFUeXBlID09PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDYW5ub3QgZGV0ZXJtaW5lIGRhdGEgdHlwZSBmcm9tIGtleWZyYW1lcyFcIik7XG5cbiAgICAgICAgY29uc3QgYW5pbWF0aW9uID0gbmV3IEFuaW1hdGlvbihcbiAgICAgICAgICAgIG5hbWUsIHByb3BlcnR5LCBWM0RDb3JlLkZSQU1FUkFURSxcbiAgICAgICAgICAgIGRhdGFUeXBlLCBsb29wTW9kZSk7XG4gICAgICAgIGFuaW1hdGlvbi5zZXRLZXlzKGtleUZyYW1lcyk7XG5cbiAgICAgICAgaWYgKGVhc2luZ0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZWFzaW5nTW9kZSlcbiAgICAgICAgICAgICAgICBlYXNpbmdGdW5jdGlvbi5zZXRFYXNpbmdNb2RlKGVhc2luZ01vZGUpO1xuICAgICAgICAgICAgYW5pbWF0aW9uLnNldEVhc2luZ0Z1bmN0aW9uKGVhc2luZ0Z1bmN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbdGFyZ2V0LCBhbmltYXRpb25dO1xuICAgIH1cblxuICAgIHB1YmxpYyBlbmFibGVPcHRpbWl6ZXIob3B0aW9ucz86IFNjZW5lT3B0aW1pemVyT3B0aW9ucykge1xuICAgICAgICB0aGlzLl9zY2VuZU9wdGltaXplciA9IG5ldyBWM0RTY2VuZU9wdGltaXplcih0aGlzLnNjZW5lLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBtYWtlIHdyYXBwZXJzIHN0YXRpYywgc28gcGx1Z2lucyB3aWxsIGFsd2F5cyBiZSByZWdpc3RlcmVkXG4gICAgLyoqXG4gICAgICogV3JhcHBlciBmb3IgU2NlbmVMb2FkZXIuQXBwZW5kQXN5bmMuXG4gICAgICogQHBhcmFtIHJvb3RVcmwgYSBzdHJpbmcgdGhhdCBkZWZpbmVzIHRoZSByb290IHVybCBmb3IgdGhlIHNjZW5lIGFuZCByZXNvdXJjZXMgb3IgdGhlIGNvbmNhdGVuYXRpb24gb2Ygcm9vdFVSTCBhbmQgZmlsZW5hbWVcbiAgICAgKiBAcGFyYW0gc2NlbmVGaWxlbmFtZSBhIHN0cmluZyB0aGF0IGRlZmluZXMgdGhlIG5hbWUgb2YgdGhlIHNjZW5lIGZpbGUgb3Igc3RhcnRzIHdpdGggXCJkYXRhOlwiIGZvbGxvd2luZyBieSB0aGUgc3RyaW5naWZpZWQgdmVyc2lvbiBvZiB0aGUgc2NlbmUgb3IgYSBGaWxlIG9iamVjdCAoZGVmYXVsdDogZW1wdHkgc3RyaW5nKVxuICAgICAqL1xuICAgIHB1YmxpYyBBcHBlbmRBc3luYyhcbiAgICAgICAgcm9vdFVybDogc3RyaW5nLFxuICAgICAgICBzY2VuZUZpbGVuYW1lPzogc3RyaW5nIHwgRmlsZSxcbiAgICApOiBQcm9taXNlPFNjZW5lPiB7XG4gICAgICAgIHJldHVybiBTY2VuZUxvYWRlci5BcHBlbmRBc3luYyhyb290VXJsLCBzY2VuZUZpbGVuYW1lLCB0aGlzLnNjZW5lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcGVyIGZvciBTY2VuZUxvYWRlci5Mb2FkQXN5bmNcbiAgICAgKiBAcGFyYW0gcm9vdFVybCBhIHN0cmluZyB0aGF0IGRlZmluZXMgdGhlIHJvb3QgdXJsIGZvciB0aGUgc2NlbmUgYW5kIHJlc291cmNlcyBvciB0aGUgY29uY2F0ZW5hdGlvbiBvZiByb290VVJMIGFuZCBmaWxlbmFtZVxuICAgICAqIEBwYXJhbSBzY2VuZUZpbGVuYW1lIGEgc3RyaW5nIHRoYXQgZGVmaW5lcyB0aGUgbmFtZSBvZiB0aGUgc2NlbmUgZmlsZSBvciBzdGFydHMgd2l0aCBcImRhdGE6XCIgZm9sbG93aW5nIGJ5IHRoZSBzdHJpbmdpZmllZCB2ZXJzaW9uIG9mIHRoZSBzY2VuZSBvciBhIEZpbGUgb2JqZWN0IChkZWZhdWx0OiBlbXB0eSBzdHJpbmcpXG4gICAgICovXG4gICAgcHVibGljIExvYWRBc3luYyhcbiAgICAgICAgcm9vdFVybDogc3RyaW5nLFxuICAgICAgICBzY2VuZUZpbGVuYW1lPzogc3RyaW5nIHwgRmlsZSxcbiAgICApOiBQcm9taXNlPFNjZW5lPiB7XG4gICAgICAgIHJldHVybiBTY2VuZUxvYWRlci5Mb2FkQXN5bmMocm9vdFVybCwgc2NlbmVGaWxlbmFtZSwgdGhpcy5lbmdpbmUpO1xuICAgIH1cblxuICAgIC8vIEdMVEZMb2FkZXJFeHRlbnNpb25PYnNlcnZlclxuICAgIHB1YmxpYyBvbkxvYWRSZWFkeSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMuX29uTG9hZENvbXBsZXRlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICBmKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdXAgZm9yIHRpbWUgdXBkYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXR1cE9ic2VydmFibGUoKSB7XG4gICAgICAgIHRoaXMuc2NlbmUub25CZWZvcmVSZW5kZXJPYnNlcnZhYmxlLmFkZChcbiAgICAgICAgICAgIChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYmVmb3JlUmVuZGVyRnVuYyhldmVudERhdGEsIGV2ZW50U3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICAvLyBDYW1lcmFcbiAgICAgICAgdGhpcy5zY2VuZS5vbkJlZm9yZVJlbmRlck9ic2VydmFibGUuYWRkKFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZiBvZiB0aGlzLl9jYW1lcmFPbkJlZm9yZVJlbmRlckZ1bmMpXG4gICAgICAgICAgICAgICAgICAgIGYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICAvLyBVcGRhdGUgc2Vjb25kYXJ5IGFuaW1hdGlvblxuICAgICAgICB0aGlzLnNjZW5lLm9uQWZ0ZXJSZW5kZXJPYnNlcnZhYmxlLmFkZChcbiAgICAgICAgICAgIChldmVudERhdGE6IFNjZW5lLCBldmVudFN0YXRlOiBFdmVudFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWZ0ZXJSZW5kZXJGdW5jKGV2ZW50RGF0YSwgZXZlbnRTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbmFibGVSZXNpemUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLmdldFJlbmRlcmluZ0NhbnZhcygpLm9ucmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUucmVzaXplKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwU2hhZG93R2VuZXJhdG9yKHNoYWRvd0dlbmVyYXRvcjogYW55KSB7XG4gICAgICAgIHNoYWRvd0dlbmVyYXRvci51c2VQZXJjZW50YWdlQ2xvc2VyRmlsdGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgc2hhZG93R2VuZXJhdG9yLmZpbHRlcmluZ1F1YWxpdHkgPSBTaGFkb3dHZW5lcmF0b3IuUVVBTElUWV9ISUdIO1xuICAgIH1cblxuICAgIC8vIFRPRE8gVW5yZWdpc3RlclxuICAgIHByaXZhdGUgcmVnaXN0ZXJWcm1FeHRlbnNpb24oKSB7XG4gICAgICAgIC8vIOODreODvOODgOODvOOBq+eZu+mMsuOBmeOCi1xuICAgICAgICBHTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKFZSTUxvYWRlckV4dGVuc2lvbi5OQU1FLCAobG9hZGVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZSTUxvYWRlckV4dGVuc2lvbihsb2FkZXIsIHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyVnJtUGx1Z2luKCkge1xuICAgICAgICBpZiAoU2NlbmVMb2FkZXIgJiYgU2NlbmVMb2FkZXIuR2V0UGx1Z2luRm9yRXh0ZW5zaW9uKCcudnJtJykubmFtZSA9PT0gJ2JhYnlsb24uanMnKSB7XG4gICAgICAgICAgICBTY2VuZUxvYWRlci5SZWdpc3RlclBsdWdpbih0aGlzLl92cm1GaWxlTG9hZGVyKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIHNldHVwUmVuZGVyaW5nUGlwZWxpbmUoKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmluZ1BpcGVsaW5lLnNhbXBsZXMgPSA0O1xuICAgICAgICB0aGlzLl9yZW5kZXJpbmdQaXBlbGluZS5kZXB0aE9mRmllbGRFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuZGVwdGhPZkZpZWxkQmx1ckxldmVsID0gRGVwdGhPZkZpZWxkRWZmZWN0Qmx1ckxldmVsLk1lZGl1bTtcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuZGVwdGhPZkZpZWxkLmZvY3VzRGlzdGFuY2UgID0gMjAwMDsgLy8gZGlzdGFuY2Ugb2YgdGhlIGN1cnJlbnQgZm9jdXMgcG9pbnQgZnJvbSB0aGUgY2FtZXJhIGluIG1pbGxpbWV0ZXJzIGNvbnNpZGVyaW5nIDEgc2NlbmUgdW5pdCBpcyAxIG1ldGVyXG4gICAgICAgIHRoaXMuX3JlbmRlcmluZ1BpcGVsaW5lLmRlcHRoT2ZGaWVsZC5mb2NhbExlbmd0aCAgPSAxMDsgLy8gZm9jYWwgbGVuZ3RoIG9mIHRoZSBjYW1lcmEgaW4gbWlsbGltZXRlcnNcbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nUGlwZWxpbmUuZGVwdGhPZkZpZWxkLmZTdG9wICA9IDEuNDsgLy8gYWthIEYgbnVtYmVyIG9mIHRoZSBjYW1lcmEgZGVmaW5lZCBpbiBzdG9wcyBhcyBpdCB3b3VsZCBiZSBvbiBhIHBoeXNpY2FsIGRldmljZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVjNEQ29yZTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0XCJtYWluXCI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3YzZF9jb3JlXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3YzZF9jb3JlXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbXCJiYWJ5bG9uanNcIl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgtdGVzdC50c1wiKSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9